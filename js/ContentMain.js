var ca, ha = "function" == typeof Object.defineProperties ? Object.defineProperty : function(a, b, c) {
  if (a == Array.prototype || a == Object.prototype) {
    return a;
  }
  a[b] = c.value;
  return a;
};
function ja(a) {
  a = ["object" == typeof globalThis && globalThis, a, "object" == typeof window && window, "object" == typeof self && self, "object" == typeof global && global,];
  for (var b = 0; b < a.length; ++b) {
    var c = a[b];
    if (c && c.Math == Math) {
      return c;
    }
  }
  throw Error("Cannot find global object");
}
var la = ja(this);
function ma(a, b) {
  if (b) {
    a: {
      var c = la;
      a = a.split(".");
      for (var d = 0; d < a.length - 1; d++) {
        var e = a[d];
        if (!(e in c)) {
          break a;
        }
        c = c[e];
      }
      a = a[a.length - 1];
      d = c[a];
      b = b(d);
      b != d && null != b && ha(c, a, {configurable:!0, writable:!0, value:b});
    }
  }
}
ma("String.prototype.trimRight", function(a) {
  function b() {
    return this.replace(/[\s\xa0]+$/, "");
  }
  return a || b;
});
ma("String.prototype.trimEnd", function(a) {
  return a || String.prototype.trimRight;
});
ma("String.prototype.trimLeft", function(a) {
  function b() {
    return this.replace(/^[\s\xa0]+/, "");
  }
  return a || b;
});
ma("String.prototype.trimStart", function(a) {
  return a || String.prototype.trimLeft;
});
ma("String.prototype.replaceAll", function(a) {
  return a ? a : function(b, c) {
    if (b instanceof RegExp && !b.global) {
      throw new TypeError("String.prototype.replaceAll called with a non-global RegExp argument.");
    }
    return b instanceof RegExp ? this.replace(b, c) : this.replace(new RegExp(String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g, "\\$1").replace(/\x08/g, "\\x08"), "g"), c);
  };
});
ma("Array.prototype.includes", function(a) {
  return a ? a : function(b, c) {
    var d = this;
    d instanceof String && (d = String(d));
    var e = d.length;
    c = c || 0;
    for (0 > c && (c = Math.max(c + e, 0)); c < e; c++) {
      var f = d[c];
      if (f === b || Object.is(f, b)) {
        return !0;
      }
    }
    return !1;
  };
});
console.log = function() {
};
var pa, qa, ra, sa, ta, ua, va, za, Ba, Ea, Ja, Ka, Ma, Oa, Pa, Ra, Sa, Wa, Ya, ab, db, eb, fb, hb, lb, mb, nb, rb, tb, vb, wb, xb, yb, Bb, Db, Eb, Fb, Gb, Hb, Ib, Jb, Lb, Mb, Nb, Pb, Qb, Rb, Tb, Wb, Yb, Zb, $b, bc, cc, dc, ec, jc, mc, nc, rc, sc, tc, uc, vc, zc, Ac, Cc, Ec, Fc, Gc, Hc, Ic, Jc, Lc, Oc, Pc, Qc, Rc, Sc, Tc, Vc, Wc, Xc, Yc, Zc, bd, dd, id, od, pd, rd, wd, xd, yd, zd, Ad, Ed, Fd, Gd, Hd, Id, Jd, Kd, Nd, Pd, Qd, Rd, Sd, Td, Ud, Vd, Wd, Zd, de, ee, he, ie, je, ke, oe, pe, re, se, ue, ve, 
we, xe, ye, ze, Be, Ee, Fe, Ge, He, Ie, Je, Ke, Le, Pe, Qe, Re, Se, Te, Ye, Ze, $e, af, bf, cf, df, hf, jf, kf, lf, nf, of, pf, qf, rf, vf, wf, xf, yf, zf, Af, Bf, Cf, Df, Ef, Ff, Gf, Hf, Lf, Mf, Nf, Of, Pf, Qf, Rf, Sf, Tf, Vf, Wf, Xf, Yf, Zf, ag, bg, cg, dg, eg, fg, gg, hg, ig, jg;
var u = {};
(function() {
  function a(d) {
    c ? c.push(d) : setTimeout(d, 0);
  }
  function b() {
    if (c) {
      var d = c;
      c = null;
      for (var e = 0, f = d.length; e < f; e++) {
        d[e]();
      }
    }
  }
  var c = [];
  document.addEventListener ? "complete" == document.readyState ? b() : document.addEventListener("DOMContentLoaded", b, !1) : window.attachEvent && window.attachEvent("onload", function() {
    b();
  });
  u.nO = a;
  u.ready = a;
  u.version = "0.7.4.0";
  u.vO = function(d) {
    return void 0 === d;
  };
  u.uO = function(d) {
    return null === d;
  };
  u.cf = function(d) {
    return null === d || void 0 === d;
  };
  u.BC = function(d) {
    return null !== d && void 0 !== d;
  };
})();
Object.zk = "Object";
Object.$n = null;
Object.wO = function(a, b) {
  return void 0 !== a[b];
};
Object.keys ? Object.cC = function(a) {
  return Object.keys(a).length;
} : (Object.keys = function(a) {
  var b = [], c;
  for (c in a) {
    b.push(c);
  }
  return b;
}, Object.cC = function(a) {
  var b = 0, c;
  for (c in a) {
    b++;
  }
  return b;
});
Boolean.zk = "Boolean";
Boolean.parse = function(a) {
  return "true" == a.toLowerCase();
};
Number.zk = "Number";
Number.parse = function(a) {
  return a && a.length ? 0 <= a.indexOf(".") || 0 <= a.indexOf("e") || a.endsWith("f") || a.endsWith("F") ? parseFloat(a) : parseInt(a, 10) : 0;
};
Number.prototype.format = function(a) {
  return u.cf(a) || 0 == a.length || "i" == a ? this.toString() : this.Wv(a, !1);
};
Number.prototype.EC = function(a) {
  return u.cf(a) || 0 == a.length || "i" == a ? this.toLocaleString() : this.Wv(a, !0);
};
function ug(a, b, c, d) {
  var e = null;
  c = a.indexOf(c);
  0 < c && (e = a.substr(c), a = a.substr(0, c));
  (c = a.startsWith("-")) && (a = a.substr(1));
  var f = 0, k = b[f];
  if (a.length < k) {
    return e ? a + e : a;
  }
  for (var l = a.length, n = "", p = !1; !p;) {
    var t = k, x = l - t;
    0 > x && (k += x, t += x, x = 0, p = !0);
    if (!t) {
      break;
    }
    x = a.substr(x, t);
    n = n.length ? x + d + n : x;
    l -= t;
    f < b.length - 1 && (f++, k = b[f]);
  }
  c && (n = "-" + n);
  return e ? n + e : n;
}
Number.prototype.Wv = function(a, b) {
  b = b ? u.Mn.bE.ZG : u.Mn.Nx.ZG;
  var c = "", d = -1;
  1 < a.length && (d = parseInt(a.substr(1)));
  a = a.charAt(0);
  switch(a) {
    case "d":
    case "D":
      c = parseInt(Math.abs(this)).toString();
      -1 != d && (c = vg(c, d, "0"));
      0 > this && (c = "-" + c);
      break;
    case "x":
    case "X":
      c = parseInt(Math.abs(this)).toString(16);
      "X" == a && (c = c.toUpperCase());
      -1 != d && (c = vg(c, d, "0"));
      break;
    case "e":
    case "E":
      c = -1 == d ? this.toExponential() : this.toExponential(d);
      "E" == a && (c = c.toUpperCase());
      break;
    case "f":
    case "F":
    case "n":
    case "N":
      -1 == d && (d = b.UL);
      c = this.toFixed(d).toString();
      d && "." != b.JC && (d = c.indexOf("."), c = c.substr(0, d) + b.JC + c.substr(d + 1));
      if ("n" == a || "N" == a) {
        c = ug(c, b.WL, b.JC, b.VL);
      }
      break;
    case "c":
    case "C":
      -1 == d && (d = b.YJ);
      c = Math.abs(this).toFixed(d).toString();
      d && "." != b.wB && (d = c.indexOf("."), c = c.substr(0, d) + b.wB + c.substr(d + 1));
      c = ug(c, b.$J, b.wB, b.ZJ);
      c = 0 > this ? String.format(b.aK, c) : String.format(b.bK, c);
      break;
    case "p":
    case "P":
      -1 == d && (d = b.qM), c = (100.0 * Math.abs(this)).toFixed(d).toString(), d && "." != b.QC && (d = c.indexOf("."), c = c.substr(0, d) + b.QC + c.substr(d + 1)), c = ug(c, b.sM, b.QC, b.rM), c = 0 > this ? String.format(b.tM, c) : String.format(b.uM, c);
  }
  return c;
};
String.zk = "String";
String.oI = "";
String.compare = function(a, b, c) {
  c && (a && (a = a.toUpperCase()), b && (b = b.toUpperCase()));
  a = a || "";
  b = b || "";
  return a == b ? 0 : a < b ? -1 : 1;
};
function w(a, b, c) {
  return String.compare(a, b, c);
}
String.concat = function() {
  return 2 === arguments.length ? arguments[0] + arguments[1] : Array.prototype.join.call(arguments, "");
};
String.prototype.endsWith = function(a) {
  return a.length ? a.length > this.length ? !1 : this.substr(this.length - a.length) == a : !0;
};
String.PB = function(a, b, c) {
  return 0 == String.compare(a, b, c);
};
function yg(a, b, c) {
  String.Qv || (String.Qv = /(\{[^\}^\{]+\})/g);
  return a.replace(String.Qv, function(d, e) {
    d = b[parseInt(e.substr(1)) + 1];
    if (u.cf(d)) {
      return "";
    }
    if (d.format) {
      var f = null, k = e.indexOf(":");
      0 < k && (f = e.substring(k + 1, e.length - 1));
      return c ? d.EC(f) : d.format(f);
    }
    return c ? d.toLocaleString() : d.toString();
  });
}
String.format = function(a) {
  return yg(a, arguments, !1);
};
String.en = function(a, b) {
  for (var c = a, d = 1; d < b; d++) {
    c += a;
  }
  return c;
};
String.prototype.Lk = function(a, b) {
  return b ? a ? this.substr(0, a) + b + this.substr(a) : b + this : this;
};
String.EC = function(a) {
  return yg(a, arguments, !0);
};
function vg(a, b, c) {
  return a.length < b ? String.en(c || " ", b - a.length) + a : a;
}
String.prototype.remove = function(a, b) {
  return !b || a + b > this.length ? this.substr(0, a) : this.substr(0, a) + this.substr(a + b);
};
String.prototype.replaceAll = function(a, b) {
  b = b || "";
  return this.split(a).join(b);
};
String.prototype.startsWith = function(a) {
  return a.length ? a.length > this.length ? !1 : this.substr(0, a.length) == a : !0;
};
String.prototype.trim || (String.prototype.trim = function() {
  return this.trimEnd().trimStart();
});
String.prototype.trimEnd = function() {
  return this.replace(/\s*$/, "");
};
String.prototype.trimStart = function() {
  return this.replace(/^\s*/, "");
};
Array.zk = "Array";
Array.my = [u.Lx];
ca = Array.prototype;
ca.add = function(a) {
  this[this.length] = a;
};
ca.addRange = function(a) {
  this.push.apply(this, a);
};
ca.clear = function() {
  this.length = 0;
};
ca.clone = function() {
  return 1 === this.length ? [this[0]] : Array.apply(null, this);
};
ca.contains = function(a) {
  return 0 <= this.indexOf(a);
};
ca.enqueue = function(a) {
  this.push(a);
};
Array.prototype.every || (Array.prototype.every = function(a, b) {
  for (var c = this.length, d = 0; d < c; d++) {
    if (d in this && !a.call(b, this[d], d, this)) {
      return !1;
    }
  }
  return !0;
});
Array.prototype.QB = function(a, b) {
  return b ? this.slice(a, a + b) : this.slice(a);
};
Array.prototype.filter || (Array.prototype.filter = function(a, b) {
  for (var c = this.length, d = [], e = 0; e < c; e++) {
    if (e in this) {
      var f = this[e];
      a.call(b, f, e, this) && d.push(f);
    }
  }
  return d;
});
Array.prototype.forEach || (Array.prototype.forEach = function(a, b) {
  for (var c = this.length, d = 0; d < c; d++) {
    d in this && a.call(b, this[d], d, this);
  }
});
Array.prototype.ki = function() {
  return new u.Cx(this);
};
Array.prototype.index = function(a, b) {
  for (var c = this.length, d = {}, e = 0; e < c; e++) {
    if (e in this) {
      var f = a.call(b, this[e], e);
      f && f.length && (d[f] = this[e]);
    }
  }
  return d;
};
Array.prototype.indexOf || (Array.prototype.indexOf = function(a, b) {
  var c = this.length;
  if (c) {
    for (b = b || 0; b < c; b++) {
      if (this[b] === a) {
        return b;
      }
    }
  }
  return -1;
});
Array.prototype.Lk = function(a, b) {
  this.splice(a, 0, b);
};
Array.prototype.map || (Array.prototype.map = function(a, b) {
  for (var c = this.length, d = Array(c), e = 0; e < c; e++) {
    e in this && (d[e] = a.call(b, this[e], e, this));
  }
  return d;
});
Array.parse = function(a) {
  return eval("(" + a + ")");
};
Array.prototype.remove = function(a) {
  a = this.indexOf(a);
  return 0 <= a ? (this.splice(a, 1), !0) : !1;
};
Array.prototype.Ej = function(a) {
  this.splice(a, 1);
};
Array.prototype.removeRange = function(a, b) {
  return this.splice(a, b);
};
Array.prototype.some || (Array.prototype.some = function(a, b) {
  for (var c = this.length, d = 0; d < c; d++) {
    if (d in this && a.call(b, this[d], d, this)) {
      return !0;
    }
  }
  return !1;
});
Array.vN = function(a) {
  return Array.prototype.slice.call(a);
};
RegExp.zk = "RegExp";
RegExp.parse = function(a) {
  if (a.startsWith("/")) {
    var b = a.lastIndexOf("/");
    if (1 < b) {
      return new RegExp(a.substring(1, b), a.substr(b + 1));
    }
  }
  return null;
};
Date.zk = "Date";
Date.empty = null;
Date.g = function() {
  var a = new Date();
  return new Date(a.getFullYear(), a.getMonth(), a.getDate());
};
Date.tC = function(a) {
  return null === a || 0 === a.valueOf();
};
Date.prototype.format = function(a) {
  return u.cf(a) || 0 == a.length || "i" == a ? this.toString() : "id" == a ? this.toDateString() : "it" == a ? this.toTimeString() : this.Wv(a, !1);
};
Date.prototype.EC = function(a) {
  return u.cf(a) || 0 == a.length || "i" == a ? this.toLocaleString() : "id" == a ? this.toLocaleDateString() : "it" == a ? this.toLocaleTimeString() : this.Wv(a, !0);
};
Date.prototype.Wv = function(a, b) {
  var c = this;
  b = b ? u.Mn.bE.xB : u.Mn.Nx.xB;
  if (1 == a.length) {
    switch(a) {
      case "f":
        a = b.PG + " " + b.ED;
        break;
      case "F":
        a = b.GF;
        break;
      case "d":
        a = b.DD;
        break;
      case "D":
        a = b.PG;
        break;
      case "t":
        a = b.ED;
        break;
      case "T":
        a = b.QG;
        break;
      case "g":
        a = b.DD + " " + b.ED;
        break;
      case "G":
        a = b.DD + " " + b.QG;
        break;
      case "R":
      case "r":
        b = u.Mn.Nx.xB;
        a = b.BL;
        break;
      case "u":
        a = b.xN;
        break;
      case "U":
        a = b.GF;
        c = new Date(c.getUTCFullYear(), c.getUTCMonth(), c.getUTCDate(), c.getUTCHours(), c.getUTCMinutes(), c.getUTCSeconds(), c.getUTCMilliseconds());
        break;
      case "s":
        a = b.rN;
    }
  }
  "%" == a.charAt(0) && (a = a.substr(1));
  Date.Qv || (Date.Qv = /'.*?[^\\]'|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z/g);
  var d = Date.Qv, e = new u.uA();
  for (d.lastIndex = 0;;) {
    var f = d.lastIndex, k = d.exec(a);
    e.append(a.slice(f, k ? k.index : a.length));
    if (!k) {
      break;
    }
    k = f = k[0];
    switch(f) {
      case "dddd":
        k = b.dK[c.getDay()];
        break;
      case "ddd":
        k = b.mN[c.getDay()];
        break;
      case "dd":
        k = vg(c.getDate().toString(), 2, "0");
        break;
      case "d":
        k = c.getDate();
        break;
      case "MMMM":
        k = b.WG[c.getMonth()];
        break;
      case "MMM":
        k = b.nN[c.getMonth()];
        break;
      case "MM":
        k = vg((c.getMonth() + 1).toString(), 2, "0");
        break;
      case "M":
        k = c.getMonth() + 1;
        break;
      case "yyyy":
        k = c.getFullYear();
        break;
      case "yy":
        k = vg((c.getFullYear() % 100).toString(), 2, "0");
        break;
      case "y":
        k = c.getFullYear() % 100;
        break;
      case "h":
      case "hh":
        (k = c.getHours() % 12) ? "hh" == f && (k = vg(k.toString(), 2, "0")) : k = "12";
        break;
      case "HH":
        k = vg(c.getHours().toString(), 2, "0");
        break;
      case "H":
        k = c.getHours();
        break;
      case "mm":
        k = vg(c.getMinutes().toString(), 2, "0");
        break;
      case "m":
        k = c.getMinutes();
        break;
      case "ss":
        k = vg(c.getSeconds().toString(), 2, "0");
        break;
      case "s":
        k = c.getSeconds();
        break;
      case "t":
      case "tt":
        k = 12 > c.getHours() ? b.pJ : b.vM;
        "t" == f && (k = k.charAt(0));
        break;
      case "fff":
        k = vg(c.getMilliseconds().toString(), 3, "0");
        break;
      case "ff":
        k = vg(c.getMilliseconds().toString(), 3).substr(0, 2);
        break;
      case "f":
        k = vg(c.getMilliseconds().toString(), 3).charAt(0);
        break;
      case "z":
        k = c.getTimezoneOffset() / 60;
        k = (0 <= k ? "-" : "+") + Math.floor(Math.abs(k));
        break;
      case "zz":
      case "zzz":
        k = c.getTimezoneOffset() / 60;
        k = (0 <= k ? "-" : "+") + vg(Math.floor(Math.abs(k)).toString(), 2, "0");
        "zzz" == f && (k += b.uN + vg(Math.abs(c.getTimezoneOffset() % 60).toString(), 2, "0"));
        break;
      default:
        "'" == k.charAt(0) && (k = k.substr(1, k.length - 2).replace(/\\'/g, "'"));
    }
    e.append(k);
  }
  return e.toString();
};
Date.i = function(a) {
  return new Date(Date.parse(a));
};
Error.zk = "Error";
Error.g = function(a, b, c) {
  a = Error(a);
  if (b) {
    for (var d in b) {
      a[d] = b[d];
    }
  }
  c && (a.g = c);
  if (!(u.cf(a.stack) || u.cf(a.fileName) || u.cf(a.lineNumber))) {
    b = a.stack.split("\n");
    c = b[0];
    for (d = a.fileName + ":" + a.lineNumber; !u.cf(c) && -1 === c.indexOf(d);) {
      b.shift(), c = b[0];
    }
    c = b[1];
    u.cf(c) || (c = c.match(/@(.*):(\d+)$/), u.cf(c) || (b.shift(), a.stack = b.join("\n"), a.fileName = c[1], a.lineNumber = parseInt(c[2])));
  }
  return a;
};
u.Ve = window.Ve || function() {
};
u.Ve.zk = "Debug";
u.Ve.writeln = function(a) {
  window.console ? window.console.debug ? window.console.debug(a) : window.console.log && window.console.log(a) : window.opera && window.opera.postError && window.opera.postError(a);
};
u.Ve.eJ = function(a) {
  u.Ve.writeln(a);
  eval("debugger;");
};
u.Ve.assert = function(a, b) {
  a || console.log("Assert failed: " + b);
};
u.Ve.iO = function(a) {
  u.Ve.eJ(a);
};
var zg = Function;
zg.zk = "Type";
zg.WC = function() {
  window.__namespaces || (window.__namespaces = {});
  window.__rootNamespaces || (window.__rootNamespaces = []);
};
zg.prototype.aa = function(a, b, c) {
  this.prototype.constructor = this;
  this.zk = a;
  this.NE = !0;
  this.$n = b || Object;
  b && (this.ly = !0);
  if (c) {
    this.my = [];
    for (var d = 2; d < arguments.length; d++) {
      c = arguments[d], this.my.add(c);
    }
  }
};
function Ag(a, b) {
  a.zk = b;
  a.PE = !0;
}
function Bg(a, b) {
  for (var c in a.prototype) {
    a[c] = a.prototype[c];
  }
  a.zk = b;
  a.OE = !0;
}
zg.prototype.CD = function() {
  if (this.ly) {
    var a = this.$n;
    a.ly && a.CD();
    for (var b in a.prototype) {
      var c = a.prototype[b];
      this.prototype[b] || (this.prototype[b] = c);
    }
    delete this.ly;
  }
};
zg.prototype.OM || (zg.prototype.OM = zg.prototype.CD);
function Dg(a, b, c) {
  a.ly && a.CD();
  c ? a.$n.apply(b, c) : a.$n.apply(b);
}
zg.prototype.Vq = function() {
  var a = this.zk, b = a.lastIndexOf(".");
  return 0 < b ? a.substr(b + 1) : a;
};
function Eg(a, b) {
  return u.cf(b) ? !1 : a == Object || b instanceof a ? !0 : Fg(a, zg.pL(b));
}
function Fg(a, b) {
  if (a == Object || a == b) {
    return !0;
  }
  if (a.NE) {
    for (b = b.$n; b;) {
      if (a == b) {
        return !0;
      }
      b = b.$n;
    }
  } else if (a.PE) {
    var c = b.my;
    if (c && c.contains(a)) {
      return !0;
    }
    for (b = b.$n; b;) {
      if ((c = b.my) && c.contains(a)) {
        return !0;
      }
      b = b.$n;
    }
  }
  return !1;
}
zg.pO = function(a) {
  return 1 == a.NE;
};
zg.qO = function(a) {
  return 1 == a.OE;
};
zg.rO = function(a) {
  return 1 == a.OE && 1 == a.WN;
};
zg.sO = function(a) {
  return 1 == a.PE;
};
zg.tO = function(a) {
  return 1 == a.XN;
};
zg.Iq = function(a, b) {
  return Eg(b, a);
};
zg.gd = function(a, b) {
  return Eg(b, a) ? a : null;
};
zg.pL = function(a) {
  var b = null;
  try {
    b = a.constructor;
  } catch (c) {
  }
  b && b.zk || (b = Object);
  return b;
};
zg.getType = function(a) {
  if (!a) {
    return null;
  }
  zg.xA || (zg.xA = {});
  var b = zg.xA[a];
  b || (b = eval(a), zg.xA[a] = b);
  return b;
};
zg.parse = function(a) {
  return zg.getType(a);
};
u.Eh = function() {
};
u.Eh.aa("Delegate");
u.Eh.empty = function() {
};
u.Eh.ZI = function(a, b, c) {
  for (var d = 0; d < a.length; d += 2) {
    if (a[d] === b && a[d + 1] === c) {
      return !0;
    }
  }
  return !1;
};
u.Eh.AA = function(a) {
  function b() {
    if (2 == a.length) {
      return a[1].apply(a[0], arguments);
    }
    for (var c = a.clone(), d = 0; d < c.length; d += 2) {
      u.Eh.ZI(a, c[d], c[d + 1]) && c[d + 1].apply(c[d], arguments);
    }
    return null;
  }
  b.io = a;
  return b;
};
u.Eh.create = function(a, b) {
  return a ? u.Eh.AA([a, b]) : b;
};
u.Eh.$N = function(a, b) {
  return a ? b ? u.Eh.AA((a.io ? a.io : [null, a]).concat(b.io ? b.io : [null, b])) : a.io ? a : u.Eh.create(null, a) : b.io ? b : u.Eh.create(null, b);
};
u.Eh.remove = function(a, b) {
  if (!a || a === b) {
    return null;
  }
  if (!b) {
    return a;
  }
  var c = a.io, d = null;
  b.io && (d = b.io[0], b = b.io[1]);
  for (var e = 0; e < c.length; e += 2) {
    if (c[e] === d && c[e + 1] === b) {
      if (2 == c.length) {
        return null;
      }
      c.splice(e, 2);
      return u.Eh.AA(c);
    }
  }
  return a;
};
u.Eh.aO = function(a, b, c) {
  c = c || "__" + (new Date()).valueOf();
  window[c] = b ? a : function() {
    try {
      delete window[c];
    } catch (d) {
      window[c] = void 0;
    }
    a.apply(null, arguments);
  };
  return c;
};
u.Eh.dO = function(a) {
  delete window[a];
};
u.Eh.YN = function(a) {
  window[a] = u.Eh.empty;
};
u.Mn = function(a, b, c) {
  this.name = a;
  this.ZG = b;
  this.xB = c;
};
u.Mn.aa("CultureInfo");
u.Mn.Nx = new u.Mn("en-US", {zO:"NaN", BO:"-", HO:"+", AO:"-Infinity", GO:"Infinity", FO:"%", sM:[3], qM:2, QC:".", rM:",", uM:"{0} %", tM:"-{0} %", bO:"$", $J:[3], YJ:2, wB:".", ZJ:",", aK:"(${0})", bK:"${0}", WL:[3], UL:2, JC:".", VL:","}, {pJ:"AM", vM:"PM", cO:"/", uN:":", BL:"ddd, dd MMM yyyy HH:mm:ss 'GMT'", xN:"yyyy-MM-dd HH:mm:ssZ", rN:"yyyy-MM-ddTHH:mm:ss", GF:"dddd, MMMM dd, yyyy h:mm:ss tt", PG:"dddd, MMMM dd, yyyy", DD:"M/d/yyyy", QG:"h:mm:ss tt", ED:"h:mm tt", jO:0, dK:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "), 
mN:"Sun Mon Tue Wed Thu Fri Sat".split(" "), yO:"Su Mo Tu We Th Fr Sa".split(" "), WG:"January February March April May June July August September October November December ".split(" "), nN:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")});
u.Mn.bE = u.Mn.Nx;
u.kj = function() {
};
u.kj.prototype = {Gl:null, reset:null};
u.kj.ki = function(a) {
  return a ? a.ki ? a.ki() : new u.Cx(a) : null;
};
Ag(u.kj, "IEnumerator");
u.Lx = function() {
};
u.Lx.prototype = {ki:null};
Ag(u.Lx, "IEnumerable");
u.Cx = function(a) {
  this.RE = a;
  this.sy = -1;
  this.current = null;
};
u.Cx.prototype = {Gl:function() {
  this.sy++;
  this.current = this.RE[this.sy];
  return this.sy < this.RE.length;
}, reset:function() {
  this.sy = -1;
  this.current = null;
}};
u.Cx.aa("ArrayEnumerator", null, u.kj);
u.pE = function() {
};
u.pE.prototype = {gb:null};
Ag(u.pE, "IDisposable");
u.uA = function(a) {
  this.xy = u.cf(a) ? [] : [a];
  this.tC = 0 == this.xy.length;
};
u.uA.prototype = {append:function(a) {
  u.cf(a) || (this.xy.add(a), this.tC = !1);
  return this;
}, clear:function() {
  this.xy = [];
  this.tC = !0;
}, toString:function(a) {
  return this.xy.join(a || "");
}};
u.uA.aa("StringBuilder");
u.Ix = function() {
};
u.Ix.aa("EventArgs");
u.Ix.oI = new u.Ix();
window.XMLHttpRequest || (window.XMLHttpRequest = function() {
  for (var a = ["Msxml2.XMLHTTP", "Microsoft.XMLHTTP"], b = 0; b < a.length; b++) {
    try {
      return new ActiveXObject(a[b]);
    } catch (c) {
    }
  }
  return null;
});
u.Zw = function(a) {
  try {
    if (DOMParser) {
      return (new DOMParser()).parseFromString(a, "text/xml");
    }
    for (var b = ["Msxml2.DOMDocument.3.0", "Msxml2.DOMDocument"]; 0 < b.length;) {
      var c = new ActiveXObject(b[0]);
      c.async = !1;
      c.loadXML(a);
      c.setProperty("SelectionLanguage", "XPath");
      return c;
    }
  } catch (d) {
  }
  return null;
};
u.$D = function() {
  Dg(u.$D, this);
  this.cancel = !1;
};
u.$D.aa("CancelEventArgs", u.Ix);
u.UI = function(a, b) {
  this.first = a;
  this.second = b;
};
u.UI.aa("Tuple");
u.Mj = function(a) {
  this.VA = a;
  this.ip = null;
};
u.Mj.prototype = {im:function() {
  this.ip = u.Mj.UE(this.ip);
  return this.VA;
}, Hj:function(a) {
  this.VA !== a && (this.VA = a, a = this.ip) && (this.ip = null, u.Mj.$E(a));
}};
u.Mj.SA = [];
u.Mj.iJ = {gb:function() {
  u.Mj.SA.pop();
}};
u.Mj.JO = function(a) {
  u.Mj.SA.push(a);
  return u.Mj.iJ;
};
u.Mj.UE = function(a) {
  var b = u.Mj.SA, c = b.length;
  if (c) {
    a = a || [];
    for (var d = 0; d < c; d++) {
      var e = b[d];
      a.contains(e) || a.push(e);
    }
    return a;
  }
  return null;
};
u.Mj.$E = function(a) {
  for (var b = 0, c = a.length; b < c; b++) {
    a[b].oO();
  }
};
u.Mj.aa("Observable");
u.AE = function(a) {
  this.gp = a || [];
  this.ip = null;
};
function Gg(a) {
  var b = a.ip;
  b && (a.ip = null, u.Mj.$E(b));
}
u.AE.prototype = {add:function(a) {
  this.gp.push(a);
  Gg(this);
}, clear:function() {
  this.gp.clear();
  Gg(this);
}, contains:function(a) {
  return this.gp.contains(a);
}, ki:function() {
  this.ip = u.Mj.UE(this.ip);
  return this.gp.ki();
}, indexOf:function(a) {
  return this.gp.indexOf(a);
}, Lk:function(a, b) {
  this.gp.Lk(a, b);
  Gg(this);
}, remove:function(a) {
  return this.gp.remove(a) ? (Gg(this), !0) : !1;
}, Ej:function(a) {
  this.gp.Ej(a);
  Gg(this);
}, vN:function() {
  return this.gp;
}};
u.AE.aa("ObservableCollection", null, u.Lx);
u.xI = function() {
};
Ag(u.xI, "IApplication");
u.yI = function() {
};
Ag(u.yI, "IContainer");
u.CI = function() {
};
Ag(u.CI, "IObjectFactory");
u.zI = function() {
};
Ag(u.zI, "IEventManager");
u.AI = function() {
};
Ag(u.AI, "IInitializable");
window.ss = u;
zg.WC();
pa = function() {
};
pa.prototype = {chrome:0, SB:1, hz:3, opera:4};
Bg(pa, "UtilLib.BrowserName");
qa = function() {
};
qa.prototype = {windows:1, EG:4, FG:6, GG:7};
Bg(qa, "UtilLib.BrowserPlatform");
ra = function() {
};
ra.prototype = {uo:0};
Bg(ra, "UtilLib.DisplayType");
sa = function() {
};
sa.prototype = {};
Bg(sa, "UtilLib.EItemState");
ta = function() {
};
ta.prototype = {Cs:1};
Bg(ta, "UtilLib.EAlignment");
ua = function() {
};
ua.prototype = {vp:0, Cs:2};
Bg(ua, "UtilLib.EHorzAlignment");
va = function() {
};
va.prototype = {};
Bg(va, "UtilLib.EVertAlignment");
za = function() {
};
za.prototype = {view:0, Zp:3000};
Bg(za, "UtilLib.ZIndexConstants");
Ba = function() {
};
Ba.prototype = {uo:"normal", Zq:"italic"};
Bg(Ba, "UtilLib.FontStyle");
Ea = function() {
};
Ea.prototype = {uo:"normal", bold:"bold"};
Bg(Ea, "UtilLib.FontWeight");
Ja = function() {
};
Ja.prototype = {collapse:"collapse", hidden:"hidden", visible:"visible"};
Bg(Ja, "UtilLib.Visibility");
Ka = function() {
};
Ka.prototype = {initial:"initial", absolute:"absolute", fixed:"fixed"};
Bg(Ka, "UtilLib.PositionStyle");
Ma = function() {
};
Ma.prototype = {Cs:1, vp:2};
Bg(Ma, "UtilLib.MenuWnd_MenuPositioning");
Oa = function() {
};
Oa.prototype = {};
Bg(Oa, "UtilLib.GradingMethod");
Pa = function() {
};
Pa.prototype = {};
Bg(Pa, "UtilLib.MenuWnd_MenuPositioning_Order");
Ra = function() {
};
Ra.drawImage = function(a, b, c, d, e, f, k, l, n, p) {
  try {
    a.drawImage(b, c, d, e, f, k, l, n, p);
  } catch (t) {
    u.Ve.writeln(t.message);
  }
};
Sa = function() {
};
Sa.NO = function() {
  return "10000000-1000-4000-8000-100000000000".replace(/[018]/g, function(a) {
    return (a ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> a / 4).toString(16);
  });
};
Wa = function() {
};
Ya = function() {
};
Ya.lN = function(a, b) {
  Ya.$I(a, b);
};
Ya.$I = function(a, b) {
  for (var c = Object.cC(a), d = 0; d < c; d++) {
    var e = Object.keys(a)[d];
    b[e] = a[e];
  }
};
ab = function() {
};
ab.aC = function(a) {
  var b = a.lastIndexOf(".");
  if (-1 === b) {
    return "";
  }
  var c = a.indexOf("?", b + 1);
  return 0 < c ? a.substr(b, c - b) : a.substr(b);
};
db = function() {
};
db.nK = function(a) {
  a = a.replaceAll("&lt;", "<");
  a = a.replaceAll("&gt;", ">");
  return a = a.replaceAll("&amp;", "&");
};
db.fL = function(a) {
  a = a.replaceAll("&", "&amp;");
  a = a.replaceAll("<", "&lt;");
  return a = a.replaceAll(">", "&gt;");
};
db.we = function(a) {
  var b = "", c = null;
  if (1 === a.nodeType) {
    for (c = a.firstChild; !u.cf(c);) {
      b += c.textContent, c = c.nextSibling;
    }
  }
  null == c && null != a.nodeValue && (b = a.textContent);
  return b;
};
db.Vb = function(a) {
  return DOMParser ? (u.cf(db.Qy) && (db.Qy = new DOMParser()), u.cf(a) || !a.length ? db.Qy.parseFromString("<html/>", "text/xml").documentElement.cloneNode(!0) : db.Qy.parseFromString(a, "text/xml").documentElement.cloneNode(!0)) : u.Zw(a).documentElement.cloneNode(!0);
};
db.setAttribute = function(a, b, c) {
  b = a.ownerDocument.createAttribute(b);
  b.value = c;
  a.attributes.setNamedItem(b);
};
db.qB = function(a) {
  a = db.nK(a);
  a = a.replaceAll(" ", String.fromCharCode(160));
  a = a.replaceAll("\r\n", "\n");
  return a = a.replaceAll("\r", "\n");
};
eb = function() {
};
eb.AG = function() {
  return eb.ky;
};
eb.Vq = function() {
  return eb.rq;
};
eb.Dp = function() {
  return eb.ql;
};
eb.MG = function() {
  return 4 <= eb.Dp() && 9 >= eb.Dp() || 3 === eb.Dp() && 1 < navigator.maxTouchPoints;
};
eb.hJ = function() {
  eb.cJ();
  eb.dJ();
  eb.tK();
  eb.sK();
  eb.uK();
};
eb.cJ = function() {
  var a = window.navigator, b = a.userAgent;
  u.Ve.writeln(b);
  a = a.vendor;
  -1 !== b.indexOf("Silk") ? eb.rq = 5 : -1 !== b.indexOf("Edge") ? eb.rq = 3 : -1 !== b.indexOf("Chrome/") ? eb.rq = 0 : u.BC(a) && -1 !== a.indexOf("Apple") ? (b = b.indexOf("CriOS"), eb.rq = -1 !== b ? 0 : 2) : eb.rq = u.BC(window.opera) ? 4 : -1 !== b.indexOf("Firefox") ? 1 : -1 !== b.indexOf("MSIE") ? 3 : -1 !== b.indexOf("Trident") ? 3 : 6;
  u.Ve.writeln("Browser Name:" + eb.rq);
};
eb.$t = function() {
  var a = window.navigator.userAgent.toLowerCase(), b = a.search(RegExp("os")) + 2, c = a.search(RegExp("like"));
  b = a.substr(b, c - b).trim().replace(RegExp("/_/g"), ".");
  eb.ky = parseFloat(b);
  u.Ve.writeln("OS Version:" + a);
  u.Ve.writeln("OS Version:" + b);
  u.Ve.writeln("OS Version:" + eb.ky);
};
eb.bJ = function() {
  -1 !== window.navigator.userAgent.indexOf("Android 7") && (eb.ky = 7);
};
eb.dJ = function() {
  var a = window.navigator, b = a.platform;
  a = a.userAgent;
  -1 !== a.indexOf("iPad") ? (eb.ql = 4, eb.$t()) : -1 !== a.indexOf("iPod") ? (eb.ql = 7, eb.$t()) : -1 !== a.indexOf("iPhone") ? (eb.ql = 6, eb.$t()) : -1 !== a.indexOf("IEMobile") || -1 !== a.indexOf("Windows Phone") ? (eb.ql = 9, eb.$t()) : -1 !== a.indexOf("Tablet PC") ? (eb.ql = 1, eb.$t()) : 3 === eb.rq && -1 !== a.indexOf("Touch") ? (eb.ql = 1, eb.$t()) : -1 !== b.indexOf("Win") ? eb.ql = 1 : -1 !== a.indexOf("Android") || -1 !== a.indexOf("Silk") || -1 !== a.indexOf("KFTT") ? (eb.ql = 5, 
  eb.bJ()) : -1 !== a.indexOf("RIM Tablet OS") ? eb.ql = 8 : -1 !== b.indexOf("Linux") ? (eb.ql = 2, -1 !== a.indexOf("CrOS") && (eb.ql = 10)) : eb.ql = -1 !== b.indexOf("Mac") ? 3 : 0;
};
eb.tK = function() {
  document.createElement("div");
};
eb.sK = function() {
  var a = document.createElement("canvas");
  a.width = 1;
  a.height = 1;
  a = a.getContext("2d");
  a.globalCompositeOperation = "copy";
  a.strokeStyle = "rgba(255, 0, 0, 1)";
  a.moveTo(0, 0);
  a.lineTo(1, 1);
  a.stroke();
  a.beginPath();
  a.moveTo(50, 50);
  a.lineTo(51, 51);
  a.stroke();
  a.getImageData(0, 0, 1, 1);
};
eb.uK = function() {
  if (null != document.body) {
    var a = document.createElement("div");
    a.style.position = "absolute";
    a.style.overflowY = "scroll";
    a.style.top = "-1000px";
    a.style.left = "-1000px";
    a.style.width = "100px";
    a.style.height = "100px";
    document.body.appendChild(a);
    document.body.removeChild(a);
  }
};
fb = function() {
  null == fb.TA && (fb.TA = new XMLSerializer());
};
fb.prototype = {serializeToString:function(a) {
  return null == a ? "" : fb.TA.serializeToString(a);
}};
hb = function(a, b) {
  this.Tv = -1;
  this.dF = a;
  this.VE = b;
};
hb.prototype = {dF:null, VE:0, XE:0, AL:function() {
  return -1 !== this.Tv;
}, stop:function() {
  -1 !== this.Tv && (window.clearInterval(this.Tv), this.Tv = -1);
}, start:function() {
  this.stop();
  this.XE = (new Date()).getTime();
  this.Tv = window.setInterval(u.Eh.create(this, this.jJ), this.VE);
}, jJ:function() {
  this.dF();
}, Hs:function() {
  return (new Date()).getTime() - this.XE;
}};
lb = function(a, b) {
  this.gs = a;
  this.hs = b;
};
lb.prototype = {gs:0, Mf:function() {
  return this.gs;
}, hs:0, Rh:function() {
  return this.hs;
}, clone:function(a) {
  this.gs = a.gs;
  this.hs = a.hs;
}, toString:function() {
  return "X : " + this.gs + ", Y : " + this.hs;
}, PB:function(a) {
  return a.gs === this.gs && a.hs === this.hs;
}};
nb = function(a, b) {
  this.Yt = a;
  this.Zt = b;
};
nb.prototype = {Yt:0, Mf:function() {
  return this.Yt;
}, Zt:0, Rh:function() {
  return this.Zt;
}, toString:function() {
  return "X : " + this.Yt + ", Y : " + this.Zt;
}, PB:function(a) {
  return a.Yt === this.Yt && a.Zt === this.Zt;
}, clone:function() {
  return new nb(this.Yt, this.Zt);
}};
rb = function(a, b) {
  this.ho = a;
  this.rl = b;
};
rb.prototype = {ho:0, Kk:function() {
  return this.ho;
}, rl:0, km:function() {
  return this.rl;
}, toString:function() {
  return "Width : " + this.ho + " Height : " + this.rl;
}};
tb = function(a, b) {
  this.co = a;
  this.bo = b;
};
tb.prototype = {co:0, Kk:function() {
  return this.co;
}, bo:0, km:function() {
  return this.bo;
}, toString:function() {
  return "Width : " + this.co + " Height : " + this.bo;
}};
vb = function() {
};
vb.prototype = {};
mb = function(a, b, c, d) {
  this.cu = a;
  this.du = b;
  this.ho = c;
  this.rl = d;
};
mb.yF = function(a) {
  if (null == a) {
    return null;
  }
  for (var b = [], c = a.length, d = 0; d < c; ++d) {
    var e = new mb(0, 0, 0, 0);
    e.VJ(a[d]);
    b.add(e);
  }
  return b;
};
mb.prototype = {cu:0, fg:function() {
  return this.cu;
}, du:0, Tg:function() {
  return this.du;
}, BG:function() {
  return this.fg() + this.Kk();
}, zG:function() {
  return this.Tg() + this.km();
}, bk:function() {
  return new lb(this.fg(), this.Tg());
}, Qh:function() {
  return new lb(this.fg() + this.Kk(), this.Tg());
}, jm:function() {
  return new lb(this.fg(), this.Tg() + this.km());
}, ho:0, Kk:function() {
  return this.ho;
}, rl:0, km:function() {
  return this.rl;
}, VJ:function(a) {
  u.BC(a) && (this.cu = a.fg(), this.du = a.Tg(), this.ho = a.Kk(), this.rl = a.km());
}, clone:function() {
  return new mb(this.cu, this.du, this.ho, this.rl);
}, PB:function(a) {
  return this.du === a.du && this.cu === a.cu && this.ho === a.ho && this.rl === a.rl;
}, yC:function(a) {
  for (var b = a.length, c = 0; c < b; c++) {
    if (this.xC(a[c])) {
      return !0;
    }
  }
  return !1;
}, xC:function(a) {
  return (a.bk().Mf() >= this.fg() || a.Qh().Mf() >= this.fg()) && (a.bk().Mf() <= this.Qh().Mf() || a.Qh().Mf() <= this.Qh().Mf()) && (a.bk().Rh() >= this.Tg() || a.jm().Rh() >= this.Tg()) && (a.bk().Rh() <= this.jm().Rh() || a.jm().Rh() <= this.jm().Rh());
}};
wb = function(a, b, c, d) {
  this.Wt = a;
  this.Xt = b;
  this.co = c;
  this.bo = d;
};
wb.prototype = {Wt:0, fg:function() {
  return this.Wt;
}, Xt:0, Tg:function() {
  return this.Xt;
}, co:0, Kk:function() {
  return this.co;
}, bo:0, km:function() {
  return this.bo;
}, BG:function() {
  return this.Wt + this.co;
}, zG:function() {
  return this.Xt + this.bo;
}, bk:function() {
  return new nb(this.fg(), this.Tg());
}, Qh:function() {
  return new nb(this.fg() + this.Kk(), this.Tg());
}, jm:function() {
  return new nb(this.fg(), this.Tg() + this.km());
}, xC:function(a) {
  return (!(a.bk().Mf() < this.fg()) || !(a.Qh().Mf() < this.fg())) && (!(a.bk().Mf() > this.Qh().Mf()) || !(a.Qh().Mf() > this.Qh().Mf())) && (!(a.bk().Rh() < this.Tg()) || !(a.jm().Rh() < this.Tg())) && (!(a.bk().Rh() > this.jm().Rh()) || !(a.jm().Rh() > this.jm().Rh()));
}, isEqual:function(a) {
  return a.Tg() === this.Tg() && a.fg() === this.fg() && a.Kk() === this.Kk() && a.km() === this.km() ? !0 : (a.bk().Mf() === this.fg() && a.Qh().Mf() === this.BG() || a.bk().Mf() === this.bk().Mf() && a.Qh().Mf() === this.Qh().Mf()) && (a.bk().Rh() === this.Tg() && a.jm().Rh() === this.zG() || a.bk().Rh() === this.bk().Rh() && a.jm().Rh() === this.jm().Rh());
}, clone:function() {
  return new wb(this.Wt, this.Xt, this.co, this.bo);
}, toString:function() {
  return "Left:" + this.Wt + ",Top:" + this.Xt + ",Right:" + (this.Wt + this.co) + ",Bottom:" + (this.Xt + this.bo) + ",Width:" + this.co + ",Height:" + this.bo;
}};
xb = function(a, b, c, d) {
  this.Hp = a;
  this.Gp = b;
  this.Fp = c;
  this.Pp = d;
};
xb.prototype = {Hp:0, Gp:0, Fp:0, Pp:0, toString:function() {
  return "#" + vg(this.Hp.toString(16), 2, "0") + vg(this.Gp.toString(16), 2, "0") + vg(this.Fp.toString(16), 2, "0");
}, ai:function() {
  return "rgba(" + this.Hp + "," + this.Gp + "," + this.Fp + "," + this.Pp + ")";
}, cG:function(a) {
  a = a.replaceAll("#", "");
  if (6 === a.length) {
    var b = a.substr(0, 2);
    var c = a.substr(2, 2);
    a = a.substr(4, 2);
    this.Hp = parseInt(b, 16);
    this.Gp = parseInt(c, 16);
    this.Fp = parseInt(a, 16);
  }
}, Xy:function(a) {
  var b = a.indexOf("(", 0);
  if (!(0 > b)) {
    var c = a.indexOf(",", b + 1);
    if (!(0 > c)) {
      var d = a.indexOf(",", c + 1);
      if (!(0 > d)) {
        var e = a.indexOf(",", d + 1);
        if (0 > e) {
          this.TB(a);
        } else {
          var f = a.indexOf(")", e + 1);
          0 > f || (this.Hp = parseInt(a.substr(b + 1, c - b - 1)), this.Gp = parseInt(a.substr(c + 1, d - c - 1)), this.Fp = parseInt(a.substr(d + 1, e - d - 1)), this.Pp = parseFloat(a.substr(e + 1, f - e - 1)));
        }
      }
    }
  }
}, TB:function(a) {
  var b = a.indexOf("(", 0);
  if (!(0 > b)) {
    var c = a.indexOf(",", b + 1);
    if (!(0 > c)) {
      var d = a.indexOf(",", c + 1);
      if (!(0 > d)) {
        var e = a.indexOf(")", d + 1);
        0 > e || (this.Hp = parseInt(a.substr(b + 1, c - b - 1)), this.Gp = parseInt(a.substr(c + 1, d - c - 1)), this.Fp = parseInt(a.substr(d + 1, e - d - 1)), this.Pp = 1);
      }
    }
  }
}, clone:function() {
  return new xb(this.Hp, this.Gp, this.Fp, this.Pp);
}, isEqual:function(a) {
  return this.Hp === a.Hp && this.Gp === a.Gp && this.Fp === a.Fp && this.Pp === a.Pp;
}};
yb = function() {
  this.Ny = 12;
  this.br = [];
};
yb.prototype = {NB:null, LB:null, Ny:0, br:null, toString:function() {
  var a = this.NB + " " + this.LB + " ";
  0 < this.br.length && (a += this.Ny + "px " + this.br[0]);
  for (var b = 1; b < this.br.length; b++) {
    a += "," + this.br[b];
  }
  return a;
}, clone:function() {
  var a = new yb();
  a.NB = this.NB;
  a.LB = this.LB;
  a.Ny = this.Ny;
  for (var b = 0; b < this.br.length; b++) {
    a.br[b] = this.br[b];
  }
  return a;
}};
Bb = function() {
  this.Om = [];
  this.jN(0);
};
Bb.prototype = {Om:null, jN:function(a) {
  this.Om.clear();
  switch(a) {
    case 2:
    case 4:
      this.Om.add(1);
      this.Om.add(2);
      break;
    case 3:
    case 5:
      this.Om.add(0);
      break;
    case 7:
      this.Om.add(0);
      this.Om.add(3);
      break;
    default:
      this.Om.add(0), this.Om.add(1), this.Om.add(2), this.Om.add(3);
  }
}};
Db = function() {
};
Db.prototype = {};
Eb = function() {
};
Eb.prototype = {};
Fb = function() {
};
Fb.prototype = {};
Gb = function() {
};
Gb.prototype = {};
Ra.aa("UtilLib.CanvasHelper");
(function() {
}).aa("UtilLib.CommonUtilities");
Sa.aa("UtilLib.CryptoUtils");
Wa.aa("UtilLib.DateUtils");
(function() {
}).aa("UtilLib.ImageUtilities");
Ya.aa("UtilLib.Copier");
(function() {
}).aa("UtilLib.SessionUtility");
ab.aa("UtilLib.StringUtils");
db.aa("UtilLib.XMLUtils");
eb.aa("UtilLib.BrowserCapabilities");
fb.aa("UtilLib.XmlSerializer");
hb.aa("UtilLib.Timer");
(function() {
}).aa("UtilLib.HtmlCssHelper");
lb.aa("UtilLib.Point");
nb.aa("UtilLib.PointF");
rb.aa("UtilLib.Size");
tb.aa("UtilLib.SizeF");
vb.aa("UtilLib.Alignment");
mb.aa("UtilLib.Rect");
wb.aa("UtilLib.RectF");
xb.aa("UtilLib.Color");
yb.aa("UtilLib.Font");
Bb.aa("UtilLib.MenuWnd_MenuParams");
Db.aa("UtilLib.HideMenuParams");
Eb.aa("UtilLib.SelectionArgs");
Fb.aa("UtilLib.TabHeaderInfo");
Gb.aa("UtilLib.NumberRange");
Wa.WG = "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");
u.Zw("");
db.Qy = null;
eb.ky = 0;
eb.rq = 0;
eb.ql = 0;
eb.hJ();
fb.TA = null;
zg.WC();
Hb = function() {
};
Hb.prototype = {};
Bg(Hb, "WordControl.BlankDocStatus");
Ib = function() {
};
Ib.prototype = {St:"WordDoc", Xz:"FontFamily", Wz:"FontColor", Yz:"FontSize", $z:"FontWeight", Zz:"FontStyle", Gr:"DocType", Mx:"Index", XD:"AudioToken", WD:"AudioPath"};
Bg(Ib, "WordControl.ImageAttributes");
Jb = function() {
};
Jb.prototype = {};
Bg(Jb, "WordControl.CommentType");
Lb = function() {
};
Lb.prototype = {parse:null, wn:null, Ll:null};
Ag(Lb, "WordControl.IDocParser");
Mb = function() {
};
Mb.prototype = {parse:null, Yb:null};
Ag(Mb, "WordControl.IElementParser");
Nb = function() {
};
Nb.prototype = {parse:null, Yb:null};
Ag(Nb, "WordControl.IParaParser");
Pb = function() {
};
Pb.prototype = {Qg:null, Jq:null, DF:null, Ky:null, af:null, Re:null, vj:null, Ri:null, Si:null, Mw:null};
Ag(Pb, "WordControl.IParseFactory");
Qb = function() {
};
Qb.prototype = {Yb:null};
Ag(Qb, "WordControl.IDocSerializer");
Rb = function() {
};
Rb.prototype = {Yb:null};
Ag(Rb, "WordControl.IElementSerializer");
Tb = function() {
};
Tb.prototype = {xl:null, Kq:null, Jy:null};
Ag(Tb, "WordControl.ISerializeFactory");
Wb = function() {
};
Wb.prototype = {SI:0, vE:12};
Bg(Wb, "WordControl.ElementTypes");
Yb = function() {
};
Yb.prototype = {sB:null, CF:null, Li:null, yw:null, Lh:null, FF:null, createElement:null, Mi:null, Mh:null, wu:null, EF:null, My:null};
Ag(Yb, "WordControl.IElementFactory");
Zb = function() {
};
Zb.prototype = {Ue:null, dw:null, yz:null, Ap:null, Ie:null, vg:null, fx:null, aj:null, Gu:null, UB:null, Du:null, Qu:null, Do:null, vc:null, $w:null, validate:null, kx:null, Fn:null, hr:null, gr:null, fr:null, er:null, xp:null, wp:null, Oq:null, Pq:null, sw:null};
Ag(Zb, "WordControl.IDocController");
$b = function() {
};
$b.prototype = {te:0, Ry:1, cn:2, Ty:3, RF:4};
Bg($b, "WordControl.BulletType");
bc = function() {
};
bc.prototype = {Sy:0, Uy:1};
Bg(bc, "WordControl.AutoBulletCase");
cc = function() {
};
cc.prototype = {te:0, Cs:2};
Bg(cc, "WordControl.AutoBulletParen");
dc = function() {
};
dc.prototype = {vp:0, QF:1, Cs:2};
Bg(dc, "WordControl.eAlign");
ec = function() {
};
ec.prototype = {Bp:null, um:null, YB:null, Jn:null, JG:null, gb:null, Kp:null, Rw:null, hm:null, hr:null, gr:null, fr:null, er:null, Uk:null, Ie:null, Ik:null, dC:null, Ol:null, yn:null, Fj:null, oG:null, no:null, xa:null, ka:null};
Ag(ec, "WordControl.IDocumentRenderer");
jc = function() {
};
jc.prototype = {Bp:null, kh:null, vm:null, Xa:null, Wc:null, WB:null, tp:null, iz:null, Ie:null, dx:null, Wk:null, vg:null, aj:null, ex:null, qb:null, td:null, xa:null, ka:null, gb:null, Kp:null, no:null};
Ag(jc, "WordControl.IElementRenderer");
mc = function() {
};
mc.prototype = {Bp:null, rv:null, rD:null, Wu:null, split:null, Yy:null, xa:null, ka:null, bC:null, nG:null, yh:null, Kw:null, Iu:null, iC:null, Kp:null, eC:null, $B:null, Iw:null, Ie:null, ZC:null, uH:null, Fj:null, cz:null, gn:null, fC:null, mi:null, Ps:null, gb:null, Rw:null, no:null, EH:null, xp:null, wp:null, Pq:null, Oq:null, $F:null, tw:null, OB:null};
Ag(mc, "WordControl.IParagraphRenderer");
nc = function() {
};
nc.prototype = {Ly:null, oo:null, rB:null, tB:null};
Ag(nc, "WordControl.IRenderFactory");
rc = function() {
};
rc.prototype = {te:-1, vp:0, Cs:1};
Bg(rc, "WordControl.KeyType");
sc = function() {
};
sc.prototype = {};
Bg(sc, "WordControl.SelectionType");
tc = function() {
};
tc.prototype = {rect:null};
uc = function() {
};
vc = function(a) {
  this.Ns = -1;
  Dg(vc, this);
  this.yb = [];
  this.Ma = a;
  this.Ma.Wc(this);
};
vc.prototype = {Ma:null, yb:null, clone:function(a) {
  var b = [];
  b.add(this.Ma.clone(a));
  a = a.Mi("BLANK_DOC", b);
  for (var c = 0; c < b.length; c++) {
    b[c].Wc(a);
  }
  a.PH(this.Ns);
  return a;
}, kD:function(a) {
  this.Ma = a;
  this.Ma.Wc(this);
}, PH:function(a) {
  this.Ns = a;
}, Vc:function() {
  return 1;
}, Hc:function(a) {
  return a ? null : this.Ma;
}, Tf:function(a) {
  this.yb.contains(zg.gd(a, zc)) || this.yb.add(zg.gd(a, zc));
}, wg:function(a) {
  this.yb.contains(zg.gd(a, zc)) && this.yb.remove(zg.gd(a, zc));
}, Qi:function() {
  return 4;
}, tp:function(a) {
  for (var b = 0; b < this.yb.length; b++) {
    this.yb[b].tp(a, a.Tb(), 0, 1);
  }
}};
Ac = function() {
  this.yA = {};
  this.Hh = "none";
  this.zg = this.$e = this.ep = this.Mg = this.nf = this.mf = this.Gh = this.Ne = -1;
  this.yy = "";
  this.og = this.Bc = null;
  this.es = !1;
  this.Lg = -1;
};
Ac.bN = function() {
  Ac.Rv.style["font-kerning"] = "none";
};
Ac.prototype = {Ak:0, Hh:null, Ne:0, Gh:0, mf:0, nf:0, Mg:0, Bc:null, og:null, zg:0, $e:0, Lg:0, ep:0, fo:0, Qm:0, au:0, eo:0, yA:null, Vd:null, yy:null, $v:null, es:!1, hi:function() {
  var a = new Ac();
  a.Hh = this.Hh;
  a.Ne = this.Ne;
  a.Gh = this.Gh;
  a.mf = this.mf;
  a.nf = this.nf;
  a.Mg = this.Mg;
  a.$e = this.$e;
  a.zg = this.zg;
  a.ep = this.ep;
  a.Bc = this.Bc;
  a.og = this.og;
  a.Lg = this.Lg;
  return a;
}, DH:function(a) {
  this.Ak = a;
}, isEqual:function(a) {
  return a.Hh === this.Hh && a.Ne === this.Ne && a.Gh === this.Gh && a.mf === this.mf && a.nf === this.nf && a.Mg === this.Mg && !u.cf(a.Bc) && a.Bc.isEqual(this.Bc) && a.zg === this.zg && a.$e === this.$e && a.Lg === this.Lg && a.ep === this.ep ? !0 : !1;
}, Cp:function(a) {
  return Math.ceil(this.Js(a));
}, Js:function(a) {
  if (!a) {
    return 0;
  }
  Ac.bu.save();
  a = a.replaceAll(String.fromCharCode(160), " ");
  Ac.bu.font = this.$v;
  if (eb.Vq() === pa.hz) {
    for (var b = 0; 3 > b; ++b) {
      a += a;
    }
    a = Ac.bu.measureText(a).width / 8;
  } else {
    a = Ac.bu.measureText(a).width;
  }
  Ac.bu.restore();
  return a;
}, gb:function() {
  document.body.removeChild(this.Vd);
}, om:function() {
  return this.es ? !0 : !1;
}, Cn:function(a) {
  this.om() || "none" === a || (this.Hh = a);
}, ak:function() {
  return this.Hh;
}, lf:function(a) {
  this.om() || -1 === a || (this.Ne = a);
}, ti:function(a) {
  this.om() || -1 === a || (this.Gh = a);
}, vj:function() {
  return this.Gh;
}, ih:function(a) {
  this.om() || -1 === a || (this.mf = a);
}, pD:function(a) {
  this.om() || -1 === a || (this.ep = a);
}, Iu:function() {
  return this.ep;
}, Gn:function(a) {
  this.om() || -1 === a || (this.nf = a);
}, uD:function(a) {
  this.om() || -1 === a || (this.Mg = a);
}, cj:function(a) {
  this.om() || null == a || (this.Bc = a);
}, jD:function(a) {
  this.om() || null == a || (this.og = a);
}, wD:function(a) {
  this.om() || -1 === a || (this.zg = a);
}, mt:function(a) {
  this.om() || -1 === a || (this.Lg = a);
}, vD:function(a) {
  this.om() || -1 === a || (this.$e = a);
}, qb:function() {
  return this.fo;
}, gt:function(a) {
  -1 !== a && (this.fo = a);
}, td:function() {
  return this.Qm;
}, it:function(a) {
  -1 !== a && (this.Qm = a);
}, jn:function() {
  return this.yy;
}, RJ:function() {
  var a = 1 === this.vj() ? "italic " : "";
  a += 1 === this.mf ? "bold " : "";
  var b = this.Ne;
  1 === this.Lg && (b = 8 <= 2 * b / 3 ? Math.floor(2 / 3 * b) : 8);
  a = 1 === this.zg || 1 === this.$e ? a + (Math.floor(2 * b / 3) + "px ") : a + (b + "px ");
  this.$v = a += this.ak() + " ";
}, BF:function() {
  if (("none" !== this.Hh || -1 !== this.Ne) && -1 !== this.Gh && -1 !== this.mf && -1 !== this.nf && -1 !== this.Mg && -1 !== this.$e && -1 !== this.$e && null != this.Bc && -1 !== this.Lg) {
    var a = "font-family:" + this.ak() + ";";
    a += "font-size:";
    var b = this.Ne;
    1 === this.Lg && (b = 8 <= 2 * b / 3 ? Math.floor(2 / 3 * b) : 8);
    a = 1 === this.zg || 1 === this.$e ? a + (Math.floor(2 * b / 3) + "px;") : a + (b + "px;");
    a += 1 === this.mf ? "font-weight:bold;" : "";
    a += 1 === this.vj() ? "font-style:italic;" : "";
    if (1 === this.Mg || 1 === this.nf) {
      a = a + "text-decoration : " + (1 === this.nf ? "underline " : ""), a += 1 === this.Mg ? "line-through;" : "", a += ";";
    }
    a += "color:" + this.Bc.toString() + ";";
    null == Ac.Pm && (Ac.Pm = document.createElement("div"), Ac.Pm.style.position = "absolute", Ac.Pm.style.left = "0px", Ac.Pm.style.top = "0px", Ac.Pm.style.width = "0px", Ac.Pm.style.height = "0px", Ac.Pm.style.overflow = "hidden", document.body.appendChild(Ac.Pm));
    null == Ac.Rv && (Ac.Rv = document.createElement("canvas"), Ac.Pm.appendChild(Ac.Rv), Ac.bu = Ac.Rv.getContext("2d"));
    this.yy = a;
    a = "position : absolute;display:inline; top : -1000px; left:-1000px;line-height:normal;" + a + "white-space: nowrap;";
    u.cf(this.Vd) && (this.Vd = document.createElement("div"), this.Vd.setAttribute("style", a + ";line-height:100%;"), u.cf(document.body) || Ac.Pm.appendChild(this.Vd));
    this.Vd.setAttribute("style", a + ";font-size:" + b + "px");
    this.Vd.innerHTML = "g";
    b = this.Vd.offsetHeight;
    b < this.ep && (b = this.ep);
    this.Vd.innerHTML += '<div style="display:inline-block;width:100px;height:200px"/>';
    this.Qm = this.Vd.offsetHeight - 200;
    this.fo = b - this.Qm;
    this.Vd.setAttribute("style", a);
    this.Vd.innerHTML = "g";
    b = this.Vd.offsetHeight;
    this.Vd.innerHTML += '<div style="display:inline-block;width:100px;height:200px"/>';
    this.eo = this.Vd.offsetHeight - 200;
    this.au = b - this.eo;
    1 === this.zg ? this.fo += this.eo : 1 === this.$e && (this.Qm += this.eo);
    a = this.yA;
    for (var c in a) {
      delete a[c];
    }
    this.RJ();
    this.es = !0;
  }
}, K:function() {
  return this.Vd;
}, Vp:function(a) {
  this.Vd = a;
}, set:function(a, b, c, d, e, f, k, l, n, p) {
  this.Cn(a);
  this.lf(b);
  this.ti(c);
  this.ih(d);
  this.Gn(e);
  this.uD(f);
  this.cj(k);
  this.jD(l);
  this.wD(n);
  this.vD(p);
  this.mt(0);
}, Ts:function(a) {
  this.Cn(a.ak());
  this.lf(a.Ne);
  this.ti(a.vj());
  this.ih(a.mf);
  this.Gn(a.nf);
  this.uD(a.Mg);
  this.cj(a.Bc);
  this.jD(a.og);
  this.vD(a.$e);
  this.wD(a.zg);
  this.mt(a.Lg);
  this.pD(a.Iu());
}, az:function(a) {
  if (null == a) {
    return this.hi();
  }
  var b = new Ac();
  this.Hh === a.Hh ? b.Hh = this.Hh : b.Hh = "none";
  this.Ne === a.Ne ? b.Ne = this.Ne : b.lf(-1);
  this.Gh === a.Gh ? b.Gh = this.Gh : b.Gh = -1;
  this.mf === a.mf ? b.mf = this.mf : b.mf = -1;
  this.nf === a.nf ? b.nf = this.nf : b.nf = -1;
  this.Mg === a.Mg ? b.Mg = this.Mg : b.Mg = -1;
  null != this.Bc && null != a.Bc && this.Bc.isEqual(a.Bc) ? b.Bc = this.Bc.clone() : b.Bc = null;
  null != this.og && null != a.og && this.og.isEqual(a.og) ? b.og = this.og.clone() : b.og = null;
  this.zg === a.zg ? b.zg = this.zg : b.zg = -1;
  this.$e === a.$e ? b.$e = this.$e : b.$e = -1;
  this.Lg === a.Lg ? b.Lg = this.Lg : b.Lg = -1;
  return b;
}, QB:function(a) {
  if (null == a) {
    return this.hi();
  }
  var b = new Ac();
  this.Hh !== a.Hh ? b.Hh = a.Hh : b.Hh = "none";
  this.Ne !== a.Ne ? b.Ne = a.Ne : b.lf(-1);
  this.Gh !== a.Gh ? b.Gh = a.Gh : b.Gh = -1;
  this.mf !== a.mf ? b.mf = a.mf : b.mf = -1;
  this.nf !== a.nf ? b.nf = a.nf : b.nf = -1;
  this.Mg !== a.Mg ? b.Mg = a.Mg : b.Mg = -1;
  null == this.Bc || null != a.Bc && !this.Bc.isEqual(a.Bc) ? null == a.Bc ? b.Bc = null : b.Bc = a.Bc.clone() : b.Bc = null;
  null == this.og || null != a.og && !this.og.isEqual(a.og) ? null == a.og ? b.og = null : b.og = a.og.clone() : b.og = null;
  this.zg !== a.zg ? b.zg = a.zg : b.zg = -1;
  this.$e !== a.$e ? b.$e = a.$e : b.$e = -1;
  this.Lg !== a.Lg ? b.Lg = a.Lg : b.Lg = -1;
  return b;
}, gx:function() {
  this.yA = {};
  this.Hh = "none";
  this.zg = this.$e = this.Mg = this.nf = this.mf = this.Gh = this.Ne = -1;
  this.yy = "";
  this.og = this.Bc = null;
  this.es = !1;
  this.Lg = -1;
}};
Cc = function() {
};
Ec = function(a) {
  Ec.TG || (Ec.TG = !0);
  this.ao = [];
  a.BF();
  this.ao.add(a);
  a.DH(0);
  this.FC = new hb(u.Eh.create(this, this.SL), 0);
};
Ec.prototype = {ao:null, FC:null, SL:function() {
  this.sN();
  var a = document.getElementsByTagName("script")[0];
  if (null != a && -1 != a.src.indexOf("webfont.js")) {
    window.g.load(window.i);
  } else {
    a = document.createElement("script");
    a.src = "/lib/externs/webfonts.js";
    a.type = "text/javascript";
    a.async = "true";
    var b = document.getElementsByTagName("script")[0];
    b.parentNode.insertBefore(a, b);
  }
}, sN:function() {
  this.FC.AL() && this.FC.stop();
}, mr:function(a, b) {
  b = this.ak(b);
  a.Cn(b);
}, ak:function(a) {
  a = a.replaceAll('"', "'").split(",");
  for (var b = "", c = 0; c < a.length; c++) {
    var d = a[c].replaceAll("'", "");
    d = d.trim();
    b += "'" + d + "'";
    c !== a.length - 1 && (b += ", ");
  }
  return this.vC(b) ? b : b === Cc.vJ ? Cc.uJ : b === Cc.zK ? Cc.yK : b === Cc.DL ? Cc.CL : b === Cc.iM ? Cc.LC : b === Cc.BK ? Cc.AK : "none" !== b && 0 < b.length ? (1 === a.length && "'" === b.charAt(0) && "'" === b.charAt(b.length - 1) && (b = b.substring(1, b.length - 1)), b) : Cc.LC;
}, vC:function(a) {
  return null != Ec.UG && Ec.UG.contains(a) ? !0 : !1;
}, XA:function(a) {
  var b = this.IL(a);
  -1 === b && (b = this.ao.length, this.ao.add(a), this.ao[b].BF(), this.ao[b].DH(b));
  return b;
}, zf:function(a) {
  var b = this.hG().hi();
  b.Ts(a);
  return this.XA(b);
}, QM:function(a, b) {
  for (var c = [], d = {}, e = 0; e < b.length; e++) {
    c.add(b[e].hi()), c[e].lf(Math.round(c[e].Ne * a)), c[e].pD(Math.round(c[e].Iu() * a));
  }
  for (e = 0; e < c.length; e++) {
    d[b[e].Ak.toString()] = this.He(this.XA(c[e]));
  }
  return d;
}, lF:function(a, b) {
  for (var c = [], d = {}, e = 0; e < b.length; e++) {
    c.add(b[e].hi());
  }
  for (e = 0; e < c.length; e++) {
    c[e].Ts(a), d[b[e].Ak.toString()] = this.He(this.XA(c[e]));
  }
  return d;
}, He:function(a) {
  return this.ao[a];
}, hG:function() {
  return this.ao[0];
}, IL:function(a) {
  for (var b = 0; b < this.ao.length; ++b) {
    if (this.ao[b].isEqual(a)) {
      return b;
    }
  }
  return -1;
}};
Fc = function() {
  Dg(Fc, this);
};
Fc.prototype = {pn:function() {
  return !0;
}, Wc:function() {
}};
Gc = function(a) {
  this.Fi = !1;
  this.parent = a;
};
Gc.prototype = {Fi:!1, parent:null, getParent:function() {
  return this.parent;
}};
Hc = function(a, b, c, d, e) {
  this.qh = b;
  this.Tm = c;
  this.qh.Tf(c);
  this.Tm.um(b);
  this.UA = e;
  this.bF = !0;
  this.If = new Ic(b, c);
  b = new Jc();
  c = new Jc();
  b.Be(0);
  c.Be(0);
  this.If.yz(0, b, c, -1, e);
  this.jc = [];
  this.jc.add(this.If);
  this.qh.sH(this);
  null != Hc.yo && (Hc.yo = d);
  new xb(159, 196, 231, 0.5);
  this.zA = new Lc();
  this.Uj = a;
  this.DA = new Oc();
  this.DA.rb = b.clone();
  this.Ci = new Oc();
  this.Ci.rb = b.clone();
  this.sh = null;
};
Hc.prototype = {jc:null, qh:null, Tm:null, If:null, UA:null, DA:null, Ci:null, bF:!1, sh:null, zA:null, Uj:null, Ap:function() {
  var a = new Jc();
  a.Be(0);
  a.Yd(this.qh.ie.length - 1);
  a.sb(this.qh.Lb(a.Ub()).F.length - 1);
  return a;
}, HJ:function() {
  if (this.bF && 1 === this.jc.length && this.jc[0].ua[0].from.isEqual(this.jc[0].ua[0].xc)) {
    var a = this.jc[0].ua[0].from, b = this.If.wL(a);
    -1 === this.Ci.mm && (this.Ci.mm = b.yh(a.Qd()), this.Ci.$a = b.iC(this.Ci.mm, a.Qd().ud()));
    b.EH(a, this.Ci.mm, this.zA);
  } else {
    this.zA.K().style.display = "none";
  }
}, Ie:function() {
  this.Tm.lz();
}, vg:function() {
  this.Tm.vg(null);
}, aj:function(a, b, c, d) {
  this.Tm.aj(a, this.jc, b, c, d);
}, fx:function() {
  this.Tm.fx(this.jc);
  this.HJ();
}, Gu:function() {
  null == this.sh && (this.sh = this.If.Gu());
  u.Ve.assert(null != this.sh);
  return this.sh;
}, Ue:function(a) {
  this.qh !== a && (this.qh.yN(this), this.qh = a, this.qh.sH(this), this.yM(), null != this.Tm && this.Tm.um(this.qh));
}, qN:function(a) {
  1 < a.length && a.sort(function(b, c) {
    return b.ua[0].from.Td(c.ua[0].from) ? 1 : 0;
  });
}, yM:function() {
  this.jc.removeRange(0, this.jc.length);
  var a = new Ic(this.qh, this.Tm), b = new Jc();
  b.Be(0);
  for (var c = this.qh, d = 0; c.Lb(0).Nc();) {
    d++, b.Be(d);
  }
  a.yz(0, b, b, -1, this.UA);
  this.jc.add(a);
}, dw:function(a, b, c, d) {
  a = a.clone();
  b = b.clone();
  a = this.Fu(a, b, c, d);
  for (b = 0; b < this.jc.length;) {
    this.jc[b].rC(a) ? (this.jc[b].clear(), this.jc.Ej(b)) : b++;
  }
  this.jc.add(a);
  this.qN(this.jc);
  this.If = a;
  this.If.notify();
  this.Tm.fx(this.jc);
}, Fu:function(a, b, c, d) {
  return this.If.Fu(a, b, c, d);
}, yz:function(a, b, c, d) {
  this.sh = null;
  a = a.clone();
  b = b.clone();
  for (var e = 0; e < this.jc.length; ++e) {
    this.jc[e].clear();
  }
  this.jc.clear();
  this.jc.add(this.Fu(a, b, c, d));
  this.If = this.jc[0];
  this.If.notify();
  this.Tm.fx(this.jc);
}, Du:function(a) {
  if (a) {
    for (a = this.jc.length - 1; 0 <= a; a--) {
      this.jc[a].Du();
    }
  } else {
    this.If = this.If.clone();
    for (a = this.jc.length - 1; 0 <= a; a--) {
      this.jc[a].Du();
    }
    this.If.Du();
  }
  null != this.Ci && (this.Ci.mm = -1);
}, Qu:function(a) {
  this.If = this.If.clone();
  for (var b = 0; b < this.jc.length; ++b) {
    this.jc.clear();
  }
  this.jc.add(this.If);
  this.If.Qu(this.Uj, a, this.Gu());
  this.Ci.mm = -1;
}, Fn:function(a) {
  var b = this.UB(!1);
  a = new Pc(Hc.yo.QM(a, b));
  if (1 !== this.jc.length || !this.GH(a, this.jc[0])) {
    for (b = 0; b < this.jc.length; b++) {
      this.jc[b].Do(a, this.Uj);
    }
  }
  null != this.Ci && (this.Ci.mm = -1);
}, Do:function(a) {
  var b = this.UB(!1);
  b = new Pc(Hc.yo.lF(a, b));
  if (1 !== this.jc.length || !this.GH(b, this.jc[0])) {
    for (var c = 0; c < this.jc.length; c++) {
      this.jc[c].Do(b, this.Uj);
    }
  }
  null != this.Ci && (this.Ci.mm = -1);
  this.lD(a, Hc.yo);
}, lD:function(a, b) {
  for (var c = 0; c < this.jc.length; c++) {
    this.jc[c].lD(a, b);
  }
}, GH:function(a, b) {
  var c = !1;
  if (1 === b.ua.length) {
    var d = b.ua[0].from.clone(), e = b.ua[0].xc.clone();
    if (0 === b.df && d.isEqual(e)) {
      b = b.Cl(d).Lb(d.Ub());
      var f = b.Xa(d.ca());
      null != this.sh && (this.sh = a.gm(this.sh), c = !0);
      null != this.sh || !d.vb() && (d.vb() || d.ca()) || (this.sh = a.gm(f.vc()), c = !0);
      if (null == this.sh) {
        for (e = d.ca() - 1; 0 <= e; --e) {
          if (f = b.Xa(e), f.jf()) {
            this.sh = a.gm(f.vc());
            c = !0;
            break;
          }
        }
      }
      f = b.Xa(d.ca());
      null == this.sh && (this.sh = a.gm(f.vc()), c = !0);
      if (null == this.sh) {
        var k = b.F.length;
        for (e = d.ca() + 1; e < k; ++e) {
          if (f.jf()) {
            f = b.Xa(e);
            this.sh = a.gm(f.vc());
            c = !0;
            break;
          }
        }
      }
    } else {
      this.sh = null;
    }
  }
  return c;
}, UB:function(a) {
  var b = [], c = {};
  if (1 === this.jc.length && !this.jc[0].df && this.jc[0].ua[0].from.isEqual(this.jc[0].ua[0].xc)) {
    var d = this.Gu();
    c[d.Ak.toString()] = d.Ak;
  } else {
    for (d = 0; d < this.jc.length; d++) {
      this.jc[d].sJ(c, a);
    }
  }
  a = Object.cC(c);
  for (d = 0; d < a; ++d) {
    b.add(Hc.yo.He(c[Object.keys(c)[d]]));
  }
  return b;
}, vc:function() {
  var a = this.jc.length;
  if (0 >= a) {
    return null;
  }
  for (var b = null, c = 0; c < a; c++) {
    var d = this.jc[c].vc();
    null != d && (b = null == b ? d.hi() : b.az(d));
  }
  return b;
}, $w:function(a, b) {
  this.sh = null;
  this.qh.iD(a.Tu);
  this.If = this.If.clone();
  for (var c = 0; c < this.jc.length; ++c) {
    this.jc.clear();
  }
  c = this.Gu();
  this.If.$w(this.Uj, a, c, b);
  this.jc.add(this.If);
  null != this.Ci && (this.Ci.mm = -1);
}, kx:function() {
  this.sh = null;
  for (var a = 0; a < this.jc.length; ++a) {
    this.jc.clear();
  }
  this.If = this.If.kx(this.UA);
  a = this.If.ua[0];
  null != a && (this.Ci.rb = a.xc.clone(), this.DA.rb = a.from.clone());
  this.jc.add(this.If);
  this.If.notify();
}, validate:function() {
  this.Ie();
}, hr:function() {
}, gr:function() {
}, fr:function() {
}, er:function() {
}, xp:function() {
}, wp:function() {
}, Oq:function() {
}, Pq:function() {
}, sw:function() {
}};
Qc = function(a) {
  Dg(Qc, this);
  this.ZE = a;
  this.EA = a.xa();
  this.FA = a.ka();
};
Qc.prototype = {ZE:null, EA:0, FA:0, clone:function() {
  var a = new Qc(this.ZE.clone());
  a.EA = this.EA;
  a.FA = this.FA;
  return a;
}};
Rc = function(a) {
  this.js = a;
};
Rc.prototype = {js:null, sB:function(a) {
  return new Sc(a, this.Lh(a));
}, CF:function() {
  return new Tc(null, null);
}, Li:function(a) {
  u.Ve.assert(null != a);
  return new Tc(null, this.Lh(a));
}, yw:function() {
  return this.uB(null);
}, FF:function(a) {
  a = this.Mh(a);
  a.bf("\n");
  return this.uB(a);
}, Lh:function(a) {
  u.Ve.assert(null != a);
  return this.uB(this.Mh(a));
}, uB:function(a) {
  return new Vc(a);
}, Mi:function(a, b) {
  var c = null;
  switch(a) {
    case "FRACTION":
      c = new Wc(b[0], b[1]);
      break;
    case "SQUARE_ROOT":
      c = new Xc(b[0]);
      break;
    case "SUPER_SUB":
      c = new Yc(b[0]);
      break;
    case "BLANK_DOC":
      c = new vc(b[0]);
      break;
    case "PICTURE":
      c = new Zc();
      break;
    case "expression":
      u.Ve.assert(!1, "Expression element should be created without char properties");
      c = new bd(b[0], null);
      break;
    case "AUDIO":
      c = new dd();
      break;
    case "LINE":
      c = new id(b[0]);
      break;
    case "LINE_SEGMENT":
      c = new od(b[0]);
      break;
    case "RAY":
      c = new pd(b[0]);
  }
  return c;
}, createElement:function(a, b) {
  var c = null;
  switch(a) {
    case "FRACTION":
      c = new Wc(this.Li(b), this.Li(b));
      break;
    case "SQUARE_ROOT":
      c = new Xc(this.Li(b));
      break;
    case "SUPER_SUB":
      c = new Yc(this.Li(b));
      break;
    case "BLANK_DOC":
      c = new vc(this.Li(b));
      break;
    case "PICTURE":
      c = new Zc();
      break;
    case "expression":
      c = new bd(this.Li(b), b);
      break;
    case "AUDIO":
      c = new dd();
      break;
    case "LINE":
      c = new id(this.Li(b));
      break;
    case "LINE_SEGMENT":
      c = new od(this.Li(b));
      break;
    case "RAY":
      c = new pd(this.Li(b));
  }
  return c;
}, wu:function(a, b) {
  null == b || b.es || (b = this.js.zf(b), b = this.js.He(b));
  return new bd(a[0], b);
}, Mh:function(a) {
  null == a || a.es || (a = this.js.zf(a), a = this.js.He(a));
  return new rd(a);
}, EF:function(a) {
  u.Ve.assert(null != a);
  a.es || (a = this.js.zf(a), a = this.js.He(a));
  return new wd(a);
}, My:function() {
  return new xd();
}};
bd = function(a, b) {
  Dg(bd, this);
  this.Ww = [];
  this.Ma = a;
  this.Ma.Wc(this);
  null == b && (b = new Ac());
  this.pd = b;
};
bd.prototype = {Ma:null, pd:null, Ww:null, vc:function() {
  return this.pd;
}, clone:function(a) {
  var b = [];
  b.add(this.Ma.clone(a));
  a = a.wu(b, this.pd);
  for (var c = 0; c < b.length; c++) {
    b[c].Wc(a);
  }
  return a;
}, kD:function(a) {
  this.Ma = a;
  this.Ma.Wc(this);
}, Vc:function() {
  return 1;
}, uC:function() {
  return !0;
}, Hc:function(a) {
  return a ? null : this.Ma;
}, Qi:function() {
  return 10;
}, Tf:function(a) {
  this.Ww.contains(zg.gd(a, yd)) || this.Ww.add(zg.gd(a, yd));
}, wg:function(a) {
  this.Ww.contains(zg.gd(a, yd)) && this.Ww.remove(zg.gd(a, yd));
}, Do:function(a) {
  null != a && (this.pd = a);
}};
Wc = function(a, b) {
  Dg(Wc, this);
  this.DB = a;
  this.CB = b;
  this.DB.Wc(this);
  this.CB.Wc(this);
  this.fk = [];
  this.fk.add(this.DB);
  this.fk.add(this.CB);
  this.yb = [];
};
Wc.prototype = {DB:null, CB:null, yb:null, fk:null, clone:function(a) {
  for (var b = [], c = 0; c < this.fk.length; c++) {
    b.add(this.fk[c].clone(a));
  }
  a = a.Mi("FRACTION", b);
  for (c = 0; c < b.length; c++) {
    b[c].Wc(a);
  }
  return a;
}, Hc:function(a) {
  return this.fk[a];
}, Vc:function() {
  return this.fk.length;
}, Qi:function() {
  return 2;
}, XM:function(a) {
  this.fk[1] = a;
  a.Wc(this);
}, gN:function(a) {
  this.fk[0] = a;
  a.Wc(this);
}, jL:function() {
  return null != this.fk[1] ? this.fk[1] : null;
}, rL:function() {
  return null != this.fk[0] ? this.fk[0] : null;
}, Tf:function(a) {
  this.yb.contains(zg.gd(a, zd)) || this.yb.add(zg.gd(a, zd));
}, YB:function(a) {
  return a < this.fk.length ? this.fk[a] : null;
}, wg:function(a) {
  this.yb.contains(zg.gd(a, zd)) && this.yb.remove(zg.gd(a, zd));
}, ka:function() {
  return null != this.yb[0] ? parseInt(this.yb[0].ka()) : 0;
}};
id = function(a) {
  Dg(id, this);
  this.Ma = a;
  this.Ma.Wc(this);
  this.yb = [];
};
id.prototype = {Ma:null, yb:null, clone:function(a) {
  var b = [];
  b.add(this.Ma.clone(a));
  a = a.Mi("LINE", b);
  for (var c = 0; c < b.length; c++) {
    b[c].Wc(a);
  }
  return a;
}, Ue:function(a) {
  this.Ma = a;
  this.Ma.Wc(this);
}, Uq:function() {
  return this.Ma;
}, Hc:function(a) {
  return a ? null : this.Uq();
}, Tf:function(a) {
  this.yb.contains(zg.gd(a, Ad)) || this.yb.add(zg.gd(a, Ad));
}, wg:function(a) {
  this.yb.contains(zg.gd(a, Ad)) && this.yb.remove(zg.gd(a, Ad));
}, Qi:function() {
  return 12;
}, Vc:function() {
  return 1;
}};
Ed = function(a, b, c, d) {
  this.Ac = a;
  this.Tc = b;
  this.Ge = c;
  this.Yc = d;
};
Ed.prototype = {Ac:null, Tc:null, Ge:null, Yc:null, Dh:"RAY", parse:function(a, b) {
  var c = this.Ac.af().createElement(this.Dh, b ? this.Ac.Si() : this.Ac.Ri());
  a = this.Ac.Qg(a, c, this.Ge, this.Yc).wn(a.getElementsByTagName("pile")[0], b);
  c.Ue(a);
  return c;
}, Yb:function() {
  return null;
}};
Fd = function(a, b, c, d) {
  this.Ac = a;
  this.Tc = b;
  this.Ge = c;
  this.Yc = d;
};
Fd.prototype = {Ac:null, Tc:null, Ge:null, Yc:null, Dh:"LINE_SEGMENT", parse:function(a, b) {
  var c = this.Ac.af().createElement(this.Dh, b ? this.Ac.Si() : this.Ac.Ri());
  a = this.Ac.Qg(a, c, this.Ge, this.Yc).wn(a.getElementsByTagName("pile")[0], b);
  c.Ue(a);
  return c;
}, Yb:function() {
  return null;
}};
Gd = function(a, b, c, d) {
  this.Ac = a;
  this.Tc = b;
  this.Ge = c;
  this.Yc = d;
};
Gd.prototype = {Ac:null, Tc:null, Ge:null, Yc:null, Dh:"LINE", parse:function(a, b) {
  var c = this.Ac.af().createElement(this.Dh, b ? this.Ac.Si() : this.Ac.Ri());
  a = this.Ac.Qg(a, c, this.Ge, this.Yc).wn(a.getElementsByTagName("pile")[0], b);
  c.Ue(a);
  return c;
}, Yb:function() {
  return null;
}};
pd = function(a) {
  Dg(pd, this);
  this.Ma = a;
  this.Ma.Wc(this);
  this.yb = [];
};
pd.prototype = {Ma:null, yb:null, clone:function(a) {
  var b = [];
  b.add(this.Ma.clone(a));
  a = a.Mi("RAY", b);
  for (var c = 0; c < b.length; c++) {
    b[c].Wc(a);
  }
  return a;
}, Ue:function(a) {
  this.Ma = a;
  this.Ma.Wc(this);
}, Uq:function() {
  return this.Ma;
}, Hc:function(a) {
  return a ? null : this.Uq();
}, Tf:function(a) {
  this.yb.contains(zg.gd(a, Hd)) || this.yb.add(zg.gd(a, Hd));
}, wg:function(a) {
  this.yb.contains(zg.gd(a, Hd)) && this.yb.remove(zg.gd(a, Hd));
}, Qi:function() {
  return 14;
}, Vc:function() {
  return 1;
}};
wd = function(a) {
  Dg(wd, this, [a]);
};
wd.prototype = {};
Id = function(a, b, c, d) {
  this.wa = a;
  this.parent = b;
  this.Ge = c;
  this.Yc = d;
};
Id.prototype = {wa:null, parent:null, Ge:null, Yc:null, Dh:"BLANK_DOC", parse:function(a, b) {
  var c = this.wa.af().createElement("BLANK_DOC", b ? this.wa.Si() : this.wa.Ri());
  if (null != c && 0 < a.childNodes.length) {
    var d = this.wa.Qg(a, c, this.Ge, this.Yc);
    0 < a.getElementsByTagName("status").length && c.PH(parseInt(db.we(a.getElementsByTagName("status")[0])));
    -1 === c.Ns || 2 === c.Ns ? new xb(0, 0, 255, 0) : c.Ns ? 1 === c.Ns ? new xb(0, 255, 0, 0) : new xb(0, 0, 0, 0) : new xb(255, 0, 0, 0);
    0 < a.getElementsByTagName("p").length ? b = d.parse(a.getElementsByTagName("p")[0], b) : (a = db.Vb("<p/>"), b = d.parse(a, b));
    c.kD(b);
  }
  return c;
}, Yb:function() {
  return null;
}};
Jd = function(a, b, c, d, e) {
  this.wa = a;
  this.ee = b;
  this.parent = c;
  this.pl = new Kd();
  this.Vh = d;
  this.Yc = e;
  this.Ok = [];
};
Jd.prototype = {wa:null, ee:null, parent:null, le:null, Au:null, Ok:null, Vh:null, Yc:null, pl:null, qh:null, parse:function(a, b) {
  this.le = b ? this.wa.Si() : this.wa.Ri();
  this.Au = b ? this.wa.Mw() : this.wa.vj();
  this.qh = this.ee.Li(this.le);
  a = a.firstChild;
  for (var c = this.qh.Lb(0), d; null != a;) {
    if ("BODY" === a.nodeName) {
      for (var e = a.firstChild; null != e;) {
        if ("P" === e.nodeName) {
          for (var f = e.firstChild; null != f;) {
            if ("FONT" === f.nodeName) {
              for (var k = f.firstChild; null != k;) {
                if ("IMG" === k.nodeName) {
                  var l = k.attributes.getNamedItem("SRC");
                  d = -1;
                  null != l && (d = parseInt(l.textContent));
                  for (var n = l = 0, p = 0, t = "", x = u.kj.ki(k.attributes); x.Gl();) {
                    var D = x.current;
                    w(D.name, "width") ? w(D.name, "height") ? w(D.name, "baseline") ? w(D.name, "ext") || (t = D.value) : p = parseFloat(D.value) : n = parseFloat(D.value) : l = parseFloat(D.value);
                  }
                  x = "";
                  0 < this.Vh.length && (x = this.Vh[0]);
                  x += "F" + (d + 1) + t;
                  t = this.wa.af().createElement("PICTURE", b ? this.wa.Si() : this.wa.Ri());
                  t.Dn(d);
                  t.Wp(l, n, n - p);
                  t.Go(x);
                  d = this.Lf(this.pl);
                  c.Fg(d, t);
                  this.pl.T.oa++;
                } else if (4 === k.nodeType || 3 === k.nodeType) {
                  c = this.ir(k, c, this.qh);
                }
                k = k.nextSibling;
              }
            }
            f = f.nextSibling;
          }
          c = c.Xa(c.F.length - 1);
          c.bf("\n");
          this.pl.fa++;
          this.pl.T.oa = 0;
          this.pl.T.Ab = 0;
          d = this.Lf(this.pl);
          c = this.ee.Lh(this.le);
          this.qh.nn(d, c);
        }
        e = e.nextSibling;
      }
    }
    a = a.nextSibling;
  }
  return this.qh;
}, ir:function(a, b, c) {
  a = db.we(a);
  a = db.qB(a);
  a = a.split("\n");
  this.Qw(a[0], b, this.pl);
  for (var d = 1; d < a.length; d++) {
    b.Xa(b.F.length - 1).bf("\n");
    this.pl.fa++;
    this.pl.T.oa = 0;
    this.pl.T.Ab = 0;
    var e = this.Lf(this.pl);
    b = this.ee.Lh(this.le);
    c.nn(e, b);
    this.Qw(a[d], b, this.pl);
  }
  return b;
}, wn:function() {
  return this.qh;
}, Lf:function(a) {
  a = a.clone();
  var b = new Jc();
  b.Be(0);
  b.Ue(a.Ic);
  b.Yd(a.fa);
  b.sb(a.T.oa);
  b.sc(a.T.Ab);
  return b;
}, Qw:function(a, b, c) {
  var d = this.Lf(c), e = 0, f = !1;
  do {
    var k = f ? a.indexOf("</i>", e) : a.indexOf("<i>", e);
    -1 === k && (k = a.length);
    var l = a.substr(e, k - e);
    k - e && (e = this.ee.Mh(f ? this.Au : this.le), e.bf(l), b.Fg(d, e), c.T.oa++, d.sb(c.T.oa));
    e = (f = !f) ? k + 3 : k + 4;
  } while (e < a.length);
}, Ll:function() {
  return null;
}};
Nd = function(a, b, c) {
  Dg(Nd, this, [a]);
  this.ro = b;
  this.Os = c;
};
Nd.prototype = {Tw:null, node:null, Dn:function(a) {
  this.ro = a;
}, fN:function(a) {
  this.node = a;
}, UM:function(a) {
  this.Tw = a;
}, hD:function(a, b) {
  b = db.Vb('<commentstart index="' + b + '" type="' + this.Os + '"></commentstart>');
  if (1 === this.Os) {
    for (var c = this.node.firstChild; null != c;) {
      b.appendChild(c.cloneNode(!0)), c = c.nextSibling;
    }
    c = db.Vb('<audios type="english"></audios>');
    for (var d = db.Vb('<audios type="spanish"></audios>'), e = 0; e < this.Tw.length; e++) {
      if (null != this.Tw[e] && 0 < this.Tw[e].length) {
        var f = db.Vb("<audio>" + a.length + "</audio>");
        a.add(this.Tw[e]);
        c.appendChild(f);
      }
    }
    b.appendChild(c);
    b.appendChild(d);
  }
  return b;
}, gD:function(a, b) {
  return db.Vb('<commentend index="' + b + '"></commentend>');
}};
Pd = function(a, b, c) {
  this.Ac = a;
  this.Ge = b;
  this.aF = c;
};
Pd.prototype = {Ac:null, Ge:null, aF:null, Dh:"PICTURE", parse:function(a, b) {
  for (a = a.firstChild; null != a;) {
    if ("image" === a.nodeName) {
      return this.Ac.Jq(a, null, this.Ge, this.aF).parse(a, b);
    }
    a = a.nextSibling;
  }
  return null;
}, Yb:function() {
  return null;
}};
Qd = function(a, b, c, d) {
  this.wa = a;
  this.Tc = b;
  this.Ge = c;
  this.Yc = d;
};
Qd.prototype = {Dh:"expression", wa:null, Tc:null, Ge:null, Yc:null, Ll:function(a, b) {
  a = a.St;
  a = this.wa.af().wu([a], b);
  a.Do(b);
  return a;
}, parse:function(a, b) {
  var c = this.wa.af().createElement("expression", b ? this.wa.Si() : this.wa.Ri());
  if (null != c && 0 < a.childNodes.length) {
    var d = this.wa.Qg(a, c, this.Ge, this.Yc);
    0 < a.getElementsByTagName("p").length ? b = d.parse(a.getElementsByTagName("p")[0], b) : (a = db.Vb("<p/>"), b = d.parse(a, b));
    c.kD(b);
    b.Lb(0).Xa(0);
  }
  return c;
}, Yb:function() {
  return null;
}};
Rd = function(a, b, c, d) {
  this.Ac = a;
  this.Tc = b;
  this.Ge = c;
  this.Yc = d;
};
Rd.prototype = {Ac:null, Tc:null, Ge:null, Yc:null, Dh:"FRACTION", parse:function(a, b) {
  for (var c = this.Ac.af().createElement(this.Dh, b ? this.Ac.Si() : this.Ac.Ri()), d = [], e = a.childNodes, f = 0; f < e.length; f++) {
    "pile" === e[f].nodeName && d.add(e[f]);
  }
  f = this.Ac.Qg(a, c, this.Ge, this.Yc);
  e = f.wn(d[0], b);
  f = this.Ac.Qg(a, c, this.Ge, this.Yc);
  a = f.wn(d[1], b);
  c.XM(a);
  c.gN(e);
  return c;
}, Yb:function() {
  return null;
}};
Sd = function(a, b) {
  this.oC = a;
  this.ni = b;
};
Sd.prototype = {oC:0, ni:0, ka:function() {
  return this.oC;
}, xa:function() {
  return this.ni;
}, clone:function() {
  return new Sd(this.oC, this.ni);
}};
Td = function(a, b, c, d) {
  this.Ac = a;
  this.Tc = b;
  this.Ge = c;
  this.Yc = d;
};
Td.prototype = {Ac:null, Tc:null, Ge:null, Yc:null, parse:function(a, b) {
  b = this.Ac.af().EF(b ? this.Ac.Si() : this.Ac.Ri());
  b.bf(db.we(a));
  return b;
}, Yb:function() {
  return null;
}};
Ud = function(a, b, c, d) {
  Dg(Ud, this, [a, b, c, d]);
  this.Dh = "AUDIO";
};
Ud.prototype = {parse:function(a, b) {
  b = this.wa.af().createElement(this.Dh, b ? this.wa.Si() : this.wa.Ri());
  for (var c = 0, d = 0, e = 0, f = 0, k = u.kj.ki(a.attributes); k.Gl();) {
    var l = k.current;
    w(l.name, "width") ? w(l.name, "height") ? w(l.name, "baseline") ? w(l.name, "ext") || (this.Xp = l.value) : (e = parseInt(l.value), e /= this.Ms) : (d = parseInt(l.value), d /= this.Ms) : (c = parseInt(l.value), c /= this.Ms);
  }
  1 === a.nodeType && (f = parseInt(db.we(a.firstChild)));
  b.Dn(f);
  b.Wp(c, d, d - e);
  b.Go(dd.wJ);
  a = this.Vh[0] + "F" + (f + 1) + this.Xp;
  a = uc.rJ + "/" + a.remove(0, a.indexOf("QuestionBank/"));
  b.BH(a);
  return b;
}};
Vd = function(a, b, c, d) {
  this.wa = a;
  this.parent = b;
  this.Vh = c;
  this.Yc = d;
  this.Ms = 15;
  this.Dh = "PICTURE";
  this.Xp = "";
};
Vd.prototype = {wa:null, parent:null, Vh:null, Yc:null, Ms:0, Dh:null, Xp:null, parse:function(a, b) {
  b = this.wa.af().createElement(this.Dh, b ? this.wa.Si() : this.wa.Ri());
  for (var c = 0, d = 0, e = 0, f = 0, k = u.kj.ki(a.attributes); k.Gl();) {
    var l = k.current;
    w(l.name, "width") ? w(l.name, "height") ? w(l.name, "baseline") ? w(l.name, "ext") ? w(l.name, "crop") ? w(l.name, "scale") || b.Fn(parseFloat(l.value)) : b.mD(JSON.parse(l.value)) : this.Xp = l.value : (e = parseInt(l.value), e /= this.Ms) : (d = parseInt(l.value), d /= this.Ms) : (c = parseInt(l.value), c /= this.Ms);
  }
  1 === a.nodeType && (f = parseInt(db.we(a.firstChild)));
  b.Dn(f);
  b.Wp(c, d, d - e);
  b.Go(this.Vh[0] + "F" + (f + 1) + this.Xp);
  return b;
}, Yb:function() {
  return null;
}};
Wd = function(a, b, c, d, e) {
  this.wa = a;
  this.ee = b;
  this.parent = c;
  this.nc = new Kd();
  this.Vh = d;
  this.Yc = e;
  this.Ok = [];
  this.mz = 0;
};
Wd.prototype = {wa:null, ee:null, parent:null, Ma:null, le:null, Au:null, Ok:null, Vh:null, Yc:null, Aj:null, nc:null, mz:0, Ll:function(a, b) {
  this.Aj = [];
  this.le = b ? this.wa.Si() : this.wa.Ri();
  this.Au = b ? this.wa.Mw() : this.wa.vj();
  b = a;
  var c = this.ee.Li(this.le), d = c.Lb(0);
  this.Ok.clear();
  this.mz = 0;
  this.nc = new Kd();
  var e = this.le.hi(), f = this.wa.Re().zf(e);
  this.Aj.add(this.wa.Re().He(f));
  var k = !0;
  for (a = a.firstChild; null != a;) {
    var l = a.parentNode;
    w(a.nodeName, "div", !0) && w(a.nodeName, "p", !0) || (f = !u.cf(a.className) && 0 <= a.className.indexOf("inline-blankdoc") ? !0 : !1, k || f || !a.textContent && !a.hasChildNodes() && eb.Vq() !== pa.hz || (k = this.ee.Mh(this.le), k.bf("\n"), d.Fg(this.Lf(this.nc), k), d = this.ee.Lh(this.le), e.gx(), this.xo(a, e), f = this.wa.Re().zf(e), this.Aj.add(this.wa.Re().He(f)), this.nc.fa++, this.nc.T.oa = 0, this.nc.T.Ab = 0, c.nn(this.Lf(this.nc), d), k = !0, a.childNodes.length || eb.Vq() !== 
    pa.hz || (k = !1)));
    if (w(a.nodeName, "font", !0)) {
      if (3 === a.nodeType && a.textContent) {
        k = !1, this.aJ(a, d), e = this.le.hi(), this.nc.T.oa++, this.nc.T.Ab = 0;
      } else if (w(a.nodeName, "b", !0) && w(a.nodeName, "strong", !0)) {
        if (w(a.nodeName, "i", !0) && w(a.nodeName, "em", !0)) {
          if (w(a.nodeName, "u", !0)) {
            if (w(a.nodeName, "br", !0)) {
              if (w(a.nodeName, "img", !0)) {
                !u.cf(a.className) && 0 <= a.className.indexOf("inline-blankdoc") && null != a.St && (f = a.St.clone(this.wa.af()), f = this.wa.af().wu([f], this.le), f.Do(this.le), d.Fg(this.Lf(this.nc), f), this.nc.T.oa++);
              } else {
                k = !1;
                if (null == a.Gr || a.Gr.toString() === (6).toString()) {
                  f = 0 < a.naturalWidth ? a.naturalWidth : a.width;
                  var n = 0 < a.naturalHeight ? a.naturalHeight : parseInt(a.style.maxHeight), p = this.ee.createElement("PICTURE", null), t = a;
                  u.cf(t.getAttribute("data-scale")) ? p.Fn(1) : p.Fn(parseFloat(t.getAttribute("data-scale")));
                  var x = 0 < a.naturalWidth ? p.scale : 1;
                  p.Wp(f / x, n / x, 0);
                  u.cf(t.getAttribute("data-src")) ? p.Go(t.src) : p.Go(t.getAttribute("data-src"));
                  u.cf(t.getAttribute("data-crop")) || (p.mD(JSON.parse(t.getAttribute("data-crop"))), f = p.yu, p.Wp(Math.floor(f.m_nWidth / f.m_widthRatio / x), Math.floor(f.m_nHeight / f.m_heightRatio / x), 0));
                  null != a.Mx && p.Dn(parseInt(a.Mx));
                  d.Fg(this.Lf(this.nc), p);
                } else {
                  null != a.Gr && a.Gr.toString() === (11).toString() ? (f = 0 < a.naturalWidth ? a.naturalWidth : a.width, n = 0 < a.naturalHeight ? a.naturalHeight : parseInt(a.style.maxHeight), p = a.WD, x = a.XD, t = this.ee.createElement("AUDIO", null), t.Wp(f, n, 0), t.Go(a.src), t.BH(p), t.Gr = (11).toString(), t.WD = p, t.XD = x, null != a.Mx && t.Dn(parseInt(a.Mx)), d.Fg(this.Lf(this.nc), t)) : (f = this.wa.Ky(d, this.Vh, this.Yc), d.Fg(this.Lf(this.nc), f.Ll(a, this.le)));
                }
                this.nc.T.oa++;
              }
            } else {
              null != a.nextSibling ? (k = this.ee.Mh(this.le), k.bf("\n"), d.Fg(this.Lf(this.nc), k), d = this.ee.Lh(this.le), this.nc.fa++, this.nc.T.oa = 0, this.nc.T.Ab = 0, c.nn(this.Lf(this.nc), d), k = !0) : k = !1;
            }
          } else {
            this.xo(a, e), e.Gn(1), f = this.wa.Re().zf(e), this.Aj.add(this.wa.Re().He(f));
          }
        } else {
          this.xo(a, e), e.ti(1), f = this.wa.Re().zf(e), this.Aj.add(this.wa.Re().He(f));
        }
      } else {
        this.xo(a, e), e.ih(1), f = this.wa.Re().zf(e), this.Aj.add(this.wa.Re().He(f));
      }
    } else {
      null != a.IN && this.kJ(a), this.xo(a, e), f = this.wa.Re().zf(e), this.Aj.add(this.wa.Re().He(f));
    }
    if (a.hasChildNodes() && 0 > a.className.indexOf("inline-blankdoc")) {
      a = a.firstChild;
    } else if (a === b) {
      break;
    } else if (null == a.nextSibling) {
      if (l === b) {
        break;
      }
      a = l.nextSibling;
      l = l.parentNode;
      this.Aj.Ej(this.Aj.length - 1);
      0 >= this.Aj.length ? (e = this.le.hi(), f = this.wa.Re().zf(e), this.Aj.add(this.wa.Re().He(f))) : (e = this.le.hi(), e.Ts(this.Aj[this.Aj.length - 1]));
      for (; null == a && l !== b;) {
        a = l.nextSibling, l = l.parentNode;
      }
    } else {
      a = a.nextSibling;
    }
  }
  c.zD(this.Ok);
  return c;
}, aJ:function(a, b) {
  var c = this.ee.Mh(0 < this.Aj.length ? this.Aj[this.Aj.length - 1] : null != this.le ? this.le : new Ac()), d = this.Lf(this.nc);
  c.bf(a.textContent);
  b.Fg(d, c);
}, kJ:function(a) {
  var b = "";
  a.hasAttribute("background-color") ? b = a.getAttribute("background-color") : a.hasAttribute("backgrond") && (b = a.getAttribute("background"));
  var c = new xb(0, 0, 0, 1);
  c.Xy(b);
  b = new xb(166, 214, 72, 0.5);
  var d = new xb(255, 0, 0, 0.5), e = new xb(250, 237, 105, 0.5), f = new xb(247, 147, 0, 0.5);
  b = c.isEqual(b) ? 1 : c.isEqual(d) ? 2 : c.isEqual(e) ? 3 : c.isEqual(f) ? 4 : 0;
  c = new Nd(c, this.mz, b);
  this.mz++;
  c.nD(this.nc);
  b = this.nc.clone();
  b.T.Ab = a.textContent.length - 1;
  c.AD(b);
  this.Ok.add(c);
}, xo:function(a, b) {
  a.hasAttribute("style") && a.style.fontSize ? this.kt(parseInt(a.style.fontSize), b) : a.hasAttribute("size") && a.getAttributeNode("size").value && this.kt(parseInt(a.getAttributeNode("size").value), b);
  a.hasAttribute("style") && a.style.fontFamily ? b.Cn(a.style.fontFamily) : a.hasAttribute("face") && a.getAttributeNode("face").value && b.Cn(a.getAttributeNode("face").value);
  a.hasAttribute("color") && a.getAttributeNode("color").value ? b.cj(this.Gs(a.getAttributeNode("color").value)) : a.hasAttribute("style") && a.style.color && b.cj(this.Gs(a.style.color));
  a.hasAttribute("style") && !w(a.style.textDecoration, "underline", !0) && b.Gn(1);
  a.hasAttribute("style") && !w(a.style.fontStyle, "italic", !0) ? b.ti(1) : a.hasAttribute("style") && !w(a.style.fontStyle, "normal", !0) && b.ti(0);
  a.hasAttribute("style") && !w(a.style.fontWeight, "bold", !0) ? b.ih(1) : a.hasAttribute("style") && !w(a.style.fontWeight, "normal", !0) && b.ih(0);
}, kt:function(a, b) {
  switch(a) {
    case 1:
      b.lf(10);
      break;
    case 2:
      b.lf(13);
      break;
    case 3:
      b.lf(16);
      break;
    case 4:
      b.lf(18);
      break;
    case 5:
      b.lf(24);
      break;
    case 6:
      b.lf(32);
      break;
    case 7:
      break;
    default:
      b.lf(a);
  }
}, Gs:function(a) {
  var b = new xb(0, 0, 0, 1);
  -1 !== a.indexOf("#") ? b.cG(a) : -1 !== a.indexOf("rgb") && b.TB(a);
  return b;
}, parse:function(a, b) {
  this.le = b ? this.wa.Si() : this.wa.Ri();
  this.Au = b ? this.wa.Mw() : this.wa.vj();
  var c = !1;
  null == this.Ma && (c = !0, this.Ma = this.ee.Li(this.le));
  if (a.hasChildNodes()) {
    var d = a.firstChild, e = this.Ma.Lb(0);
    do {
      if (1 === d.nodeType || 3 === d.nodeType) {
        if (w(d.nodeName, "text", !0)) {
          if (w(d.nodeName, "comment", !0)) {
            if (w(d.nodeName, "table", !0)) {
              if (w(d.nodeName, "equation", !0)) {
                if (w(a.nodeName, "space")) {
                  if (w(d.nodeName, "commentstart", !0)) {
                    if (w(d.nodeName, "commentend", !0)) {
                      if (w(d.nodeName, "template", !0)) {
                        var f = this.wa.Jq(d, e, this.Vh, this.Yc);
                        if (null != f && (f = f.parse(d, b), null != f)) {
                          var k = this.Lf(this.nc);
                          f.pn() && 0 < k.ca() && (k = db.Vb("<text><![CDATA[\n]]\x3e</text>"), e = this.ir(k, e, this.Ma));
                          k = this.Lf(this.nc);
                          e.Fg(k, f);
                          this.nc.T.oa++;
                        }
                      } else {
                        this.kH(d, e, b);
                      }
                    } else {
                      this.uu(d);
                    }
                  } else {
                    this.vu(d);
                  }
                } else {
                  a = this.uG(a), a = u.Zw("<text><![CDATA[" + a + "]]\x3e</text>").firstChild, e = this.ir(d, e, this.Ma);
                }
              } else {
                this.wn(d.getElementsByTagName("pile")[0], b);
              }
            } else {
              e = this.pM(d, b, e);
            }
          } else {
            f = null, e.tJ(f);
          }
        } else {
          e = this.ir(d, e, this.Ma);
        }
      }
      d = d.nextSibling;
    } while (null != d);
  }
  c && this.Ma.zD(this.Ok);
  return this.Ma;
}, wn:function(a, b) {
  var c = !1;
  null == this.Ma && (c = !0, this.le = b ? this.wa.Si() : this.wa.Ri(), this.Au = b ? this.wa.Mw() : this.wa.vj(), this.Ma = this.ee.Li(this.le));
  if (null == a) {
    return this.Ma;
  }
  var d = this.Ma.Lb(this.Ma.ie.length - 1);
  a = a.childNodes;
  for (var e = 0; e < a.length; e++) {
    var f = a[e];
    if (1 === f.nodeType || 3 === f.nodeType) {
      if (w(f.nodeName, "style")) {
        if (w(f.nodeName, "text")) {
          if (w(f.nodeName, "commentstart", !0)) {
            if (w(f.nodeName, "commentend", !0)) {
              if (w(f.nodeName, "template", !0)) {
                if (w(f.nodeName, "space")) {
                  var k = this.wa.Jq(f, d, this.Vh, this.Yc);
                  null != k && (f = k.parse(f, b), k = this.Lf(this.nc), d.Fg(k, f), this.nc.T.oa++);
                } else {
                  f = this.uG(f), f = u.Zw("<text><![CDATA[" + f + "]]\x3e</text>").firstChild, d = this.ir(f, d, this.Ma);
                }
              } else {
                this.kH(f, d, b);
              }
            } else {
              this.uu(f);
            }
          } else {
            this.vu(f);
          }
        } else {
          d = this.ir(f, d, this.Ma);
        }
      } else {
        this.wn(f, b);
      }
    }
  }
  c && this.Ma.zD(this.Ok);
  return this.Ma;
}, ir:function(a, b, c) {
  var d = this.le.hi();
  d.ih(0);
  d.ti(0);
  for (d.Gn(0); a.hasChildNodes() && w(a.firstChild.nodeName, "#cdata-section");) {
    a = a.firstChild, w(a.nodeName, "b") || d.ih(1), w(a.nodeName, "u") || d.Gn(1), w(a.nodeName, "i") || d.ti(1);
  }
  d = this.wa.Re().zf(d);
  d = this.wa.Re().He(d);
  a = db.we(a);
  a = db.qB(a);
  var e = b;
  0 < b.F.length && b.Xa(0).pn() && "\n" !== a.charAt(0) && (b.Xa(1).bf("\n"), this.nc.fa++, this.nc.T.oa = 0, this.nc.T.Ab = 0, b = this.Lf(this.nc), e = this.ee.Lh(this.le), c.nn(b, e));
  return this.OC(a, e, c, d);
}, OC:function(a, b, c, d) {
  a = a.split("\n");
  this.Qw(a[0], b, this.nc, d);
  for (var e = 1; e < a.length; e++) {
    b.Xa(b.F.length - 1).bf("\n");
    this.nc.fa++;
    this.nc.T.oa = 0;
    this.nc.T.Ab = 0;
    var f = this.Lf(this.nc);
    b = this.ee.Lh(this.le);
    c.nn(f, b);
    this.Qw(a[e], b, this.nc, d);
  }
  return b;
}, Yb:function() {
  return null;
}, pM:function(a, b, c) {
  a = a.childNodes;
  for (var d = a.length, e, f = 0; f < d; f++) {
    var k = a[f];
    if (1 === k.nodeType || 3 === k.nodeType) {
      if ("commentstart" === k.nodeName) {
        this.vu(k);
      } else if ("commentend" === k.nodeName) {
        this.uu(k);
      } else {
        var l = this.wa.Jq(k, c, this.Vh, this.Yc);
        if (null != l) {
          if (1 < c.F.length || 0 < c.Xa(0).Bf()) {
            c = c.Xa(c.F.length - 1), c.bf("\n"), this.nc.fa++, this.nc.T.oa = 0, this.nc.T.Ab = 0, e = this.Lf(this.nc), c = this.ee.Lh(this.le), this.Ma.nn(e, c);
          }
          e = this.Lf(this.nc);
          k = l.parse(k, b);
          c.Fg(e, k);
          c = c.Xa(c.F.length - 1);
          c.bf("\n");
          this.nc.fa++;
          e = this.Lf(this.nc);
          c = this.ee.Lh(this.le);
          this.Ma.nn(e, c);
        }
      }
    }
  }
  return c;
}, kH:function(a, b, c) {
  for (var d = 0, e = 0, f = u.kj.ki(a.attributes); f.Gl();) {
    var k = f.current;
    w(k.name, "type") ? w(k.name, "subtype") || (e = parseInt(k.value)) : d = parseInt(k.value);
  }
  d = this.wa.DF(d, e, b, this.Vh, this.Yc);
  null != d && (a = d.parse(a, c), c = this.Lf(this.nc), 0 < b.F.length && b.Xa(0).pn() && (b.Xa(1).bf("\n"), this.nc.fa++, this.nc.T.oa = 0, this.nc.T.Ab = 0, c = this.Lf(this.nc), b = this.ee.Lh(this.le), this.Ma.nn(c, b)), b.Fg(c, a), this.nc.T.oa++);
}, uG:function(a) {
  var b = "";
  for (a = u.kj.ki(a.attributes); a.Gl();) {
    var c = a.current;
    if (!w(c.name, "thick")) {
      b = "  ";
      break;
    } else if (!w(c.name, "thin")) {
      b = " ";
      break;
    }
  }
  return b;
}, vu:function(a) {
  for (var b = 0, c = 0, d = u.kj.ki(a.attributes); d.Gl();) {
    var e = d.current;
    w(e.name, "index") ? w(e.name, "type") || (c = parseInt(e.value)) : b = parseInt(e.value);
  }
  switch(c) {
    case 1:
      d = new xb(166, 214, 72, 0.5);
      break;
    case 3:
      d = new xb(250, 237, 105, 0.5);
      break;
    case 4:
      d = new xb(247, 147, 0, 0.5);
      break;
    default:
      d = new xb(255, 0, 0, 0.5);
  }
  d = new Nd(d, b, c);
  d.nD(this.nc.clone());
  d.Dn(b);
  d.kN(c);
  if (a.hasChildNodes() && (b = u.Zw("<comment_data/>").firstChild, 0 < a.getElementsByTagName("p").length && b.appendChild(a.getElementsByTagName("p")[0].cloneNode(!0)), 0 < a.getElementsByTagName("sptranslation").length && b.appendChild(a.getElementsByTagName("sptranslation")[0].cloneNode(!0)), d.fN(b), 0 < a.getElementsByTagName("audios").length)) {
    a = a.getElementsByTagName("audios");
    b = [];
    for (c = 0; c < a.length; c++) {
      e = a[c].getElementsByTagName("audio");
      for (var f = 0; f < e.length; f++) {
        var k = parseInt(db.we(e[f]));
        null != this.Yc && b.add(this.Yc[k]);
      }
    }
    d.UM(b);
  }
  this.Ok.add(d);
}, uu:function(a) {
  var b = 0;
  for (a = u.kj.ki(a.attributes); a.Gl();) {
    var c = a.current;
    if (!w(c.name, "index")) {
      b = parseInt(c.value);
      break;
    }
  }
  b = this.fJ(b);
  null != b && b.AD(this.nc.clone());
}, Qw:function(a, b, c, d) {
  var e = this.Lf(c), f = 0, k = !1;
  do {
    var l = k ? a.indexOf("</i>", f) : a.indexOf("<i>", f);
    -1 === l && (l = a.length);
    var n = a.substr(f, l - f);
    l - f && (f = this.ee.Mh(d), f.bf(n), b.Fg(e, f), c.T.oa++, e.sb(c.T.oa));
    f = (k = !k) ? l + 3 : l + 4;
  } while (f < a.length);
}, Lf:function(a) {
  a = a.clone();
  var b = new Jc();
  b.Be(0);
  b.Ue(a.Ic);
  b.Yd(a.fa);
  b.sb(a.T.oa);
  b.sc(a.T.Ab);
  return b;
}, fJ:function(a) {
  for (var b = null, c = 0; c < this.Ok.length && (b = this.Ok[c], b.Jw() !== a); c++) {
  }
  return b;
}};
Zd = function() {
};
Zd.prototype = {};
de = function(a, b, c, d, e, f) {
  Dg(de, this, [a, b, c, d, e]);
  this.Vm = [];
  this.WH = f;
};
de.prototype = {Vm:null, WH:null, ir:function(a, b, c) {
  var d = db.we(a);
  d = db.qB(d);
  a = b;
  0 < b.F.length && b.Xa(0).pn() && "\n" !== d.charAt(0) && (b.Xa(1).bf("\n"), this.nc.fa++, this.nc.T.oa = 0, this.nc.T.Ab = 0, b = this.Lf(this.nc), a = this.ee.Lh(this.le), c.nn(b, a));
  b = d.split(this.WH);
  a = this.OC(b[0], a, c, this.le);
  for (d = 1; d < b.length; d++) {
    this.Ma = this.ee.Li(this.le), this.nc = new Kd(), this.Vm.add(this.Ma), a = this.OC(b[d], this.Ma.Lb(0), c, this.le);
  }
  return a;
}};
ee = function(a, b) {
  this.qq = a;
  this.Uj = b;
  this.Zq = new Ac();
  this.Zq.Cn(this.Bz);
  this.Zq.lf(16);
  this.Zq.mt(0);
  this.Zq = a.He(a.zf(this.Zq));
  this.uo = new Ac();
  this.uo.Cn(this.Bz);
  this.uo.lf(16);
  this.uo.mt(0);
  this.uo = a.He(a.zf(this.uo));
  this.ot = new Ac();
  this.ot.Cn(this.Bz);
  this.ot.lf(16);
  this.ot.mt(1);
  this.ot = a.He(a.zf(this.ot));
  this.pt = new Ac();
  this.pt.lf(16);
  this.pt.mt(1);
  this.pt.Cn(this.Bz);
  this.pt = a.He(a.zf(this.pt));
};
ee.prototype = {qq:null, Uj:null, Bz:"'Roboto', '-apple-system', '.SFNSText-Regular', 'San Francisco', 'Helvetica Neue', 'Segoe UI', 'Lucida Grande', 'sans-serif'", uo:null, Zq:null, pt:null, ot:null, vj:function() {
  return this.Zq;
}, Ri:function() {
  return this.uo;
}, Si:function() {
  return this.pt;
}, Mw:function() {
  return this.ot;
}, af:function() {
  return this.Uj;
}, Re:function() {
  return this.qq;
}, Qg:function(a, b, c, d) {
  return new Wd(this, this.Uj, b, c, d);
}, DF:function(a, b, c, d, e) {
  var f = null;
  switch(a) {
    case 1:
      switch(b) {
        case 1:
        case 0:
          f = new Rd(this, c, d, e);
          break;
        case 5:
          f = new he(this, c, d, e);
          break;
        case 6:
          f = new Gd(this, c, d, e);
          break;
        case 7:
          f = new Fd(this, c, d, e);
          break;
        case 8:
          f = new Ed(this, c, d, e);
      }break;
    case 2:
      switch(b) {
        case 0:
          f = new ie(this, this.Uj, c, !0, d, e, this.qq);
          break;
        case 1:
          f = new ie(this, this.Uj, c, !1, d, e, this.qq);
      }
  }
  return f;
}, Jq:function(a, b, c, d) {
  switch(a.nodeName) {
    case "egraph":
      return new Pd(this, c, d);
    case "tr":
      return new je(this, b, c, d);
    case "image":
      return new Vd(this, b, c, d);
    case "audios":
    case "audio":
      return new Ud(this, b, c, d);
    case "blank_document":
      return new Id(this, b, c, d);
    case "operator":
      return new Td(this, b, c, d);
    case "expression":
      return new Qd(this, b, c, d);
  }
  return null;
}, Ky:function(a, b, c) {
  return new Qd(this, a, b, c);
}};
he = function(a, b, c, d) {
  this.Ac = a;
  this.Tc = b;
  this.Ge = c;
  this.Yc = d;
};
he.prototype = {Ac:null, Tc:null, Ge:null, Yc:null, Dh:"SQUARE_ROOT", parse:function(a, b) {
  var c = this.Ac.af().createElement(this.Dh, b ? this.Ac.Si() : this.Ac.Ri());
  a = this.Ac.Qg(a, c, this.Ge, this.Yc).wn(a.getElementsByTagName("pile")[0], b);
  c.Ue(a);
  return c;
}, Yb:function() {
  return null;
}};
ie = function(a, b, c, d, e, f) {
  this.Ac = a;
  this.Tc = c;
  this.SE = d;
  this.Ge = e;
  this.Yc = f;
};
ie.prototype = {Ac:null, Tc:null, SE:!1, Ge:null, Yc:null, Dh:"SUPER_SUB", parse:function(a, b) {
  b = this.Ac.af().createElement(this.Dh, b ? this.Ac.Si() : this.Ac.Ri());
  b.xD(this.SE);
  a = this.Ac.Qg(a, b, this.Ge, this.Yc).wn(a.getElementsByTagName("pile")[0], !0);
  b.Ue(a);
  return b;
}, Yb:function() {
  return null;
}};
dd = function() {
  Dg(dd, this);
  this.Bq = !1;
  this.yb = [];
};
dd.prototype = {UH:"", clone:function(a) {
  a = a.Mi("AUDIO", []);
  a.Wp(this.Vs.ka(), this.Vs.xa(), 0);
  a.Dn(this.ro);
  a.Go(this.tr);
  a.IH(this.Bq);
  return a;
}, Qi:function() {
  return 11;
}, BH:function(a) {
  this.UH = a;
}, Tf:function(a) {
  this.yb.contains(zg.gd(a, ke)) || this.yb.add(zg.gd(a, ke));
}, wg:function(a) {
  this.yb.contains(zg.gd(a, ke)) && this.yb.remove(zg.gd(a, ke));
}};
oe = function(a, b) {
  this.wa = a;
  this.parent = b;
  this.P = [];
  this.za = [];
  this.za.add(new pe());
};
oe.prototype = {P:null, wa:null, parent:null, za:null, Wc:function(a) {
  this.parent = a;
}, Bp:function() {
  return this.parent;
}, WB:function(a) {
  return a < this.P.length ? this.P[a] : null;
}, dx:function() {
  return null;
}, ex:function() {
}, aj:function() {
}, tp:function(a, b, c, d) {
  for (var e = c; e < c + d; ++e) {
    this.za[e].cc();
  }
  null != this.parent && this.parent.OB(a, b, c, d);
}, iz:function(a) {
  this.za[a].cc();
}, no:function(a, b, c, d, e) {
  e ? this.za[c].Ao() : this.za[c].mo();
  null != this.parent && this.parent.no(a, b, c, d, e);
}, Kp:function() {
  for (var a = 0; a < this.P.length; a++) {
    this.P[a].Kp();
  }
  for (a = 0; a < this.za.length; a++) {
    this.za[a].cc();
  }
}};
yd = function(a, b) {
  Dg(yd, this, [a, b]);
};
yd.prototype = {Rd:0, Eg:0, oc:4, Xd:2, Mu:1, Vw:null, Op:null, kh:function() {
  if (null != this.Vw) {
    this.Vw.wg(this);
    for (var a = this.P.length, b = 0; b < a; ++b) {
      this.P[b].Jn();
    }
    this.P.removeRange(0, a);
  }
}, vm:function(a) {
  if (this.Vw !== a) {
    this.kh();
    if (null != a) {
      a.Tf(this);
      for (var b = a.Vc(), c = 0; c < b; ++c) {
        var d = this.wa.oo(this);
        d.um(a.Hc(c));
        this.P.add(d);
      }
    }
    this.Vw = a;
  }
}, Xa:function() {
  return this.Vw;
}, Ie:function(a, b, c, d) {
  this.za.length || (this.za[0] = new pe());
  this.P[0].Ie(-1, b, -1, d);
  this.Rd = this.P[0].hm(0).bC() + this.Xd;
  this.Eg = this.xa() - this.Rd;
  this.za[0].Wg(this.xa());
  this.za[0].dj(this.ka());
  this.za[0].pi();
  return this.za;
}, Wk:function(a, b, c, d) {
  if (!(a >= this.za.length || (a = this.za[a], d && a.Xk() || !d && a.Fk()))) {
    for (d ? (a.rg(), a.lk()) : (a.cm(), a.vl()), c++, a = 0; a < this.P[0].Ik(); a++) {
      this.P[0].yn(a, b, c, d);
    }
  }
}, vg:function(a, b, c) {
  b = this.za[0].hf();
  b.K().style.position = "relative";
  b.K().style.display = "inline-block";
  b.K().style.height = this.xa() + "px";
  b.K().style.verticalAlign = "top";
  b.K().style.width = this.ka() + "px";
  b.K().style.top = a - this.qb() + "px";
  null == this.Op && (this.Op = new Lc(), b.append(this.Op));
  this.Op.K().style.position = "absolute";
  this.Op.K().style.display = "block";
  this.Op.K().style.height = this.P[0].xa() - this.Mu + "px";
  this.Op.K().style.left = (this.ka() - this.P[0].ka()) / 2 + "px";
  this.Op.K().style.top = this.Xd + "px";
  this.za[0].Bl() || (a = this.P[0].Ol(0, c), this.Op.append(a));
  this.za[0].Rq();
  return b;
}, aj:function(a, b, c, d, e, f, k, l, n) {
  f += k - this.qb() + this.Xd;
  this.P[0].Fj(a, 0, b, c, d + 1, e + (this.ka() - this.P[0].ka()) / 2, f, n);
}, qb:function() {
  return this.Rd;
}, td:function() {
  return this.Eg;
}, xa:function() {
  return this.P[0].xa() + this.Xd + this.Mu;
}, ka:function() {
  return this.P[0].ka();
}, gb:function() {
}};
ke = function(a, b, c) {
  Dg(ke, this, [a, b, c]);
};
Hd = function(a, b) {
  Dg(Hd, this, [a, b]);
};
Hd.prototype = {Ws:null, Xd:4, oc:4, fe:8, kc:1, ln:1, mn:1, pC:10, mC:10, ag:null, Sc:null, kh:function() {
  if (null != this.Ws) {
    this.Ws.wg(this);
    for (var a = this.P.length, b = 0; b < a; ++b) {
      this.P[b].Jn();
    }
    this.P.removeRange(0, a);
  }
}, vm:function(a) {
  if (this.Ws !== a) {
    this.kh();
    if (null != a) {
      a.Tf(this);
      for (var b = a.Vc(), c = 0; c < b; ++c) {
        var d = this.wa.oo(this);
        d.um(a.Hc(c));
        this.P.add(d);
      }
    }
    this.Ws = a;
  }
}, Xa:function() {
  return this.Ws;
}, Ie:function(a, b, c, d) {
  this.za.length || (this.za[0] = new pe());
  this.P[0].Ie(-1, b - (2 * this.oc + this.ln + 4 * this.kc + this.fe), -1, d);
  this.za[0].Wg(this.xa());
  this.za[0].dj(this.ka());
  this.za[0].pi();
  return this.za;
}, vg:function(a, b, c) {
  b = this.za[0].hf();
  if (this.za[0].Bl()) {
    return b;
  }
  var d = this.Ws.Hc(0).Lb(0).Jk(), e = "black";
  null != d && (e = d.Bc.ai());
  b.clear();
  b.K().style.position = "relative";
  b.K().style.display = "inline-block";
  b.K().style.height = this.xa() + "px";
  b.K().style.verticalAlign = "top";
  b.K().style.top = a - this.qb() + "px";
  b.K().style.width = 2 * this.oc + 1 + 4 * this.kc + this.P[0].ka() + this.fe + "px";
  this.Sc = new Lc();
  this.Sc.K().style.display = "inline-block";
  this.Sc.K().style.width = this.P[0].ka() + "px";
  this.Sc.K().style.height = this.P[0].xa() + "px";
  this.Sc.K().style.borderTop = "1px Solid";
  this.Sc.K().style.color = e;
  this.Sc.K().style.top = this.Xd + "px";
  this.Sc.K().style.position = "absolute";
  this.Sc.K().style.left = this.oc + "px";
  this.Sc.K().style.paddingBottom = this.kc + "px";
  this.Sc.K().style.paddingTop = this.kc + "px";
  this.Sc.K().style.paddingLeft = 2 * this.kc + "px";
  this.Sc.K().style.paddingRight = 2 * this.kc + "px";
  this.ag = new Lc();
  this.ag.K().innerText = ">";
  this.ag.K().textContent = ">";
  this.ag.K().style.color = e;
  this.ag.K().style.position = "absolute";
  this.ag.K().style.width = this.fe + "px";
  this.ag.K().style.top = "-5px";
  this.ag.K().style.left = this.oc + 1 + this.P[0].ka() + 2 + "px";
  this.ag.K().style.display = "inline";
  this.ag.K().style.fontSize = "15px";
  a = this.P[0].Ol(0, c);
  this.Sc.append(a);
  b.append(this.Sc);
  b.append(this.ag);
  return b;
}, aj:function(a, b, c, d, e, f, k, l, n) {
  f += k - this.qb() + this.Xd;
  k = this.P[0].xa();
  12 > k && (f -= 12 - k);
  l = this.Ws.Hc(0).Lb(0).Jk();
  k = "black";
  null != l && (k = l.Bc.ai());
  l = a.getContext("2d");
  l.strokeStyle = k;
  l.lineWidth = 1;
  l.beginPath();
  l.moveTo(e + 2 * this.oc + 1 + 4 * this.kc + this.P[0].ka() + this.fe - 1, f + 0.5);
  l.lineTo(e + this.oc + this.fe + 0.5, f + 0.5);
  l.stroke();
  l.beginPath();
  l.moveTo(e + 2 * this.oc + 1 + 4 * this.kc + this.P[0].ka() + this.fe - 1, f + 0.5 + 5);
  l.lineTo(e + 2 * this.oc + 1 + 4 * this.kc + this.P[0].ka() + this.fe - 1 + this.fe, f + 0.5);
  l.lineTo(e + 2 * this.oc + 1 + 4 * this.kc + this.P[0].ka() + this.fe - 1, f + 0.5 - 5);
  l.stroke();
  this.P[0].Fj(a, 0, b, c, d + 1, e + this.oc + this.fe + 2 * this.kc + 1, f + 1 + this.kc, n);
}, qb:function() {
  return this.P[0].hm(0).Kw(0) + this.Xd + this.kc + this.mn;
}, td:function() {
  return this.P[0].xa() + this.Xd + 2 * this.kc + this.mn - this.qb();
}, xa:function() {
  return this.qb() + this.td() + this.mC;
}, gb:function() {
}, Wk:function(a, b, c, d) {
  if (!(a >= this.za.length || (a = this.za[a], d && a.Xk() || !d && a.Fk()))) {
    for (d ? (a.rg(), a.lk()) : (a.cm(), a.vl()), c++, a = 0; a < this.P[0].Ik(); a++) {
      this.P[0].yn(a, b, c, d);
    }
  }
}, ka:function() {
  return 2 * this.oc + this.ln + 4 * this.kc + this.P[0].ka() + this.fe + this.pC;
}};
Ad = function(a, b) {
  Dg(Ad, this, [a, b]);
};
Ad.prototype = {hk:null, Xd:4, oc:4, fe:8, kc:1, ln:1, mn:1, pC:10, mC:10, Rm:null, ag:null, Sc:null, kh:function() {
  if (null != this.hk) {
    this.hk.wg(this);
    for (var a = this.P.length, b = 0; b < a; ++b) {
      this.P[b].Jn();
    }
    this.P.removeRange(0, a);
  }
}, vm:function(a) {
  if (this.hk !== a) {
    this.kh();
    if (null != a) {
      a.Tf(this);
      for (var b = a.Vc(), c = 0; c < b; ++c) {
        var d = this.wa.oo(this);
        d.um(a.Hc(c));
        this.P.add(d);
      }
    }
    this.hk = a;
  }
}, Xa:function() {
  return this.hk;
}, Ie:function(a, b, c, d) {
  this.za.length || (this.za[0] = new pe());
  this.P[0].Ie(-1, b - (2 * this.oc + this.ln + 4 * this.kc + this.fe), -1, d);
  this.za[0].Wg(this.xa());
  this.za[0].dj(this.ka());
  this.za[0].pi();
  null != this.ag && null != this.Sc && (this.ag.K().style.left = this.oc + 1 + this.fe + this.Sc.K().clientWidth + 2 + "px");
  return this.za;
}, vg:function(a, b, c) {
  b = this.za[0].hf();
  if (this.za[0].Bl()) {
    return b;
  }
  var d = this.hk.Hc(0).Lb(0).Jk(), e = "black";
  null != d && (e = d.Bc.ai());
  b.clear();
  b.K().style.position = "relative";
  b.K().style.display = "inline-block";
  b.K().style.height = this.xa() + "px";
  b.K().style.verticalAlign = "top";
  b.K().style.top = a - this.qb() + "px";
  b.K().style.width = 2 * this.oc + 1 + 4 * this.kc + this.P[0].ka() + this.fe + "px";
  this.Rm = new Lc();
  this.Rm.K().innerText = "<";
  this.Rm.K().textContent = "<";
  this.Rm.K().style.color = e;
  this.Rm.K().style.position = "absolute";
  this.Rm.K().style.width = this.fe + "px";
  this.Rm.K().style.top = "-5px";
  this.Rm.K().style.left = this.oc + 1 + "px";
  this.Rm.K().style.display = "inline";
  this.Rm.K().style.fontSize = "15px";
  this.Sc = new Lc();
  this.Sc.K().style.display = "inline-block";
  this.Sc.K().style.width = this.P[0].ka() + "px";
  this.Sc.K().style.height = this.P[0].xa() + "px";
  this.Sc.K().style.color = e;
  this.Sc.K().style.borderTop = "1px Solid";
  this.Sc.K().style.top = this.Xd + "px";
  this.Sc.K().style.position = "absolute";
  this.Sc.K().style.left = this.oc + this.fe + "px";
  this.Sc.K().style.paddingBottom = this.kc + "px";
  this.Sc.K().style.paddingTop = this.kc + "px";
  this.Sc.K().style.paddingLeft = 2 * this.kc + "px";
  this.Sc.K().style.paddingRight = 2 * this.kc + "px";
  this.ag = new Lc();
  this.ag.K().innerText = ">";
  this.ag.K().textContent = ">";
  this.ag.K().style.color = e;
  this.ag.K().style.position = "absolute";
  this.ag.K().style.width = this.fe + "px";
  this.ag.K().style.top = "-5px";
  this.ag.K().style.left = this.oc + 1 + this.fe + this.P[0].ka() + 2 + "px";
  this.ag.K().style.display = "inline";
  this.ag.K().style.fontSize = "15px";
  a = this.P[0].Ol(0, c);
  this.Sc.append(a);
  b.append(this.Rm);
  b.append(this.Sc);
  b.append(this.ag);
  return b;
}, aj:function(a, b, c, d, e, f, k, l, n) {
  f += k - this.qb() + this.Xd;
  k = this.P[0].xa();
  12 > k && (f -= 12 - k);
  l = this.hk.Hc(0).Lb(0).Jk();
  k = "black";
  null != l && (k = l.Bc.ai());
  l = a.getContext("2d");
  l.strokeStyle = k;
  l.lineWidth = 1;
  l.beginPath();
  l.moveTo(e + 2 * this.oc + 1 + 4 * this.kc + this.P[0].ka() + this.fe - 1, f + 0.5);
  l.lineTo(e + this.oc + this.fe + 0.5, f + 0.5);
  l.stroke();
  l.beginPath();
  l.moveTo(e + this.oc + this.fe + 0.5, f + 0.5 + 5);
  l.lineTo(e + this.oc + 0.5, f + 0.5);
  l.lineTo(e + this.oc + this.fe + 0.5, f + 0.5 - 5);
  l.stroke();
  l.beginPath();
  l.moveTo(e + 2 * this.oc + 1 + 4 * this.kc + this.P[0].ka() + this.fe - 1, f + 0.5 + 5);
  l.lineTo(e + 2 * this.oc + 1 + 4 * this.kc + this.P[0].ka() + this.fe - 1 + this.fe, f + 0.5);
  l.lineTo(e + 2 * this.oc + 1 + 4 * this.kc + this.P[0].ka() + this.fe - 1, f + 0.5 - 5);
  l.stroke();
  this.P[0].Fj(a, 0, b, c, d + 1, e + this.oc + this.fe + 2 * this.kc + 1, f + 1 + this.kc, n);
}, qb:function() {
  return this.P[0].hm(0).Kw(0) + this.Xd + this.kc + this.mn;
}, td:function() {
  return this.P[0].xa() + this.Xd + 2 * this.kc + this.mn - this.qb();
}, xa:function() {
  return this.qb() + this.td() + this.mC;
}, gb:function() {
}, Wk:function(a, b, c, d) {
  if (!(a >= this.za.length || (a = this.za[a], d && a.Xk() || !d && a.Fk()))) {
    for (d ? (a.rg(), a.lk()) : (a.cm(), a.vl()), c++, a = 0; a < this.P[0].Ik(); a++) {
      this.P[0].yn(a, b, c, d);
    }
  }
}, ka:function() {
  return 2 * this.oc + this.ln + 4 * this.kc + this.P[0].ka() + this.fe + this.pC;
}};
re = function(a, b) {
  Dg(re, this, [a, b]);
};
re.prototype = {hk:null, Xd:4, oc:4, fe:8, kc:1, ln:1, mn:1, Sc:null, kh:function() {
  if (null != this.hk) {
    this.hk.wg(this);
    for (var a = this.P.length, b = 0; b < a; ++b) {
      this.P[b].Jn();
    }
    this.P.removeRange(0, a);
  }
}, vm:function(a) {
  if (this.hk !== a) {
    this.kh();
    if (null != a) {
      a.Tf(this);
      for (var b = a.Vc(), c = 0; c < b; ++c) {
        var d = this.wa.oo(this);
        d.um(a.Hc(c));
        this.P.add(d);
      }
    }
    this.hk = a;
  }
}, Xa:function() {
  return this.hk;
}, Ie:function(a, b, c, d) {
  this.za.length || (this.za[0] = new pe());
  this.P[0].Ie(-1, b - (2 * this.oc + this.ln + 4 * this.kc + this.fe), -1, d);
  this.za[0].Wg(this.xa());
  this.za[0].dj(this.ka());
  this.za[0].pi();
  return this.za;
}, vg:function(a, b, c) {
  b = this.za[0].hf();
  if (this.za[0].Bl()) {
    return b;
  }
  var d = this.hk.Hc(0).Lb(0).Jk(), e = "black";
  null != d && (e = d.Bc.ai());
  b.clear();
  b.K().style.position = "relative";
  b.K().style.display = "inline-block";
  b.K().style.height = this.xa() + "px";
  b.K().style.verticalAlign = "top";
  b.K().style.top = a - this.qb() + "px";
  b.K().style.width = 2 * this.oc + 1 + 4 * this.kc + this.P[0].ka() + this.fe + "px";
  this.Sc = new Lc();
  this.Sc.K().style.display = "inline-block";
  this.Sc.K().style.width = this.P[0].ka() + "px";
  this.Sc.K().style.height = this.P[0].xa() + "px";
  this.Sc.K().style.color = e;
  this.Sc.K().style.borderTop = "1px Solid";
  this.Sc.K().style.top = this.Xd + "px";
  this.Sc.K().style.position = "absolute";
  this.Sc.K().style.left = this.oc + this.fe + "px";
  this.Sc.K().style.paddingBottom = this.kc + "px";
  this.Sc.K().style.paddingTop = this.kc + "px";
  this.Sc.K().style.paddingLeft = 2 * this.kc + "px";
  this.Sc.K().style.paddingRight = 2 * this.kc + "px";
  a = this.P[0].Ol(0, c);
  this.Sc.append(a);
  b.append(this.Sc);
  return b;
}, aj:function(a, b, c, d, e, f, k, l, n) {
  f += k - this.qb() + this.Xd;
  k = this.P[0].xa();
  12 > k && (f -= 12 - k);
  l = this.hk.Hc(0).Lb(0).Jk();
  k = "black";
  null != l && (k = l.Bc.ai());
  l = a.getContext("2d");
  l.strokeStyle = k;
  l.lineWidth = 1;
  l.beginPath();
  l.moveTo(e + 2 * this.oc + 1 + 4 * this.kc + this.P[0].ka() + this.fe - 1, f + 0.5);
  l.lineTo(e + this.oc + this.fe + 0.5, f + 0.5);
  l.stroke();
  this.P[0].Fj(a, 0, b, c, d + 1, e + this.oc + this.fe + 2 * this.kc + 1, f + 1 + this.kc, n);
}, qb:function() {
  return this.P[0].hm(0).Kw(0) + this.Xd + this.kc + this.mn;
}, td:function() {
  return this.P[0].xa() + this.Xd + 2 * this.kc + this.mn - this.qb();
}, xa:function() {
  return this.qb() + this.td();
}, gb:function() {
}, Wk:function(a, b, c, d) {
  if (!(a >= this.za.length || (a = this.za[a], d && a.Xk() || !d && a.Fk()))) {
    for (d ? (a.rg(), a.lk()) : (a.cm(), a.vl()), c++, a = 0; a < this.P[0].Ik(); a++) {
      this.P[0].yn(a, b, c, d);
    }
  }
}, ka:function() {
  return 2 * this.oc + this.ln + 4 * this.kc + this.P[0].ka() + this.fe;
}};
se = function(a, b, c) {
  this.jh = a;
  this.eh = c;
  this.BA = b;
};
se.prototype = {jh:null, eh:null, BA:null, Yb:function() {
  if (null != this.BA) {
    var a = this.jh.xl(this.BA.Hc(0), this.eh).Yb(), b = db.Vb("<expression/>");
    b.appendChild(a);
    return b;
  }
  return null;
}};
ue = function(a, b, c) {
  Dg(ue, this, [a, b, c]);
  this.Zi = b;
};
ue.prototype = {Yb:function() {
  if (null != this.Zi) {
    var a = "<audio ext='" + ab.aC(this.Zi.UH) + "' width='" + 15 * this.Zi.ka() + "' height='" + 15 * this.Zi.qb() + "' baseline='" + 15 * this.Zi.qb() + "'>" + this.Zi.Jw() + "</audio>";
    return db.Vb(a);
  }
  return null;
}};
ve = function(a, b, c) {
  this.OA = b;
  this.ff = a;
  this.Me = c;
};
ve.prototype = {OA:null, ff:null, Me:null, Yb:function() {
  if (null != this.OA) {
    var a = this.ff.Kq(this.OA.Hc(0), this.Me).Yb(), b = db.Vb("<template type='1' subtype='7'/>");
    b.appendChild(a);
    return b;
  }
  return null;
}};
we = function(a, b, c) {
  this.QA = b;
  this.ff = a;
  this.Me = c;
};
we.prototype = {QA:null, ff:null, Me:null, Yb:function() {
  if (null != this.QA) {
    var a = this.ff.Kq(this.QA.Hc(0), this.Me).Yb(), b = db.Vb("<template type='1' subtype='8'/>");
    b.appendChild(a);
    return b;
  }
  return null;
}};
xe = function(a, b, c) {
  this.Zi = b;
  this.jh = a;
  this.eh = c;
};
xe.prototype = {Zi:null, jh:null, eh:null, Yb:function() {
  if (null != this.Zi) {
    var a = "<image ext='" + ab.aC(this.Zi.tr) + "' width='" + 15 * this.Zi.ka() + "' height='" + 15 * this.Zi.qb() + "' baseline='" + 15 * this.Zi.qb() + "' scale='" + this.Zi.scale;
    a += "'>" + this.Zi.Jw() + "</image>";
    a = db.Vb(a);
    if (null != this.Zi.yu) {
      var b = this.Zi.yL();
      db.setAttribute(a, "crop", b);
    }
    return a;
  }
  return null;
}};
ye = function(a, b, c) {
  this.PA = b;
  this.ff = a;
  this.Me = c;
};
ye.prototype = {PA:null, ff:null, Me:null, Yb:function() {
  if (null != this.PA) {
    var a = this.ff.Kq(this.PA.Hc(0), this.Me).Yb(), b = db.Vb("<template type='1' subtype='6'/>");
    b.appendChild(a);
    return b;
  }
  return null;
}};
ze = function(a, b, c) {
  this.wy = b;
  this.ff = a;
  this.Me = c;
};
ze.prototype = {wy:null, ff:null, Me:null, Yb:function() {
  if (null != this.wy) {
    var a = this.ff.Kq(this.wy.Hc(0), this.Me).Yb(), b = db.Vb("<template type='2' subtype='" + (this.wy.ts ? 0 : 1) + "'/>");
    b.appendChild(a);
    return b;
  }
  return null;
}};
od = function(a) {
  Dg(od, this);
  this.Ma = a;
  this.Ma.Wc(this);
  this.yb = [];
};
od.prototype = {Ma:null, yb:null, clone:function(a) {
  var b = [];
  b.add(this.Ma.clone(a));
  a = a.Mi("LINE_SEGMENT", b);
  for (var c = 0; c < b.length; c++) {
    b[c].Wc(a);
  }
  return a;
}, Ue:function(a) {
  this.Ma = a;
  this.Ma.Wc(this);
}, Uq:function() {
  return this.Ma;
}, Hc:function(a) {
  return a ? null : this.Uq();
}, Tf:function(a) {
  this.yb.contains(zg.gd(a, re)) || this.yb.add(zg.gd(a, re));
}, wg:function(a) {
  this.yb.contains(zg.gd(a, re)) && this.yb.remove(zg.gd(a, re));
}, Qi:function() {
  return 13;
}, Vc:function() {
  return 1;
}};
Be = function() {
};
Zc = function() {
  Dg(Zc, this);
  this.Bq = !1;
  this.yb = [];
  this.scale = 1;
};
Zc.prototype = {Vs:null, ro:0, tr:null, yu:null, Bq:!1, yb:null, Rd:0, scale:0, clone:function(a) {
  a = a.Mi("PICTURE", []);
  a.Wp(this.Vs.ka(), this.Vs.xa(), 0);
  a.Dn(this.ro);
  a.Go(this.tr);
  a.mD(this.yu);
  a.IH(this.Bq);
  a.Fn(this.scale);
  return a;
}, Qi:function() {
  return 6;
}, Jw:function() {
  return this.ro;
}, Wp:function(a, b, c) {
  a = new Sd(a, b);
  this.Rd = b - c;
  this.Vs = a;
}, td:function() {
  return this.xa() - parseInt(this.qb());
}, ka:function() {
  return parseInt(this.Vs.ka());
}, qb:function() {
  return this.Rd;
}, xa:function() {
  return parseInt(this.Vs.xa());
}, Dn:function(a) {
  this.ro = a;
}, IH:function(a) {
  this.Bq = a;
}, Go:function(a) {
  this.tr = a;
}, Fn:function(a) {
  this.scale = a;
}, mD:function(a) {
  this.yu = a;
}, yL:function() {
  var a = {};
  Ya.lN(this.yu, a);
  delete a.VN;
  return JSON.stringify(a);
}, Tf:function(a) {
  this.yb.contains(zg.gd(a, Ee)) || this.yb.add(zg.gd(a, Ee));
}, wg:function(a) {
  this.yb.contains(zg.gd(a, zd)) && this.yb.remove(zg.gd(a, Ee));
}};
zc = function(a, b) {
  Dg(zc, this, [a, b]);
  this.Zv = {};
  this.YM();
};
zc.prototype = {Yw:null, Rd:0, Eg:0, oc:8, Xd:4, Mu:1, Zv:null, bp:null, Um:null, YM:function() {
  this.Zv[-1] = "BLUE";
  this.Zv[0] = "RED";
  this.Zv[1] = "GREEN";
  this.Zv[2] = "BLUE";
}, kh:function() {
  if (null != this.Yw) {
    this.Yw.wg(this);
    for (var a = this.P.length, b = 0; b < a; ++b) {
      this.P[b].Jn();
    }
    this.P.removeRange(0, a);
  }
}, vm:function(a) {
  if (this.Yw !== a) {
    this.kh();
    if (null != a) {
      a.Tf(this);
      for (var b = a.Vc(), c = 0; c < b; ++c) {
        var d = this.wa.oo(this);
        d.um(a.Hc(c));
        this.P.add(d);
      }
    }
    this.Yw = a;
  }
}, Xa:function() {
  return this.Yw;
}, Ie:function(a, b, c, d) {
  this.za.length || (this.za[0] = new pe());
  this.P[0].Ie(-1, b - 2 * this.oc, -1, d);
  this.Rd = this.P[0].hm(0).bC() + this.Xd;
  this.Eg = this.xa() - this.Rd;
  this.za[0].Wg(this.xa());
  this.za[0].dj(this.ka());
  this.za[0].pi();
  return this.za;
}, Wk:function(a, b, c, d) {
  if (!(a >= this.za.length || (a = this.za[a], d && a.Xk() || !d && a.Fk()))) {
    for (d ? (a.rg(), a.lk()) : (a.cm(), a.vl()), c++, a = 0; a < this.P[0].Ik(); a++) {
      this.P[0].yn(a, b, c, d);
    }
  }
}, vg:function(a, b, c) {
  b = this.za[0].hf();
  b.K().style.position = "relative";
  b.K().style.display = "inline-block";
  b.K().style.height = this.xa() + "px";
  b.K().style.verticalAlign = "top";
  b.K().style.width = this.ka() + "px";
  b.K().style.top = a - this.qb() + "px";
  null == this.bp && (this.bp = new Lc(), b.append(this.bp));
  this.bp.K().style.position = "absolute";
  this.bp.K().style.display = "block";
  this.bp.K().style.height = this.P[0].xa() - this.Mu + "px";
  this.bp.K().style.left = (this.ka() - this.P[0].ka()) / 2 + "px";
  this.bp.K().style.top = this.Xd + "px";
  null == this.Um && (this.Um = new Lc(), b.append(this.Um));
  this.Um.K().style.position = "absolute";
  this.Um.K().style.display = "block";
  this.Um.K().style.height = "0px";
  this.Um.K().style.left = "0px";
  this.Um.K().style.width = this.ka() + "px";
  this.Um.K().style.top = this.Xd / 2 + this.P[0].xa() + "px";
  this.Um.K().style.borderTop = this.Mu + "px";
  this.Um.K().style.borderTopStyle = "solid";
  this.za[0].Bl() || (a = this.P[0].Ol(0, c), this.bp.append(a));
  this.za[0].Rq();
  return b;
}, aj:function(a, b, c, d, e, f, k, l, n) {
  f += k - this.qb() + this.Xd / 2;
  k = a.getContext("2d");
  k.strokeStyle = "black";
  k.lineWidth = 1;
  k.beginPath();
  k.moveTo(e, f + this.P[0].xa() + 0.5);
  k.lineTo(e + this.ka(), f + this.P[0].xa() + 0.5);
  k.stroke();
  this.P[0].Fj(a, 0, b, c, d + 1, e + (this.ka() - this.P[0].ka()) / 2, f, n);
}, qb:function() {
  return this.Rd;
}, td:function() {
  return this.Eg;
}, xa:function() {
  return this.P[0].xa() + this.Xd + this.Mu;
}, ka:function() {
  return 80 < this.P[0].ka() + 2 * this.oc ? this.P[0].ka() + 2 * this.oc : 80;
}, gb:function() {
}};
Ee = function(a, b, c) {
  Dg(Ee, this, [a, b]);
  this.fi = new Lc();
  this.fi.Vp(document.createElement("img"));
  this.ty = c;
};
Ee.prototype = {Yh:null, Rd:0, Eg:0, Wh:0, fi:null, ty:null, kh:function() {
  null != this.Yh && this.Yh.wg(this);
}, vm:function(a) {
  this.Yh !== a && (this.kh(), null != a && (a.Tf(this), a.Bq && this.fi.Vp(document.createElement("div"))), this.Yh = a);
}, Xa:function() {
  return this.Yh;
}, Ie:function(a, b) {
  if (this.za[0].zh()) {
    return this.za;
  }
  this.za[0].pi();
  this.Wh = this.Yh.ka();
  b < this.Yh.ka() ? (this.Wh = b, this.Rd = Math.ceil(this.Yh.qb() * this.Wh / this.Yh.ka()), this.Eg = 2 + Math.ceil(this.Yh.td() * this.Wh / this.Yh.ka())) : (this.Rd = Math.ceil(this.Yh.qb()), this.Eg = 2 + Math.ceil(this.Yh.td()));
  return this.za;
}, Wk:function() {
}, vg:function(a) {
  var b = this.za[0].hf();
  b.clear();
  b.K().style.position = "relative";
  b.K().style.display = "inline-block";
  b.K().style.height = this.xa() + "px";
  b.K().style.width = this.ka() + "px";
  b.K().style.top = a - this.qb() + "px";
  b.K().style.overflowX = "hidden";
  b.K().style.overflowY = "hidden";
  this.fi.K().style.width = this.ka() + "px";
  if (this.Yh.Bq) {
    b.K().style.verticalAlign = "top", this.fi.K().style.verticalAlign = "top", this.fi.K().setAttribute("class", this.Yh.tr);
  } else {
    var c = this.Yh.yu;
    if (null != c) {
      a = c.m_widthRatio;
      var d = c.m_heightRatio, e = c.m_imgWidth, f = c.m_CropStartX;
      c = c.m_CropStartY;
      this.fi.K().style.position = "absolute";
      this.fi.K().style.left = -f / a + "px";
      this.fi.K().style.top = -c / d + "px";
      this.fi.K().style.width = e / a + "px";
      this.fi.K().style.height = "auto";
    } else {
      this.fi.K().style.position = "static", b.K().style.verticalAlign = "top", this.fi.K().style.height = "auto", this.fi.K().style.verticalAlign = "top";
    }
    this.fi.K().setAttribute("src", this.Yh.tr);
  }
  b.append(this.fi);
  this.za[0].Rq();
  return b;
}, aj:function(a, b, c, d, e, f, k) {
  if (!this.Yh.Bq) {
    try {
      var l = this.oL();
      null == l && 0 < this.fi.K().src.length && (l = this.fi.K());
      null != l && a.getContext("2d").drawImage(l, e, f + k - this.qb(), this.ka(), this.xa());
    } catch (n) {
    }
  }
}, oL:function() {
  for (var a = this.Yh.tr, b = 0; b < this.ty.length; b++) {
    if (this.ty[b].src === a) {
      return this.ty[b];
    }
  }
  return null;
}, qb:function() {
  return this.Rd;
}, td:function() {
  return this.Eg;
}, xa:function() {
  return this.Rd + this.Eg;
}, ka:function() {
  return this.Wh;
}, gb:function() {
}};
Fe = function(a, b, c, d, e, f, k, l) {
  Dg(Fe, this, [a, c]);
  this.wa = a;
  this.fs = b;
  this.Wq = c;
  this.ry = d;
  this.Sv = e;
  this.JA = f;
  this.qy = k;
  this.py = l;
  this.aw = document.createElement("table");
  this.aw.setAttribute("cellspacing", this.py + "px");
  this.Mm = [];
};
Fe.prototype = {fs:0, Sv:0, qy:0, JA:0, ry:0, py:0, aw:null, Mm:null, K:function() {
  return this.aw;
}, YA:function() {
  var a = document.createElement("tr"), b = document.createElement("td");
  b.style.backgroundColor = "#ffffff";
  b.style.paddingLeft = this.ry + "px";
  b.style.paddingRight = this.JA + "px";
  b.style.paddingTop = this.Sv + "px";
  b.style.paddingBottom = this.qy + "px";
  b.style.verticalAlign = "top";
  b.style.height = this.fs + "px";
  b.style.textAlign = "left";
  b.style.width = this.Wq + "px";
  a.appendChild(b);
  this.aw.appendChild(a);
  this.Mm.add(b);
}, vK:function(a) {
  this.aw.removeChild(this.Mm[a].parentNode);
}, lz:function() {
  this.Ie(this.fs, this.Wq, this.fs, new Ge());
}, vg:function() {
  var a = 0, b = 0;
  this.Mm.length === b && this.YA();
  for (var c = 0; c < this.Oa.length; ++c) {
    this.Mm.length === c && this.YA();
    var d = this.Mm[c];
    this.Ol(c, new He());
    d.appendChild(this.Oa[c].hf().K());
    a + this.Oa[c].xa() > this.fs && a && (b++, a = 0, this.Mm.length === b && this.YA());
    a += this.Oa[c].xa();
  }
  if (b + 1 < this.Mm.length) {
    b++;
    for (c = b; c < this.Mm.length; ++c) {
      this.vK(c);
    }
    this.Mm.removeRange(b, this.Mm.length - b);
  }
}, aj:function(a, b, c, d, e) {
  for (var f = [], k = 0; k < b.length; k++) {
    for (var l = 0; l < b[k].ua.length; l++) {
      f.add(b[k].ua[l]);
    }
  }
  b = this.Ph().vG();
  k = this.Oa.length;
  var n = this.py, p = a.getContext("2d");
  for (l = 0; l < k; l++) {
    p.fillStyle = "#ffffff", p.fillRect(c, d + n, this.Wq + this.ry + this.JA, this.fs + this.Sv + this.qy), this.Fj(a, l, f, b, 0, c + this.ry, d + n + this.Sv, e), n += this.fs + this.Sv + this.qy + this.py;
  }
}};
zd = function(a, b) {
  Dg(zd, this, [a, b]);
};
zd.prototype = {Us:null, oc:8, Xd:1, gz:1, hp:null, cp:null, jp:null, kh:function() {
  if (null != this.Us) {
    this.Us.wg(this);
    for (var a = this.P.length, b = 0; b < a; ++b) {
      this.P[b].Jn();
    }
    this.P.removeRange(0, a);
  }
}, vm:function(a) {
  if (this.Us !== a) {
    this.kh();
    if (null != a) {
      a.Tf(this);
      for (var b = a.Vc(), c = 0; c < b; ++c) {
        var d = this.wa.oo(this);
        d.um(a.YB(c));
        this.P.add(d);
      }
    }
    this.Us = a;
  }
}, Xa:function() {
  return this.Us;
}, tp:function(a, b, c, d) {
  this.za[0].cc();
  null != this.parent && this.parent.OB(a, b, c, d);
}, Ie:function(a, b, c, d) {
  this.za.length || (this.za[0] = new pe());
  a = this.za[0];
  0 < this.P.length && (b -= 2 * this.oc, this.P[0].Ie(-1, b, -1, d), this.P[1].Ie(-1, b, -1, d), a.Wg(this.xa()), a.dj(this.GJ()));
  this.za[0].pi();
  return this.za;
}, vg:function(a, b, c) {
  b = this.Us.Hc(0).Lb(0).Jk();
  var d = "black";
  null != b && (d = b.Bc.ai());
  this.P[0].ka() > this.P[1].ka() ? this.P[0].ka() : this.P[1].ka();
  b = this.za[0].hf();
  b.K().style.position = "relative";
  b.K().style.display = "inline-block";
  b.K().style.height = this.xa() + "px";
  b.K().style.width = this.ka() + "px";
  b.K().style.top = a - this.qb() + "px";
  b.K().style.verticalAlign = "top";
  null == this.hp && (this.hp = new Lc());
  this.hp.K().style.position = "absolute";
  this.hp.K().style.left = (this.ka() - this.P[0].ka()) / 2 + "px";
  this.hp.K().style.top = this.Xd + "px";
  this.hp.K().style.width = this.P[0].ka() + "px";
  this.hp.K().style.height = this.P[0].xa() + "px";
  null == this.cp && (this.cp = new Lc());
  this.cp.K().style.position = "absolute";
  this.cp.K().style.left = (this.ka() - this.P[1].ka()) / 2 + "px";
  this.cp.K().style.top = this.Xd + this.qb() + this.gz + "px";
  this.cp.K().style.width = this.P[1].ka() + "px";
  this.cp.K().style.height = this.P[1].xa() + "px";
  null == this.jp && (this.jp = new Lc());
  this.jp.K().style.position = "absolute";
  this.jp.K().style.left = "2px";
  this.jp.K().style.top = this.qb() + "px";
  this.jp.K().style.width = this.ka() - 4 + "px";
  this.jp.K().style.borderBottom = this.gz + "px Solid";
  this.jp.K().style.color = d;
  a = this.P[0].Ol(0, c);
  c = this.P[1].Ol(0, c);
  this.hp.append(a);
  this.cp.append(c);
  b.append(this.hp);
  b.append(this.jp);
  b.append(this.cp);
  return b;
}, aj:function(a, b, c, d, e, f, k, l, n) {
  f += k - this.qb() + this.Xd;
  l = this.Us.Hc(0).Lb(0).Jk();
  k = "black";
  null != l && (k = l.Bc.ai());
  this.P[0].Fj(a, 0, b, c, d + 1, e + (this.ka() - this.P[0].ka()) / 2, f, n);
  l = a.getContext("2d");
  l.strokeStyle = k;
  l.lineWidth = 1;
  l.beginPath();
  l.moveTo(e + 2, f + this.qb() - this.Xd + 0.5);
  l.lineTo(e + this.ka() - 2, f + this.qb() - this.Xd + 0.5);
  l.stroke();
  this.P[1].Fj(a, 0, b, c, d + 1, e + (this.ka() - this.P[1].ka()) / 2, f + this.qb() + this.gz, n);
}, gb:function() {
}, qb:function() {
  return this.P[0].xa() + 2 * this.Xd + this.gz;
}, td:function() {
  return this.P[1].xa() + 2 * this.Xd;
}, xa:function() {
  return this.qb() + this.td();
}, ka:function() {
  return this.za[0].ka();
}, Wk:function(a, b, c, d) {
  if (!(a >= this.za.length || (a = this.za[a], d && a.Xk() || !d && a.Fk()))) {
    d ? (a.rg(), a.lk()) : (a.cm(), a.vl());
    a = {};
    c++;
    for (var e = null == b ? 0 : b.length, f = 0; f < e; ++f) {
      var k = b[f].from.Da(c).Ic, l = a[k];
      null == l && (l = [], a[k] = l);
      l.add(b[f]);
    }
    for (f = 0; f < this.P.length; f++) {
      for (b = 0; b < this.P[f].Ik(); b++) {
        l = a[f], this.P[f].yn(b, l, c, d);
      }
    }
  }
}, GJ:function() {
  return (this.P[0].ka() > this.P[1].ka() ? this.P[0].ka() : this.P[1].ka()) + 2 * this.oc;
}};
Ie = function(a, b) {
  Dg(Ie, this, [a, b]);
};
Ie.prototype = {Xs:null, Xd:2, oc:4, Ip:4, kc:1, ln:1, mn:1, kh:function() {
  if (null != this.Xs) {
    this.Xs.wg(this);
    for (var a = this.P.length, b = 0; b < a; ++b) {
      this.P[b].Jn();
    }
    this.P.removeRange(0, a);
  }
}, vm:function(a) {
  if (this.Xs !== a) {
    this.kh();
    if (null != a) {
      a.Tf(this);
      for (var b = a.Vc(), c = 0; c < b; ++c) {
        var d = this.wa.oo(this);
        d.um(a.Hc(c));
        this.P.add(d);
      }
    }
    this.Xs = a;
  }
}, Xa:function() {
  return this.Xs;
}, Ie:function(a, b, c, d) {
  this.za.length || (this.za[0] = new pe());
  this.P[0].Ie(-1, b - (2 * this.oc + this.ln + 4 * this.kc + this.Ip), -1, d);
  this.za[0].Wg(this.xa());
  this.za[0].dj(this.ka());
  this.za[0].pi();
  return this.za;
}, vg:function(a, b, c) {
  b = this.za[0].hf();
  if (this.za[0].Bl()) {
    return b;
  }
  var d = this.Xs.Hc(0).Lb(0).Jk(), e = "black";
  null != d && (e = d.Bc.ai());
  b.clear();
  b.K().style.position = "relative";
  b.K().style.display = "inline-block";
  b.K().style.height = this.xa() + "px";
  b.K().style.verticalAlign = "top";
  b.K().style.top = a - this.qb() + "px";
  b.K().style.width = 2 * this.oc + 1 + 4 * this.kc + this.P[0].ka() + this.Ip + "px";
  a = new Lc();
  a.K().innerText = "\\";
  a.K().textContent = "\\";
  a.K().style.color = e;
  a.K().style.position = "absolute";
  a.K().style.width = this.Ip + "px";
  a.K().style.bottom = "0px";
  a.K().style.left = this.oc + 1 + "px";
  a.K().style.display = "inline";
  a.K().style.fontSize = "12px";
  d = new Lc();
  d.K().style.display = "inline-block";
  d.K().style.width = this.P[0].ka() + "px";
  d.K().style.height = this.P[0].xa() + "px";
  d.K().style.color = e;
  d.K().style.borderLeft = "1px Solid";
  d.K().style.borderTop = "1px Solid";
  d.K().style.top = this.Xd + "px";
  d.K().style.position = "absolute";
  d.K().style.left = this.oc + this.Ip + "px";
  d.K().style.paddingBottom = this.kc + "px";
  d.K().style.paddingTop = this.kc + "px";
  d.K().style.paddingLeft = 2 * this.kc + "px";
  d.K().style.paddingRight = 2 * this.kc + "px";
  c = this.P[0].Ol(0, c);
  d.append(c);
  b.append(a);
  b.append(d);
  return b;
}, aj:function(a, b, c, d, e, f, k, l, n) {
  f += k - this.qb() + this.Xd;
  k = this.P[0].xa();
  12 > k && (f -= 12 - k, k = 12);
  var p = this.Xs.Hc(0).Lb(0).Jk();
  l = "black";
  null != p && (l = p.Bc.ai());
  p = a.getContext("2d");
  p.strokeStyle = l;
  p.lineWidth = 1;
  p.beginPath();
  p.moveTo(e + 2 * this.oc + 1 + 4 * this.kc + this.P[0].ka() + this.Ip - 1, f + 0.5);
  p.lineTo(e + this.oc + this.Ip + 0.5, f + 0.5);
  p.lineTo(e + this.oc + this.Ip + 0.5, f + k + this.kc + 1 + 0.5);
  p.lineTo(e + this.oc + 0.5, f + k + this.kc + 1 - 12 + 0.5);
  p.stroke();
  this.P[0].Fj(a, 0, b, c, d + 1, e + this.oc + this.Ip + 2 * this.kc + 1, f + 1 + this.kc, n);
}, qb:function() {
  return this.P[0].hm(0).Kw(0) + this.Xd + this.kc + this.mn;
}, td:function() {
  return this.P[0].xa() + this.Xd + 2 * this.kc + this.mn - this.qb();
}, xa:function() {
  return this.qb() + this.td();
}, gb:function() {
}, Wk:function(a, b, c, d) {
  if (!(a >= this.za.length || (a = this.za[a], d && a.Xk() || !d && a.Fk()))) {
    for (d ? (a.rg(), a.lk()) : (a.cm(), a.vl()), c++, a = 0; a < this.P[0].Ik(); a++) {
      this.P[0].yn(a, b, c, d);
    }
  }
}, ka:function() {
  return 2 * this.oc + this.ln + 4 * this.kc + this.P[0].ka() + this.Ip;
}};
Je = function(a, b) {
  Dg(Je, this, [a, b]);
};
Je.prototype = {vo:null, oc:2, Rd:0, Eg:0, kh:function() {
  if (null != this.vo) {
    this.vo.wg(this);
    for (var a = this.P.length, b = 0; b < a; ++b) {
      this.P[b].Jn();
    }
    this.P.removeRange(0, a);
  }
}, vm:function(a) {
  if (this.vo !== a) {
    this.kh();
    if (null != a) {
      a.Tf(this);
      for (var b = a.Vc(), c = 0; c < b; ++c) {
        var d = this.wa.oo(this);
        d.um(a.Hc(c));
        this.P.add(d);
      }
    }
    this.vo = a;
  }
}, Xa:function() {
  return this.vo;
}, Ie:function(a, b, c, d) {
  this.za.length || (this.za[0] = new pe());
  null != this.P[0] && this.P[0].Ie(-1, b - 2 * this.oc, -1, d);
  this.Rd = d.KA;
  this.Eg = d.LA;
  this.vo.ts ? (a = this.Rd - this.P[0].xa(), a = 0 < a ? 9 * this.P[0].xa() / 10 : 9 * this.Rd / 10, this.Rd += this.P[0].xa() - a) : (a = this.P[0].xa() / 2, this.Rd < this.P[0].xa() && (a = this.P[0].xa() - this.Rd / 2), a -= this.Eg, 0 < a && (this.Eg += a));
  this.za[0].pi();
  return this.za;
}, Wk:function(a, b, c, d) {
  if (!(a >= this.za.length || (a = this.za[a], d && a.Xk() || !d && a.Fk()))) {
    for (d ? (a.rg(), a.lk()) : (a.cm(), a.vl()), c++, a = 0; a < this.P[0].Ik(); a++) {
      this.P[0].yn(a, b, c, d);
    }
  }
}, vg:function(a, b, c) {
  b = this.za[0].hf();
  b.clear();
  b.K().style.position = "relative";
  b.K().style.display = "inline-block";
  b.K().style.height = this.xa() + "px";
  b.K().style.verticalAlign = "top";
  b.K().style.width = this.ka() + "px";
  b.K().style.top = a - this.qb() + "px";
  a = new Lc();
  a.K().style.position = "absolute";
  a.K().style.display = "block";
  var d = 0;
  this.vo.ts || (d = this.Rd > this.P[0].xa() ? this.Rd - this.P[0].xa() / 2 : this.Rd / 2);
  1 === this.vo.Hc(0).ie.length && 1 === this.vo.Hc(0).Lb(0).F.length ? a.K().style.backgroundColor = "#C0C0C0" : a.K().style.backgroundColor = "None";
  a.K().style.top = d + "px";
  a.K().style.height = this.P[0].xa() + "px";
  a.K().style.left = (this.ka() - this.P[0].ka()) / 2 + "px";
  c = this.P[0].Ol(0, c);
  a.append(c);
  b.append(a);
  return b;
}, aj:function(a, b, c, d, e, f, k, l, n) {
  f += k - this.qb();
  this.vo.ts || (f = k > this.P[0].xa() / 2 ? f + (this.Rd - this.P[0].xa() / 2) : f + this.Rd / 2);
  this.P[0].Fj(a, 0, b, c, d + 1, e + (this.ka() - this.P[0].ka()) / 2, f, n);
}, qb:function() {
  return this.Rd;
}, td:function() {
  return this.Eg;
}, xa:function() {
  return this.qb() + this.td();
}, ka:function() {
  var a = this.P[0].ka();
  a || (a = 8);
  return a + 2 * this.oc;
}, gb:function() {
}};
Ke = function(a, b, c) {
  this.uy = b;
  this.ff = a;
  this.Me = c;
};
Ke.prototype = {uy:null, ff:null, Me:null, Yb:function() {
  if (null != this.uy) {
    var a = this.ff.xl(this.uy.Hc(0), this.Me).Yb(), b = db.Vb("<blank_document/>");
    b.appendChild(a);
    b.appendChild(db.Vb("<status>" + this.uy.Ns.toString() + "</status>"));
    return b;
  }
  return null;
}};
Le = function(a, b, c) {
  this.vy = b;
  this.ff = a;
  this.Me = c;
};
Le.prototype = {vy:null, ff:null, Me:null, Yb:function() {
  if (null != this.vy) {
    var a = this.vy.jL(), b = this.ff.Kq(this.vy.rL(), this.Me).Yb();
    a = this.ff.Kq(a, this.Me).Yb();
    var c = db.Vb("<template type='1' subtype='0'/>");
    c.appendChild(b);
    c.appendChild(a);
    return c;
  }
  return null;
}};
Pe = function() {
  this.Np = [];
};
Pe.prototype = {El:0, Np:null};
Qe = function(a, b, c, d) {
  this.ff = a;
  this.fu = b;
  this.Me = c;
  this.Nm = !1;
  this.ny = d;
};
Qe.prototype = {ff:null, fu:null, Me:null, Xl:null, Zl:null, Nm:!1, ny:!1, Yb:function() {
  var a = null;
  this.fu.TH();
  this.ny ? (a = db.Vb("<pile align='0'><style type='0' size='0'/></pile>"), this.Xl = a.firstChild) : this.Xl = db.Vb("<p></p>");
  for (var b = this.fu.ie.length, c = 0; c < b; c++) {
    var d = this.fu.Lb(c), e = d.F.length;
    d.Nc() && e--;
    for (var f = 0; f < e; f++) {
      var k = d.Xa(f), l = this.ff.Jy(k, this.Me);
      k = this.dz(c, f);
      if (zg.Iq(l, Re)) {
        this.Nm || (this.Zl = db.Vb("<table></table>"), this.Nm = !0), l = l.Yb(), this.Tt(this.Zl, k), this.Zl.appendChild(l), f === e - 1 && (k = this.dz(c, f + 1), this.Tt(this.Zl, k));
      } else if (!this.ny && (zg.Iq(l, Le) || zg.Iq(l, Se) || zg.Iq(l, ye) || zg.Iq(l, ve) || zg.Iq(l, we) || zg.Iq(l, ze))) {
        var n = db.Vb("<equation id='0'><pile align='0'><style type='0' size='0'/></pile></equation>");
        l = l.Yb();
        n.childNodes[0].childNodes[0].appendChild(l);
        this.Nm && (this.Xl.appendChild(this.Zl), this.Zl = null);
        this.Nm = !1;
        this.Tt(this.Xl, k);
        this.Xl.appendChild(n);
      } else if (zg.Iq(l, Te)) {
        for (this.Nm && (this.Xl.appendChild(this.Zl), this.Zl = null), this.Nm = !1, l.VM(k), k = l.TM(), n = 0; n < k.length; n++) {
          this.Xl.appendChild(k[n]);
        }
      } else {
        this.Nm && (this.Xl.appendChild(this.Zl), this.Zl = null), this.Nm = !1, l = l.Yb(), this.Tt(this.Xl, k), this.Xl.appendChild(l);
      }
    }
  }
  this.Nm && (this.Xl.appendChild(this.Zl), this.Zl = null, this.Nm = !1);
  return this.ny ? a : this.Xl;
}, Tt:function(a, b) {
  u.Ve.assert(2 > b.length, "Having ch index without text element");
  for (var c = 0; c < b.length; c++) {
    for (var d = b[c].Np, e = 0; e < d.length; e++) {
      a.appendChild(d[e]);
    }
  }
}, fD:function(a, b) {
  return a.hD(this.Me, b);
}, eD:function(a, b) {
  return a.gD(this.Me, b);
}, dz:function(a, b) {
  for (var c = [], d = 0; d < this.fu.yc.length; d++) {
    var e = this.fu.hC(d), f = e.uj;
    f.Td(e.pk) && u.Ve.assert(!1, "From Docpos is Greater then To doc pos in serializing Comment Data");
    if (f.fa === a && f.ud().oa === b) {
      f = f.ud().Ab;
      var k = this.fD(e, d);
      this.bw(f, c, k);
    }
    f = e.pk;
    f.fa === a && f.ud().oa === b && (f = f.ud().Ab, k = this.eD(e, d), this.bw(f, c, k));
  }
  this.GD(c);
  return c;
}, bw:function(a, b, c) {
  for (var d = null, e = 0; e < b.length; e++) {
    b[e].El === a && (d = b[e]);
  }
  null == d && (d = new Pe(), d.El = a, b.add(d));
  d.Np.add(c);
}, GD:function(a) {
  for (var b = 0; b < a.length; b++) {
    for (var c = a[b], d = b + 1; d < a.length; d++) {
      c.El > a[d].El && (a[b] = a[d], a[d] = c, c = a[b]);
    }
  }
}};
Ye = function() {
};
Ye.prototype = {xl:function(a, b) {
  return new Qe(this, a, b, !1);
}, Kq:function(a, b) {
  return new Qe(this, a, b, !0);
}, Jy:function(a, b) {
  switch(a.Qi()) {
    case 0:
      return new Te(this, a, b);
    case 1:
      return new Re(this, a, b);
    case 2:
      return new Le(this, a, b);
    case 3:
      return new Se(this, a, b);
    case 4:
      return new Ke(this, a, b);
    case 5:
      return new ze(this, a, b);
    case 6:
      return new xe(this, a, b);
    case 10:
      return new se(this, a, b, !0);
    case 11:
      return new ue(this, a, b);
    case 12:
      return new ye(this, a, b);
    case 13:
      return new ve(this, a, b);
    case 14:
      return new we(this, a, b);
  }
  return null;
}};
Se = function(a, b, c) {
  this.RA = b;
  this.ff = a;
  this.Me = c;
};
Se.prototype = {RA:null, ff:null, Me:null, Yb:function() {
  if (null != this.RA) {
    var a = this.ff.Kq(this.RA.Hc(0), this.Me).Yb(), b = db.Vb("<template type='1' subtype='5'/>");
    b.appendChild(a);
    return b;
  }
  return null;
}};
Re = function(a, b, c) {
  this.Xv = b;
  this.ff = a;
  this.Me = c;
  this.WE = 15;
};
Re.prototype = {Xv:null, ff:null, Me:null, WE:0, Yb:function() {
  if (null != this.Xv) {
    for (var a = db.Vb("<tr/>"), b, c = this.Xv.Vc(), d = 0; d < c; d++) {
      b = db.Vb("<td width='" + this.Xv.Hw(d) * this.WE + "' height=''/>");
      var e = this.ff.xl(this.Xv.Hc(d), this.Me);
      b.appendChild(e.Yb());
      a.appendChild(b);
    }
    return a;
  }
  return null;
}};
Te = function(a, b, c) {
  this.ff = a;
  this.Yl = b;
  this.Me = c;
  this.eu = null;
};
Te.prototype = {Yl:null, ff:null, Me:null, eu:null, Yb:function() {
  if (null != this.Yl) {
    var a = this.Yl.vc(), b = this.Yl.jg;
    b = b.replaceAll(String.fromCharCode(160), " ");
    return this.CA(b, 1 === a.vj());
  }
  return null;
}, CA:function(a, b) {
  a = db.fL(a);
  a = "<![CDATA[" + a + "]]\x3e";
  null != this.Yl.vc() && (1 === this.Yl.vc().mf && (a = "<strong>" + a + "</strong>"), 1 === this.Yl.vc().nf && (a = "<u>" + a + "</u>"), b || 1 === this.Yl.vc().vj()) && (a = "<em>" + a + "</em>");
  return db.Vb("<text>" + a + "</text>");
}, TM:function() {
  var a = [];
  if (null != this.Yl) {
    var b = null != this.Yl.vc() ? 1 === this.Yl.vc().vj() : !1, c = this.Yl.jg;
    c = c.replaceAll(String.fromCharCode(160), " ");
    for (var d = 0, e = 0; e < this.eu.length; e++) {
      var f = c.substr(d, this.eu[e].El - d);
      d = this.eu[e].El;
      0 < f.length && a.add(this.CA(f, b));
      f = this.eu[e].Np;
      for (var k = 0; k < f.length; k++) {
        a.add(f[k]);
      }
    }
    c = c.substr(d);
    0 < c.length && a.add(this.CA(c, b));
    return a;
  }
  return null;
}, VM:function(a) {
  this.eu = a;
}};
Yc = function(a) {
  Dg(Yc, this);
  this.Ma = a;
  this.Ma.Wc(this);
  this.yb = [];
};
Yc.prototype = {Ma:null, ts:!1, yb:null, clone:function(a) {
  var b = [];
  b.add(this.Ma.clone(a));
  a = a.Mi("SUPER_SUB", b);
  for (var c = 0; c < b.length; c++) {
    b[c].Wc(a);
  }
  a.xD(this.ts);
  return a;
}, xD:function(a) {
  this.ts = a;
}, Qi:function() {
  return 5;
}, Tf:function(a) {
  this.yb.contains(zg.gd(a, Je)) || this.yb.add(zg.gd(a, Je));
}, Vc:function() {
  return 1;
}, Hc:function(a) {
  return a ? null : this.Ma;
}, Uq:function() {
  return this.Ma;
}, Ue:function(a) {
  this.Ma = a;
  this.Ma.Wc(this);
}, wg:function(a) {
  this.yb.contains(zg.gd(a, Je)) && this.yb.remove(zg.gd(a, Je));
}, zC:function() {
  return !0;
}};
je = function(a, b, c, d) {
  this.Ac = a;
  this.Kb = b;
  this.Ge = c;
  this.Yc = d;
};
je.prototype = {Ac:null, Kb:null, Ge:null, Yc:null, parse:function(a, b) {
  var c = this.Ac.af().My();
  a = a.getElementsByTagName("td");
  for (var d = [], e = [], f = 0; f < a.length; f++) {
    var k = a[f];
    var l = 0 < k.getElementsByTagName("p").length ? k.getElementsByTagName("p")[0] : db.Vb("<p/>");
    l = this.Ac.Qg(l, c, this.Ge, this.Yc).parse(l, b);
    e.add(l);
    for (k = u.kj.ki(k.attributes); k.Gl();) {
      l = k.current, w(l.name, "width") || d.add(parseInt(l.value) / 15);
    }
  }
  c.yD(d, e);
  return c;
}, Yb:function() {
  return null;
}};
Ze = function() {
  this.SG = [];
};
Ze.prototype = {tB:function(a) {
  return new $e(this, a);
}, Ly:function(a) {
  return new af(this, a);
}, oo:function(a) {
  return new bf(this, a);
}, rB:function(a, b) {
  switch(b) {
    case 0:
      return null;
    case 1:
      return new cf(this, a);
    case 2:
      return new zd(this, a);
    case 3:
      return new Ie(this, a);
    case 4:
      return new zc(this, a);
    case 5:
      return new Je(this, a);
    case 6:
      return new Ee(this, a, this.SG);
    case 10:
      return new yd(this, a);
    case 11:
      return new ke(this, a, this.SG);
    case 12:
      return new Ad(this, a);
    case 13:
      return new re(this, a);
    case 14:
      return new Hd(this, a);
    default:
      return null;
  }
}};
Xc = function(a) {
  Dg(Xc, this);
  this.Ma = a;
  this.Ma.Wc(this);
  this.yb = [];
};
Xc.prototype = {Ma:null, yb:null, clone:function(a) {
  var b = [];
  b.add(this.Ma.clone(a));
  a = a.Mi("SQUARE_ROOT", b);
  for (var c = 0; c < b.length; c++) {
    b[c].Wc(a);
  }
  return a;
}, Ue:function(a) {
  this.Ma = a;
  this.Ma.Wc(this);
}, Uq:function() {
  return this.Ma;
}, Hc:function(a) {
  return a ? null : this.Uq();
}, Tf:function(a) {
  this.yb.contains(zg.gd(a, Ie)) || this.yb.add(zg.gd(a, Ie));
}, wg:function(a) {
  this.yb.contains(zg.gd(a, Ie)) && this.yb.remove(zg.gd(a, Ie));
}, Qi:function() {
  return 3;
}, Vc:function() {
  return 1;
}};
df = function(a) {
  this.color = a;
  this.ro = 0;
};
df.prototype = {uj:null, pk:null, Os:0, color:null, ro:0, kN:function(a) {
  this.Os = a;
}, nD:function(a) {
  this.uj = a;
}, AD:function(a) {
  this.pk = a;
}, Dn:function(a) {
  this.ro = a;
}, Jw:function() {
  return this.ro;
}, hD:function() {
  return null;
}, gD:function() {
  return null;
}};
Jc = function() {
  this.bb = [];
};
Jc.prototype = {bb:null, Tb:function() {
  return this.bb.length - 1;
}, clone:function() {
  var a = new Jc();
  a.set(this.bb);
  return a;
}, set:function(a) {
  this.bb = [];
  for (var b = 0; b < a.length; ++b) {
    this.bb.add(a[b].clone());
  }
}, Td:function(a) {
  for (var b = this.bb.length < a.bb.length ? this.bb.length : a.bb.length, c = 0; c < b; ++c) {
    if (this.bb[c].Td(a.bb[c])) {
      return !0;
    }
    if (!this.bb[c].isEqual(a.bb[c])) {
      return !1;
    }
  }
  return this.bb.length > a.bb.length ? !0 : !1;
}, qn:function(a) {
  for (var b = this.bb.length < a.bb.length ? this.bb.length : a.bb.length, c = 0; c < b; ++c) {
    if (this.bb[c].qn(a.bb[c])) {
      return !0;
    }
    if (!this.bb[c].isEqual(a.bb[c])) {
      return !1;
    }
  }
  return this.bb.length < a.bb.length ? !0 : !1;
}, Ti:function(a) {
  for (var b = this.bb.length < a.bb.length ? this.bb.length : a.bb.length, c = 0; c < b; ++c) {
    if (this.bb[c].Td(a.bb[c])) {
      return !0;
    }
    if (!this.bb[c].qn(a.bb[c])) {
      return !1;
    }
  }
  return this.bb.length >= a.bb.length ? !0 : !1;
}, yj:function(a) {
  for (var b = this.bb.length < a.bb.length ? this.bb.length : a.bb.length, c = 0; c < b; ++c) {
    if (this.bb[c].qn(a.bb[c])) {
      return !0;
    }
    if (!this.bb[c].isEqual(a.bb[c])) {
      return !1;
    }
  }
  return this.bb.length <= a.bb.length ? !0 : !1;
}, isEqual:function(a) {
  if (this.bb.length !== a.bb.length) {
    return !1;
  }
  for (var b = 0; b < this.bb.length; ++b) {
    if (!this.bb[b].isEqual(a.bb[b])) {
      return !1;
    }
  }
  return !0;
}, Yq:function(a, b) {
  if (this.bb.length <= b || a.bb.length <= b) {
    return !1;
  }
  for (var c = 0; c < b; ++c) {
    if (!this.bb[c].isEqual(a.bb[c])) {
      return !1;
    }
  }
  return this.bb[b].Ic !== a.bb[b].Ic ? !1 : !0;
}, Mk:function(a, b) {
  if (this.bb.length <= b || a.bb.length <= b) {
    return !1;
  }
  for (var c = 0; c < b; ++c) {
    if (!this.bb[c].isEqual(a.bb[c])) {
      return !1;
    }
  }
  return this.bb[b].Ic !== a.bb[b].Ic || this.bb[b].fa !== a.bb[b].fa ? !1 : !0;
}, Ru:function(a, b) {
  if (this.bb.length <= b || a.bb.length <= b) {
    return !1;
  }
  for (var c = 0; c < b; ++c) {
    if (!this.bb[c].isEqual(a.bb[c])) {
      return !1;
    }
  }
  return this.bb[b].Ic !== a.bb[b].Ic || this.bb[b].fa !== a.bb[b].fa || this.bb[b].T.ca() !== a.bb[b].T.ca() ? !1 : !0;
}, Sg:function() {
  return this.bb.length ? this.bb[this.bb.length - 1].Ic : 0;
}, Ub:function() {
  return this.bb.length ? this.bb[this.bb.length - 1].fa : 0;
}, ca:function() {
  return this.bb.length ? this.bb[this.bb.length - 1].T.ca() : 0;
}, vb:function() {
  return this.bb.length ? this.bb[this.bb.length - 1].T.vb() : 0;
}, Qd:function() {
  return this.bb.length ? this.bb[this.bb.length - 1] : null;
}, Da:function(a) {
  return this.bb.length ? this.bb[a] : null;
}, Be:function(a) {
  if (this.bb.length <= a) {
    for (; this.bb.length <= a;) {
      this.bb.add(new Kd());
    }
  } else {
    this.bb.length > a + 1 && this.bb.removeRange(a + 1, this.bb.length - a - 1);
  }
}, Ue:function(a) {
  this.Qd().Ue(a);
}, Yd:function(a) {
  this.Qd().Yd(a);
}, sb:function(a) {
  this.Qd().sb(a);
}, sc:function(a) {
  this.Qd().sc(a);
}};
hf = function(a, b, c) {
  this.rF = a;
  this.XG = c;
  this.YG = b;
};
hf.prototype = {rF:!1, YG:0, XG:0, clone:function() {
  return new hf(this.rF, this.YG, this.XG);
}, az:function() {
  return null;
}};
jf = function() {
  this.Ab = this.oa = 0;
};
jf.prototype = {oa:0, Ab:0, clone:function() {
  var a = new jf();
  a.set(this.oa, this.Ab);
  return a;
}, set:function(a, b) {
  this.oa = a;
  this.Ab = b;
}, xz:function(a) {
  this.oa = a;
}, FH:function(a) {
  this.Ab = a;
}, ca:function() {
  return this.oa;
}, vb:function() {
  return this.Ab;
}, xp:function(a, b) {
  this.oa += b;
}, wp:function(a, b) {
  this.oa -= b;
}, tw:function(a, b) {
  this.Ab -= b;
}, Td:function(a) {
  return this.oa > a.oa ? !0 : this.oa === a.oa && this.Ab > a.Ab ? !0 : !1;
}, qn:function(a) {
  return this.oa < a.oa ? !0 : this.oa === a.oa && this.Ab < a.Ab ? !0 : !1;
}, Ti:function(a) {
  return this.oa > a.oa ? !0 : this.oa === a.oa && this.Ab >= a.Ab ? !0 : !1;
}, yj:function(a) {
  return this.oa < a.oa ? !0 : this.oa === a.oa && this.Ab <= a.Ab ? !0 : !1;
}, isEqual:function(a) {
  return -1 === this.oa ? !0 : this.oa !== a.oa || this.Ab !== a.Ab && -1 !== this.Ab ? !1 : !0;
}};
Sc = function(a, b) {
  Dg(Sc, this, [null, b]);
  this.Ag = [];
  this.IF = a;
};
Sc.prototype = {Ag:null, IF:null, hG:function() {
  return this.IF;
}, sH:function(a) {
  this.Ag.contains(a) || this.Ag.add(a);
}, yN:function(a) {
  this.Ag.contains(a) && this.Ag.remove(a);
}, Ph:function() {
  return this;
}, vG:function() {
  var a = [], b = new Jc();
  b.Be(0);
  this.kF(b, a);
  this.hF(b, a);
  return a;
}, mK:function(a, b) {
  for (var c = 0; c < this.Ag.length; ++c) {
    this.Ag[c].hr(a, b);
  }
}, lK:function(a, b) {
  for (var c = 0; c < this.Ag.length; ++c) {
    this.Ag[c].gr(a, b);
  }
}, kK:function(a) {
  for (var b = 0; b < this.Ag.length; ++b) {
    this.Ag[b].fr(a);
  }
}, jK:function(a) {
  for (var b = 0; b < this.Ag.length; ++b) {
    this.Ag[b].er(a);
  }
}, iK:function(a, b) {
  for (var c = 0; c < this.Ag.length; ++c) {
    this.Ag[c].xp(a, b);
  }
}, hK:function(a, b) {
  for (var c = 0; c < this.Ag.length; ++c) {
    this.Ag[c].wp(a, b);
  }
}, fK:function(a) {
  for (var b = 0; b < this.Ag.length; ++b) {
    this.Ag[b].Oq(a);
  }
}, gK:function(a) {
  for (var b = 0; b < this.Ag.length; ++b) {
    this.Ag[b].Pq(a);
  }
}, eK:function(a, b) {
  for (var c = 0; c < this.Ag.length; ++c) {
    this.Ag[c].sw(a, b);
  }
}};
kf = function() {
};
lf = function() {
  this.qj = this.ph = this.yf = -1;
  this.Fe = null;
  this.ei = "none";
  this.Kg = -2;
  this.sq = this.Vj = this.Di = this.ng = this.pj = -1;
};
lf.prototype = {yf:0, ph:0, qj:0, Fe:null, ei:null, Kg:0, pj:0, ng:0, Di:0, Vj:0, sq:0, ek:function() {
  return -1 !== this.yf && !!this.yf;
}, Ch:function(a) {
  -1 !== a && (this.yf = a);
}, Co:function(a) {
  -1 !== a && (this.ph = a);
}, CH:function(a) {
  -1 !== a && (this.qj = a);
}, wz:function(a) {
  null != a && (this.Fe = a);
}, dG:function() {
  return "none" === this.ei ? "" : this.ei;
}, Vg:function(a) {
  "none" !== a && (this.ei = a);
}, ht:function(a) {
  -2 !== a && (this.Kg = a);
}, KH:function(a) {
  -1 !== a && (this.pj = a);
}, Bo:function(a) {
  -1 !== a && (this.ng = a);
}, zp:function() {
  return -1 === this.Di ? 0 : this.Di;
}, oD:function(a) {
  -1 !== a && (this.Di = a);
}, HH:function(a) {
  -1 !== a && (this.Vj = a);
}, dN:function(a) {
  -1 !== a && (this.sq = a);
}, az:function(a) {
  var b = new lf();
  a.yf === this.yf ? b.yf = this.yf : b.yf = -1;
  a.ph === this.ph ? b.ph = this.ph : b.ph = -1;
  a.qj === this.qj ? b.qj = this.qj : b.qj = -1;
  a.Fe === this.Fe && (b.Fe = this.Fe);
  a.ei === this.ei ? b.ei = this.ei : b.ei = "none";
  a.pj === this.pj ? b.pj = this.pj : b.pj = -1;
  a.Kg === this.Kg ? b.Kg = this.Kg : b.Kg = -2;
  a.ng === this.ng ? b.ng = this.ng : b.ng = -1;
  a.Di === this.Di ? b.Di = this.Di : b.Di = -1;
  a.Vj === this.Vj ? b.Vj = this.Vj : b.Vj = -1;
  a.sq === this.sq ? b.sq = this.sq : b.sq = -1;
  return b;
}, clone:function() {
  var a = new lf();
  a.yf = this.yf;
  a.ph = this.ph;
  a.qj = this.qj;
  a.Fe = this.Fe;
  a.ei = this.ei;
  a.Kg = this.Kg;
  a.pj = this.pj;
  a.ng = this.ng;
  a.Di = this.Di;
  a.Vj = this.Vj;
  return a;
}, Ts:function(a) {
  this.Ch(a.yf);
  this.Co(a.ph);
  this.CH(a.qj);
  this.wz(a.Fe);
  this.Vg(a.ei);
  this.ht(a.Kg);
  this.KH(a.pj);
  this.Bo(a.ng);
  this.oD(a.Di);
  this.HH(a.Vj);
}, isEqual:function(a) {
  var b = !0;
  this.yf !== a.yf && (b = !1);
  this.ng !== a.ng && (b = !1);
  this.ph !== a.ph && (b = !1);
  return b;
}, fG:function() {
  return this.Fe.qb() + this.Fe.td();
}, Tq:function() {
  var a = 0, b = this.$y();
  b.length && (a = this.Fe.Js(b));
  a += 5;
  a < lf.HF && (a = lf.HF);
  return a;
}, $y:function() {
  var a = "";
  if (-1 !== this.Kg) {
    switch(this.yf) {
      case 4:
        a = this.ei;
        break;
      case 2:
        a = (this.Kg + 1).toString() + ".";
        break;
      case 1:
        a = this.ph ? this.eG(this.Kg) + "." : this.eG(this.Kg).toLowerCase() + ".";
        break;
      case 3:
        a = this.ph ? this.$H(this.Kg + 1) + "." : this.$H(this.Kg + 1).toLowerCase() + ".";
    }
  }
  return a;
}, eG:function(a) {
  var b = "";
  if (!a) {
    return b = String.fromCharCode(65 + a);
  }
  for (;;) {
    b = b.Lk(0, String.fromCharCode(65 + a % 26));
    a = Math.floor(a / 26);
    if (!a) {
      break;
    }
    --a;
  }
  return b;
}, $H:function(a) {
  for (var b = [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1], c = "M CM D CD C XC L XL X IX V IV I".split(" "), d = "", e = 0; e < b.length && a; e++) {
    for (; a >= b[e];) {
      a -= b[e], d += c[e];
    }
  }
  return d;
}, QB:function(a) {
  var b = new lf();
  this.yf !== a.yf && (b.yf = a.yf);
  this.ph !== a.ph && (b.ph = a.ph);
  this.qj !== a.qj && (b.qj = a.qj);
  this.Fe !== a.Fe && (b.Fe = a.Fe);
  this.ei !== a.ei && (b.ei = a.ei);
  this.Kg !== a.Kg && (b.Kg = a.Kg);
  this.pj !== a.pj && (b.pj = a.pj);
  this.ng !== a.ng && (b.ng = a.ng);
  this.Di !== a.Di && (b.Di = a.Di);
  this.Vj !== a.Vj && (b.Vj = a.Vj);
  return b;
}, gx:function() {
  this.yf = 0;
  this.qj = this.ph = -1;
  this.Fe = null;
  this.ei = "none";
  this.Kg = -2;
  this.sq = this.Vj = this.Di = this.ng = this.pj = -1;
}};
bf = function(a, b) {
  this.wa = a;
  this.parent = b;
  this.Fc = [];
  this.Oa = [];
  this.Oa.add(new nf());
  this.uh = !0;
  this.Wh = this.ni = 0;
};
bf.prototype = {parent:null, wa:null, Fc:null, Ma:null, Oa:null, uh:!1, ni:0, Wh:0, gb:function() {
  for (var a = 0; a < this.Oa.length; ++a) {
    this.Oa[a].gb();
  }
}, Rw:function(a, b) {
  var c = a.from.clone();
  a.from.Sg() !== a.xc.Sg() && c.Be(c.Tb() - 1);
  var d = c.Ub(), e = a.xc.Da(c.Tb()).fa;
  c.sb(0);
  for (c.sc(0); d <= e; ++d) {
    c.Yd(d), u.cf(this.Fc[d]) || this.Fc[d].Rw(c, a, b);
  }
}, hm:function(a) {
  return this.Fc[a];
}, Kp:function() {
  for (var a = 0; a < this.Oa.length; a++) {
    this.Oa[a].cc();
  }
  for (a = 0; a < this.Fc.length; a++) {
    this.Fc[a].Kp();
  }
  this.ks();
}, Ik:function() {
  return this.Oa.length;
}, dC:function(a) {
  return zg.gd(this.Oa[a], nf);
}, Bp:function() {
  return this.parent;
}, Jn:function() {
  if (null != this.Ma) {
    this.Ma.wg(this);
    for (var a = this.Fc.length, b = 0; b < a; ++b) {
      this.Fc[b].rv();
    }
    this.Fc.removeRange(0, this.Fc.length);
  }
}, YB:function() {
  return this.Ma;
}, um:function(a) {
  if (a !== this.Ma) {
    this.Jn();
    if (null != a) {
      a.Tf(this);
      for (var b = a.ie.length, c = 0; c < b; ++c) {
        var d = a.Lb(c), e = this.wa.Ly(this);
        e.rD(d);
        this.Fc.add(e);
      }
    }
    this.Ma = a;
    this.ks();
  }
}, ks:function() {
  this.uh = !0;
}, nJ:function() {
  this.uh = !1;
}, oG:function(a, b) {
  return this.Fc[0].nG(a, b);
}, SJ:function() {
  for (var a = this.ni = 0; a < this.Oa.length; ++a) {
    this.ni += this.Oa[a].xa();
  }
}, TJ:function() {
  for (var a = this.Wh = 0; a < this.Fc.length; ++a) {
    var b = this.Fc[a].ka();
    b > this.Wh && (this.Wh = b);
    if (this.Wh >= this.Oa[0].ka()) {
      break;
    }
  }
}, xa:function() {
  return this.ni;
}, ka:function() {
  return this.Wh;
}, JG:function(a) {
  0 <= a && a < this.Oa.length && (this.Oa[a].cc(), this.Fc[this.Oa[a].fa].Ps(this.Oa[a].mi()));
}, Lw:function(a, b) {
  var c = 0, d = this.Oa.length - 1;
  if (c > d) {
    return 0;
  }
  for (; c !== d;) {
    var e = parseInt((c + d) / 2), f = this.Oa[e].fa, k = this.Oa[e].mi();
    if (a < f || a === f && b < k) {
      if (e === d) {
        break;
      }
      d = e;
    } else {
      if (e === c) {
        if (a > this.Oa[e + 1].fa || a === this.Oa[e + 1].fa && b >= this.Oa[e + 1].mi()) {
          c = e += 1;
        }
        break;
      }
      c = e;
    }
  }
  return c;
}, Ju:function(a) {
  return this.Lw(a.fa, 0);
}, hr:function(a, b, c) {
  var d = this.Ju(a.Da(b));
  this.Oa[d].cc();
  var e = 1;
  d && (e++, this.Oa[d - 1].cc());
  null != this.parent && this.parent.tp(a, b - 1, d, e);
  a = a.Ub();
  b = c.length;
  for (d += 1; d < this.Oa.length; ++d) {
    this.Oa[d].set(this.Oa[d].fa + b, this.Oa[d].mi(), this.Oa[d].ka());
  }
  for (d = 0; d < b; ++d) {
    e = c[d];
    var f = this.wa.Ly(this);
    f.rD(e);
    this.Fc.Lk(a + d, f);
  }
  this.ks();
}, gr:function(a, b, c) {
  var d = a.Da(b).clone(), e = d.fa, f = e + c, k = this.Ju(d), l = this.Oa.length - 1;
  d.fa += c;
  d.fa < this.Fc.length && (l = this.Ju(d));
  k && k--;
  for (d = k; d < this.Oa.length; ++d) {
    d <= l && this.Oa[d].cc();
    var n = this.Oa[d].fa;
    n >= e && (n < f ? this.Oa[d].set(e, 0, this.Oa[d].ka()) : this.Oa[d].set(n - c, this.Oa[d].mi(), this.Oa[d].ka()));
  }
  null != this.parent && this.parent.tp(a, b - 1, k, l - k + 1);
  for (d = e; d < f; ++d) {
    this.Fc[d].rv(), this.Fc[d].gb();
  }
  this.Fc.removeRange(e, c);
  this.ks();
}, fr:function(a, b) {
  var c = this.Ju(a.Da(b));
  c < this.Oa.length && this.Oa[c].cc();
  var d = 1;
  c && (d++, c--, this.Oa[c].cc());
  null != this.parent && this.parent.tp(a, b - 1, c, d);
  b = a.Ub();
  d = this.wa.Ly(this);
  this.Fc.Lk(b + 1, d);
  this.Fc[b].split(a, d, this.Ma.Lb(b + 1));
  b++;
  for (a = c; a < this.Oa.length; ++a) {
    c = this.Oa[a].fa, c >= b && this.Oa[a].set(c + 1, this.Oa[a].mi(), this.Oa[a].ka());
  }
  this.ks();
}, er:function(a, b) {
  var c = a.Qd().clone(), d = this.Ju(a.Da(b)), e = a.Ub() + 1, f = e + 1, k = this.Oa.length - 1;
  c.fa = f;
  c.sb(0);
  c.sc(0);
  c.fa < this.Fc.length && (k = this.Ju(c));
  for (c = d; c < this.Oa.length; ++c) {
    var l = this.Oa[c].fa;
    l >= e && (l < f ? (this.Oa[c].set(e, 0, this.Oa[c].ka()), this.Oa[c].cc()) : this.Oa[c].set(l - 1, this.Oa[c].mi(), this.Oa[c].ka()));
  }
  null != this.parent && this.parent.tp(a, b - 1, d, k - d + 1);
  this.Fc[a.Ub()].Wu(a, this.Fc[e]);
  for (c = e; c < e + 1 && c < this.Fc.length; ++c) {
    this.Fc[c].rv(), this.Fc[c].gb();
  }
  this.Fc.removeRange(e, 1);
  this.ks();
}, Uk:function(a, b, c, d) {
  var e = a.Da(b), f = this.Lw(e.fa, c);
  c = this.Lw(e.fa, c + d);
  if (f < this.Oa.length) {
    for (d = f; d <= c; ++d) {
      this.Oa[d].cc();
    }
  }
  null != this.parent && this.parent.tp(a, b - 1, f, c - f + 1);
  this.ks();
}, nL:function(a) {
  a === this.Oa.length && this.Oa.add(new nf());
  return this.Oa[a];
}, Ie:function(a, b, c, d) {
  var e = null != d ? d.clone() : new Ge();
  if (!this.uh) {
    return this.Oa;
  }
  d = 0;
  for (d === this.Oa.length && this.Oa.add(new nf()); d < this.Oa.length && this.Oa[d].zh(); ++d) {
  }
  if (d === this.Oa.length) {
    return this.nJ(), this.Oa;
  }
  var f = this.Oa[d], k = f.fa, l = f.mi();
  f.set(k, l, b);
  var n = this.Fc.length, p = 0, t = this.Oa.length;
  this.Oa[this.Oa.length - 1].xa();
  do {
    k >= this.Fc.length - 1 || !this.Ma.Lb(k + 1).Nc() ? e.cN() : e.MM();
    for (var x = this.Fc[k].Ie(a - p, b, c, e), D = x.length, G = x[D - 1].Nk(); l < D; l++) {
      x[l].Nk() && x[l].ws();
      if (p + x[l].xa() > a && -1 !== c) {
        if (p) {
          !l && k && this.Ma.Lb(k).Nc() && this.Ma.Lb(k - 1).Nc() && (p += this.Fc[k - 1].Yy());
          f.pi();
          f.Wg(p);
          p = 0;
          a = c;
          d++;
          f = this.nL(d);
          if (G || f.fa !== k || l !== f.mi()) {
            f.cc(), f.En();
          }
          f.set(k, l, b);
        } else {
          a = c;
        }
      }
      p += x[l].xa();
    }
    k++;
    l = 0;
    if (f.zh()) {
      break;
    }
    k < n && -1 !== c && this.Fc[k].Ps(0);
  } while (k < n);
  if (k !== n) {
    return this.Oa;
  }
  f.pi();
  f.Wg(p);
  d++;
  this.SJ();
  this.TJ();
  if (d < t) {
    for (a = d; a < t; ++a) {
      this.Oa[a].gb();
    }
    this.Oa.removeRange(d, t - d);
  }
  return this.Oa;
}, Ol:function(a, b) {
  if (a >= this.Oa.length) {
    return null;
  }
  var c = this.Oa[a];
  if (c.Bl()) {
    return c.hf();
  }
  var d = c.hf(), e = d.K(), f = "width : " + this.ka() + "px; height : " + c.xa() + "px;";
  e.setAttribute("style", f);
  e = c.fa;
  c = c.mi();
  f = a + 1 < this.Oa.length ? this.Oa[a + 1].fa : this.Fc.length - 1;
  a = a + 1 < this.Oa.length ? this.Oa[a + 1].mi() : this.Fc[this.Fc.length - 1].gn();
  var k = this.Fc[f];
  a || (f--, k = this.Fc[f], a = k.gn());
  var l = this.Ma.Lb(f).Nc();
  var n = k.ZC(a - 1, l, b);
  d.append(n);
  a--;
  for (var p = f; p >= e; p--) {
    k = this.Fc[p];
    p !== f && (a = k.gn() - 1);
    for (var t = p === e ? c : 0; a >= t; a--) {
      var x = k.ZC(a, !l && this.Ma.Lb(p).Nc(), b);
      d.K().insertBefore(x.K(), n.K());
      n = x;
    }
    l = this.Ma.Lb(p).Nc();
  }
  return d;
}, yn:function(a, b, c, d) {
  if (!(a >= this.Oa.length)) {
    var e = this.Oa[a];
    if (!d || !e.Xk()) {
      if (d || !e.Fk()) {
        d ? e.lk() : e.vl();
        var f = null == b ? 0 : b.length, k = e.fa;
        e = e.mi();
        var l = this.Fc.length - 1;
        a < this.Oa.length - 1 && (l = this.Oa[a + 1].fa, this.Oa[a + 1].fz || l--);
        for (var n = []; k <= l; k++) {
          a = this.Fc[k];
          n.clear();
          for (var p = 0; p < f; p++) {
            var t = b[p].from.clone(), x = b[p].xc.clone(), D = b[p].bgColor.clone(), G = t.Da(c).fa, I = x.Da(c).fa, Q = new of();
            t.Tb() === c ? G < k && I > k ? (t.Yd(k), t.sb(0), t.sc(0), x.Yd(k), x.sb(a.$B()), x.sc(0), Q.set(t, x, D), n.add(Q)) : G === k && I === k ? (Q.set(t, x, D), n.add(Q)) : G === k && I > k ? (x.Yd(k), x.sb(a.$B()), x.sc(0), Q.set(t, x, D), n.add(Q)) : G < k && I === k && (t.Yd(k), t.sb(0), t.sc(0), Q.set(t, x, D), n.add(Q)) : G === k && (Q.set(t, x, D), n.add(Q));
          }
          a.uH(e, n, c, d);
          e = 0;
        }
      }
    }
  }
}, sL:function(a, b, c, d, e, f, k) {
  var l = [];
  if (a >= this.Oa.length || e > k.fg() + k.Kk() || f > k.Tg() + k.km() || e + this.ka() < k.fg() || f + this.xa() < k.Tg()) {
    return l;
  }
  var n = this.Oa[a], p = n.fa, t = n.mi();
  n = a + 1 < this.Oa.length ? this.Oa[a + 1].fa : this.Fc.length - 1;
  a = a + 1 < this.Oa.length ? this.Oa[a + 1].mi() : this.Fc[this.Fc.length - 1].gn();
  var x = this.Fc[n];
  a || (n--, a = x.gn());
  for (var D = 0; p <= n; p++) {
    x = this.Fc[p];
    var G = x.gn(), I = this.Ma.Lb(p).Nc() && (p === n || !this.Ma.Lb(p + 1).Nc());
    for (p === n && (G = a); t < G; ++t) {
      l.addRange(x.cz(t, I, b, c, d, e, f + D, k)), D += x.fC(t);
    }
    t = 0;
  }
  return l;
}, Fj:function(a, b, c, d, e, f, k, l) {
  if (!(b >= this.Oa.length || f > l.fg() + l.Kk() || k > l.Tg() + l.km() || f + this.ka() < l.fg() || k + this.xa() < l.Tg())) {
    var n = this.Oa[b], p = n.fa, t = n.mi();
    n = b + 1 < this.Oa.length ? this.Oa[b + 1].fa : this.Fc.length - 1;
    b = b + 1 < this.Oa.length ? this.Oa[b + 1].mi() : this.Fc[this.Fc.length - 1].gn();
    var x = this.Fc[n];
    b || (n--, b = x.gn());
    for (var D = 0; p <= n; p++) {
      x = this.Fc[p];
      var G = x.gn(), I = this.Ma.Lb(p).Nc() && (p === n || !this.Ma.Lb(p + 1).Nc());
      for (p === n && (G = b); t < G; ++t) {
        x.Fj(a, t, I, c, d, e, f, k + D, l, null, null), D += x.fC(t);
      }
      t = 0;
    }
  }
}, no:function(a, b, c, d, e) {
  var f = this.Lw(a.Da(b).fa, c);
  c = this.Lw(a.Da(b).fa, c + d);
  if (f < this.Oa.length) {
    for (d = f; d <= c; d++) {
      e ? this.Oa[d].Ao() : this.Oa[d].mo();
    }
  }
  null != this.parent && this.parent.no(a, b - 1, 0, c - f + 1, e);
}};
Oc = function() {
  this.rb = new Jc();
  this.rb.Be(0);
  this.jB = this.dB = this.kB = !1;
  this.mm = -1;
  this.Ua = this.$a = this.nC = 0;
  this.NC = null;
  this.$A = !1;
};
Oc.prototype = {dB:!1, jB:!1, nC:0, kB:!1, mm:0, $a:0, Ua:0, DG:0, Rd:0, $A:!1, rb:null, NC:null, clone:function() {
  var a = new Oc();
  a.rb = this.rb.clone();
  a.kB = this.kB;
  a.dB = this.dB;
  a.jB = this.jB;
  a.mm = this.mm;
  a.nC = this.nC;
  a.$a = this.$a;
  a.Ua = this.Ua;
  a.DG = this.DG;
  a.Rd = this.Rd;
  a.NC = this.NC;
  a.$A = this.$A;
  return a;
}};
pe = function() {
  this.rb = new jf();
  this.vh = this.th = this.Ii = this.Ck = !1;
  this.Wm = [];
  this.gw = [];
};
pe.prototype = {rb:null, Wh:0, ni:0, vg:null, Wm:null, gw:null, Ck:!1, Ii:!1, th:!1, vh:!1, ce:!1, hf:function() {
  null == this.vg && (this.vg = new Lc());
  return this.vg;
}, cc:function() {
  this.vh = this.th = this.Ii = this.Ck = !1;
}, pi:function() {
  this.Ck = !0;
}, zh:function() {
  return this.Ck;
}, Wy:function() {
  this.vh = this.th = this.Ii = !1;
}, Rq:function() {
  this.Ii = !0;
}, Bl:function() {
  return this.Ii;
}, mo:function() {
  this.th = !1;
}, vl:function() {
  this.th = !0;
}, Fk:function() {
  return this.th;
}, Ao:function() {
  this.vh = !1;
}, lk:function() {
  this.vh = !0;
}, Xk:function() {
  return this.vh;
}, En:function() {
  this.ce = !0;
}, Nk:function() {
  return this.ce;
}, ws:function() {
  this.ce = !1;
}, ca:function() {
  return this.rb.ca();
}, vb:function() {
  return this.rb.vb();
}, Pl:function(a, b) {
  this.rb.set(a, b);
}, xa:function() {
  return this.ni;
}, dj:function(a) {
  this.Wh = a;
}, ka:function() {
  return this.Wh;
}, Wg:function(a) {
  this.ni = a;
}, gb:function() {
  if (null != this.vg) {
    for (var a = this.vg.K(), b = a.parentNode, c = 0; c < this.Wm.length; c++) {
      null != this.Wm[c].K() && null != this.Wm[c].K().parentNode && this.Wm[c].K().parentNode.removeChild(this.Wm[c].K());
    }
    null != b && b.removeChild(a);
  }
}, dw:function(a) {
  this.Wm.add(a);
}, getSelection:function() {
  return this.Wm;
}, WA:function(a) {
  this.gw.add(a);
}, rg:function() {
  for (var a = this.Wm.length, b = 0; b < a; b++) {
    this.vg.remove(this.Wm[b]);
  }
  this.Wm.clear();
}, cm:function() {
  for (var a = this.gw.length, b = 0; b < a; b++) {
    this.vg.remove(this.gw[b]);
  }
  this.gw.clear();
}};
He = function() {
  this.jc = [];
};
He.prototype = {jc:null, getSelection:function() {
  return this.jc;
}, rg:function() {
  this.jc.clear();
}};
Lc = function() {
  this.Vd = document.createElement("div");
  this.Vd.style["-webkit-box-sizing"] = "content-box";
  this.Vd.style["-moz-box-sizing"] = "content-box";
  this.Vd.style["box-sizing"] = "content-box";
};
Lc.prototype = {Vd:null, Vp:function(a) {
  this.gb();
  a.style["-webkit-box-sizing"] = "content-box";
  a.style["-moz-box-sizing"] = "content-box";
  a.style["box-sizing"] = "content-box";
  this.Vd = a;
}, K:function() {
  return this.Vd;
}, append:function(a) {
  this.Vd.appendChild(a.K());
}, clear:function() {
  for (; null != this.Vd.childNodes && this.Vd.childNodes.length;) {
    this.Vd.removeChild(this.Vd.childNodes[0]);
  }
}, remove:function(a) {
  a.FM();
}, gb:function() {
  null != this.Vd.parentNode && this.Vd.parentNode.removeChild(this.Vd);
}, qr:function(a) {
  this.Vd.setAttribute("style", a);
}, FM:function() {
  null != this.Vd.parentNode && this.Vd.parentNode.removeChild(this.Vd);
}};
Ge = function() {
  this.Ut = null;
  this.Vt = !1;
  this.LA = this.KA = 0;
};
Ge.prototype = {Ut:null, Vt:!1, KA:0, LA:0, sD:function(a) {
  this.KA = a;
}, tD:function(a) {
  this.LA = a;
}, cN:function() {
  this.Vt = !0;
}, MM:function() {
  this.Vt = !1;
}, OH:function(a) {
  this.Ut = a;
}, clone:function() {
  var a = new Ge();
  a.Ut = mb.yF(this.Ut);
  a.Vt = this.Vt;
  return a;
}};
$e = function(a, b) {
  Dg($e, this, [a, null]);
  this.Wq = parseInt(b);
};
$e.prototype = {Wq:0, Ph:function() {
  return this.Ma.Ph();
}, lz:function() {
  this.Ie(-1, this.Wq, -1, new Ge());
}, vg:function(a) {
  for (var b = 0; b < this.Oa.length; b++) {
    this.Ol(b, a);
  }
}, cz:function(a, b, c, d) {
  a = [];
  a.addRange(this.sL(0, [], [], 0, b, c, d));
  return a;
}, aj:function(a, b, c, d, e) {
  for (var f = [], k = 0; k < b.length; k++) {
    for (var l = 0; l < b[k].ua.length; l++) {
      f.add(b[k].ua[l]);
    }
  }
  b = this.Ph().vG();
  k = this.Oa.length;
  var n = 0;
  for (l = 0; l < k; l++) {
    this.Fj(a, l, f, b, 0, c, d + n, e), n += this.Oa[l].xa();
  }
}, dj:function(a) {
  this.Wq !== a && (this.Wq = a, this.Kp());
}, fx:function(a) {
  for (var b = [], c = 0; c < a.length; c++) {
    for (var d = 0; d < a[c].ua.length; d++) {
      b.add(a[c].ua[d]);
    }
  }
  a = this.Oa.length;
  for (d = 0; d < a; d++) {
    this.yn(d, b, 0, !0);
  }
}, K:function() {
  var a = this.dC(0);
  return null == a ? null : a.hf().K();
}, xG:function() {
  return this.ka();
}};
pf = function() {
  this.so = this.Eg = this.Rd = this.Ou = this.Nu = this.Xh = this.Ow = this.Nw = 0;
};
pf.prototype = {Xh:0, Nu:0, Ou:0, Rd:0, Eg:0, so:0, Nw:0, Ow:0};
af = function(a, b) {
  this.Ac = a;
  this.Tc = b;
  this.na = [];
  this.da = [];
  this.md = [];
  this.da.add(new qf());
  this.na.add(new rf());
};
af.prototype = {NG:7, Ac:null, Tc:null, uh:!1, Kb:null, na:null, da:null, md:null, Uv:null, jt:function(a) {
  this.uh = a;
}, validate:function() {
  this.uh = !1;
}, rv:function() {
  if (null != this.Kb) {
    this.Kb.wg(this);
    for (var a = this.md.length, b = 0; b < a; ++b) {
      null != this.md[b] && this.md[b].kh();
    }
  }
}, rD:function(a) {
  if (a !== this.Kb) {
    this.rv();
    if (null != a) {
      a.Tf(this);
      for (var b = a.F.length, c = 0; c < b; ++c) {
        var d = a.Xa(c), e = this.Ac.rB(this, d.Qi());
        null != e && e.vm(d);
        this.md.add(e);
      }
    }
    this.Kb = a;
    this.uh = !0;
  }
}, Bp:function() {
  return this.Tc;
}, gb:function() {
  for (var a = 0; a < this.na.length; ++a) {
    this.na[a].gb();
  }
}, $B:function() {
  return this.md.length;
}, Iw:function(a) {
  return this.md[a];
}, Wu:function(a, b) {
  if (this.da.length) {
    var c = this.yh(a.Qd());
    this.da[c].cc();
    c && this.da[c - 1].cc();
    c = this.xj(c);
    this.Ps(c);
    var d = 1;
    c && (d++, this.Ps(c - 1));
    null != this.Tc && this.Tc.Uk(a, a.Tb(), c, d);
  }
  a = b.md.length;
  for (c = 0; c < a; ++c) {
    this.md.add(b.md[c]), null != b.md[c] && b.md[c].Wc(this);
  }
  b.md.removeRange(0, b.md.length);
  b.rv();
  this.uh = !0;
}, split:function(a, b, c) {
  if (this.da.length) {
    var d = this.yh(a.Qd());
    this.da[d].cc();
    d && this.da[d - 1].cc();
    d = this.xj(d);
    this.Ps(d);
    var e = 1;
    d && (e++, this.Ps(d - 1));
    null != this.Tc && this.Tc.Uk(a, a.Tb(), d, e);
  }
  if (!a.ca()) {
    for (d = 0; d < this.na.length; ++d) {
      this.na[d].gb();
    }
    this.da = [];
    this.da.add(new qf());
    this.na.clear();
    this.na.add(new rf());
  }
  a = a.ca();
  b.Kb = c;
  c.Tf(b);
  for (d = a; d < this.md.length; ++d) {
    b.md.add(this.md[d]), null != this.md[d] && this.md[d].Wc(b);
  }
  this.md.removeRange(a, this.md.length - a);
}, QE:function(a, b) {
  a.so += b.ka();
  a.Rd < b.qb() && (a.Rd = b.qb());
  a.Eg < b.td() && (a.Eg = b.td());
}, ds:function(a) {
  a.Rd < a.Nu && (a.Rd = a.Nu);
  a.Eg < a.Ou && (a.Eg = a.Ou);
  a.Ou = a.Nu = 0;
  a.so += a.Xh;
  a.Xh = 0;
}, ceil:function(a) {
  if (eb.Dp() === qa.FG || eb.Dp() === qa.GG || eb.Dp() === qa.EG) {
    if (5 > eb.AG()) {
      return Math.ceil(a);
    }
  } else if (eb.Vq() === pa.SB) {
    return Math.ceil(a);
  }
  return a;
}, GN:function(a, b, c) {
  for (var d = a.ca(), e = a.vb(), f = d, k = e, l = this.Kb.F.length - 1, n = b.NA, p = !1, t = new Ge(), x = new pf(), D = !1; d <= l; d++) {
    var G = this.Kb.Xa(d), I = this.md[d];
    if (G.jf()) {
      I = G;
      x.Nw = I.qb();
      x.Ow = I.td();
      d === l && l && (x.Nw = 0, x.Ow = 0);
      x.Nw > x.Nu && (x.Nu = x.Nw);
      x.Ow > x.Ou && (x.Ou = x.Ow);
      G = I.Bf();
      for (var Q = I.vc(), X = 0, Fa = e; e < G || !e && d === l; ++e) {
        var La = 0;
        d !== l && (La = Q.Js(I.jg.substr(Fa, e - Fa + 1)));
        var Aa = !D && (I.AC(e) || I.wC(e)) || d === l;
        D = d === l || I.AC(e) || I.wC(e);
        if (x.Xh + La - X + x.so > n) {
          x.so || n !== c ? Aa ? (x.Xh += La - X, this.ds(x), e += 1, e >= G && (e = 0, d += 1)) : (d = f, e = k) : x.Xh ? Aa ? (x.Xh += La - X, this.ds(x), e += 1, e >= G && (e = 0, d += 1)) : this.ds(x) : (x.Xh = this.ceil(La), this.ds(x), e += 1, e >= G && (e = 0, d += 1));
          p = !0;
          break;
        } else {
          d === l || I.AC(e) || I.wC(e) ? (x.Xh += La - X, this.ds(x), La = 0, f = d, Fa = k = e + 1, k > G && (k = 0, f += 1)) : x.Xh += La - X;
        }
        X = La;
      }
    } else {
      G.zC() && (d ? (G = this.Kb.Xa(d - 1), Q = this.md[d - 1], G.jf() ? (t.sD(G.qb()), t.tD(G.td())) : (t.sD(Q.qb()), t.tD(Q.td()))) : (t.sD(15), t.tD(5))), I.Ie(-1, c, -1, t), x.Xh + x.so + I.ka() > n ? (x.Xh = Math.ceil(x.Xh), this.ds(x), x.so || n !== c || (d += 1, e = 0, this.QE(x, I)), p = !0) : (x.Xh = Math.ceil(x.Xh), this.ds(x), this.QE(x, I), f = d + 1, k = 0);
    }
    if (p) {
      break;
    }
    e = 0;
  }
  if (d === l + 1 || d === l) {
    d = l, e = 0;
  }
  b.NH(a.ca(), a.vb());
  b.gt(x.Rd);
  b.it(x.Eg);
  b.dj(Math.ceil(x.so));
  a = new jf();
  a.set(d, e);
  return a;
}, Kp:function() {
  for (var a = 0; a < this.na.length; a++) {
    this.na[a].cc();
  }
  for (a = 0; a < this.da.length; a++) {
    this.da[a].cc();
  }
  for (a = 0; a < this.md.length; a++) {
    null != this.md[a] && this.md[a].Kp();
  }
  this.jt(!0);
}, sC:function(a, b) {
  for (var c = a.ca(), d = this.yh(a.Da(b)), e = this.xj(d), f = e, k = this.Kb.F.length; c < k && d < this.da.length && f < this.na.length && this.Kb.Xa(c).zC();) {
    this.md[c].iz(0), this.da[d].cc(), this.na[f].cc(), this.da[d].ca() <= c && d < this.da.length - 1 && (d++, this.da[d].cc(), this.na[f].wj() <= d && f < this.na.length - 1 && (f++, this.na[f].cc())), c++;
  }
  e !== f && this.Tc.Uk(a, b, 0, f - e + 1);
}, Nz:function(a, b, c) {
  var d = b.xf.length, e = a.clone();
  d || b.Iy(c);
  for (var f = 0; f < d; f++) {
    e = this.GN(e, b.hn(f), c);
  }
  b.Pl(a.ca(), a.vb());
  b.dj(c);
  return e;
}, yh:function(a) {
  if (!this.da.length) {
    return 0;
  }
  var b = a.T.ca();
  a = a.T.vb();
  var c = 0, d = this.da.length - 1;
  if (d < c) {
    return 0;
  }
  for (; c !== d;) {
    var e = parseInt((c + d) / 2), f = this.da[e].rb;
    b < f.ca() || b === f.ca() && a <= f.vb() ? d = e : e === c ? (f = this.da[d].rb, f.isEqual(this.da[c].rb) || b < f.ca() || b === f.ca() && a < f.vb() ? d = c : c = d) : c = e;
  }
  return c;
}, Kw:function(a) {
  return this.Kb.Nc() ? this.da[a].xa() : this.da[a].qb();
}, Iu:function(a) {
  return this.da[a].xa();
}, xj:function(a) {
  if (!this.na.length) {
    return 0;
  }
  var b = 0, c = this.gn() - 1;
  if (b > c) {
    return 0;
  }
  for (; b !== c;) {
    var d = parseInt((b + c) / 2);
    if (a === this.na[d].wj()) {
      return d;
    }
    if (a < d) {
      if (d === c) {
        break;
      }
      c = d;
    } else {
      if (d === b) {
        a >= this.na[b + 1].wj() && (b += 1);
        break;
      }
      b = d;
    }
  }
  return b;
}, mi:function(a) {
  return this.na[a];
}, wj:function(a) {
  return this.Kb.Nc() ? null : this.da[a];
}, eC:function(a, b) {
  a = this.yh(a.Da(b));
  b = this.na.length;
  for (var c = 0; c < b && !(a < this.na[c].wj()); c++) {
  }
  return c - 1;
}, nG:function(a, b) {
  return this.Kb.Xa(0).Nc() ? this.lL(a, b) : this.mL(a, b);
}, lL:function(a, b) {
  return this.md[0].mG(a, b);
}, Yy:function() {
  return this.md[0].Yy();
}, mL:function(a, b) {
  0 === this.da.length && this.da.add(new qf());
  var c = this.da[0].rb.clone(), d = this.Kb.gu(null, b), e = this.da[0];
  e.zh() && e.rb === c && (e.Iy(a), e.cc());
  e.zh() || (e.MH(0), this.Nz(c, e, a));
  for (var f = e.xa(), k = new mb(0, b, Math.floor(a), e.xa()); null != d && k.yC(d);) {
    e.split(b, d);
    if (!this.Nz(c, e, a).isEqual(c)) {
      break;
    }
    e.eF(f);
    k = new mb(0, b + e.fp, parseInt(e.ka()), f);
  }
  return e.xa() + e.fp;
}, ZC:function(a, b, c) {
  if (this.Kb.Nc()) {
    var d = this.na[a];
    u.Ve.assert(d.zh());
    if (d.Bl()) {
      return d.hf();
    }
    var e = d.hf();
    this.da[a].gb();
    var f = e.K(), k = "height : " + d.xa() + "px; position : relative;";
    f.setAttribute("style", k);
    e.append(this.dx(a, b, c));
  } else {
    if (a >= this.na.length) {
      return null;
    }
    d = this.na[a];
    if (d.Bl()) {
      return d.hf();
    }
    e = d.hf();
    f = e.K();
    k = "height : " + d.xa() + "px; position:relative;";
    f.setAttribute("style", k);
    b = d.wj();
    a = a + 1 < this.na.length ? this.na[a + 1].wj() : this.da.length;
    e.append(this.vH(a - 1, c));
    for (a -= 2; a >= b; a--) {
      e.K().insertBefore(this.vH(a, c).K(), this.da[a + 1].hf().K());
    }
  }
  d.Rq();
  return e;
}, cz:function(a, b, c, d, e, f, k, l) {
  b = [];
  if (a >= this.na.length) {
    return b;
  }
  var n = a + 1 < this.na.length ? this.na[a + 1].wj() : this.da.length, p = this.Kb.pd, t = 0;
  for (a = this.na[a].wj(); a < n; a++) {
    var x = 0, D = {};
    null != p && (x = p.zp(), p.ek() && !a && (D.x = f + 0 + x - 0, D.y = k + this.da[a].qb(), D.style = p.Fe.jn(), D.fill = p.Fe.Bc.toString(), D.str = p.$y(), b.add(D)));
    b.addRange(this.zL(a, c, d, e, f + 0 + x, k + t, l));
    t += this.da[a].xa();
  }
  return b;
}, Fj:function(a, b, c, d, e, f, k, l, n, p, t) {
  if (this.Kb.Nc()) {
    var x = this.na[b];
    u.Ve.assert(x.zh());
    this.ex(a, b, c, d, e, f, k, l, n);
  } else {
    if (!(b >= this.na.length)) {
      x = this.na[b];
      var D = x.wj();
      b = b + 1 < this.na.length ? this.na[b + 1].wj() : this.da.length;
      c = this.Kb.pd;
      x = 0;
      var G = -1;
      null != p && (G = p.tx);
      for (; D < b && (null == p || 0 < G); D++) {
        var I = 0, Q = 0, X = 0;
        if (null != c) {
          c.ek() && (Q = c.Tq());
          X = c.zp();
          switch(c.ng) {
            case 2:
              I = n.Kk() - this.da[D].fn() - X;
              break;
            case 1:
              I = (n.Kk() - this.da[D].fn() - Q - X) / 2 + Q;
              break;
            case 0:
              I = Q;
          }
          c.ek() ? I < Q && (I = Q) : 0 > I && (I = 0);
          if (c.ek() && !D) {
            var Fa = a.getContext("2d");
            Fa.font = c.Fe.$v;
            Fa.fillStyle = c.Fe.Bc.ai();
            Fa.textBaseline = "alphabetic";
            Fa.fillText(c.$y(), k + I + X - Q, l + this.da[D].qb());
          }
        }
        this.LM(a, D, d, e, f, k + I + X, l + x, n, p, t);
        x += this.da[D].xa();
        null != p && (G = p.tx);
      }
    }
  }
}, ex:function(a, b, c, d, e, f, k, l, n) {
  u.Ve.assert(this.da[b].zh());
  this.md[0].ex(a, b, c, d, e, f, k, l, n);
}, zL:function(a, b, c, d, e, f, k) {
  var l = [];
  if (a >= this.da.length) {
    return l;
  }
  var n = this.da[a];
  u.Ve.assert(n.zh());
  1 === this.da.length && 1 === n.xf.length ? n.fn() : n.ka();
  n.ka();
  1 === this.da.length && n.fn();
  for (var p = n.xf.length, t = 0; t < p; t++) {
    var x = t + 1 < p ? n.hn(t + 1).ud() : a + 1 < this.da.length ? this.da[a + 1].rb : this.Ap();
    l.addRange(this.qL(n.hn(t), x, n.qb(), n.td(), b, c, d, e, f, k));
  }
  return l;
}, LM:function(a, b, c, d, e, f, k, l, n, p) {
  if (!(b >= this.da.length)) {
    var t = this.da[b];
    u.Ve.assert(t.zh());
    1 === this.da.length && 1 === t.xf.length ? t.fn() : t.ka();
    t.ka();
    1 === this.da.length && t.fn();
    var x = t.xf.length, D = -1;
    null != n && (D = n.tx);
    for (var G = 0; G < x && (null == n || 0 < D); G++) {
      var I = G + 1 < x ? t.hn(G + 1).ud() : b + 1 < this.da.length ? this.da[b + 1].rb : this.Ap();
      this.IM(a, t.hn(G), I, t.qb(), t.td(), c, d, e, f, k, l, n, p);
      null != n && (D = n.tx);
    }
  }
}, qL:function(a, b, c, d, e, f, k, l, n) {
  d = [];
  f = a.ud();
  a = b.ca();
  e = f.ca();
  k = f.vb();
  for (f = 0; e < a; e++) {
    var p = this.Kb.Xa(e);
    if (p.jf()) {
      p = this.Kb.Xa(e);
      var t = p.Bf();
      k = p.Ku(k, t);
      p = p.vc();
      if (1 === p.$e) {
        t = {}, t.x = l + f, t.y = n + c - p.au + p.td() - p.eo, t.style = p.jn(), t.fill = p.Bc.toString();
      } else {
        var x = p.Bc.toString();
        t = {};
        t.x = l + f;
        t.y = n + c;
        t.style = p.jn();
        t.fill = x;
      }
      t.str = k;
      t.strWidth = p.Js(k);
      d.add(t);
      f += p.Cp(k);
    }
    k = 0;
  }
  p = this.Kb.Xa(e);
  p.jf() && (p = this.Kb.Xa(e), 0 < p.Bf() && e !== this.Kb.F.length - 1 && (t = b.vb(), k = p.Ku(k, t), p = p.vc(), 1 === p.$e ? (t = {}, t.x = l + f, t.y = n + c - p.au + p.td() - p.eo, t.style = p.jn(), t.fill = p.Bc.toString()) : (x = p.Bc.toString(), t = {}, t.x = l + f, t.y = n + c, t.style = p.jn(), t.fill = x), t.str = k, t.strWidth = p.Js(k), d.add(t), p.Cp(k)));
  return d;
}, IM:function(a, b, c, d, e, f, k, l, n, p, t, x, D) {
  var G = (new xb(0, 0, 238, 1)).toString(), I = b.ud(), Q = I.ca();
  b = c.ca();
  var X = I.vb();
  if (null != x) {
    var Fa = x.tx;
    for (var La = Q; La <= b; La++) {
      var Aa = this.Kb.Xa(La);
      Aa = Aa.VB();
      La === b && (Aa = c.vb());
      La === Q && (Aa -= I.vb());
      if (Aa > Fa) {
        c = new jf();
        c.xz(La);
        c.FH(X + Fa);
        b = La;
        Fa = 0;
        break;
      } else {
        Fa -= Aa;
      }
      X = 0;
    }
    x.tx = Fa;
  }
  x = d + e;
  X = "";
  Fa = 0;
  La = Q;
  var Ha = I.vb();
  I = a.getContext("2d");
  I.save();
  for (Q = 0; La < b; La++) {
    Aa = this.Kb.Xa(La);
    if (Aa.jf()) {
      var aa = this.Kb.Xa(La);
      Fa = aa.Bf();
      X = aa.Ku(Ha, Fa);
      Ha = 0 < aa.Yp.length;
      var ya = aa.vc();
      Aa = ya.au;
      Fa = ya.eo;
      I.font = ya.$v;
      I.fillStyle = ya.Bc.ai();
      I.textBaseline = "alphabetic";
      aa = Math.ceil(aa.qb() / this.NG);
      3 > aa && (aa = 3);
      var fc = 1;
      I.strokeStyle = ya.Bc.toString();
      1 === ya.$e ? (I.fillText(X, n + Q, p + d + Fa), 1 === ya.nf && (I.lineWidth = fc, I.beginPath(), I.moveTo(n + Q, p + d + aa), I.lineTo(n + Q + ya.Cp(X), p + d + aa), I.stroke())) : 1 === ya.zg ? (I.fillText(X, n + Q, p + d - ya.qb() + Aa), 1 === ya.nf && (I.lineWidth = fc, I.beginPath(), I.moveTo(n + Q, p + d + aa), I.lineTo(n + Q + ya.Cp(X), p + d + aa), I.stroke())) : Ha ? (I.fillStyle = G, I.fillText(X, n + Q, p + d), I.strokeStyle = G, I.lineWidth = fc, I.beginPath(), I.moveTo(n + Q, p + 
      d + aa), I.lineTo(n + Q + ya.Cp(X), p + d + aa), I.stroke()) : 1 === ya.nf ? (I.fillText(X, n + Q, p + d), I.lineWidth = fc, I.beginPath(), I.moveTo(n + Q, p + d + aa), I.lineTo(n + Q + ya.Cp(X), p + d + aa), I.stroke()) : I.fillText(X, n + Q, p + d);
      Q += I.measureText(X).width;
      X = "";
    } else {
      Q = Math.ceil(Q), this.md[La].aj(a, f, k, l, n + Q, p, d, e, t), Q += Math.ceil(this.md[La].ka());
    }
    Ha = 0;
  }
  Aa = this.Kb.Xa(La);
  Aa.jf() && (aa = this.Kb.Xa(La), Aa = aa.Bf(), 0 < Aa && La !== this.Kb.F.length - 1 && (Fa = c.vb(), X = aa.Ku(Ha, Fa), Ha = 0 < aa.Yp.length, ya = aa.vc(), Fa = ya.eo, I.font = ya.$v, I.fillStyle = ya.Bc.ai(), I.textBaseline = "alphabetic", aa = Math.ceil(aa.qb() / this.NG), 3 > aa && (aa = 3), fc = 1, I.strokeStyle = ya.Bc.toString(), 1 === ya.$e ? (I.fillText(X, n + Q, p + d + ya.td() - Fa), 1 === ya.nf && (I.lineWidth = fc, I.beginPath(), I.moveTo(n + Q, p + d + aa), I.lineTo(n + Q + ya.Cp(X), 
  p + d + aa), I.stroke())) : Ha ? (I.fillStyle = G, I.fillText(X, n + Q, p + d), I.strokeStyle = G, I.lineWidth = fc, I.beginPath(), I.moveTo(n + Q, p + d + aa), I.lineTo(n + Q + ya.Cp(X), p + d + aa), I.stroke()) : 1 === ya.nf ? (I.fillText(X, n + Q, p + d), I.lineWidth = fc, I.beginPath(), I.moveTo(n + Q, p + d + aa), I.lineTo(n + Q + ya.Cp(X), p + d + aa), I.stroke()) : I.fillText(X, n + Q, p + d), Q += I.measureText(X).width, X = ""));
  null != D && (a = new nb(n + Q, p + d), c = X.substr(X.length - 1), d = I.measureText(c).width, D.xO = c, D.DO = new wb(n + Q - d, p + Fa, d, x - 2 * Fa), D.CO = a);
  I.restore();
}, dx:function(a, b, c) {
  u.Ve.assert(this.da[a].zh());
  return this.md[0].dx(a, b, c);
}, vH:function(a, b) {
  if (a >= this.da.length) {
    return null;
  }
  var c = this.da[a];
  u.Ve.assert(c.zh());
  if (c.Bl()) {
    return c.hf();
  }
  var d = c.hf();
  c.rg();
  c.cm();
  d.clear();
  1 === this.da.length && 1 === c.xf.length ? c.fn() : c.ka();
  var e = c.ka();
  1 === this.da.length && (e = c.fn());
  e || (e = 2);
  var f = this.Kb.pd, k = 0, l = 0, n = 0;
  if (null != f) {
    f.ek() && (l = f.Tq());
    n = f.zp();
    switch(f.ng) {
      case 2:
        k = c.ka() - c.fn();
        break;
      case 1:
        k = (c.ka() - c.fn()) / 2;
    }
    if (f.ek() && !a) {
      null == this.Uv && (this.Uv = new Lc());
      var p = this.Uv.K();
      this.Uv.qr("position : absolute; left : 0px;top:" + (c.qb() - f.Fe.qb()) + "px; width : " + l + "px; height : " + c.xa() + "px; color:" + f.Fe.Bc.ai() + ";font-size:" + f.Fe.Ne + "px");
      f = f.$y();
      p.innerText = f;
      p.textContent = f;
      d.append(this.Uv);
    }
  }
  e = "overflow : visible; position : relative; left : " + Math.round(k + n) + "px; width : " + (e + k + n + l) + "px; height : " + c.xa() + "px;";
  d.qr(e);
  e = c.xf.length;
  for (k = 0; k < e; k++) {
    n = k + 1 < e ? c.hn(k + 1).ud() : a + 1 < this.da.length ? this.da[a + 1].rb : this.Ap(), d.append(this.HM(c.hn(k), n, c.qb(), c.td(), b, l));
  }
  c.Rq();
  return d;
}, HM:function(a, b, c, d, e, f) {
  var k = new xb(0, 0, 238, 1), l = new Lc(), n = "position : absolute;z-index:2;display : inline-block; left : " + a.Ks() + f + "px; height : " + (c + d) + "px; width : " + a.ka() + "px; white-space : nowrap";
  l.qr(n);
  var p = a.ud();
  a = b.ca();
  var t;
  f = p.ca();
  for (t = p.vb(); f < a; f++) {
    p = this.Kb.Xa(f);
    if (p.jf()) {
      n = this.Kb.Xa(f);
      var x = n.Bf();
      t = n.Ku(t, x);
      x = n.Yp;
      var D = 0 < x.length;
      p = new Lc();
      if (D) {
        var G = document.createElement("a");
        G.setAttribute("target", "_blank");
        G.setAttribute("href", x);
        p.Vp(G);
      }
      x = p.K();
      G = n.vc();
      D && (G = G.hi(), G.cj(k), G = Hc.yo.He(Hc.yo.zf(G)));
      n = 1 === G.$e ? "display: inline; vertical-align:top; " + G.jn() + ";position : relative; top : " + (c - G.au + G.td() - G.eo) + "px;" : "display: inline; vertical-align:top; " + G.jn() + ";position : relative; top : " + (c - n.qb()) + "px;";
      x.innerText = t;
      x.textContent = t;
      p.qr(n);
    } else {
      p = this.md[f].vg(c, d, e);
    }
    l.append(p);
    t = 0;
  }
  p = this.Kb.Xa(f);
  p.jf() && (n = this.Kb.Xa(f), 0 < n.Bf() && f !== this.Kb.F.length - 1 && (x = n.Yp, D = 0 < x.length, p = new Lc(), D && (G = document.createElement("a"), G.setAttribute("target", "_blank"), G.setAttribute("href", x), p.Vp(G)), x = b.vb(), t = n.Ku(t, x), G = n.vc(), x = p.K(), D && (G = G.hi(), G.cj(k), G = Hc.yo.He(Hc.yo.zf(G))), n = 1 === G.$e ? "display: inline; vertical-align:top; " + G.jn() + ";position : relative; top : " + (c - G.au + G.td() - G.eo) + "px;" : "display: inline; vertical-align:top; " + 
  G.jn() + ";position : relative; top : " + (c - n.qb()) + "px;", x.innerText = t, x.textContent = t, p.qr(n), l.append(p)));
  return l;
}, Wk:function(a, b, c, d) {
  this.md[0].Wk(a, b, c, d);
  a < this.na.length && d && this.na[a].lk();
}, uH:function(a, b, c, d) {
  if (!(a >= this.na.length)) {
    if (this.Kb.Nc()) {
      this.Wk(a, b, c, d);
    } else {
      var e = this.na[a];
      if (!(d && e.Xk() || !d && e.Fk())) {
        d && e.lk();
        e = e.wj();
        a = a + 1 < this.na.length ? this.na[a + 1].wj() : this.da.length;
        for (var f = null == b ? 0 : b.length, k = this.da.length; e < a; e++) {
          var l = {}, n = this.da[e];
          if (!(d && n.Xk() || !d && n.Fk())) {
            d ? (n.rg(), n.lk()) : (n.cm(), n.vl());
            n = n.rb;
            for (var p = e + 1 < k ? this.da[e + 1].rb : this.rG(), t = 0; t < f; t++) {
              if (b[t].from.Tb() === c) {
                var x = b[t].from.Qd().ud(), D = b[t].xc.Qd().ud(), G = b[t].bgColor.clone();
                x.yj(n) && D.Ti(p) ? this.JM(e, d, G, this.Kb.jC() && e === this.da.length - 1 && D.Td(p)) : x.Ti(n) && x.qn(p) && D.Td(n) && D.yj(p) ? this.vz(e, x.clone(), D.clone(), d, G) : x.qn(n) && D.Td(n) && D.yj(p) ? this.vz(e, n.clone(), D.clone(), d, G) : x.Ti(n) && x.qn(p) && D.Td(p) ? this.vz(e, x.clone(), D.clone(), d, G) : x.Ti(n) && x.yj(this.Ap()) && D.Td(p) && this.vz(e, x.clone(), D.clone(), d, G);
              } else {
                x = b[t].from.Da(c).T.ca(), n.ca() <= x && x < p.ca() && (D = l[x], null == D && (D = [], l[x] = D), D.add(b[t]));
              }
            }
            Object.keys(l);
            for (t = n.ca(); t < p.ca(); t++) {
              this.Kb.Xa(t).jf() || (D = l[t], this.md[t].Wk(0, D, c, d));
            }
          }
        }
      }
    }
  }
}, JM:function(a, b, c, d) {
  for (var e = this.da[a], f = e.hf(), k = e.xf.length, l = 0; l < k; l++) {
    var n = e.hn(l);
    l + 1 < k || a + 1 < this.da.length || this.Ap();
    f.append(this.tH(n, e, b, c, d && k - 1 === l));
  }
}, vz:function(a, b, c, d, e) {
  for (var f = this.da[a], k = f.hf(), l = f.xf.length, n = this.rG(), p = 0; p < l; p++) {
    var t = f.hn(p), x = this.Kb.jC() && c.Ti(n) && a === this.da.length - 1 && l - 1 === p, D = t.ud(), G = p + 1 < l ? f.hn(p + 1).ud() : a + 1 < this.da.length ? this.da[a + 1].rb : n;
    b.yj(D) && c.Ti(G) ? k.append(this.tH(t, f, d, e, x)) : b.Ti(D) && b.qn(G) && c.Td(D) && c.yj(G) ? k.append(this.uz(t, f, b.clone(), c.clone(), d, e, x)) : b.qn(D) && c.Td(D) && c.yj(G) ? k.append(this.uz(t, f, D.clone(), c.clone(), d, e, x)) : b.Ti(D) && b.qn(G) && c.Td(G) ? k.append(this.uz(t, f, b.clone(), G.clone(), d, e, x)) : b.Ti(D) && b.yj(this.Ap()) && c.Td(G) && k.append(this.uz(t, f, b.clone(), G.clone(), d, e, x));
  }
}, tH:function(a, b, c, d) {
  var e = this.Kb.pd, f = 0;
  null != e && e.ek() && (f = e.Tq());
  e = new Lc();
  var k = a.ka();
  a = "position: absolute; display:inline ;height:" + b.xa() + "px;background-color:" + d.ai() + ";left:" + Math.round(a.Ks() + f + 0) + "px; top:0px; width:" + k + "px;";
  e.qr(c ? a + "z-index:3;" : a + "z-index:1;");
  c ? b.dw(e) : b.WA(e);
  return e;
}, uz:function(a, b, c, d, e, f) {
  var k = new Lc();
  c = this.yG(c, a);
  d = this.yG(d, a);
  a = "position: absolute; display: inline;height:" + b.xa() + "px;background-color:" + f.ai() + ";left:" + (c + a.Ks()) + "px; top:0px; width:" + (d - c) + "px;";
  k.qr(e ? a + "z-index:3;" : a + "z-index:1;");
  e ? b.dw(k) : b.WA(k);
  return k;
}, fC:function(a) {
  return a < this.na.length && 0 <= a ? this.na[a].xa() : 0;
}, gn:function() {
  return this.na.length;
}, Ps:function(a) {
  a < this.na.length && 0 <= a && (this.na[a].cc(), this.Kb.Nc() && this.md[0].iz(a));
}, Ie:function(a, b, c, d) {
  return this.Kb.Xa(0).Nc() ? this.BM(a, b, c, d) : this.CM(a, b, c, d);
}, BM:function(a, b, c, d) {
  this.da = this.md[0].Ie(a, b, c, d);
  a = 0;
  b = this.na.length;
  for (a === this.na.length && this.na.add(new rf()); a < this.da.length; ++a) {
    a === this.na.length && this.na.add(new rf()), c = this.da[a].xa(), this.na[a].xa(), this.na[a].pi(), this.da[a].Nk() && (this.da[a].ws(), this.na[a].En(), this.na[a].Wy()), this.na[a].Wg(c), this.na[a].LH(a), this.na[a].En();
  }
  b !== this.da.length && this.na[this.da.length - 1].En();
  if (a < this.na.length) {
    for (b = a; b < this.na.length; b++) {
      this.na[b].gb();
    }
    this.na.removeRange(a, this.na.length - a);
  }
  return this.na;
}, CM:function(a, b, c, d) {
  var e = this.Kb.pd, f = 0;
  null != e && (e.ek() && (f = e.Tq(), b -= f), b -= e.zp());
  b < bf.NF && (b = bf.NF - f);
  var k = f = 0, l = null, n = c - a;
  for (f === this.na.length && this.na.add(new rf()); f < this.na.length && this.na[f].zh(); f++) {
    k += this.na[f].xa(), a = c, n = 0;
  }
  for (var p = f, t = p; p < this.na.length; p++) {
    this.na[p].zh() || (t = p);
  }
  if (f === this.na.length) {
    return this.na;
  }
  f || (l = mb.yF(d.Ut));
  var x = this.Ap();
  p = this.na[f].wj();
  this.da.length || this.da.add(new qf());
  var D = this.da[p].rb.clone();
  l = this.Kb.gu(l, n - k);
  var G = 0;
  do {
    if (this.na[f].zh()) {
      if (f < t) {
        k += this.na[f].xa();
        G = 0;
        l = this.Kb.gu(null, -k);
        f++;
        a = c;
        f < this.na.length && (p = this.na[f].wj(), D = this.da[p].rb.clone());
        continue;
      } else {
        break;
      }
    }
    G = 0;
    do {
      p === this.da.length && this.da.add(new qf());
      var I = this.da[p], Q = I.rb.clone();
      I.Pl(D.oa, D.Ab);
      I.zh() && Q.isEqual(D) ? I.xf.length && I.hn(0).NA !== b && (I.Iy(b), I.cc()) : (I.Iy(b), I.cc());
      if (I.zh()) {
        var X = x;
        p < this.da.length - 1 && (X = this.da[p + 1].rb.clone());
      } else {
        null != e && null != e.Fe && e.ek() && !p ? (I.gt(e.Fe.qb()), I.it(e.Fe.td())) : (I.gt(0), I.it(0)), I.MH(0), X = this.Nz(D, I, b);
      }
      for (var Fa = I.xa(), La = new mb(0, n + G, Math.floor(b), I.xa()); null != l && l.length && La.yC(l);) {
        null != e && null != e.Fe && e.ek() && !p ? (I.gt(e.Fe.qb()), I.it(e.Fe.td())) : (I.gt(0), I.it(0));
        I.split(n + G, l);
        X = this.Nz(D, I, b);
        if (!X.isEqual(D)) {
          break;
        }
        I.eF(Fa);
        La = new mb(0, n + G + I.fp, parseInt(I.ka()), Fa);
      }
      if (G + I.xa() + I.fp > a && -1 !== c) {
        if (G) {
          a = this.na[f].xa() !== G;
          this.na[f].pi();
          this.na[f].Wg(G);
          a ? this.na[f].En() : this.na[f].ws();
          k += G;
          G = 0;
          l = this.Kb.gu(null, -k);
          f++;
          a = c;
          f === this.na.length && this.na.add(new rf());
          this.na[f].wj() !== p ? (this.na[f].LH(p), this.na[f].cc(), this.na[f].En()) : X !== Q && (this.na[f].cc(), this.na[f].En());
          break;
        } else {
          a = c;
        }
      }
      G += I.xa();
      D = X;
      I.pi();
      p += 1;
    } while (!D.isEqual(x));
  } while (!D.isEqual(x));
  if (D.isEqual(x)) {
    a = this.na[f].xa() !== G;
    this.na[f].pi();
    this.na[f].Wg(G);
    a ? this.na[f].En() : this.na[f].ws();
    if (p < this.da.length) {
      for (b = p; b < this.da.length; b++) {
        this.da[b].gb();
      }
      this.da.removeRange(p, this.da.length - p);
    }
    if (f + 1 < this.na.length) {
      for (b = f + 1; b < this.na.length; b++) {
        this.na[b].gb();
      }
      this.na.removeRange(f + 1, this.na.length - f - 1);
    }
  }
  for (; f < this.na.length; ++f) {
    k += this.na[f].xa();
  }
  this.Kb.HL() && (k += Vc.fH, this.na[this.na.length - 1].Wg(this.na[this.na.length - 1].xa() + Vc.fH));
  1 === this.na.length ? d.OH(this.Kb.gu(d.Ut, k - n)) : d.OH(this.Kb.gu(null, k));
  return this.na;
}, xa:function() {
  for (var a = 0, b = 0; b < this.na.length; ++b) {
    a += this.na[b].xa();
  }
  b = this.Kb.pd;
  null != b && b.ek() && a < b.fG() && (a = b.fG());
  return a;
}, ka:function() {
  return this.Kb.Nc() ? this.da[0].ka() : 1 !== this.da.length || this.Kb.pd.ng ? this.da[0].ka() + this.Kb.pd.zp() + (this.Kb.pd.ek() ? this.Kb.pd.Tq() : 0) : this.da[0].fn() + this.Kb.pd.zp() + (this.Kb.pd.ek() ? this.Kb.pd.Tq() : 0);
}, bC:function() {
  return this.Kb.Nc() ? 0 : this.da[0].qb();
}, rG:function() {
  var a = new jf();
  a.set(this.Kb.F.length, 0);
  return a;
}, Ap:function() {
  var a = new jf();
  a.set(this.Kb.F.length - 1, 0);
  return a;
}, yG:function(a, b) {
  var c = 0, d = this.Kb.pd;
  null != d && d.ek() && (c += d.Tq());
  d = b.ca();
  b = b.vb();
  var e = a.ca();
  for (a = a.vb(); d <= e; d++) {
    if (d !== e || a) {
      var f = this.Kb.Xa(d);
      if (f.jf()) {
        var k = f.vc(), l = f.Bf();
        d === e && (l = a);
        c += k.Js(f.jg.substr(b, l - b));
      } else {
        d !== e && (c += this.md[d].ka());
      }
    }
    b = 0;
  }
  return c;
}, xp:function(a, b, c) {
  this.jt(!0);
  var d = c.length, e = a.ca();
  if (this.da.length) {
    var f = this.da.length, k = this.yh(a.Da(b)), l = k;
    this.da[l].cc();
    0 < l && this.da[l - 1].cc();
    for (l++; l < f; l++) {
      this.da[l].Pl(this.da[l].rb.oa + d, 0);
    }
    f = this.xj(k);
    k = 1;
    this.na[f].cc();
    f && (f--, k++, this.na[f].cc());
    null != this.Tc && this.Tc.Uk(a, b, f, k);
  } else {
    null != this.Tc && this.Tc.Uk(a, b, 0, 1);
  }
  for (a = 0; a < d; a++) {
    b = c[a], f = this.Ac.rB(this, b.Qi()), null != f && f.vm(b), this.md.Lk(e, f), e++;
  }
}, wp:function(a, b, c) {
  this.jt(!0);
  var d = this.da.length, e = a.ca(), f = this.yh(a.Da(b));
  if (!f && 1 >= this.Kb.F.length) {
    for (var k = 0; k < this.da.length; k++) {
      this.da[k].gb();
    }
    this.da.clear();
    d = this.na.length;
    for (k = 0; k < d; k++) {
      this.na[k].gb();
    }
    this.na.clear();
    null != this.Tc && this.Tc.Uk(a, b, 0, d);
  } else if (0 < d) {
    k = f;
    this.da[k].cc();
    0 < k && this.da[k - 1].cc();
    e += c;
    for (k++; k < d; ++k) {
      if (this.da[k].ca() < e) {
        this.da[k].Pl(a.ca(), 0), this.da[k].cc();
      } else {
        break;
      }
    }
    for (e = k; k < d; k++) {
      this.da[k].Pl(this.da[k].ca() - c, 0);
    }
    d = this.xj(f);
    f = this.xj(e);
    for (k = d; k <= f && k < this.na.length; k++) {
      this.na[k].cc();
    }
    null != this.Tc && this.Tc.Uk(a, b, d, f - d + 1);
  }
  this.md.removeRange(a.ca(), c);
  a.clone().sb(a.ca());
  this.sC(a, b);
}, Pq:function(a, b) {
  this.jt(!0);
  var c = a.ca(), d = this.da.length, e = this.yh(a.Da(b)), f = e;
  if (d) {
    this.da[e].cc();
    0 < e && this.da[e - 1].cc();
    for (f++; f < d; ++f) {
      if (this.da[f].ca() === c) {
        this.da[f].Pl(this.da[f].ca(), 0);
      } else {
        break;
      }
    }
    for (; f < d; f++) {
      this.da[f].Pl(this.da[f].ca() + 1, 0);
    }
    c = this.xj(e);
    d = 1;
    this.na[c].cc();
    c && (c--, d++, this.na[c].cc());
    null != this.Tc && this.Tc.Uk(a, b, c, d);
  }
  this.md.Lk(a.ca() + 1, null);
}, Oq:function(a, b) {
  this.jt(!0);
  var c = a.ca(), d = this.da.length, e = this.yh(a.Da(b)), f = e;
  if (this.da.length) {
    this.da[f].cc();
    0 < f && this.da[f - 1].cc();
    f++;
    for (c++; f < d; ++f) {
      if (this.da[f].ca() === c) {
        this.da[f].Pl(c - 1, 0);
      } else {
        break;
      }
    }
    for (; f < d; f++) {
      this.da[f].Pl(this.da[f].ca() - 1, 0);
    }
    c = this.xj(e);
    this.na[c].cc();
    d = 1;
    c && (c--, d++, this.na[c].cc());
    null != this.Tc && this.Tc.Uk(a, b, c, d);
  }
  this.md.Ej(a.ca() + 1);
}, tw:function(a, b, c) {
  this.jt(!0);
  var d = a.ca(), e = a.vb(), f = this.da.length;
  if (f) {
    var k = this.yh(a.Da(b)), l = k;
    this.da[k].cc();
    0 < k && this.da[k - 1].cc();
    l++;
    for (var n = l; l < f; l++) {
      var p = this.da[l].ca();
      if (p === d) {
        var t = this.da[l].vb();
        t > e && (t < e + c ? (this.da[l].Pl(p, e), this.da[l].cc()) : this.da[l].Pl(p, t - c), n = l);
      } else {
        break;
      }
    }
    c = this.xj(0 < k ? k - 1 : k);
    n = this.xj(n);
    for (l = c; l <= n && l < this.na.length; l++) {
      this.na[l].cc();
    }
    null != this.Tc && this.Tc.Uk(a, b, c, n - c + 1);
  }
}, $F:function(a, b, c) {
  var d = a.Da(b).clone(), e = this.yh(d);
  d.T.xz(d.T.ca() + c);
  var f = this.yh(d);
  if (this.da.length) {
    this.da[e].cc();
    0 < e && this.da[e - 1].cc();
    for (d = e; d <= f; ++d) {
      this.da[d].cc();
    }
    e = this.xj(0 < e ? e - 1 : e);
    f = this.xj(f);
    for (d = e; d <= f && d < this.na.length; d++) {
      this.na[d].cc();
    }
    null != this.Tc && this.Tc.Uk(a, b, e, f - e + 1);
  }
  d = a.clone();
  d.sb(a.ca() + c);
  this.sC(d, b);
}, OB:function(a, b, c, d) {
  this.jt(!0);
  if (this.Kb.Xa(0).Nc()) {
    if (this.da.length) {
      for (var e = c + d, f = c; f < e; f++) {
        this.da[f].cc(), this.na[f].cc();
      }
      null != this.Tc && this.Tc.Uk(a, b, c, d);
    }
  } else {
    if (this.da.length) {
      f = a.Da(b).clone();
      c = this.yh(f);
      f.T.xz(f.T.ca() + d);
      e = this.yh(f);
      0 < c && this.da[c - 1].cc();
      for (f = c; f <= e; ++f) {
        this.da[f].cc();
      }
      c = this.xj(0 < c ? c - 1 : c);
      e = this.xj(e);
      for (f = c; f <= e && f < this.na.length; f++) {
        this.na[f].cc();
      }
      null != this.Tc && this.Tc.Uk(a, b, c, e - c + 1);
    }
    f = a.clone();
    f.sb(a.ca() + d);
    this.sC(f, b);
  }
}, Rw:function(a, b, c) {
  a.sb(0);
  a.sc(0);
  var d = a.Tb();
  if (this.Kb.Nc()) {
    for (b = 0; b < this.da.length; ++b) {
      c ? (this.da[b].Ao(), this.na[b].Ao()) : (this.da[b].mo(), this.na[b].mo());
    }
    null != this.Tc && this.Tc.no(a, d, 0, this.da.length, c);
  } else {
    var e = 0, f = 0;
    b.from.Qd().fa === a.Ub() && (e = this.yh(b.from.Qd()), f = this.xj(e));
    var k = this.da.length - 1, l = this.na.length - 1;
    b.xc.Qd().fa === a.Ub() && (k = this.yh(b.xc.Qd()), l = this.xj(k));
    for (b = e; b <= k && b < this.da.length; ++b) {
      c ? this.da[b].Ao() : this.da[b].mo();
    }
    for (b = f; b <= l && b < this.na.length; b++) {
      c ? this.na[b].Ao() : this.na[b].mo();
    }
    null != this.Tc && this.Tc.no(a, d, f, l - f + 1, c);
  }
}, no:function(a, b, c, d, e) {
  c = this.eC(a, b);
  d = this.eC(a, b);
  if (0 <= c && c < this.na.length) {
    for (var f = c; f <= d; ++f) {
      e ? this.na[f].Ao() : this.na[f].mo();
    }
  }
  f = this.yh(a.Da(b));
  var k = this.yh(a.Da(b));
  if (f < this.da.length) {
    for (; f <= k; f++) {
      e ? this.da[f].Ao() : this.da[f].mo();
    }
  }
  null != this.Tc && this.Tc.no(a, b, c, d - c + 1, e);
}, iC:function(a, b) {
  var c = 0, d = this.Kb.pd;
  null != d && d.ek() && (c += d.Tq());
  if (this.Kb.Nc()) {
    return 0;
  }
  d = this.da[a];
  a = d.ca();
  d = d.vb();
  var e = b.ca();
  for (b = b.vb(); a <= e; a++) {
    if (a !== e || b) {
      var f = this.Kb.Xa(a);
      if (f.jf()) {
        var k = f.vc(), l = f.Bf();
        a === e && (l = b);
        c += k.Js(f.jg.substr(d, l - d));
      } else {
        a !== e && (c += this.md[a].ka());
      }
    }
    d = 0;
  }
  return c;
}, EH:function(a, b, c) {
  -1 === b && (b = this.yh(a.Qd()), b < this.da.length - 1 && this.da[b + b].rb.isEqual(a.Qd().ud()) && b++);
  a = Math.floor(this.iC(b, a.Qd().ud()));
  a = "position : absolute;width : 1px; height : " + this.da[b].xa() + "px;background-color : black; top:0px; left :" + a + "px;z-index:2;";
  c.qr(a);
  this.da[b].hf().append(c);
}};
rf = function() {
  this.Vv = this.IA = 0;
  this.oy = !0;
  this.vh = this.th = this.Ii = this.Ck = !1;
};
rf.prototype = {rl:0, Vv:0, oy:!1, IA:0, Sm:null, Ck:!1, Ii:!1, th:!1, vh:!1, hf:function() {
  null == this.Sm && (this.Sm = new Lc());
  return this.Sm;
}, wj:function() {
  return this.IA;
}, En:function() {
  this.oy = !0;
}, Nk:function() {
  return this.oy;
}, ws:function() {
  this.oy = !1;
}, cc:function() {
  this.vh = this.th = this.Ii = this.Ck = !1;
}, pi:function() {
  this.Ck = !0;
}, zh:function() {
  return this.Ck;
}, Wy:function() {
  this.vh = this.th = this.Ii = !1;
}, Rq:function() {
  this.Ii = !0;
}, Bl:function() {
  return this.Ii;
}, mo:function() {
  this.th = !1;
}, vl:function() {
  this.th = !0;
}, Fk:function() {
  return this.th;
}, Ao:function() {
  this.vh = !1;
}, lk:function() {
  this.vh = !0;
}, Xk:function() {
  return this.vh;
}, Wg:function(a) {
  this.rl = a;
}, xa:function() {
  return this.rl;
}, ka:function() {
  return this.Vv;
}, LH:function(a) {
  this.IA = a;
}, gb:function() {
  if (null != this.Sm) {
    var a = this.Sm.K(), b = a.parentNode;
    null != b && b.removeChild(a);
  }
}};
cf = function(a, b) {
  Dg(cf, this, [a, b]);
  this.wa = a;
  this.parent = b;
  this.P = [];
  this.za = [];
  this.nm = 5;
  this.Sd = 1;
  this.rj = [];
};
cf.prototype = {qk:null, nm:0, Sd:0, rj:null, gG:function(a) {
  for (var b = 0, c = 0; c < this.rj.length && !(b += this.rj[c], a < b); ++c) {
  }
  return c;
}, Ks:function(a) {
  for (var b = 0, c = 0; c < a && c < this.rj.length; ++c) {
    b += this.rj[c];
  }
  a > this.rj.length && (b += 20 + this.Sd);
  return b;
}, vm:function(a) {
  if (this.qk !== a) {
    this.kh();
    if (null != a) {
      a.Tf(this);
      for (var b = a.Vc(), c = 0; c < b; ++c) {
        var d = this.wa.oo(this);
        d.um(a.Hc(c));
        this.P.add(d);
      }
    }
    this.qk = a;
  }
}, Xa:function() {
  return this.qk;
}, kh:function() {
  if (null != this.qk) {
    this.qk.wg(this);
    for (var a = this.P.length, b = 0; b < a; ++b) {
      this.P[b].Jn();
    }
    this.P.removeRange(0, a);
  }
}, gb:function() {
}, mG:function(a, b) {
  this.gF(a);
  for (var c = a = 0; c < this.P.length; ++c) {
    var d = this.P[c].oG(this.rj[c] - 2 * this.nm - this.Sd, b);
    d > a && (a = d);
  }
  return a;
}, gF:function(a) {
  this.rj.clear();
  var b = this.xG();
  if (b > a - this.Sd) {
    for (a = (a - this.Sd) / b, b = 0; b < this.qk.Vc(); b++) {
      this.rj.add(Math.floor(this.qk.Hw(b) * a));
    }
  } else {
    for (b = 0; b < this.qk.Vc(); b++) {
      this.rj.add(Math.floor(this.qk.Hw(b)));
    }
  }
}, Ie:function(a, b, c, d) {
  this.gF(b);
  var e = 2 * this.nm + 2 * this.Sd;
  -1 !== c && (a -= e, c -= e, 0 > a ? a = c : this.mG(b, c - a) > a && a !== c && (a = c));
  b = this.bz() + this.Sd;
  for (var f = 0, k = 0; k < this.za.length; ++k) {
    this.za[k].Wg(0), this.za[k].dj(b);
  }
  for (var l = 0; l < this.P.length; ++l) {
    var n = this.P[l].Ie(a, this.rj[l] - 2 * this.nm - this.Sd, c, d);
    n.length > f && (f = n.length);
    for (k = 0; k < n.length; ++k) {
      k === this.za.length && (this.za.add(new pe()), this.za[k].dj(b)), this.za[k].xa() < n[k].ni + e && (this.za[k].Wg(n[k].ni + e), this.za[k].pi()), n[k].Nk() && (n[k].ws(), this.za[k].En(), this.za[k].Wy());
    }
  }
  if (0 < this.za.length - f) {
    for (l = f; l < this.za.length; ++l) {
      this.za[l].hf().gb();
    }
    this.za.removeRange(f, this.za.length - f);
  }
  for (l = 0; l < this.za.length; ++l) {
    u.Ve.assert(this.za[l].zh());
  }
  d.Vt || (a = this.za[this.za.length - 1], a.Wg(a.xa() - this.Sd));
  return this.za;
}, xG:function() {
  for (var a = this.qk.Vc(), b = 0, c = 0; c < a; ++c) {
    b += this.qk.Hw(c);
  }
  return b;
}, iz:function(a) {
  var b = this.qk.Vc();
  a < this.za.length && this.za[a].cc();
  for (var c = 0; c < b; ++c) {
    a < this.P[c].Ik() && this.P[c].JG(a);
  }
}, dx:function(a, b, c) {
  var d = this.za[a];
  if (d.Bl()) {
    return d.hf();
  }
  var e = d.hf(), f = e.K();
  e.clear();
  d.Rq();
  f.style.padding = "0px";
  f.style.margin = "0px";
  f.style.width = this.bz() + this.Sd + "px";
  f.style.position = "relative";
  var k = new Lc();
  k.Vp(document.createElement("table"));
  d = new Lc();
  d.Vp(document.createElement("tr"));
  k.K().style.borderTop = this.Sd + "px solid black";
  k.K().style.tableLayout = "fixed";
  k.K().style.width = this.bz() + "px";
  k.K().style.position = "relative";
  k.K().style.zIndex = 2;
  k.append(d);
  f = 1;
  b && (k.K().style.borderBottom = this.Sd + "px solid black", f += 1);
  k.K().style["border-collapse"] = "collapse";
  k.K().style.borderCollapse = "collapse";
  e.append(k);
  b = this.qk.Vc();
  for (k = 0; k < b; ++k) {
    var l = new Lc();
    l.Vp(document.createElement("td"));
    l.K().style["-webkit-box-sizing"] = "content-box";
    l.K().style["-moz-box-sizing"] = "content-box";
    l.K().style["box-sizing"] = "content-box";
    l.K().style.borderRight = this.Sd + "px solid black";
    l.K().style.borderLeft = this.Sd + "px solid black";
    l.K().style.padding = this.nm + "px";
    l.K().style.margin = "0px";
    l.K().style.textAlign = "Left";
    l.K().style.verticalAlign = "Top";
    l.K().style.width = this.rj[k] - this.Sd - 2 * this.nm + "px";
    l.K().style.height = this.za[a].xa() - this.Sd * f - 2 * this.nm + "px";
    d.append(l);
    if (a < this.P[k].Ik()) {
      var n = this.P[k].Ol(a, c);
      l.append(n);
    }
  }
  return e;
}, ex:function(a, b, c, d, e, f, k, l, n) {
  var p = this.qk.Vc(), t = a.getContext("2d");
  t.strokeStyle = "black";
  t.lineWidth = this.Sd;
  var x = 1;
  c && (x += 1);
  t.beginPath();
  t.moveTo(k + this.Sd / 2, l + this.Sd / 2 + this.za[b].xa() - this.Sd * (x - 1));
  t.lineTo(k + this.Sd / 2, l + this.Sd / 2);
  t.lineTo(k + this.ka() + this.Sd / 2, l + this.Sd / 2);
  t.lineTo(k + this.ka() + this.Sd / 2, l + this.Sd / 2 + this.za[b].xa() - this.Sd * (x - 1));
  c && t.closePath();
  t.stroke();
  for (var D = c = 0; D < p; ++D) {
    D && (t.beginPath(), t.moveTo(k + c + this.Sd / 2, l + this.Sd / 2 + this.za[b].xa() - this.Sd * (x - 1)), t.lineTo(k + this.Sd / 2 + c, l + this.Sd / 2), t.stroke()), this.P[D].Fj(a, b, d, e, f + 1, k + c + this.nm + this.Sd, l + this.Sd + this.nm, n), c += this.rj[D];
  }
}, vg:function() {
  return null;
}, qb:function() {
  return this.xa();
}, td:function() {
  return 0;
}, xa:function() {
  for (var a = 0, b = 0; b < this.za.length; ++b) {
    a += this.za[b].xa();
  }
  return a;
}, ka:function() {
  return this.bz();
}, Wk:function(a, b, c, d) {
  if (!(a >= this.za.length)) {
    var e = this.za[a];
    if (!(d && e.Xk() || !d && e.Fk())) {
      d ? (e.rg(), e.lk()) : (e.cm(), e.vl());
      var f = null == b ? 0 : b.length;
      e = {};
      for (var k = [], l = 0; l < f; ++l) {
        if (!b[l].from.isEqual(b[l].xc) || c !== b[l].from.Tb()) {
          if (c === b[l].from.Tb()) {
            var n = b[l].clone();
            n.from.Be(c + 1);
            n.xc.Be(c + 1);
            n.xc.Ue(this.qk.Vc());
            k.add(n);
          } else if (c + 1 === b[l].from.Tb() && b[l].from.Sg() !== b[l].xc.Sg()) {
            k.add(b[l]);
          } else {
            var p = b[l].from.Da(c + 1).Ic;
            n = e[p];
            null == n && (n = [], e[p] = n);
            n.add(b[l]);
          }
        }
      }
      c++;
      for (l = 0; l < this.P.length; l++) {
        for (b = 0; b < this.P[l].Ik(); b++) {
          n = e[l], this.P[l].yn(b, n, c, d);
        }
      }
      this.KM(a, k, d);
    }
  }
}, Yy:function() {
  return this.Sd;
}, KM:function(a, b, c) {
  var d = b.length, e = this.za[a], f = e.hf();
  c ? e.rg() : e.cm();
  for (var k = 0; k < d; k++) {
    for (var l = b[k].from.Sg(), n = b[k].xc.Sg(); l < n; l++) {
      if (a < this.P[l].Ik()) {
        var p = new Lc(), t = document.createElement("div"), x = b[k].bgColor.clone(), D = this.Sd, G = e.xa() - 2 * this.Sd, I = this.Sd + this.Ks(l), Q = this.rj[l] - this.Sd;
        l || (I += this.nm, Q -= this.nm);
        a === this.P[l].Ik() - 1 && (G = 2 * this.nm + this.P[l].dC(a).xa());
        x = "position:absolute; height:" + G + "px; width:" + Q + "px;background-color:" + x.ai() + ";top:" + D + "px; left:" + I + "px;";
        x = c ? x + "z-index : 3" : x + "z-index : 1";
        t.setAttribute("style", x);
        p.Vp(t);
        f.append(p);
        c ? e.dw(p) : e.WA(p);
      }
    }
  }
}, bz:function() {
  for (var a = 0, b = 0; b < this.rj.length; b++) {
    a += this.rj[b];
  }
  return a;
}};
Ic = function(a, b) {
  this.cr = a;
  this.dr = b;
  this.ua = [];
};
Ic.prototype = {df:0, ua:null, cr:null, dr:null, isEqual:function(a) {
  if (this.df === a.df && this.cr === a.cr && this.dr === a.dr && this.ua.length === a.ua.length) {
    for (var b = 0; b < this.ua.length; b++) {
      for (var c = !1, d = 0; d < a.ua.length; d++) {
        if (this.ua[b].from.isEqual(a.ua[d].from) && this.ua[b].xc.isEqual(a.ua[d].xc)) {
          c = !0;
          break;
        }
      }
      if (!c) {
        return !1;
      }
    }
    return !0;
  }
  return !1;
}, clone:function() {
  var a = new Ic(this.cr, this.dr);
  a.set(this.df, this.ua);
  return a;
}, set:function(a, b) {
  this.df = a;
  this.ua = b;
}, Gu:function() {
  var a = this.ua[0].from.clone(), b = null, c = this.xh(a), d = c.getParent();
  d.getParent();
  c.jf() && a.vb() && (b = c.vc());
  if (null == b) {
    for (var e = a.ca() - 1; 0 <= e; --e) {
      if (c = d.Xa(e), c.jf()) {
        b = c.vc();
        break;
      }
    }
  }
  c = d.Xa(a.ca());
  null == b && c.jf() && (b = c.vc());
  if (null == b) {
    var f = d.F.length;
    for (e = a.ca() + 1; e < f; ++e) {
      if (c = d.Xa(e), c.jf()) {
        b = c.vc();
        break;
      }
    }
  }
  return b;
}, sJ:function(a, b) {
  for (var c = 0; c < this.ua.length; c++) {
    if (0 === this.df) {
      var d = this.ua[c].from.clone(), e = this.ua[c].xc.clone(), f = this.Cl(d);
      e.vb() && (e.sb(e.ca() + 1), e.sc(0));
      d.vb() ? d.sc(0) : 0 < d.ca() && d.sb(d.ca() - 1);
      var k = f.Lb(d.Ub());
      e.Ub() === d.Ub() ? this.Ay(k, a, d.ca(), e.ca(), b) : (d.ca() && (this.Ay(k, a, d.ca(), k.F.length, b), d.Yd(d.Ub() + 1), d.sb(0), d.sc(0)), k = f.Lb(e.Ub()), e.ca() && this.Ay(k, a, 0, e.ca(), b), this.iF(f, a, this.ua[c].from.Ub(), this.ua[c].xc.Ub(), b));
    } else {
      d = this.ua[c].from.Sg(), e = this.ua[c].xc.Sg(), this.jF(this.xh(this.ua[c].from), a, d, e, b);
    }
  }
}, iF:function(a, b, c, d, e) {
  for (; c < d; c++) {
    var f = a.Lb(c);
    this.Ay(f, b, 0, f.F.length, e);
  }
}, Ay:function(a, b, c, d, e) {
  if (!e && d === a.F.length - 1) {
    var f = a.Xa(d);
    b[f.vc().Ak.toString()] = f.vc().Ak;
  }
  for (; c < d; c++) {
    if (f = a.Xa(c), f.Vc()) {
      if (f.uC()) {
        var k = f.vc();
        b[k.Ak.toString()] = k.Ak;
      }
      this.jF(f, b, 0, f.Vc(), e);
    } else {
      f.jf() && (!e || 0 < f.jg.trim().length) && (b[f.vc().Ak.toString()] = f.vc().Ak);
    }
  }
}, jF:function(a, b, c, d, e) {
  for (; c < d; c++) {
    var f = a.Hc(c);
    this.iF(f, b, 0, f.ie.length, e);
  }
}, Cl:function(a) {
  return this.jG(a, a.Tb());
}, Dl:function(a) {
  return this.Cl(a).Lb(a.Ub());
}, xh:function(a) {
  return this.Dl(a).Xa(a.ca());
}, jG:function(a, b) {
  for (var c = this.cr, d = 1; d <= b; ++d) {
    var e = a.Da(d - 1), f = a.Da(d);
    c = c.Lb(e.fa).Xa(e.T.oa).Hc(f.Ic);
  }
  return c;
}, vL:function(a, b) {
  return this.jG(a, b).Lb(a.Da(b).fa);
}, kL:function(a, b) {
  return this.vL(a, b).Xa(a.Da(b).ud().oa);
}, XB:function(a) {
  for (var b = a.Tb(), c = this.dr, d = 1; d <= b; ++d) {
    var e = a.Da(d - 1), f = a.Da(d);
    c = c.hm(e.fa).Iw(e.T.oa);
    e = c.Xa();
    c = e.Nc() && f.Ic >= e.Vc() ? c.WB(e.Vc() - 1) : c.WB(f.Ic);
  }
  return c;
}, wL:function(a) {
  return this.XB(a).hm(a.Ub());
}, LF:function() {
  var a = this.ua[0].bgColor;
  if (1 === this.df || 3 === this.df || 2 === this.df) {
    var b = this.ua[0].from.clone();
    this.Cl(b).KF(b);
    this.clear();
    this.lt(b, a);
  } else if (!this.df) {
    b = this.ua[0].from.clone();
    if (this.QL(this.ua[0].xc, !1) || this.xh(this.ua[0].xc).Nc() && (b.ca() || b.vb())) {
      return this.clear(), this.lt(b, a), !1;
    }
    this.Du();
  }
  return !0;
}, Qu:function(a, b, c) {
  var d = this.ua[0].bgColor;
  if (this.LF()) {
    b.pn() || this.OL(a, c);
    var e = this.ua[0].from.clone(), f = this.Dl(e), k = f.getParent();
    this.sr(e, f, a);
    if (b.Nc() || b.pn()) {
      k.HD(e, a.yw());
      var l = a.Mh(c);
      l.bf("\n");
      f.Fg(e, l);
      if (e.ca() || e.vb()) {
        e.Yd(e.Ub() + 1), e.sb(0), e.sc(0), f = a.FF(c), k.nn(e, f);
      }
      f.Fg(e, b);
    } else {
      f.Fg(e, b), e.sb(e.ca() + 1);
    }
    this.lt(e, d);
  }
}, QL:function(a, b) {
  a = a.clone();
  var c = this.xh(a), d = c.gC();
  if (c.Nc()) {
    c = a.Ub() - 1;
    var e = !0, f = !0;
    0 <= c && d.Lb(c).Nc() && (e = !1);
    c = a.Ub() + 1;
    c < d.ie.length && d.Lb(c).Nc() && (f = !1);
    if (b && e || !b && f) {
      return !0;
    }
  }
  return !1;
}, OL:function(a, b) {
  var c = this.ua[0].from.clone();
  if (this.xh(c).pn()) {
    this.IG(a, b);
    var d = this.Dl(c).F.length;
    0 < d && (d--, c.sb(d), d = this.xh(c).Bf(), 0 < d && c.sc(d));
    this.lt(c, this.ua[0].bgColor);
  }
  0 < c.ca() && (c.sb(c.ca() - 1), this.xh(c).pn() && this.IG(a, b));
}, IG:function(a, b) {
  if (!this.df) {
    var c = this.ua[0].from.clone();
    b = a.Mh(b);
    b.bf("\n");
    var d = this.Cl(c), e = this.Dl(c);
    d.HD(c, a.yw());
    e.Fg(c, b);
    c.Yd(c.Ub() + 1);
    c.sb(0);
    c.sc(0);
    this.lt(c, this.ua[0].bgColor);
  }
}, NM:function(a) {
  a = this.Cl(a);
  for (var b = 0; b < a.ie.length; b++) {
    a.Lb(b).pd.gx();
  }
}, $w:function(a, b, c, d) {
  var e = this.ua[0].from.clone();
  if (this.LF()) {
    d && this.NM(e);
    var f = [];
    d = new Jc();
    d.Be(0);
    for (var k = b.ie.length - 1; 0 <= k; --k) {
      d.Yd(k);
      var l = b.Lb(k);
      1 < e.Tb() && l.Nc() ? b.BB(d, 1) : f.Lk(0, l);
    }
    l = this.Dl(e);
    d = l.getParent();
    var n = b.Lb(0);
    if (l.Nc()) {
      if (e.ca()) {
        return;
      }
      k = f.length - 1;
      f[k].Xa(f[k].F.length - 1).bf("\n");
      d.qC(e, f);
      e.Yd(k + e.Ub());
      e.sb(f[k].F.length - 1);
      e.sc(0);
    } else {
      if (this.sr(e, l, a), f[0].jC()) {
        e.sb(e.ca()), e.sc(0), k = e.clone(), d.HD(e, a.yw()), e.Yd(e.Ub() + 1), e.sb(0), e.sc(0), d.qC(e, f), f[0].Nc() ? (l = d.Lb(k.Ub()), a = a.Mh(c), a.bf("\n"), l.Fg(k, a), k.Yd(e.Ub())) : d.IC(k), e.Yd(k.Ub() + f.length - 1), l = d.Lb(e.Ub()), e.sb(l.F.length - 1), l.Cw(e, 1), d.IC(e);
      } else {
        f = [];
        for (k = 0; k < n.F.length - 1; ++k) {
          f.add(n.Xa(k));
        }
        l.Qu(e, f);
        e.sb(e.ca() + f.length - 1);
        l.pr(n.pd);
      }
    }
    e = this.ua[0].from.clone();
    for (k = 0; k < b.yc.length; k++) {
      f = b.hC(k), a = f.uj, a.Yd(a.fa + e.Ub()), a.sb(a.T.oa + e.ca()), a = f.pk, a.Yd(a.fa + e.Ub()), a.sb(a.T.oa + e.ca()), d.oJ(f);
    }
  }
}, sr:function(a, b, c) {
  if (a.vb()) {
    var d = b.Xa(a.ca());
    a.vb() === d.Bf() && (a.sb(a.ca() + 1), a.sc(0));
    a.vb() && (b.sr(a, c.Mh(null)), a.sb(a.ca() + 1), a.sc(0));
  }
}, lt:function(a, b) {
  this.ua.clear();
  var c = new of(), d = this.xh(a);
  a.vb() ? a.vb() >= d.Bf() && (a.sb(a.ca() + 1), a.sc(0)) : d.Nc() && a.Be(a.Tb() + 1);
  this.df = 0;
  c.set(a, a.clone(), b);
  this.ua.add(c);
}, notify:function() {
  if (null != this.dr) {
    for (var a = this.ua.length - 1; 0 <= a; --a) {
      var b = this.XB(this.ua[a].from);
      this.ua[a].from.Sg() !== this.ua[a].xc.Sg() && null != b.Bp() && (b = b.Bp().Bp().Bp());
      b.Rw(this.ua[a], !0);
    }
  }
}, clear:function() {
  this.notify();
  this.ua.clear();
}, rK:function(a) {
  var b = !1, c = a.from.clone(), d = a.xc.clone(), e = this.Cl(c), f = c.Ub(), k = d.Ub(), l = c.ca(), n = d.ca(), p = c.vb(), t = d.vb();
  if (f === k && l === n) {
    if (p !== t) {
      var x = e.Lb(f).Xa(l);
      x.AB(c, t - p);
    }
  } else {
    var D = e.Lb(f), G = e.Lb(k);
    p && (x = D.Xa(l), x.AB(c, x.Bf() - p), l++, c.sb(l), c.sc(0));
    t && (x = G.Xa(n), d.sc(0), x.AB(d, t), d.sc(0));
    D === G ? (c.sb(l), D.Cw(c, n - l)) : (l && (c.sb(l), D.Cw(c, D.F.length - l), f++), n && (d.sb(0), G.Cw(d, n)), c.Yd(f), e.BB(c, k - f), c = a.from.clone(), l && e.IC(c));
    c = a.from.clone();
    D = e.Lb(c.Ub());
    l = c.ca();
    p = c.vb();
    (l || p) && l < D.F.length - 1 && (d = D.Xa(l), d.jf() && (e = null, p ? l + 1 < D.F.length - 1 && (e = D.Xa(l + 1)) : l && (e = D.Xa(l - 1), c.sb(l - 1)), null != e && e.jf() && e.vc().isEqual(d.vc()) && (b = D.Xa(c.ca()).Bf(), c.sc(b), D.TL(c), c.sc(b), b = !0)));
  }
  return b ? c : a.from.clone();
}, qK:function(a) {
  var b = a.from.clone(), c = b.Sg();
  for (a = a.xc.Sg(); c < a; ++c) {
    b.Ue(c), this.Cl(b).KF(b);
  }
}, Du:function() {
  var a = this.ua[0].bgColor;
  if (1 === this.df || 3 === this.df || 2 === this.df) {
    for (var b = this.ua.length, c = 0; c < b; ++c) {
      this.qK(this.ua[c]);
    }
    b = this.ua[0].from.clone();
    this.lt(b, a);
  } else {
    this.df || (b = this.ua[0].from.clone(), c = this.ua[0].xc.clone(), this.xh(this.ua[0].xc).Nc() && (b.ca() || b.vb()) || (this.ua[0].from.isEqual(this.ua[0].xc) || (0 < b.ca() && (b.sb(b.ca() - 1), this.xh(b).pn() && (b.Yd(b.Ub() + 1), b.sb(0), b.sc(0), this.ua[0].from = b)), this.xh(c).pn() && 0 < c.Ub() && (c.Yd(c.Ub() - 1), c.sb(this.Dl(c).F.length - 1), c.sc(this.xh(c).Bf() - 1), this.ua[0].xc = c)), b = this.rK(this.ua[0]), this.lt(b, a)));
  }
}, lD:function(a, b) {
  for (var c = 0; c < this.ua.length; c++) {
    var d = this.ua[c].from.clone(), e = this.ua[c].xc.clone(), f = e.ca(), k = [];
    0 === this.df && (d.isEqual(e) ? (d = this.Cl(e).Lb(d.Ub()), f === d.F.length - 1 && (f = d.Xa(f), d = f.vc(), k.add(d), k = new Pc(b.lF(a, k)), f.setProperty(k.gm(d)))) : d.Mk(e, d.Tb()));
  }
}, Do:function(a, b) {
  for (var c = 0; c < this.ua.length; c++) {
    var d = this.ua[c].from.clone(), e = this.ua[c].xc.clone(), f = d.ca(), k = d.vb(), l = e.ca(), n = e.vb();
    if (0 === this.df) {
      if (!d.isEqual(e)) {
        if (d.Mk(e, d.Tb())) {
          var p = this.Cl(d), t = p.Lb(d.Ub());
          if (d.vb()) {
            var x = t.Xa(d.ca());
            a.gm(x.vc()).isEqual(x.vc()) || (t.sr(d, b.Mh(null)), e.ca() === d.ca() ? (e.sb(e.ca() + 1), e.sc(e.vb() - d.vb())) : e.ca() > d.ca() && e.sb(e.ca() + 1), f = d.ca() + 1, k = 0);
            d.sb(d.ca() + 1);
            d.sc(0);
          }
          e.vb() && (x = t.Xa(e.ca()), a.gm(x.vc()).isEqual(x.vc()) || t.sr(e, b.Mh(null)), e.sb(e.ca() + 1), e.sc(0));
          this.pz(t, d, e.ca(), a);
          this.ua[c].from.sb(f);
          this.ua[c].from.sc(k);
          this.ua[c].xc.sb(e.ca());
          this.ua[c].xc.sc(e.vb());
        } else {
          p = this.Cl(d);
          t = p.Lb(d.Ub());
          d.vb() && (x = t.Xa(d.ca()), a.gm(x.vc()).isEqual(x.vc()) || (t.sr(d, b.Mh(null)), f = d.ca() + 1, k = 0), d.sb(d.ca() + 1), d.sc(0));
          d.ca() && (this.pz(t, d, t.F.length, a), d.Yd(d.Ub() + 1), d.sb(0));
          t = p.Lb(e.Ub());
          e.vb() && (x = t.Xa(e.ca()), a.gm(x.vc()).isEqual(x.vc()) || (t.sr(e, b.Mh(null)), l = e.ca() + 1, n = 0), e.sb(e.ca() + 1), e.sc(0));
          x = e.Ub() - 1;
          var D = e.ca();
          D !== t.F.length - 1 ? (e.sb(0), this.pz(t, e, D, a)) : x++;
          this.OF(p, d, x, a);
          this.ua[c].from.sb(f);
          this.ua[c].from.sc(k);
          this.ua[c].xc.sb(l);
          this.ua[c].xc.sc(n);
        }
      }
    } else if (2 === this.df || 3 === this.df || 1 === this.df) {
      e = e.Sg(), this.ZF(this.xh(d), d, e, a);
    }
  }
}, ZF:function(a, b, c, d) {
  b = b.clone();
  for (var e = b.Sg(); e < c; ++e) {
    b.Ue(e);
    var f = a.Hc(e);
    this.OF(f, b, f.ie.length - 1, d);
  }
}, OF:function(a, b, c, d) {
  b = b.clone();
  for (var e = b.Ub(); e <= c; ++e) {
    var f = a.Lb(e);
    b.Yd(e);
    b.sb(0);
    this.pz(f, b, f.F.length, d);
  }
}, pz:function(a, b, c, d) {
  var e = b.ca(), f = e;
  e || c !== a.F.length - 1 || a.Xa(c).Bf() || (b.sb(c), a.nB(b, b.Tb(), 1, d), b.sb(e));
  for (; f < c; f++) {
    b.sb(f);
    var k = this.xh(b);
    if (k.Vc()) {
      if (k.uC()) {
        var l = k;
        l.Do(d.gm(l.vc()));
      }
      f - e && (b.sb(e), a.nB(b, b.Tb(), f - e, d), b.sb(f));
      e = f + 1;
      b.Be(b.Tb() + 1);
      this.ZF(k, b, k.Vc(), d);
      b.Be(b.Tb() - 1);
    }
  }
  f - e && (b.sb(e), a.nB(b, b.Tb(), f - e, d));
}, KG:function(a, b) {
  return 0 < b && (b = this.kL(a, b - 1), b.Nc() && a.Sg() >= b.Vc()) ? !0 : !1;
}, fF:function(a) {
  if (!this.KG(a, a.Tb())) {
    var b = this.xh(a);
    a.vb() && b.getParent().F.length - 1 !== a.ca() && a.vb() >= b.Bf() && (a.sb(a.ca() + 1), a.sc(0));
  }
}, Fu:function(a, b, c, d) {
  a = a.clone();
  b = b.clone();
  var e = a.Tb();
  e > b.Tb() && (e = b.Tb());
  for (c = 0; c < e && a.Da(c).isEqual(b.Da(c)); ++c) {
  }
  if (a.Td(b)) {
    var f = a;
    a = b;
    b = f;
  }
  this.fF(a);
  this.fF(b);
  if (a.isEqual(b)) {
    this.KG(a, a.Tb());
    var k = this.Dl(a);
    a.ca() === k.F.length - 1 && 1 === a.vb() && a.sc(0);
    k = this.Dl(b);
    b.ca() === k.F.length - 1 && 1 === b.vb() && b.sc(0);
  } else {
    if (a.Da(c).Ic !== b.Da(c).Ic) {
      f = a.clone();
      f.Be(c - 1);
      var l = this.xh(f);
      k = l.Nc();
    } else {
      f = a.clone(), f.Be(c), k = this.Dl(f).Nc();
    }
    if (a.Da(c).Ic !== b.Da(c).Ic) {
      f = a.clone();
      f.Be(c - 1);
      l = this.xh(f);
      var n = l.Nc();
    } else {
      f = b.clone(), f.Be(c), n = this.Dl(f).Nc();
    }
    k || (k = this.Dl(a), a.ca() === k.F.length - 1 && 1 === a.vb() && a.sc(0));
    n || (k = this.Dl(b), b.ca() === k.F.length - 1 && 1 === b.vb() && (b.Yd(b.Ub() + 1), b.sb(0), b.sc(0)));
  }
  k = new Ic(this.cr, this.dr);
  n = [];
  if (c <= e) {
    if (a.Da(c).Ic !== b.Da(c).Ic) {
      if (f = a.clone(), f.Be(c - 1), l = this.xh(f), l.Nc()) {
        f.Be(c);
        f.Ue(a.Da(c).Ic);
        e = f.clone();
        e.Ue(b.Da(c).Ic + 1);
        b.Da(c).Ic + 1 > l.Vc() && e.Ue(b.Da(c).Ic);
        var p = new of();
        p.set(f, e, d);
        n.add(p);
        k.set(1, n);
      } else {
        e = f.clone(), e.sb(e.ca() + 1), p = new of(), p.set(f, e, d), n.add(p), k.set(0, n);
      }
    } else {
      l = a.clone();
      l.Be(c);
      e = b.clone();
      e.Be(c);
      f = this.Cl(l);
      var t = !1;
      if (a.Da(c).fa !== b.Da(c).fa && f.Lb(l.Ub()).Nc() && f.Lb(e.Ub()).Nc() && a.Tb() > c && b.Tb() > c) {
        t = !0;
        for (var x = l.Ub() + 1; x <= e.Ub() - 1; ++x) {
          if (!f.Lb(x).Nc()) {
            t = !1;
            break;
          }
        }
      }
      !t && e.Tb() < b.Tb() && (e.sb(e.ca() + 1), e.sc(0));
      if (t) {
        t = this.XB(l);
        p = t.hm(l.Ub()).Iw(l.ca());
        a = p.Ks(a.Da(c + 1).Ic);
        p = t.hm(e.Ub()).Iw(e.ca());
        b = p.Ks(b.Da(c + 1).Ic);
        a > b && (f = a, a = b, b = f);
        for (x = l.Ub(); x <= e.Ub(); ++x) {
          p = t.hm(e.Ub()).Iw(e.ca());
          f = l.clone();
          f.Yd(x);
          f.sb(0);
          f.sc(0);
          var D = this.xh(f).Vc();
          f.Be(c + 1);
          var G = f.clone();
          f.Ue(p.gG(a));
          G.Ue(p.gG(b) + 1);
          G.Sg() > D && G.Ue(D);
          p = new of();
          p.set(f, G, d);
          n.add(p);
        }
        k.set(1, n);
      } else {
        p = new of(), p.set(l, e, d), n.add(p), k.set(0, n);
      }
    }
  } else {
    p = new of(), p.set(a, b, d), n.add(p), k.set(0, n);
  }
  return k;
}, kx:function(a) {
  var b = [], c = new of(), d = new Jc();
  d.Be(0);
  var e = d.clone();
  e.Yd(this.cr.ie.length - 1);
  e.sb(this.Dl(e).F.length - 1);
  e.sc(0);
  c.set(d, e, a);
  b.add(c);
  a = new Ic(this.cr, this.dr);
  a.set(0, b);
  return a;
}, yz:function(a, b, c, d, e) {
  b = b.clone();
  c = c.clone();
  a ? 2 === a || 3 === a || 1 === a ? (b = this.Fu(b, c, d, e), b.ua.length && (this.df = a, this.ua = b.ua)) : 4 === a && (d = new of(), d.set(b, c, e), this.df = a, this.ua.add(d)) : (b = this.Fu(b, c, d, e), b.ua.length && (this.df = a, this.ua = b.ua));
}, rC:function(a) {
  for (var b = !1, c = 0; c < this.ua.length; ++c) {
    for (var d = 0; d < a.ua.length; ++d) {
      this.ua[c].rC(a.ua[d], a.df) && (b = !0);
    }
  }
  return b;
}, vc:function() {
  var a = this.ua.length;
  if (0 >= a) {
    return null;
  }
  for (var b = null, c = 0; c < a; c++) {
    var d = this.ua[c].from.clone(), e = this.ua[c].xc.clone();
    if (0 === this.df) {
      var f = this.Cl(d), k = d.Ub(), l = e.Ub(), n = e.ca(), p = f.Lb(k);
      b = this.Jk(p, d, b, p.F.length);
      d.Yd(k + 1);
      d.sb(0);
      d.sc(0);
      b = this.iG(f, d, b, l);
      p = f.Lb(l);
      b = this.Jk(p, e, b, n);
    } else if (1 === this.df || 3 === this.df || 2 === this.df) {
      e = e.Sg(), b = this.ZB(this.xh(d), d, b, e);
    }
  }
  return b;
}, ZB:function(a, b, c, d) {
  b = b.clone();
  for (var e = b.Sg(); e <= d; e++) {
    var f = a.Hc(e);
    c = this.iG(f, b, c, f.ie.length - 1);
  }
  return c;
}, iG:function(a, b, c, d) {
  b = b.clone();
  for (var e = b.Ub(); e <= d; e++) {
    var f = a.Lb(e);
    f.Nc() ? (f = f.Xa(0), b.Ue(b.Sg() + 1), c = this.ZB(f, b, c, f.Vc() - 1), b.Ue(b.Sg() - 1)) : c = this.Jk(f, b, c, f.F.length - 1);
  }
  return c;
}, Jk:function(a, b, c, d) {
  b = b.clone();
  for (var e = b.ca(); e < d; e++) {
    var f = a.Xa(e);
    if (f.jf()) {
      f = f.vc(), c = this.mJ(c, f);
    } else {
      var k = f.Vc();
      b.Ue(b.Sg() + 1);
      c = this.ZB(f, b, c, k - 1);
      b.Ue(b.Sg() - 1);
    }
  }
  return c;
}, mJ:function(a, b) {
  null != b && (a = null == a ? b.hi() : a.az(b));
  return a;
}, deleteRow:function() {
}, insertRow:function() {
}, hr:function(a, b) {
  for (var c = a.Tb(), d = 0; d < this.ua.length; ++d) {
    var e = this.ua[d].from;
    e.Td(a) && e.Yq(a, c - 1) && (e.Da(c - 1).fa += b);
    e = this.ua[d].xc;
    e.Td(a) && e.Yq(a, c - 1) && (e.Da(c - 1).fa += b);
  }
}, gr:function(a, b) {
  var c = a.clone();
  c.Qd().fa += b;
  for (var d = a.Tb(), e = 0; e < this.ua.length; ++e) {
    var f = this.ua[e].from;
    f.Td(a) && f.yj(c) ? this.ua[e].from = a.clone() : f.Td(c) && f.Yq(a, d - 1) && (f.Da(d - 1).fa -= b);
    f = this.ua[e].xc;
    f.Td(a) && f.yj(c) ? this.ua[e].from = a.clone() : f.Td(c) && f.Yq(a, d - 1) && (f.Da(d - 1).fa -= b);
  }
}, fr:function(a) {
  for (var b = a.Tb(), c = 0; c < this.ua.length; ++c) {
    var d = this.ua[c].from;
    d.Td(a) && (d.Mk(a, b - 1) ? (d.Da(b - 1).fa += 1, d.Da(b - 1).T.oa -= a.Da(b - 1).T.oa) : d.Yq(a, b - 1) && (d.Da(b - 1).fa += 1));
    d = this.ua[c].xc;
    d.Td(a) && (d.Mk(a, b - 1) ? (d.Da(b - 1).fa += 1, d.Da(b - 1).T.oa -= a.Da(b - 1).T.oa) : d.Yq(a, b - 1) && (d.Da(b - 1).fa += 1));
  }
}, er:function(a) {
  var b = a.clone(), c = b.Qd();
  c.fa += 1;
  c.T.oa = 0;
  c = a.Tb();
  for (var d = 0; d < this.ua.length; ++d) {
    var e = this.ua[d].from;
    e.Ti(b) && (e.Mk(a, c - 1) ? (--e.Da(c - 1).fa, e.Da(c - 1).T.oa += a.Da(c - 1).T.oa) : e.Yq(a, c - 1) && --e.Da(c - 1).fa);
    e = this.ua[d].xc;
    e.Ti(b) && (e.Mk(a, c - 1) ? (--e.Da(c - 1).fa, e.Da(c - 1).T.oa += a.Da(c - 1).T.oa) : e.Yq(a, c - 1) && --e.Da(c - 1).fa);
  }
}, xp:function(a, b) {
  for (var c = a.Tb(), d = 0; d < this.ua.length; ++d) {
    var e = this.ua[d].from;
    e.Td(a) && e.Mk(a, c - 1) && (e.Da(c - 1).T.oa += b);
    e = this.ua[d].xc;
    e.Td(a) && e.Mk(a, c - 1) && (e.Da(c - 1).T.oa += b);
  }
}, wp:function(a, b) {
  var c = a.clone();
  c.Qd().T.oa += b;
  for (var d = a.Tb(), e = 0; e < this.ua.length; ++e) {
    var f = this.ua[e].from;
    f.Td(a) && f.yj(c) ? this.ua[e].from = a.clone() : f.Td(c) && f.Mk(a, d - 1) && (f.Da(d - 1).T.oa -= b);
    f = this.ua[e].xc;
    f.Td(a) && f.yj(c) ? this.ua[e].from = a.clone() : f.Td(c) && f.Mk(a, d - 1) && (f.Da(d - 1).T.oa -= b);
  }
}, Oq:function(a) {
  var b = a.clone(), c = b.Qd();
  c.T.oa += 1;
  c.T.Ab = 0;
  c = a.Tb();
  for (var d = 0; d < this.ua.length; ++d) {
    var e = this.ua[d].from;
    e.Ti(b) && (e.Ru(a, c - 1) ? (--e.Da(c - 1).T.oa, e.Da(c - 1).T.Ab += a.Da(c - 1).T.Ab) : e.Mk(a, c - 1) && --e.Da(c - 1).T.oa);
    e = this.ua[d].xc;
    e.Ti(b) && (e.Ru(a, c - 1) ? (--e.Da(c - 1).T.oa, e.Da(c - 1).T.Ab += a.Da(c - 1).T.Ab) : e.Mk(a, c - 1) && --e.Da(c - 1).T.oa);
  }
}, Pq:function(a) {
  for (var b = a.Tb(), c = 0; c < this.ua.length; ++c) {
    var d = this.ua[c].from;
    d.Ti(a) && (d.Ru(a, b - 1) ? (d.Da(b - 1).T.oa += 1, d.Da(b - 1).T.Ab -= a.Da(b - 1).T.Ab) : d.Mk(a, b - 1) && (d.Da(b - 1).T.oa += 1));
    d = this.ua[c].xc;
    d.Ti(a) && (d.Ru(a, b - 1) ? (d.Da(b - 1).T.oa += 1, d.Da(b - 1).T.Ab -= a.Da(b - 1).T.Ab) : d.Mk(a, b - 1) && (d.Da(b - 1).T.oa += 1));
  }
}, sw:function(a, b) {
  var c = a.clone();
  c.Qd().T.Ab += b;
  for (var d = a.Tb(), e = 0; e < this.ua.length; ++e) {
    var f = this.ua[e].from;
    f.Td(a) && f.yj(c) ? this.ua[e].from = a.clone() : f.Td(c) && f.Ru(a, d - 1) && (f.Da(d - 1).T.Ab -= b);
    f = this.ua[e].xc;
    f.Td(a) && f.yj(c) ? this.ua[e].from = a.clone() : f.Td(c) && f.Ru(a, d - 1) && (f.Da(d - 1).T.Ab -= b);
  }
}};
qf = function() {
  Dg(qf, this);
  this.xf = [];
  this.HA = this.GA = this.fp = 0;
};
qf.prototype = {xf:null, fp:0, GA:0, HA:0, Iy:function(a) {
  this.xf = [];
  this.xf.add(new wf(a, 0));
}, xa:function() {
  return this.qb() + this.td();
}, fn:function() {
  for (var a = 0, b = 0; b < this.xf.length; ++b) {
    a += this.xf[b].ka();
  }
  return a + 2;
}, gt:function(a) {
  this.GA = a;
}, it:function(a) {
  this.HA = a;
}, qb:function() {
  for (var a = this.GA, b = 0; b < this.xf.length; ++b) {
    var c = this.xf[b].qb();
    c > a && (a = c);
  }
  return a;
}, td:function() {
  for (var a = this.HA, b = 0; b < this.xf.length; ++b) {
    var c = this.xf[b].td();
    c > a && (a = c);
  }
  return a;
}, split:function(a, b) {
  a = new mb(0, a + this.fp, parseInt(this.ka()), this.xa());
  var c = a.fg(), d = 0;
  this.xf.clear();
  for (var e = b.length, f = 0; f < e; f++) {
    var k = b[f];
    if (a.xC(k)) {
      if (c < a.Qh().Mf()) {
        c >= k.fg() && c >= k.Qh().Mf() || (c >= k.fg() && c <= k.Qh().Mf() || this.xf.add(new wf(k.fg() - c, d)), d += k.Qh().Mf() - c, c = k.Qh().Mf());
      } else {
        return;
      }
    }
  }
  c < a.Qh().Mf() && this.xf.add(new wf(a.Qh().Mf() - c, d));
}, hn:function(a) {
  return this.xf[a];
}, Pl:function(a, b) {
  this.xf.length && this.xf[0].NH(a, b);
  qf.$n.prototype.Pl.call(this, a, b);
}, ca:function() {
  return this.xf[0].ca();
}, vb:function() {
  return this.xf[0].vb();
}, MH:function(a) {
  this.fp = a;
}, yC:function() {
  return !1;
}, eF:function(a) {
  this.fp += a;
}};
wf = function(a, b) {
  this.Yv = new jf();
  this.Qm = this.fo = 0;
  this.NA = a;
  this.YE = b;
};
wf.prototype = {Yv:null, fo:0, Qm:0, NA:0, Vv:0, YE:0, qb:function() {
  return this.fo;
}, td:function() {
  return this.Qm;
}, xa:function() {
  return this.fo + this.Qm;
}, dj:function(a) {
  this.Vv = a;
}, ka:function() {
  return this.Vv;
}, ca:function() {
  return this.Yv.ca();
}, vb:function() {
  return this.Yv.vb();
}, NH:function(a, b) {
  this.Yv.set(a, b);
}, ud:function() {
  return this.Yv;
}, gt:function(a) {
  this.fo = a;
}, it:function(a) {
  this.Qm = a;
}, Ks:function() {
  return this.YE;
}, gb:function() {
}};
nf = function() {
  this.Wh = this.ni = this.fz = this.fa = 0;
  this.vh = this.th = this.Ii = this.Ck = !1;
  this.ce = !0;
};
nf.prototype = {fa:0, fz:0, ni:0, Ck:!1, Ii:!1, th:!1, vh:!1, ce:!1, Sm:null, Wh:0, hf:function() {
  null == this.Sm && (this.Sm = new Lc());
  return this.Sm;
}, cc:function() {
  this.vh = this.th = this.Ii = this.Ck = !1;
}, pi:function() {
  this.Ck = !0;
}, zh:function() {
  return this.Ck;
}, Wy:function() {
  this.vh = this.th = this.Ii = !1;
}, Rq:function() {
  this.Ii = !0;
}, Bl:function() {
  return this.Ii;
}, mo:function() {
  this.th = !1;
}, vl:function() {
  this.th = !0;
}, Fk:function() {
  return this.th;
}, Ao:function() {
  this.vh = !1;
}, lk:function() {
  this.vh = !0;
}, Xk:function() {
  return this.vh;
}, xa:function() {
  return this.ni;
}, qb:function() {
  return 0;
}, td:function() {
  return 0;
}, set:function(a, b, c) {
  this.fa = a;
  this.fz = b;
  this.Wh = c;
}, ka:function() {
  return this.Wh;
}, mi:function() {
  return this.fz;
}, En:function() {
  this.ce = !0;
}, Nk:function() {
  return this.ce;
}, ws:function() {
  this.ce = !1;
}, Wg:function(a) {
  this.ni = a;
}, gb:function() {
  if (null != this.Sm) {
    var a = this.Sm.K(), b = a.parentNode;
    null != b && b.removeChild(a);
  }
}};
of = function() {
  this.from = new Jc();
  this.xc = new Jc();
  this.bgColor = new xb(255, 255, 255, -1);
};
of.prototype = {from:null, xc:null, bgColor:null, clone:function() {
  var a = new of();
  a.set(this.from.clone(), this.xc.clone(), this.bgColor.clone());
  return a;
}, set:function(a, b, c) {
  this.from = a;
  this.xc = b;
  this.bgColor = c;
}, rC:function(a) {
  var b = this.from, c = this.xc;
  b.Td(c) && (c = b, b = this.xc);
  var d = a.from;
  a = a.xc;
  d.Td(a) && (a = d, d = this.xc);
  if (b.Td(a)) {
    if (b.Tb() !== a.Tb()) {
      var e = b.Tb() < a.Tb() ? b.Tb() : a.Tb();
      if (b.Da(e).isEqual(a.Da(e))) {
        return !0;
      }
    } else if (b.Tb() === a.Tb() && b.Qd().Ic === a.Qd().Ic) {
      return !0;
    }
    return !1;
  }
  return d.Td(c) ? d.Tb() !== c.Tb() && (e = d.Tb() < c.Tb() ? d.Tb() : c.Tb(), d.Da(e).isEqual(c.Da(e))) ? !0 : !1 : !0;
}};
Kd = function() {
  this.fa = this.Ic = this.Os = 0;
  this.T = new jf();
};
Kd.prototype = {Os:0, Ic:0, fa:0, T:null, clone:function() {
  var a = new Kd();
  a.set(this.Os, this.Ic, this.fa, this.T.ca(), this.T.vb());
  return a;
}, set:function(a, b, c, d, e) {
  this.Ic = b;
  this.fa = c;
  this.T.set(d, e);
}, Td:function(a) {
  var b = this.T.ca(), c = this.T.vb();
  return this.Ic > a.Ic || this.Ic === a.Ic && (this.fa > a.fa || this.fa === a.fa && (b > a.T.ca() || b === a.T.ca() && c > a.T.vb()));
}, qn:function(a) {
  var b = this.T.ca(), c = this.T.vb();
  return this.Ic < a.Ic || this.Ic === a.Ic && (this.fa < a.fa || this.fa === a.fa && (b < a.T.ca() || b === a.T.ca() && c < a.T.vb()));
}, Ti:function(a) {
  var b = this.T.ca(), c = this.T.vb();
  return this.Ic > a.Ic || this.Ic === a.Ic && (this.fa > a.fa || this.fa === a.fa && (b > a.T.ca() || b === a.T.ca() && c >= a.T.vb()));
}, yj:function(a) {
  var b = this.T.ca(), c = this.T.vb();
  return this.Ic < a.Ic || this.Ic === a.Ic && (this.fa < a.fa || this.fa === a.fa && (b < a.T.ca() || b === a.T.ca() && c <= a.T.vb()));
}, isEqual:function(a) {
  return (-1 === this.Ic || -1 === a.Ic || this.Ic === a.Ic) && (-1 === this.fa || -1 === a.fa || this.fa === a.fa) && this.T.isEqual(a.T);
}, ud:function() {
  return this.T;
}, Ue:function(a) {
  this.Ic = a;
}, Yd:function(a) {
  this.fa = a;
}, sc:function(a) {
  this.T.FH(a);
}, sb:function(a) {
  this.T.xz(a);
}};
xd = function() {
  Dg(xd, this);
  this.ku = [];
  this.Vm = [];
  this.yb = [];
};
xd.prototype = {ku:null, yb:null, Vm:null, clone:function(a) {
  for (var b = a.My(), c = [], d = [], e = 0; e < this.ku.length; e++) {
    c.add(this.ku[e]);
  }
  for (e = 0; e < this.Vm.length; e++) {
    d.add(this.Vm[e].clone(a)), d[e].Wc(b);
  }
  b.yD(c, d);
  return b;
}, Qi:function() {
  return 1;
}, Nc:function() {
  return !0;
}, Hw:function(a) {
  return this.ku[a];
}, Tf:function(a) {
  this.yb.contains(zg.gd(a, cf)) || this.yb.add(zg.gd(a, cf));
}, wg:function(a) {
  this.yb.contains(zg.gd(a, cf)) && this.yb.remove(zg.gd(a, cf));
}, Vc:function() {
  return this.Vm.length;
}, Hc:function(a) {
  return this.Vm[a];
}, yD:function(a, b) {
  this.ku.clear();
  this.Vm.clear();
  for (var c = 0; c < a.length; c++) {
    this.ku.add(a[c]);
  }
  for (c = 0; c < b.length; c++) {
    this.Vm.add(b[c]), this.Vm[c].Wc(this);
  }
}};
vf = function() {
  this.Yp = "";
  this.rect = null;
};
vf.prototype = {Yp:null, rect:null};
rd = function(a) {
  Dg(rd, this);
  this.jg = "";
  this.pd = a;
  this.Yp = "";
};
rd.prototype = {jg:null, pd:null, Yp:null, bB:!1, clone:function(a) {
  a = a.Mh(this.pd);
  this.bB && a.gL();
  a.bf(this.jg);
  return a;
}, Qi:function() {
  return 0;
}, jf:function() {
  return !0;
}, AB:function(a, b) {
  this.jg = this.jg.remove(a.vb(), b);
  null != this.parent && this.parent.tw(a, b);
}, Wu:function(a) {
  this.jg += a.jg;
  a.jg.remove(0, a.jg.length);
}, split:function(a, b) {
  b.jg = this.jg.substr(a.vb());
  this.jg = this.jg.remove(a.vb());
}, jz:function() {
  return "\n" === this.Gw(0) ? !0 : !1;
}, Bf:function() {
  return this.jg.length;
}, VB:function() {
  return this.Bf();
}, Gw:function(a) {
  return this.jg.charAt(a);
}, gL:function() {
  this.bB = !0;
}, vc:function() {
  return this.pd;
}, AC:function(a) {
  return this.Gw(a).toString() === String.fromCharCode(160) || "\n" === this.Gw(a).toString() ? !0 : !1;
}, wC:function(a) {
  if (eb.Dp() === qa.FG || eb.Dp() === qa.GG || eb.Dp() === qa.EG) {
    if (5 > eb.AG() && "-" === this.Gw(a).toString()) {
      return !0;
    }
  } else if (eb.Vq() === pa.SB && "-" === this.Gw(a).toString()) {
    return !0;
  }
  return !1;
}, Ku:function(a, b) {
  return this.jg.substring(a, b);
}, jn:function() {
  return this.pd.jn();
}, qb:function() {
  return this.pd.qb();
}, td:function() {
  return this.pd.td();
}, setProperty:function(a) {
  this.bB || null == a || (this.pd = a);
}, HG:function(a) {
  this.Yp = a;
}, bf:function(a) {
  this.jg = a;
}};
Pc = function(a) {
  this.cF = a;
};
Pc.prototype = {cF:null, gm:function(a) {
  return this.cF[a.Ak.toString()];
}};
Tc = function(a, b) {
  this.parent = a;
  this.ie = [];
  this.P = [];
  this.yc = [];
  null != b && (this.ie.add(b), b.Wc(this));
  this.Tu = !1;
};
Tc.prototype = {parent:null, ie:null, P:null, yc:null, pd:null, Tu:!1, clone:function(a) {
  var b = a.CF();
  b.Wc(this.parent);
  b.iD(this.Tu);
  for (var c = 0; c < this.ie.length; c++) {
    var d = this.ie[c].clone(a);
    d.Wc(b);
    b.ie.add(d);
  }
  null != this.pd && (b.pd = this.pd.clone());
  return b;
}, iD:function(a) {
  this.Tu = a;
}, getParent:function() {
  return this.parent;
}, Wc:function(a) {
  this.parent = a;
}, Lb:function(a) {
  return this.ie[a];
}, nn:function(a, b) {
  var c = [];
  c.add(b);
  this.qC(a, c);
}, qC:function(a, b) {
  for (var c = a.Ub(), d = 0; d < b.length; ++d) {
    b[d].Wc(this), this.ie.Lk(c + d, b[d]);
  }
  c = this.Ph();
  var e = this.P.length;
  for (d = 0; d < e; ++d) {
    this.P[d].hr(a, a.Tb(), b);
  }
  null != c && c.mK(a, b.length);
  this.hr(a, b.length);
}, KF:function(a) {
  var b = this.ie.length - 1;
  0 < b && this.BB(a, b);
  this.Lb(0).zB(a);
}, BB:function(a, b) {
  var c = a.Ub(), d = this.ie.length - 1;
  c + b > d && (b = c - d);
  if (!(0 >= b)) {
    this.ie.removeRange(c, b);
    c = this.Ph();
    d = this.P.length;
    for (var e = 0; e < d; ++e) {
      this.P[e].gr(a, a.Tb(), b);
    }
    null != c && c.lK(a, b);
    this.gr(a, b);
  }
}, HD:function(a, b) {
  var c = a.Ub(), d = this.ie[c];
  b.Wc(this);
  this.ie.Lk(c + 1, b);
  d.split(a.ca(), b);
  c = d.pd.clone();
  c.ht(0);
  b.pr(c);
  b = this.Ph();
  c = this.P.length;
  for (d = 0; d < c; ++d) {
    this.P[d].fr(a, a.Tb());
  }
  null != b && b.kK(a);
  this.fr(a);
}, IC:function(a) {
  var b = a.Ub();
  this.ie[b].Wu(this.ie[b + 1]);
  this.ie.Ej(b + 1);
  b = this.Ph();
  for (var c = this.P.length, d = 0; d < c; ++d) {
    this.P[d].er(a, a.Tb());
  }
  null != b && b.jK(a);
  this.er(a);
}, Tf:function(a) {
  this.P.contains(a) || this.P.add(a);
}, wg:function(a) {
  this.P.contains(a) && this.P.remove(a);
}, Ph:function() {
  return null != this.parent ? this.parent.Ph() : null;
}, hu:function(a) {
  a.Wc(this);
  this.ie.add(a);
}, lG:function(a, b, c, d) {
  for (var e = this.ie.length, f = 0; f < e; f++) {
    var k = this.Lb(f), l = k.F.length;
    d.Yd(f);
    for (var n = 0; n < l; n++) {
      var p = k.Xa(n);
      d.sb(n);
      p.Qi() === a && (b.add(p), c.add(d.clone()));
      if (p.Vc()) {
        d.Be(d.Tb() + 1);
        for (var t = 0; t < p.Vc(); ++t) {
          d.Ue(t), p.Hc(t).lG(a, b, c, d);
        }
        d.Be(d.Tb() - 1);
      }
    }
  }
}, gI:function(a, b, c, d) {
  var e = a.fa, f = a.ud().ca(), k = a.ud().vb();
  if (e === b.fa && !k && 0 < f && f - 1 === b.ud().ca()) {
    var l = this.Lb(a.fa).Xa(a.ud().oa - 1);
    l.jf() && l.Bf() === b.ud().vb() && (f--, k = b.ud().vb());
  }
  if (e > b.fa || e === b.fa) {
    if (f > b.T.oa || f === b.T.oa && (k > b.T.Ab || d && b.T.Ab === k)) {
      a.fa += c;
    }
  }
}, fI:function(a, b, c) {
  a.fa >= b.fa + c ? a.fa -= c : a.fa >= b.fa && (a.fa = b.fa, a.T.oa = 0, a.T.Ab = 0);
}, iI:function(a, b, c) {
  if (a.fa > b.fa) {
    a.fa += 1;
  } else if (a.fa === b.fa) {
    var d = a.fa, e = a.ud().ca(), f = a.ud().vb();
    f && c && (d = this.Lb(d).Xa(e), d.jf() && d.Bf() === f && (e++, f = 0, a.sb(e), a.sc(f)));
    if (e > b.T.oa || e === b.T.oa && (f > b.T.Ab || c && b.T.Ab === f)) {
      a.fa += 1, a.T.oa -= b.T.oa;
    }
  }
}, hI:function(a, b) {
  a.fa > b.fa + 1 ? --a.fa : a.fa === b.fa + 1 && (--a.fa, a.T.oa += b.T.oa, b.T.Ab && (a.T.oa += 1));
}, hr:function(a, b) {
  a = a.Qd().clone();
  for (var c = 0; c < this.yc.length;) {
    var d = this.yc[c].uj, e = this.yc[c].pk;
    d.isEqual(e) ? this.yc.Ej(c) : (this.gI(d, a, b, !0), this.gI(e, a, b, !1), c++);
  }
}, gr:function(a, b) {
  a = a.Qd();
  for (var c = 0; c < this.yc.length;) {
    var d = this.yc[c].uj, e = this.yc[c].pk;
    d.isEqual(e) ? this.yc.Ej(c) : (this.fI(d, a, b), this.fI(e, a, b), c++);
  }
}, fr:function(a) {
  a = a.Qd();
  for (var b = 0; b < this.yc.length;) {
    var c = this.yc[b].uj, d = this.yc[b].pk;
    c.isEqual(d) ? this.yc.Ej(b) : (this.iI(c, a, !0), this.iI(d, a, !1), b++);
  }
}, er:function(a) {
  a = a.Qd();
  for (var b = 0; b < this.yc.length;) {
    var c = this.yc[b].uj, d = this.yc[b].pk;
    c.isEqual(d) ? this.yc.Ej(b) : (this.hI(c, a), this.hI(d, a), b++);
  }
}, cI:function(a, b, c, d) {
  if (a.fa === b.fa) {
    var e = a.ud().ca(), f = a.ud().vb();
    if (!f && 0 < e && e - 1 === b.ud().ca() && !d) {
      var k = this.Lb(a.fa).Xa(a.ud().oa - 1);
      k.jf() && k.Bf() === b.ud().vb() && (e--, f = b.ud().vb(), a.sb(e), a.sc(f));
    }
    if (e > b.T.oa || e === b.T.oa && (f > b.T.Ab || d && b.T.Ab === f)) {
      a.T.oa += c;
    }
  }
}, bI:function(a, b, c) {
  a.fa === b.fa && (a.T.oa >= b.T.oa + c ? a.T.oa -= c : a.T.oa >= b.T.oa && (a.T.oa = b.T.oa, a.T.Ab = 0));
}, eI:function(a, b, c) {
  if (a.fa === b.fa) {
    var d = a.ud().ca(), e = a.ud().vb();
    d > b.T.oa ? a.T.oa += 1 : d === b.T.oa && (e > b.T.Ab || e === b.T.Ab && c) && (a.T.oa += 1, a.T.Ab -= b.T.Ab);
  }
}, dI:function(a, b) {
  a.fa === b.fa && (a.T.oa > b.T.oa + 1 ? --a.T.oa : a.T.oa === b.T.oa + 1 && (--a.T.oa, a.T.Ab += b.T.Ab));
}, xp:function(a, b) {
  a = a.Qd();
  for (var c = 0; c < this.yc.length;) {
    var d = this.yc[c].uj, e = this.yc[c].pk;
    d.isEqual(e) ? this.yc.Ej(c) : (this.cI(d, a, b, !0), this.cI(e, a, b, !1), c++);
  }
}, wp:function(a, b) {
  a = a.Qd();
  for (var c = 0; c < this.yc.length;) {
    var d = this.yc[c].uj, e = this.yc[c].pk;
    d.isEqual(e) ? this.yc.Ej(c) : (this.bI(d, a, b), this.bI(e, a, b), c++);
  }
}, Oq:function(a) {
  a = a.Qd();
  for (var b = 0; b < this.yc.length;) {
    var c = this.yc[b].uj, d = this.yc[b].pk;
    c.isEqual(d) ? this.yc.Ej(b) : (this.dI(c, a), this.dI(d, a), b++);
  }
}, Pq:function(a) {
  a = a.Qd();
  for (var b = 0; b < this.yc.length;) {
    var c = this.yc[b].uj, d = this.yc[b].pk;
    c.isEqual(d) ? this.yc.Ej(b) : (this.eI(c, a, !0), this.eI(d, a, !1), b++);
  }
}, aI:function(a, b, c) {
  a.fa === b.fa && a.T.oa === b.T.oa && a.T.Ab > b.T.Ab && (a.T.Ab = a.T.Ab > b.T.Ab + c ? a.T.Ab - c : b.T.Ab);
}, sw:function(a, b) {
  a = a.Qd();
  for (var c = 0; c < this.yc.length;) {
    var d = this.yc[c].uj, e = this.yc[c].pk;
    d.isEqual(e) ? this.yc.Ej(c) : (this.aI(d, a, b), this.aI(e, a, b), c++);
  }
}, kF:function(a, b) {
  for (var c = 0; c < this.yc.length; ++c) {
    var d = new of();
    d.bgColor = this.yc[c].color;
    d.from = a.clone();
    d.xc = a.clone();
    var e = this.yc[c].uj;
    d.from.Yd(e.fa);
    d.from.sb(e.ud().ca());
    d.from.sc(e.ud().vb());
    e = this.yc[c].pk;
    d.xc.Yd(e.fa);
    d.xc.sb(e.ud().ca());
    d.xc.sc(e.ud().vb());
    b.add(d);
  }
}, hF:function(a, b) {
  for (var c = this.ie.length, d = 0; d < c; d++) {
    var e = this.Lb(d), f = e.F.length;
    a.Yd(d);
    for (var k = 0; k < f; k++) {
      var l = e.Xa(k);
      a.sb(k);
      if (l.Vc()) {
        a.Be(a.Tb() + 1);
        for (var n = 0; n < l.Vc(); ++n) {
          a.Ue(n), l.Hc(n).kF(a, b), l.Hc(n).hF(a, b);
        }
        a.Be(a.Tb() - 1);
      }
    }
  }
}, zD:function(a) {
  this.yc = a;
}, hC:function(a) {
  return this.yc[a];
}, TH:function() {
  for (var a = 0; a < this.yc.length; a++) {
    for (var b = this.yc[a], c = a + 1; c < this.yc.length; c++) {
      b.uj.Td(this.yc[c].uj) && (this.yc[a] = this.yc[c], this.yc[c] = b, b = this.yc[a]);
    }
  }
}, oJ:function(a) {
  this.yc.add(a);
}, Eo:function(a, b) {
  var c = [], d = new Jc();
  d.Be(0);
  this.lG(0, c, [], d);
  for (d = 0; d < c.length; d++) {
    var e = c[d].vc().hi();
    e.cj(b);
    e = a.zf(e);
    c[d].setProperty(a.He(e));
  }
}, Bf:function() {
  for (var a = 0, b = 0; b < this.ie.length; b++) {
    a += this.ie[b].Bf();
  }
  return a;
}};
Vc = function(a) {
  this.parent = null;
  this.F = [];
  this.yb = [];
  null != a && (this.F.add(a), a.Wc(this));
  this.pd = new lf();
  this.pd.Bo(0);
};
Vc.prototype = {parent:null, F:null, yb:null, xq:null, pd:null, clone:function(a) {
  var b = a.yw();
  b.pr(this.pd.clone());
  for (var c = 0; c < this.F.length; c++) {
    var d = this.F[c].clone(a);
    d.Wc(b);
    b.F.add(d);
  }
  return b;
}, getParent:function() {
  return this.parent;
}, Ph:function() {
  return null != this.parent ? this.parent.Ph() : null;
}, gC:function() {
  return null != this.parent ? this.parent : null;
}, Xa:function(a) {
  return this.F[a];
}, jC:function() {
  return !!this.F[this.F.length - 1].Bf();
}, kG:function(a) {
  return this.F.indexOf(a);
}, Tf:function(a) {
  this.yb.contains(a) || this.yb.add(a);
}, wg:function(a) {
  this.yb.contains(a) && this.yb.remove(a);
}, Nc:function() {
  return this.F.length ? this.F[0].Nc() : !1;
}, gu:function(a, b) {
  if (null != this.xq && this.xq.length) {
    null == a && (a = []);
    for (var c = 0; c < this.xq.length; ++c) {
      if (0 < this.xq[c].rect.Tg() + b) {
        var d = new mb(this.xq[c].rect.fg(), this.xq[c].rect.Tg() + b, this.xq[c].rect.Kk(), this.xq[c].rect.km());
        a.add(d);
      }
    }
  }
  return a;
}, Qu:function(a, b) {
  var c = a.ca(), d = 1 === b.length && b[0].jf() && "\n" === b[0].jg;
  if (!(c > this.F.length - 1) || d) {
    for (d = 0; d < b.length; ++d) {
      b[d].Wc(this), this.F.Lk(c + d, b[d]);
    }
    c = this.Ph();
    var e = this.yb.length;
    for (d = 0; d < e; ++d) {
      this.yb[d].xp(a, a.Tb(), b);
    }
    null != c && c.iK(a, b.length);
    null != this.parent && this.parent.xp(a, b.length);
  }
}, Fg:function(a, b) {
  var c = [];
  c.add(b);
  this.Qu(a, c);
}, Wc:function(a) {
  this.parent = a;
}, zB:function(a) {
  a.clone();
  this.Cw(a, this.F.length - 1);
}, Cw:function(a, b) {
  var c = a.ca(), d = this.F.length;
  c + b > d && (b = d);
  if (!(0 >= b)) {
    this.F.removeRange(c, b);
    c = this.Ph();
    d = this.yb.length;
    for (var e = 0; e < d; ++e) {
      this.yb[e].wp(a, a.Tb(), b);
    }
    null != c && c.hK(a, b);
    null != this.parent && this.parent.wp(a, b);
  }
}, TL:function(a) {
  var b = a.ca();
  this.F[b].Wu(this.F[b + 1]);
  this.F.Ej(b + 1);
  b = this.Ph();
  for (var c = this.yb.length, d = 0; d < c; ++d) {
    this.yb[d].Oq(a, a.Tb());
  }
  null != b && b.fK(a);
  null != this.parent && this.parent.Oq(a);
}, sr:function(a, b) {
  var c = a.ca(), d = this.F[c];
  d.split(a, b);
  b.setProperty(d.vc());
  this.F.Lk(c + 1, b);
  b.Wc(this);
  b = this.Ph();
  c = this.yb.length;
  for (d = 0; d < c; ++d) {
    this.yb[d].Pq(a, a.Tb());
  }
  null != b && b.gK(a);
  null != this.parent && this.parent.Pq(a);
}, pr:function(a) {
  this.pd.Ts(a);
}, nB:function(a, b, c, d) {
  for (var e = a.ca(), f = e + c; e < f; e++) {
    var k = this.Xa(e);
    k.jf() && k.setProperty(d.gm(k.vc()));
  }
  d = this.yb.length;
  for (e = 0; e < d; ++e) {
    this.yb[e].$F(a, b, c);
  }
}, Wu:function(a) {
  var b = a.F.length;
  1 > this.F.length && this.pd.Ts(a.pd);
  for (var c = 0; c < b; ++c) {
    a.F[c].Wc(this), this.F.add(a.F[c]);
  }
  a.F.removeRange(0, b);
}, split:function(a, b) {
  b.F = this.F.QB(a, this.F.length - a);
  for (var c = b.F.length, d = 0; d < c; ++d) {
    b.F[d].Wc(b);
  }
  this.F.removeRange(a, this.F.length - a);
}, tw:function(a, b) {
  for (var c = this.yb.length, d = 0; d < c; ++d) {
    this.yb[d].tw(a, a.Tb(), b);
  }
  c = this.Ph();
  null != c && c.eK(a, b);
  null != this.parent && this.parent.sw(a, b);
}, tJ:function(a) {
  a.Wc(this);
  this.F.Lk(this.F.length - 1, a);
}, HL:function() {
  return this.PL() && this.getParent().Tu ? !0 : !1;
}, PL:function() {
  return null == this.getParent().getParent();
}, Jk:function() {
  for (var a = 0; a < this.F.length; a++) {
    if (this.F[a].jf()) {
      return this.F[a].vc();
    }
  }
  return null;
}, Bf:function() {
  for (var a = 0, b = 0; b < this.F.length; b++) {
    a += this.F[b].VB();
  }
  return a;
}};
xf = function() {
  this.parent = null;
};
xf.prototype = {parent:null, Hc:function() {
  return null;
}, Qi:function() {
  return 0;
}, getParent:function() {
  return this.parent;
}, Wc:function(a) {
  this.parent = a;
}, Ph:function() {
  return null != this.parent ? this.parent.Ph() : null;
}, gC:function() {
  return null != this.parent ? this.parent.gC() : null;
}, zC:function() {
  return !1;
}, Nc:function() {
  return !1;
}, jf:function() {
  return !1;
}, jz:function() {
  return !1;
}, pn:function() {
  return !1;
}, uC:function() {
  return !1;
}, ka:function() {
  return 0;
}, Bf:function() {
  return 0;
}, VB:function() {
  return 1;
}, vc:function() {
  return null;
}, Vc:function() {
  return 0;
}, clone:function() {
  return null;
}};
tc.aa("WordControl.AnchorObject");
uc.aa("WordControl.Application");
xf.aa("WordControl.Element");
vc.aa("WordControl.BlankDocument", xf);
Ac.aa("WordControl.CharProperties");
Cc.aa("WordControl.FONT_TYPE");
Ec.aa("WordControl.CharPropertyCache");
Fc.aa("WordControl.ControlElement", xf);
Gc.aa("WordControl.ControlWidget");
Hc.aa("WordControl.DocController", null, Zb);
Qc.aa("WordControl.EGraph", xf);
Rc.aa("WordControl.ElementFactory", null, Yb);
bd.aa("WordControl.ExpressionElement", xf);
Wc.aa("WordControl.Fraction", xf);
id.aa("WordControl.LineSymbol", xf);
Ed.aa("WordControl.RayParser", null, Mb);
Fd.aa("WordControl.LineSegmentParser", null, Mb);
Gd.aa("WordControl.LineParser", null, Mb);
pd.aa("WordControl.Ray", xf);
rd.aa("WordControl.TextElement", xf);
wd.aa("WordControl.Operator", rd);
Id.aa("WordControl.BlankDocumentParser", null, Mb);
Jd.aa("WordControl.EPubDocParser", null, Lb);
df.aa("WordControl.TextDecoration");
Nd.aa("WordControl.CommentData", df);
Pd.aa("WordControl.EGraphParser", null, Mb);
Qd.aa("WordControl.ExpressionParser", null, Mb);
Rd.aa("WordControl.FractionParser", null, Mb);
Sd.aa("WordControl.Image");
Td.aa("WordControl.OperatorParser", null, Mb);
Vd.aa("WordControl.PictureParser", null, Mb);
Ud.aa("WordControl.AudioParser", Vd);
Wd.aa("WordControl.SimpliphiDocParser", null, Lb);
Zd.aa("WordControl.SimpliphiFormat");
de.aa("WordControl.SimpliphiMultidocParser", Wd);
ee.aa("WordControl.SimpliphiParseFactory", null, Pb);
he.aa("WordControl.SquareRootParser", null, Mb);
ie.aa("WordControl.SuperSubParser", null, Mb);
Zc.aa("WordControl.Picture", xf);
dd.aa("WordControl.Audio", Zc);
oe.aa("WordControl.BaseElementRenderer");
yd.aa("WordControl.ExpressionRenderer", oe, jc);
Ee.aa("WordControl.PictureRenderer", oe, jc);
ke.aa("WordControl.AudioRenderer", Ee);
Hd.aa("WordControl.RayRender", oe, jc);
Ad.aa("WordControl.LineRender", oe, jc);
re.aa("WordControl.LineSegmentRender", oe, jc);
se.aa("WordControl.ExpressionSerializer", null, Rb);
xe.aa("WordControl.PictureSerializer", null, Rb);
ue.aa("WordControl.AudioSerializer", xe);
ve.aa("WordControl.LineSegmentSerializer", null, Rb);
we.aa("WordControl.RaySerializer", null, Rb);
ye.aa("WordControl.LineSerializer", null, Rb);
ze.aa("WordControl.SuperSubSerializer", null, Rb);
od.aa("WordControl.LineSegment", xf);
Be.aa("WordControl.TemplateSubType");
(function() {
}).aa("WordControl.TemplateType");
zc.aa("WordControl.BlankDocumentRenderer", oe, jc);
bf.aa("WordControl.DocumentRenderer", null, ec);
$e.aa("WordControl.MainDocRenderer", bf);
Fe.aa("WordControl.MainDocRendererPaged", $e);
zd.aa("WordControl.FractionRenderer", oe, jc);
Ie.aa("WordControl.SquareRootRender", oe, jc);
Je.aa("WordControl.SuperSubRenderer", oe, jc);
Ke.aa("WordControl.BlankDocSerializer", null, Rb);
Le.aa("WordControl.FractionSerializer", null, Rb);
Pe.aa("WordControl.CommentDataNodes");
Qe.aa("WordControl.SimpliphiDocSerializer", null, Qb);
Ye.aa("WordControl.SimpliphiSerializerFactory", null, Tb);
Se.aa("WordControl.SquareRootSerializer", null, Rb);
Re.aa("WordControl.TableRowSerializer", null, Rb);
Te.aa("WordControl.TextElementSerializer", null, Rb);
Yc.aa("WordControl.SuperSub", xf);
je.aa("WordControl.TableRowParser", null, Mb);
Ze.aa("WordControl.DefaultRenderFactory", null, nc);
Xc.aa("WordControl.SquareRoot", xf);
Jc.aa("WordControl.CursorPos");
hf.aa("WordControl.DocumentProperties");
jf.aa("WordControl.ElPos");
Tc.aa("WordControl.Document");
Sc.aa("WordControl.MainDoc", Tc);
kf.aa("WordControl.BULLETS");
lf.aa("WordControl.ParagraphProperties");
Oc.aa("WordControl.HitTest");
pe.aa("WordControl.PagedLine");
He.aa("WordControl.RenderArgs");
Lc.aa("WordControl.RenderObject");
Ge.aa("WordControl.LayoutArgs");
pf.aa("WordControl.WrapState");
af.aa("WordControl.ParagraphRenderer", null, mc);
rf.aa("WordControl.ParaPage");
cf.aa("WordControl.TableRowRenderer", oe, jc);
Ic.aa("WordControl.Selection");
qf.aa("WordControl.Line", pe);
wf.aa("WordControl.LineSection");
nf.aa("WordControl.Page");
of.aa("WordControl.SelectionRange");
Kd.aa("WordControl.DocPos");
xd.aa("WordControl.TableRow", xf);
vf.aa("WordControl.TextLinkRect");
Pc.aa("WordControl.UpdateCharProperty");
Vc.aa("WordControl.Paragraph");
uc.rJ = "";
Ac.Pm = null;
Ac.Rv = null;
Ac.bu = null;
Cc.LC = "Open Sans";
Cc.iM = "'Open Sans'";
Cc.CL = "Great Vibes";
Cc.DL = "'Great Vibes'";
Cc.yK = "Droid Sans";
Cc.zK = "'Droid Sans'";
Cc.AK = "Droid Serif";
Cc.BK = "'Droid Serif'";
Cc.uJ = "Architects Daughter";
Cc.vJ = "'Architects Daughter'";
Ec.UG = null;
Ec.TG = !1;
Gc.te = 0;
Hc.yo = null;
dd.wJ = "/resources/images/audio_black.svg";
Be.vE = 6;
kf.NONE = "None";
kf.Dx = "\u2022";
kf.HE = "\u25a0";
kf.SD = "\u27a2";
kf.nF = "\u2794";
kf.cE = "\u25c6";
kf.MF = "\u2756";
kf.xF = "\u2718";
kf.ZH = "\u2714";
kf.TD = "\u2731";
lf.HF = 30;
bf.NF = 0;
Vc.fH = 12;
zg.WC();
yf = function(a) {
  Dg(yf, this, [a]);
};
yf.prototype = {Dh:"expression", parse:function(a, b, c, d) {
  var e = [], f = a.attributes.getNamedItem("charprop"), k = 0;
  null != f && (k = parseInt(f.value));
  f = this.wa.Re().He(0);
  k < d.length && (f = d[k]);
  if (a.hasChildNodes()) {
    a = a.firstChild;
    do {
      1 !== a.nodeType || w(a.nodeName, "doc", !0) || (k = this.wa.Qg(a, null, b, c), e.add(k.parse(a, d))), a = a.nextSibling;
    } while (null != a);
  }
  b = this.wa.af().wu(e, f);
  b.Do(f);
  return b;
}, Ll:function(a, b) {
  a = a.St;
  a = this.wa.af().wu([a], b);
  a.Do(b);
  return a;
}};
zf = function() {
  this.wF = new Ac();
  this.gH = new lf();
};
zf.prototype = {wF:null, gH:null};
Af = function(a) {
  this.current = null;
  this.rb = new Jc();
  this.rb.Be(0);
  this.mB = a;
};
Af.prototype = {wa:null, ee:null, Ma:null, mB:null, rb:null, current:null, mr:function(a, b) {
  this.mB.mr(a, b);
}, vC:function(a) {
  return this.mB.vC(a);
}, Ll:function(a, b, c, d) {
  this.wa = c;
  this.ee = d;
  b = this.wa.Re().He(0);
  this.Ma = d.Li(b);
  this.current = this.Ma.Lb(0);
  this.current.pd.Ch($b.te);
  this.tq = null;
  d = document.createElement("div");
  d.appendChild(a.cloneNode(!0));
  a = this.gJ(a);
  var e = this.qG(d.firstChild, d.lastChild, d);
  c = 0;
  for (e = u.kj.ki(e); e.Gl();) {
    var f = e.current, k = a[c++];
    f.St = k.WordDoc;
    f.Wz = k.FontColor;
    f.Xz = k.FontFamily;
    f.Yz = k.FontSize;
    f.Zz = k.FontStyle;
    f.$z = k.FontWeight;
    f.Gr = k.DocType;
  }
  if (d.hasChildNodes()) {
    d = d.firstChild;
    do {
      this.jH(d, b, this.current.pd.clone(), d), d = d.nextSibling;
    } while (null != d);
  }
  this.GM();
  return this.Ma;
}, GM:function() {
  var a = this.Ma.Lb(this.Ma.ie.length - 1);
  a.Xa(a.F.length - 1).bf("");
}, gJ:function(a) {
  var b = this.qG(a.firstChild, a.lastChild, a);
  a = [];
  for (b = u.kj.ki(b); b.Gl();) {
    var c = b.current, d = {};
    d.WordDoc = c.St;
    d.FontColor = c.Wz;
    d.FontFamily = c.Xz;
    d.FontSize = c.Yz;
    d.FontStyle = c.Zz;
    d.FontWeight = c.$z;
    d.DocType = c.Gr;
    a.add(d);
  }
  return a;
}, qG:function(a, b, c) {
  for (var d = [], e; null != a;) {
    for (; a.hasChildNodes();) {
      a = a.firstChild;
    }
    e = a.parentNode;
    w(a.nodeName, "img", !0) || d.add(a);
    if (a === b) {
      break;
    }
    for (a = a.nextSibling; null == a && e !== c;) {
      a = e.nextSibling, e = e.parentNode;
    }
  }
  return d;
}, tq:null, jH:function(a, b, c, d) {
  if (1 === a.nodeType) {
    var e = b.hi();
    this.xo(a, e);
    if (w(a.nodeName, "div", !0) && w(a.nodeName, "p", !0) && w(a.nodeName, "h1", !0) && w(a.nodeName, "h2", !0) && w(a.nodeName, "h3", !0) && w(a.nodeName, "h4", !0) && w(a.nodeName, "h5", !0) && w(a.nodeName, "h6", !0) && w(a.nodeName, "pre", !0) && w(a.nodeName, "ol", !0) && w(a.nodeName, "ul", !0) && w(a.nodeName, "li", !0) && w(a.nodeName, "br", !0)) {
      w(a.nodeName, "b", !0) && w(a.nodeName, "strong", !0) ? w(a.nodeName, "i", !0) && w(a.nodeName, "em", !0) ? w(a.nodeName, "u", !0) ? w(a.nodeName, "img", !0) || (b = this.wa.Ky(), f = new Ac(), f.Cn(a.Xz), f.lf(parseInt(a.Yz.toString())), f.cj(a.Wz), f.ti(a.Zz ? 1 : 0), f.ih(a.$z ? 1 : 0), null == f.Bc && f.cj(new xb(0, 0, 0, 1)), f = this.wa.Re().zf(f), f = this.wa.Re().He(f), this.current.Fg(this.rb, b.Ll(a, f)), this.rb.sb(this.rb.ca() + 1)) : (e.Gn(1), this.xo(a, e)) : (e.ti(1), this.xo(a, 
      e)) : (e.ih(1), this.xo(a, e));
    } else {
      d = a;
      var f = new lf();
      f.Ts(c);
      c = f;
      f = this.wa.Re().zf(e);
      f = this.wa.Re().He(f);
      c.wz(f);
      this.PC(a, c);
      w(a.nodeName, "ol", !0) ? w(a.nodeName, "ul", !0) ? w(a.nodeName, "li", !0) ? w(a.nodeName, "br", !0) ? w(a.nodeName, "div", !0) && w(a.nodeName, "p", !0) && w(a.nodeName, "h1", !0) && w(a.nodeName, "h2", !0) && w(a.nodeName, "h3", !0) && w(a.nodeName, "h4", !0) && w(a.nodeName, "h5", !0) && w(a.nodeName, "h6", !0) || !(1 < this.current.F.length || this.current.Xa(this.current.F.length - 1).jz()) || (this.current.Xa(this.current.F.length - 1).bf("\n"), this.current = this.ee.Lh(b), this.Ma.hu(this.current), 
      this.current.pr(c), this.tq = d, this.rb.Yd(this.rb.Ub() + 1), this.rb.sb(0), this.rb.sc(0)) : (this.tq = a, this.current.Xa(this.current.F.length - 1).jz() ? (this.current.Xa(this.current.F.length - 1).bf("\n"), this.current = this.ee.Lh(b), this.Ma.hu(this.current), this.current.pr(c), this.tq = d, this.rb.Yd(this.rb.Ub() + 1), this.rb.sb(0), this.rb.sc(0)) : this.current.Xa(this.current.F.length - 1).bf("\n")) : this.lM(a, c) : (c.gx(), this.PC(a, c), this.hH(a, c)) : (c.gx(), this.PC(a, 
      c), this.hH(a, c));
    }
    for (a = a.firstChild; null != a;) {
      this.jH(a, e, c, d), a = a.nextSibling;
    }
  } else if (3 === a.nodeType && (e = this.wa.XJ(), f = -1 !== a.nodeValue.indexOf(String.fromCharCode(32)) && !a.nodeValue.trim(), null != e && (-1 !== a.nodeValue.indexOf(String.fromCharCode(160)) || a.nodeValue.trim() || f))) {
    if (null == this.tq) {
      f = this.wa.Re().zf(b), this.current.Xa(this.current.F.length - 1).setProperty(this.wa.Re().He(f)), this.current.pr(c), this.tq = d;
    } else if (this.tq !== d || this.current.Xa(this.current.F.length - 1).jz()) {
      this.current.Xa(this.current.F.length - 1).bf("\n"), this.current = this.ee.Lh(b), this.Ma.hu(this.current), this.current.pr(c), this.tq = d, this.rb.Yd(this.rb.Ub() + 1), this.rb.sb(0), this.rb.sc(0);
    }
    c = e.Ll(a, b);
    a = this.sG(a);
    null != a && (a = a.attributes.getNamedItem("href"), null != a && c.HG(a.value));
    this.current.Fg(this.rb, c);
    this.rb.sb(this.rb.ca() + 1);
  }
}, PC:function(a, b) {
  if (a.hasAttribute("style")) {
    var c = a.style.marginLeft;
    0 < c.length && b.oD(parseFloat(c));
  }
  c = "left";
  a.hasAttribute("style") && (c = a.style.textAlign);
  a.hasAttribute("align") && (c = a.attributes.getNamedItem("align").value);
  w(c, "left", !0) || b.Bo(dc.vp);
  w(c, "right", !0) || b.Bo(dc.Cs);
  w(c, "center", !0) || b.Bo(dc.QF);
}, hH:function(a, b) {
  a.hasAttribute("style") && a.style.listStyleType ? w(a.style.listStyleType, "upper-alpha", !0) ? w(a.style.listStyleType, "lower-alpha", !0) ? w(a.style.listStyleType, "upper-roman", !0) ? w(a.style.listStyleType, "lower-roman", !0) ? w(a.style.listStyleType, "decimal", !0) ? w(a.style.listStyleType, "none", !0) || b.Ch($b.te) : b.Ch($b.cn) : (b.Ch($b.Ty), b.Co(bc.Sy)) : (b.Ch($b.Ty), b.Co(bc.Uy)) : (b.Ch($b.Ry), b.Co(bc.Sy), b.ht(0)) : (b.Ch($b.Ry), b.Co(bc.Uy), b.ht(0)) : w(a.nodeName, "ol", 
  !0) || b.Ch($b.cn);
}, lM:function(a, b) {
  for (var c = a.parentNode; null != c;) {
    if (!w(c.nodeName, "ol", !0)) {
      return;
    }
    if (!w(c.nodeName, "ul", !0)) {
      break;
    }
    c = c.parentNode;
  }
  a.hasAttribute("class") && a.getAttributeNode("class").value ? (a = a.getAttributeNode("class").value, w(a, "custom-ul-marker-square", !0) ? w(a, "custom-ul-marker-circle", !0) && w(a, "custom-ul-marker-circle-old", !0) ? w(a, "custom-ul-marker-arrow", !0) ? w(a, "custom-ul-marker-arrow-filled", !0) ? w(a, "custom-ul-marker-diamond", !0) ? w(a, "custom-ul-marker-diamond-minus-white-x", !0) ? w(a, "custom-ul-marker-check-mark", !0) ? w(a, "custom-ul-marker-tick-mark", !0) ? w(a, "custom-ul-marker-asterisk", 
  !0) ? b.Vg(kf.Dx) : b.Vg(kf.TD) : b.Vg(kf.ZH) : b.Vg(kf.xF) : b.Vg(kf.MF) : b.Vg(kf.cE) : b.Vg(kf.nF) : b.Vg(kf.SD) : b.Vg(kf.Dx) : b.Vg(kf.HE)) : b.Vg(kf.Dx);
  b.Ch($b.RF);
}, sG:function(a) {
  for (; null != a;) {
    if (!w(a.nodeName, "a", !0)) {
      return a;
    }
    a = a.parentNode;
  }
  return null;
}, xo:function(a, b) {
  a.hasAttribute("style") && a.style.fontSize ? this.kt(a.style.fontSize, b) : a.hasAttribute("size") && a.getAttributeNode("size").value && this.kt(a.getAttributeNode("size").value, b);
  a.hasAttribute("style") && a.style.fontFamily ? this.mr(b, a.style.fontFamily) : a.hasAttribute("face") && a.getAttributeNode("face").value && this.mr(b, a.getAttributeNode("face").value);
  a.hasAttribute("color") && a.getAttributeNode("color").value ? b.cj(this.Gs(a.getAttributeNode("color").value)) : a.hasAttribute("style") && a.style.color && b.cj(this.Gs(a.style.color));
  a.hasAttribute("style") && !w(a.style.textDecoration, "underline", !0) && b.Gn(1);
  a.hasAttribute("style") && !w(a.style.fontStyle, "italic", !0) ? b.ti(1) : a.hasAttribute("style") && !w(a.style.fontStyle, "normal", !0) && b.ti(0);
  a.hasAttribute("style") && !w(a.style.fontWeight, "bold", !0) ? b.ih(1) : a.hasAttribute("style") && !w(a.style.fontWeight, "normal", !0) ? b.ih(0) : a.hasAttribute("style") && 500 <= parseInt(a.style.fontWeight) ? b.ih(1) : a.hasAttribute("style") && 500 > parseInt(a.style.fontWeight) && b.ih(0);
}, kt:function(a, b) {
  w(a, "xx-small", !0) ? w(a, "x-small", !0) ? w(a, "small", !0) ? w(a, "medium", !0) ? w(a, "large", !0) ? w(a, "x-large", !0) ? w(a, "xx-large", !0) ? w(a, "smaller", !0) ? w(a, "larger", !0) ? w(a, "initial", !0) ? w(a, "inherit", !0) || (a = b.Ne.toString()) : a = b.Ne.toString() : a = Math.round(1.33 * b.Ne).toString() : a = Math.round(0.66 * b.Ne).toString() : a = "7" : a = "6" : a = "5" : a = "4" : a = "3" : a = "2" : a = "1";
  a = parseInt(a);
  switch(a) {
    case 1:
      b.lf(10);
      break;
    case 2:
      b.lf(13);
      break;
    case 3:
      b.lf(16);
      break;
    case 4:
      b.lf(18);
      break;
    case 5:
      b.lf(24);
      break;
    case 6:
      b.lf(32);
      break;
    case 7:
      break;
    default:
      b.lf(a);
  }
}, Gs:function(a) {
  var b = new xb(0, 0, 0, 1);
  a = a.toLocaleLowerCase();
  switch(a) {
    case "aliceblue":
      a = "#F0F8FF";
      break;
    case "antiquewhite":
      a = "#FAEBD7";
      break;
    case "aqua":
      a = "#00FFFF";
      break;
    case "aquamarine":
      a = "#7FFFD4";
      break;
    case "azure":
      a = "#F0FFFF";
      break;
    case "beige":
      a = "#F5F5DC";
      break;
    case "bisque":
      a = "#FFE4C4";
      break;
    case "black":
      a = "#000000";
      break;
    case "blanchedalmond":
      a = "#FFEBCD";
      break;
    case "blue":
      a = "#0000FF";
      break;
    case "blueviolet":
      a = "#8A2BE2";
      break;
    case "brown":
      a = "#A52A2A";
      break;
    case "burlywood":
      a = "#DEB887";
      break;
    case "cadetblue":
      a = "#5F9EA0";
      break;
    case "chartreuse":
      a = "#7FFF00";
      break;
    case "chocolate":
      a = "#D2691E";
      break;
    case "coral":
      a = "#FF7F50";
      break;
    case "cornflowerblue":
      a = "#6495ED";
      break;
    case "cornsilk":
      a = "#FFF8DC";
      break;
    case "crimson":
      a = "#DC143C";
      break;
    case "cyan":
      a = "#00FFFF";
      break;
    case "darkblue":
      a = "#00008B";
      break;
    case "darkcyan":
      a = "#008B8B";
      break;
    case "darkgoldenrod":
      a = "#B8860B";
      break;
    case "darkgray":
      a = "#A9A9A9";
      break;
    case "darkgrey":
      a = "#A9A9A9";
      break;
    case "darkgreen":
      a = "#006400";
      break;
    case "darkkhaki":
      a = "#BDB76B";
      break;
    case "darkmagenta":
      a = "#8B008B";
      break;
    case "darkolivegreen":
      a = "#556B2F";
      break;
    case "darkorange":
      a = "#FF8C00";
      break;
    case "darkorchid":
      a = "#9932CC";
      break;
    case "darkred":
      a = "#8B0000";
      break;
    case "darksalmon":
      a = "#E9967A";
      break;
    case "darkseagreen":
      a = "#8FBC8F";
      break;
    case "darkslateblue":
      a = "#483D8B";
      break;
    case "darkslategray":
      a = "#2F4F4F";
      break;
    case "darkslategrey":
      a = "#2F4F4F";
      break;
    case "darkturquoise":
      a = "#00CED1";
      break;
    case "darkviolet":
      a = "#9400D3";
      break;
    case "deeppink":
      a = "#FF1493";
      break;
    case "deepskyblue":
      a = "#00BFFF";
      break;
    case "dimgray":
      a = "#696969";
      break;
    case "dimgrey":
      a = "#696969";
      break;
    case "dodgerblue":
      a = "#1E90FF";
      break;
    case "firebrick":
      a = "#B22222";
      break;
    case "floralwhite":
      a = "#FFFAF0";
      break;
    case "forestgreen":
      a = "#228B22";
      break;
    case "fuchsia":
      a = "#FF00FF";
      break;
    case "gainsboro":
      a = "#DCDCDC";
      break;
    case "ghostwhite":
      a = "#F8F8FF";
      break;
    case "gold":
      a = "#FFD700";
      break;
    case "goldenrod":
      a = "#DAA520";
      break;
    case "gray":
      a = "#808080";
      break;
    case "grey":
      a = "#808080";
      break;
    case "green":
      a = "#008000";
      break;
    case "greenyellow":
      a = "#ADFF2F";
      break;
    case "honeydew":
      a = "#F0FFF0";
      break;
    case "hotpink":
      a = "#FF69B4";
      break;
    case "indianred":
      a = "#CD5C5C";
      break;
    case "indigo":
      a = "#4B0082";
      break;
    case "ivory":
      a = "#FFFFF0";
      break;
    case "khaki":
      a = "#F0E68C";
      break;
    case "lavender":
      a = "#E6E6FA";
      break;
    case "lavenderblush":
      a = "#FFF0F5";
      break;
    case "lawngreen":
      a = "#7CFC00";
      break;
    case "lemonchiffon":
      a = "#FFFACD";
      break;
    case "lightblue":
      a = "#ADD8E6";
      break;
    case "lightcoral":
      a = "#F08080";
      break;
    case "lightcyan":
      a = "#E0FFFF";
      break;
    case "lightgoldenrodyellow":
      a = "#FAFAD2";
      break;
    case "lightgray":
      a = "#D3D3D3";
      break;
    case "lightgrey":
      a = "#D3D3D3";
      break;
    case "lightgreen":
      a = "#90EE90";
      break;
    case "lightpink":
      a = "#FFB6C1";
      break;
    case "lightsalmon":
      a = "#FFA07A";
      break;
    case "lightseagreen":
      a = "#20B2AA";
      break;
    case "lightskyblue":
      a = "#87CEFA";
      break;
    case "lightslategray":
      a = "#778899";
      break;
    case "lightslategrey":
      a = "#778899";
      break;
    case "lightsteelblue":
      a = "#B0C4DE";
      break;
    case "lightyellow":
      a = "#FFFFE0";
      break;
    case "lime":
      a = "#00FF00";
      break;
    case "limegreen":
      a = "#32CD32";
      break;
    case "linen":
      a = "#FAF0E6";
      break;
    case "magenta":
      a = "#FF00FF";
      break;
    case "maroon":
      a = "#800000";
      break;
    case "mediumaquamarine":
      a = "#66CDAA";
      break;
    case "mediumblue":
      a = "#0000CD";
      break;
    case "mediumorchid":
      a = "#BA55D3";
      break;
    case "mediumpurple":
      a = "#9370DB";
      break;
    case "mediumseagreen":
      a = "#3CB371";
      break;
    case "mediumslateblue":
      a = "#7B68EE";
      break;
    case "mediumspringgreen":
      a = "#00FA9A";
      break;
    case "mediumturquoise":
      a = "#48D1CC";
      break;
    case "mediumvioletred":
      a = "#C71585";
      break;
    case "midnightblue":
      a = "#191970";
      break;
    case "mintcream":
      a = "#F5FFFA";
      break;
    case "mistyrose":
      a = "#FFE4E1";
      break;
    case "moccasin":
      a = "#FFE4B5";
      break;
    case "navajowhite":
      a = "#FFDEAD";
      break;
    case "navy":
      a = "#000080";
      break;
    case "oldlace":
      a = "#FDF5E6";
      break;
    case "olive":
      a = "#808000";
      break;
    case "olivedrab":
      a = "#6B8E23";
      break;
    case "orange":
      a = "#FFA500";
      break;
    case "orangered":
      a = "#FF4500";
      break;
    case "orchid":
      a = "#DA70D6";
      break;
    case "palegoldenrod":
      a = "#EEE8AA";
      break;
    case "palegreen":
      a = "#98FB98";
      break;
    case "paleturquoise":
      a = "#AFEEEE";
      break;
    case "palevioletred":
      a = "#DB7093";
      break;
    case "papayawhip":
      a = "#FFEFD5";
      break;
    case "peachpuff":
      a = "#FFDAB9";
      break;
    case "peru":
      a = "#CD853F";
      break;
    case "pink":
      a = "#FFC0CB";
      break;
    case "plum":
      a = "#DDA0DD";
      break;
    case "powderblue":
      a = "#B0E0E6";
      break;
    case "purple":
      a = "#800080";
      break;
    case "rebeccapurple":
      a = "#663399";
      break;
    case "red":
      a = "#FF0000";
      break;
    case "rosybrown":
      a = "#BC8F8F";
      break;
    case "royalblue":
      a = "#4169E1";
      break;
    case "saddlebrown":
      a = "#8B4513";
      break;
    case "salmon":
      a = "#FA8072";
      break;
    case "sandybrown":
      a = "#F4A460";
      break;
    case "seagreen":
      a = "#2E8B57";
      break;
    case "seashell":
      a = "#FFF5EE";
      break;
    case "sienna":
      a = "#A0522D";
      break;
    case "silver":
      a = "#C0C0C0";
      break;
    case "skyblue":
      a = "#87CEEB";
      break;
    case "slateblue":
      a = "#6A5ACD";
      break;
    case "slategray":
      a = "#708090";
      break;
    case "slategrey":
      a = "#708090";
      break;
    case "snow":
      a = "#FFFAFA";
      break;
    case "springgreen":
      a = "#00FF7F";
      break;
    case "steelblue":
      a = "#4682B4";
      break;
    case "tan":
      a = "#D2B48C";
      break;
    case "teal":
      a = "#008080";
      break;
    case "thistle":
      a = "#D8BFD8";
      break;
    case "tomato":
      a = "#FF6347";
      break;
    case "turquoise":
      a = "#40E0D0";
      break;
    case "violet":
      a = "#EE82EE";
      break;
    case "wheat":
      a = "#F5DEB3";
      break;
    case "white":
      a = "#FFFFFF";
      break;
    case "whitesmoke":
      a = "#F5F5F5";
      break;
    case "yellow":
      a = "#FFFF00";
      break;
    case "yellowgreen":
      a = "#9ACD32";
  }
  -1 !== a.indexOf("#") ? b.cG(a) : -1 !== a.indexOf("rgb") && b.TB(a);
  return b;
}, Is:function(a, b, c, d) {
  var e = new Ac(), f = new lf();
  f.Bo(dc.vp);
  f.Ch($b.te);
  var k = new Ac();
  k.set(Cc.LC, 16, 0, 0, 0, 0, new xb(0, 0, 0, 0.87), new xb(255, 255, 255, 0), 0, 0);
  f.wz(k);
  if (a === b) {
    e = c;
  } else {
    for (; null != a;) {
      if (!(w(a.nodeName, "div", !0) && w(a.nodeName, "p", !0) && w(a.nodeName, "h1", !0) && w(a.nodeName, "h2", !0) && w(a.nodeName, "h3", !0) && w(a.nodeName, "h4", !0) && w(a.nodeName, "h5", !0) && w(a.nodeName, "h6", !0) && w(a.nodeName, "pre", !0))) {
        this.aD(a, f, e);
      } else if (!w(a.nodeName, "span", !0) || !w(a.nodeName, "code", !0)) {
        this.hv(a, e);
      } else if (!w(a.nodeName, "b", !0) || !w(a.nodeName, "strong", !0)) {
        this.hv(a, e), -1 === e.mf && e.ih(1);
      } else if (!w(a.nodeName, "i", !0) || !w(a.nodeName, "em", !0)) {
        this.hv(a, e), -1 === e.vj() && e.ti(1);
      } else if (!w(a.nodeName, "u", !0)) {
        this.hv(a, e), e.Gn(1);
      } else if (!w(a.nodeName, "font", !0)) {
        this.hv(a, e);
      } else if (!w(a.nodeName, "ol", !0)) {
        this.xH(a, f, e);
      } else if (!w(a.nodeName, "ul", !0)) {
        this.xH(a, f, e);
      } else if (!w(a.nodeName, "li", !0)) {
        this.PM(a, f, e);
      } else if (!w(a.nodeName, "img", !0)) {
        this.lJ(a, e, d[a.id]);
      } else if (!w(a.nodeName, "a", !0)) {
        k = new xb(0, 0, 0, 1), k.Xy(a.style.color), e.cj(k);
      } else if (!w(a.nodeName, "br", !0)) {
        if (eb.Vq() === pa.SB) {
          k = this.xL(a, b, !0);
          a = null == k ? a.parentNode : k;
          continue;
        }
      } else if (3 === a.nodeType && eb.Vq() === pa.hz && !a.textContent) {
        k = a.parentNode;
        if (null != a && null == a.previousSibling) {
          for (; null != a && null == a.previousSibling && a !== b;) {
            a = k.previousSibling, k = k.parentNode;
          }
        } else {
          a = a.previousSibling;
        }
        for (; null != a && a.hasChildNodes() && a !== b;) {
          a = a.lastChild;
        }
        continue;
      }
      if (a === b) {
        break;
      }
      a = a.parentNode;
    }
    this.WM(e, c);
  }
  a = new zf();
  a.wF = e.hi();
  a.gH = f.clone();
  return a;
}, xL:function(a, b, c) {
  var d = a;
  a = a.parentNode;
  if (null != d) {
    for (; null == d.previousSibling || c && 3 === d.nodeType && !d.textContent;) {
      if (b === a) {
        return null;
      }
      d = a;
      a = a.parentNode;
    }
    return d = d.previousSibling;
  }
  return null;
}, lJ:function(a, b, c) {
  null != c && (new xb(0, 0, 0, 1), b.cj(c.FontColor), b.Cn(c.FontFamily), b.lf(parseInt(c.FontSize)), 0 < parseInt(c.FontWeight) ? b.ih(1) : b.ih(0), 0 < parseInt(c.FontStyle) ? b.ti(1) : b.ti(0));
}, aD:function(a, b, c) {
  var d = "";
  a.hasAttribute("style") && (d = a.style.textAlign);
  a.hasAttribute("align") && (d = a.attributes.getNamedItem("align").value);
  b.ng !== dc.vp || w(d, "left", !0) || b.Bo(dc.vp);
  b.ng !== dc.vp || w(d, "right", !0) || b.Bo(dc.Cs);
  b.ng !== dc.vp || w(d, "center", !0) || b.Bo(dc.QF);
  this.hv(a, c);
}, hv:function(a, b) {
  -1 === b.Ne && a.hasAttribute("style") && a.style.fontSize ? this.kt(a.style.fontSize, b) : -1 === b.Ne && a.hasAttribute("size") && a.getAttributeNode("size").value && this.kt(a.getAttributeNode("size").value, b);
  u.cf(b.ak()) || !w(b.ak(), "none", !0) && a.hasAttribute("style") && a.style.fontFamily ? this.mr(b, a.style.fontFamily) : (u.cf(b.ak()) || !w(b.ak(), "none", !0) && a.hasAttribute("face") && a.getAttributeNode("face").value) && this.mr(b, a.getAttributeNode("face").value);
  null == b.Bc && a.hasAttribute("color") && a.getAttributeNode("color").value ? b.cj(this.Gs(a.getAttributeNode("color").value)) : null == b.Bc && a.hasAttribute("style") && a.style.color && b.cj(this.Gs(a.style.color));
  a.hasAttribute("style") && !w(a.style.fontStyle, "italic", !0) ? -1 === b.vj() && b.ti(1) : a.hasAttribute("style") && !w(a.style.fontStyle, "normal", !0) && -1 === b.vj() && b.ti(0);
  a.hasAttribute("style") && !w(a.style.textDecoration, "underline", !0) && b.Gn(1);
  a.hasAttribute("style") && !w(a.style.fontWeight, "bold", !0) ? -1 === b.mf && b.ih(1) : a.hasAttribute("style") && !w(a.style.fontWeight, "normal", !0) ? -1 === b.mf && b.ih(0) : a.hasAttribute("style") && 500 <= parseInt(a.style.fontWeight) ? -1 === b.mf && b.ih(1) : a.hasAttribute("style") && 500 > parseInt(a.style.fontWeight) && -1 === b.mf && b.ih(0);
}, xH:function(a, b, c) {
  a.hasAttribute("style") && a.style.listStyleType && (b.yf !== $b.te || w(a.style.listStyleType, "upper-alpha", !0) ? b.yf !== $b.te || w(a.style.listStyleType, "lower-alpha", !0) ? b.yf !== $b.te || w(a.style.listStyleType, "upper-roman", !0) ? b.yf !== $b.te || w(a.style.listStyleType, "lower-roman", !0) ? b.yf !== $b.te || w(a.style.listStyleType, "decimal", !0) ? b.yf !== $b.te || w(a.style.listStyleType, "none", !0) || (w(a.nodeName, "ol", !0) ? b.Ch($b.te) : b.Ch($b.cn)) : b.Ch($b.cn) : (b.Ch($b.Ty), 
  b.Co(bc.Sy)) : (b.Ch($b.Ty), b.Co(bc.Uy)) : (b.Ch($b.Ry), b.Co(bc.Sy), b.ht(0)) : (b.Ch($b.Ry), b.Co(bc.Uy), b.ht(0)));
  this.aD(a, b, c);
}, PM:function(a, b, c) {
  if (!b.dG() && a.hasAttribute("class") && a.getAttributeNode("class").value) {
    var d = a.getAttributeNode("class").value;
    w(d, "custom-ul-marker-square", !0) ? w(d, "custom-ul-marker-circle", !0) && w(d, "custom-ul-marker-circle-old", !0) ? w(d, "custom-ul-marker-arrow", !0) ? w(d, "custom-ul-marker-arrow-filled", !0) ? w(d, "custom-ul-marker-diamond", !0) ? w(d, "custom-ul-marker-diamond-minus-white-x", !0) ? w(d, "custom-ul-marker-check-mark", !0) ? w(d, "custom-ul-marker-tick-mark", !0) ? w(d, "custom-ul-marker-asterisk", !0) || b.Vg(kf.TD) : b.Vg(kf.ZH) : b.Vg(kf.xF) : b.Vg(kf.MF) : b.Vg(kf.cE) : b.Vg(kf.nF) : 
    b.Vg(kf.SD) : b.Vg(kf.Dx) : b.Vg(kf.HE);
    b.Ch($b.RF);
  }
  this.aD(a, b, c);
}, WM:function(a, b) {
  u.cf(b) || (-1 === a.Ne && a.lf(b.Ne), null == a.ak() || w(a.ak(), "none", !0) && w(a.ak(), "", !0) || this.mr(a, b.ak()), null == a.Bc && a.cj(new xb(0, 0, 0, 1)));
}};
Bf = function(a) {
  Dg(Bf, this, [a]);
};
Bf.prototype = {parse:function(a, b, c, d) {
  var e = [];
  if (a.hasChildNodes()) {
    a = a.firstChild;
    do {
      if (1 === a.nodeType && !w(a.nodeName, "doc", !0)) {
        var f = this.wa.Qg(a, null, b, c);
        e.add(f.parse(a, d));
      }
      a = a.nextSibling;
    } while (null != a);
  }
  return this.wa.af().Mi("LINE_SEGMENT", e);
}};
Cf = function(a) {
  Dg(Cf, this, [a]);
};
Cf.prototype = {parse:function(a, b, c, d) {
  var e = [];
  if (a.hasChildNodes()) {
    a = a.firstChild;
    do {
      if (1 === a.nodeType && !w(a.nodeName, "doc", !0)) {
        var f = this.wa.Qg(a, null, b, c);
        e.add(f.parse(a, d));
      }
      a = a.nextSibling;
    } while (null != a);
  }
  return this.wa.af().Mi("RAY", e);
}};
Df = function(a) {
  Dg(Df, this, [a]);
};
Df.prototype = {parse:function(a, b, c, d) {
  var e = [];
  if (a.hasChildNodes()) {
    a = a.firstChild;
    do {
      if (1 === a.nodeType && !w(a.nodeName, "doc", !0)) {
        var f = this.wa.Qg(a, null, b, c);
        e.add(f.parse(a, d));
      }
      a = a.nextSibling;
    } while (null != a);
  }
  return this.wa.af().Mi("LINE", e);
}};
Ef = function() {
  this.Np = [];
};
Ef.prototype = {El:0, Np:null};
Ff = function(a, b, c) {
  this.jh = a;
  this.Rf = b;
  this.eh = c;
  this.Uu = db.Vb("<doc></doc>");
  new Gf();
};
Ff.prototype = {jh:null, Rf:null, eh:null, Uu:null, sx:null, Su:null, Yb:function() {
  this.Rf.TH();
  for (var a = this.Rf.ie.length, b = 0; b < a; b++) {
    var c = this.Rf.Lb(b), d = null, e = c.F.length - 1;
    c.Nc() ? null == this.sx && (this.sx = db.Vb("<table></table>"), this.Uu.appendChild(this.sx), d = this.sx) : (this.sx = null, d = db.Vb("<p></p>"), db.setAttribute(d, "charprop", this.jh.zf(c.Xa(e).vc())), this.Uu.appendChild(d), d.appendChild(this.SM(c.pd)));
    for (var f = 0; f < e; f++) {
      var k = c.Xa(f), l = this.dz(b, f), n = this.jh.Jy(k, this.eh, l, !f);
      k.jf() || this.Tt(d, l);
      k = n.Yb();
      for (l = 0; l < k.length; l++) {
        d.appendChild(k[l]);
      }
    }
  }
  return this.Uu;
}, Tt:function(a, b) {
  u.Ve.assert(2 > b.length, "Having ch index without text element");
  for (var c = 0; c < b.length; c++) {
    for (var d = b[c].Np, e = 0; e < d.length; e++) {
      a.appendChild(d[e]);
    }
  }
}, SM:function(a) {
  var b = db.Vb("<prop></prop>");
  b.appendChild(db.Vb("<butype>" + a.yf + "</butype>"));
  b.appendChild(db.Vb("<bucase>" + a.ph + "</bucase>"));
  b.appendChild(db.Vb("<buparen>" + a.qj + "</buparen>"));
  b.appendChild(db.Vb("<bustart>" + a.Kg + "</bustart>"));
  b.appendChild(db.Vb("<buchar>" + a.dG() + "</buchar>"));
  b.appendChild(db.Vb("<bulevel>" + a.pj + "</bulevel>"));
  b.appendChild(db.Vb("<align>" + a.ng + "</align>"));
  b.appendChild(db.Vb("<indent>" + a.zp() + "</indent>"));
  b.appendChild(db.Vb("<hangingindent>" + a.zp() + "</hangingindent>"));
  b.appendChild(db.Vb("<linespacing>" + a.zp() + "</linespacing>"));
  null != a.Fe && b.appendChild(this.AH(a.Fe, "buprop"));
  return b;
}, fD:function(a, b) {
  return a.hD(this.eh, b);
}, eD:function(a, b) {
  return a.gD(this.eh, b);
}, dz:function(a, b) {
  for (var c = [], d = 0; d < this.Rf.yc.length; d++) {
    var e = this.Rf.hC(d), f = e.uj;
    if (f.fa === a && f.ud().oa === b) {
      f = f.ud().Ab;
      var k = this.fD(e, d);
      this.bw(f, c, k);
    }
    f = e.pk;
    f.fa === a && f.ud().oa === b && (f = f.ud().Ab, k = this.eD(e, d), this.bw(f, c, k));
  }
  this.GD(c);
  return c;
}, bw:function(a, b, c) {
  for (var d = null, e = 0; e < b.length; e++) {
    b[e].El === a && (d = b[e]);
  }
  null == d && (d = new Ef(), d.El = a, b.add(d));
  d.Np.add(c);
}, GD:function(a) {
  for (var b = 0; b < a.length; b++) {
    for (var c = a[b], d = b + 1; d < a.length; d++) {
      c.El > a[d].El && (a[b] = a[d], a[d] = c, c = a[b]);
    }
  }
}, AH:function(a, b) {
  b = db.Vb("<" + b + "></" + b + ">");
  1 === a.mf && b.appendChild(db.Vb("<b>1</b>"));
  1 === a.vj() && b.appendChild(db.Vb("<i>1</i>"));
  1 === a.nf && b.appendChild(db.Vb("<u>1</u>"));
  1 === a.Mg && b.appendChild(db.Vb("<s>1</s>"));
  1 === a.zg && b.appendChild(db.Vb("<sup>1</sup>"));
  1 === a.$e && b.appendChild(db.Vb("<sub>1</sub>"));
  1 === a.Lg && b.appendChild(db.Vb("<recursivesub>1</recursivesub>"));
  0 < a.Ne && b.appendChild(db.Vb("<size>" + a.Ne + "</size>"));
  0 < a.Iu() && b.appendChild(db.Vb("<lh>" + a.Iu() + "</lh>"));
  a.ak() && b.appendChild(db.Vb("<font>" + a.ak() + "</font>"));
  a.Bc.Pp && b.appendChild(db.Vb("<color>" + a.Bc.ai() + "</color>"));
  a.og.Pp && b.appendChild(db.Vb("<bg>" + a.og.ai() + "</bg>"));
  return b;
}};
Hf = function() {
};
Hf.prototype = {};
Lf = function(a, b, c, d, e, f) {
  Dg(Lf, this, [a, c, d, e, f]);
  this.Pv = b;
};
Lf.prototype = {Pv:null, Yb:function() {
  var a = db.Vb("<el></el>");
  db.setAttribute(a, "type", "expression");
  this.Pv.vc();
  db.setAttribute(a, "charprop", this.jh.zf(this.Pv.vc()));
  var b = [];
  b.add(a);
  for (var c = 0; c < this.Pv.Vc(); ++c) {
    var d = this.jh.xl(this.Pv.Hc(c), this.eh);
    a.appendChild(d.Yb());
  }
  return b;
}};
Mf = function(a, b, c, d, e, f) {
  Dg(Mf, this, [a, c, d, e, f]);
  this.el = b;
};
Mf.prototype = {el:null, Yb:function() {
  var a = db.Vb("<el></el>");
  db.setAttribute(a, "type", "frac");
  var b = [];
  b.add(a);
  for (var c = 0; c < this.el.Vc(); ++c) {
    var d = this.jh.xl(this.el.Hc(c), this.eh);
    a.appendChild(d.Yb());
  }
  return b;
}};
Gf = function() {
};
Gf.prototype = {};
Nf = function(a, b, c) {
  Dg(Nf, this, [a, b, c]);
  this.VC = db.Vb("<charproperties></charproperties>");
  this.Uu.appendChild(this.VC);
  this.Rf.Tu && this.Uu.appendChild(db.Vb("<po>1</po>"));
};
Nf.prototype = {VC:null, Yb:function() {
  var a = Nf.$n.prototype.Yb.call(this);
  for (var b = this.jh.gk, c = 0; c < b.length; ++c) {
    this.VC.appendChild(this.AH(b[c], "charprop"));
  }
  return a;
}};
Of = function() {
};
Of.prototype = {};
Pf = function(a, b, c, d, e, f) {
  Dg(Pf, this, [a, c, d, e, f]);
  this.el = b;
};
Pf.prototype = {el:null, Yb:function() {
  var a = db.Vb("<el></el>");
  db.setAttribute(a, "type", "image");
  var b = [];
  b.add(a);
  var c = this.el.tr;
  c = c.remove(0, c.indexOf(",") + 1);
  db.setAttribute(a, "ext", ab.aC(c));
  db.setAttribute(a, "width", this.el.ka().toString());
  db.setAttribute(a, "height", this.el.qb().toString());
  db.setAttribute(a, "baseline", this.el.qb().toString());
  db.setAttribute(a, "index", this.eh.length.toString());
  this.eh.add(c);
  return b;
}};
Qf = function() {
};
Qf.prototype = {gk:null, sm:null, zf:function(a) {
  var b = this.sm[a.Ak.toString()];
  u.cf(b) && (b = this.gk.length, this.gk.add(a), this.sm[a.Ak.toString()] = b);
  return b.toString();
}, xl:function(a, b) {
  return new Ff(this, a, b);
}, Jy:function(a, b, c, d) {
  switch(a.Qi()) {
    case 0:
      return new Rf(this, a, b, c, this.gk, this.sm, d);
    case 1:
      return new Sf(this, a, b, c, this.gk, this.sm);
    case 2:
      return new Mf(this, a, b, c, this.gk, this.sm);
    case 3:
      return new Tf(this, a, b, c, this.gk, this.sm);
    case 5:
      return new Vf(this, a, b, c, this.gk, this.sm);
    case 6:
      return new Pf(this, a, b, c, this.gk, this.sm);
    case 10:
      return new Lf(this, a, b, c, this.gk, this.sm);
    case 12:
      return new Wf(this, a, b, c, this.gk, this.sm);
    case 13:
      return new Xf(this, a, b, c, this.gk, this.sm);
    case 14:
      return new Yf(this, a, b, c, this.gk, this.sm);
  }
  return null;
}};
Xf = function(a, b, c, d, e, f) {
  Dg(Xf, this, [a, c, d, e, f]);
  this.rh = b;
};
Xf.prototype = {rh:null, Yb:function() {
  var a = db.Vb("<el></el>");
  db.setAttribute(a, "type", "lineSegment");
  var b = [];
  b.add(a);
  for (var c = 0; c < this.rh.Vc(); ++c) {
    var d = this.jh.xl(this.rh.Hc(c), this.eh);
    a.appendChild(d.Yb());
  }
  return b;
}};
Yf = function(a, b, c, d, e, f) {
  Dg(Yf, this, [a, c, d, e, f]);
  this.rh = b;
};
Yf.prototype = {rh:null, Yb:function() {
  var a = db.Vb("<el></el>");
  db.setAttribute(a, "type", "ray");
  var b = [];
  b.add(a);
  for (var c = 0; c < this.rh.Vc(); ++c) {
    var d = this.jh.xl(this.rh.Hc(c), this.eh);
    a.appendChild(d.Yb());
  }
  return b;
}};
Wf = function(a, b, c, d, e, f) {
  Dg(Wf, this, [a, c, d, e, f]);
  this.rh = b;
};
Wf.prototype = {rh:null, Yb:function() {
  var a = db.Vb("<el></el>");
  db.setAttribute(a, "type", "line");
  var b = [];
  b.add(a);
  for (var c = 0; c < this.rh.Vc(); ++c) {
    var d = this.jh.xl(this.rh.Hc(c), this.eh);
    a.appendChild(d.Yb());
  }
  return b;
}};
Tf = function(a, b, c, d, e, f) {
  Dg(Tf, this, [a, c, d, e, f]);
  this.rh = b;
};
Tf.prototype = {rh:null, Yb:function() {
  var a = db.Vb("<el></el>");
  db.setAttribute(a, "type", "sqrt");
  var b = [];
  b.add(a);
  for (var c = 0; c < this.rh.Vc(); ++c) {
    var d = this.jh.xl(this.rh.Hc(c), this.eh);
    a.appendChild(d.Yb());
  }
  return b;
}};
Vf = function(a, b, c, d, e, f) {
  Dg(Vf, this, [a, c, d, e, f]);
  this.rh = b;
};
Vf.prototype = {rh:null, Yb:function() {
  var a = db.Vb("<el></el>");
  db.setAttribute(a, "type", this.rh.ts ? "sup" : "sub");
  var b = [];
  b.add(a);
  for (var c = 0; c < this.rh.Vc(); ++c) {
    var d = this.jh.xl(this.rh.Hc(c), this.eh);
    a.appendChild(d.Yb());
  }
  return b;
}};
Sf = function(a, b, c, d, e, f) {
  Dg(Sf, this, [a, c, d, e, f]);
};
Sf.prototype = {el:null, Yb:function() {
  for (var a = db.Vb("<tr/>"), b, c = this.el.Vc(), d = 0; d < c; d++) {
    b = db.Vb("<td width='" + this.el.Hw(d) + "' height=''/>");
    var e = this.jh.xl(this.el.Hc(d), this.eh);
    b.appendChild(e.Yb());
    a.appendChild(b);
  }
  b = [];
  b.add(a);
  return b;
}};
Zf = function(a, b, c, d) {
  this.jh = a;
  this.eh = b;
  this.Su = c;
  this.gk = d;
};
Zf.prototype = {jh:null, eh:null, Su:null, gk:null};
Rf = function(a, b, c, d, e, f) {
  Dg(Rf, this, [a, c, d, e, f]);
  this.el = b;
};
Rf.prototype = {el:null, wG:function(a, b, c) {
  var d = db.Vb("<el></el>");
  db.setAttribute(d, "type", "text");
  db.setAttribute(d, "charprop", b);
  db.setAttribute(d, "link", c);
  d.appendChild(d.ownerDocument.createTextNode(a));
  return d;
}, Yb:function() {
  var a = [], b = this.jh.zf(this.el.vc());
  if (null != this.el) {
    var c = this.el.jg, d = this.el.Yp;
    c = c.replaceAll(String.fromCharCode(160), " ");
    for (var e = 0, f = 0; f < this.Su.length; f++) {
      var k = c.substr(e, this.Su[f].El - e);
      e = this.Su[f].El;
      0 < k.length && a.add(this.wG(k, b, d));
      k = this.Su[f].Np;
      for (var l = 0; l < k.length; l++) {
        a.add(k[l]);
      }
    }
    c = c.substr(e);
    0 < c.length && a.add(this.wG(c, b, d));
    return a;
  }
  return null;
}};
ag = function(a) {
  this.Ac = a;
};
ag.prototype = {Ac:null, parse:function() {
  return null;
}};
bg = function(a, b, c, d, e, f) {
  this.wa = a;
  this.ee = b;
  this.parent = c;
  this.Vh = d;
  this.Yc = e;
  this.OG = [];
  this.current = null;
  this.rb = new Jc();
  this.rb.Be(0);
  this.MA = new Af(f);
};
bg.prototype = {wa:null, ee:null, parent:null, Ma:null, Ok:null, Vh:null, Yc:null, MA:null, rb:null, current:null, OG:null, Ll:function(a, b) {
  return this.MA.Ll(a, b, this.wa, this.ee);
}, parse:function(a, b) {
  b.length || this.RM(a, b);
  var c = this.wa.Re().He(0);
  this.Ma = this.ee.Li(c);
  this.kM(a);
  this.current = this.Ma.Lb(0);
  if (a.hasChildNodes()) {
    a = a.firstChild;
    do {
      1 === a.nodeType && (w(a.nodeName, "p", !0) ? w(a.nodeName, "table", !0) || this.oM(a, c, b) : this.mM(a, b)), a = a.nextSibling;
    } while (null != a);
  }
  return this.Ma;
}, kM:function(a) {
  if (a.hasChildNodes()) {
    a = a.firstChild;
    do {
      if (1 === a.nodeType && !w(a.nodeName, "po", !0)) {
        parseInt(db.we(a)) && this.Ma.iD(!0);
        break;
      }
      a = a.nextSibling;
    } while (null != a);
  }
}, RM:function(a, b) {
  if (a.hasChildNodes()) {
    a = a.firstChild;
    do {
      if (1 === a.nodeType && !w(a.nodeName, "charproperties", !0)) {
        this.jM(a, b);
        break;
      }
      a = a.nextSibling;
    } while (null != a);
  }
}, jM:function(a, b) {
  if (a.hasChildNodes()) {
    a = a.firstChild;
    do {
      1 === a.nodeType && (w(a.nodeName, "charprop", !0) || b.add(this.iH(a))), a = a.nextSibling;
    } while (null != a);
  }
}, iH:function(a) {
  var b = new Ac();
  if (a.hasChildNodes()) {
    a = a.firstChild;
    do {
      if (1 === a.nodeType) {
        w(a.nodeName, "b", !0) || parseInt(db.we(a)) && b.ih(1);
        w(a.nodeName, "i", !0) || parseInt(db.we(a)) && b.ti(1);
        w(a.nodeName, "u", !0) || parseInt(db.we(a)) && b.Gn(1);
        w(a.nodeName, "s", !0) || parseInt(db.we(a)) && b.uD(1);
        w(a.nodeName, "sub", !0) || parseInt(db.we(a)) && b.vD(1);
        w(a.nodeName, "sup", !0) || parseInt(db.we(a)) && b.wD(1);
        w(a.nodeName, "recursivesub", !0) || parseInt(db.we(a)) && b.mt(1);
        w(a.nodeName, "size", !0) || parseInt(db.we(a)) && b.lf(parseInt(db.we(a)));
        w(a.nodeName, "lh", !0) || parseInt(db.we(a)) && b.pD(parseInt(db.we(a)));
        if (!w(a.nodeName, "font", !0)) {
          var c = db.we(a);
          c && this.MA.mr(b, c);
        }
        if (!w(a.nodeName, "color", !0) && (c = db.we(a))) {
          var d = new xb(0, 0, 0, 1);
          d.Xy(c);
          b.cj(d);
        }
        !w(a.nodeName, "bg", !0) && (c = db.we(a)) && (d = new xb(0, 0, 0, 1), d.Xy(c), b.jD(d));
      }
      a = a.nextSibling;
    } while (null != a);
  }
  b = this.wa.Re().zf(b);
  return this.wa.Re().He(b);
}, mM:function(a, b) {
  var c = a.attributes.getNamedItem("charprop"), d = 0;
  null != c && (d = parseInt(c.value));
  c = this.wa.Re().He(0);
  d < b.length && (c = b[d]);
  this.Ma.ie.length === this.rb.Ub() ? (this.current.Xa(this.current.F.length - 1).bf("\n"), this.current = this.ee.Lh(c), this.Ma.hu(this.current)) : this.current.Xa(this.current.F.length - 1).setProperty(c);
  if (a.hasChildNodes()) {
    a = a.firstChild;
    do {
      1 === a.nodeType && (w(a.nodeName, "el", !0) ? w(a.nodeName, "prop", !0) ? w(a.nodeName, "commentstart", !0) ? w(a.nodeName, "commentend", !0) || this.uu(a) : this.vu(a, b) : (d = this.nM(a), this.current.pr(d)) : (d = this.wa.Jq(a), null != d && (this.current.Fg(this.rb, d.parse(a, this.Vh, this.Yc, b)), this.rb.sb(this.rb.ca() + 1)))), a = a.nextSibling;
    } while (null != a);
  }
  this.rb.Yd(this.rb.Ub() + 1);
  this.rb.sb(0);
  this.rb.sc(0);
}, oM:function(a, b, c) {
  this.Ma.ie.length === this.rb.Ub() && (this.current.Xa(this.current.F.length - 1).bf("\n"), this.current = this.ee.Lh(b), this.Ma.hu(this.current));
  if (a.hasChildNodes()) {
    var d = a.firstChild;
    do {
      if (1 === d.nodeType) {
        if (w(d.nodeName, "tr", !0)) {
          "commentstart" === d.nodeName ? this.vu(d, c) : "commentend" === a.nodeName && this.uu(d);
        } else {
          var e = this.wa.Jq(d);
          null != e && this.current.Fg(this.rb, e.parse(d, this.Vh, this.Yc, c));
          this.current.Xa(this.current.F.length - 1).bf("\n");
          this.current = this.ee.Lh(b);
          this.Ma.hu(this.current);
          this.rb.Yd(this.rb.Ub() + 1);
          this.rb.sb(0);
          this.rb.sc(0);
        }
      }
      d = d.nextSibling;
    } while (null != d);
  }
  return this.current;
}, vu:function(a, b) {
  a = this.wa.WJ(a).parse(a, this.Vh, this.Yc, b);
  null != a && (a.nD(this.rb.Qd().clone()), this.OG.add(a));
}, uu:function(a) {
  var b = 0;
  for (a = u.kj.ki(a.attributes); a.Gl();) {
    var c = a.current;
    if (!w(c.name, "index")) {
      b = parseInt(c.value);
      break;
    }
  }
  b = this.iL(b);
  null != b && b.AD(this.rb.Qd().clone());
}, iL:function(a) {
  for (var b = null, c = 0; c < this.Ok.length && (b = this.Ok[c], b.Jw() !== a); c++) {
  }
  return b;
}, nM:function(a) {
  var b = new lf();
  if (a.hasChildNodes()) {
    a = a.firstChild;
    do {
      if (1 === a.nodeType) {
        w(a.nodeName, "butype", !0) || b.Ch(parseInt(db.we(a)));
        w(a.nodeName, "bucase", !0) || b.Co(parseInt(db.we(a)));
        w(a.nodeName, "buparen", !0) || b.CH(parseInt(db.we(a)));
        w(a.nodeName, "buchar", !0) || b.Vg(db.we(a));
        w(a.nodeName, "buprop", !0) || b.wz(this.iH(a));
        if (!w(a.nodeName, "bustart", !0)) {
          var c = db.we(a);
          c && b.ht(parseInt(c));
        }
        w(a.nodeName, "bulevel", !0) || b.KH(parseInt(db.we(a)));
        w(a.nodeName, "align", !0) || b.Bo(parseInt(db.we(a)));
        w(a.nodeName, "indent", !0) || b.oD(parseInt(db.we(a)));
        w(a.nodeName, "hangingindent", !0) || b.HH(parseInt(db.we(a)));
        w(a.nodeName, "linespacing", !0) || b.dN(parseInt(db.we(a)));
      }
      a = a.nextSibling;
    } while (null != a);
  }
  return b;
}};
cg = function(a) {
  Dg(cg, this, [a]);
};
cg.prototype = {parse:function(a, b, c, d) {
  var e = [];
  if (a.hasChildNodes()) {
    a = a.firstChild;
    do {
      if (1 === a.nodeType && !w(a.nodeName, "doc", !0)) {
        var f = this.wa.Qg(a, null, b, c);
        e.add(f.parse(a, d));
      }
      a = a.nextSibling;
    } while (null != a);
  }
  return this.wa.af().Mi("FRACTION", e);
}};
dg = function(a, b) {
  this.qq = a;
  this.Uj = b;
};
dg.prototype = {qq:null, Uj:null, af:function() {
  return this.Uj;
}, Re:function() {
  return this.qq;
}, Qg:function(a, b, c, d) {
  return new bg(this, this.Uj, b, c, d, this.qq);
}, WJ:function() {
  return new ag(this);
}, Jq:function(a) {
  switch(a.attributes.getNamedItem("type").nodeValue) {
    case "text":
      return new fg(this);
    case "image":
      return new gg(this);
    case "frac":
      return new cg(this);
    case "sup":
      return new hg(this, !0);
    case "sub":
      return new hg(this, !1);
    case "sqrt":
      return new ig(this);
    case "expression":
      return new yf(this);
    case "line":
      return new Df(this);
    case "lineSegment":
      return new Bf(this);
    case "ray":
      return new Cf(this);
  }
  return null;
}, Ky:function() {
  return new yf(this);
}, XJ:function() {
  return new fg(this);
}};
gg = function(a) {
  Dg(gg, this, [a]);
  this.Xp = "";
};
gg.prototype = {Xp:null, parse:function(a, b, c) {
  var d = this.wa.af().Mi("PICTURE", null), e = 0, f = 0, k = -1, l = -1, n = "";
  for (a = u.kj.ki(a.attributes); a.Gl();) {
    var p = a.current;
    w(p.name, "width") ? w(p.name, "height") ? w(p.name, "baseline") ? w(p.name, "index") ? w(p.name, "src") ? w(p.name, "ext") || (this.Xp = p.value) : n = p.value : l = parseInt(p.value) : k = parseInt(p.value) : f = parseInt(p.value) : e = parseInt(p.value);
  }
  -1 === k && (k = f);
  d.Dn(l);
  d.Wp(e, f, f - k);
  n ? d.Go(n) : d.Go(b[0] + "?src=" + c[0] + "F" + (l + 1) + this.Xp);
  return d;
}};
ig = function(a) {
  Dg(ig, this, [a]);
};
ig.prototype = {parse:function(a, b, c, d) {
  var e = [];
  if (a.hasChildNodes()) {
    a = a.firstChild;
    do {
      if (1 === a.nodeType && !w(a.nodeName, "doc", !0)) {
        var f = this.wa.Qg(a, null, b, c);
        e.add(f.parse(a, d));
      }
      a = a.nextSibling;
    } while (null != a);
  }
  return this.wa.af().Mi("SQUARE_ROOT", e);
}};
hg = function(a, b) {
  Dg(hg, this, [a]);
  this.TE = b;
};
hg.prototype = {TE:!1, parse:function(a, b, c, d) {
  var e = [];
  if (a.hasChildNodes()) {
    a = a.firstChild;
    do {
      if (1 === a.nodeType && !w(a.nodeName, "doc", !0)) {
        var f = this.wa.Qg(a, null, b, c);
        e.add(f.parse(a, d));
      }
      a = a.nextSibling;
    } while (null != a);
  }
  b = this.wa.af().Mi("SUPER_SUB", e);
  b.xD(this.TE);
  return b;
}};
eg = function(a) {
  Dg(eg, this, [a]);
};
eg.prototype = {parse:function(a, b, c, d) {
  var e = this.wa.af().My(), f = [], k = [];
  if (a.hasChildNodes()) {
    a = a.firstChild;
    do {
      if (1 === a.nodeType && !w(a.nodeName, "td", !0)) {
        var l = a;
        if (l.hasChildNodes()) {
          var n = l.firstChild;
          do {
            if (1 === n.nodeType && !w(n.nodeName, "doc", !0)) {
              n = this.wa.Qg(n, e, b, c).parse(n, d);
              k.add(n);
              break;
            }
            n = a.nextSibling;
          } while (null != n);
        }
        f.add(parseInt(l.attributes.getNamedItem("width").nodeValue) / 15);
      }
      a = a.nextSibling;
    } while (null != a);
  }
  e.yD(f, k);
  return e;
}};
jg = function(a) {
  this.wa = a;
};
jg.prototype = {wa:null};
fg = function(a) {
  Dg(fg, this, [a]);
};
fg.prototype = {parse:function(a, b, c, d) {
  b = a.attributes.getNamedItem("charprop");
  var e = 0;
  null != b && (e = parseInt(b.value));
  c = this.wa.Re().He(0);
  e < d.length && (c = d[e]);
  d = "";
  b = a.attributes.getNamedItem("link");
  null != b && (d = b.value);
  b = this.wa.af().Mh(c);
  b.HG(d);
  a = db.we(a);
  a = a.replaceAll(" ", String.fromCharCode(160));
  b.bf(a);
  return b;
}, Ll:function(a, b) {
  b = this.wa.af().Mh(b);
  a = a.nodeValue;
  a = a.replace(RegExp("  +", "g"), " ");
  a = a.replaceAll(" ", String.fromCharCode(160));
  b.bf(a);
  return b;
}, sG:function(a) {
  for (; null != a && w(a.nodeName, "div", !0) && w(a.nodeName, "p", !0) && w(a.nodeName, "li", !0);) {
    if (!w(a.nodeName, "a", !0)) {
      return a;
    }
    a = a.parentNode;
  }
  return null;
}};
jg.aa("WordControlParser.ElementParser");
yf.aa("WordControlParser.ExpressionParser", jg);
zf.aa("WordControlParser.WordControlProp");
Af.aa("WordControlParser.HtmlParseHelper");
Bf.aa("WordControlParser.LineSegmentParser", jg);
Cf.aa("WordControlParser.RayParser", jg);
Df.aa("WordControlParser.LineParser", jg);
(function() {
}).aa("WordControlParser.CommentSerializer");
Ef.aa("WordControlParser.CommentDataNodes");
Ff.aa("WordControlParser.DocSerializer");
Hf.aa("WordControlParser.ElementRendererSerializer");
Zf.aa("WordControlParser.ElementSerializer");
Lf.aa("WordControlParser._expressionSerializer", Zf);
Mf.aa("WordControlParser.FractionSerializer", Zf);
Gf.aa("WordControlParser.HtmlSerializeHelper");
Nf.aa("WordControlParser.MainDocSerializer", Ff);
Of.aa("WordControlParser.ParagraphRendererSerializer");
Pf.aa("WordControlParser.PictureSerializer", Zf);
Qf.aa("WordControlParser.SerializeFactory");
Xf.aa("WordControlParser.LineSegmentSerializer", Zf);
Yf.aa("WordControlParser.RaySerializer", Zf);
Wf.aa("WordControlParser.LineSerializer", Zf);
Tf.aa("WordControlParser.SquareRootSerializer", Zf);
Vf.aa("WordControlParser.SuperSubSerializer", Zf);
Sf.aa("WordControlParser.TableRowSerializer", Zf);
Rf.aa("WordControlParser.TextSerializer", Zf);
ag.aa("WordControlParser.CommentParser");
bg.aa("WordControlParser.DocParser");
cg.aa("WordControlParser.FractionParser", jg);
dg.aa("WordControlParser.ParseFactory");
gg.aa("WordControlParser.PictureParser", jg);
ig.aa("WordControlParser.SquareRootParser", jg);
hg.aa("WordControlParser.SuperSubParser", jg);
eg.aa("WordControlParser.TableRowParser", jg);
fg.aa("WordControlParser.TextParser", jg);
const Hg = {1:"extension_icon-mcq_single_column", 2:"extension_icon-mcq_two_columns", 3:"extension_icon-mcq_three_columns", 4:"extension_icon-mcq_single_row", 5:"extension_icon-mcq_two_rows", 6:"extension_icon-mcq_three_columns_b",}, Ig = {1:"extension_icon-mrq_single_column", 2:"extension_icon-mrq_two_columns", 3:"extension_icon-mrq_three_columns", 4:"extension_icon-mrq_single_row", 5:"extension_icon-mrq_two_rows", 6:"extension_icon-mrq_three_columns_b",}, Jg = {1:"Vertical", 2:"2 Columns (Horizontal)", 
3:"3 Columns (Horizontal)", 4:"Horizontal", 5:"2 Columns (Vertical)", 6:"3 Columns (Vertical)",};
Object.freeze({HN:1, RN:2, SN:3, ON:4});
const Kg = {Lq:1, Mq:2, CK:3, DK:4, up:5, MK:6, dL:7, UK:100, TK:101, SK:102, RK:103, FK:201, GK:202, EK:203, HK:204, KK:205, PK:206, OK:207, WK:300, XK:301, YK:302,};
Object.freeze(Kg);
const Ng = {te:0, Text:1, cn:2, Fw:3, GB:4};
Object.freeze(Ng);
const Og = {te:0, em:1, Hk:2, sj:3, zl:4,};
Object.freeze(Og);
const Pg = {te:0, Ew:1, yl:2, Gk:3, Pi:4,};
Object.freeze(Pg);
const Qg = {te:0, KB:1, UF:2, IB:3, Vy:4, MB:5, TF:6,};
Object.freeze(Qg);
const Rg = {Ds:0, $K:1, gO:2, Eu:3};
Object.freeze(Rg);
const Sg = {}, Tg = {0:"extension_icon extension_icon-assessment_truefalse", 2:"extension_icon extension_icon-assessment_multiplechoice", 3:"extension_icon extension_icon-assessment_multipleresponse", 5:"extension_icon extension_icon-assessment_yesno", 8:"extension_icon extension_icon-assessment_matching", 9:"extension_icon extension_icon-assessment_shortanswer", 14:"extension_icon extension_icon-assessment_cloze", 16:"extension_icon extension_icon-assessment_hotspot", 19:"extension_icon extension_icon-assessment_draw", 
21:"extension_icon extension_icon-gcal",};
var Ug = 1;
function Xg() {
  Ug ? Ug++ : Ug = 1;
  return Ug.toString();
}
;function Yg(a) {
  return null !== a && void 0 !== a && "" !== a;
}
;function Zg(a) {
  return -1 != a.g;
}
class $g {
  constructor(a, b) {
    this.m = a;
    this.i = b;
    this.startTime = 0;
    this.g = -1;
    this.j = this.l.bind(this);
  }
  stop() {
    -1 != this.g && (clearInterval(this.g), this.g = -1);
  }
  start() {
    this.stop();
    this.startTime = Date.now();
    this.g = setInterval(this.j, this.i);
  }
  l() {
    this.m();
  }
  Hs() {
    return Date.now() - this.startTime;
  }
}
function A(a) {
  return null === a || void 0 === a ? !0 : !1;
}
function ah(a) {
  a = a.toString(16);
  return 1 == a.length ? "0" + a : a;
}
function bh(a) {
  a = a.substring(4);
  a = a.substring(0, a.length - 1);
  a = a.split(",");
  return "#" + ah(parseInt(a[0])) + ah(parseInt(a[1])) + ah(parseInt(a[2]));
}
function ch(a) {
  let b = a.red.toString(16), c = a.green.toString(16);
  a = a.blue.toString(16);
  1 == b.length && (b = "0" + b);
  1 == c.length && (c = "0" + c);
  1 == a.length && (a = "0" + a);
  return "#" + b + c + a;
}
function dh(a) {
  let b, c, d;
  4 == a.length ? (b = "0x" + a[1] + a[1], c = "0x" + a[2] + a[2], d = "0x" + a[3] + a[3]) : 7 == a.length && (b = "0x" + a[1] + a[2], c = "0x" + a[3] + a[4], d = "0x" + a[5] + a[6]);
  return {red:parseInt(b), green:parseInt(c), blue:parseInt(d)};
}
function eh(a, b) {
  for (; null != a;) {
    if (a == b) {
      return !0;
    }
    a = a.parentElement;
  }
  return !1;
}
function gh(a, b) {
  return a.left <= b.right && a.right >= b.left && a.top <= b.bottom && a.bottom >= b.top;
}
function hh(a, b, c) {
  return a >= c.x && a <= c.x + c.width && b >= c.y && b <= c.y + c.height;
}
function ih(a, b) {
  let c = document.createElement("div");
  c.style.visibility = "hidden";
  c.style.position = "absolute";
  c.style.left = "-999em";
  c.style.whiteSpace = "nowrap";
  c.style.fontSize = b + "px";
  c.textContent = a;
  document.body.appendChild(c);
  a = c.clientWidth;
  document.body.removeChild(c);
  return a;
}
function jh(a, b) {
  var c, d;
  let e = d = c = 255;
  a = a.replace("#", "");
  6 == a.length && (c = a.substr(0, 2), d = a.substr(2, 2), a = a.substr(4, 2), c = parseInt(c, 16), d = parseInt(d, 16), e = parseInt(a, 16));
  return "rgba(" + c + "," + d + "," + e + "," + b + ")";
}
function kh(a) {
  return !a || "mouse" != a.pointerType || a.buttons & 1 ? !0 : !1;
}
function lh(a, b) {
  return "string" === typeof a.className && 0 <= a.className.split(" ").indexOf(b) ? !0 : a.parentNode && lh(a.parentNode, b);
}
function mh(a, b) {
  a = document.querySelectorAll(a);
  for (let c = 0; c < a.length; c++) {
    let d = a[c];
    if (d && (d == b || d.contains(b))) {
      return !0;
    }
  }
  return !1;
}
;function nh(a, b) {
  null != b && (a.qe = b);
}
function oh() {
  return "10000000-1000-4000-8000-100000000000".replace(/[018]/g, function(a) {
    return (a ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> a / 4).toString(16);
  });
}
class ph extends EventTarget {
  static get s() {
    return "EVT_UUID_UPDATED";
  }
  constructor() {
    super();
    this.qe = "unset";
  }
  xb() {
    this.qe = oh();
    this.dispatchEvent(new CustomEvent(ph.s, {detail:this.qe}));
  }
  Xf() {
  }
  mc(a, b = {}) {
    this.dispatchEvent(new CustomEvent(a, {detail:b}));
  }
}
;class qh {
  constructor() {
    this.yr = -1;
    this.nv = 1;
  }
}
function rh(a) {
  a.j || (a.j = !0, L.sa({type:"REQ_UPDATE_FEATURES_USE_REQUEST", arrFeature:a.g, uOffset:(new Date()).getTimezoneOffset()}, a.m));
}
function sh(a) {
  a.j = !1;
  a.l++;
  if (a.l > th.g) {
    a.l = 0;
    for (let c = 0; c < a.g.length; c++) {
      var b = a.o;
      b.mc(b.ld, {yr:a.g[c]});
    }
  } else {
    rh(a);
  }
}
function uh(a, b) {
  Zg(a.i) && a.i.i == b || (Zg(a.i) && a.i.stop(), a.i.i = b, a.i.start());
}
class th extends ph {
  static get g() {
    return 3;
  }
  constructor(a) {
    super();
    this.o = a;
    this.l = 0;
    this.Rs = new Map();
    this.g = [];
    this.i = new $g(this.s.bind(this), 0);
    this.m = this.m.bind(this);
    this.j = !1;
  }
  s() {
    rh(this);
  }
  m(a) {
    if (this.j) {
      if (this.j = !1, a.bSuccessful) {
        if ((a = a.arrFeature) && a.length) {
          for (let c = 0; c < a.length; c++) {
            let d = parseInt(a[c].uFeatureId);
            var b = this.Rs.get(d);
            b && (b.nv = parseInt(a[c].uFeatureAccess), 0 == b.nv && -1 != this.g.indexOf(d) && (b = this.o, b.mc(b.ic, {yr:d})));
          }
        } else {
          sh(this);
        }
      } else {
        sh(this);
      }
    }
  }
  re(a) {
    if (!A(a) && a.arrFeature && (this.Rs.clear(), a.arrFeature.length)) {
      for (let d = 0; d < a.arrFeature.length; d++) {
        var b = a.arrFeature[d];
        if (!this.Rs.has(parseInt(b.uFeatureId))) {
          let e = new qh();
          var c = e;
          A(b.uFeatureId) || (c.yr = parseInt(b.uFeatureId));
          A(b.uFeatureAccess) || (c.nv = parseInt(b.uFeatureAccess));
          this.Rs.set(e.yr, e);
        }
      }
    }
  }
}
function vh(a) {
  a.s = -1;
  a.i = null;
  a.j = -1;
  a.Tl = null;
  a.$i = null;
  a.Gb = null;
  a.oi = null;
  a.m = !1;
  a.l = "";
  a.ea = "";
  a.G = "";
  a.g = !1;
  a.B = "";
  a.C = "";
  a.Ha = !1;
  a.ya = !1;
  a.Pe = !1;
  a = a.N;
  a.Rs.clear();
  a.g = [];
  a.l = 0;
  Zg(a.i) && a.i.stop();
  a.j = !1;
}
function yh(a) {
  var b = M;
  a && !b.Ha && b.mc(b.pa);
  b.Ha = a;
  zh(b.Ha);
}
function Ah(a) {
  var b = M;
  b.J = a;
  let c = a.indexOf(":");
  if (-1 != c) {
    let d = a;
    c = a.indexOf(":", c + 1);
    -1 != c && (b.Db = a.substr(c + 1), d = d.substr(0, c), b.Th = b.Db);
    d = d.replace("http://", "");
    d = d.replace("https://", "");
    b.Wi = d;
  }
  b.ba = a + "/ChromeExtension";
  b.pf = a + "/GapiFrame/index.php";
  b.gf = a + "/media";
  b.ia = a + "/downloadmedia.php";
}
function Bh() {
  return M.i;
}
function Ch() {
  return M.ed;
}
function Eh(a, b) {
  a.ya != b && (a.ya = b, window.top == window || Fh(P)) && (console.log("CCL event conn state updated", b), a.mc(Gh.i, {bCCLConnected:b}));
}
function Hh(a) {
  var b = M;
  b.lb = a;
  b.mc(Gh.g, {uUserId:b.s, uUserType:b.j, strUserGuid:b.i});
  b.lb || vh(b);
}
function Ih() {
  var a = M;
  a.mc(Gh.g, {uUserId:a.s, uUserType:a.j, strUserGuid:a.i, bLoggedInUserAccountChange:!0});
}
function Jh() {
  return M.lb;
}
function Kh() {
  return 2 == M.j;
}
function Ph() {
  return 3 == M.j ? !0 : !1;
}
function Qh() {
  return 4 == M.j ? !0 : !1;
}
function Rh(a, b) {
  let c = "";
  c = "laser" === b.toLowerCase() ? "Pointer" : b;
  return (a = a.u.find(d => d.tool.toLowerCase() == b.toLowerCase())) ? (a = a.character, "\b" == a ? a = "BACKSPACE" : " " == a && (a = "SPACE"), c + " (CTRL+SHIFT+" + a + ")") : c;
}
function Sh(a) {
  var b = M;
  b.Dd = [];
  for (let d = 0; d < a.length; d++) {
    let e = new Uh();
    var c = a[d];
    "uFeatureId" in c && (e.yr = parseInt(c.uFeatureId));
    b.Dd.push(e);
  }
}
function Vh(a) {
  var b = M;
  for (let d in a) {
    if (b.eg[d]) {
      let e = b.eg[d];
      var c = a[d];
      c = {tool:e, character:c, keycode:c.toUpperCase().charCodeAt(0)};
      for (let f = 0; f < b.u.length; f++) {
        if (b.u[f].tool == e) {
          b.u[f] = c;
          break;
        }
      }
    }
  }
  [{id:"annotate-highlight-plugin-mouse", Zp:"Select"}, {id:"annotate-highlight-plugin-pen", Zp:"Pen"}, {id:"annotate-highlight-plugin-highlighter", Zp:"Highlighter"}, {id:"annotate-highlight-plugin-eraser", Zp:"Eraser"}, {id:"annotate-highlight-plugin-laser", Zp:"Laser"}, {id:"annotate-highlight-plugin-show-hide", Zp:"Show/Hide annotations"}, {id:"annotate-highlight-plugin-clear-all", Zp:"Delete annotations"}].forEach(d => {
    let e = document.getElementById(d.id);
    e && (e.title = Rh(b, d.Zp));
  });
}
function Wh(a) {
  return M.u.find(b => b.character.toUpperCase() == a);
}
function Xh(a) {
  P.s && Yh(P.s, () => {
    Zh(P.s, a);
  }, $h);
}
function bi(a, b) {
  let c = {prompt:"select_account"};
  "" != a.ea && (c.googleUserId = a.ea);
  a.Qk = b;
  Xh({type:"getAuthToken", authParams:c, tokenResponse:{access_token:a.l}});
}
function ci(a, b) {
  "" == M.l ? (console.log("send get auth token... (on GetAuthToken empty)"), bi(a, b)) : (console.log("LoadAnnotationDetails:validate existing AccessToken"), di(b));
}
function ei() {
  var a = M;
  console.log("Regenerate auth token requested...");
  a.l = "";
  ci(a, () => {
    L.sa({type:"annotateRegenerateAuthToken", accessToken:a.l}, null);
  });
}
function di(a) {
  fetch(`https://www.googleapis.com/oauth2/v3/tokeninfo?access_token=${M.l}`, {method:"GET", async:!0}).then(function(b) {
    if (200 != b.status) {
      throw Error("invalid access token");
    }
    return b.json();
  }).then(b => {
    fi({googleUserId:b.sub}).then(() => {
      var c;
      a: {
        if (c = b.scope) {
          if (c = c.split(" "), 0 < c.length && -1 != c.indexOf("https://www.googleapis.com/auth/drive.install")) {
            c = !0;
            break a;
          }
        }
        c = !1;
      }
      c ? (M.ea = b.sub, a && a(b, null)) : ci(M, a);
    });
  }).catch(b => {
    console.log(`Validatation err: ${b}`);
    M.l = "";
    a ? a(null, b) : ci(M, null);
  });
}
function fi(a) {
  return chrome.runtime.sendMessage({type:"setLocalStorage", data:a});
}
function gi(a, b, c) {
  var d = M;
  a ? fi({accessToken:b.access_token}).then(() => {
    console.log("access token set in local storage...");
    d.l = b.access_token;
    window.top != window && (console.log("sent access token to base frame"), L.sa({type:"AuthTokenForBaseFrame", accessToken:d.l}, null));
    (c || A(c)) && di(d.Qk);
  }) : 4 != b.errType && (d.l = "", ci(d, null));
}
class Gh extends ph {
  static get g() {
    return "EVT_LOGGEDIN_STATE_UPDATED";
  }
  static get i() {
    return "EVT_CCL_CONN_STATE_UPDATED";
  }
  constructor() {
    super();
    this.pa = Xg();
    this.ic = Xg();
    this.ld = Xg();
    this.ed = this.lb = !1;
    this.N = new th(this);
    vh(this);
    this.Lc = !1;
    this.M = 0;
    this.ia = this.gf = this.pf = this.ba = this.J = this.ze = this.Wb = this.v = this.o = this.Db = this.Th = this.Wi = this.Cf = "";
    this.u = [];
    this.u.push({tool:"select", character:"S", keycode:83});
    this.u.push({tool:"pen", character:"P", keycode:80});
    this.u.push({tool:"highlighter", character:"H", keycode:72});
    this.u.push({tool:"eraser", character:"E", keycode:69});
    this.u.push({tool:"laser", character:"L", keycode:76});
    this.u.push({tool:"show/hide annotations", character:" ", keycode:32});
    this.u.push({tool:"delete annotations", character:"\b", keycode:8});
    this.eg = {100:"select", 101:"pen", 103:"highlighter", 104:"eraser", 105:"laser", 108:"show/hide annotations", 109:"delete annotations"};
    this.ib = this.Va = !1;
    this.Xi = -1;
    this.Dd = [];
  }
  re(a) {
    if (a && ("bGuidSupported" in a && (this.ed = a.bGuidSupported), a.ChromeClientLogin && (this.g = a.ChromeClientLogin), "bCCLConnected" in a && Eh(this, a.bCCLConnected), a.uUserId && (this.s = a.uUserId), a.strUserGuid && (this.i = a.strUserGuid), a.strFirstName && (this.B = a.strFirstName), a.strLastName && (this.C = a.strLastName), a.strUserName && (this.Jb = a.strUserName), a.name && (this.oi = a.name), this.j = a.uUserType ? a.uUserType : -1, a.uFeatureValue && (this.Gb = parseInt(a.uFeatureValue)), 
    this.m = this.Gb && 0 < this.Gb ? !1 : !0, a.planInfo && this.N.re(a.planInfo), "uHasOwner" in a && (this.Pe = 1 == parseInt(a.uHasOwner)), null != a.bEducationalTeacherAccount && (this.Lc = 1 == a.bEducationalTeacherAccount ? !0 : !1), null !== a.uAllowedSaveCount ? this.M = a.uAllowedSaveCount : this.M = 0, a.strUserPicture && (this.Tl = a.strUserPicture), a.oUserPicturePosition && (this.$i = a.oUserPicturePosition), a.strS3BucketFullPath && (this.o = a.strS3BucketFullPath), a.strSession && 
    (this.G = a.strSession), a.strMediaRecorderServerIP && (this.Cf = a.strMediaRecorderServerIP), a.strAnnotateDataRequestUrl && (this.v = a.strAnnotateDataRequestUrl), 1 == a.bOpenUser && (this.j = 4), a.uDefaultCategoryId && (this.Xi = a.uDefaultCategoryId), a.serverPricingPageUrl && (this.ze = a.serverPricingPageUrl), a.serverUpgradeUrl && (this.Wb = a.serverUpgradeUrl), a.strWebPagesDivClassName)) {
      var b = hi;
      a = JSON.parse(a.strWebPagesDivClassName);
      A(a) || ("CanvaElementClasses" in a && (b.ya = a.CanvaElementClasses), "ClassroomElementClass" in a && (b.pa = a.ClassroomElementClass), "GslidesElementClass" in a && (b.Ha = a.GslidesElementClass));
    }
  }
}
class Uh {
  constructor() {
    this.yr = -1;
  }
}
var M = new Gh();
function ii(a) {
  L && L.sa({type:"annotateClickData", btnId:a}, null);
}
function ji(a, b) {
  var c = ki;
  c.g = a;
  c.i = b;
  c.mc(qi.g, {wN:c.g});
}
function ri() {
  var a = ki;
  si() && L.kd({type:ti, toolId:a.g, uSelectedToolSubType:a.i});
}
function ui() {
  return 15 == ki.g;
}
class qi extends ph {
  static get g() {
    return "EVT_TOOL_SELECTED";
  }
  constructor() {
    super();
    this.g = 0;
    this.i = 1;
  }
}
var ki = new qi();
function vi(a) {
  var b = {dictPenData:{lstPenCustomData:a.u, curPenColor:a.G, curPenWidth:a.lb, curPenAlpha:a.zw}, dictHighlighterData:{lstHighlighterCustomData:a.v, curHighlighterColor:a.J, curHighlighterWidth:a.ib, curHighlighterAlpha:a.Va}, penProperty:wi(a), highlighterProprty:xi(a), rectProperty:yi(a), ellipseProperty:zi(a), lineProperty:Ai(a), commentProperty:Bi(a), textHighlightProperty:Ci(a), uNotesPanelViewType:a.ba, uDeleteAllAnnotationPreference:a.N};
  setTimeout(function() {
    L.sa({type:"annotateSaveCustomProperties", dictCustomPropData:b}, null);
  }, 200);
}
function Di(a, b) {
  var c = hi;
  0 > a || a >= c.u.length || (c.G = c.u[a], c.B = a, b && vi(c));
}
function Ei(a) {
  a.B = -1;
  for (var b = 0; b < a.u.length; b++) {
    if (a.u[b] == a.G) {
      a.B = b;
      break;
    }
  }
  0 <= a.B && a.B < a.u.length && a.G != a.u[a.B] && (a.G = a.u[a.B]);
  0 <= a.B && a.B < a.u.length && (a.u[a.B] = a.G);
}
function Fi(a) {
  var b = hi;
  b.u = a;
  if (2 == ki.g) {
    for (b.B = -1, a = 0; a < b.u.length; a++) {
      if (b.G == b.u[a]) {
        b.B = a;
        break;
      }
    }
  }
  Ei(b);
}
function Hi(a) {
  a.C = -1;
  for (var b = 0; b < a.v.length; b++) {
    if (a.v[b] == a.J) {
      a.C = b;
      break;
    }
  }
  0 <= a.C && a.C < a.v.length && a.J != a.v[a.C] && (a.J = a.v[a.C]);
  0 <= a.C && a.C < a.v.length && (a.v[a.C] = a.J);
}
function Ii(a) {
  var b = hi;
  if ("lstHighlighterCustomData" in a) {
    b.v = a.lstHighlighterCustomData;
    if (3 == ki.g) {
      for (b.C = -1, a = 0; a < b.v.length; a++) {
        if (b.J == b.v[a]) {
          b.C = a;
          break;
        }
      }
    }
    Hi(b);
  }
}
function wi(a) {
  var b = {};
  b.arrWeight = a.m.xd;
  b.currWeight = a.m.zb;
  b.currColor = a.m.qa;
  b.nOpacity = a.m.Rb;
  b.arrColor = a.m.Xb;
  b.currColorIndex = a.m.Za;
  b.defaultArrColor = a.m.Cc;
  b.defaultWeight = a.m.Cg;
  b.defaultOpacity = a.m.Bg;
  return b;
}
function Ji(a, b) {
  a.m.xd = b.arrWeight;
  a.m.zb = b.currWeight;
  a.m.qa = b.currColor;
  a.m.Rb = b.nOpacity;
  a.m.Xb = b.arrColor;
  a.m.Za = b.currColorIndex;
  a.m.Cc = b.defaultArrColor;
  a.m.Cg = b.defaultWeight;
  a.m.Bg = b.defaultOpacity;
}
function Ai(a) {
  var b = {};
  b.lineStyle = a.i.Nf;
  b.arrowHead = a.i.Ng;
  b.waveSize = a.i.ij;
  b.arrWeight = a.i.xd;
  b.currWeight = a.i.zb;
  b.currColor = a.i.qa;
  b.nOpacity = a.i.Rb;
  b.arrColor = a.i.Xb;
  b.currColorIndex = a.i.Za;
  b.defaultArrColor = a.i.Cc;
  b.defaultWeight = a.i.Cg;
  b.defaultOpacity = a.i.Bg;
  return b;
}
function Ki(a, b) {
  a.i.Nf = b.lineStyle;
  a.i.Ng = b.arrowHead;
  a.i.ij = b.waveSize;
  a.i.xd = b.arrWeight;
  a.i.zb = b.currWeight;
  a.i.qa = b.currColor;
  a.i.Rb = b.nOpacity;
  a.i.Xb = b.arrColor;
  a.i.Za = b.currColorIndex;
  a.i.Cc = b.defaultArrColor;
  a.i.Cg = b.defaultWeight;
  a.i.Bg = b.defaultOpacity;
}
function yi(a) {
  var b = {};
  b.arrWeight = a.j.xd;
  b.currWeight = a.j.zb;
  b.currColor = a.j.qa;
  b.nOpacity = a.j.Rb;
  b.arrColor = a.j.Xb;
  b.currColorIndex = a.j.Za;
  b.currFillColor = a.j.Hd;
  b.arrFillColor = a.j.Ei;
  b.currFillColorIndex = a.j.Kf;
  b.defaultArrFillColor = a.j.Ni;
  b.defaultArrColor = a.j.Cc;
  b.defaultWeight = a.j.Cg;
  b.defaultOpacity = a.j.Bg;
  return b;
}
function Li(a, b) {
  a.j.xd = b.arrWeight;
  a.j.zb = b.currWeight;
  a.j.qa = b.currColor;
  a.j.Rb = b.nOpacity;
  a.j.Xb = b.arrColor;
  a.j.Za = b.currColorIndex;
  a.j.Hd = b.currFillColor;
  a.j.Ei = b.arrFillColor;
  a.j.Kf = b.currFillColorIndex;
  a.j.Ni = b.defaultArrFillColor;
  a.j.Cc = b.defaultArrColor;
  a.j.Cg = b.defaultWeight;
  a.j.Bg = b.defaultOpacity;
}
function zi(a) {
  var b = {};
  b.arrWeight = a.g.xd;
  b.currWeight = a.g.zb;
  b.currColor = a.g.qa;
  b.nOpacity = a.g.Rb;
  b.arrColor = a.g.Xb;
  b.currColorIndex = a.g.Za;
  b.currFillColor = a.g.Hd;
  b.arrFillColor = a.g.Ei;
  b.currFillColorIndex = a.g.Kf;
  b.defaultArrFillColor = a.g.Ni;
  b.defaultArrColor = a.g.Cc;
  b.defaultWeight = a.g.Cg;
  b.defaultOpacity = a.g.Bg;
  return b;
}
function Mi(a, b) {
  a.g.xd = b.arrWeight;
  a.g.zb = b.currWeight;
  a.g.qa = b.currColor;
  a.g.Rb = b.nOpacity;
  a.g.Xb = b.arrColor;
  a.g.Za = b.currColorIndex;
  a.g.Hd = b.currFillColor;
  a.g.Ei = b.arrFillColor;
  a.g.Kf = b.currFillColorIndex;
  a.g.Ni = b.defaultArrFillColor;
  a.g.Cc = b.defaultArrColor;
  a.g.Cg = b.defaultWeight;
  a.g.Bg = b.defaultOpacity;
}
function xi(a) {
  var b = {};
  b.arrWeight = a.l.xd;
  b.currWeight = a.l.zb;
  b.currColor = a.l.qa;
  b.nOpacity = a.l.Rb;
  b.arrColor = a.l.Xb;
  b.currColorIndex = a.l.Za;
  b.defaultArrColor = a.l.Cc;
  b.defaultWeight = a.l.Cg;
  b.defaultOpacity = a.l.Bg;
  return b;
}
function Ni(a, b) {
  a.l.xd = b.arrWeight;
  a.l.zb = b.currWeight;
  a.l.qa = b.currColor;
  a.l.Rb = b.nOpacity;
  a.l.Xb = b.arrColor;
  a.l.Za = b.currColorIndex;
  a.l.Cc = b.defaultArrColor;
  a.l.Cg = b.defaultWeight;
  a.l.Bg = b.defaultOpacity;
}
function Ci(a) {
  var b = {};
  b.currColor = a.s.qa;
  b.currColorIndex = a.s.Za;
  b.defaultArrColor = a.s.Cc;
  return b;
}
function Bi(a) {
  var b = {};
  b.currColor = a.o.qa;
  b.currColorIndex = a.o.Za;
  b.defaultArrColor = a.o.Cc;
  return b;
}
function Oi() {
  var a = hi;
  L.kd({type:Pi, color:dh(a.o.qa), bDefaultColor:-1 != a.o.Cc.indexOf(a.o.qa)});
}
function Qi(a, b) {
  a.ia = !0;
  if ("dictPenData" in b) {
    var c = b.dictPenData;
    "curPenWidth" in c && (a.lb = parseInt(c.curPenWidth));
    "curPenAlpha" in c && (a.zw = parseFloat(c.curPenAlpha));
    "lstPenCustomData" in c && (a.u = c.lstPenCustomData);
    a.G = "curPenColor" in c ? c.curPenColor : a.u[0];
    Ei(a);
  }
  "penProperty" in b && Ji(a, b.penProperty);
  "highlighterProprty" in b && Ni(a, b.highlighterProprty);
  if ("textHighlightProperty" in b) {
    c = b.textHighlightProperty;
    var d = c.currColorIndex;
    if (-1 != d && c.defaultArrColor.length == a.s.Cc.length) {
      if (0 > d || d >= a.s.Cc.length) {
        c.currColorIndex = 0, c.currColor = c.defaultArrColor[0];
      }
      a.s.qa = c.currColor;
      a.s.Za = c.currColorIndex;
      a.s.Cc = c.defaultArrColor;
    }
  }
  if ("commentProperty" in b && (c = b.commentProperty, d = c.currColorIndex, -1 != d && c.defaultArrColor.length == a.o.Cc.length)) {
    if (0 > d || d >= a.o.Cc.length) {
      c.currColorIndex = 0, c.currColor = c.defaultArrColor[0];
    }
    a.o.qa = c.currColor;
    a.o.Za = c.currColorIndex;
    a.o.Cc = c.defaultArrColor;
  }
  "rectProperty" in b && Li(a, b.rectProperty);
  "ellipseProperty" in b && Mi(a, b.ellipseProperty);
  "lineProperty" in b && Ki(a, b.lineProperty);
  "dictHighlighterData" in b && (c = b.dictHighlighterData, "curHighlighterWidth" in c && (a.ib = parseInt(c.curHighlighterWidth)), "curHighlighterAlpha" in c && (a.Va = parseFloat(c.curHighlighterAlpha)), "lstHighlighterCustomData" in c && (a.v = c.lstHighlighterCustomData), a.J = "curHighlighterColor" in c ? c.curHighlighterColor : a.v[0], Hi(a));
  "uNotesPanelViewType" in b && (a.ba = parseInt(b.uNotesPanelViewType));
  "uDeleteAllAnnotationPreference" in b && (a.N = parseInt(b.uDeleteAllAnnotationPreference));
}
function Ri(a) {
  var b = hi;
  return a in b.ya ? b.ya[a] : "";
}
function Si() {
  var a = hi;
  return "slideshowIframe" in a.Ha ? a.Ha.slideshowIframe : "";
}
function Ti() {
  return "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsSAAALEgHS3X78AAACfklEQVRoge2asW/TUBDGvyZpExqkOEICxJCYBbFUeCiwQSRGlgJbB8jIGMQ/UAb2bN0QLIzQpQMDIkhZKhhSsSEBcQekMhCHAo1LW6N76qvtyKlb/M4OlX/SkyzHeXffe/fuTpbhOE7gAKABaAFwEh7kgzbSzwMEdMbAeTk6RxIAYG6MnJejHuRrBsEY8m61WkWv1xu5U1yDbJJtD3qQp6ME7KPrOjRNC3tMOWSTbIcRKmDcSQUkTSogaVIBSZMKIJY+/kHt+S8stAforO+omPLQ5KJO0Hxn48Hrgbh+u7aNR20b1VIG9ZlJNGbz0AoTrAIi78DchUmU8n4nzf6uEKIvbojd4SSyAL2UwdKdadybmRIr76VvO7j14jfqy5tsEiKHEFGr5MTA3nlovt8S4SR59mFLXD29eUKFOR/KsxCFVGu+iJe3p32hRSLokKuGLY1KIV4RdC66/V2ldljrgHEmK0R4WWjbSm2wFzISQQdcojorxVKJG7OuAMpMKotdLAJoF7xYtqNs7th6oUuns4d46uiwCrAG7kqvfuPpkdgEtNa2UW7+ELnfVJw6vSipxEHIdEm5//umP+YNheHEtgOap4Atf3LbCtkvqSpobAJqFXeVv1ius2eLE6JLPb+4AePJz8h22EJINnfYe7EpWfnqHmYV6ZRtByj3D7fXw3gL3L/CmkYvngqe/nolhzfzRTQu5yPbYAsh4r4xhVef/Qe4eaMgOlVVsAogR6+cy2J1fQePrxXw8Gr0FR+GVQCxcvck6/zpe6GkSQUkTSogaVIBSRMqoNvtwrKs2N0km2Q7jFGVeP+fpmmiXC7H5PaBdAJ/PJYfe/w3n9s4Dv4CmiVSwXi9N7YAAAAASUVORK5CYII=";
}
class Ui extends EventTarget {
  constructor() {
    super();
    this.Gb = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
    this.u = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
    this.B = 0;
    this.G = this.u[this.B];
    this.Db = [1, 2, 3, 5, 7, 10, 12, 16];
    this.lb = this.Db[2];
    this.ea = [0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1];
    this.zw = this.ea[8];
    this.Jb = "#f7ee00 #f41489 #30f0bf #fdfd96 #21aeef #bcff00 #9930f2".split(" ");
    this.v = "#f7ee00 #f41489 #30f0bf #fdfd96 #21aeef #bcff00 #9930f2".split(" ");
    this.C = 0;
    this.J = this.v[this.C];
    this.Wb = [8, 10, 12, 14, 16, 18, 20, 22];
    this.ib = this.Wb[3];
    this.Va = this.ea[3];
    this.M = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
    this.ic = "#ffffff #fdfd96 #ffba02 #ff5f69 #98c80a #09b0ef ".split(" ");
    this.m = {};
    this.m.xd = [1, 2, 3, 5, 7, 10, 12, 16];
    this.m.zb = 3;
    this.m.qa = "#000000";
    this.m.Rb = 1;
    this.m.Xb = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
    this.m.Za = 0;
    this.m.Cc = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
    this.m.Cg = 3;
    this.m.Bg = 1;
    this.i = {};
    this.i.Nf = 0;
    this.i.Ng = 0;
    this.i.ij = 0;
    this.i.xd = [1, 2, 3, 5, 7, 10, 12, 16];
    this.i.zb = 3;
    this.i.qa = "#000000";
    this.i.Rb = 1;
    this.i.Xb = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
    this.i.Za = 0;
    this.i.Cc = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
    this.i.Cg = 3;
    this.i.Bg = 1;
    this.j = {};
    this.j.xd = [1, 2, 3, 5, 7, 10, 12, 16];
    this.j.zb = 3;
    this.j.qa = "#000000";
    this.j.Rb = 0.8;
    this.j.Xb = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
    this.j.Za = 0;
    this.j.Hd = "";
    this.j.Ei = " #ffffff #000000 #f41489 #30f0bf #fdfd96 #21aeef".split(" ");
    this.j.Kf = 0;
    this.j.Ni = " #ffffff #000000 #f41489 #30f0bf #fdfd96 #21aeef".split(" ");
    this.j.Cc = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
    this.j.Cg = 3;
    this.j.Bg = 1;
    this.g = {};
    this.g.xd = [1, 2, 3, 5, 7, 10, 12, 16];
    this.g.zb = 3;
    this.g.qa = "#000000";
    this.g.Rb = 0.8;
    this.g.Xb = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
    this.g.Za = 0;
    this.g.Hd = "";
    this.g.Ei = " #ffffff #000000 #f41489 #30f0bf #fdfd96 #21aeef".split(" ");
    this.g.Kf = 0;
    this.g.Ni = " #ffffff #000000 #f41489 #30f0bf #fdfd96 #21aeef".split(" ");
    this.g.Cc = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
    this.g.Cg = 3;
    this.g.Bg = 1;
    this.l = {};
    this.l.xd = [8, 10, 12, 14, 15, 18, 20, 22];
    this.l.zb = 14;
    this.l.qa = "#fdfd96";
    this.l.Rb = 0.5;
    this.l.Xb = "#f7ee00 #f41489 #30f0bf #fdfd96 #21aeef #bcff00 #9930f2".split(" ");
    this.l.Za = 0;
    this.l.Cc = "#f7ee00 #f41489 #30f0bf #fdfd96 #21aeef #bcff00 #9930f2".split(" ");
    this.l.Cg = 14;
    this.l.Bg = 0.5;
    this.o = {};
    this.o.qa = "#f7ee00";
    this.o.Za = 0;
    this.o.Cc = "#f7ee00 #f41489 #30f0bf #fdfd96 #21aeef #bcff00 #9930f2 #ffba02".split(" ");
    this.s = {};
    this.s.qa = "#f7ee00";
    this.s.Za = 0;
    this.s.Cc = "#f7ee00 #f41489 #30f0bf #fdfd96 #21aeef #bcff00 #9930f2 #ffba02".split(" ");
    this.ia = !1;
    this.ya = {WorkspaceEdit:"h0_i9w", WorkspaceView:"main", WorkspacePresentation:"NSPwaw", WorkspacePresentorView:"lbAfvQ _1B2qlQ", SlidesParent:"Lhb3fg _682gpw", CanvasContainerEdit:"zljx4g", CanvasEdit:"RzZ2dA", CanvasPresentation:"_23y8bA", CanvasView:"RpZ9dQ", BlueBorder:"iwbuOQ FIF4WQ", PresentationNavigation:"_10frKg", ViewNavigation:"EA7tKA", CountDisplay:"vI0QHg", SlideSelector:"w4Cxvw _1B2qlQ", Grid:"LpwxGA",};
    this.pa = {ReturnBtn:"uArJ5e UQuaGc kCyAyd l3F1ye ARrCac HvOprf evJWRb M9Bg4d", MenuParent:".Y5vSD.SRX5Hd"};
    this.Ha = {slideshowIframe:"punch-present-iframe"};
    this.ba = 2;
    this.N = 0;
  }
}
var hi = new Ui();
function fj(a, b, c, d) {
  let e = new Rc(a.g);
  b = (new dg(a.g, e)).Qg(null, null, []).Ll(b);
  let f = new Ze(), k = e.sB(a.g.He(0));
  c = f.tB(Math.ceil(c));
  a = new Hc(e, k, c, a.g, new xb(0, 0, 0, 0.87));
  a.kx();
  a.$w(b, !0);
  c.lz();
  c.aj(d, [], 0, 0, new mb(0, 0, 1000, 1000));
}
function gj(a, b) {
  if ("" != b.data) {
    var c = new Rc(a.g), d = (new dg(a.g, c)).Qg(null, null, []), e = b.R;
    if (!e) {
      var f = document.getElementsByClassName(b["class"]);
      f.length && (e = f[0].parentNode);
    }
    e || (e = document.createElement("div"), e.innerHTML = b.data);
    if (e) {
      d = d.Ll(e);
      f = new Ze();
      e = c.sB(a.g.He(0));
      b = f.tB(Math.ceil(b.width));
      a = new Hc(c, e, b, a.g, new xb(0, 0, 0, 0.87));
      a.kx();
      a.$w(d, !0);
      b.lz();
      a = b.cz([], 0, 0, new mb(0, 0, 1000, 1000));
      for (b = 0; b < a.length; b++) {
        c = a[b];
        d = a[b].style;
        d = d.replace(/\s/g, "");
        ";" == d.slice(-1) && (d = d.slice(0, -1));
        e = d.split(";");
        f = {};
        for (let k = 0; k < e.length; k++) {
          d = e[k].split(":"), f[d[0]] = isNaN(d[1]) ? d[1] : parseFloat(d[1]);
        }
        c.style = f;
      }
      return a;
    }
  }
}
class hj {
  constructor() {
    var a = new Ac();
    a.set("Arial", 20, 0, 0, 0, 0, new xb(0, 0, 0, 0.87), new xb(255, 255, 255, 0), 0, 0);
    this.g = new Ec(a);
    a = a.hi();
    a.ti(1);
    this.g.zf(a);
    Ac.bN();
  }
}
;class ij {
  constructor(a, b) {
    this.i = a;
    this.g = b;
  }
}
function jj(a, b, c, d) {
  let e = a.j[b];
  e || (e = [], a.j[b] = e);
  a: {
    if (a = a.j[b]) {
      for (b = 0; b < a.length; b++) {
        if (a[b].g == d) {
          a = a[b];
          break a;
        }
      }
    }
    a = null;
  }
  a || e.push(new ij(c, d));
}
class kj {
  constructor() {
    this.j = {};
  }
  mc(a, b) {
    if (this.j[a]) {
      var c = this.j[a].slice(0);
      if (c) {
        for (let d = 0; d < c.length; d++) {
          c[d].i.call(c[d].g, a, b);
        }
      }
    }
  }
  U() {
    this.j = {};
  }
}
;function R(a, b) {
  a.el.classList.add(b);
}
function lj(a, b, c) {
  a.el.setAttribute(b, c);
}
function mj(a) {
  a.el.style.width = "auto";
  a.ld = !0;
  a.Dd = !0;
}
function nj(a, b) {
  a.ur = b;
  a.el.classList.add(b);
}
function oj(a, b) {
  b && 0 != b.length && b.forEach(c => {
    R(a, c);
  });
}
function pj(a, b) {
  b && b.length && a.el.classList.remove(b);
}
function qj(a) {
  return a.el.style;
}
function rj(a, b) {
  a.el.innerHTML = b;
  a.ld && (a.Dd = !0);
}
function sj(a, b) {
  a.el.style.cursor = b;
}
function tj(a, b) {
  a.el.style.position = b;
}
function uj(a, b) {
  qj(a).pointerEvents = b;
}
function vj(a, b) {
  a.el.style.textAlign = b;
}
function wj(a, b) {
  a.el.style.lineHeight = b + "px";
}
function xj(a, b) {
  a.el.style.margin = b + "px";
}
function yj(a, b) {
  a.el.style.border = b;
}
function zj(a, b) {
  a.el.style.backgroundColor = b;
}
function Aj(a, b) {
  0 <= b && 1 >= b && (a.el.style.opacity = b.toString());
}
function Bj(a) {
  for (; null != a && !a.oi();) {
    a = a.B();
  }
}
function Cj(a, b) {
  a.display = b;
  a.el.style.display = a.display;
}
function Ej(a, b) {
  a.el.textContent = b;
}
function Fj(a, b) {
  if (!a.ob()) {
    return !1;
  }
  if (b.target == a.el || a.el.contains(b.target)) {
    return !0;
  }
  let c = b.pageX;
  b = b.pageY;
  var d = a.el.getBoundingClientRect();
  if (d) {
    a = d.width;
    let e = d.height, f = d.top;
    d = d.left;
    if (c > d && c < d + a && b > f && b < f + e) {
      return !0;
    }
  }
  return !1;
}
function Gj(a, b) {
  a.el.style.backgroundSize = b;
}
function Hj(a) {
  R(a, "AnnotateLoading");
}
function Ij(a) {
  pj(a, "AnnotateLoading");
}
function Jj(a) {
  a.el && !a.uE && (a.uE = !0, a.el.addEventListener("pointerdown", a.OI, {capture:!0, passive:!1}), a.el.addEventListener("touchstart", b => {
    b.preventDefault();
  }, {capture:!0, passive:!1}));
}
function Kj(a, b) {
  a.Pe = b;
  Jj(a);
}
function Lj(a) {
  window.removeEventListener("pointerup", a.eE, {capture:!0});
  window.removeEventListener("pointercancel", a.UD, {capture:!0});
  window.removeEventListener("touchmove", a.il, {capture:!0});
  window.removeEventListener("pointermove", a.YD, {capture:!0});
}
function Mj(a, b, c, d, e) {
  a ? (window.addEventListener("pointerup", c, {capture:!0, passive:!1}), window.addEventListener("pointercancel", d, {capture:!0, passive:!1}), window.addEventListener("touchmove", e, {capture:!0, passive:!1}), window.addEventListener("pointermove", b, {capture:!0, passive:!1})) : (window.removeEventListener("pointerup", c, {capture:!0}), window.removeEventListener("pointercancel", d, {capture:!0}), window.removeEventListener("touchmove", e, {capture:!0}), window.removeEventListener("pointermove", 
  b, {capture:!0}));
}
class Nj extends EventTarget {
  constructor(a) {
    super();
    null != a && a.length || (a = "div");
    this.el = document.createElement(a);
    R(this, "extension_reset_css");
    R(this, "AnnotateNet_widget");
    this.display = "block";
    this.ld = !1;
    this.visible = !0;
    this.children = [];
    this.height = this.width = this.right = this.bottom = this.top = this.left = 0;
    this.Dd = !1;
    this.parent = null;
    this.ur = "";
    this.sf = !0;
    this.scale = 1;
    this.G = null;
    this.$m = !0;
    this.eB = this.uE = !1;
    this.Mp = this.Tp = this.Pe = null;
    this.Le(this.Zb());
    this.OI = this.J.bind(this);
    this.eE = this.ZD.bind(this);
    this.UD = this.JI.bind(this);
    this.il = this.YI.bind(this);
    this.YD = this.Wi.bind(this);
  }
  he(a) {
    this.el.id = a;
  }
  Bi(a) {
    this.el.value = a;
  }
  Le(a) {
    lj(this, "data-id", a);
  }
  Zb() {
    return "Widget";
  }
  On() {
    return this.el.id;
  }
  Ba(a) {
    return a * this.scale;
  }
  U() {
    this.el && this.el.remove();
  }
  B() {
    return this.parent;
  }
  vf(a) {
    this.el.style.fontSize = a + "px";
    this.ld && (this.Dd = !0);
  }
  xe(a) {
    this.el.style.color = a;
  }
  jb(a) {
    this.el.style.zIndex = a;
  }
  Im(a) {
    this.el.style.backgroundImage = a && "" != a ? 'url("' + a + '")' : "";
  }
  Nd(a) {
    this.left = a;
    this.el.style.left = a + "px";
  }
  Ee(a) {
    this.top = a;
    this.el.style.top = a + "px";
  }
  fq() {
    return this.bottom;
  }
  Oo() {
    return this.right;
  }
  ah() {
    return 0;
  }
  ga(a, b) {
    this.Nd(a);
    this.Ee(b);
  }
  Oz() {
  }
  Qc(a) {
    this.ld || (this.width = a, this.el.style.width = a + "px");
  }
  Mb(a) {
    this.height = a;
    this.el.style.height = a + "px";
  }
  v(a) {
    this.el.style.padding = a;
  }
  ef(a) {
    this.scale = a;
    this.el.style.transformOrigin = "left top";
    this.el.style.transform = "scale(" + a + ")";
  }
  ab() {
    return this.Ra() * this.scale;
  }
  Ka() {
    return this.wb() * this.scale;
  }
  Qj(a) {
    this.el.style.borderBottom = a;
  }
  V(a, b) {
    this.Qc(a);
    this.Mb(b);
  }
  oi() {
    return !1;
  }
  vd() {
    return this.left;
  }
  rd() {
    return this.top;
  }
  Ra() {
    this.ld && this.Dd && (this.width = this.el.offsetWidth, this.Dd = !1);
    return this.width;
  }
  wb() {
    return this.height;
  }
  pb() {
    this.visible = !0;
    this.el.style.display = this.display;
  }
  ja() {
    this.visible = !1;
    this.el.style.display = "none";
  }
  ob() {
    return this.visible;
  }
  Z(a) {
    this.ay(a);
    this.el.appendChild(a.el);
    this.children.push(a);
    a.qm(this);
  }
  qm(a) {
    this.parent = a;
  }
  ay(a) {
    let b = this.children.indexOf(a);
    -1 !== b && (this.el.removeChild(a.el), this.children.splice(b, 1), a.parent = null);
  }
  jl(a, b) {
    this.el.scroll({top:b, left:a, behavior:"smooth"});
  }
  di() {
    return this.el.scrollHeight;
  }
  $g() {
    return this.el.clientHeight;
  }
  Yf() {
    return this.el.clientWidth;
  }
  hc(a) {
    return a && a.target && this.ob() && (a.target == this.el || this.el.contains(a.target)) ? !0 : !1;
  }
  uc(a) {
    this.el.title = a;
  }
  Lo(a) {
    a.preventDefault();
    a.stopPropagation();
  }
  fl(a) {
    return this.sf ? !0 : (this.Lo(a), !1);
  }
  J(a) {
    this.fl(a) && (this.Lo(a), window.addEventListener("pointerup", this.eE, {capture:!0, passive:!1}), window.addEventListener("pointercancel", this.UD, {capture:!0, passive:!1}), window.addEventListener("touchmove", this.il, {capture:!0, passive:!1}), window.addEventListener("pointermove", this.YD, {capture:!0, passive:!1}));
  }
  YI(a) {
    a.cancelable && a.preventDefault();
  }
  Wi(a) {
    a.preventDefault();
  }
  JI(a) {
    a.preventDefault();
    Lj(this);
  }
  ZD(a) {
    a.preventDefault();
    Lj(this);
    if (a.target == this.el || this.el.contains(a.target)) {
      let b = {};
      b.currentTarget = this.el;
      b.offsetX = a.offsetX;
      b.offsetY = a.offsetY;
      this.Pe && this.Pe.call(this, b);
    }
  }
  mc(a, b = {}) {
    this.dispatchEvent(new CustomEvent(a, {detail:b}));
  }
}
;var Oj = null;
function Pj(a, b) {
  for (var c in b) {
    a.style[c] = b[c];
  }
}
function Qj() {
  Oj && (Oj.style.display = "none");
  Oj = null;
}
function Rj(a) {
  function b() {
    window.addEventListener("pointerup", d, !1);
    window.addEventListener("pointercancel", c, !1);
  }
  function c() {
    window.removeEventListener("pointerup", d, !1);
    window.removeEventListener("pointercancel", c, !1);
  }
  function d(f) {
    window.removeEventListener("pointerup", d, !1);
    window.removeEventListener("pointercancel", c, !1);
    var k = {};
    k.pageX = f.pageX;
    k.pageY = f.pageY;
    k.clientX = f.clientX;
    k.clientY = f.clientY;
    k.currentTarget = e;
    k.target = f.target;
    k.altKey = f.altKey;
    k.shiftKey = f.shiftKey;
    k.ctrlKey = f.ctrlKey;
    k.buttons = f.buttons;
    k.button = f.button;
    k.pointerType = f.pointerType;
    if (f.target == e || e.contains(f.target)) {
      if (a.UC) {
        Qj();
        var l = document.body.getBoundingClientRect(), n = e.getBoundingClientRect();
        Oj = a.UC;
        f = n.top - l.top - 5;
        Oj.style.left = n.left - l.left - 5 + "px";
        Oj.style.top = f + "px";
        Oj.style.display = "block";
        l = Oj.getBoundingClientRect();
        l.top + l.height > window.visualViewport.height && (f = f + window.visualViewport.height - l.top - l.height);
        Oj.style.top = f + "px";
      }
      a.Qa && a.Qa.call(this, k);
    }
  }
  var e = document.createElement("div");
  a.id && (e.id = a.id);
  a.title && e.setAttribute("title", a.title);
  e.style.userSelect = "none";
  e.style.cursor = "pointer";
  a.selected && (e.style.borderBottom = "3px solid #2196f3");
  e.className = "extension_reset_css";
  a.className && (e.className += " " + a.className);
  a.style && Pj(e, a.style);
  a.innerHTML && (e.innerHTML = a.innerHTML);
  (a.Qa || a.UC) && e.addEventListener("pointerdown", b, !1);
  a.fv && e.addEventListener("pointerdown", a.fv, {passive:!1});
  a.jr && e.addEventListener("pointerup", a.jr, {passive:!1});
  return e;
}
function Sj(a) {
  function b() {
    window.addEventListener("pointerup", d, !1);
    window.addEventListener("pointercancel", c, !1);
  }
  function c() {
    window.removeEventListener("pointerup", d, !1);
    window.removeEventListener("pointercancel", c, !1);
  }
  function d(l) {
    window.removeEventListener("pointerup", d, !1);
    window.removeEventListener("pointercancel", c, !1);
    var n = {};
    n.pageX = l.pageX;
    n.pageY = l.pageY;
    n.clientX = l.clientX;
    n.clientY = l.clientY;
    n.currentTarget = k;
    n.target = l.target;
    n.altKey = l.altKey;
    n.shiftKey = l.shiftKey;
    n.ctrlKey = l.ctrlKey;
    n.buttons = l.buttons;
    n.button = l.button;
    (l.target == k || k.contains(l.target)) && a.Qa && a.Qa.call(this, n);
  }
  var e = a.Qa;
  a.Qa = null;
  var f = Rj(a);
  a.Qa = e;
  var k = document.createElement("div");
  k.appendChild(f);
  k.style.userSelect = "none";
  k.style.cursor = "pointer";
  a.style && (a.style.color = a.style.backgroundColor, a.style.backgroundColor = "", a.style.border = "0", a.style.borderRadius = "0", a.BJ && (a.style.width = a.EO), Pj(k, a.style));
  a.style.background && "" != a.style.background && (k.style.backgroundImage = "");
  a.style.marginLeft && (f.style.marginLeft = "0");
  a.selected && (k.style.borderBottom = "3px solid #2196f3");
  k.className = "extension_reset_css";
  a.className && (k.className += " " + a.className, f.className = "");
  a.Qa && k.addEventListener("pointerdown", b, !1);
  a.jr && (f.removeEventListener("pointerup", a.jr, !1), k.addEventListener("pointerup", a.jr, !1));
  e = parseInt(f.style.height);
  k.style.height = e + 6 + "px";
  a.BJ ? (f.style.position = "relative", f.style.top = (e + 6 - a.strokeWidth - 2) / 2 + "px", f.style.left = (e - a.strokeWidth - 2) / 2 + "px") : f.style.paddingBottom = "4px";
  return k;
}
function Tj(a) {
  var b = document.createElement("input");
  b.type = "range";
  b.min = "0";
  b.max = "255";
  b.style.userSelect = "none";
  b.className = "extension_reset_css";
  a.className && (b.className += " " + a.className);
  a.id && (b.id = a.id);
  a.style && Pj(b, a.style);
  a.value && (b.value = a.value);
  a.NL && b.addEventListener("input", a.NL, {passive:!1});
  a.IJ && b.addEventListener("change", a.IJ, {passive:!1});
  return b;
}
function Uj(a) {
  var b = document.createElement("div");
  b.style.userSelect = "none";
  a.innerHTML && (b.innerHTML = a.innerHTML);
  a.id && (b.id = a.id);
  b.className = "extension_reset_css";
  a.className && (b.className += " " + a.className);
  a.style && Pj(b, a.style);
  return b;
}
function Vj(a) {
  var b = document.createElement("div");
  b.className = "extension_reset_css";
  b.style.userSelect = "none";
  a.id && (b.id = a.id);
  a.style && Pj(b, a.style);
  if (a.Lp) {
    var c = Uj(a.Lp);
    b.appendChild(c);
  }
  a.RL && (c = Rj(a.RL), b.appendChild(c));
  a.BN && (c = Uj(a.BN), b.appendChild(c));
  a.bD && (a = Rj(a.bD), b.appendChild(a));
  return b;
}
function Wj(a) {
  var b = a.buttons, c = null;
  if (b && b.length) {
    for (c = document.createElement("div"), c.className = "extension_reset_css", c.style.userSelect = "none", a.id && (c.id = a.id), a.style && Pj(c, a.style), a = 0; a < b.length; a++) {
      var d = Sj(b[a]);
      d && c.appendChild(d);
    }
  }
  return c;
}
function Xj(a) {
  var b = document.createElement("div");
  b.className = "extension_reset_css";
  b.style.userSelect = "none";
  a.id && (b.id = a.id);
  a.style && Pj(b, a.style);
  if (a.rz) {
    var c = a.rz, d = document.createElement("div");
    d.className = "extension_reset_css";
    d.style.userSelect = "none";
    c.id && (d.id = c.id);
    c.style && Pj(d, c.style);
    function f() {
      window.addEventListener("pointerup", l, !1);
      window.addEventListener("pointercancel", k, !1);
    }
    function k() {
      window.removeEventListener("pointerup", l, !1);
      window.removeEventListener("pointercancel", k, !1);
    }
    function l(n) {
      window.removeEventListener("pointerup", l, !1);
      window.removeEventListener("pointercancel", k, !1);
      (n.target == d || d.contains(n.target)) && c.Qa && c.Qa.call(this, n);
    }
    c.Qa && d.addEventListener("pointerdown", f, !1);
    c.fv && d.addEventListener("pointerdown", c.fv, {passive:!1});
    c.jr && d.addEventListener("pointerup", c.jr, {passive:!1});
    b.appendChild(d);
  }
  if (a.wK) {
    a = a.wK;
    var e = document.createElement("div");
    e.className = "extension_reset_css";
    e.style.userSelect = "none";
    a.id && (e.id = a.id);
    a.style && Pj(e, a.style);
    b.appendChild(e);
    a.xK && (e = new Hammer(e), e.add(new Hammer.Pan({direction:Hammer.DIRECTION_ALL, threshold:0})), e.on("pan", a.xK));
  }
  return b;
}
var Yj = "2147483645";
function hk(a) {
  var b = a.buttons, c = null;
  if (b && b.length) {
    c = document.createElement("div");
    c.style.userSelect = "none";
    c.style["-webkit-user-select-none"] = "none";
    c.style.clear = "both";
    ik(c);
    a.title && c.setAttribute("title", a.title);
    a.id && (c.id = a.id);
    a.style && Pj(c, a.style);
    c.className = "extension_reset_css annotate-no-print ";
    a.className && (c.className += a.className);
    if (a.BD) {
      var d = a.BD, e = document.createElement("div");
      e.className = "extension_reset_css";
      e.style.userSelect = "none";
      d.id && (e.id = d.id);
      d.style && Pj(e, d.style);
      if (d.kC) {
        var f = d.kC, k = document.createElement("div");
        k.className = "extension_reset_css";
        k.style.userSelect = "none";
        f.id && (k.id = f.id);
        f.style && Pj(k, f.style);
        if (f.Lp) {
          var l = Uj(f.Lp);
          k.appendChild(l);
        }
        f.pB && (f = Rj(f.pB), k.appendChild(f));
        e.appendChild(k);
      }
      d.DN && (k = Vj(d.DN), e.appendChild(k));
      d.FN && (k = Wj(d.FN), e.appendChild(k));
      d.hM && (k = Vj(d.hM), e.appendChild(k));
      d.OJ && (k = d.OJ, d = document.createElement("div"), d.className = "extension_reset_css", d.style.userSelect = "none", k.id && (d.id = k.id), k.style && Pj(d, k.style), k.Lp && (f = Uj(k.Lp), d.appendChild(f)), k.LJ && (f = Rj(k.LJ)) && d.appendChild(f), k.bD && (k = Rj(k.bD), d.appendChild(k)), e.appendChild(d));
      e && c.appendChild(e);
      e = a.BD;
      e.PJ && (d = e.PJ, e = document.createElement("div"), e.className = "extension_reset_css", e.style.userSelect = "none", d.id && (e.id = d.id), d.style && Pj(e, d.style), d.kC && (f = d.kC, k = document.createElement("div"), k.className = "extension_reset_css", k.style.userSelect = "none", f.id && (k.id = f.id), f.style && Pj(k, f.style), f.CJ && (l = Rj(f.CJ), k.appendChild(l)), f.Lp && (l = Uj(f.Lp), k.appendChild(l)), f.pB && (f = Rj(f.pB), k.appendChild(f)), e.appendChild(k)), d.oK && (k = 
      d.oK, k.Lp && (f = Uj(k.Lp), e.appendChild(f)), k = Wj(k), e.appendChild(k)), d.cK && (k = Uj(d.cK), e.appendChild(k)), d.NJ && (k = Xj(d.NJ), e.appendChild(k)), d.SH && (f = d.SH, k = document.createElement("div"), k.className = "extension_reset_css", k.style.userSelect = "none", f.id && (k.id = f.id), f.style && Pj(k, f.style), f.AM && (l = Tj(f.AM), k.appendChild(l)), f.zM && (l = Uj(f.zM), k.appendChild(l)), f.FL && (l = Tj(f.FL), k.appendChild(l)), f.EL && (l = Uj(f.EL), k.appendChild(l)), 
      f.EJ && (l = Tj(f.EJ), k.appendChild(l)), f.DJ && (f = Uj(f.DJ), k.appendChild(f)), e.appendChild(k)), d.rz && (k = d.rz, d = document.createElement("div"), d.className = "extension_reset_css", d.style.userSelect = "none", k.id && (d.id = k.id), k.style && Pj(d, k.style), k.CN && (k = k.CN, f = document.createElement("div"), f.className = "extension_reset_css", f.style.userSelect = "none", k.id && (f.id = k.id), k.style && Pj(f, k.style), f && d.appendChild(f)), e.appendChild(d)), e && c.appendChild(e));
    }
    e = c;
    a.AF && (d = a.AF, e = document.createElement("div"), e.className = "extension_reset_css", e.style.userSelect = "none", d.id && (e.id = d.id), d.style && Pj(e, d.style), c.appendChild(e));
    for (d = 0; d < b.length; d++) {
      (k = a.xJ ? Sj(b[d]) : Rj(b[d])) && e.appendChild(k);
    }
    a.parent.appendChild(c);
  }
  return c;
}
function jk(a) {
  var b = a.buttons, c = null;
  if (b && b.length) {
    c = document.createElement("div");
    c.style.userSelect = "none";
    c.style["-webkit-user-select-none"] = "none";
    c.style.clear = "both";
    ik(c);
    a.title && c.setAttribute("title", a.title);
    a.id && (c.id = a.id);
    a.style && Pj(c, a.style);
    c.className = "extension_reset_css annotate-no-print ";
    a.className && (c.className += a.className);
    for (var d = 0; d < b.length; d++) {
      var e;
      (e = kk(b[d])) && c.appendChild(e);
    }
    a.parent.appendChild(c);
  }
  return c;
}
function kk(a) {
  function b() {
    window.addEventListener("pointerup", d, !1);
    window.addEventListener("pointercancel", c, !1);
  }
  function c() {
    window.removeEventListener("pointerup", d, !1);
    window.removeEventListener("pointercancel", c, !1);
  }
  function d(k) {
    window.removeEventListener("pointerup", d, !1);
    window.removeEventListener("pointercancel", c, !1);
    (k.target == e || e.contains(k.target)) && a.Qa && a.Qa.call(this, k);
  }
  var e = document.createElement("div");
  a.id && (e.id = a.id);
  a.title && e.setAttribute("title", a.title);
  e.style.userSelect = "none";
  e.style.cursor = "pointer";
  e.className = "extension_reset_css";
  a.className && (e.className += " " + a.className);
  a.style && Pj(e, a.style);
  a.innerHTML && (e.innerHTML = a.innerHTML);
  if (a.label) {
    if (a.icon) {
      var f = document.createElement("div");
      f.style.height = "26px";
      f.style.width = "26px";
      f.style.boxSizing = "border-box";
      f.style.position = "absolute";
      f.style.top = "11px";
      f.style.left = "11px";
      f.id = a.id + "-icon";
      a.icon.includes("svg") ? f.innerHTML = a.icon : f.className = "extension_reset_css " + a.icon;
      e.appendChild(f);
    }
    f = document.createElement("div");
    f.classList.add("extension_reset_css");
    f.style.height = "auto";
    f.style.width = a.style && a.style.width ? a.style.width : "160px";
    f.style.position = "absolute";
    f.style.top = "15px";
    f.style.left = a.icon ? "48px" : "16px";
    f.classList.contains("annotate-highlight-plugin-popup-item-label") || f.classList.add("annotate-highlight-plugin-popup-item-label");
    f.innerHTML = a.label;
    e.appendChild(f);
  } else {
    a.icon && (f = document.createElement("div"), f.style.height = "26px", f.style.width = "26px", f.style.boxSizing = "border-box", f.style.position = "absolute", f.style.top = "11px", f.style.left = "11px", f.id = a.id + "-icon", a.icon.includes("svg") ? f.innerHTML = a.icon : f.className = "extension_reset_css " + a.icon, e.appendChild(f));
  }
  a.Qa && e.addEventListener("pointerdown", b, !1);
  a.fv && e.addEventListener("pointerdown", a.fv, {passive:!1});
  a.jr && e.addEventListener("pointerup", a.jr, {passive:!1});
  return e;
}
function lk(a, b, c, d) {
  if (0 == d.Rc - b.Rc) {
    var e = Math.abs(b.Rc - c.Rc);
  } else {
    e = (d.Xc - b.Xc) / (d.Rc - b.Rc), e = Math.abs(c.Xc - e * c.Rc - (b.Xc - e * b.Rc)) / Math.sqrt(e * e + 1);
  }
  e = Math.round(e) + 1;
  8 < e && (e = 8);
  1 > e && (e = 1);
  var f = 1.0 / e, k = 0.0, l = 1.0, n = b.Rc;
  b = b.Xc;
  var p = c.Rc;
  c = c.Xc;
  var t = d.Rc;
  d = d.Xc;
  for (var x, D, G, I, Q = 1; Q < e; ++Q) {
    k += f, l -= f, D = l * l, G = 2.0 * k * l, I = k * k, x = n * D + p * G + t * I, D = b * D + c * G + d * I, a.lineTo(x, D);
  }
  a.lineTo(t, d);
}
function mk(a, b) {
  for (var c = [], d = 0; d < a.length; ++d) {
    c.push({style:{height:"24px", width:"24px", backgroundColor:a[d], borderRadius:"50%", marginBottom:d == a.length - 1 ? "0px" : "4px", border:"1px solid #c0c0c0", boxSizing:"border-box"}, Qa:b});
  }
  return hk({parent:document.body, className:"annotate-color-popup", style:{position:"absolute", backgroundColor:"rgb(255,255,255)", zIndex:2147483646, padding:"4px", border:"1px solid #c0c0c0", display:"none"}, buttons:c});
}
function nk() {
  let a = document.getElementsByClassName("punch-viewer-svgpage-svgcontainer"), b = -1, c = "";
  for (let d = a.length - 1; 0 <= d; d--) {
    if (0 == a[d].parentElement.offsetHeight) {
      continue;
    }
    let e = parseInt(window.getComputedStyle(a[d].parentElement).zIndex);
    isNaN(e) && (e = 0);
    if (e > b) {
      let f = a[d].getElementsByTagName("g");
      for (let k = 0; k < f.length; ++k) {
        if (f[k].id && f[k].id.length) {
          c = f[k].id;
          b = e;
          break;
        }
      }
    }
  }
  return c;
}
function ok() {
  var a = document.getElementsByClassName("punch-viewer-page-wrapper-container");
  return a && a.length ? a[0] : null;
}
function pk(a, b) {
  function c(f) {
    f.stopPropagation();
    f.preventDefault();
    window.addEventListener("pointerup", e, !1);
    window.addEventListener("pointercancel", d, !1);
  }
  function d() {
    window.removeEventListener("pointerup", e, !1);
    window.removeEventListener("pointercancel", d, !1);
  }
  function e(f) {
    window.removeEventListener("pointerup", e, !1);
    window.removeEventListener("pointercancel", d, !1);
    (f.target == a || a.contains(f.target)) && b && b(f);
  }
  a && a.addEventListener("pointerdown", c, !1);
}
function qk(a) {
  var b = document.getElementsByClassName("punch-viewer-container");
  return b && b.length && (b = b[0]) && (b == a || b.contains(a)) || (b = document.getElementsByClassName("punch-viewer-cursor-hiding-component")) && b.length && (b = b[0]) && (b == a || b.contains(a)) ? !0 : !1;
}
function rk() {
  return document.querySelectorAll("#docs-editor #slides-view #pages")[0];
}
function sk(a, b) {
  A(a) || (a.style.display = b ? "block" : "none");
}
function tk(a) {
  let b = new Nj("span");
  b.el.style.fontFamily = "extension-icons";
  b.el.style.verticalAlign = "text-top";
  Ej(b, ExtensionIcon.getExtensionIconString(a));
  return b;
}
function ik(a) {
  a.style["touch-action"] = "pan-x pan-y";
  a.onclick = function() {
  };
}
function uk(a, b) {
  a && a.setAttribute("data-id", b);
}
function vk() {
  var a = document.getElementsByClassName(Ri(wk));
  if (1 == a.length) {
    return a[0].getElementsByClassName(Ri(xk))[0];
  }
  var b = document.getElementsByClassName(Ri(yk))[0];
  a = document.getElementsByClassName(Ri(xk));
  if (b) {
    var c = b.getBoundingClientRect();
    b = (c.left + c.right) / 2;
    c = (c.top + c.bottom) / 2;
    let e = 999999, f = null;
    for (let k = 0; k < a.length; k++) {
      var d = a[k].getBoundingClientRect();
      d = Math.sqrt(Math.pow((d.top + d.bottom) / 2 - c, 2) + Math.pow((d.left + d.right) / 2 - b, 2));
      if (d < e) {
        f = a[k], e = d;
      } else if (d > e) {
        break;
      }
    }
    return f;
  }
  return null;
}
function zk() {
  let a = document.getElementsByTagName("main")[0].getBoundingClientRect();
  var b = (a.left + a.right) / 2, c = (a.top + a.bottom) / 2;
  let d = document.getElementsByClassName(Ri(wk)), e = !1, f = 999999, k = null;
  for (let n = 0; n < d.length; n++) {
    var l = d[n].getBoundingClientRect();
    if (l.top > a.top && l.bottom < a.bottom && l.left > a.left && l.right < a.right) {
      if (e = !0, d[n].getElementsByClassName(Ri(Ak))[0]) {
        return d[n].getElementsByClassName(Ri(xk))[0];
      }
    } else {
      if (e) {
        break;
      }
    }
    l = Math.sqrt(Math.pow((l.top + l.bottom) / 2 - c, 2) + Math.pow((l.left + l.right) / 2 - b, 2));
    l < f && (k = d[n].getElementsByClassName(Ri(xk))[0], f = l);
  }
  return k;
}
function Bk(a) {
  a = document.getElementsByName(a);
  for (var b, c = 0; c < a.length; c++) {
    if (a[c].checked) {
      b = a[c].value;
      break;
    }
  }
  return b;
}
;function Ck(a, b) {
  var c = null;
  if (window.visualViewport) {
    for (a = document.elementsFromPoint(a - window.visualViewport.pageLeft, b - window.visualViewport.pageTop), b = 0; b < a.length; ++b) {
      var d = a[b];
      if (d.nodeType == d.ELEMENT_NODE) {
        var e;
        a: {
          for (e = d; null != e;) {
            if (e.classList.length) {
              for (let f = 0; f < e.classList.length; ++f) {
                if ("extension_reset_css" == e.classList[f]) {
                  e = !0;
                  break a;
                }
              }
            }
            e = e.parentElement;
          }
          e = !1;
        }
        if (!e) {
          c = d;
          for (a = null; null != c && c != document.documentElement;) {
            b = window.getComputedStyle(c);
            if ("scroll" == b.overflowY || "auto" == b.overflowY) {
              a = c;
              break;
            }
            c = c.parentElement;
          }
          c = a;
          break;
        }
      }
    }
  }
  return c;
}
function Dk(a) {
  return (new XPathEvaluator()).evaluate(a, document.documentElement, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
}
function Ek(a, b, c) {
  c = Dk(c);
  a = {x:a, y:b};
  c && (b = c.getBoundingClientRect(), a.x = a.x - (window.scrollX + b.x) + c.scrollLeft, a.y = a.y - (window.scrollY + b.y) + c.scrollTop);
  return a;
}
function Fk(a) {
  let b = [];
  for (; a;) {
    var c;
    if (c = a.hasAttribute("id")) {
      c = document;
      var d = c.querySelectorAll;
      var e = a.getAttribute("id").replaceAll(":", "\\:");
      c = 1 == d.call(c, "#" + e).length;
    }
    if (c) {
      return b.unshift('id("' + a.getAttribute("id") + '")'), b.join("/");
    }
    c = 1;
    for (d = a.previousElementSibling; d;) {
      d.localName == a.localName && c++, d = d.previousElementSibling;
    }
    b.unshift(a.localName.toLowerCase() + "[" + c + "]");
    a = a.parentElement;
  }
  return b.length ? "/" + b.join("/") : null;
}
;function Fh(a) {
  return -1 != window.location.href.indexOf("docs.google.com/presentation/d/") && window != window.top && !a.i && !Gk(a);
}
function si() {
  return P.B;
}
function Hk(a, b, c) {
  var d = P;
  d.N = a;
  d.C = b;
  d.ba = c;
}
function Ik() {
  var a = P;
  return -1 != a.N && -1 != a.C;
}
function Gk(a) {
  return /\/presentation\/d\/([A-z0-9-_]+)\/grading/.test(window.location.href) && -1 != a.j.indexOf("classroom.google.com") && window != window.top;
}
function Jk(a) {
  return a.j && (-1 != a.j.indexOf("docs.google.com/presentation/d/") || -1 != a.j.indexOf("/GoogleSlidesPresentation/preview.html")) || Gk(a);
}
function Kk(a) {
  let b = window.location.href;
  return b && -1 != b.indexOf("docs.google.com/presentation/d/") && window != window.top && !Gk(a);
}
function Lk() {
  let a = window.location.href;
  return a && -1 != a.indexOf("docs.google.com/presentation/d/") && window == window.top;
}
function Mk() {
  let a = window.location.href;
  return -1 != a.indexOf("docs.google.com/presentation/d/") || -1 != a.indexOf("docs.google.com/document/d/");
}
function Nk() {
  var a = P;
  return a.j && -1 != a.j.indexOf("docs.google.com/document/d/") && window == window.top;
}
function Ok(a) {
  return a.l || Gk(a);
}
function Pk() {
  return -1 != P.j.indexOf("classroom.google.com/g/tg/");
}
function Qk() {
  var a = P;
  return /\/presentation\/d\/([A-z0-9-_]+)\/present/.test(window.location.href) && -1 != a.j.indexOf("classroom.google.com") && window != window.top;
}
function Rk(a) {
  var b = document.querySelectorAll("#docs-editor #slides-view #pages svg");
  for (let c = 0; c < b.length; ++c) {
    if (0 != b[c].clientHeight) {
      let d = b[c].querySelectorAll("g");
      for (let e = 0; e < d.length; e++) {
        if (d[e].id.startsWith("editor-")) {
          return d[e].id.substr(7);
        }
      }
    }
  }
  b = a.j.lastIndexOf("slide=");
  return -1 != b ? a.j.substring(b).substring(9) : "";
}
function Sk() {
  let a = document.getElementsByClassName("punch-viewer-svgpage-svgcontainer");
  for (let b = a.length - 1; 0 <= b; b--) {
    if (0 == a[b].parentElement.offsetHeight) {
      continue;
    }
    let c = a[b].getElementsByTagName("g");
    for (let d = 0; d < c.length; ++d) {
      if (c[d].id && c[d].id.length) {
        return c[d].id;
      }
    }
  }
  return "";
}
function Uk() {
  var a = P;
  if (a.B && a.D) {
    return a.D.uq;
  }
  if (Jk(a)) {
    if (Lk()) {
      return Rk(a);
    }
    if (Kk(a)) {
      return Sk();
    }
  }
}
function Vk(a) {
  return a.B && !A(a.D) && !A(a.D.Ea);
}
function Wk() {
  var a = P;
  a.B = !0;
  a.ia = a.D.Bb;
  a.mc(Xk.i);
}
function Yk() {
  P.mc(Xk.g, {Es:1});
}
function Zk(a, b, c, d) {
  P.mc(Xk.g, {Es:2, fd:a, width:b, height:c, qd:d});
}
function $k(a, b) {
  P.mc(Xk.g, {Es:3, fd:a, qd:b});
}
function al(a) {
  var b = P;
  if (a) {
    let d = new URLSearchParams(window.location.search), e = d.get("pdfData");
    var c = bl(1);
    let f = !1;
    c && "bSharedDoc" in c && (f = c.bSharedDoc);
    c = cl(2);
    e || (e = btoa(JSON.stringify({})));
    try {
      let k = JSON.parse(atob(e));
      if (k && k.guid != a) {
        k.guid = a;
        k.shared = f;
        d.set("pdfData", btoa(JSON.stringify(k)));
        if (history.replaceState) {
          let l = window.location.protocol + "//" + window.location.host + window.location.pathname + "?";
          l += d.toString();
          window.history.replaceState({path:l}, "", l);
        }
        L.kd({type:dl, shared:f, published:S.C, bCoTeacherPublishedFile:c});
        b.D.l = !S.C && !f && !c;
      }
    } catch (k) {
    }
  }
}
function el(a) {
  var b = P;
  if (Vk(b)) {
    let d;
    d = fl(b.D, gl(b.D, a.offsetLeft, a.offsetTop).y).S;
    let e = b.D.Ea.getBoundingClientRect();
    var c = hl(b.D, d, new il(b.D.scrollX, b.D.scrollY));
    c = {x:-c.$a + b.D.scrollX, y:-c.Ua + b.D.scrollY, width:jl(b.D, d), height:kl(b.D, d), scale:b.D.scale};
    a.offsetLeft += -e.left + b.D.scrollX;
    a.offsetTop += -e.top + b.D.scrollY;
    b = ll(b.D, d);
    a.A = Object.assign({}, c);
    a.S = b;
  } else {
    b.A && (b = Object.assign({}, b.A), b.scale = 1, 500 > b.width ? b.scale = 0.5 : 700 > b.width ? b.scale = 0.7 : 850 > b.width && (b.scale = 0.9), a.A = Object.assign({}, b));
  }
}
function ml(a) {
  return -1 != a.j.indexOf("canva.com/design");
}
function nl() {
  var a = P;
  return a.g && a.g.g == ol.Iv;
}
function pl() {
  return (1 == ql() && window == window.top || 2 == ql() && window == window.top || 3 == ql() && window != window.top || 2 == ql() && window != window.top && null != rl()) && P.m ? (console.log("[Assessment] parent preview, EventActionBlocked", !0), !0) : !1;
}
function Kl() {
  return "/StudentNotes/viewer.php";
}
function Ll() {
  let a = window.location.href;
  return window != window.top && (a.includes("docs.google.com/sharing/") || a.includes("GapiFrame/index.php") || a.includes("youtube.com/embed/") || a.includes(Kl())) ? !0 : !1;
}
function Ml() {
  let a = window.location.href;
  return a && a.includes(Kl());
}
function Nl(a) {
  return -1 != a.j.indexOf("docs.google.com/presentation/d/") || -1 != a.j.indexOf("/GoogleSlidesPresentation/preview.html") || a.B || Fh(a);
}
function Ol(a) {
  return !(Nl(a) || ml(a) || Ok(a));
}
function Pl() {
  return Ol(P) && !Ql.Ja();
}
function Rl() {
  return Ol(P) && Ql.Ja();
}
function Sl() {
  var a = P;
  return Ol(a) && !(-1 != a.j.indexOf("docs.google.com/spreadsheets/d/") || -1 != a.j.indexOf("drive.google.com"));
}
function Tl() {
  var a = P;
  return !Nl(a) && !ml(a) && !Kk(a) && !Mk();
}
function Ul() {
  return P.j;
}
function Vl() {
  var a = P;
  return a.i && a.ya ? !0 : !1;
}
function Wl() {
  let a = !1;
  try {
    a = null != chrome.runtime.getManifest();
  } catch (b) {
    a = !1;
  }
  return a;
}
function Xl(a) {
  var b = window.location.href;
  return -1 != b.indexOf(a + "/instructor") || -1 != b.indexOf(a + "/student") || -1 != b.indexOf(".annotatemirrorclient.com/instructor") || -1 != b.indexOf(".annotatemirrorclient.com/student") || -1 != b.indexOf("/ORIndex.php");
}
class Xk extends ph {
  static get i() {
    return "EVT_PDFVIEWER_LOADED";
  }
  static get g() {
    return "EVT_PAGE_INFO_UPDATED";
  }
  static get j() {
    return "EVT_SCROLL_UPDATED";
  }
  constructor() {
    super();
    this.ba = this.C = this.N = -1;
    this.m = this.ya = this.i = !1;
    this.v = null;
    this.G = this.J = this.j = "";
    this.o = this.B = !1;
    this.ia = document.body;
    this.g = this.A = this.Va = this.D = null;
    this.M = this.u = !1;
    this.s = null;
    this.Ha = this.l = !1;
    this.pa = this.ea = -1;
  }
  Cm() {
    return this.Va;
  }
  dl() {
    this.mc(Xk.j, {});
  }
  wf(a) {
    this.A = a;
    this.mc(Xk.g, {Es:1});
  }
}
var P = new Xk();
function Yl(a, b, c) {
  function d(p, t) {
    for (var x = 0; x < t.length; x++) {
      k(p, p.Hb.length, t[x], !1);
    }
  }
  function e(p, t, x) {
    if (0 == p.length) {
      return null;
    }
    for (var D = 0, G = 0; G < p.length; G++) {
      if (D += p[G].offsetWidth, D >= t) {
        if (p[G].classList.contains("mq-fraction")) {
          D += parseFloat(window.getComputedStyle(p[G], null).getPropertyValue("padding-left").slice(0, -2));
          if (x) {
            return p[G].children[1].children[0] && (D += p[G].children[1].children[0].offsetLeft - p[G].offsetLeft), e(p[G].children[1].children, t - (D - p[G].offsetWidth), x);
          }
          p[G].children[0].children[0] && (D += p[G].children[0].children[0].offsetLeft - p[G].offsetLeft);
          return e(p[G].children[0].children, t - (D - p[G].offsetWidth), x);
        }
        D - t > p[G].offsetWidth / 2 && 0 <= G - 1 && --G;
        return p[G].getAttribute("mathquill-command-id");
      }
    }
    return p[p.length - 1].getAttribute("mathquill-command-id");
  }
  function f(p, t) {
    if (1 != p.Hb.length) {
      a.removeChild(t.Xw);
      var x = p.Hb.indexOf(t);
      -1 < x && p.Hb.splice(x, 1);
      0 <= x - 1 && x--;
      var D = p.Hb[x].od.el().children[1].lastElementChild, G;
      D && (G = D.getAttribute("mathquill-command-id"));
      p.Hb[x].moveToRightEnd();
      p.Hb[x].write(t.latex());
      p.Hb[x].Oh();
      p.Nh = p.Hb[x].id;
      G ? p.Hb[x].moveToNodeById(1, G) : p.Hb[x].moveToLeftEnd();
      t = p.Hb[x].od.el().children;
      1 < t.length && (x = t[1].children, 0 < t.length && (p.Bu = x[x.length - 1].offsetLeft - p.gg.offsetLeft - 2));
    }
  }
  function k(p, t, x, D) {
    var G = document.createElement("DIV");
    G.style.minWidth = "20px";
    G.style.width = "max-content";
    var I = document.createElement("SPAN"), Q = document.createElement("TEXTAREA"), X = new Zl(p.id++, G);
    -1 == t ? (p.Hb.push(X), a.appendChild(G)) : t >= p.Hb.length ? (p.Hb.push(X), a.appendChild(G)) : (a.insertBefore(G, p.Hb[t].Xw), p.Hb.splice(t, 0, X));
    G.addEventListener("keydown", Fa => {
      "ArrowRight" != Fa.key && "ArrowLeft" != Fa.key || p.Ov(X);
    });
    G.addEventListener("mousedown", Fa => {
      p.Ov(X);
      p.ko && Fa.stopPropagation();
    }, !0);
    G.addEventListener("mouseup", () => {
      p.ko || (X.Oh(), p.Nh = X.id);
    });
    G.addEventListener("focus", () => {
      p.ko && X.av();
    });
    G.appendChild(I);
    G.appendChild(Q);
    X.eN(I, p, Q);
    "" != x && (X.JH(x), X.moveToLeftEnd(), D && setTimeout(function() {
      X.Oh();
      p.Nh = X.id;
      X.moveToRightEnd();
    }, 10));
    D ? (X.Oh(), p.Nh = X.id) : X.av();
  }
  function l(p, t) {
    for (var x = 0; x < p.Hb.length; x++) {
      if (p.Hb[x].id == t) {
        return p.Hb[x];
      }
    }
    return null;
  }
  function n(p, t) {
    for (var x = 0; x < p.Hb.length; x++) {
      if (p.Hb[x].id == t) {
        return x;
      }
    }
  }
  this.gg = a;
  this.scale = 2;
  a.style.width = "max-content";
  a.style.kO = "none";
  this.Hb = [];
  this.id = 0;
  this.Dy = !1;
  this.Bu = 0;
  this.ko = !1;
  this.Nh = null;
  b && 0 != b.length ? d(this, b) : k(this, -1, "", c);
  this.zN = function(p) {
    let t = this.Hb.length, x = p.length, D = t - x;
    if (0 < D) {
      for (; 0 != D;) {
        f(this, this.Hb[this.Hb.length - 1]), D--;
      }
    }
    t = this.Hb.length;
    for (let G = 0; G < t && G < x; G++) {
      this.Hb[G].JH(p[G]);
    }
    if (0 > D) {
      for (D = Math.abs(D); 0 != D;) {
        k(this, this.Hb.length, p[x - D], !1), D--;
      }
    }
  };
  this.getData = function() {
    for (var p = [], t = 0; t < this.Hb.length; t++) {
      p.push(this.Hb[t].latex());
    }
    return p;
  };
  this.tG = function() {
    var p = [];
    let t = document.createElement("canvas").getContext("2d");
    for (var x = 0; x < this.Hb.length; x++) {
      p.push(this.Is(this.Hb[x].Xw, t));
    }
    return p;
  };
  this.Is = function(p, t) {
    let x = {};
    var D = getComputedStyle(p), G = p.getBoundingClientRect(), I = p.offsetWidth, Q = p.offsetHeight;
    x.x = p.offsetLeft + parseFloat(D.paddingLeft.slice(0, -2));
    x.y = p.offsetTop + G.height;
    x.width = I;
    x.height = Q;
    x.transform = D.transform;
    x.borderTop = D.borderTop;
    x.padding = D.padding;
    x.fontStyle = D.fontStyle;
    x.fontSize = D.fontSize;
    G = D.fontFamily;
    G = G.slice(0, G.search(","));
    x.fontFamily = G;
    x.lineHeight = D.lineHeight;
    x.type = "element";
    x.lstChildProps = [];
    G = !1;
    for (I = 0; I < p.classList.length; I++) {
      if ("mq-denominator" == p.classList[I] || "mq-sqrt-stem" == p.classList[I]) {
        x.type = "line";
        x.lineX = p.offsetLeft;
        x.lineY = p.offsetTop + 1;
        break;
      }
      "mq-paren" == p.classList[I] && (G = !0);
    }
    0 == p.children.length && 1 == p.innerText.length && 8203 != p.innerText.charCodeAt(0) && (x.type = "text", I = p.innerText, x.text = I, t.font = D.font, Q = D.transform, x.y = p.offsetTop + t.measureText(I).fontBoundingBoxAscent, "BIG" == p.tagName && "center" == D.textAlign && (x.x += (x.width - t.measureText(I).width) / 2), Q && "none" != Q && (Q = Q.slice(7), I = Q.slice(0, Q.search(",")), Q = Q.slice(Q.search(",") + 1), Q = Q.slice(Q.search(",") + 1), Q = Q.slice(Q.search(",") + 1), Q = 
    Q.slice(1), Q = Q.slice(0, Q.search(",")), D = p.offsetTop + parseFloat(D.fontSize.slice(0, -2)) * (G ? 0.06 : 0), G = p.offsetLeft + p.offsetWidth / 2, x.pivotX = G, x.pivotY = D, x.scaleX = I, x.scaleY = Q, Q = "translate(" + G + "," + D + ") scale(" + I + "," + Q + ") translate(" + -1 * G + "," + -1 * D + ")", x.transform = Q));
    for (D = 0; D < p.children.length; D++) {
      x.lstChildProps.push(this.Is(p.children[D], t));
    }
    return x;
  };
  this.jv = function(p) {
    this.ko != p && (this.ko = p, this.Hb.forEach(t => {
      t.aN(!p);
      t.av();
    }));
  };
  this.reflow = function() {
    for (let p = 0; p < this.Hb.length; p++) {
      this.Hb[p].reflow();
    }
  };
  this.Oh = function() {
    0 < this.Hb.length && (this.Hb[this.Hb.length - 1].Oh(), this.Nh = this.Hb[this.Hb.length - 1].id);
  };
  this.hL = function() {
    if (0 < this.Hb.length && null != this.Nh) {
      var p = n(this, this.Nh);
      this.Hb[p].Oh();
    }
  };
  this.cmd = function(p) {
    if (0 < this.Hb.length && null != this.Nh) {
      var t = n(this, this.Nh);
      this.Hb[t].cmd(p);
    }
  };
  this.kz = function(p) {
    if (0 < this.Hb.length && null != this.Nh) {
      var t = n(this, this.Nh);
      this.Hb[t].keystroke(p);
    }
  };
  this.write = function(p) {
    if (0 < this.Hb.length && null != this.Nh) {
      var t = n(this, this.Nh);
      this.Hb[t].write(p);
    }
  };
  this.pI = function() {
    if (0 < this.Hb.length && null != this.Nh) {
      var p = n(this, this.Nh);
      this.Hb[p].GI();
      this.Hb[p].av();
    }
  };
  this.$G = function(p) {
    this.Ov(l(this, p));
  };
  this.aH = function(p, t) {
    p = n(this, p) + 1;
    k(this, p, t, !0);
    this.Hb[p].moveToLeftEnd();
  };
  this.XL = function(p) {
    var t = l(this, p);
    0 != n(this, p) && (t.latex().trim(), f(this, t));
  };
  this.$L = function(p, t) {
    t ? this.ZL(p) : this.aM(p);
  };
  this.ZL = function(p) {
    p = n(this, p);
    0 <= p - 1 && (this.Hb[p].av(), p--, this.Hb[p].moveToRightEnd(), this.Hb[p].Oh(), this.Nh = this.Hb[p].id, this.Ov(this.Hb[p]), this.Dy = !0);
  };
  this.aM = function(p) {
    p = n(this, p);
    p + 1 < this.Hb.length && (this.Hb[p].av(), p++, this.Hb[p].moveToLeftEnd(), this.Hb[p].Oh(), this.Nh = this.Hb[p].id, this.Ov(this.Hb[p]), this.Dy = !0);
  };
  this.gM = function(p) {
    p = n(this, p);
    if (0 <= p - 1) {
      p--;
      var t = e(this.Hb[p].od.el().children[1].children, this.Bu, !0);
      this.Hb[p].Oh();
      this.Nh = this.Hb[p].id;
      t && this.Hb[p].moveToNodeById(0 < this.Bu ? 1 : -1, t);
    }
  };
  this.YL = function(p) {
    p = n(this, p);
    if (p + 1 < this.Hb.length) {
      p++;
      var t = e(this.Hb[p].od.el().children[1].children, this.Bu, !1);
      this.Hb[p].Oh();
      this.Nh = this.Hb[p].id;
      t && this.Hb[p].moveToNodeById(0 < this.Bu ? 1 : -1, t);
    }
  };
  this.Ov = function(p) {
    this.Dy ? this.Dy = !1 : null != p && 0 < p.od.el().getElementsByClassName("mq-cursor").length && (this.Bu = p = p.od.el().getElementsByClassName("mq-cursor")[0].offsetLeft - this.gg.offsetLeft - 2);
  };
}
function Zl(a, b) {
  this.id = a;
  this.Xw = b;
  this.aG;
  this.MQ;
  this.od;
  this.Qp;
  this.eN = function(c, d, e) {
    this.Qp = d;
    this.aG = c;
    this.MQ = MathQuill.getInterface(2);
    var f = this;
    f.od = f.MQ.MathField(f.aG, {spaceBehavesLikeTab:!1, charsThatBreakOutOfSupSub:"+ - = < >", autoCommands:"pi sqrt nthroot sum prod int", autoSubscriptNumerals:!0, restrictMismatchedBrackets:!0, typingPercentWritesPercentOf:!0, autoOperatorNames:"mean median mod stdev round ceil floor abs min max sin cos sec csc cosec tan cot sinh cosh sech csch cosech tanh coth arcsinh arccosh arcsech arccsch arccosech arctanh arccoth arcsin arccos arcsec arccsc arccosec arctan arccot log ln", substituteTextarea:function() {
      return e;
    }, handlers:{edit:function() {
      f.Qp.$G && f.Qp.$G(f.id, f.od.latex());
    }, enter:function() {
      var k = f.od.latex();
      !k.length || "^" !== k.charAt(k.length - 2) && "_" !== k.charAt(k.length - 2) && "}" !== k.charAt(k.length - 1) || f.od.keystroke("Right");
      f.od.keystroke("Ctrl-Shift-End");
      k = "";
      f.od.__controller.cursor.selection && (k = f.od.__controller.cursor.selection.join("latex"));
      console.log(k);
      f.od.el().children[1].getElementsByClassName("mq-selection")[0] && f.od.el().children[1].removeChild(f.od.el().children[1].getElementsByClassName("mq-selection")[0]);
      f.od.__controller.cut();
      f.Qp.aH(f.id, k);
    }, deleteOutOf:function() {
      f.Qp.XL(f.id);
    }, upOutOf:function() {
      f.Qp.gM(f.id);
    }, downOutOf:function() {
      f.Qp.YL(f.id);
    }, moveOutOf:function(k) {
      f.Qp.$L(f.id, -1 == k);
    }}});
  };
  this.aN = function(c) {
    this.od.__controller.editable = c;
  };
  this.JH = function(c) {
    this.od.latex(c);
  };
  this.Oh = function() {
    this.Xw && this.Xw.offsetParent && this.od.focus();
  };
  this.av = function() {
    this.od.blur();
  };
  this.reflow = function() {
    this.od.reflow();
  };
  this.cmd = function(c) {
    this.od.cmd(c);
    this.od.write("");
  };
  this.write = function(c) {
    this.od.write(c);
  };
  this.keystroke = function(c) {
    this.od.keystroke(c);
  };
  this.select = function() {
    this.od.select();
  };
  this.latex = function() {
    return this.od.latex();
  };
  this.moveToLeftEnd = function() {
    this.od.moveToLeftEnd();
  };
  this.moveToRightEnd = function() {
    this.od.moveToRightEnd();
  };
  this.moveToNodeById = function(c, d) {
    this.od.moveToNodeById(c, d);
  };
  this.GI = function() {
    this.od.__controller.cursor.jQ && 0 == this.od.__controller.cursor.jQ.length && (this.od.__controller.cursor.jQ = this.od.__controller.cursor._jQ);
    var c = this.od.latex();
    !c.length || "^" !== c.charAt(c.length - 2) && "_" !== c.charAt(c.length - 2) && "}" !== c.charAt(c.length - 1) || this.od.keystroke("Right");
    this.od.keystroke("Ctrl-Shift-End");
    c = "";
    this.od.__controller.cursor.selection && (c = this.od.__controller.cursor.selection.join("latex"));
    console.log(c);
    this.od.el().children[1].getElementsByClassName("mq-selection")[0] && this.od.el().children[1].removeChild(this.od.el().children[1].getElementsByClassName("mq-selection")[0]);
    this.od.__controller.cut();
    this.Qp.aH(this.id, c);
  };
}
;function $l(a, b) {
  a.update(b);
  a.dispatchEvent(new CustomEvent("spinnerUpdate", {detail:b}));
}
function am(a) {
  bm(a.vt.el, a.value != a.maxValue, !0, !0);
  bm(a.ys.el, a.value != a.minValue, !0, !0);
}
class cm extends EventTarget {
  constructor(a, b, c, d, e, f) {
    super();
    this.g = {ys:"user-select: none; cursor: pointer;height: 26px; width: 26px;float: left; margin-left: 4px; margin-top: 4px;box-sizing: border-box;display: block; position:relative", wx:"font-family: Roboto, Arial, Helvetica, sans-serif;user-select: none;height: 34px; width: 40px; float: left;font-size: 16px; margin-left: 4px;box-sizing: border-box; text-align: center;line-height: 34px;display: block;position: static;", vt:"user-select: none; cursor: pointer;height: 26px; width: 26px;float: left; margin-left: 4px; margin-top: 4px;box-sizing: border-box;display: block; position:relative",
    };
    this.value = b;
    this.unit = c;
    this.maxValue = e;
    this.minValue = f;
    this.step = d;
    this.j = this.j.bind(this);
    this.i = this.i.bind(this);
    this.create(a);
  }
  create(a) {
    this.parent = a;
    this.ys = new Nj(null);
    Kj(this.ys, this.i);
    this.ys.el.className = "extension_reset_css extension_icon extension_icon-chevron_down";
    this.ys.el.style = this.g.ys;
    this.parent.Z(this.ys);
    this.wx = new Nj(null);
    this.wx.el.style = this.g.wx;
    this.parent.Z(this.wx);
    this.update(this.value);
    this.vt = new Nj(null);
    Kj(this.vt, this.j);
    this.vt.el.className = "extension_reset_css extension_icon extension_icon-chevron_up";
    this.vt.el.style = this.g.vt;
    this.parent.Z(this.vt);
  }
  update(a) {
    rj(this.wx, a + this.unit);
    this.value = a;
  }
  j() {
    this.value <= this.maxValue - this.step && (this.value += this.step);
    $l(this, this.value);
  }
  i() {
    this.value >= this.minValue + this.step && (this.value -= this.step);
    $l(this, this.value);
  }
}
;function dm(a) {
  a.i = new Nj(null);
  a.i.Le("ColorOptionContainer");
  a.i.el.style = a.l.Of;
  a.i.Mb(30);
  a.Z(a.i);
  a.Ud = [];
  for (let c = 0; c < a.Xb.length; c++) {
    var b = new Nj(null);
    Kj(b, function() {
      var e = c;
      if (this.m && this.Za != e) {
        em(!1);
      } else {
        this.rg();
        this.Ud[e][0].Qj("3px solid rgb(33, 150, 243)");
        this.qa = this.Xb[e];
        this.Za = e;
        this.g && (this.g.qa = this.Xb[e], this.g.Za = this.Za);
        let f = {};
        f.qa = this.Xb[e];
        f.Za = e;
        this.dispatchEvent(new CustomEvent("colorChange", {detail:f}));
      }
    }.bind(a));
    b.el.style = 0 == c ? a.l.MC : a.l.wo;
    let d = new fm();
    b.Z(d);
    d.Eo(a.Xb[c]);
    gm(d, 26);
    d.uc("CTRL+SHIFT+" + (c + 1));
    a.Ud.push([b, d]);
  }
  for (b = 0; b < a.Ud.length; b++) {
    a.i.Z(a.Ud[b][0]);
  }
}
function hm(a, b) {
  for (let c = 0; c < a.Ud.length; c++) {
    -1 != a.Za && a.Za == c ? im(a.Ud[c][1], !0) : im(a.Ud[c][1], b);
  }
}
class jm extends Nj {
  constructor(a) {
    super(null);
    this.l = {Of:"clear:both;font-family: Roboto, Arial, Helvetica, sans-serif;user-select: none;height: 34px; width: 236px;box-sizing: border-box;display: block; position: static;", ZN:"user-select: none; height: 32px;width: 236px; box-sizing: border-box;padding-top: 3px; display: block;", wo:"user-select: none; cursor: pointer;height: 32px;width: 26px; box-sizing: border-box;float: left; background-position: initial; background-size: initial;background-repeat: initial; background-attachment: initial;background-origin: initial; background-clip: initial; border: 0px; border-radius: 0px; margin-left: 4px; margin-right: 0px;display: block; position:relative;", 
    MC:"user-select: none; cursor: pointer;height: 32px; width: 26px;box-sizing: border-box; float: left; background-position: initial;background-size: initial; background-repeat: initial;background-attachment: initial; background-origin: initial;background-clip: initial; border: 0px; border-radius: 0px;margin-left: 0px; margin-right: 0px;display: block;position:static;", tj:"box-sizing: border-box; float: left; fontWeight: bold;height:26px; width: 26px;display: block; position:absolute",};
    this.m = a;
    this.g = null;
    this.Xb = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
    this.qa = "#ff3b30";
    this.Za = 3;
    this.Ud = [];
    this.j = null;
    this.o = this.o.bind(this);
    this.tj = null;
    this.create();
  }
  Zb() {
    return "ColorPalette";
  }
  create() {
    this.el.style = this.l.Of;
    dm(this);
    this.j = new Nj(null);
    R(this.j, "clearfix");
    this.j.Le("extraButtonContainer");
    this.tj = new Nj(null);
    this.tj.el.style.userSelect = "none";
    this.tj.el.style.cursor = "pointer";
    this.j.el.style = this.l.wo;
    this.tj.el.style = this.l.tj;
    this.tj.el.className += "extension_icon extension_icon-settings";
    this.j.Z(this.tj);
    this.i.Z(this.j);
    Kj(this.tj, this.o);
  }
  o() {
    this.m ? em(!1) : this.dispatchEvent(new CustomEvent("extraButtonClick", {detail:null}));
  }
  nr(a) {
    this.tj.el.className = a ? "extension_reset_css extension_icon extension_icon-settings" : "extension_reset_css extension_icon extension_icon-reset";
  }
  rg() {
    yj(this.j, "0");
    for (let a = 0; a < this.Ud.length; a++) {
      yj(this.Ud[a][0], "0");
    }
  }
  setData(a) {
    this.rg();
    this.g = a;
    this.Xb = this.Xb = a.Xb;
    for (var b = 0; b < this.Ud.length; b++) {
      this.Ud[b][1].Eo(this.Xb[b]);
    }
    this.qa = a.qa;
    this.Za = a.Za;
    -1 != this.Za && (a = this.qa, b = this.Za, b < this.Ud.length && (this.Ud[b][1].Eo(a), this.Ud[b][0].Qj("3px solid rgb(33, 150, 243)"), this.g && (this.g.qa = a, this.g.Za = b)), 7 == b && (this.tj.el.style.backgroundImage = "none", this.tj.el.style.backgroundColor = a, this.j.Qj("3px solid rgb(33, 150, 243)"), this.g && (this.g.qa = a, this.g.Za = b)));
    hm(this, !this.m);
  }
  Kz(a) {
    this.m = a;
    hm(this, !this.m);
    this.tj && (a ? this.tj.xe("#aaaaaa") : this.tj.xe("#000000"));
  }
}
;function km(a) {
  a.el.style = a.j.Of;
  a.Mb(32);
  a.parentElement.appendChild(a.el);
  a.Ud = [];
  for (let c = 0; c < a.Xb.length; c++) {
    var b = new Nj(null);
    Kj(b, function() {
      var e = c;
      this.rg();
      this.Ud[e][0].Qj("3px solid rgb(33, 150, 243)");
      this.qa = this.Xb[e];
      this.g && (this.g.qa = this.Xb[e]);
      let f = {};
      f.qa = this.Xb[e];
      this.dispatchEvent(new CustomEvent("StandardColorSelected", {detail:f}));
    }.bind(a));
    b.el.style = a.j.wo;
    let d = new fm();
    b.Z(d);
    d.Eo(a.Xb[c]);
    gm(d, 26);
    a.Ud.push([b, d]);
  }
  for (b = 0; b < a.Ud.length; b++) {
    a.Z(a.Ud[b][0]);
  }
}
class lm extends Nj {
  constructor(a) {
    super(null);
    this.j = {Of:"clear:both;font-family: Roboto, Arial, Helvetica, sans-serif;user-select: none;display: block;position:static;", pK:"box-sizing: border-box; height: 20px;font-size:12px; font-weight: 600;margin-left: 6px; margin-top: 6px;width: 226px;display: inline-block; line-height: 20px;display: block;position:static;", wo:"box-sizing: border-box; float: left;height: 32px; margin-left: 4px; display: block;position:static;"};
    this.Xb = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
    this.create(a);
  }
  Zb() {
    return "DefaultColors";
  }
  create(a) {
    this.parentElement = a;
    this.i = document.createElement("div");
    this.i.className = "extension_reset_css";
    this.i.style.userSelect = "none";
    this.i.innerHTML = "Standard colors";
    this.i.style = this.j.pK;
    a.appendChild(this.i);
    km(this);
  }
  rg() {
    for (let a = 0; a < this.Ud.length; a++) {
      yj(this.Ud[a][0], "0");
    }
  }
  setData(a) {
    this.g = a;
    this.qa && (this.qa = a.qa);
    a.Cc && (this.Xb = a.Cc);
    this.Xb = this.Xb;
    for (a = 0; a < this.Ud.length; a++) {
      this.Ud[a][1].Eo(this.Xb[a]);
    }
    this.rg();
    for (a = 0; a < this.Xb.length; a++) {
      this.Xb[a] == this.qa && this.Ud[a][0].Qj("3px solid rgb(33, 150, 243)");
    }
  }
}
;function mm(a, b) {
  var c = (parseInt(a.value) - parseInt(a.min)) / (parseInt(a.max) - parseInt(a.min));
  a.style.backgroundImage = "-webkit-gradient(linear, left top, right top, color-stop(" + c + "," + b + "), color-stop(" + c + ", #E0E0E0))";
}
function nm(a) {
  let b = {};
  b.qa = a.qa;
  a.dispatchEvent(new CustomEvent("colorChangeBySlider", {detail:b}));
}
class om extends EventTarget {
  constructor(a) {
    super();
    this.g = {gg:"height: 106px; width: 160px;float: left; box-sizing: border-box; margin-top: 8px; margin-left: 12px;", Zh:"margin-top: 24px; width: 148px", Sh:"margin-top: 24px; width: 148px", Kh:"margin-top: 24px; width: 148px",};
    this.qa = "#abcdab";
    this.setData = this.setData.bind(this);
    this.create(a);
    this.setData({qa:"#abcdab"});
  }
  create(a) {
    this.parent = a;
    this.gg = document.createElement("div");
    this.gg.classList.add("extension_reset_css");
    this.gg.style.userSelect = "none";
    this.gg.style = this.g.gg;
    a.appendChild(this.gg);
    this.Zh = document.createElement("input");
    this.Zh.className = "AnnotateColorSlider AnnotateRedColorSlider";
    this.Zh.style = this.g.Zh;
    this.gg.appendChild(this.Zh);
    this.Zh.setAttribute("type", "range");
    this.Zh.id = "redSlider";
    this.Zh.type = "range";
    this.Zh.min = "0";
    this.Zh.max = "255";
    this.Zh.value = "0";
    this.Zh.step = "1";
    this.Zh.oninput = this.l.bind(this);
    this.Sh = document.createElement("input");
    this.Sh.className = "AnnotateColorSlider AnnotateGreenColorSlider";
    this.Sh.style = this.g.Sh;
    this.gg.appendChild(this.Sh);
    this.Sh.setAttribute("type", "range");
    this.Sh.id = "greenSlider";
    this.Sh.type = "range";
    this.Sh.min = "0";
    this.Sh.max = "255";
    this.Sh.value = "0";
    this.Sh.step = "1";
    this.Sh.oninput = this.j.bind(this);
    this.Kh = document.createElement("input");
    this.Kh.className = "AnnotateColorSlider AnnotateBlueColorSlider";
    this.Kh.style = this.g.Kh;
    this.gg.appendChild(this.Kh);
    this.Kh.setAttribute("type", "range");
    this.Kh.id = "blueSlider";
    this.Kh.type = "range";
    this.Kh.min = "0";
    this.Kh.max = "255";
    this.Kh.value = "0";
    this.Kh.step = "1";
    this.Kh.oninput = this.i.bind(this);
  }
  l() {
    var a = dh(this.qa);
    this.Zh && (a.red = parseInt(this.Zh.value), mm(this.Zh, "#e74c3c"));
    this.qa = ch(a);
    nm(this);
  }
  j() {
    var a = dh(this.qa);
    this.Sh && (a.green = parseInt(this.Sh.value), mm(this.Sh, "#8bc648"));
    this.qa = ch(a);
    nm(this);
  }
  i() {
    var a = dh(this.qa);
    this.Kh && (a.blue = parseInt(this.Kh.value), mm(this.Kh, "#2196f3"));
    this.qa = ch(a);
    nm(this);
  }
  setData(a) {
    this.qa = a.qa;
    a = dh(this.qa);
    this.Zh && (this.Zh.value = a.red + "", mm(this.Zh, "#e74c3c"));
    this.Sh && (this.Sh.value = a.green + "", mm(this.Sh, "#8bc648"));
    this.Kh && (this.Kh.value = a.blue + "", mm(this.Kh, "#2196f3"));
  }
}
;function pm(a, b) {
  (a.tl = b) ? R(a, "gridColorsItemSelected") : pj(a, "gridColorsItemSelected");
}
class qm extends Nj {
  static get Hr() {
    return "EVT_ITEM_CLICKED";
  }
  constructor() {
    super(null);
    this.ID = "";
    Kj(this, () => {
      this.dispatchEvent(new CustomEvent(qm.Hr, {detail:{strColor:this.ID}}));
    });
  }
  Zb() {
    return "GridColorItem";
  }
  xe(a) {
    this.ID = a;
    zj(this, a);
  }
}
function rm(a) {
  a.g.forEach(b => b.U());
  a.g = [];
  a.i = new Nj(null);
  a.i.el.style = a.j.lE;
  a.i.el.style.width = "100%";
  a.i.el.style.height = "100%";
  a.l.forEach(b => {
    let c = new qm();
    c.el.style = a.j.lE;
    c.V(15, 15);
    c.xe(b);
    a.i.Z(c);
    a.g.push(c);
    c.addEventListener(qm.Hr, d => {
      a.qa = d.detail.strColor;
      d = {};
      d.qa = a.qa;
      a.dispatchEvent(new CustomEvent("colorChangeByGrid", {detail:d}));
    });
  });
  a.Z(a.i);
}
function sm(a) {
  a.g.forEach(b => pm(b, !1));
}
function tm(a, b) {
  sm(a);
  b && a.g.forEach(c => {
    c.ID.toLowerCase() == b.toLowerCase() && pm(c, !0);
  });
}
class um extends Nj {
  constructor() {
    super(null);
    this.j = {gg:"height: 150px; width: 195px; float: left; box-sizing: border-box; margin-top: 4px; margin-left: 12px;display: block;position: static;user-select: none;", lE:"display: grid;grid-template-columns: repeat(13,auto);justify-items: center;position: static;box-sizing: border-box;"};
    this.l = "#000000 #4d0000 #4d1300 #4d2600 #4d3900 #4D4C00 #394D00 #004D00 #003F4D #001F4D #00004D #2E004D #4D0032 #1C1C1C #660000 #661900 #663300 #664D00 #666600 #4B6600 #006600 #005466 #002966 #000066 #3D0066 #660043 #393939 #990000 #992600 #994C00 #997300 #999900 #719900 #009900 #007D99 #003D99 #000099 #5C0099 #990065 #555555 #CC0000 #CC3300 #CC6600 #CC9900 #CCCC00 #97CC00 #00CC00 #00A7CC #0052CC #0000CC #7A00CC #CC0087 #717171 #FF0000 #FF4000 #FF7F00 #FFBF00 #FFFF00 #BDFF00 #00FF00 #00D1FF #0066FF #0000FF #9900FF #FF00A8 #8E8E8E #FF3333 #FF6633 #FF9933 #FFCC33 #FFFF33 #CAFF33 #33FF33 #33DAFF #3385FF #3333FF #AD33FF #FF33BA #AAAAAA #FF6666 #FF8C66 #FFB266 #FFD966 #FFFF66 #D7FF66 #66FF66 #66E3FF #66A3FF #6666FF #C266FF #FF66CB #C6C6C6 #FF9494 #FFAF94 #FFC994 #FFE494 #FFFF94 #E3FF94 #94FF94 #94ECFF #94BFFF #9494FF #D494FF #FF94DB #E3E3E3 #FFBDBD #FFCDBD #FFDEBD #FFEEBD #FFFFBD #EEFFBD #BDFFBD #BDF3FF #BDD7FF #BDBDFF #E4BDFF #FFBDE8 #FFFFFF #FFE5E5 #FFECE5 #FFF2E5 #FFF9E5 #FFFFE5 #F8FFE5 #E6FFE5 #E5FAFF #E5F0FF #E5E6FF #F5E5FF #FFE5F6".split(" ");
    this.qa = "#000000";
    this.g = [];
    this.create();
  }
  Zb() {
    return "ColorGrid";
  }
  create() {
    this.el.style = this.j.gg;
    rm(this);
  }
  setData(a) {
    this.qa = a.qa;
    tm(this, this.qa);
  }
}
;class vm extends EventTarget {
  constructor(a) {
    super();
    this.g = {gg:"height: 110px; width: 48px;float: left; box-sizing: border-box; margin-top: 8px; margin-left: 4px;", et:"height: 40px; width: 40px; float: left; box-sizing: border-box; margin-top: 4px; margin-left: 4px; border:1px solid #c0c0c0; display:block;", zr:"height: 60px; width: 40px; margin-top: 4px; margin-left: 4px; display:block;", ft:"height: 16px; width: 40px; margin-top: 4px; margin-left: 4px; float:left; font-size: 12px; box-sizing: border-box", Ls:"height: 16px; width: 40px; margin-top: 4px; margin-left: 4px; float:left; font-size: 12px; box-sizing: border-box", 
    vs:"height: 16px; width: 40px; margin-top: 4px; margin-left: 4px; float:left; font-size: 12px; box-sizing: border-box",};
    this.create(a);
    this.setData({qa:"#abcdab"});
  }
  create(a) {
    this.parent = a;
    this.gg = document.createElement("div");
    this.gg.classList.add("extension_reset_css");
    this.gg.style.userSelect = "none";
    this.gg.style = this.g.gg;
    a.appendChild(this.gg);
    this.et = document.createElement("div");
    this.et.classList.add("extension_reset_css");
    this.et.style = this.g.et;
    this.gg.appendChild(this.et);
    this.et.style.backgroundColor = "#000";
    this.zr = document.createElement("div");
    this.zr.classList.add("extension_reset_css");
    this.zr.style = this.g.zr;
    this.gg.appendChild(this.zr);
    this.ft = document.createElement("div");
    this.ft.classList.add("extension_reset_css");
    this.ft.style = this.g.ft;
    this.zr.appendChild(this.ft);
    this.Ls = document.createElement("div");
    this.Ls.classList.add("extension_reset_css");
    this.Ls.style = this.g.Ls;
    this.zr.appendChild(this.Ls);
    this.vs = document.createElement("div");
    this.vs.classList.add("extension_reset_css");
    this.vs.style = this.g.vs;
    this.zr.appendChild(this.vs);
  }
  setData(a) {
    this.qa = a.qa;
    this.et.style.backgroundColor = this.qa;
    a = dh(this.qa);
    this.ft && (this.ft.innerHTML = "R : " + a.red);
    this.Ls && (this.Ls.innerHTML = "G : " + a.green);
    this.vs && (this.vs.innerHTML = "B : " + a.blue);
  }
}
;function wm(a, b) {
  a.dispatchEvent(new CustomEvent("ColorSelectionChange", {detail:b}));
}
class xm extends Nj {
  constructor() {
    super(null);
    this.g = {uw:"boxSizing: border-box; float: left;marginTop: 4px; marginLeft: 12px;height: 150px; width: 195px;display: block;", Aw:"box-sizing: border-box;height: 20px; width: 226px;font-size:12px; font-weight: 600; margin-left: 6px;display: inline-block; line-height: 20px;position: static;user-select: none;", $c:"user-select: none;height: 40px; width: 236px;position: static;user-select: none;background-color: rgb(239, 239, 239); box-sizing: border-box; line-height:40px; display: block;", us:"boxSizing: border-box; float: left;fontWeight: bold;height: 26px; width: 26px;margin-left: 4px; margin-top: 7px;display: block; position:relative", 
    Ep:"boxSizing: border-box; float: left; font-size: 16px; fontWeight: bold;height: 40px; margin-left: 12px; width: 164px;font-weight: bold;display: block; line-height:40px;position: static;user-select: none;", KJ:"boxSizing: border-box; float: left; fontWeight: bold;height: 26px; width: 26px;margin-top: 7px;display: block; position:relative;user-select: none;", rz:"boxSizing: border-box; float: left;height: 110px; width: 48px;margin-left: 4px; margin-top: 8px; display: block;", SH:"boxSizing: border-box; float: left;height: 106px;  width: 160px;margin-left: 12px; margin-top: 8px;display: block;", 
    gg:"width: 236px; height: 270px;boxSizing: border-box;display: block;position: static;"};
    this.s = this.s.bind(this);
    this.u = this.u.bind(this);
    this.o = this.o.bind(this);
    this.tn = this.tn.bind(this);
    this.i = this.i.bind(this);
    this.create();
  }
  Zb() {
    return "ColorSelectionItem";
  }
  create() {
    this.el.style = this.g.gg;
    this.l = new Nj(null);
    this.l.Le("headerMain");
    this.l.el.style = this.g.$c;
    this.Z(this.l);
    this.us = new Nj(null);
    this.us.el.className = "extension_reset_css extension_icon extension_icon-back";
    this.us.el.style = this.g.us;
    sj(this.us, "pointer");
    this.l.Z(this.us);
    Kj(this.us, this.i);
    this.Ep = new Nj(null);
    rj(this.Ep, "Color");
    this.Ep.el.style = this.g.Ep;
    this.l.Z(this.Ep);
    this.j = new Nj(null);
    this.j.el.className = "extension_reset_css extension_icon extension_icon-close";
    this.j.el.style = this.g.KJ;
    sj(this.j, "pointer");
    this.j.el.style.marginLeft = "4px";
    this.j.el.style.marginTop = "6px";
    this.l.Z(this.j);
    Kj(this.j, this.tn);
    this.Bw = new lm(this.el);
    this.Bw.addEventListener("StandardColorSelected", this.u);
    this.Aw = new Nj(null);
    rj(this.Aw, "Custom");
    this.Aw.el.style = this.g.Aw;
    this.Z(this.Aw);
    this.uw = new um();
    this.Z(this.uw);
    this.uw.addEventListener("colorChangeByGrid", this.o);
    this.m = new om(this.el);
    this.m.addEventListener("colorChangeBySlider", this.s);
    this.C = new vm(this.el);
  }
  i() {
    this.dispatchEvent(new CustomEvent("BackButtonClicked", {detail:null}));
  }
  tn() {
    this.dispatchEvent(new CustomEvent("CloseButtonClicked", {detail:null}));
  }
  u(a) {
    a = a.detail;
    this.uw.setData(a);
    this.C.setData(a);
    this.m.setData(a);
    wm(this, a);
  }
  o(a) {
    wm(this, a.detail);
  }
  s(a) {
    wm(this, a.detail);
  }
  setData(a) {
    this.Bw.setData(a);
    this.uw.setData(a);
    this.m.setData(a);
    this.C.setData(a);
  }
}
;function ym(a, b) {
  a.Rb = b;
  a.g && (a.g.Rb = b);
  a.j.update(100 * b);
}
class zm extends Nj {
  constructor() {
    super(null);
    this.l = {Of:"clear:both;font-family: Roboto, Arial, Helvetica, sans-serif;user-select: none;height: 34px; width: 236px; box-sizing: border-box;display: block;position: static;", label:"font-family: Roboto, Arial, Helvetica, sans-serif;font-family: Roboto, Arial, Helvetica, sans-serif;user-select: none;height: 34px; width:126px;float: left; font-size: 16px; margin-left: 6px;box-sizing: border-box;position: static;line-height:34px;display: block;",};
    this.g = null;
    this.Rb = 100;
    this.i = this.i.bind(this);
    this.create();
  }
  Zb() {
    return "OpacityProp";
  }
  create() {
    this.el.style = this.l.Of;
    this.label = new Nj(null);
    this.label.el.style = this.l.label;
    rj(this.label, "Opacity");
    this.Z(this.label);
    this.j = new cm(this, 100 * this.Rb, "%", 10, 100, 20);
    this.j.addEventListener("spinnerUpdate", this.i);
  }
  i(a) {
    a = a.detail;
    ym(this, a / 100);
    this.dispatchEvent(new CustomEvent("OpacityUpdate", {detail:a}));
  }
  setData(a) {
    this.g = a;
    this.Rb = a.Rb;
    ym(this, this.Rb);
  }
}
;class Am extends ph {
  constructor() {
    super();
    this.g = Xg();
    this.zd = this.hj = this.gj = "";
  }
  re(a) {
    "strFN" in a && (this.gj = a.strFN);
    "strLN" in a && (this.hj = a.strLN);
    if ("strOwnerGuid" in a) {
      let b = this.zd;
      this.zd = a.strOwnerGuid;
      Yg(b) && b != a.strOwnerGuid && this.mc(this.g);
    }
  }
}
function Bm(a, b) {
  b && (null == a.xs && (a.xs = new Am()), a.xs.re(b));
}
function Cm(a, b) {
  a.offsetTop = b;
}
function Dm(a) {
  if (a.s) {
    let c = a.s.vd();
    var b = a.s.rd();
    a.Cb && (b = Ek(c, b, a.Cb), c = b.x, b = b.y);
    a.offsetLeft = c;
    a.offsetTop = b;
  }
}
function Em(a) {
  return a.A ? parseFloat(a.A.scale) : 1;
}
function Fm(a) {
  let b = a.offsetLeft, c = a.offsetTop;
  a.A && (b = (b - a.A.x) / Em(a), c = (c - a.A.y) / Em(a));
  return {height:a.wb(), width:a.Ra(), left:b, top:c};
}
function Sm(a) {
  return -1 != a.offsetLeft && -1 != a.offsetTop;
}
function Tm(a, b) {
  "nId" in b ? a.he(parseInt(b.nId)) : "m_nId" in b && a.he(parseInt(b.m_nId));
  "uuid" in b && nh(a, b.uuid);
  "groupId" in b && (a.M = b.groupId);
  "scrollElementXPath" in b && (a.Cb = b.scrollElementXPath);
}
function Um(a) {
  let b = {x:0, y:0};
  if (a.Cb) {
    var c = Dk(a.Cb);
    if (c) {
      a = c.scrollLeft;
      let d = c.scrollTop;
      c = c.getBoundingClientRect();
      b.x = c.x + window.scrollX - a;
      b.y = c.y + window.scrollY - d;
    }
  }
  return b;
}
function Vm(a) {
  let b = null;
  a.Cb && (a = Dk(a.Cb)) && a != document.documentElement && a != document.body && (b = a.getBoundingClientRect());
  return b;
}
class Wm extends ph {
  constructor() {
    super();
    this.Va = Xg();
    this.ta = -1;
    this.nd = !1;
    this.height = this.width = this.offsetLeft = this.offsetTop = -1;
    this.A = null;
    this.S = -1;
    this.Uh = 8;
    this.s = null;
    this.$d();
    this.Cb = this.xs = null;
    this.Io = "";
    this.M = -1;
  }
  $d() {
    this.dd = "";
    this.Jp = 1;
  }
  Wo() {
    this.mc(this.Va);
  }
  Jg(a) {
    "height" in a && this.Mb(parseFloat(a.height));
    "width" in a && this.Qc(parseFloat(a.width));
    "offsetLeft" in a && (this.offsetLeft = parseFloat(a.offsetLeft));
    "offsetTop" in a && (this.offsetTop = parseFloat(a.offsetTop));
    "pageIndex" in a && this.kl(parseInt(a.pageIndex));
    "leftPadding" in a && (this.Uh = parseFloat(a.leftPadding));
    "pageInfo" in a && this.wf(JSON.parse(JSON.stringify(a.pageInfo)));
    "scrollElementXPath" in a && (this.Cb = a.scrollElementXPath);
  }
  rf() {
    return {height:this.wb(), width:this.Ra(), offsetLeft:this.offsetLeft, offsetTop:this.offsetTop, leftPadding:this.Uh, pageIndex:this.S, pageInfo:this.A ? JSON.parse(JSON.stringify(Object.assign({}, this.A))) : this.A, scrollElementXPath:this.Cb};
  }
  $f(a) {
    return {height:this.wb(), width:this.Ra(), offsetLeft:this.offsetLeft + a, offsetTop:this.offsetTop + a, leftPadding:this.Uh, pageIndex:this.S, pageInfo:this.A ? JSON.parse(JSON.stringify(Object.assign({}, this.A))) : this.A, scrollElementXPath:this.Cb};
  }
  kl(a) {
    this.S = a;
  }
  wf(a) {
    this.A = a;
  }
  wb() {
    return this.height;
  }
  Ka() {
    return this.height * Em(this);
  }
  Mb(a) {
    this.height = a;
  }
  Ra() {
    return this.width;
  }
  ab() {
    return this.width * Em(this);
  }
  Qc(a) {
    this.width = a;
  }
  Ba(a) {
    return a * Em(this);
  }
  Fa(a) {
    Tm(this, a);
    a.mediaOwnerInfo && Bm(this, a.mediaOwnerInfo);
  }
  Na() {
    return this.C();
  }
  wi() {
    return this.C();
  }
  C() {
    let a = {};
    a.nId = this.ta;
    a.uuid = this.qe;
    a.groupId = this.M;
    a.scrollElementXPath = this.Cb;
    return a;
  }
  bh(a) {
    let b = this.C();
    a && a.uuid == this.qe || this.Fb(b);
    return b;
  }
  Fb(a) {
    if (this.xs) {
      var b = this.xs;
      b = {strFN:b.gj, strLN:b.hj, strOwnerGuid:b.zd,};
    } else {
      b = null;
    }
    a.mediaOwnerInfo = b;
  }
  Ul() {
  }
  Ad(a) {
    "nId" in a && this.he(parseInt(a.nId));
    "uuid" in a && nh(this, a.uuid);
  }
  ib() {
    return null;
  }
  J() {
    return 0;
  }
  lb() {
    return 0;
  }
  he(a) {
    this.ta = a;
  }
  cb() {
    return "base";
  }
  Vn() {
  }
  Xe() {
    return {x:0, y:0, height:0, width:0};
  }
  Km() {
  }
  Nn() {
    return 1;
  }
  It() {
    return !1;
  }
  Ft() {
  }
  ia() {
    return 0;
  }
  u() {
  }
  ba() {
    return {x:0, y:0};
  }
  pa() {
  }
  ld() {
  }
  nq() {
  }
  Lc() {
    return !1;
  }
}
;function Xm(a) {
  a.G = -1;
  a.zd = "";
  a.j = -1;
  a.o = "";
  a.l = Ym;
  a.i = !1;
  a.Jb = "";
  a.m = {};
}
class Zm {
  constructor(a) {
    this.g = a;
    Xm(this);
  }
  re(a) {
    "uLivefeedActivityId" in a && (this.G = a.uLivefeedActivityId);
    "strOwnerGuid" in a && (this.zd = a.strOwnerGuid);
    "uClassId" in a && (this.j = a.uClassId);
    "docGuid" in a && (this.o = a.docGuid);
    "uLivefeedType" in a && (this.l = a.uLivefeedType);
    "strUserName" in a && (this.Jb = a.strUserName);
    a.SharedNotesFeedbackData && (this.m = a.SharedNotesFeedbackData);
    this.i = a.bCCLAllowed ? !0 : !1;
  }
}
class $m extends ph {
  constructor(a) {
    super();
    this.s = "";
    this.v = -1;
    this.j = "";
    this.g = a;
    this.Fs = new Zm(this);
    this.i = "";
    this.m = -1;
    this.hB = !1;
  }
  re(a) {
    "strUserGuid" in a && (this.i = a.strUserGuid);
    "userType" in a && (this.m = a.userType);
    this.hB = a.bPublisher ? !0 : !1;
    Xm(this.Fs);
    a.extraInfo && this.Fs.re(a.extraInfo);
    "strOwnerGuid" in a && (this.Fs.zd = a.strOwnerGuid);
  }
  get wA() {
    return this.i;
  }
  get o() {
    return this.s;
  }
  set o(a) {
    this.s = a;
  }
  get l() {
    return this.v;
  }
  set l(a) {
    this.v = a;
  }
  get Hx() {
    return this.j;
  }
  set Hx(a) {
    this.j = a;
  }
}
class an {
  constructor() {
    this.Sl = this.Hn = this.ma = "";
    this.xr = 1;
    this.Bs = "";
    this.bi = 0;
    this.qx = "";
    this.Iz = -1;
    this.Cz = "";
    this.Jz = -1;
    this.QD = 0;
  }
  re(a) {
    Yg(a) && ("strGUID" in a && (this.ma = a.strGUID), "strAnnotationName" in a && (this.Hn = a.strAnnotationName), "strPageUrl" in a && (this.Sl = a.strPageUrl), "uAnnotationType" in a && (this.xr = parseInt(a.uAnnotationType)), "dtCreated" in a && (this.Bs = a.dtCreated), "uVersionNo" in a && (this.bi = parseInt(a.uVersionNo)), "strThumbnailPath" in a && (this.qx = a.strThumbnailPath), "uExportPDFStatus" in a && (this.Iz = a.uExportPDFStatus), "strPDFDownloadLink" in a && (this.Cz = a.strPDFDownloadLink), 
    "uExportedPDFVersionNo" in a && (this.Jz = a.uExportedPDFVersionNo), "uExportingStage" in a && (this.QD = a.uExportingStage));
  }
}
;function bn(a) {
  a.Ae = new cn(null);
  a.Ae.addEventListener(cn.g, a.Ha.bind(a));
  a.Ae.addEventListener(cn.i, a.ya.bind(a));
  dn(a, !a.ia);
}
function en(a) {
  return a.B + " " + a.C;
}
function dn(a, b) {
  a.G = b;
  fn(a);
  a.G && (console.log(`>> Start Autosave ${a.ve}`), a.s = setInterval(a.ea.bind(a), 3E4));
}
function gn(a, b) {
  a.l = b;
  console.log(`#autosave > notes dirty state ${a.l}`);
}
function fn(a) {
  a.s && (console.log(`>> Stop Autosave ${a.ve}`), clearInterval(a.s), a.s = null);
}
class hn extends kj {
  constructor(a, b) {
    super();
    this.ve = a;
    this.ba = this.C = this.B = "";
    this.Ae = this.Il = this.N = null;
    this.Va = "";
    this.ib = -1;
    this.ia = b;
    this.m = null;
    this.o = this.l = this.G = !1;
    this.u = this.s = null;
  }
  hd() {
    return this.m;
  }
  re(a) {
    "strFirstName" in a && (this.B = a.strFirstName);
    "strLastName" in a && (this.C = a.strLastName);
    "strUserPicture" in a && (this.ba = a.strUserPicture);
    if (a.oUserPicturePosition) {
      let b = a.oUserPicturePosition;
      this.N = {x:parseFloat(b.x), y:parseFloat(b.y), w:parseFloat(b.w), lO:parseFloat(b.h)};
    }
    a.oAnnotationFile && (this.Il = new cn(null), this.Il.re(a.oAnnotationFile));
    a.oFeedbackFile && (bn(this), this.Ae.re(a.oFeedbackFile), this.mc(1, this));
    a.courseWorkDetails && (this.m = a.courseWorkDetails);
  }
  On() {
    return this.ve;
  }
  ya(a) {
    this.mc(8, {strStudentGuid:this.ve, arrMediaReencodeStatus:a.detail});
  }
  Ha() {
    gn(this, !0);
    this.mc(6, this.ve);
  }
  Gf() {
    return this.G;
  }
  ea() {
    if (this.Ae && this.l && !this.o) {
      let a = {};
      a.annotationData = jn(this.Ae);
      a.arrMediaAdded = this.Ae.B;
      a.strGUID = this.Ae.ma;
      a.strOwnerGuid = this.ve;
      this.mc(5, a);
      this.o = !0;
      gn(this, !1);
      this.u = setTimeout(this.J.bind(this), 15E3);
      console.log("#autosave > notes sent save req");
    }
  }
  J() {
    this.o = !1;
    this.u && (clearTimeout(this.u), this.u = null);
  }
  iy(a, b, c, d, e) {
    this.Ae || (bn(this), this.Ae.ma = a);
    this.Ae.ma == a && (b && (this.Ae.bi = b), c && this.Ae.dy(c), d && (this.Ae.g = d), e && (this.Ae.j = e));
    gn(this, !1);
    this.J();
    this.mc(1, this);
  }
}
;function jn(a) {
  let b = {};
  if (a.Rf && 0 !== Object.keys(a.Rf).length) {
    let f = a.Rf, k = a.Rf.pageAnnotations;
    var c = k && 0 !== Object.keys(k).length;
    if (c) {
      var d = Object.keys(k)[0];
      f = k[d];
    }
    d = l => l in f && f[l].length;
    b.arrAnnotations = d("arrAnnotations") ? f.arrAnnotations : [];
    b.arrTextElements = d("arrTextElements") ? f.arrTextElements : [];
    b.arrTextHighlights = d("arrTextHighlights") ? f.arrTextHighlights : [];
    b.arrComments = d("arrComments") ? f.arrComments : [];
    b.nMaxElementId = a.j;
    b.uuid = a.g;
    b.pageAnnotations = c ? k : {};
    a.A.maxPDFPageId && (b.maxPDFPageId = a.A.maxPDFPageId);
    a.A.pdfAnnotationPages && (b.pdfAnnotationPages = a.A.pdfAnnotationPages);
    a.A.pageData && (b.pageData = a.A.pageData);
    a.A.extensionVersion && (b.extensionVersion = a.A.extensionVersion);
    if (c) {
      a = [];
      c = [];
      d = [];
      for (var e in k) {
        let l = k[e];
        l.arrMediaAttachments && 0 < l.arrMediaAttachments.length && (a = a.concat(l.arrMediaAttachments));
        l.arrUploadedVideoAttachments && 0 < l.arrUploadedVideoAttachments.length && (d = d.concat(l.arrUploadedVideoAttachments));
        l.arrImageAttachments && 0 < l.arrImageAttachments.length && (c = c.concat(l.arrImageAttachments));
      }
      b.arrMediaAttachments = a;
      b.arrUploadedVideoAttachments = d;
      b.arrImageAttachments = c;
    } else {
      b.arrMediaAttachments = d("arrMediaAttachments") ? f.arrMediaAttachments : [], b.arrUploadedVideoAttachments = d("arrUploadedVideoAttachments") ? f.arrUploadedVideoAttachments : [], b.arrImageAttachments = d("arrImageAttachments") ? f.arrImageAttachments : [];
    }
  }
  return b;
}
class cn extends EventTarget {
  static get g() {
    return "EVT_STUDENT_DOCUMENT_UPDATED";
  }
  static get i() {
    return "EVT_MEDIA_REENCODED";
  }
  constructor(a) {
    super();
    this.Uf = "";
    this.Rf = null;
    this.l = [];
    this.B = [];
    this.ma = a;
    this.j = this.bi = -1;
    this.g = null;
    this.A = {};
    this.i = null;
    this.s = this.o = "";
    this.u = 0;
    this.v = "";
    this.m = null;
  }
  re(a) {
    a.strAnnotationDoc && (this.Rf = JSON.parse(a.strAnnotationDoc));
    a.arrMediaReencodeStatus && (this.l = a.arrMediaReencodeStatus);
    "strGUID" in a && (this.ma = a.strGUID);
    "strAnnotationPath" in a && (this.Uf = a.strAnnotationPath);
    "uVersionNo" in a && (this.bi = parseInt(a.uVersionNo, 10));
    this.Rf && "nMaxElementId" in this.Rf && (this.j = this.Rf.nMaxElementId);
    "strUserGuid" in a && (this.i = a.strUserGuid);
    "uuid" in a && (this.g = a.uuid);
    "strFirstName" in a && (this.o = a.strFirstName);
    "strLastName" in a && (this.s = a.strLastName);
    "uPublisherFeatureValue" in a && (this.u = a.uPublisherFeatureValue);
    "strUserPicture" in a && (this.v = a.strUserPicture);
    "oUserPicturePosition" in a && (this.m = a.oUserPicturePosition);
  }
  Xr(a) {
    this.B = a;
  }
  dy(a) {
    this.Rf = a;
  }
  wf(a) {
    a && (this.A = a);
  }
  Wo() {
    this.dispatchEvent(new CustomEvent(cn.g, {detail:this.g}));
  }
}
;function kn(a, b) {
  var c = null;
  let d;
  if (a && b) {
    let G = [];
    var e = b.arrElement;
    if (c = a.arrAnnotations) {
      for (var f of c) {
        d = ln(f.nId, e), c = null, -1 != d && (c = e[d]), G.push(mn(f, c));
      }
    }
    f = [];
    e = b.arrTextHighlights;
    if (c = a.arrTextHighlights) {
      for (var k of c) {
        d = ln(k.nId, e), c = null, -1 != d && (c = e[d]), f.push(mn(k, c));
      }
    }
    k = [];
    e = b.arrTextElements;
    if (c = a.arrTextElements) {
      for (var l of c) {
        d = ln(l.nId, e), c = null, -1 != d && (c = e[d]), k.push(mn(l, c));
      }
    }
    l = [];
    e = b.arrMediaAttachments;
    if (c = a.arrMediaAttachments) {
      for (var n of c) {
        d = ln(n.nId, e), c = null, -1 != d && (c = e[d]), l.push(mn(n, c));
      }
    }
    n = [];
    e = b.arrImageAttachments;
    if (c = a.arrImageAttachments) {
      for (var p of c) {
        d = ln(p.nId, e), c = null, -1 != d && (c = e[d]), n.push(mn(p, c));
      }
    }
    p = [];
    e = b.arrUploadedVideoAttachments;
    if (c = a.arrUploadedVideoAttachments) {
      for (var t of c) {
        d = ln(t.nId, e), c = null, -1 != d && (c = e[d]), p.push(mn(t, c));
      }
    }
    t = [];
    e = b.arrComments;
    if (c = a.arrComments) {
      for (var x of c) {
        d = ln(x.nId, e), c = null, -1 != d && (c = e[d]), t.push(mn(x, c));
      }
    }
    x = [];
    e = b.arrAssessmentData;
    if (c = a.arrAssessmentData) {
      for (var D of c) {
        d = ln(D.nId, e), c = null, -1 != d && (c = e[d]), x.push(mn(D, c));
      }
    }
    D = [];
    b = b.screenShadeElementData;
    if (a = a.screenShadeElementData) {
      for (let I of a) {
        d = ln(I.nId, b), c = null, -1 != d && (c = b[d]), D.push(mn(I, c));
      }
    }
    c = {};
    c.arrElement = G;
    c.arrTextHighlights = f;
    c.arrTextElements = k;
    c.arrMediaAttachments = l;
    c.arrImageAttachments = n;
    c.arrUploadedVideoAttachments = p;
    c.arrComments = t;
    c.arrAssessmentData = x;
    c.screenShadeElementData = D;
  }
  return c;
}
function nn(a) {
  let b = {};
  if (a) {
    let x = [];
    var c = a.arrAnnotations;
    if (c) {
      for (var d of c) {
        x.push({nId:d.nId, uuid:d.uuid ? d.uuid : "unset"});
      }
    }
    c = [];
    if (d = a.arrTextHighlights) {
      for (var e of d) {
        c.push({nId:e.nId, uuid:e.uuid ? e.uuid : "unset"});
      }
    }
    e = [];
    if (d = a.arrTextElements) {
      for (var f of d) {
        e.push({nId:f.nId, uuid:f.uuid ? f.uuid : "unset"});
      }
    }
    f = [];
    if (d = a.arrMediaAttachments) {
      for (var k of d) {
        f.push({nId:k.nId, uuid:k.uuid ? k.uuid : "unset"});
      }
    }
    k = [];
    if (d = a.arrImageAttachments) {
      for (var l of d) {
        k.push({nId:l.nId, uuid:l.uuid ? l.uuid : "unset"});
      }
    }
    l = [];
    if (d = a.arrUploadedVideoAttachments) {
      for (var n of d) {
        l.push({nId:n.nId, uuid:n.uuid ? n.uuid : "unset"});
      }
    }
    n = [];
    if (d = a.arrComments) {
      for (var p of d) {
        n.push({nId:p.nId, uuid:p.uuid ? p.uuid : "unset"});
      }
    }
    p = [];
    if (d = a.arrAssessmentData) {
      for (var t of d) {
        p.push({nId:t.nId, uuid:t.uuid ? t.uuid : "unset"});
      }
    }
    t = [];
    if (a = a.screenShadeElementData) {
      for (let D of a) {
        t.push({nId:D.nId, uuid:D.uuid ? D.uuid : "unset"});
      }
    }
    b.arrElement = x;
    b.arrTextHighlights = c;
    b.arrTextElements = e;
    b.arrMediaAttachments = f;
    b.arrImageAttachments = k;
    b.arrUploadedVideoAttachments = l;
    b.arrComments = n;
    b.arrAssessmentData = p;
    b.screenShadeElementData = t;
  }
  return b;
}
function ln(a, b) {
  let c = -1;
  if (b) {
    for (let d = 0; d < b.length; d++) {
      if (a == b[d].nId) {
        c = d;
        break;
      }
    }
  }
  return c;
}
function mn(a, b) {
  b || (b = {});
  let c = {};
  c.nId = a.nId;
  c.uuid = a.uuid ? a.uuid : "unset";
  b.uuid != c.uuid && Object.assign(c, a);
  c.uuid = a.uuid ? a.uuid : "unset";
  return c;
}
function on(a, b) {
  if (a && b) {
    var c = {}, d = b.length;
    for (var e = 0; e < d; e++) {
      b[e].bSyncStatus = !1, "nId" in b[e] && (c[b[e].nId] = e);
    }
    for (let f of a) {
      if (a = f.nId, d = f.uuid, a in c) {
        if (e = b[c[a]]) {
          (e.uuid ? e.uuid : "unset") != d && (b[c[a]] = f), e.bSyncStatus = !0;
        }
      } else {
        e = f, b.push(e), c[a] = b.length - 1, e.bSyncStatus = !0;
      }
    }
    c = b.length;
    for (--c; 0 <= c; c--) {
      b[c].bSyncStatus ? delete b[c].bSyncStatus : b.splice(c, 1);
    }
  }
}
function pn(a, b) {
  if (a) {
    if ("arrElement" in b) {
      var c = b.arrElement, d = a.arrAnnotations;
      d || (d = [], a.arrAnnotations = d);
      if (c && d) {
        for (let x of c) {
          d.push(x);
        }
      }
    }
    if ("arrTextHighlight" in b && (c = b.arrTextHighlight, d = a.arrTextHighlights, d || (d = [], a.arrTextHighlights = d), c && d)) {
      for (var e of c) {
        d.push(e);
      }
    }
    if ("arrTextElement" in b && (e = b.arrTextElement, c = a.arrTextElements, c || (c = [], a.arrTextElements = c), e && c)) {
      for (var f of e) {
        c.push(f);
      }
    }
    if ("arrMediaAttachments" in b && (f = b.arrMediaAttachments, e = a.arrMediaAttachments, e || (e = [], a.arrMediaAttachments = e), f && e)) {
      for (var k of f) {
        e.push(k);
      }
    }
    if ("arrImageAttachments" in b && (k = b.arrImageAttachments, f = a.arrImageAttachments, f || (f = [], a.arrImageAttachments = f), k && f)) {
      for (var l of k) {
        f.push(l);
      }
    }
    if ("arrUploadedVideoAttachments" in b && (l = b.arrUploadedVideoAttachments, k = a.arrUploadedVideoAttachments, k || (k = [], a.arrUploadedVideoAttachments = k), l && k)) {
      for (var n of l) {
        k.push(n);
      }
    }
    if ("arrCommentElement" in b && (n = b.arrCommentElement, l = a.arrComments, l || (l = [], a.arrComments = l), n && l)) {
      for (var p of n) {
        l.push(p);
      }
    }
    if ("arrScreenshadeAttachments" in b && (p = b.arrScreenshadeAttachments, n = a.screenShadeElementData, n || (n = [], a.screenShadeElementData = n), p && n)) {
      for (var t of p) {
        n.push(t);
      }
    }
    if (Sg.bq in b && (b = b[Sg.bq], t = a.elementGroupData, t || (t = [], a.elementGroupData = t), b && t)) {
      for (let x of b) {
        t.push(x);
      }
    }
  }
}
function qn(a, b) {
  if (a) {
    if ("arrElement" in b) {
      var c = b.arrElement, d = a.arrAnnotations;
      if (c && d) {
        var e = d.length;
        for (--e; 0 <= e; e--) {
          0 <= c.indexOf(d[e].nId) && d.splice(e, 1);
        }
      }
    }
    if ("arrTextHighlight" in b && (c = b.arrTextHighlight, d = a.arrTextHighlights, c && d)) {
      for (e = d.length, --e; 0 <= e; e--) {
        0 <= c.indexOf(d[e].nId) && d.splice(e, 1);
      }
    }
    if ("arrTextElement" in b && (c = b.arrTextElement, d = a.arrTextElements, c && d)) {
      for (e = d.length, --e; 0 <= e; e--) {
        0 <= c.indexOf(d[e].nId) && d.splice(e, 1);
      }
    }
    if ("arrMediaAttachments" in b && (c = b.arrMediaAttachments, d = a.arrMediaAttachments, c && d)) {
      for (e = d.length, --e; 0 <= e; e--) {
        0 <= c.indexOf(d[e].nId) && d.splice(e, 1);
      }
    }
    if ("arrImageAttachments" in b && (c = b.arrImageAttachments, d = a.arrImageAttachments, c && d)) {
      for (e = d.length, --e; 0 <= e; e--) {
        0 <= c.indexOf(d[e].nId) && d.splice(e, 1);
      }
    }
    if ("arrUploadedVideoAttachments" in b && (c = b.arrUploadedVideoAttachments, d = a.arrUploadedVideoAttachments, c && d)) {
      for (e = d.length, --e; 0 <= e; e--) {
        0 <= c.indexOf(d[e].nId) && d.splice(e, 1);
      }
    }
    if ("arrCommentElement" in b && (c = b.arrCommentElement, d = a.arrComments, c && d)) {
      for (e = d.length, --e; 0 <= e; e--) {
        0 <= c.indexOf(d[e].nId) && d.splice(e, 1);
      }
    }
    if ("arrScreenshadeAttachments" in b && (c = b.arrScreenshadeAttachments, d = a.screenShadeElementData, c && d)) {
      for (e = d.length, --e; 0 <= e; e--) {
        0 <= c.indexOf(d[e].nId) && d.splice(e, 1);
      }
    }
    if (Sg.bq in b && (b = b[Sg.bq], a = a.elementGroupData, b && a)) {
      for (c = a.length, --c; 0 <= c; c--) {
        0 <= b.indexOf(a[c].nId) && a.splice(c, 1);
      }
    }
  }
}
function rn(a, b) {
  if (a) {
    if ("arrElement" in b) {
      var c = b.arrElement, d = a.arrAnnotations;
      c && d && sn(c, d);
    }
    "arrTextHighlight" in b && (c = b.arrTextHighlight, d = a.arrTextHighlights, c && d && sn(c, d));
    "arrTextElement" in b && (c = b.arrTextElement, d = a.arrTextElements, c && d && sn(c, d));
    "arrMediaAttachments" in b && (c = b.arrMediaAttachments, d = a.arrMediaAttachments, c && d && sn(c, d));
    "arrImageAttachments" in b && (c = b.arrImageAttachments, d = a.arrImageAttachments, c && d && sn(c, d));
    "arrUploadedVideoAttachments" in b && (c = b.arrUploadedVideoAttachments, d = a.arrUploadedVideoAttachments, c && d && sn(c, d));
    "arrCommentElement" in b && (c = b.arrCommentElement, d = a.arrComments, c && d && sn(c, d));
    "arrScreenshadeAttachments" in b && (c = b.arrScreenshadeAttachments, d = a.screenShadeElementData, c && d && sn(c, d));
    Sg.bq in b && (b = b[Sg.bq], a = a.elementGroupData, b && a && sn(b, a));
  }
}
function sn(a, b) {
  let c = {}, d = b.length;
  for (let e = 0; e < d; e++) {
    "nId" in b[e] && (c[b[e].nId] = e);
  }
  for (let e of a) {
    if (a = e.nId, a in c) {
      for (let f of Object.keys(e)) {
        f in b[c[a]] && (b[c[a]][f] = e[f]);
      }
    }
  }
}
function un(a, b) {
  if (a) {
    if ("arrElement" in b) {
      var c = b.arrElement, d = a.arrAnnotations;
      c && d && vn(c, d);
    }
    "arrTextHighlight" in b && (c = b.arrTextHighlight, d = a.arrTextHighlights, c && d && vn(c, d));
    "arrTextElement" in b && (c = b.arrTextElement, d = a.arrTextElements, c && d && vn(c, d));
    "arrMediaAttachments" in b && (c = b.arrMediaAttachments, d = a.arrMediaAttachments, c && d && vn(c, d));
    "arrImageAttachments" in b && (c = b.arrImageAttachments, d = a.arrImageAttachments, c && d && vn(c, d));
    "arrUploadedVideoAttachments" in b && (c = b.arrUploadedVideoAttachments, d = a.arrUploadedVideoAttachments, c && d && vn(c, d));
    "arrCommentElement" in b && (c = b.arrCommentElement, d = a.arrComments, c && d && vn(c, d));
    "arrScreenshadeAttachments" in b && (c = b.arrScreenshadeAttachments, d = a.screenShadeElementData, c && d && vn(c, d));
    Sg.bq in b && (b = b[Sg.bq], a = a.elementGroupData, b && a && vn(b, a));
  }
}
function vn(a, b) {
  let c = {}, d = b.length;
  for (let e = 0; e < d; e++) {
    "nId" in b[e] && (c[b[e].nId] = e);
  }
  for (let e of a) {
    a = e.nId, a in c && (b[c[a]] = e);
  }
}
class wn extends kj {
  constructor() {
    super();
    this.g = 0;
  }
}
;class xn {
  re(a) {
    a && (this.g = a, "uCurrentMode" in a && (this.i = a.uCurrentMode), "uClassId" in a && (this.j = a.uClassId));
  }
}
function yn(a) {
  let b = S.g;
  if (a = a ? a : bl(b)) {
    let d = L.Pb();
    var c = a.uPublisherId;
    let e = a.strPublisherGuid, f = a.uPublishedAnnotationId, k = a.strPublishedAnnotationGuid, l = a.strPublishedAnnotationPath, n = a.strPublisherPicture, p = a.oPublisherPicturePosition, t = a.strPublisherFirstName, x = a.strPublisherLastName, D = a.uPublisherFeatureValue;
    a.strAnnotateDataRequestUrl && (M.v = a.strAnnotateDataRequestUrl);
    a.strS3BucketFullPath && (M.o = a.strS3BucketFullPath);
    cl(1) && (!Ch() && c == M.s || Ch() && e == Bh()) ? (zn(d, M.Tl, M.$i, M.B, M.C, !M.m), c = An(), Bn(d, -1, c, "" != Cn() ? Cn() : l, -1, c)) : cl(2) ? Dn(d, c, e, f, k, l, n, p, t, x, D) : En(d, c, e, f, k, l, n, p, t, x, D);
    Fn(S, Object.assign({}, a), b);
  }
}
function Gn(a, b) {
  a.l = b;
  L.mb() && L.mb();
}
function Hn(a) {
  var b = In;
  if (b.l) {
    return !1;
  }
  Jn("Syncing annotations...");
  L.sa({type:"annotateOpenSaveAnnotations", bOpenInNewTab:!1, bChangeUrlInCurrentTab:!1, strPageUrl:Ul(), uClassId:S.j, strGUID:a}, null);
  Gn(b, !0);
  b.G = setTimeout(() => {
    Kn("", "Error syncing annotations. Please load annotations again.", "", "OK", function() {
    }, function() {
    });
  }, 3E4);
  return !0;
}
function Ln(a, b, c) {
  var d = In;
  Jn("Loading annotations...");
  L.sa({type:"annotateOpenSaveAnnotations", bOpenInNewTab:!1, bChangeUrlInCurrentTab:!1, strPageUrl:Ul(), strGUID:a, bUpdateDate:c, uClassId:b}, null);
  Gn(In, !0);
  d.G = setTimeout(() => {
    Kn("", "Error loading annotations. Please try again.", "", "OK", function() {
    }, function() {
    });
  }, 3E4);
}
function Mn(a) {
  -1 != a.G && (Nn(), clearTimeout(a.G), a.G = -1);
}
function On(a, b, c, d, e) {
  let f = L.mb();
  Ch() ? (d && (d = d.toString()), e && (e = e.toString())) : (b = parseInt(b), c = parseInt(c));
  if (f.Gf() || (Ch() || -1 != b || -1 != c) && (!Ch() || d || e)) {
    Rl() || Pn("Please wait while annotations for Google assignment are being loaded...");
    var k = !1;
    Kh() && (k = !0, S.g = 3, f.Gf() && !Ch() && -1 == c || Ch() && !e ? (f.lw = !0, Qn(f, !0, !1, !1, !1)) : Rn(f));
    Ph() && (k = !0, S.g = 2, f.Gf() && !Ch() && -1 == b || Ch() && !d ? (f.lw = !0, Qn(f, !0, !1, !1, !1)) : Rn(f));
    k ? (Mn(a), console.log("timer added for load annotations"), a.G = setTimeout(() => {
      Gn(a, !1);
      Mn(a);
      Sn();
      Kn("", "Error loading annotations. Please try again.", "", "RETRY", null, function() {
        L.mb().lw ? On(a, -1, -1, d, e) : Kh() ? On(a, -1, -1, d, Tn()) : Ph() ? On(a, -1, -1, Un(), e) : Vn("Unable to load annotations for Google assignment.", null);
      });
    }, 3E4)) : Sn();
  } else {
    console.log(">>>>>no annotations saved previously"), P.l ? L.kd({type:Wn, bShow:!1}) : Gk(P) && Xn(), so(Kh() ? 3 : 2), to();
  }
}
function uo(a, b) {
  if (a && b) {
    for (let c = a.length - 1; 0 <= c; c--) {
      if (-1 != a[c].strMediaName.indexOf(b.strURL) && 1 != b.bReencoded) {
        b.bReencoded = parseInt(a[c].bReencoded);
        break;
      }
    }
  }
}
function vo(a, b) {
  if (a.arrMediaAttachments && 0 < b.length) {
    var c = a.arrMediaAttachments;
    for (var d = 0; d < c.length; d++) {
      var e = c[d].arrMedia;
      for (let f = 0; f < e.length; f++) {
        uo(b, e[f]);
      }
    }
  }
  if (a.arrComments && 0 < b.length) {
    for (a = a.arrComments, c = 0; c < a.length; c++) {
      for (e = a[c], d = e.replies, uo(b, e.recordedCommentMedia), e = 0; e < d.length; e++) {
        uo(b, d[e].recordedCommentMedia);
      }
    }
  }
}
function wo(a) {
  if (a) {
    for (let b of Object.keys(a)) {
      a[b] = a[b].filter(c => 2 != c.uDocType && 3 != c.uDocType);
    }
    return a;
  }
}
function xo(a) {
  if (Vk(P)) {
    var b = P.D;
    let d = yo(b, a.S);
    if (-1 != d) {
      var c = b.scale;
      let e = hl(b, d, new il(b.scrollX, b.scrollY)), f = jl(b, d) / c;
      b = kl(b, d) / c;
      a.Km(c);
      a.Vn({x:-e.$a, y:-e.Ua, width:f, height:b});
    }
  }
}
function zo(a, b) {
  var c = null;
  let d = Ao.B;
  "pen" == a.strElement ? c = new Bo(d, a.strStrokeStyle, null, null, null, null) : "rectangle" == a.strElement ? c = new Co(d, a.strStrokeStyle, a.fillStyle, a.strlineWidth, a.strStrokeAlpha, a.fillAlpha) : "ellipse" == a.strElement ? c = new Do(d, a.strStrokeStyle, a.fillStyle, a.strlineWidth, a.strStrokeAlpha, a.fillAlpha) : "line" == a.strElement ? c = new Eo(d, a.strStrokeStyle) : c = new Fo(d, a.strStrokeStyle, null, null, null, null);
  a.uGlobalScale = a.uGlobalScale ? a.uGlobalScale : 1;
  a.offsetPoint && !b && (b = L.yp(), !si() && b && (0 < a.offsetPoint.width && (a.uGlobalScale *= b.width / a.offsetPoint.width), a.offsetPoint.x = b.x, a.offsetPoint.y = b.y, a.offsetPoint.height = b.height, a.offsetPoint.width = b.width));
  b = L.uv();
  !si() && b && c.nq({x:b.x, y:b.y});
  c.Fa(a);
  xo(c);
  return c;
}
function Go(a, b) {
  let c = Ao.B, d = L.yp();
  switch(b) {
    case 2:
      return new Bo(c, a.px, a.Gz, a.ox, 1, Object.assign({}, d));
    case 3:
      return new Fo(c, a.px, a.Gz, a.ox, 1, Object.assign({}, d));
    case 12:
      return new Eo(c, a.px, a.px, a.Gz, a.ox, a.ox, a.Nf, a.Ng, hi.i.ij, 1, Object.assign({}, d));
    case 11:
      return new Do(c, a.px, a.fillStyle, a.Gz, a.ox, a.fm, 1, Object.assign({}, d));
    case 10:
      return new Co(c, a.px, a.fillStyle, a.Gz, a.ox, a.fm, 1, Object.assign({}, d));
  }
}
function Ho(a, b) {
  if (a) {
    for (let c of a.arrElement) {
      let d = zo(c, !1);
      Io(S, d, 1);
    }
    Jo.Br(a.arrTextElement, 1);
    Ko.Br(a.arrTextElement, 1);
    b && (L.Pb().Kv(a.arrMarkToBeDeletedMediaElements, a.arrMarkToBeDeletedImageElements, a.arrMarkToBeDeletedVideoElements, 1), A(Lo) || Lo.Uc.Kv(a.arrMarkedDeletedAssessmentIds));
  }
}
function Mo(a) {
  return a && 0 < Object.keys(a).length && (a.arrAnnotations && 0 < a.arrAnnotations.length || a.arrTextHighlights && 0 < a.arrTextHighlights.length || a.arrTextElements && 0 < a.arrTextElements.length || a.arrMediaAttachments && 0 < a.arrMediaAttachments.length || a.arrUploadedVideoAttachments && 0 < a.arrUploadedVideoAttachments.length || a.arrImageAttachments && 0 < a.arrImageAttachments.length || null != a.timerElementData || !A(a.arrAssessmentData) && 0 < a.arrAssessmentData.length || null != 
  a.screenShadeElementData && 0 < a.screenShadeElementData.length) ? !0 : !1;
}
function No() {
  var a = Oo(S);
  A(a) && (a = Oo(S));
  return A(a) ? null : Po(a, !1, 0);
}
function Qo(a, b, c) {
  if (a) {
    let k = L.Pb(), l = L.Zf(), n = a.arrMediaAttachments, p = a.arrUploadedVideoAttachments, t = a.arrImageAttachments, x = a.arrComments;
    if (a.arrAnnotations) {
      for (var d = a.arrAnnotations, e = 0; e < d.length; e++) {
        var f = zo(d[e], !1);
        Io(S, f, b);
      }
      a.arrTextElements && (Jo.Dr(a.arrTextElements, b), Ko.Dr(a.arrTextElements, b));
      a.arrTextHighlights && Ro.mF(a.arrTextHighlights, b);
    }
    n && n.length && So(k, n, b);
    t && t.length && To(k, t, b);
    p && p.length && Uo(k, p, b);
    1 == b && (!A(a.timerElementData) && (Vo() || V && -1 != V.l) && Wo(Xo, a.timerElementData), A(a.screenShadeElementData) || A(Yo) || c || Zo(a.screenShadeElementData));
    x && x.length && (l.zt(x, b), si() || l.Fx(x, b), l.Ex());
  }
}
function $o() {
  Ro && Ro.DM();
  Jo && Jo.XC();
  Ko && Ko.XC();
  Lo && ap(Lo.Uc);
  bp && cp();
  if (L.Pb()) {
    var a = L.Pb();
    console.log("[MAC] CLEAN UP, delete all attachments from ui/model list and reset foreve deleted media data");
    a.U();
  }
  dp();
  ep && fp(ep, !1, null);
  Xo && Xo.gb();
  Yo && (a = S.i) && gp(a);
  hp(Ao);
  if (2 == S.g || 3 == S.g) {
    ip(Ao), jp(Ao);
  }
  kp();
  Ao.g = null;
  lp(Ao);
  if (a = Oo(S)) {
    a.F = [];
  }
  if (a = Oo(S)) {
    a.Oe = [];
  }
  2 == S.g ? (qp(), rp()) : 3 == S.g && (qp(), sp());
  L.Zf() && L.Zf().Sr();
  si() && (P.D.v(), tp(Ao));
}
function up(a, b) {
  if (a.arrAnnotations) {
    var c = a.arrAnnotations;
    for (var d = 0; d < c.length; d++) {
      var e = c[d];
      "nId" in e || (b++, e.nId = b);
    }
  }
  if (a.arrTextElements) {
    for (d = a.arrTextElements, c = 0; c < d.length; c++) {
      e = d[c], "nId" in e || (b++, e.nId = b);
    }
  }
  if (a.arrTextHighlights) {
    for (a = a.arrTextHighlights, c = 0; c < a.length; c++) {
      d = a[c], "nId" in d || (b++, d.nId = b);
    }
  }
  return b;
}
function vp(a) {
  if (!("nMaxElementId" in a) || -1 == a.nMaxElementId) {
    let b;
    b = up(a, -1);
    if (a.pageAnnotations) {
      let c = a.pageAnnotations;
      for (let d in c) {
        b = up(c[d], b);
      }
    }
    a.nMaxElementId = b;
  }
}
function wp(a) {
  if (Vk(P)) {
    var b = P.D, c = a.S;
    if (-1 != c) {
      var d = yo(b, c);
      if (-1 != d) {
        c = hl(b, d, new il(b.scrollX, b.scrollY));
        var e = jl(b, d) / b.scale;
        d = kl(b, d) / b.scale;
        if (a.Xe().x != -c.$a || a.Xe().y != -c.Ua || a.Xe().height != d || a.Xe().width != e || a.Nn() != b.scale) {
          a.Km(b.scale), a.Vn({x:-c.$a, y:-c.Ua, width:e, height:d});
        }
        "rectangle" != a.cb() && "ellipse" != a.cb() && "line" != a.cb() || a.wm(b);
      }
    }
  } else {
    if (b = L.yp()) {
      0 < a.Xe().width && a.Km(b.width / a.Xe().width * a.Nn()), a.Vn(Object.assign({}, b)), (b = L.uv()) && a.nq({x:b.x, y:b.y});
    }
  }
}
class xp extends ph {
  constructor() {
    super();
    this.g = null;
    this.l = !1;
    this.G = -1;
    this.i = !1;
    this.j = this.j.bind(this);
    this.o = this.o.bind(this);
    this.m = this.m.bind(this);
  }
  j(a) {
    Ro && Ro.EM();
    Jo && Jo.YC();
    Ko && Ko.YC();
    yp() && (Xo && Xo.gb(), Yo && Yo.gb(), Lo && zp());
    bp && cp();
    Ao.g = null;
    if (L.Pb()) {
      var b = L.Pb();
      Ap(b, ql());
      if (a) {
        if (a = Oo(S)) {
          b = a.Gd;
          for (var c = 0; c < b.length; c++) {
            b[c].qD();
          }
          a = a.Ed;
          for (b = 0; b < a.length; b++) {
            a[b].qD();
          }
        }
      } else {
        if (a = Oo(S)) {
          b = {arrMediaAttachments:[]};
          c = null;
          for (c of a.Ed) {
            b.arrMediaAttachments.push(c.ta);
          }
          Bp(a);
          a.xb();
          a.dispatchEvent(new CustomEvent(Cp.g, {detail:b}));
        }
        if (a = Oo(S)) {
          b = {arrUploadedVideoAttachments:[]};
          c = null;
          for (c of a.Gd) {
            b.arrUploadedVideoAttachments.push(c.ta);
          }
          Dp(a);
          a.xb();
          a.dispatchEvent(new CustomEvent(Cp.g, {detail:b}));
        }
      }
      if (a = Oo(S)) {
        b = {arrImageAttachments:[]};
        c = null;
        for (c of a.Ld) {
          b.arrImageAttachments.push(c.ta);
        }
        a.Ld = [];
        a.xb();
        a.dispatchEvent(new CustomEvent(Cp.g, {detail:b}));
      }
    }
    yp() ? hp(Ao) : Ep() ? ip(Ao) : Fp() && jp(Ao);
    kp();
    (a = Oo(S)) && a.zB();
    if (a = Oo(S)) {
      b = {arrElementGroup:[]};
      c = null;
      for (c of a.Oe) {
        b.arrElementGroup.push(c.ta);
      }
      a.Oe = [];
      a.xb();
      a.dispatchEvent(new CustomEvent(Cp.g, {detail:b}));
    }
    si() && (Gp(P.D), tp(Ao));
    (a = Oo(S)) && yp() && bl(1) && a.Rj(!1);
  }
  o() {
    Ql.Ja() && to();
    P.u = !1;
    Hp(L.Pb());
    Ip();
    ii("10.10");
    Ro && Ro.ez();
    if (M.Va) {
      var a = Ul(), b = "All annotations on this page shall be deleted.";
      if (-1 != a.indexOf("docs.google.com/presentation/d/") || -1 != a.indexOf("canva.com/design")) {
        b = "All annotations on this deck shall be deleted.";
      }
      var c = this;
      Kn("", b, "CANCEL", "DELETE", () => {
      }, d => {
        c.j(!1);
        Jp();
        Kp();
        d && (M.Va = !1, L.sa({type:"AnnotateDoNotShowDeleteAllWarning"}, null));
        Fh(P) && (this.i = !0);
      }, null, null, !1, null, !1, -1, -1, !0);
    } else {
      this.j(!1), Jp(), Kp();
    }
  }
  m() {
    Lp();
    Ip();
    yp() ? hp(Ao) : Ep() ? ip(Ao) : Fp() && jp(Ao);
    kp();
    var a = Oo(S);
    if (a) {
      let c = {arrElement:[]};
      var b = null;
      for (b of a.F) {
        "pen" != b.cb() && "highlighter" != b.cb() || c.arrElement.push(b.ta);
      }
      for (b = a.F.length - 1; 0 <= b; b--) {
        let d = a.F[b];
        if ("pen" == d.cb() || "highlighter" == d.cb()) {
          a.F.splice(b, 1), Mp(d, Oo(S).je());
        }
      }
      a.xb();
      a.dispatchEvent(new CustomEvent(Cp.g, {detail:c}));
    }
    (a = Oo(S)) && Np(a);
    L.rA();
    Kp();
    Fh(P) && (this.i = !0);
  }
}
var In = new xp();
class Op {
  constructor() {
    this.l = "";
    this.j = this.i = -1;
    this.g = 1;
  }
  yi() {
    return 1 != this.g;
  }
  lj() {
    return 2 == this.g;
  }
  ap(a) {
    this.g = a;
  }
  re(a) {
    "uClassTaskId" in a && (this.i = a.uClassTaskId);
    "strPage" in a && (this.l = a.strPage);
    "uStatus" in a && (this.g = a.uStatus);
    "uClassId" in a && (this.j = a.uClassId);
  }
}
function Pp(a, b) {
  if (!A(b)) {
    let c = new Op();
    c.re(b);
    a.g.set(b.strPage, c);
  }
}
function Qp(a, b) {
  let c = "";
  a.g.forEach(d => {
    d.i == b && (c = d.l);
  });
  return c;
}
class Rp {
  constructor() {
    this.j = -1;
    this.g = new Map();
  }
  yi(a) {
    return (a = this.g.get(a)) ? a.yi() : !1;
  }
  lj(a) {
    return (a = this.g.get(a)) ? a.lj() : !1;
  }
  ap(a, b) {
    if (a = this.g.get(a)) {
      return a.ap(b);
    }
  }
}
class Sp {
  constructor() {
    this.g = new Map();
  }
  yi(a, b) {
    let c = !1;
    this.g.forEach(d => {
      d.yi(b) && (c = !0);
    });
    return c;
  }
  lj(a, b) {
    return (a = this.g.get(a)) ? a.lj(b) : !1;
  }
  xg(a, b) {
    return (a = this.g.get(a)) ? Qp(a, b) : "";
  }
  ap(a, b, c) {
    if (a = this.g.get(a)) {
      return a.ap(b, c);
    }
  }
  re(a) {
    if (!A(a)) {
      this.g.clear();
      for (let b = 0; b < a.length; b++) {
        let c = a[b], d = parseInt(c.uClassId);
        if (this.g.has(d)) {
          Pp(this.g.get(d), c);
        } else {
          let e = new Rp();
          Pp(e, c);
          this.g.set(d, e);
        }
      }
    }
    console.log("[Assessment] arrClassAssessmentInfo ", this.g.size);
  }
}
function Tp(a, b) {
  a.i = b;
  (a = Up.g) && am(a);
}
class Vp {
  constructor() {
    this.j = this.i = null;
    this.g = new Sp();
  }
  yi(a, b) {
    return this.g.yi(a, b);
  }
  lj(a, b) {
    return this.g.lj(a, b);
  }
  xg(a, b) {
    return this.g.xg(a, b);
  }
  ap(a, b, c) {
    this.g.ap(a, b, c);
  }
  re(a) {
    this.i = null;
    this.g.g.clear();
    "strAssessmentFileGuid" in a && Tp(this, a.strAssessmentFileGuid);
    if ("pageExtraInfo" in a) {
      var b = a.pageExtraInfo;
      this.g.g.clear();
      b && this.g.re(b);
    }
    "strAssessmentOwnerGuid" in a && (this.j = a.strAssessmentOwnerGuid);
  }
}
function Wp(a) {
  a.j = "";
  a.i = -1;
  a.zd = "";
  a.g = -1;
}
class Xp extends ph {
  constructor(a) {
    super();
    this.l = a;
    Wp(this);
  }
  re(a) {
    Wp(this);
    "strGUID" in a && (this.j = a.strGUID);
    "uRoomId" in a && (this.i = a.uRoomId);
    "strOwnerGuid" in a && (this.zd = a.strOwnerGuid);
    "uLivefeedClassId" in a && (this.g = a.uLivefeedClassId);
    console.log(`livefeed info set ${this.j}`);
  }
  cy() {
    return {strGUID:this.j, uRoomId:this.i, strOwnerGuid:this.zd, uLivefeedClassId:this.g};
  }
  nj() {
    console.log(`livefeed info clear ${this.j}`);
    Wp(this);
  }
}
function Po(a, b, c) {
  let d = {}, e = {strFN:M.B, strLN:M.C, strOwnerGuid:Bh(),};
  Oo(S) != a || L.mb().jw || (Ko.Vi() && Ko.$h(), Jo.Vi() && Jo.$h());
  for (var f = [], k = a.F, l = 0; l < k.length; l++) {
    f.push(k[l].Na());
  }
  k = Jo.vv(a);
  k = k.concat(Ko.vv(a));
  l = [];
  var n = a.Ed;
  for (var p = 0; p < n.length; p++) {
    var t = n[p].Na();
    5 == c && (t.mediaOwnerInfo = e);
    l.push(t);
  }
  n = [];
  p = a.Ld;
  for (t = 0; t < p.length; t++) {
    var x = p[t].Na();
    5 == c && (x.mediaOwnerInfo = e);
    n.push(x);
  }
  p = [];
  t = a.Gd;
  for (x = 0; x < t.length; x++) {
    let G = t[x].Na();
    5 == c && (G.mediaOwnerInfo = e);
    p.push(G);
  }
  t = L.Zf();
  d.arrAnnotations = f;
  d.arrTextElements = k;
  d.arrTextHighlights = Ro.pG(a);
  d.arrMediaAttachments = l;
  d.arrImageAttachments = n;
  d.arrUploadedVideoAttachments = p;
  d.arrComments = t.vv(a);
  d.nMaxElementId = Yp(a);
  d.uuid = a.qe;
  (f = P.v) && (d.pageData = {height:f.height, width:f.width});
  1 == a.je() && (d.timerElementData = Xo && null != Xo.g ? Xo.g.Na() : null, d.arrAssessmentData = A(Lo) ? [] : Zp(Lo.be), d.screenShadeElementData = Yo ? $p() : null);
  si() && (f = P.D, d.pdfAnnotationPages = aq(f), d.maxPDFPageId = f.Ss);
  P.o && (d.whiteboardData = P.Cm().Na());
  d.elementGroupData = bq.Na();
  if (b) {
    b = Ul();
    a = Object.assign({}, a.cv);
    if (b && (Jk(P) || ml(P)) && a && 0 < Object.keys(a).length) {
      b = [];
      f = [];
      k = [];
      for (var D in a) {
        l = a[D], l.arrMediaAttachments && 0 < l.arrMediaAttachments.length && (n = l.arrMediaAttachments, 5 == c && n.forEach(G => G.mediaOwnerInfo = e), b = b.concat(n)), l.arrUploadedVideoAttachments && 0 < l.arrUploadedVideoAttachments.length && (n = l.arrUploadedVideoAttachments, 5 == c && n.forEach(G => G.mediaOwnerInfo = e), k = k.concat(n)), l.arrImageAttachments && 0 < l.arrImageAttachments.length && (l = l.arrImageAttachments, 5 == c && l.forEach(G => G.mediaOwnerInfo = e), f = f.concat(l));
      }
      d.arrMediaAttachments = b;
      d.arrUploadedVideoAttachments = k;
      d.arrImageAttachments = f;
    }
    d.pageData = P.v;
    d.pageAnnotations = a;
    d.extensionVersion = chrome.runtime.getManifest().version;
  }
  return d;
}
function cq(a, b, c) {
  a.pg = b;
  console.log(`Set annotationId ${b} docType ${a.qd}`);
  a.Uf = c;
}
function dq(a, b) {
  a.bg = b;
  console.log(`doc version ${a.bg} type ${a.qd}`);
}
function eq(a, b, c) {
  a.su = !1;
  let d = a.l;
  a.l = b;
  if (a.Yi) {
    a.Yi.strLockOwnerGuid = a.l;
    b = a.Yi;
    var e = In;
    b && e.g && e.g.i == a.qd && (e.g.g.baseDocumentOwnerInfo = Object.assign({}, b));
  }
  c && a.l && a.l.length && fq(a.qd) && d == Bh() && (a.su = !0, a.j && a.j.ob() && gq(a.j));
  hq(a) && 1 == a.qd && Yg(a.l) && !M.g ? a.m.start() : Zg(a.m) && a.m.stop();
  iq(W, a.qd, hq(a));
  a.uh && d == Bh() || hq(a) || a.Rj(!1);
  console.log(`lock Owner ${a.l} docType->${a.qd} curDocType->${S.g}`);
}
function jq(a, b) {
  a.Yi = b;
  a.Yi && "strLockOwnerGuid" in a.Yi && eq(a, a.Yi.strLockOwnerGuid, !1);
}
function hq(a) {
  if (Jh()) {
    let b = Bh();
    return Yg(a.l) ? a.l == b : a.sk() == b;
  }
  return !1;
}
function kq(a, b, c) {
  b && "strGUID" in b && b.strGUID == a.ma && (a.su = !1, a.o.re(b), c && iq(W, a.qd, hq(a)));
}
function lq(a) {
  Vn("Loading...", null);
  L.sa({type:"ANNOTATE_REQ_UPDATE_FILE_LOCK_OWNER", strOwnerGuid:a.sk(), bOwnedFile:a.Fm() ? 1 : 0, strGuid:a.ma, strLockOwnerGuid:Bh(), bAutoInitiated:0, bLoaderVisible:!0, uDocType:a.qd}, null);
}
function mq(a, b) {
  !b || M.g || !Fh(P) && 0 < document.getElementsByClassName(Si()).length ? a.ji && a.ji.ob() && gq(a.ji) : (a.ji || (a.ji = new nq(), oq(a.ji, "TAKE CONTROL", () => {
    gq(a.ji);
    lq(a);
  }, "CLOSE", null, null), a.ji.g.innerHTML = "Access expired. You are no longer able to make changes."), a.ji.C(), a.ji.l());
  a.su = !1;
}
function pq(a, b) {
  b.oLivefeed && kq(a, b, !1);
  eq(a, b.strLockOwnerGuid, !1);
  console.log(`on file owner update doc version local ${a.bg} server ${b.versionNo}`);
  "versionNo" in b && b.versionNo != a.bg && !(M.g || !Fh(P) && 0 < document.getElementsByClassName(Si()).length || V && V.l != Ym) && (a.j || (a.j = new nq(), oq(a.j, "RELOAD", a.J.bind(a), null, null, null), a.j.g.innerHTML = "Page reload required!"), a.j.C(), a.j.l());
}
function qq(a, b) {
  var c;
  if (!(c = b)) {
    if (c = Rl() && Kh() && window == window.top && L.Ye()) {
      a: {
        c = L.Ye();
        for (let d in c.tc) {
          if (c.tc[d].l) {
            c = !0;
            break a;
          }
        }
        c = !1;
      }
    }
    c = !(c || S.Vl());
  }
  c || (b = !0);
  b ? a.u || (a.u = !0, window.addEventListener("beforeunload", a.s, {capture:!0})) : (a.u = !1, window.removeEventListener("beforeunload", a.s, {capture:!0}));
}
function rq(a) {
  hq(a) && 1 == a.qd && Yg(a.l) && L.sa({type:"ANNOTATE_REQ_RENEW_FILE_LOCK", strGuid:a.ma,}, b => {
    b && "ANNOTATE_RES_RENEW_FILE_LOCK" == b.type && console.log(`"File lock renewed response ${b.bSuccessful}`);
  });
}
function sq(a, b) {
  b.bLoaderVisible && Nn();
  b.bSuccessful ? pq(a, b) : Kn("", "Unable to take control.", "", "OK", null, () => {
  });
}
function tq(a) {
  let b = null;
  for (b of a.ye) {
    Ro.Nr(b.Qe, b, a.qd);
  }
  a.ye = [];
}
function Kq(a, b) {
  let c = null, d = -1;
  for (c of a.ye) {
    if (d++, c.ta == b) {
      return d;
    }
  }
  return -1;
}
function Lq(a, b) {
  b = Kq(a, b);
  return 0 <= b ? a.ye[b] : null;
}
function Mq(a, b) {
  let c = null, d = -1;
  for (c of a.Fd) {
    if (d++, c.ta == b) {
      return d;
    }
  }
  return -1;
}
function Nq(a, b) {
  b = Mq(a, b);
  return 0 <= b ? a.Fd[b] : null;
}
function Oq(a, b) {
  let c = null, d = -1;
  for (c of a.F) {
    if (d++, c.ta == b) {
      return d;
    }
  }
  return -1;
}
function Pq(a, b) {
  b = Oq(a, b);
  return 0 <= b ? a.F[b] : null;
}
function Qq(a, b) {
  let c = null, d = -1;
  for (c of a.Ld) {
    if (d++, c.ta == b) {
      return d;
    }
  }
  return -1;
}
function Rq(a, b) {
  b = Qq(a, b);
  return 0 <= b ? a.Ld[b] : null;
}
function Dp(a) {
  let b = [];
  for (let c = 0; c < a.Gd.length; c++) {
    a.Gd[c].sn && b.push(a.Gd[c]);
  }
  a.Gd = b;
}
function Sq(a, b) {
  let c = null, d = -1;
  for (c of a.Gd) {
    if (d++, c.ta == b) {
      return d;
    }
  }
  return -1;
}
function Tq(a, b) {
  b = Sq(a, b);
  return 0 <= b ? a.Gd[b] : null;
}
function Bp(a) {
  let b = [];
  for (let c = 0; c < a.Ed.length; c++) {
    a.Ed[c].sn && b.push(a.Ed[c]);
  }
  a.Ed = b;
}
function Uq(a, b) {
  let c = null, d = -1;
  for (c of a.Ed) {
    if (d++, c.ta == b) {
      return d;
    }
  }
  return -1;
}
function Vq(a, b) {
  b = Uq(a, b);
  return 0 <= b ? a.Ed[b] : null;
}
function Wq(a, b) {
  let c = null;
  for (c of a.Wd) {
    if (c.ta == b) {
      return c;
    }
  }
  return null;
}
function Xq(a, b) {
  if (0 <= b && b < a.Wd.length) {
    let c = a.Wd[b].dk;
    c && Ro.Nr(c.Qe, c, a.qd);
    a.Wd.splice(b, 1);
  }
}
function Yq(a) {
  for (let b of a.Wd) {
    let c = b.dk;
    c && Ro.Nr(c.Qe, c, a.qd);
  }
  a.Wd = [];
}
function Zq(a, b) {
  let c = null, d = -1;
  for (c of a.i) {
    if (d++, c.ta == b) {
      return d;
    }
  }
  return -1;
}
function $q(a, b) {
  b = Zq(a, b);
  return 0 <= b ? a.i[b] : null;
}
function gp(a) {
  for (let b of a.g) {
    b && b.gb();
  }
  a.g = [];
}
function ar(a, b) {
  if (0 <= b && b < a.g.length) {
    let c = a.g[b];
    a.g.splice(b, 1);
    c && c.gb();
  }
}
function br(a) {
  a.dh = Yp(a) + 1;
  return a.dh;
}
function cr(a, b) {
  let c = -1;
  for (let d of a.g) {
    if (c++, d.ta == b) {
      return c;
    }
  }
  return -1;
}
function dr(a, b) {
  b = cr(a, b);
  return 0 <= b ? a.g[b] : null;
}
function er(a, b) {
  let c = {};
  for (var d = 0; d < b.length; d++) {
    c[b[d].strMediaName] = b[d].bReencoded;
  }
  L.Pb().yg(c, a.qd);
  (d = Ul()) && (d.includes("docs.google.com/presentation/d/") || d.includes("GoogleSlidesPresentation/preview.html")) && (d = a.Pa) && 0 < Object.keys(d).length && 0 < b.length && fr(b, d);
  (b = (b = L.Zf()) ? b.ci() : null) && b.yg(c, a.qd);
}
function gr() {
  return {arrAnnotations:[], arrTextElements:[], arrTextHighlights:[], arrMediaAttachments:[], arrImageAttachments:[], arrUploadedVideoAttachments:[], arrComments:[], arrAssessmentData:[], screenShadeElementData:[], elementGroupData:[]};
}
function hr(a, b) {
  let c = {};
  if (b) {
    for (var d in a.Pa) {
      var e = a.Pa[d];
      b = gr();
      if (e.arrMediaAttachments && 0 < e.arrMediaAttachments.length) {
        b.arrMediaAttachments = e.arrMediaAttachments;
        for (var f = 0; f < b.arrMediaAttachments.length; f++) {
          b.arrMediaAttachments[f].markAsExportedInSlides = !0;
        }
      }
      if (e.arrUploadedVideoAttachments && 0 < e.arrUploadedVideoAttachments.length) {
        for (b.arrUploadedVideoAttachments = e.arrUploadedVideoAttachments, e = 0; e < b.arrUploadedVideoAttachments.length; e++) {
          b.arrUploadedVideoAttachments[e].markAsExportedInSlides = !0;
        }
      }
      c[d] = b;
    }
  } else {
    for (d in a.Pa) {
      b = a.Pa[d];
      e = gr();
      if (b.arrMediaAttachments && 0 < b.arrMediaAttachments.length) {
        for (e.arrMediaAttachments = [], f = 0; f < b.arrMediaAttachments.length; f++) {
          b.arrMediaAttachments[f].markAsExportedInSlides && e.arrMediaAttachments.push(b.arrMediaAttachments[f]);
        }
      }
      if (b.arrUploadedVideoAttachments && 0 < b.arrUploadedVideoAttachments.length) {
        for (e.arrUploadedVideoAttachments = [], f = 0; f < e.arrUploadedVideoAttachments.length; f++) {
          b.arrUploadedVideoAttachments[f].markAsExportedInSlides && e.arrUploadedVideoAttachments.push(b.arrUploadedVideoAttachments[f]);
        }
      }
      c[d] = e;
    }
  }
  a.Pa = {};
  a.Pa = Object.assign({}, c);
  a.dispatchEvent(new CustomEvent(Cp.m, {detail:{}}));
}
function ir(a, b, c) {
  c = jr(a, b, c);
  0 <= c && (a = a.Pa[b]) && "elementGroupData" in a && (a = a.elementGroupData) && a.splice(c, 1);
}
function Np(a) {
  for (var b in a.Pa) {
    let d = a.Pa[b];
    if (d.arrAnnotations && 0 < d.arrAnnotations.length) {
      for (let e = d.arrAnnotations.length - 1; 0 <= e; e--) {
        var c = d.arrAnnotations[e];
        if ("pen" == c.strElement || "highlighter" == c.strElement) {
          d.arrAnnotations.splice(e, 1), c = c.groupId, -1 != c && ir(a, b, c);
        }
      }
    }
  }
  a.dispatchEvent(new CustomEvent(Cp.m, {detail:{bRemovePenHighlighterOnly:!0}}));
}
function kr(a, b) {
  let c = a.Pa[b];
  c || (c = {arrAnnotations:[], arrTextElements:[], arrTextHighlights:[], arrMediaAttachments:[], arrImageAttachments:[], arrUploadedVideoAttachments:[], arrComments:[], arrAssessmentData:[], screenShadeElementData:[], elementGroupData:[]}, a.Pa[b] = c);
  return c;
}
function lr(a, b, c) {
  if (b) {
    let d = a.Pa[b];
    d || (d = kr(a, b));
    d && "arrAnnotations" in d && (a = d.arrAnnotations) && a.push(c);
  }
}
function mr(a, b, c) {
  if (b && b in a.Pa && (a = a.Pa[b]) && "arrAnnotations" in a && (a = a.arrAnnotations)) {
    for (b = 0; b < a.length; b++) {
      if (a[b].nId == c) {
        return b;
      }
    }
  }
  return -1;
}
function nr(a, b, c) {
  if (b && b in a.Pa && (a = a.Pa[b]) && "arrTextElements" in a && (a = a.arrTextElements)) {
    for (b = 0; b < a.length; b++) {
      if (a[b].nId == c) {
        return b;
      }
    }
  }
  return -1;
}
function or(a, b, c) {
  if (b && b in a.Pa && (a = a.Pa[b]) && "arrTextHighlights" in a && (a = a.arrTextHighlights)) {
    for (b = 0; b < a.length; b++) {
      if (a[b].nId == c) {
        return b;
      }
    }
  }
  return -1;
}
function pr(a, b, c) {
  if (b && b in a.Pa && (a = a.Pa[b]) && "arrMediaAttachments" in a && (a = a.arrMediaAttachments)) {
    for (b = 0; b < a.length; b++) {
      if (a[b].nId == c) {
        return b;
      }
    }
  }
  return -1;
}
function qr(a, b, c) {
  if (b && b in a.Pa && (a = a.Pa[b]) && "arrImageAttachments" in a && (a = a.arrImageAttachments)) {
    for (b = 0; b < a.length; b++) {
      if (a[b].nId == c) {
        return b;
      }
    }
  }
  return -1;
}
function rr(a, b, c) {
  if (b && b in a.Pa && (a = a.Pa[b]) && "arrUploadedVideoAttachments" in a && (a = a.arrUploadedVideoAttachments)) {
    for (b = 0; b < a.length; b++) {
      if (a[b].nId == c) {
        return b;
      }
    }
  }
  return -1;
}
function jr(a, b, c) {
  if (b && b in a.Pa && (a = a.Pa[b]) && "elementGroupData" in a && (a = a.elementGroupData)) {
    for (b = 0; b < a.length; b++) {
      if (a[b].nId == c) {
        return b;
      }
    }
  }
  return -1;
}
function Yp(a) {
  let b = a.dh, c = null;
  for (c of a.F) {
    b = Math.max(b, c.ta);
  }
  for (c of a.Fd) {
    b = Math.max(b, c.ta);
  }
  for (c of a.ye) {
    b = Math.max(b, c.ta);
  }
  for (c of a.Ed) {
    b = Math.max(b, c.ta);
  }
  for (c of a.Ld) {
    b = Math.max(b, c.ta);
  }
  for (c of a.Gd) {
    b = Math.max(b, c.ta);
  }
  for (c of a.Wd) {
    b = Math.max(b, c.ta);
  }
  for (c of a.i) {
    b = Math.max(b, c.ta);
  }
  for (c of a.g) {
    b = Math.max(b, c.ta);
  }
  for (c of a.Oe) {
    b = Math.max(b, c.ta);
  }
  return a.dh = b;
}
function sr(a, b) {
  let c = -1;
  if (b) {
    for (let d = 0; d < b.length; d++) {
      if (a == b[d].nId) {
        c = d;
        break;
      }
    }
  }
  return c;
}
function tr(a, b) {
  let c = -1;
  if (b) {
    for (let d = 0; d < b.length; d++) {
      if (a == b[d].nId) {
        c = d;
        break;
      }
    }
  }
  return c;
}
function ur(a, b) {
  b || (b = {});
  let c = {};
  c.nId = a.nId;
  c.uuid = a.uuid ? a.uuid : "unset";
  b.uuid != c.uuid && Object.assign(c, a);
  c.uuid = a.uuid ? a.uuid : "unset";
  return c;
}
function vr(a, b) {
  if (!b || b.uuid == a.qe && b.versionNo == a.bg) {
    console.log("Already in sync...", b, a.je());
  } else {
    dq(a, b.versionNo);
    nh(a, b.uuid);
    if ("strAssessmentFileGuid" in b) {
      var c = b.strAssessmentFileGuid;
      !A(a.Bk) && c && c.length && Tp(a.Bk, c);
    }
    a.dh = b.nMaxElementId;
    var d = b.arrElement;
    let yc = null;
    if (d) {
      for (yc of a.F) {
        yc.nd = !1;
      }
      for (let ia of d) {
        let gb = ia.uuid, xa = Pq(a, ia.nId);
        if (xa) {
          xa.qe != gb && (console.log("Element Parse SavedData", ia.uuid, xa.qe), xa.Fa(ia)), xa.nd = !0;
        } else {
          if (xa = wr(a, ia)) {
            xa.nd = !0;
          }
        }
      }
      let wc = a.F.length;
      for (let ia = wc - 1; 0 <= ia; ia--) {
        a.F[ia].nd || 0 <= ia && ia < a.F.length && a.F.splice(ia, 1);
      }
    }
    var e = b.arrTextHighlights;
    let wh = null;
    if (e) {
      for (wh of a.ye) {
        wh.nd = !1;
      }
      for (let ia of e) {
        let gb = ia.uuid, xa = Lq(a, ia.nId);
        if (xa) {
          xa.qe != gb && (xa.Ad(ia), Ro.Nr(xa.Qe, xa, a.qd), xa.ru = !1), xa.nd = !0;
        } else {
          if (xa = xr(a, ia)) {
            xa.nd = !0;
          }
        }
      }
      let wc = a.ye.length;
      for (let ia = wc - 1; 0 <= ia; ia--) {
        if (!a.ye[ia].nd) {
          var f = a, k = ia;
          if (0 <= k && k < f.ye.length) {
            let gb = f.ye[k];
            Ro.Nr(gb.Qe, gb, f.qd);
            f.ye.splice(k, 1);
          }
        }
      }
    }
    var l = b.arrTextElements;
    let wg = null;
    if (l) {
      for (wg of a.Fd) {
        wg.nd = !1;
      }
      for (let ia of l) {
        let gb = ia.uuid, xa = Nq(a, ia.nId);
        if (xa) {
          xa.qe != gb && (xa.Ad(ia), yr(xa)), xa.nd = !0;
        } else {
          if (xa = zr(a, ia)) {
            xa.nd = !0;
          }
        }
      }
      let wc = a.Fd.length;
      for (let ia = wc - 1; 0 <= ia; ia--) {
        if (!a.Fd[ia].nd) {
          var n = a, p = ia;
          0 <= p && p < n.Fd.length && (yr(n.Fd[p]), n.Fd.splice(p, 1));
        }
      }
    }
    var t = b.arrMediaAttachments;
    let Ue = null;
    if (t) {
      for (Ue of a.Ed) {
        Ue.nd = !1;
      }
      for (let ia of t) {
        let gb = ia.uuid, xa = Vq(a, ia.nId);
        if (xa) {
          xa.qe != gb && xa.Fa(ia), xa.nd = !0;
        } else {
          if (xa = Ar(a, ia)) {
            xa.nd = !0;
          }
        }
      }
      let wc = a.Ed.length;
      for (let ia = wc - 1; 0 <= ia; ia--) {
        if (!a.Ed[ia].nd) {
          var x = a;
          if (0 <= ia && ia < x.Ed.length) {
            let gb = x.Ed[ia];
            x.Ed.splice(ia, 1);
            Br(L.Pb(), gb, x.je());
          }
        }
      }
    }
    var D = b.arrImageAttachments;
    let Uf = null;
    if (D) {
      for (Uf of a.Ld) {
        Uf.nd = !1;
      }
      for (let ia of D) {
        let gb = ia.uuid, xa = Rq(a, ia.nId);
        if (xa) {
          xa.qe != gb && xa.Fa(ia), xa.nd = !0;
        } else {
          if (xa = Cr(a, ia)) {
            xa.nd = !0;
          }
        }
      }
      let wc = a.Ld.length;
      for (let ia = wc - 1; 0 <= ia; ia--) {
        if (!a.Ld[ia].nd) {
          var G = a;
          if (0 <= ia && ia < G.Ld.length) {
            let gb = G.Ld[ia];
            G.Ld.splice(ia, 1);
            Dr(L.Pb(), gb, G.je());
          }
        }
      }
    }
    var I = b.arrUploadedVideoAttachments;
    let Th = null;
    if (I) {
      for (Th of a.Gd) {
        Th.nd = !1;
      }
      for (let ia of I) {
        let gb = ia.uuid, xa = Tq(a, ia.nId);
        if (xa) {
          xa.qe != gb && xa.Fa(ia), xa.nd = !0;
        } else {
          if (xa = Er(a, ia)) {
            xa.nd = !0;
          }
        }
      }
      let wc = a.Gd.length;
      for (let ia = wc - 1; 0 <= ia; ia--) {
        if (!a.Gd[ia].nd) {
          var Q = a;
          if (0 <= ia && ia < Q.Gd.length) {
            let gb = Q.Gd[ia];
            Q.Gd.splice(ia, 1);
            Fr(L.Pb(), gb, Q.je());
          }
        }
      }
    }
    var X = b.arrAssessmentData;
    let We = null;
    if (X) {
      for (We of a.i) {
        We.nd = !1;
      }
      for (let ia of X) {
        let gb = ia.uuid, xa = $q(a, ia.nId);
        if (xa) {
          xa.qe != gb && xa.Fa(ia), xa.nd = !0;
        } else {
          if (xa = Gr(ia)) {
            xa.nd = !0;
          }
        }
      }
      let wc = a.i.length;
      for (let ia = wc - 1; 0 <= ia; ia--) {
        a.i[ia].nd || 0 <= ia && ia < a.i.length && a.i.splice(ia, 1);
      }
    }
    var Fa = b.screenShadeElementData;
    let xh = null;
    if (Fa) {
      for (xh of a.g) {
        xh.nd = !1;
      }
      for (let ia of Fa) {
        let gb = ia.uuid, xa = dr(a, ia.nId);
        if (xa) {
          xa.qe != gb && xa.Fa(ia), xa.nd = !0;
        } else {
          if (xa = Hr(ia)) {
            xa.nd = !0;
          }
        }
      }
      let wc = a.g.length;
      for (let ia = wc - 1; 0 <= ia; ia--) {
        a.g[ia].nd || ar(a, ia);
      }
    }
    var La = b.elementGroupData;
    let mf = null;
    if (La) {
      for (mf of a.Oe) {
        mf.nd = !1;
      }
      for (let ia of La) {
        let gb = ia.uuid, xa = Ir(a, ia.nId);
        if (xa) {
          xa.qe != gb && xa.Fa(ia), xa.nd = !0;
        } else {
          if (xa = Jr(ia)) {
            xa.nd = !0;
          }
        }
      }
      let wc = a.Oe.length;
      for (let ia = wc - 1; 0 <= ia; ia--) {
        a.Oe[ia].nd || 0 <= ia && ia < a.g.length && a.Oe.splice(ia, 1);
      }
    }
    var Aa = b.arrComments;
    let xg = null;
    if (Aa) {
      for (xg of a.Wd) {
        xg.nd = !1;
      }
      for (let ia of Aa) {
        let gb = ia.uuid, xa = Wq(a, ia.nId);
        if (xa) {
          xa.qe != gb && xa.Fa(ia), xa.nd = !0;
        } else {
          if (xa = Kr(a, ia)) {
            xa.nd = !0;
          }
        }
      }
      let wc = a.Wd.length;
      for (let ia = wc - 1; 0 <= ia; ia--) {
        a.Wd[ia].nd || Xq(a, ia);
      }
    }
    var Ha = b.timerElementData;
    if (Ha) {
      Xo.g && (Xo.g.nd = !1);
      for (let wc of Ha) {
        let ia = wc.uuid, gb;
        Xo.g && Xo.g.Mc && (gb = Xo.g);
        if (gb) {
          if (gb.qe != ia) {
            var aa = wc, ya = Xo;
            Wo(ya, aa);
            Lr(ya, aa);
            ya.Va(null);
            aa.bCurrentTimerState && !ya.g.g && ya.ea();
          }
          gb.nd = !0;
        } else {
          if (gb = Mr(wc, !0)) {
            gb.nd = !0;
          }
        }
      }
      Xo.g && !Xo.g.nd && Nr();
    }
    var fc = a.Pa, ed = b.pageAnnotations;
    if (fc && ed) {
      for (let wc in ed) {
        let ia = fc[wc];
        ia || (fc[wc] = {}, ia = fc[wc]);
        var Bc = ed[wc], Kb = ia;
        if (Bc && Kb) {
          let gb = Kb.arrAnnotations;
          gb || (gb = [], Kb.arrAnnotations = gb);
          Or(Bc.arrElement, gb);
          let xa = Kb.arrTextHighlights;
          xa || (xa = [], Kb.arrTextHighlights = xa);
          Or(Bc.arrTextHighlights, xa);
          let fd = Kb.arrTextElements;
          fd || (fd = [], Kb.arrTextElements = fd);
          Or(Bc.arrTextElements, fd);
          let qd = Kb.arrMediaAttachments;
          qd || (qd = [], Kb.arrMediaAttachments = qd);
          Or(Bc.arrMediaAttachments, qd);
          let Ld = Kb.arrImageAttachments;
          Ld || (Ld = [], Kb.arrImageAttachments = Ld);
          Or(Bc.arrImageAttachments, Ld);
          let fe = Kb.arrUploadedVideoAttachments;
          fe || (fe = [], Kb.arrUploadedVideoAttachments = fe);
          Or(Bc.arrUploadedVideoAttachments, fe);
          let gc = Kb.arrAssessmentData;
          gc || (gc = [], Kb.arrAssessmentData = gc);
          Or(Bc.arrAssessmentData, gc);
          let qe = Kb.screenShadeElementData;
          qe || (qe = [], Kb.screenShadeElementData = qe);
          Or(Bc.screenShadeElementData, qe);
          let pc = Kb.elementGroupData;
          pc || (pc = [], Kb.elementGroupData = pc);
          Or(Bc.elementGroupData, pc);
          let da = void 0;
          var Cb = Bc.timerElementData, Xe = Kb;
          let Sb = Xe.timerElementData;
          Cb && Sb && (Sb.bSyncStatus = !1);
          Cb && (da = Cb[0]);
          da && (Sb = da, Sb.bSyncStatus = !0);
          Sb && Sb.bSyncStatus ? delete Sb.bSyncStatus : Sb = {};
          Xe.timerElementData = Sb;
        }
      }
    }
  }
}
function wr(a, b) {
  let c = null;
  b && (c = zo(b, !1), a.F.push(c));
  return c;
}
function xr(a, b) {
  let c = null;
  b && (c = Ro.mI(b, a.je()));
  return c;
}
function zr(a, b) {
  let c = null;
  b && ((c = Jo.Sz(b)) || (c = Ko.Sz(b)), a.Fd.push(c));
  return c;
}
function Ar(a, b) {
  var c = null;
  if (b) {
    if (c = L.Pb(), a = a.je(), b) {
      let d = new Pr();
      d.Fa(b);
      a ? Qr(d, a) : Rr(d);
      Sr(c, d, a);
      si() ? Tr(c, c.D) : c.A && c.wf(c.A);
      c = d;
    } else {
      c = null;
    }
  }
  return c;
}
function Cr(a, b) {
  var c = null;
  if (b) {
    if (c = L.Pb(), a = a.je(), b) {
      let d = new Ur();
      d.Fa(b);
      a ? Vr(d, a) : Wr(d);
      Xr(c, d, a);
      Yr(c);
      c = d;
    } else {
      c = null;
    }
  }
  return c;
}
function Er(a, b) {
  var c = null;
  if (b) {
    if (c = L.Pb(), a = a.je(), b) {
      let d = new Zr();
      d.Fa(b);
      a ? $r(d, a) : S.tv(d);
      as(c, d, a);
      si() ? Tr(c, c.D) : c.A && c.wf(c.A);
      c = d;
    } else {
      c = null;
    }
  }
  return c;
}
function Gr(a) {
  var b = null;
  if (!A(a) && bs) {
    var c = Lo;
    A(c) || (b = c.be, c = null, A(a) || A(a.strAssessmentId) || b.g.has(a.strAssessmentId) || (c = new cs(), ds(b, c), c.Fa(a), b.g.set(c.xg(), c), b.mc(b.j, {strAssessmentId:c.xg()}), es(c)), b = c);
  }
  return b;
}
function Hr(a) {
  var b = null;
  if (!A(a) && Yo) {
    b = Yo;
    let c = null;
    if (a) {
      c = fs(b);
      c.Fa(a);
      gs(c);
      c.Az = c.width / c.A.width;
      c.zz = c.height / c.A.height;
      if (!si() || Vk(P)) {
        hs(c), is(c), c.Mc && c.me() && js(c), ks(c, c.de);
      }
      c.ce = !1;
      ls(c);
    }
    b = c;
  }
  return b;
}
function Ir(a, b) {
  for (let c of a.Oe) {
    if (c.ta === b) {
      return c;
    }
  }
  return null;
}
function Jr(a) {
  var b = null;
  !A(a) && bq && (b = new ms(a.nID), nh(b, a.uuid), b.g = a.arrElementId);
  return b;
}
function Kr(a, b) {
  var c = null;
  if (b) {
    let d = L.Zf();
    d && (a = a.je(), c = null, b.bParentComment && (c = ns(d, b, a), os(c, a)));
  }
  return c;
}
function Mr(a, b) {
  if (a && Xo) {
    var c = Xo;
    Wo(c, a);
    ps(Xo.g, a.uTime);
    c.g.Fa(a);
    b && (Lr(c, a), c.Va(null));
    a.bCurrentTimerState && c.ea();
    a = c.g;
  } else {
    a = null;
  }
  return a;
}
function Nr() {
  Xo && Xo.g && Xo.g.Mc && qs();
}
function Or(a, b) {
  if (a && b) {
    var c = {}, d = b.length;
    for (var e = 0; e < d; e++) {
      b[e].bSyncStatus = !1, "nId" in b[e] && (c[b[e].nId] = e);
    }
    for (let f of a) {
      if (a = f.nId, d = f.uuid, a in c) {
        if (e = b[c[a]]) {
          (e.uuid ? e.uuid : "unset") != d && (b[c[a]] = f), b[c[a]].bSyncStatus = !0;
        }
      } else {
        e = f, b.push(e), c[a] = b.length - 1, e.bSyncStatus = !0;
      }
    }
    c = b.length;
    for (--c; 0 <= c; c--) {
      b[c].bSyncStatus ? delete b[c].bSyncStatus : b.splice(c, 1);
    }
  }
}
function rs(a, b) {
  b = Zq(a, b);
  0 <= b && (a = a.i[b], bs && (b = Lo, A(b) || ts(b.be, a.g)));
}
function us(a) {
  a.v && (clearInterval(a.v), a.v = null);
}
function vs(a) {
  a.uh ? (console.log("[Doc] OnDirtyDoc"), a.uh && (L.mb().Ja() || P.l) && L.kd({type:ws, bDirty:!0}), L && L.Bm() && xs(), qq(a, !0), a.v = setInterval(() => {
    Wl() || us(a);
  }, 180000)) : (us(a), a.kw || Ql.Fq || qq(a, !1));
}
function ys(a, b) {
  a.Ed.forEach(d => Bm(d, b));
  a.Ld.forEach(d => Bm(d, b));
  a.Gd.forEach(d => Bm(d, b));
  a = a.cv;
  if ((Jk(P) || ml(P)) && a && 0 < Object.keys(a).length) {
    for (var c in a) {
      let d = a[c];
      d.arrMediaAttachments && 0 < d.arrMediaAttachments.length && d.arrMediaAttachments.forEach(e => e.mediaOwnerInfo = b);
      d.arrUploadedVideoAttachments && 0 < d.arrUploadedVideoAttachments.length && d.arrUploadedVideoAttachments.forEach(e => e.mediaOwnerInfo = b);
      d.arrImageAttachments && 0 < d.arrImageAttachments.length && d.arrImageAttachments.forEach(e => e.mediaOwnerInfo = b);
    }
  }
}
function zs(a, b) {
  if (0 == a.Oe.length) {
    return -1;
  }
  let c = 0;
  for (; c < a.Oe.length && a.Oe[c].ta !== b;) {
    c++;
  }
  c == a.Oe.length && (c = -1);
  return c;
}
function As(a, b) {
  b && b.xb();
  a.xb();
  let c = {};
  c.timerElement = [b];
  a.dispatchEvent(new CustomEvent(Cp.i, {detail:c}));
}
function Bs(a, b) {
  return b && b in a.Pa && (a = a.Pa[b]) && "timerElementData" in a ? a.timerElementData : null;
}
function Cs(a) {
  var b = S.i;
  b.ma == a.strGUID && b.ji.ob() && gq(b.ji);
}
function Ds(a) {
  a.ma = null;
  var b = a.Bk;
  b.i = null;
  b.g.g.clear();
  a.bg = -1;
  a.Sx = "";
  a.Yi = null;
  us(a);
  a.F = [];
  a.ye = [];
  a.Ur();
  a.Tr();
  a.Ed = [];
  a.Ld = [];
  a.Gd = [];
  a.Wd = [];
  a.i = [];
  a.g = [];
  a.Oe = [];
  a.Pa = {};
  a.cv = {};
  a.Rj(!1);
  a.su = !1;
  a.m && Zg(a.m) && a.m.stop();
}
class Cp extends ph {
  static get j() {
    return "EVT_ELEMENTS_ADDED";
  }
  static get g() {
    return "EVT_ELEMENTS_REMOVED";
  }
  static get i() {
    return "EVT_ELEMENTS_MODIFIED";
  }
  static get l() {
    return "EVT_ELEMENT_PROPS_UPDATED";
  }
  static get m() {
    return "EVT_REMOVE_ALL_PAGE_ANNOTATION";
  }
  static get o() {
    return "EVT_MEDIA_REENCODED";
  }
  constructor(a) {
    super();
    this.qd = a;
    this.pg = -1;
    this.Bk = new Vp();
    this.ma = null;
    this.Hn = "";
    this.l = null;
    this.Uf = "";
    this.bg = -1;
    this.Sx = "";
    this.uh = !1;
    this.v = null;
    this.kw = !1;
    this.xr = 0;
    this.F = [];
    this.ye = [];
    this.Fd = [];
    this.Pa = {};
    this.cv = {};
    this.Ld = [];
    this.Gd = [];
    this.Ed = [];
    this.Wd = [];
    this.i = [];
    this.g = [];
    this.Yi = null;
    this.dh = -1;
    this.s = this.s.bind(this);
    this.u = !1;
    this.o = new Xp(this);
    this.Oe = [];
    this.ji = this.j = null;
    this.m = new $g(this.C.bind(this), 24E4);
    this.B = this.G.bind(this);
    M.addEventListener(M.pa, this.B);
  }
  sk() {
    return this.Yi ? this.Yi.strPublisherGuid : null;
  }
  Fm() {
    return this.sk() == Bh();
  }
  J() {
    qq(this, !1);
    Hn(this.ma) && this.j && gq(this.j);
  }
  G() {
    Yg(this.ma) && 1 == this.qd && 1 == this.qd && Yg(this.l) && L.sa({type:"ANNOTATE_REQ_GET_FILE_LOCK_OWNER_INFO", strGuid:this.ma, bOwnedFile:this.Fm() ? 1 : 0, strOwnerGuid:this.sk(),}, a => {
      Yg(this.ma) && a && "ANNOTATE_RES_GET_FILE_LOCK_OWNER_INFO" == a.type && (console.log(a.type), pq(this, a));
    });
  }
  C() {
    Yg(this.ma) && rq(this);
  }
  Ur() {
    for (let a = this.Fd.length - 1; 0 <= a; a--) {
      Es(this.Fd[a]) && (yr(this.Fd[a]), this.Fd.splice(a, 1));
    }
  }
  Tr() {
    for (let a = this.Fd.length - 1; 0 <= a; a--) {
      Fs(this.Fd[a]) && (yr(this.Fd[a]), this.Fd.splice(a, 1));
    }
  }
  zB() {
    let a = {arrElement:[]}, b = null;
    for (b of this.F) {
      a.arrElement.push(b.ta);
    }
    this.F = [];
    this.xb();
    this.dispatchEvent(new CustomEvent(Cp.g, {detail:a}));
  }
  kG(a) {
    return this.F.indexOf(a);
  }
  Kj(a, b) {
    let c = {};
    c[b] = a;
    this.mc(Cp.j, c);
  }
  ck(a) {
    if (-1 != this.Wd.indexOf(a) && (a && a.xb(), this.xb(), !a.Zm || Gs(a))) {
      var b = {};
      b.arrCommentElement = [a];
      this.dispatchEvent(new CustomEvent(Cp.l, {detail:b}));
    }
  }
  yg(a) {
    er(this, a);
    let b = {};
    b.arrMediaReencodeStatus = a;
    this.dispatchEvent(new CustomEvent(Cp.o, {detail:b}));
  }
  wi() {
    var a = null;
    let b = [];
    for (a of this.F) {
      b.push(a.wi());
    }
    let c = [];
    for (a of this.ye) {
      c.push(a.wi());
    }
    let d = [];
    for (a of this.Fd) {
      d.push(a.wi());
    }
    let e = [];
    for (a of this.Ed) {
      e.push(a.wi());
    }
    let f = [];
    for (a of this.Ld) {
      f.push(a.wi());
    }
    let k = [];
    for (a of this.Gd) {
      k.push(a.wi());
    }
    let l = {};
    for (var n in this.Pa) {
      var p = n, t = this.Pa[n], x = {};
      if (t) {
        var D = [], G = t.arrAnnotations;
        if (G) {
          for (let ya of G) {
            D.push({nId:ya.nId, uuid:ya.uuid ? ya.uuid : "unset",});
          }
        }
        G = [];
        var I = t.arrTextHighlights;
        if (I) {
          for (let ya of I) {
            G.push({nId:ya.nId, uuid:ya.uuid ? ya.uuid : "unset",});
          }
        }
        I = [];
        var Q = t.arrTextElements;
        if (Q) {
          for (let ya of Q) {
            I.push({nId:ya.nId, uuid:ya.uuid ? ya.uuid : "unset",});
          }
        }
        Q = [];
        var X = t.arrMediaAttachments;
        if (X) {
          for (let ya of X) {
            Q.push({nId:ya.nId, uuid:ya.uuid ? ya.uuid : "unset",});
          }
        }
        X = [];
        var Fa = t.arrImageAttachments;
        if (Fa) {
          for (let ya of Fa) {
            X.push({nId:ya.nId, uuid:ya.uuid ? ya.uuid : "unset",});
          }
        }
        Fa = [];
        var La = t.arrUploadedVideoAttachments;
        if (La) {
          for (let ya of La) {
            Fa.push({nId:ya.nId, uuid:ya.uuid ? ya.uuid : "unset",});
          }
        }
        La = [];
        var Aa = t.arrComments;
        if (Aa) {
          for (let ya of Aa) {
            La.push({nId:ya.nId, uuid:ya.uuid ? ya.uuid : "unset",});
          }
        }
        Aa = [];
        var Ha = t.arrAssessmentData;
        if (Ha) {
          for (let ya of Ha) {
            Aa.push({nId:ya.nId, uuid:ya.uuid ? ya.uuid : "unset",});
          }
        }
        Ha = [];
        var aa = t.screenShadeElementData;
        if (aa) {
          for (let ya of aa) {
            Ha.push({nId:ya.nId, uuid:ya.uuid ? ya.uuid : "unset",});
          }
        }
        aa = [];
        if (t = t.elementGroupData) {
          for (let ya of t) {
            aa.push({nId:ya.nId, uuid:ya.uuid ? ya.uuid : "unset",});
          }
        }
        x.arrElement = D;
        x.arrTextHighlights = G;
        x.arrTextElements = I;
        x.arrMediaAttachments = Q;
        x.arrImageAttachments = X;
        x.arrUploadedVideoAttachments = Fa;
        x.arrComments = La;
        x.arrAssessmentData = Aa;
        x.screenShadeElementData = Ha;
        x.elementGroupData = aa;
      }
      l[p] = x;
    }
    p = [];
    for (a of this.Wd) {
      p.push(a.wi());
    }
    n = [];
    for (a of this.i) {
      n.push(a.wi());
    }
    x = [];
    for (a of this.g) {
      x.push(a.wi());
    }
    D = [];
    for (a of this.Oe) {
      D.push(a.wi());
    }
    a = [];
    Xo && Xo.g && Xo.g.Mc && a.push(Xo.g.wi());
    return {arrElement:b, arrTextHighlights:c, arrTextElements:d, arrMediaAttachments:e, arrImageAttachments:f, arrUploadedVideoAttachments:k, arrComments:p, arrAssessmentData:n, screenShadeElementData:x, elementGroupData:D, timerElementData:a, pageAnnotations:l, strAssessmentFileGuid:this.Bk.i, docGuid:this.ma, versionNo:this.bg, uuid:this.qe,};
  }
  bh(a) {
    let b = {strAssessmentFileGuid:this.Bk.i, docGuid:this.ma, versionNo:this.bg, uuid:this.qe, nMaxElementId:Yp(this),};
    if (a.versionNo != this.bg || a.uuid != this.qe) {
      if (a) {
        var c = null;
        var d = [];
        var e = a.arrElement;
        for (c of this.F) {
          var f = sr(c.ta, e);
          var k = null;
          -1 != f && (k = e[f]);
          d.push(c.bh(k));
        }
        e = [];
        var l = a.arrTextHighlights;
        for (c of this.ye) {
          f = sr(c.ta, l), k = null, -1 != f && (k = l[f]), e.push(c.bh(k));
        }
        l = [];
        var n = a.arrTextElements;
        for (c of this.Fd) {
          f = sr(c.ta, n), k = null, -1 != f && (k = n[f]), l.push(c.bh(k));
        }
        n = [];
        var p = a.arrMediaAttachments;
        for (c of this.Ed) {
          f = sr(c.ta, p), k = null, -1 != f && (k = p[f]), n.push(c.bh(k));
        }
        p = [];
        var t = a.arrImageAttachments;
        for (c of this.Ld) {
          f = sr(c.ta, t), k = null, -1 != f && (k = t[f]), p.push(c.bh(k));
        }
        t = [];
        var x = a.arrUploadedVideoAttachments;
        for (c of this.Gd) {
          f = sr(c.ta, x), k = null, -1 != f && (k = x[f]), t.push(c.bh(k));
        }
        x = [];
        var D = a.arrComments;
        for (c of this.Wd) {
          f = sr(c.ta, D), k = null, -1 != f && (k = D[f]), x.push(c.bh(k));
        }
        D = [];
        var G = a.arrAssessmentData;
        for (c of this.i) {
          f = sr(c.ta, G), k = null, -1 != f && (k = G[f]), D.push(c.bh(k));
        }
        G = [];
        var I = a.screenShadeElementData;
        for (c of this.g) {
          f = sr(c.ta, I), k = null, -1 != f && (k = I[f]), G.push(c.bh(k));
        }
        c = [];
        for (var Q of this.Oe) {
          c.push(Q.bh());
        }
        Q = [];
        f = a.timerElementData;
        if (Xo && Xo.g && Xo.g.Mc) {
          var X = Xo.g;
        }
        X && (k = null, f && f.length && (k = f[0]), k = f = X.bh(k), X = Xo, k.uElapsedTime = X.B, X.m && (k.timerControllerState = {timerElapsed:X.m.g, totalTime:X.m.i, initialTime:X.m.l,}), X.s && (k.stopWatchControllerState = {timerElapsed:X.s.g, totalTime:X.s.l, initialTime:X.s.j,}), Q.push(f));
        k = {};
        k.arrElement = d;
        k.arrTextHighlights = e;
        k.arrTextElements = l;
        k.arrMediaAttachments = n;
        k.arrImageAttachments = p;
        k.arrUploadedVideoAttachments = t;
        k.arrComments = x;
        k.arrAssessmentData = D;
        k.screenShadeElementData = G;
        k.elementGroupData = c;
        k.timerElementData = Q;
        d = k;
      } else {
        d = null;
      }
      d && (b.arrElement = d.arrElement, b.arrTextHighlights = d.arrTextHighlights, b.arrTextElements = d.arrTextElements, b.arrMediaAttachments = d.arrMediaAttachments, b.arrImageAttachments = d.arrImageAttachments, b.arrUploadedVideoAttachments = d.arrUploadedVideoAttachments, b.arrComments = d.arrComments, b.arrAssessmentData = d.arrAssessmentData, b.screenShadeElementData = d.screenShadeElementData, b.elementGroupData = d.elementGroupData, b.timerElementData = d.timerElementData);
      d = {};
      b.pageAnnotations = d;
      e = this.Pa;
      if ((a = a.pageAnnotations) && e) {
        for (var Fa in e) {
          a[Fa] || (a[Fa] = {arrElement:[], arrTextHighlights:[], arrTextElements:[], arrMediaAttachments:[], arrImageAttachments:[], arrUploadedVideoAttachments:[], arrComments:[], arrAssessmentData:[], screenShadeElementData:[], elementGroupData:[], timerElementData:[]});
        }
        for (let Aa in a) {
          if (l = e[Aa]) {
            Fa = Aa;
            n = l;
            k = a[Aa];
            c = null;
            if (n && k) {
              l = [];
              p = k.arrElement;
              if (X = n.arrAnnotations) {
                for (let aa of X) {
                  D = tr(aa.nId, p), c = null, -1 != D && (c = p[D]), l.push(ur(aa, c));
                }
              }
              p = [];
              X = k.arrTextHighlights;
              if (t = n.arrTextHighlights) {
                for (let aa of t) {
                  D = tr(aa.nId, X), c = null, -1 != D && (c = X[D]), p.push(ur(aa, c));
                }
              }
              X = [];
              t = k.arrTextElements;
              if (x = n.arrTextElements) {
                for (let aa of x) {
                  D = tr(aa.nId, t), c = null, -1 != D && (c = t[D]), X.push(ur(aa, c));
                }
              }
              t = [];
              x = k.arrMediaAttachments;
              if (Q = n.arrMediaAttachments) {
                for (let aa of Q) {
                  D = tr(aa.nId, x), c = null, -1 != D && (c = x[D]), t.push(ur(aa, c));
                }
              }
              x = [];
              Q = k.arrImageAttachments;
              if (c = n.arrImageAttachments) {
                for (let aa of c) {
                  D = tr(aa.nId, Q), c = null, -1 != D && (c = Q[D]), x.push(ur(aa, c));
                }
              }
              Q = [];
              f = k.arrUploadedVideoAttachments;
              if (c = n.arrUploadedVideoAttachments) {
                for (let aa of c) {
                  D = tr(aa.nId, f), c = null, -1 != D && (c = f[D]), Q.push(ur(aa, c));
                }
              }
              f = [];
              G = k.arrComments;
              if (c = n.arrComments) {
                for (let aa of c) {
                  D = tr(aa.nId, G), c = null, -1 != D && (c = G[D]), f.push(ur(aa, c));
                }
              }
              G = [];
              I = k.arrAssessmentData;
              if (c = n.arrAssessmentData) {
                for (let aa of c) {
                  D = tr(aa.nId, I), c = null, -1 != D && (c = I[D]), G.push(ur(aa, c));
                }
              }
              I = [];
              var La = k.screenShadeElementData;
              if (c = n.screenShadeElementData) {
                for (let aa of c) {
                  D = tr(aa.nId, La), c = null, -1 != D && (c = La[D]), I.push(ur(aa, c));
                }
              }
              La = [];
              let Ha = k.elementGroupData;
              if (c = n.elementGroupData) {
                for (let aa of c) {
                  D = tr(aa.nId, Ha), c = null, -1 != D && (c = Ha[D]), La.push(ur(aa, c));
                }
              }
              D = [];
              k = k.timerElementData;
              if (n = n.timerElementData) {
                c = null, k && k.length && (c = k[0]), D.push(ur(n, c));
              }
              c = {};
              c.arrElement = l;
              c.arrTextHighlights = p;
              c.arrTextElements = X;
              c.arrMediaAttachments = t;
              c.arrImageAttachments = x;
              c.arrUploadedVideoAttachments = Q;
              c.arrComments = f;
              c.arrAssessmentData = G;
              c.screenShadeElementData = I;
              c.elementGroupData = La;
              c.timerElementData = D;
            }
            d[Fa] = c;
          }
        }
      }
    }
    return b;
  }
  je() {
    return this.qd;
  }
  $p(a) {
    if (a) {
      a.docVersionNo = this.bg;
      a.docUUID = this.qe;
      a.nMaxElementId = Yp(this);
      let b = {};
      Wl() && (b.extensionVersion = chrome.runtime.getManifest().version);
      b.pageData = P.v;
      if (si()) {
        let c = P.D;
        b.pdfAnnotationPages = aq(c);
        b.maxPDFPageId = c.Ss;
      }
      a.pageInfo = b;
    }
  }
  xb() {
    super.xb();
    this.Rj(!0);
  }
  s(a) {
    a.preventDefault();
    Ok(P) && L.mb().Ja() ? Hs(L.mb(), !1, !0) : a.returnValue = "";
  }
  Vl() {
    return this.uh;
  }
  Rj(a) {
    a = a && S && !M.g && this == Oo(S) && (Is(W) || !L.mb().Ja() && Ok(P));
    this.uh != a && (this.uh = a, vs(this));
  }
  zy(a, b) {
    const c = {};
    c.timerElement = [a];
    this.dispatchEvent(new CustomEvent(b ? Cp.j : Cp.g, {detail:c}));
  }
  U() {
    this.j && (this.j.gb(), this.j = null);
    this.ji && (this.ji.gb(), this.ji = null);
    Ds(this);
    M.removeEventListener(M.pa, this.B);
  }
}
;function ql() {
  return S.g;
}
function rl() {
  var a = S;
  return a.l && a.l.SharedNotesFeedbackData ? a.l.SharedNotesFeedbackData : null;
}
function bl(a) {
  a = Js(S, a);
  return A(a) ? null : a.Yi;
}
function cl(a) {
  return S.m == a;
}
function Ks(a) {
  var b = S;
  3 == a && (a = 1);
  a = Js(b, a);
  return A(a) ? !1 : hq(a);
}
function An() {
  let a = Oo(S);
  return a ? a.ma : null;
}
function Cn() {
  let a = Oo(S);
  return a ? a.Uf : "";
}
function Fn(a, b, c) {
  (a = Js(a, c)) && jq(a, b);
}
function Tn() {
  var a = S;
  return a.La ? a.La.ma : null;
}
function Un() {
  var a = S;
  return a.i ? a.i.ma : null;
}
function Xn() {
  Ls(3);
  Ls(2);
}
function so(a) {
  var b = S;
  switch(a) {
    case 2:
      b.g = 2;
      si() && L.kd({type:Ms, curMode:2});
      break;
    case 3:
      b.g = 3;
      si() && L.kd({type:Ms, curMode:3});
      break;
    case 1:
      b.g = 1;
  }
}
function Io(a, b, c) {
  let d = Oo(a);
  c && (d = Js(a, c));
  d && d.F.push(b);
}
function Oo(a) {
  return Js(a, a.g);
}
function yp() {
  return 1 == S.g;
}
function Ep() {
  return 2 == S.g;
}
function Fp() {
  return 3 == S.g;
}
function qp() {
  var a = S;
  a.i && (a.i.F = []);
}
function rp() {
  var a = S;
  a.La && (a.La.F = []);
}
function sp() {
  var a = S;
  a.Ya && (a.Ya.F = []);
}
function Jp(a = !1) {
  let b = Oo(S);
  b && hr(b, a);
}
function fq(a) {
  var b = S;
  return Kh() && 1 == b.g && (a = Js(b, a)) && Yg(a.ma) && !hq(a) && (-1 != b.j || a.Fm()) ? !0 : !1;
}
function Ns() {
  var a = S;
  return a.Sl && a.Sl.length && a.Sl.includes("file://") && ".pdf" == a.Sl.substring(a.Sl.lastIndexOf(".")) ? !0 : !1;
}
function Os() {
  var a = S;
  return si() ? a.B && Vk(P) : a.B;
}
function Ps(a) {
  var b = S;
  b.o = [];
  if (a && a.length) {
    for (let c = 0; c < a.length; c++) {
      let d = new an();
      d.re(a[c]);
      b.o.push(d);
    }
  }
}
function Qs() {
  var a = S, b = An();
  for (let c = 0; c < a.o.length; c++) {
    if (a.o[c].ma == b) {
      return a.o[c];
    }
  }
  return null;
}
function Rs(a) {
  var b = S;
  for (let c = 0; c < b.o.length; c++) {
    if (b.o[c].Hn.toLowerCase() == a.toLowerCase()) {
      return !0;
    }
  }
  return !1;
}
function Ss(a, b) {
  for (let c = 0; c < a.o.length; c++) {
    if (a.o[c].ma == b) {
      return !0;
    }
  }
  return !1;
}
function Ts(a) {
  var b = S;
  for (let c = 0; c < b.o.length; c++) {
    if (b.o[c].ma == a) {
      return b.o[c].Hn;
    }
  }
  return "";
}
function Us(a) {
  var b = S;
  return 3 == b.g || Ql.Ja() ? !0 : Ss(b, a);
}
function Vs(a) {
  var b = S;
  b.i && (b = b.i, !A(b.Bk) && a && a.length && Tp(b.Bk, a));
  console.log("[Assessment] this->dochelper strAssessmentFileGuid ", a);
}
function Ws() {
  var a = S;
  return a.i ? a.i.Bk.i : null;
}
function Xs(a) {
  var b = S;
  a && console.log("[notes] set extradata, launchviewer", a.bLaunchNotesViewer, "guid", a.strStudentGuid);
  b.l = a;
  console.log("[Assessment] this->dochelper setExtraLoadedData ", a);
}
function Ys(a) {
  return a.l && a.l.SharedNotesFeedbackData && a.l.SharedNotesFeedbackData.strSharedNotesDocGUID ? a.l.SharedNotesFeedbackData.strSharedNotesDocGUID : null;
}
function Zs() {
  var a = S;
  return a.l && a.l.SharedNotesFeedbackData && a.l.SharedNotesFeedbackData.strSharedFeedbackDocGUID ? a.l.SharedNotesFeedbackData.strSharedFeedbackDocGUID : null;
}
function $s() {
  var a = S;
  a.l && ["bLaunchAssessment", "uClassTaskId"].forEach(b => {
    b in a.l && delete a.l[b];
  });
}
function at(a) {
  let b = Oo(S);
  b && b.Rj(a);
}
function bt() {
  var a = S;
  a.i && a.i.Rj(!1);
  a.Ya && a.Ya.Rj(!1);
  a.La && a.La.Rj(!1);
}
function ct(a, b, c) {
  1 == b ? (a.i && a.i.U(), a.i = c) : 2 == b ? (a.Ya && a.Ya.U(), a.Ya = c) : 3 == b && (a.La && a.La.U(), a.La = c);
}
function Ls(a) {
  var b = S;
  let c = new Cp(a);
  ct(b, a, c);
  return c;
}
function Js(a, b) {
  switch(b) {
    case 1:
      return a.i;
    case 2:
      return a.Ya;
    case 3:
      return a.La;
  }
  return null;
}
function dt(a, b) {
  let c = Js(S, 1);
  c && kq(c, a, b);
}
function et() {
  let a = Js(S, 1);
  return A(a) ? null : a.o.cy();
}
function ft(a) {
  var b = S;
  !A(a) && Yg(a.strGuid) && (b = Js(b, a.uDocType), null != b && b.ma == a.strGuid && (sq(b, a), console.log(`file lock -> take control response frameId:${P.C}`)));
}
function gt() {
  var a = S;
  if (a.i) {
    let b = {};
    b.strOwnerGUID = a.i.sk();
    b.strGUID = a.i.ma;
    b.strPageUrl = a.Sl;
    b.uLivefeedClassId = a.j;
    b.uLivefeedType = 1;
    b.uLivefeedActivityId = -1;
    a = a.i.sk() + "_" + a.j + "_" + a.i.ma;
    L && L.sa({type:"checkLivefeedTabMappingAndLaunchOnJoin", livefeedId:a, LivefeedInfo:b, bSelfTabPrefferedOverNew:!0}, null);
  }
}
function ht(a) {
  var b = Js(S, 1);
  A(b) ? b = !1 : a && "strGuid" in a && b.ma == a.strGuid ? (a = a.strLockOwnerGuid, console.log(`evt->FileLockOwnerChanged ${b.l} to ${a}`), eq(b, a, !0), b = !0) : b = !1;
  return b;
}
function it(a) {
  let b = {};
  b.uPanelType = jt;
  b.videoId = a;
  return M.gf + "?" + btoa(JSON.stringify(b));
}
function kt() {
  let a = Oo(S);
  return a ? Yp(a) : -1;
}
function lt(a, b) {
  let c = Oo(S);
  c && cq(c, a, b);
}
function mt(a) {
  let b = Oo(S);
  b && (b.ma = a);
}
function nt(a) {
  let b = Oo(S);
  b ? b.xr != a ? (b.xr = a, console.log(b.ma, "set uAnnotationType to", a), a = !0) : a = !1 : a = !1;
  return a;
}
function ot() {
  let a = Oo(S);
  return a ? 3 == a.xr : !1;
}
function pt() {
  let a = Oo(S);
  if (a) {
    if (Yg(a.Hn)) {
      return a.Hn;
    }
    if (Yg(a.ma)) {
      return Ts(a.ma);
    }
  }
  return "";
}
function qt() {
  var a = S;
  return a.Ya ? a.Ya.ma : null;
}
function rt(a) {
  let b = Oo(S);
  b && dq(b, a);
}
function st() {
  let a = Oo(S);
  return a ? a.bg : -1;
}
function tt() {
  var a = S;
  return a.Ya ? a.Ya.bg : -1;
}
function ut() {
  var a = S;
  return a.La ? a.La.bg : -1;
}
function vt() {
  let a = Oo(S);
  return a ? a.qe : null;
}
function wt(a) {
  let b = Oo(S);
  b && (b.Sx = a);
}
function xt(a, b) {
  var c = S;
  let d = Oo(c);
  b && (d = Js(c, b));
  d && (a = d.F.indexOf(a), 0 <= a && d.F.splice(a, 1));
}
function yt(a) {
  let b = Oo(S);
  if (b) {
    let c = {arrElement:[]}, d = b.F.indexOf(a);
    0 <= d && (b.F.splice(d, 1), c.arrElement.push(a.ta));
    b.xb();
    b.dispatchEvent(new CustomEvent(Cp.g, {detail:c}));
  }
}
function zt(a) {
  var b = S;
  let c = [], d = Oo(b);
  a && (d = Js(b, a));
  d && (c = d.F);
  return c;
}
function At(a) {
  let b = Oo(S);
  return b ? b.kG(a) : -1;
}
function Bt(a) {
  let b = Oo(S);
  b && (-1 == a.ta && a.he(br(b)), b.F.push(a), b.xb(), b.Kj([a], "arrElement"));
}
function Ct(a) {
  let b = Oo(S);
  if (b && -1 != b.F.indexOf(a)) {
    a && a.xb();
    b.xb();
    let c = {};
    c.arrElement = [a];
    b.dispatchEvent(new CustomEvent(Cp.i, {detail:c}));
  }
  Fh(P) && (In.i = !0);
}
function Dt() {
  var a = S;
  let b = [];
  a.i && (b = a.i.F);
  return b;
}
function Et() {
  var a = S;
  let b = [];
  a.Ya && (b = a.Ya.F);
  return b;
}
function Ft() {
  var a = S;
  let b = [];
  a.La && (b = a.La.F);
  return b;
}
function gu() {
  let a = Oo(S);
  if (a) {
    let b = {arrTextHighlight:[]}, c = null;
    for (c of a.ye) {
      b.arrTextHighlight.push(c.ta);
    }
    tq(a);
    a.xb();
    a.dispatchEvent(new CustomEvent(Cp.g, {detail:b}));
  }
}
function hu(a) {
  let b = Oo(S);
  if (b) {
    let c = {arrTextHighlight:[]}, d = b.ye.indexOf(a);
    0 <= d && (b.ye.splice(d, 1), c.arrTextHighlight.push(a.ta), Ro.Nr(a.Qe, a, b.qd));
    b.xb();
    b.dispatchEvent(new CustomEvent(Cp.g, {detail:c}));
  }
}
function iu(a) {
  var b = S;
  switch(a) {
    case 1:
      b.i && tq(b.i);
      break;
    case 2:
      b.Ya && tq(b.Ya);
      break;
    case 3:
      b.La && tq(b.La);
  }
}
function ju() {
  let a = [], b = Oo(S);
  b && (a = b.ye);
  return a;
}
function ku(a) {
  let b = Oo(S);
  return b ? Lq(b, a) : null;
}
function lu() {
  var a = S;
  let b = [];
  a.i && (b = a.i.ye);
  return b;
}
function mu() {
  var a = S;
  let b = [];
  a.Ya && (b = a.Ya.ye);
  return b;
}
function nu() {
  var a = S;
  let b = [];
  a.La && (b = a.La.ye);
  return b;
}
function ou(a) {
  let b = Oo(S);
  b && (-1 == a.ta && a.he(br(b)), b.ye.push(a), b.xb(), b.Kj([a], "arrTextHighlight"));
}
function pu(a, b) {
  var c = S;
  switch(b) {
    case 1:
      c.i && c.i.ye.push(a);
      break;
    case 2:
      c.Ya && c.Ya.ye.push(a);
      break;
    case 3:
      c.La && c.La.ye.push(a);
  }
}
function qu(a) {
  let b = Oo(S);
  if (b && -1 != b.ye.indexOf(a)) {
    a && a.xb();
    b.xb();
    let c = {};
    c.arrTextHighlight = [a];
    b.dispatchEvent(new CustomEvent(Cp.l, {detail:c}));
  }
}
function ru(a) {
  let b = Oo(S);
  if (b) {
    let c = {arrTextElement:[]}, d = b.Fd.indexOf(a);
    0 <= d && (b.Fd.splice(d, 1), c.arrTextElement.push(a.ta), yr(a));
    b.xb();
    b.dispatchEvent(new CustomEvent(Cp.g, {detail:c}));
  }
}
function su(a, b) {
  var c = S;
  let d = Oo(c);
  b && (d = Js(c, b));
  d && (b = d.Fd.indexOf(a), 0 <= b && (d.Fd.splice(b, 1), yr(a)));
}
function tu(a) {
  var b = S;
  let c = [], d = Oo(b);
  a && (d = Js(b, a));
  d && (c = d.Fd);
  return c;
}
function uu(a, b) {
  var c = S;
  let d = Oo(c);
  b && (d = Js(c, b));
  return d ? Nq(d, a) : null;
}
function vu() {
  var a = S;
  let b = [];
  a.i && (b = a.i.Fd);
  return b;
}
function wu() {
  var a = S;
  let b = [];
  a.Ya && (b = a.Ya.Fd);
  return b;
}
function xu() {
  var a = S;
  let b = [];
  a.La && (b = a.La.Fd);
  return b;
}
function yu(a, b) {
  var c = S;
  let d = Oo(c);
  b && (d = Js(c, b));
  d && d.Fd.push(a);
}
function zu(a) {
  let b = Oo(S);
  b && (-1 == a.ta && a.he(br(b)), b.Fd.push(a), b.xb(), b.Kj([a], "arrTextElement"));
}
function Au(a) {
  let b = Oo(S);
  if (b && -1 != b.Fd.indexOf(a)) {
    a && a.xb();
    b.xb();
    let c = {};
    c.arrTextElement = [a];
    b.dispatchEvent(new CustomEvent(Cp.i, {detail:c}));
  }
}
function Bu(a, b) {
  var c = S;
  switch(b) {
    case 1:
      c.i && c.i.Fd.push(a);
      break;
    case 2:
      c.Ya && c.Ya.Fd.push(a);
      break;
    case 3:
      c.La && c.La.Fd.push(a);
  }
}
function Cu() {
  let a = Oo(S);
  a && (a.Ld = []);
}
function Du(a) {
  let b = Oo(S);
  if (b) {
    let c = {arrImageAttachments:[]}, d = b.Ld.indexOf(a);
    0 <= d && (b.Ld.splice(d, 1), c.arrImageAttachments.push(a.ta));
    b.xb();
    b.dispatchEvent(new CustomEvent(Cp.g, {detail:c}));
  }
}
function Eu(a) {
  var b = S;
  let c = [], d = Oo(b);
  a && (d = Js(b, a));
  d && (c = d.Ld);
  return c;
}
function Fu() {
  var a = S;
  let b = [];
  a.i && (b = a.i.Ld);
  return b;
}
function Gu() {
  var a = S;
  let b = [];
  a.Ya && (b = a.Ya.Ld);
  return b;
}
function Hu() {
  var a = S;
  let b = [];
  a.La && (b = a.La.Ld);
  return b;
}
function Wr(a) {
  let b = Oo(S);
  b && b.Ld.push(a);
}
function Iu(a, b) {
  let c = Oo(S);
  c && (-1 == a.ta && a.he(br(c)), c.Ld.push(a), c.xb(), b && c.Kj([a], "arrImageAttachments"));
}
function Ju(a) {
  let b = Oo(S);
  if (b && -1 != b.Ld.indexOf(a)) {
    a && a.xb();
    b.xb();
    let c = {};
    c.arrImageAttachments = [a];
    b.dispatchEvent(new CustomEvent(Cp.i, {detail:c}));
  }
}
function Vr(a, b) {
  var c = S;
  switch(b) {
    case 1:
      c.i && c.i.Ld.push(a);
      break;
    case 2:
      c.Ya && c.Ya.Ld.push(a);
      break;
    case 3:
      c.La && c.La.Ld.push(a);
  }
}
function Ku() {
  let a = Oo(S);
  a && Dp(a);
}
function Lu(a) {
  let b = Oo(S);
  if (b) {
    let c = {arrUploadedVideoAttachments:[]}, d = b.Gd.indexOf(a);
    0 <= d && (b.Gd.splice(d, 1), c.arrUploadedVideoAttachments.push(a.ta));
    b.xb();
    b.dispatchEvent(new CustomEvent(Cp.g, {detail:c}));
  }
}
function Mu(a) {
  var b = S;
  let c = [], d = Oo(b);
  a && (d = Js(b, a));
  d && (c = d.Gd);
  return c;
}
function Nu() {
  var a = S;
  let b = [];
  a.i && (b = a.i.Gd);
  return b;
}
function Ou() {
  var a = S;
  let b = [];
  a.Ya && (b = a.Ya.Gd);
  return b;
}
function Pu() {
  var a = S;
  let b = [];
  a.La && (b = a.La.Gd);
  return b;
}
function Qu(a, b) {
  let c = Oo(S);
  c && (-1 == a.ta && a.he(br(c)), c.Gd.push(a), c.xb(), b && c.Kj([a], "arrUploadedVideoAttachments"));
}
function $r(a, b) {
  var c = S;
  switch(b) {
    case 1:
      c.i && c.i.Gd.push(a);
      break;
    case 2:
      c.Ya && c.Ya.Gd.push(a);
      break;
    case 3:
      c.La && c.La.Gd.push(a);
  }
}
function Ru() {
  let a = Oo(S);
  a && Bp(a);
}
function Su(a) {
  let b = Oo(S);
  if (b) {
    let c = {arrMediaAttachments:[]}, d = b.Ed.indexOf(a);
    0 <= d && (b.Ed.splice(d, 1), c.arrMediaAttachments.push(a.ta));
    b.xb();
    b.dispatchEvent(new CustomEvent(Cp.g, {detail:c}));
  }
}
function Tu(a) {
  var b = S;
  let c = [], d = Oo(b);
  a && (d = Js(b, a));
  d && (c = d.Ed);
  return c;
}
function Uu() {
  var a = S;
  let b = [];
  a.i && (b = a.i.Ed);
  return b;
}
function Vu() {
  var a = S;
  let b = [];
  a.Ya && (b = a.Ya.Ed);
  return b;
}
function Wu() {
  var a = S;
  let b = [];
  a.La && (b = a.La.Ed);
  return b;
}
function Rr(a) {
  let b = Oo(S);
  b && b.Ed.push(a);
}
function Xu(a, b) {
  let c = Oo(S);
  c && (-1 == a.ta && a.he(br(c)), c.Ed.push(a), c.xb(), b && c.Kj([a], "arrMediaAttachments"));
}
function Qr(a, b) {
  var c = S;
  switch(b) {
    case 1:
      c.i && c.i.Ed.push(a);
      break;
    case 2:
      c.Ya && c.Ya.Ed.push(a);
      break;
    case 3:
      c.La && c.La.Ed.push(a);
  }
}
function Yu(a, b) {
  var c = S;
  let d = null;
  b ? d = Js(c, b) : d = Oo(c);
  return d ? Wq(d, a) : null;
}
function Zu(a) {
  let b = [];
  a.i && (b = a.i.Wd);
  return b;
}
function $u(a) {
  let b = [];
  a.Ya && (b = a.Ya.Wd);
  return b;
}
function av(a) {
  let b = [];
  a.La && (b = a.La.Wd);
  return b;
}
function bv(a) {
  var b = S;
  switch(a) {
    case 1:
      return Zu(b);
    case 2:
      return $u(b);
    case 3:
      return av(b);
    default:
      return [];
  }
}
function cv(a, b) {
  var c = S;
  let d = Oo(c);
  b && (d = Js(c, b));
  d && d.Wd.push(a);
}
function os(a, b) {
  var c = S, d = null;
  b ? d = Js(c, b) : d = Oo(c);
  if (d) {
    -1 == a.ta && a.he(br(d));
    b = a.ta;
    c = a.hg;
    for (let e = 0; e < c.length; e++) {
      let f = c[e];
      -1 == f.ta && f.he(br(d));
      f.Vk = b;
    }
    d.Wd.push(a);
    d.xb();
    d.Kj([a], "arrCommentElement");
  }
}
function dv(a, b) {
  var c = S;
  let d;
  b ? d = Js(c, b) : d = Oo(c);
  d && -1 == a.ta && a.he(br(d));
}
function ev(a, b) {
  var c = S, d;
  b ? d = Js(c, b) : d = Oo(c);
  d && (b = d, c = {arrCommentElement:[]}, d = b.Wd.indexOf(a), 0 <= d && (Xq(b, d), c.arrCommentElement.push(a.ta)), b.xb(), b.dispatchEvent(new CustomEvent(Cp.g, {detail:c})));
}
function fv(a) {
  var b = S;
  let c = [], d = Oo(b);
  a && (d = Js(b, a));
  d && (c = d.Wd);
  return c;
}
function gv() {
  var a = S;
  let b = [];
  a.i && (b = b.concat(a.i.Wd));
  a.Ya && (b = b.concat(a.Ya.Wd));
  a.La && (b = b.concat(a.La.Wd));
  return b;
}
function es(a) {
  let b = S.i;
  b && (-1 == a.ta && a.he(br(b)), b.i.push(a), b.xb(), b.Kj([a], "arrAssessmentAttachments"));
}
function ls(a) {
  let b = S.i;
  if (b) {
    let c = !1;
    -1 == a.ta && (a.he(br(b)), c = !0);
    b.g.push(a);
    b.xb();
    c && b.Kj([a], "arrScreenshadeAttachments");
  }
}
function hv() {
  let a = S.i;
  return a ? a.g : [];
}
function iv() {
  let a = {}, b = Oo(S);
  b && (a = b.Pa);
  return a;
}
function jv() {
  var a = S;
  let b = {};
  a.i && (b = a.i.Pa);
  return b;
}
function kv(a) {
  let b = Oo(S);
  return b ? b.Pa[a] : null;
}
function lv(a) {
  let b = Oo(S);
  if (b) {
    for (let c in b.Pa) {
      A(b.Pa[c]) || (b.Pa[c].arrAssessmentData = a, console.log("[Assessment] this->dochelper updateassessment ", c, a));
    }
  }
}
function mv(a, b) {
  var c = S;
  a && 0 != a.length && (c = Oo(c)) && (c.Pa[a] = b);
}
function nv() {
  var a = S;
  return a.i ? a.i.wi() : null;
}
function ov() {
  var a = S;
  return a.Ya ? a.Ya.wi() : null;
}
function pv() {
  var a = S;
  return a.La ? a.La.wi() : null;
}
function qv() {
  var a = S;
  return (a = Js(a, a.g)) ? a.bg : 1;
}
function rv(a) {
  var b = S;
  return b.i ? b.i.bh(a) : null;
}
function sv(a) {
  var b = S;
  return b.Ya ? b.Ya.bh(a) : null;
}
function tv(a) {
  var b = S;
  return b.La ? b.La.bh(a) : null;
}
function uv(a) {
  var b = S;
  b.Ya && vr(b.Ya, a);
}
function vv(a) {
  let b = Oo(S);
  b && (b.kw = a, b.kw ? qq(b, !0) : b.uh || qq(b, !1));
}
function wv() {
  var a = S;
  a = Js(a, a.g);
  return 0 != a.F.length || 0 != a.Fd.length || 0 != a.ye.length || 0 != a.Ld.length || 0 != a.Gd.length || 0 != a.Ed.length || 0 != a.Wd.length || 0 != a.i.length || 0 != a.g.length ? !0 : !1;
}
function xv(a) {
  var b = S, c = null;
  c || (c = b.g);
  if (b = Js(b, c)) {
    b.Oe.push(a), console.log(">> group added"), console.log(b.Oe), b.Kj([a], Sg.bq);
  }
}
function yv(a, b) {
  let c = Oo(S);
  if (c) {
    a && (a.xb(), c.xb());
    let d = {};
    d.timerElement = {element:[a], uAction:b};
    c.dispatchEvent(new CustomEvent(Cp.l, {detail:d}));
  }
}
function zv(a, b) {
  (a = Js(S, a)) && qq(a, b);
}
class Av extends ph {
  constructor() {
    super();
    this.g = 1;
    this.La = this.Ya = this.i = null;
    this.j = -1;
    this.l = this.s = this.zd = null;
    this.m = 1;
    this.u = this.Jh = !1;
    this.o = [];
    this.B = !1;
    this.Sl = "";
    this.C = !1;
  }
  Fm(a) {
    return (a = Js(this, a)) ? a.Fm() : !1;
  }
  v() {
    let a = Oo(this);
    a && tq(a);
  }
  Ur() {
    let a = Oo(this);
    a && a.Ur();
  }
  Tr() {
    let a = Oo(this);
    a && a.Tr();
  }
  tv(a) {
    let b = Oo(this);
    b && b.Gd.push(a);
  }
  ck(a, b) {
    let c;
    b ? c = Js(this, b) : c = Oo(this);
    c && c.ck(a);
  }
  yg(a, b) {
    (b = Js(this, b)) && b.yg(a);
  }
  ol() {
    let a = Oo(this);
    a && (a.cv = a.Pa);
  }
  Vl() {
    return Oo(this) ? Oo(this).Vl() : !1;
  }
  zy(a, b) {
    let c = Oo(this);
    c && c.zy(a, b);
  }
  Kj(a, b) {
    let c = Oo(this);
    c && c.Kj(a, b);
  }
}
var S = new Av();
var Ql = null, Bv = -1, Cv = !1, Dv, Ev, Fv = !0, Gv = {};
class Hv {
  constructor(a, b, c, d, e, f, k, l, n) {
    this.ue = a;
    this.j = b;
    this.s = c;
    this.m = d;
    this.l = e;
    this.o = f;
    this.bG = k;
    this.i = l;
    this.g = n;
  }
}
function Qn(a, b, c, d, e, f) {
  if (In.l) {
    a.jw = !1;
  } else {
    if (f || a.Pg.i() && a.Pg.i().Ja()) {
      var k = Rk(P);
      P.i && (k = S.s);
      if (0 < k.length) {
        let Fa = No();
        mv(k, Fa);
        S.ol();
      }
    }
    var l = 2;
    b && 1 == S.g && (k = bl(1), Yg(k) && Yg(k.strPublishedAnnotationGuid) && (l = 5));
    if ((k = Iv(a, b, l, !0)) && k.data) {
      console.log(">> AutoSave");
      var n = k.data, p = si(), t = Ul(), x = P.J, D = P.G;
      k = L.Zf().ci();
      var G = Jv.i, I = Kv.getImageData(), Q = Lv(Kv), X = k.Pn();
      a.g = !0;
      a.B = !1;
      e && Mv(b, l, c, a, n, p, t, x, D, G, I, Q, X, d, f);
      setTimeout(function() {
        Mv(b, l, c, a, n, p, t, x, D, G, I, Q, X, d, f);
      }, 200);
    } else {
      a.jw = !1;
    }
  }
}
function Rn(a) {
  Gn(In, !0);
  a.lw = !1;
  let b = {type:"annotateLoadGoogleAssignmentAnnotations", uUserType:M.j, strPageUrl:Ul()};
  Ch() ? (b.strStudentAnnotationGuid = a.lv, b.strInstructorWebAnnotationGuid = a.kv) : (b.uStudentAnnotationId = a.pv, b.uInstructorWebAnnotationId = a.ov);
  Rl() && (b.bWebPageClassroomAssignment = !0);
  L.sa(b, null);
}
function Hs(a, b, c) {
  let d = !Yg(An());
  a.m = !1;
  Qn(a, d, b, !1, c);
}
function Nv(a, b) {
  Ch() ? (b.lv && (a.lv = b.lv.toString()), b.kv && (a.kv = b.kv.toString())) : (b.pv && (a.pv = parseInt(b.pv)), b.ov && (a.ov = parseInt(b.ov)));
}
function Ov(a, b) {
  if (!S.Vl() || a.g || Pv.g) {
    a.g && (a.m = !0), b && (a.C = !0);
  } else {
    var c = !Yg(An());
    b ? (a.C = !1, Yg(a.i) && (c = !1)) : a.m = !1;
    a.jw = !0;
    Qn(a, c, !1, b, !1);
  }
}
function Qv(a, b) {
  (a.N = b) ? (console.log(">> Start Autosave"), clearInterval(a.o), a.o = setInterval(() => {
    Ov(a, !1);
  }, 3E4)) : (console.log(">> Stop Autosave"), a.o && (clearInterval(a.o), a.o = null));
}
function Iv(a, b, c, d) {
  var e = si(), f = L.Pb();
  if (!b && !d) {
    for (var k = S.o, l = 0; l < k.length; l++) {
      if (An() == k[l].ma) {
        if (st() != k[l].bi) {
          return Rv(a), null;
        }
        break;
      }
    }
  }
  A(Lo) || Sv(Lo);
  if (e || P.o) {
    null == Jv.i && null == f.Qf && Tv(f), null == Kv.getImageData() && null == f.Pf && Uv(f), null == Lv(Kv) && null == f.Ef && Vv(f);
  }
  c = Po(Oo(S), !0, c);
  l = !1;
  let n = JSON.parse(JSON.stringify(c));
  k = An();
  if (!(b || d || null == Jv.i && null == f.Qf) && null != Gv[k]) {
    let t = JSON.parse(JSON.stringify(Gv[k]));
    t.arrMediaAttachments = n.arrMediaAttachments;
    t.arrImageAttachments || (t.arrImageAttachments = []);
    t.arrUploadedVideoAttachments || (t.arrUploadedVideoAttachments = []);
    if (0 < Object.keys(t.pageAnnotations).length || 0 < Object.keys(n.pageAnnotations).length) {
      Object.keys(t.pageAnnotations).forEach(x => {
        n.pageAnnotations && n.pageAnnotations[x] && n.pageAnnotations[x].arrMediaAttachments && (t.pageAnnotations[x].arrMediaAttachments = n.pageAnnotations[x].arrMediaAttachments);
      }), Object.keys(n.pageAnnotations).forEach(x => {
        if (-1 == Object.keys(t.pageAnnotations).indexOf(x)) {
          let D = JSON.parse(JSON.stringify(n.pageAnnotations[x]));
          D.arrAnnotations = [];
          D.arrTextElements = [];
          D.arrTextHighlights = [];
          D.arrImageAttachments = [];
          D.arrUploadedVideoAttachments = [];
          t.pageAnnotations[x] = D;
        }
      });
    }
    t.pageData = n.pageData;
    e && (t.pdfAnnotationPages = n.pdfAnnotationPages, t.maxPDFPageId = n.maxPDFPageId);
    P.o && (t.whiteboardData = n.whiteboardData);
    c = t;
    l = !0;
  }
  if (!(b || d || null == Kv.getImageData() && null == f.Pf) && null != Gv[k]) {
    let t = JSON.parse(JSON.stringify(Gv[k]));
    t.arrImageAttachments = n.arrImageAttachments;
    t.arrMediaAttachments || (t.arrMediaAttachments = []);
    t.arrUploadedVideoAttachments || (t.arrUploadedVideoAttachments = []);
    if (0 < Object.keys(t.pageAnnotations).length || 0 < Object.keys(n.pageAnnotations).length) {
      Object.keys(t.pageAnnotations).forEach(x => {
        n.pageAnnotations && n.pageAnnotations[x] && n.pageAnnotations[x].arrImageAttachments && (t.pageAnnotations[x].arrImageAttachments = n.pageAnnotations[x].arrImageAttachments);
      }), Object.keys(n.pageAnnotations).forEach(x => {
        if (-1 == Object.keys(t.pageAnnotations).indexOf(x)) {
          let D = JSON.parse(JSON.stringify(n.pageAnnotations[x]));
          D.arrAnnotations = [];
          D.arrTextElements = [];
          D.arrTextHighlights = [];
          D.arrMediaAttachments = [];
          D.arrUploadedVideoAttachments = [];
          t.pageAnnotations[x] = D;
        }
      });
    }
    t.pageData = n.pageData;
    e && (t.pdfAnnotationPages = n.pdfAnnotationPages, t.maxPDFPageId = n.maxPDFPageId);
    P.o && (t.whiteboardData = n.whiteboardData);
    c = t;
    l = !0;
  }
  if (!(b || d || null == Lv(Kv) && null == f.Ef) && null != Gv[k]) {
    let t = JSON.parse(JSON.stringify(Gv[k]));
    t.arrUploadedVideoAttachments = n.arrUploadedVideoAttachments;
    t.arrMediaAttachments || (t.arrMediaAttachments = []);
    t.arrImageAttachments || (t.arrImageAttachments = []);
    if (0 < Object.keys(t.pageAnnotations).length || 0 < Object.keys(n.pageAnnotations).length) {
      Object.keys(t.pageAnnotations).forEach(x => {
        n.pageAnnotations && n.pageAnnotations[x] && n.pageAnnotations[x].arrImageAttachments && (t.pageAnnotations[x].arrUploadedVideoAttachments = n.pageAnnotations[x].arrUploadedVideoAttachments);
      }), Object.keys(n.pageAnnotations).forEach(x => {
        if (-1 == Object.keys(t.pageAnnotations).indexOf(x)) {
          let D = JSON.parse(JSON.stringify(n.pageAnnotations[x]));
          D.arrAnnotations = [];
          D.arrTextElements = [];
          D.arrTextHighlights = [];
          D.arrMediaAttachments = [];
          D.arrImageAttachments = [];
          t.pageAnnotations[x] = D;
        }
      });
    }
    t.pageData = n.pageData;
    e && (t.pdfAnnotationPages = n.pdfAnnotationPages, t.maxPDFPageId = n.maxPDFPageId);
    P.o && (t.whiteboardData = n.whiteboardData);
    c = t;
    l = !0;
  }
  if (!b && !d && P.u && null != Gv[k]) {
    if ((b = JSON.parse(JSON.stringify(Gv[k]))) && 0 < Object.keys(b.pageAnnotations).length && 0 < Object.keys(n.pageAnnotations).length) {
      for (c = Object.keys(b.pageAnnotations), l = Object.keys(n.pageAnnotations), d = 0; d < c.length; d++) {
        -1 == l.indexOf(c[d]) && console.log("ServerDoc: Deleted data for", c[d], delete b.pageAnnotations[c[d]]);
      }
    }
    c = b;
    l = !0;
    if (Jk(P) && b.pageAnnotations && 0 < Object.keys(b.pageAnnotations).length) {
      d = [];
      e = [];
      f = [];
      for (var p in b.pageAnnotations) {
        k = b.pageAnnotations[p], k.arrMediaAttachments && 0 < k.arrMediaAttachments.length && (d = d.concat(k.arrMediaAttachments)), k.arrUploadedVideoAttachments && 0 < k.arrUploadedVideoAttachments.length && (f = f.concat(k.arrUploadedVideoAttachments)), k.arrImageAttachments && 0 < k.arrImageAttachments.length && (e = e.concat(k.arrImageAttachments));
      }
      c.arrMediaAttachments = d;
      c.arrUploadedVideoAttachments = f;
      c.arrImageAttachments = e;
    }
  }
  a.Ja() && (l = !0);
  return {data:c, AJ:l};
}
function Mv(a, b, c, d, e, f, k, l, n, p, t, x, D, G, I) {
  b = {type:"annotateSaveAnnotations", bSaveAsNew:a, annotationData:e, bAnnotatePDFViewer:f, arrMediaAdded:p ? p : D, oImageAdded:t, oVideoAdded:x, url:f ? n : void 0, bTempAnnot:G, uSaveAnnotationType:b, bCloseTabAfterSave:I};
  a ? (b.name = "Autosave_" + l + "_" + (new Date()).getTime(), b.description = "Autosave_" + l + "_" + (new Date()).getTime(), b.url = f ? n : k, b.title = l, b.uAnnotationType = 2, b.bSavedInIFrame = window != window.top ? 1 : 0, b.uGoogleAssignmentSubmissionId = d.M, b.strGoogleCourseSubmissionId = d.G, G = bl(1), 1 == S.g && G && (b.strBaseAnnotationGuid = G.strPublishedAnnotationGuid), b.strTempAnnotGUID = d.i) : (3 == S.g && (a = S.zd, Yg(a) && (b.strOwnerGuid = a)), b.strGUID = An(), G ? b.strTempAnnotGUID = 
  d.i : 3 == S.g && (G = S.zd, Yg(G) && (b.strOwnerGuid = G)));
  b.thumbnail = "";
  L.sa(b, () => {
  });
  window == window.top && Kh() && L.Ye() && L.Ye().ae() && gn(L.Ye().ae(), !1);
  at(!1);
  setTimeout(function() {
    d.g && c && (d.B = !0, Jn("Saving annotations..."));
  }, 100);
  Bv = setTimeout(function() {
    d.g = !1;
    Cv = P.u = !1;
    d.pp ? (d.pp = !1, L.kd({type:Wv})) : Xv(d);
  }, 3E4);
}
function Xv(a) {
  a.C && (a.C = !1, Ov(a, !0));
  a.m && (a.m = !1, Ov(a, !1));
}
function Yv() {
  var a = Zv(), b = $v();
  return {arrUnSavedImageModels:a, arrUnSavedVideoModels:b, arrUnSavedRecordedMedia:Jv.B};
}
function aw(a) {
  a && (a.arrUnSavedImageModels && bw(a.arrUnSavedImageModels), a.arrUnSavedVideoModels && cw(a.arrUnSavedVideoModels), a.arrUnSavedRecordedMedia && (Jv.B = a.arrUnSavedRecordedMedia));
}
function dw(a, b, c, d) {
  var e = "", f = "", k = "", l = "";
  let n = !1, p = L.Pb();
  if (b) {
    if (a.v) {
      Nn();
      return;
    }
    M.m && null != Jv.i && ew() / 1000 > Pr.Bv && (n = !0);
    let D;
    Rl() ? D = a.Pg.g() : Pl() && fw() && (D = fw());
    e = D && "" != D.Jo ? "Saving feedback... SAVED" : c || null == Jv.i ? c || null == Lv(Kv) ? !c && null != p.Qf || null != p.Ef ? "Deleting media... DELETED" : c || null == Kv.getImageData() ? c || null == p.Pf ? c || A(Lo) || !Lo.j ? P.u ? "Freeing up space... DONE" : Cv ? "Preparing stream... DONE" : "Saving annotations... SAVED" : "Saving assessment... SAVED" : "Deleting image... DELETED" : "Saving image... SAVED" : "Saving media... SAVED" : "Saving recording... SAVED";
    l = "CANCEL";
  } else {
    let D;
    Rl() ? D = a.Pg.g() : Pl() && fw() && (D = fw());
    if (D && "" != D.Jo) {
      Nn();
      gw(null != Jv.i ? "Error saving recording." : "Error saving annotations.", !0);
      D.Jo = "";
      return;
    }
    e = c || null == Jv.i ? c || null == Lv(Kv) ? !c && null != p.Qf || null != p.Ef ? "Error deleting media. Please try again." : c || null == Kv.getImageData() ? c || null == p.Pf ? c || A(Lo) || !Lo.j ? P.u ? "Error freeing up space." : Cv ? "Error initializing stream." : "Error saving annotations. Please try again." : "Error saving assessment. Please try again." : "Error deleting image. Please try again." : "Error saving image. Please try again." : "Error saving media. Please try again." : "Error saving recording. Please try again.";
    k = "OK";
    if (null != Jv.i || null != Kv.getImageData() || null != Lv(Kv)) {
      f = "CANCEL", k = "RETRY";
    }
  }
  Kn("", e, f, k, function() {
    null != Jv.i && (hw(), iw(Jv));
    null != Kv.getImageData() && (jw(0, Kv.getImageData()), Kv.l = null);
    null != Lv(Kv) && (kw(0, Lv(Kv)), Kv.m = null);
    Cv = !1;
    A(Lo) || (Lo.j = !1);
  }, function() {
    if (null != Jv.i || null != Kv.getImageData() || null != Lv(Kv)) {
      let D = An();
      lw.g();
      Yg(D) && !ot() ? mw(a, !1, !1) : (a.Pg.s(), nw.innerHTML = 'Save required!<br><span style="font-size: 12px;">We need to save this recording to your account.</span>');
    }
  }, null, l);
  let t = Cv, x = null != p.Qf || null != p.Pf || null != p.Ef;
  b && !a.ba && setTimeout(function() {
    Nn();
    Rl() && "" != a.Pg.g().Jo ? ow(a.Pg.g()) : Pl() && fw() && "" != fw().Jo ? ow(fw()) : 1 === W.Gb && pw && fw() ? fw().Xx(null) : a.Ja() || (n ? a.J(Fv && !x) : t ? a.Pg.m() : Fv && !x && S.Fm(d) && 1 == d && qw());
  }, 1000);
}
function mw(a, b, c) {
  if (!a.g) {
    var d = L.Pb(), e = An(), f = S.g, k = b ? 4 : 1, l = A(e) ? null : e;
    !b || Yg(l) || d.qu || (e = bl(1), !A(d.$k) && d.MD ? l = d.$k : 1 == f && null != e && (l = e.strPublishedAnnotationGuid), Yg(l) && (k = 5));
    if ((c = Iv(a, b, k, c)) && c.data) {
      var n = c.data, p = c.AJ, t = si(), x = Ul(), D = P.J, G = P.G;
      c = L.Zf().ci();
      var I = Jv.i, Q = Kv.getImageData(), X = Lv(Kv), Fa = c.Pn(), La = c.mp, Aa = Yv(), Ha = null;
      A(Lo) || (Ha = null);
      p || a.Pg.j(!1);
      a.Pg.l();
      a.g = !0;
      a.B = !0;
      setTimeout(function() {
        let aa = {type:"annotateSaveAnnotations", bSaveAsNew:b, annotationData:n, bAnnotatePDFViewer:t, arrMediaAdded:I ? I : Fa, oImageAdded:Q, arrCommentMediaAdded:Fa, arrImageModels:Aa.arrUnSavedImageModels, arrVideoModels:Aa.arrUnSavedVideoModels, arrRecordedMedia:Aa.arrUnSavedRecordedMedia, arrRecordedCommentMedia:La, oVideoAdded:X, oAssessmentData:Ha, url:t ? G : void 0, bTempAnnot:!1, strTempAnnotGUID:a.i, uSaveAnnotationType:k};
        if (b) {
          Cv ? (aa.name = "Livestream_" + Date.now(), aa.description = "", aa.uAnnotationType = 3) : (aa.name = Dv.value.trim(), aa.description = Ev.value.trim()), aa.url = t ? G : x, aa.title = D, aa.bSavedInIFrame = window != window.top ? 1 : 0, aa.uGoogleAssignmentSubmissionId = -1, aa.strGoogleCourseSubmissionId = "", aa.strBaseAnnotationGuid = l;
        } else {
          var ya = S.zd;
          Yg(ya) && (aa.strOwnerGuid = ya);
          aa.strGUID = An();
          if (1 == S.g && ot() && null == d.Qf && null == d.Pf && null == d.Ef) {
            aa.bMakeTempLivefeedAnnotationNormalAnnotation = !0;
            ya = Dv.value.trim();
            let fc = Ev.value.trim();
            aa.name = ya && ya.length ? ya : "Untitled_Livestream_" + Date.now();
            aa.description = fc;
          }
        }
        p ? (aa.thumbnail = "", L.sa(aa, null)) : a.Pg.o(aa);
        at(!1);
        setTimeout(function() {
          if (a.g) {
            p || a.Pg.j(!0);
            var fc;
            Rl() ? fc = a.Pg.g() : Pl() && fw() && (fc = fw());
            !b && fc && "" != fc.Jo ? Jn("Saving feedback...") : b || null == Jv.i ? b || null == Lv(Kv) ? b || null == Kv.getImageData() ? b || null == d.Pf ? !b && null != d.Qf || null != d.Ef ? Jn("Deleting media...") : b || A(Lo) || !Lo.j ? P.u ? Jn("Freeing up space...") : Cv ? Jn("Preparing stream...") : Jn("Saving annotations...") : Jn("Saving...") : Jn("Deleting image...") : Jn("Saving image...") : Jn("Saving media...") : Jn("Saving recording...");
          }
        }, 100);
        Bv = setTimeout(function() {
          a.g = !1;
          Cv = P.u = !1;
          dw(a, !1, b, f);
        }, 3E4);
      }, 200);
    }
  }
}
function Rv(a) {
  let b = L.Pb(), c = Ul();
  var d = "This annotation has also been updated from another tab. Saving will overwrite those changes.";
  null != Jv.i ? d = '<span style="font-size:16px;">Recording needs to be saved!</span><br><br>This annotation has also been updated from another tab. Saving will overwrite those changes.' : null != b.Qf || null != b.Ef ? d = '<span style="font-size:16px;">Save required for media deletion!</span><br><br>This annotation has also been updated from another tab. Saving will overwrite those changes.' : null != Kv.getImageData() ? d = '<span style="font-size:16px;">Image needs to be saved!</span><br><br>This annotation has also been updated from another tab. Saving will overwrite those changes.' : 
  null != b.Pf ? d = '<span style="font-size:16px;">Save required for Image deletion!</span><br><br>This annotation has also been updated from another tab. Saving will overwrite those changes.' : null != Lv(Kv) && (d = '<span style="font-size:16px;">Media needs to be saved!</span><br><br>This annotation has also been updated from another tab. Saving will overwrite those changes.');
  Kn("", d, "CANCEL", "CONTINUE", function() {
    ii("10.15.6");
    null == b.Qf && null == b.Pf && null == b.Ef || rw(b, !1);
    null != Kv.getImageData() && (jw(0, Kv.getImageData()), Kv.l = null);
    null != Lv(Kv) && (kw(0, Lv(Kv)), Kv.m = null);
    null != Jv.i && (hw(), iw(Jv), a.Pg.bG(c));
    Cv = !1;
  }, function() {
    ii("10.15.5");
    mw(a, !1, !0);
  });
}
function qw() {
  Ph() || Kn("", 'Saved annotations are available under the "Web Annotations" tab in your Annotate Web Account.<br/><br/><span id="AnnotateRedirectButton" style="text-decoration: underline;color: blue;cursor: pointer;">Take me there</span>', "", "GOT IT", function() {
  }, function(a) {
    a && L.sa({type:"annotateAnnotationSavedToAccountMsgShown"}, null);
  }, () => {
    L.sa({type:"annotateSwitchToAnnotateTab"}, null);
  }, null, !1, null, !1, -1, -1, !0);
}
function sw(a, b) {
  b && "" != b && (a.i = b, a.Fq = !0);
}
function tw() {
  var a = Ql;
  return a.i && "" != a.i ? a.i : a.ea;
}
function uw(a) {
  at(!0);
  let b = L.Zf().ci();
  vw(b);
  Kn("", "Error saving annotations. Please try again.", "CANCEL", "RETRY", function() {
    b.Sf = null;
    ww(b);
    L.Pb();
    null != Jv.i && (hw(), iw(Jv));
    null != Kv.getImageData() && (jw(0, Kv.getImageData()), Kv.l = null);
    null != Lv(Kv) && (kw(0, Lv(Kv)), Kv.m = null);
    Cv = !1;
    A(Lo) || (Lo.j = !1);
  }, function() {
    Ov(a, !0);
  }, null, "");
}
function xw(a) {
  return chrome.runtime.sendMessage({type:"getLocalStorage", key:a}).then(b => b);
}
function yw(a) {
  return Yg(a.i) && !Yg(An());
}
function zw(a) {
  var b = Ql, c = a.saveSourceTabId, d = a.selfTabId;
  if (Ql.g && c == d) {
    if (b.g = !1, -1 != Bv && (clearTimeout(Bv), Bv = -1), a.bSuccessful) {
      d = S.g;
      if (b = Oo(S)) {
        b.Uf = a.savedAnnotationPath;
      }
      sw(Ql, a.strGUID);
      zv(d, !0);
      Ql.g = !1;
      c = L.Pb();
      b = L.Zf().ci();
      a.strFilePath && wt(a.strFilePath);
      var e = Cn();
      c.Rl = e;
      Fn(S, null, d);
      cl(2) && (S.j = -1, zn(c, M.Tl, M.$i, M.B, M.C, !!M.m), S.m = 1);
      Bn(c, -1, a.strGUID, e, -1, a.strGUID);
      (a = Kv.getImageData()) && Aw(c, a);
      (a = Lv(Kv)) && Bw(c, a);
      Jv.i && Cw(c);
      Dw(b);
      a = Kv;
      if (a.l && (d = Eu(), 0 < d.length)) {
        c = 0;
        for (d = d[d.length - 1]; c < a.o.length && d.ta != a.o[c].ta;) {
          c++;
        }
        c == a.o.length && (console.log("Add image to unsaved array ", d.ta), a.o.push(d));
        a.l = null;
      }
      if (a.m && (d = Mu(), 0 < d.length)) {
        c = 0;
        for (d = d[d.length - 1]; c < a.s.length && d.ta != a.s[c].ta;) {
          c++;
        }
        c == a.s.length && (console.log("Add video to unsaved array ", d.ta), a.s.push(d));
        a.m = null;
      }
      a = Jv;
      a.i && (a.B.push(a.i), iw(a));
      a = b;
      a.Sf && (c = a.mp, d = c.push, a.Sf ? (e = a.Sf.iw, e[0].parentId = a.g, e[0].id = a.wl) : e = void 0, d.call(c, e), a.Sf = null);
      ww(b);
      at(!1);
    } else {
      uw(b);
    }
  }
  Xv(Ql);
}
function Ew(a) {
  let b = S.g;
  setTimeout(() => {
    3 == b && null != a.j && (P.i ? L.sa({type:"CHECK_BEFORE_NOTES_VIEWER_ACTION_FROM_PREVIEW", NotesviewerCheckFor:a.j}, null) : window.postMessage({type:"CHECK_BEFORE_NOTES_VIEWER_ACTION", NotesviewerCheckFor:a.j}, "*"), Ql.j = null, Fw());
    !P.i || 3 != b && 2 != b || null == a.u || (L.sa({type:"HANDLE_RECORDING_BEFORE_PREVIEW_NAVIGATE_JUMP_RESPONSE", idx:a.u}, null), Fw());
    a.u = null;
  }, 1100);
}
function Gw(a) {
  var b = Ql, c = a.saveSourceTabId, d = a.bSyncAnnotationForMediaUpdate, e = a.selfTabId, f = a.uSaveAnnotationType, k = b.Pg.g(), l = S.g;
  if (3 == f && c == e && (null != fw() && Hw(fw(), a), Rl() && k && Hw(k, a), 3 != l || a.savedAnnotationGuid != An() || b.g)) {
    return;
  }
  if (c == e && (Rl() && k && k.ae() && k.ae().On() == a.strStudentGuid || b.g)) {
    -1 != Bv && (clearTimeout(Bv), Bv = -1);
    b.g = !1;
    var n = a.bSaveAsNew;
    b.B && 3 != f && dw(b, a.bSuccessful, n, l);
    d = L.Pb();
    if (a.bSuccessful) {
      let p = An();
      S.Jh = !1;
      lt(a.savedAnnotationId, a.savedAnnotationPath);
      mt(a.savedAnnotationGuid);
      let t = nt(parseInt(a.uAnnotationType));
      rt(parseInt(a.savedAnnotationVersionNo.toString()));
      a.arrWebAnnotations && Ps(a.arrWebAnnotations);
      a.strFilePath && wt(a.strFilePath);
      A(a.strAssessmentFileGuid) || Vs(a.strAssessmentFileGuid);
      c = An();
      e = Cn();
      k = c;
      a.strBaseAnnotationGuid && (k = a.strBaseAnnotationGuid);
      n && (S.zd = Bh());
      if (1 != l || p != c || t) {
        Fn(S, {strPublisherGuid:Bh(), strS3BucketFullPath:M.o, strAnnotateDataRequestUrl:M.v, strPublishedAnnotationGuid:c, strPublisherPicture:M.Tl, oPublisherPicturePosition:M.$i, strPublisherFirstName:M.B, strPublisherLastName:M.C, uPublisherFeatureValue:!!M.m, bSharedDoc:!1, strLockOwnerGuid:Bh(),}, l), 1 == l && 5 == f && (f = {strFN:M.B, strLN:M.C, strOwnerGuid:Bh(),}, (n = Js(S, l)) && ys(n, f), S.j = -1), cl(2) && (zn(d, M.Tl, M.$i, M.B, M.C, !!M.m), S.m = 1);
      }
      Bn(d, -1, c, e, -1, k);
      f = L.Zf();
      k = f.ci();
      A(Lo) || (Lo.j = !1);
      null != Kv.getImageData() && (Aw(d, Kv.getImageData()), Kv.l = null);
      null != Lv(Kv) && (Bw(d, Lv(Kv)), Kv.m = null);
      e = Kv;
      e.o = [];
      e.s = [];
      null != Jv.i && (Cw(d), iw(Jv));
      null == d.Qf && null == d.Pf && null == d.Ef || rw(d, !0);
      null != k.Pn() && (Dw(k), ww(k), k.Sf = null);
      b.Fq && (si() ? L.kd({type:Iw, mediaFolderSrc:M.o + "/" + Cn() + "record/"}) : f.gq().Zn());
      a.arrMediaReencodeStatus && 0 < a.arrMediaReencodeStatus.length && S.yg(a.arrMediaReencodeStatus, S.g);
      1 == l && Yg(c) && (si() ? al(c) : P.o && (d = L.Cm()) && (Jw(d, c, l), Kw(d, a.strAnnotationName)));
      3 == l && (d = Oo(S)) && (e = No(), e.pageData = P.v, e.pageAnnotations = iv(), d = {type:"AnnotateFeedbackDocUpdated", strOwnerGuid:S.zd, annotationGuid:d.ma, versionNo:d.bg, annotationData:e}, si() ? window.postMessage(d, "*") : P.i ? L.sa(d, null) : Pl() && fw() ? fw().iy(d) : Kh() && Rl() && b.Pg.g().iy(d));
      Gv[c] = JSON.parse(a.strAnnotationDocSaved);
      f.gy();
      b.Ja() && b.lw && (Fp() && Kh() ? (Ch() ? Nv(b, {kv:a.savedAnnotationGuid}) : Nv(b, {ov:a.savedAnnotationId}), Rn(b)) : Ep() && Ph() && (Ch() ? Nv(b, {lv:a.savedAnnotationGuid}) : Nv(b, {pv:a.savedAnnotationId}), Rn(b)));
      1 == l && "" != Ql.i && Yg(c) && (c = Ql, c.i = "", c.Fq = !1, zv(l, !1));
      at(!1);
    } else {
      null == d.Qf && null == d.Pf && null == d.Ef || rw(d, !1), at(!0);
    }
    Cv = P.u = !1;
    c = b.Pg.i();
    l = b.Pg.g();
    a.bSuccessful ? c && c.nu ? (c.nu = !1, Lw(Mw, !0)) : Rl() && l && Pv.g ? Nw(l, !0) : (!(c = a.bCloseTabAfterSave) && (c = Rl() && l) && (c = Ql.l), c ? (Ql.l = !1, window == window.top || P.i ? (l = {type:"ANNOTATE_STALE_TAB_REMOVED", newTabId:P.ea,}, Rl() && (l.newTabFrameId = P.pa), L.sa(l, null)) : L.sa({type:"ChangesSavedInGradingIframe"}, null)) : Rl() && l && l.Db ? (l.Db = !1, L.sa({type:"ChangesSavedInGradingIframe", bStudentChange:!0}, null)) : Rl() && l && l.Wb ? (l.Wb = !1, Ow(l.j)) : 
    Xv(b)) : c && c.nu ? (c.nu = !1, Sn(), Kn("", "Could not turn in the assignment.", "", "CLOSE", null, null)) : Rl() && l && Pw() ? Nw(l, !1) : Xv(b);
    b.pp ? a.bSuccessful ? Qw(b.Ja()) : (b.pp = !1, b.Ja() ? L.kd({type:Wv}) : (console.log(">>Save before PDF Export failed"), L.kd({type:Rw, status:!1}))) : Xv(b);
    b.v ? (b.v = !1, a.bSuccessful && Sw()) : Xv(b);
    Ew(b);
  } else {
    d && e != c && null != V && !V.Jb && a.bSuccessful && (l = a.savedAnnotationGuid, a = a.savedAnnotationVersionNo, c = An(), d = st(), Yg(c) && l == c && a != d && Hn(c));
  }
  b.jw && (b.jw = !1);
}
function Tw(a, b) {
  if (!(b || a.Ja() && (S.Vl() || Mw.g == Uw && L.tI().Pc.cg))) {
    return !1;
  }
  a.g ? (a.pp = !0, a.m = !0) : (a.pp = !0, Mw.g == Uw && Jv.Pc.cg ? Vw(Jv.Pc) : Qn(a, !Yg(An()), !1, !1, !1));
  return !0;
}
class Ww {
  constructor(a) {
    this.Pg = a;
    this.lw = this.C = this.Fq = this.m = this.N = !1;
    this.o = null;
    this.pv = -1;
    this.lv = null;
    this.ov = -1;
    this.kv = null;
    this.g = !1;
    this.M = -1;
    this.G = "";
    this.s = !1;
    this.ea = this.i = "";
    this.J = this.J.bind(this);
    this.pp = !1;
    this.B = !0;
    this.l = this.v = this.ba = !1;
  }
  Rj(a) {
    a && Ov(this, !0);
  }
  J(a) {
    var b = "Playback is limited to " + Math.floor(Pr.Bv / 60) + " minutes for Free accounts.";
    M.Lc && (b = "Playback is limited to " + Math.floor(Pr.Bv / 60) + " minutes for Starter accounts.");
    var c = () => {
    };
    let d = "";
    d = Ch() ? Bh() : M.s;
    var e = f => {
      f && (f = {}, f[d] = !0, chrome.runtime.sendMessage({type:"setLocalStorage", data:f}).then(() => {
        chrome.runtime.lastError ? console.log("Failure! Set Do not remind for playback limit for", d, chrome.runtime.lastError) : console.log("Success! Set Do not remind for playback limit for", d);
      }));
      a && setTimeout(function() {
        Nn();
        qw();
      }, 500);
    };
    xw(d).then(f => {
      chrome.runtime.lastError ? (console.log("Failure! Get Do not remind for playback limit for", d, chrome.runtime.lastError), a && setTimeout(function() {
        Nn();
        qw();
      }, 500)) : (f = f[d], console.log("Success! Get Do not remind for playback limit for", d, "bPresent", f), f ? a && setTimeout(function() {
        Nn();
        qw();
      }, 500) : Kn("", b, "", "GOT IT", c, e, null, null, !1, null, !1, -1, -1, !0));
    });
  }
  ol() {
    if (window != window.top && Jk(P)) {
      let a = S.s;
      if (a) {
        let b = No();
        mv(a, b);
        S.ol();
      }
    }
  }
  Ja() {
    return this.s;
  }
  Gf() {
    return Rl() && this.Pg.g() && this.Pg.g().ae() ? this.Pg.g().ae().Gf() : this.N;
  }
}
;function Xw(a) {
  a.i = {};
  a.i.Nf = a.Nf;
  a.i.Ng = a.Ng;
  a.i.ij = a.ij;
  a.i.xd = [1, 2, 3, 5, 7, 10, 12, 16];
  a.i.zb = a.lineWidth;
  a.i.qa = a.strokeStyle;
  a.i.Rb = a.ea;
  a.i.Xb = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
  a.i.Za = Yw(a, a.strokeStyle);
  a.i.Cc = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
  a.i.Cg = 3;
  a.i.Bg = 1;
}
function Yw(a, b) {
  let c = 6;
  for (let d = 0; d < a.i.Xb.length; d++) {
    if (b == a.i.Xb[d]) {
      c = d;
      break;
    }
  }
  return c;
}
function Zw(a) {
  -1 != a.G && (clearTimeout(a.G), a.G = -1);
}
function $w(a, b) {
  let c = a.l;
  var d = Um(a);
  return b - window.scrollX + d.x + a.m.x / c - a.ic.x / c;
}
function ax(a, b) {
  let c = a.l;
  var d = Um(a);
  return b - window.scrollY + d.y + a.m.y / c - a.ic.y / c;
}
function bx(a, b, c, d) {
  a = (d - c) / (b - a);
  -Infinity == a && (a = Infinity);
  return Math.atan(a);
}
function cx(a, b) {
  var c = a.I.x, d = a.I.y;
  var e = a.L.x;
  var f = a.L.y;
  var k = b;
  b = [];
  b[0] = a.B;
  b[1] = a.j;
  let l = a.Dg(), n = l / 2, p = l / 2;
  var t = dx(c, d);
  var x = dx(e, f);
  var D = 1;
  if (2 == a.i.Ng && ex(a)) {
    D = 2 * fx(a);
  } else if (2 == a.i.Ng || ex(a)) {
    D = fx(a);
  }
  1 > n && (n = 1);
  1 > p && (p = 1);
  a.u(t, x) < D && (k = D, D = Math.atan((x.y - t.y) / (x.x - t.x)), t.x > x.x && (k *= -1), e = t.x + k * Math.cos(D), f = t.y + k * Math.sin(D), k = bx(t.x, x.x, t.y, x.y));
  e == c ? f < d && (n *= -1) : e < c && (n *= -1);
  t = a.Dg();
  if (2 == a.i.Ng) {
    x = gx(l) - l / 2;
    x > t && (x = t);
    x *= n / Math.abs(n);
    x = hx(p, x);
    x = ix(jx(a, x, k), c, d);
    b[0] = [];
    for (c = 0; c < x.length; c++) {
      b[0].push(x[c].x), b[0].push(x[c].y);
    }
    b[0].push(x[0].x);
    b[0].push(x[0].y);
  } else {
    b[0] = [];
  }
  if (ex(a)) {
    x = gx(l) - l / 2;
    x > t && (x = t);
    x *= n / Math.abs(n);
    c = hx(p, -x);
    c = ix(jx(a, c, k), e, f);
    b[1] = [];
    for (d = 0; d < c.length; d++) {
      b[1].push(c[d].x), b[1].push(c[d].y);
    }
    b[1].push(c[0].x);
    b[1].push(c[0].y);
  } else {
    b[1] = [];
  }
  a.B = b[0];
  a.j = b[1];
}
function kx(a, b, c, d) {
  let e = a.Dg();
  c && (b.beginPath(), b.moveTo($w(a, c[0]), ax(a, c[1])), b.lineTo($w(a, c[2]), ax(a, c[3])), b.lineTo($w(a, c[4]), ax(a, c[5])), b.lineTo($w(a, c[6]), ax(a, c[7])), b.closePath());
  d && (b.closePath(), b.moveTo($w(a, d[0]), ax(a, d[1])), b.lineTo($w(a, d[2]), ax(a, d[3])), b.lineTo($w(a, d[4]), ax(a, d[5])), b.lineTo($w(a, d[6]), ax(a, d[7])), b.closePath(), 1 == e && (b.fillStyle = a.fillStyle, b.fill()));
}
function lx(a, b, c, d) {
  let e = [], f = bx(a.I.x, a.L.x, a.I.y, a.L.y), k = 3 * (a.i.ij + 1);
  if (c.x > d.x || 0 == c.x - d.x && c.y > d.y) {
    var l = dx(c.x - Math.pow(Math.pow(c.x - d.x, 2) + Math.pow(c.y - d.y, 2), 0.5), c.y).x / Math.PI + 1, n = c.x % (2 * k * Math.PI), p = c.x / Math.PI - (c.x - n) / Math.PI;
    for (var t = (c.x - n) / Math.PI; t >= l - p; t--) {
      d = t * Math.PI;
      var x = c.y + k * Math.sin(d / k);
      d += n;
      d -= c.x;
      x -= c.y;
      e.push(dx(d, x));
    }
  } else {
    for (l = dx(c.x + Math.pow(Math.pow(c.x - d.x, 2) + Math.pow(c.y - d.y, 2), 0.5), c.y).x / Math.PI + 1, n = c.x % (2 * k * Math.PI), p = c.x / Math.PI - (c.x - n) / Math.PI, t = (c.x - n) / Math.PI; t <= l - p; t++) {
      d = t * Math.PI, x = c.y + k * Math.sin(d / k), d += n, d -= c.x, x -= c.y, e.push(dx(d, x));
    }
  }
  e = ix(jx(a, e, f), c.x, c.y);
  0 < e.length && b.moveTo($w(a, e[0].x), ax(a, e[0].y));
  for (c = 0; c < e.length; c++) {
    b.lineTo($w(a, e[c].x), ax(a, e[c].y));
  }
  b.stroke();
}
function mx(a, b) {
  if (1 > a.i.Rb) {
    b.globalCompositeOperation = "destination-out";
    b.lineWidth = a.i.zb;
    b.strokeStyle = jh(a.i.qa, a.i.Rb);
    b.lineCap = "butt";
    b.save();
    b.setLineDash([]);
    b.beginPath();
    if (1 == a.i.Nf) {
      b.lineCap = "butt";
      var c = a.i.zb;
      b.setLineDash([3 * c, c]);
    }
    2 == a.i.Nf && (b.lineCap = "butt", c = a.i.zb, b.setLineDash([c, c]));
    3 != a.i.Nf && (b.moveTo($w(a, a.I.x), ax(a, a.I.y)), b.lineTo($w(a, a.L.x), ax(a, a.L.y)), b.stroke());
    b.globalCompositeOperation = "source-over";
    b.stroke();
    b.restore();
    b.setLineDash([]);
    b.closePath();
    b.globalCompositeOperation = "destination-out";
    c = bx(a.I.x, a.L.x, a.I.y, a.L.y);
    3 != a.i.Nf ? (cx(a, c), kx(a, b, a.B, a.j)) : lx(a, b, a.I, a.L);
    b.stroke();
    b.globalCompositeOperation = "source-over";
  } else {
    b.globalCompositeOperation = "source-over", b.lineWidth = a.i.zb, b.strokeStyle = jh(a.i.qa, a.i.Rb), b.lineCap = "butt", b.save(), b.setLineDash([]), b.beginPath(), 1 == a.i.Nf && (b.lineCap = "butt", c = a.i.zb, b.setLineDash([3 * c, c])), 2 == a.i.Nf && (b.lineCap = "butt", c = a.i.zb, b.setLineDash([c, c])), 3 != a.i.Nf && (b.moveTo($w(a, a.I.x), ax(a, a.I.y)), b.lineTo($w(a, a.L.x), ax(a, a.L.y)), b.stroke()), b.restore(), b.setLineDash([]), b.closePath(), c = bx(a.I.x, a.L.x, a.I.y, a.L.y), 
    3 != a.i.Nf ? (cx(a, c), kx(a, b, a.B, a.j)) : lx(a, b, a.I, a.L);
  }
  b.stroke();
}
function dx(a, b) {
  return {x:a, y:b};
}
function ix(a, b, c) {
  let d = [];
  for (let e = 0; e < a.length; e++) {
    d.push(dx(a[e].x + b, a[e].y + c));
  }
  return d;
}
function jx(a, b, c) {
  let d = [];
  for (let e = 0; e < b.length; e++) {
    d.push(a.ba(c, b[e].x, b[e].y));
  }
  return d;
}
function gx(a) {
  return 1 * a / 2 / Math.sin(26.5650 * Math.PI / 180) + 1 * a / 2;
}
function hx(a, b) {
  let c = [], d, e;
  d = dx(0, 0);
  e = dx(b, -a);
  a = dx(b, a);
  c.push(d);
  c.push(e);
  c.push(a);
  return c;
}
function ex(a) {
  return 1 == a.i.Ng || 2 == a.i.Ng ? !0 : !1;
}
function fx(a) {
  a = a.Dg();
  return gx(a);
}
function nx(a, b, c, d, e, f) {
  return Math.floor(Math.round(100 * a)) / 100 != Math.floor(Math.round(100 * b)) / 100 ? (c - d) / (a - b) * (e - a) - (f - c) : Math.floor(Math.round(100 * c)) / 100 != Math.floor(Math.round(100 * d)) / 100 ? (a - b) / (c - d) * (f - c) - (e - a) : 1;
}
class Eo extends Wm {
  constructor(a, b, c, d, e, f, k, l, n, p, t) {
    super();
    this.Jb = a;
    this.lineWidth = d ? d : 30;
    this.strokeStyle = b ? b : "#222222";
    this.fillStyle = c ? c : "";
    this.fm = f ? f : 1;
    this.ea = e ? e : 1;
    this.I = {x:0, y:0};
    this.L = {x:0, y:0};
    this.tl = !1;
    this.v;
    this.globalCompositeOperation = "source-over";
    this.Gb = !1;
    this.G = -1;
    this.l = p ? p : 1;
    this.m = t ? t : {x:0, y:0, height:0, width:0};
    this.ic = {x:0, y:0};
    this.B = [];
    this.j = [];
    this.Nf = k;
    this.Ng = l;
    this.ij = n;
    this.S = -1;
    this.g = null;
    this.Db = !1;
    this.o = null;
    this.Za = 0;
    Xw(this);
  }
  Is() {
    return this.i;
  }
  kl(a) {
    this.S = a;
  }
  Vn(a) {
    this.m = a;
  }
  Xe() {
    return this.m;
  }
  Nn() {
    return this.l;
  }
  Km(a) {
    this.l = a;
  }
  nq(a) {
    this.ic = a;
  }
  ed() {
    Zw(this);
    var a = this.ia(this.I.x, this.L.x, this.I.y, this.L.y), b = Math.floor(a / 45);
    a %= 45;
    if (5 > a || 40 < a) {
      let c = 45 * b;
      40 < a && (c = 45 * (b + 1));
      b = this.ba(this.pa(c), this.u(this.I, this.L), 0);
      this.L.x = b.x + this.I.x;
      this.L.y = b.y + this.I.y;
    }
    this.Db && (Math.abs(this.I.x - this.L.x) > Math.abs(this.I.y - this.L.y) ? this.L.y = this.I.y : this.L.x = this.I.x);
    this.Gb = !1;
    this.Jb.save();
    this.g && (this.g.width = this.g.width);
    this.Xf(this.Jb);
    this.Jb.restore();
  }
  Ft(a, b, c) {
    this.Gb = !0;
    this.l = c;
    a = {x:a - this.m.x, y:b - this.m.y};
    this.Cb && (a = Ek(a.x, a.y, this.Cb));
    a.x /= c;
    a.y /= c;
    a.x = Math.round(100 * a.x) / 100;
    a.y = Math.round(100 * a.y) / 100;
    this.I = a;
    this.v = Date.now();
    null == this.g && (this.g = document.getElementById("AnnotateAnnotationSelectionCanvas"));
  }
  Ro(a, b, c, d) {
    a = {x:a - this.m.x, y:b - this.m.y};
    this.Cb && (a = Ek(a.x, a.y, this.Cb));
    a.x /= d;
    a.y /= d;
    a.x = Math.round(100 * a.x) / 100;
    a.y = Math.round(100 * a.y) / 100;
    this.L = a;
    this.Db = c;
    -1 == this.G && (this.G = window.setTimeout(this.ed.bind(this), 10));
  }
  Em(a, b, c, d) {
    Zw(this);
    this.g && (this.g.width = this.g.width);
    this.Gb ? (this.I.x = 0, this.I.y = 0, this.L.x = 0, this.L.y = 0) : (a = {x:a - this.m.x, y:b - this.m.y}, this.Cb && (a = Ek(a.x, a.y, this.Cb)), a.x /= d, a.y /= d, a.x = Math.round(100 * a.x) / 100, a.y = Math.round(100 * a.y) / 100, this.L = a, this.Db = c, this.ed());
  }
  pa(a) {
    return Math.PI * a / 180;
  }
  u(a, b) {
    return Math.pow(Math.pow(Math.abs(a.x - b.x), 2) + Math.pow(Math.abs(a.y - b.y), 2), 0.5);
  }
  ia(a, b, c, d) {
    a = Math.atan2(-(d - c), b - a);
    a = 0 > a ? Math.abs(a) : 2 * Math.PI - a;
    return 180 / Math.PI * a;
  }
  cb() {
    return "line";
  }
  ba(a, b, c) {
    return dx(b * Math.cos(a) - c * Math.sin(a), b * Math.sin(a) + c * Math.cos(a));
  }
  wm(a) {
    this.o = a;
  }
  ya() {
    var a = this.u(this.I, this.L), b = 180 / Math.PI * (this.I.x < this.L.x || this.I.x == this.L.x && this.L.y > this.I.y ? bx(this.I.x, this.L.x, this.I.y, this.L.y) : bx(this.L.x, this.I.x, this.L.y, this.I.y));
    let c = this.I.x, d = this.I.y, e = this.L.x, f = this.L.y, k, l;
    this.I.x < this.L.x || this.I.x == this.L.x && this.L.y > this.I.y ? (e = c + a, k = c, l = d - 15) : (c = e + a, k = e, l = f - 15);
    var n = {};
    n.left = k;
    n.top = l;
    n.width = a;
    n.height = 30;
    n.Hz = b;
    this.I.x < this.L.x || this.I.x == this.L.x && this.L.y > this.I.y ? (n.at = this.I.x - c, n.bt = this.I.y - d + 15) : (n.at = this.L.x - e, n.bt = this.L.y - f + 15);
    n.left = n.left * this.l;
    n.top *= this.l;
    n.width = n.width * this.l;
    n.height *= this.l;
    n.at *= this.l;
    n.bt *= this.l;
    n.left = n.left + this.m.x;
    n.top = n.top + this.m.y;
    a = Um(this);
    n.left += a.x;
    n.top += a.y;
    this.o && this.o.Ea && (n.left = n.left - this.m.x, n.top = n.top - this.m.y, a = this.o.Ea.getBoundingClientRect(), b = hl(this.o, yo(this.o, this.S), new il(this.o.scrollX, this.o.scrollY)), n.left = n.left - b.$a + a.left, n.top = n.top - b.Ua + a.top);
    return n;
  }
  getBoundingClientRect() {
    let a = this.u(this.I, this.L), b = 180 / Math.PI * (this.I.x < this.L.x || this.I.x == this.L.x && this.L.y > this.I.y ? bx(this.I.x, this.L.x, this.I.y, this.L.y) : bx(this.L.x, this.I.x, this.L.y, this.I.y)), c = this.I.x, d = this.I.y, e = this.L.x, f = this.L.y, k, l;
    this.I.x < this.L.x || this.I.x == this.L.x && this.L.y > this.I.y ? (e = c + a, k = c, l = d - 15) : (c = e + a, k = e, l = f - 15);
    var n = {};
    n.left = k;
    n.top = l;
    n.width = a;
    n.height = 30;
    n.Hz = b;
    this.I.x < this.L.x || this.I.x == this.L.x && this.L.y > this.I.y ? (n.at = this.I.x - c, n.bt = this.I.y - d + 15) : (n.at = this.L.x - e, n.bt = this.L.y - f + 15);
    n.left += this.m.x;
    n.top = n.top + this.m.y;
    return n;
  }
  nt(a) {
    this.tl = a;
  }
  It() {
    return this.tl;
  }
  Ha(a, b) {
    a -= this.m.x;
    b -= this.m.y;
    if (this.Cb) {
      var c = Ek(a, b, this.Cb);
      a = c.x;
      b = c.y;
    }
    var d = this.Dg();
    let e = this.I.x * this.l, f = this.L.x * this.l, k = this.I.y * this.l, l = this.L.y * this.l;
    if (a < (Math.min(this.I.x, this.L.x) - d) * this.l || a > (Math.max(this.I.x, this.L.x) + d) * this.l) {
      return !1;
    }
    Math.floor(Math.round(100 * e)) / 100 != Math.floor(Math.round(100 * f)) / 100 ? (c = nx(e, f, k - d - 5, l - d - 5, a, b), a = nx(e, f, k + d + 5, l + d + 5, a, b)) : (c = nx(e - d - 5, f - d - 5, k, l, a, b), a = nx(e + d + 5, f + d + 5, k, l, a, b));
    return 0 >= c * a ? !0 : !1;
  }
  ld(a, b, c) {
    b && (Math.abs(this.I.x - this.L.x) > Math.abs(this.I.y - this.L.y) ? a ? this.L.y = this.I.y : this.I.y = this.L.y : a ? this.L.x = this.I.x : this.I.x = this.L.x);
    (a = document.getElementById("AnnotateAnnotationSelectionCanvas")) && a.getContext("2d").clearRect(0, 0, a.width, a.height);
    a = this.l;
    c.save();
    if (b = Vm(this)) {
      c.beginPath(), c.rect(b.x, b.y, b.width, b.height), c.clip(), c.beginPath();
    }
    c.scale(a, a);
    mx(this, c);
    c.restore();
  }
  dj(a, b) {
    b = (this.I.x < this.L.x ? this.I.x : this.L.x) + b / this.l;
    this.I.x < this.L.x ? this.L.x = b : this.I.x = b;
    (b = document.getElementById("AnnotateAnnotationSelectionCanvas")) && b.getContext("2d").clearRect(0, 0, b.width, b.height);
    this.Xf(a);
  }
  Wg(a, b) {
    b = (this.I.y < this.L.y ? this.I.y : this.L.y) + b / this.l;
    this.I.y < this.L.y ? this.L.y = b : this.I.y = b;
    (b = document.getElementById("AnnotateAnnotationSelectionCanvas")) && b.getContext("2d").clearRect(0, 0, b.width, b.height);
    this.Xf(a);
  }
  Wb(a, b, c) {
    var d = this.getBoundingClientRect();
    b = (d.left - b) / this.l;
    c = (d.top - c) / this.l;
    this.I.x -= b;
    this.I.y -= c;
    this.L.x -= b;
    this.L.y -= c;
    (c = document.getElementById("AnnotateAnnotationSelectionCanvas")) && c.getContext("2d").clearRect(0, 0, c.width, c.height);
    this.o && this.o.Ea && (d = yo(this.o, this.S), -1 != d && (c = fl(this.o, Math.min(this.I.y, this.L.y) * this.l + ox(this.o, d)).S, c != d && (c > d ? (d = kl(this.o, d) / this.l, this.I.y -= d + 16, this.L.y -= d + 16) : (d = kl(this.o, c) / this.l, b = Math.abs(this.I.y - this.L.y), this.I.y < this.L.y ? (this.I.y = d + this.I.y + 16, this.L.y = this.I.y + b + 16) : (this.L.y = d + this.L.y + 16, this.I.y = this.L.y + b + 16)), d = hl(this.o, c, new il(this.o.scrollX, this.o.scrollY)), this.m = 
    {x:-d.$a, y:-d.Ua, width:jl(this.o, c), height:kl(this.o, c), scale:this.o.scale}, this.S = ll(this.o, c))));
    this.Xf(a);
  }
  Dd(a, b, c) {
    b = (this.I.x < this.L.x ? this.I.x : this.L.x) + b;
    this.I.x < this.L.x ? this.L.x = b : this.I.x = b;
    c = (this.I.y < this.L.y ? this.I.y : this.L.y) + c;
    this.I.y < this.L.y ? this.L.y = c : this.I.y = c;
    null == this.g && (this.g = document.getElementById("AnnotateAnnotationSelectionCanvas"));
    this.g && this.g.getContext("2d").clearRect(0, 0, this.g.width, this.g.height);
    this.Xf(a);
  }
  Xf(a) {
    var b = this.l;
    a.save();
    let c = Vm(this);
    c && (a.beginPath(), a.rect(c.x, c.y, c.width, c.height), a.clip(), a.beginPath());
    a.scale(b, b);
    mx(this, a);
    a.restore();
  }
  Dg() {
    1 == this.i.zb && (this.i.zb = 2);
    return this.i.zb;
  }
  Na() {
    var a = super.Na();
    this.Fb(a);
    return a;
  }
  Fa(a) {
    super.Fa(a);
    "strStrokeStyle" in a && (this.strokeStyle = a.strStrokeStyle);
    this.l = a.uGlobalScale ? a.uGlobalScale : 1;
    this.m = a.offsetPoint ? a.offsetPoint : {x:0, y:0, height:0, width:0};
    "startPoint" in a && (null != a.startPoint.X && null != a.startPoint.Y ? (this.I.x = a.startPoint.X, this.I.y = a.startPoint.Y) : this.I = a.startPoint);
    "endPoint" in a && (null != a.endPoint.X && null != a.endPoint.Y ? (this.L.x = a.endPoint.X, this.L.y = a.endPoint.Y) : this.L = a.endPoint);
    "arrMarkerStartPts" in a && (this.B = a.arrMarkerStartPts);
    "arrMarkerEndPts" in a && (this.j = a.arrMarkerEndPts);
    "strlineWidth" in a && (this.lineWidth = a.strlineWidth);
    "strStrokeAlpha" in a && (this.ea = a.strStrokeAlpha);
    "lineStyle" in a && (this.Nf = a.lineStyle);
    "arrowHead" in a && (this.Ng = a.arrowHead);
    "waveSize" in a && (this.ij = a.waveSize);
    "pageIndex" in a && (this.S = a.pageIndex);
    this.Za = "currColorIndex" in a ? a.currColorIndex : Yw(this, this.strokeStyle);
    Xw(this);
  }
  Fb(a) {
    a.strElement = this.cb();
    a.strStrokeStyle = this.i.qa;
    a.strlineWidth = this.i.zb;
    a.strStrokeAlpha = this.i.Rb;
    a.currColorIndex = this.i.Za;
    a.uGlobalScale = this.l;
    a.offsetPoint = this.m;
    a.startPoint = this.I;
    a.endPoint = this.L;
    a.arrMarkerStartPts = this.B;
    a.arrMarkerEndPts = this.j;
    a.lineStyle = this.i.Nf;
    a.arrowHead = this.i.Ng;
    a.waveSize = this.i.ij;
    a.pageIndex = this.S;
  }
  Ul(a) {
    a.strElement = this.cb();
    a.strStrokeStyle = this.i.qa;
    a.strlineWidth = this.i.zb;
    a.strStrokeAlpha = this.i.Rb;
    a.currColorIndex = this.i.Za;
    a.lineStyle = this.i.Nf;
    a.arrowHead = this.i.Ng;
    a.waveSize = this.i.ij;
  }
  Ad(a) {
    super.Ad(a);
    "strStrokeStyle" in a && (this.strokeStyle = a.strStrokeStyle);
    "strlineWidth" in a && (this.lineWidth = a.strlineWidth);
    "strStrokeAlpha" in a && (this.ea = a.strStrokeAlpha);
    "currColorIndex" in a && (this.Za = a.currColorIndex);
    "lineStyle" in a && (this.Nf = a.lineStyle);
    "arrowHead" in a && (this.Ng = a.arrowHead);
    "waveSize" in a && (this.ij = a.waveSize);
    this.i && (this.i.Nf = this.Nf, this.i.Ng = this.Ng, this.i.ij = this.ij, this.i.zb = this.lineWidth, this.i.qa = this.strokeStyle, this.i.Rb = this.ea, this.i.Za = Yw(this, this.strokeStyle));
  }
}
;function px(a) {
  a.i = new Nj(null);
  a.i.Le("StrokeWeightPicker");
  a.i.el.style = a.l.Of;
  a.i.Mb(32);
  a.parent.Z(a.i);
  a.Ud = [];
  var b = 0;
  3 > a.xd[0] && (b = 2);
  for (let c = 0; 8 > c; c++) {
    let d = new Nj(null);
    Kj(d, function() {
      var f = c;
      this.rg();
      console.log("weight selected", f);
      this.Ud[f][0].Qj("3px solid rgb(33, 150, 243)");
      this.j.update(this.xd[f]);
      this.g && (this.g.zb = this.xd[f]);
      this.dispatchEvent(new CustomEvent("weightUpdate", {detail:this.xd[f]}));
    }.bind(a));
    d.el.style = 0 == c ? a.l.MC : a.l.wo;
    let e = new fm();
    d.Z(e);
    e.ga(13 - (a.xd[c] + b) / 2, 13 - (a.xd[c] + b) / 2);
    gm(e, a.xd[c] + b);
    a.Ud.push([d, e]);
  }
  for (b = 0; b < a.Ud.length; b++) {
    a.i.Z(a.Ud[b][0]);
  }
}
function qx(a, b) {
  a.zb = b;
  a.rg();
  for (let c = 0; c < a.xd.length; c++) {
    a.xd[c] == b && a.Ud[c][0].Qj("3px solid rgb(33, 150, 243)");
  }
  a.g && (a.g.zb = b);
  a.j.update(b);
}
class rx extends Nj {
  constructor(a) {
    super(null);
    this.l = {Of:"clear:both;font-family: Roboto, Arial, Helvetica, sans-serif;user-select: none;height: 34px; width: 236px; box-sizing: border-box;display: block;position: static;", label:"font-family: Roboto, Arial, Helvetica, sans-serif;font-family: Roboto, Arial, Helvetica, sans-serif;user-select: none;height: 34px; width: 126px;float: left; font-size:16px; margin-left: 6px;box-sizing: border-box;line-height:34px;display: block;position: static;", EN:"user-select: none;height: 32px; width: 236px;box-sizing: border-box; padding-top: 3px; display: block;", 
    wo:"user-select: none; cursor: pointer;height: 32px; width: 26px;box-sizing: border-box; float: left;background-position: initial; background-size: initial;background-repeat: initial; background-attachment: initial;background-origin: initial; background-clip: initial;border: 0px; border-radius: 0px;margin-left: 4px; margin-right: 0px;display: block;position: static;", MC:"user-select: none; cursor: pointer;height: 32px; width: 26px;box-sizing: border-box; float: left;background-position: initial; background-size: initial;background-repeat: initial; background-attachment: initial;background-origin: initial; background-clip: initial;border: 0px; border-radius: 0px;margin-left: 0px; margin-right: 0px;display: block;position: static;"};
    this.g = null;
    this.xd = [10, 12, 14, 16, 17, 20, 22, 24];
    this.qa = "rgb(0, 0, 0)";
    this.zb = this.xd[2];
    this.Ud = [];
    this.create(a);
  }
  Zb() {
    return "WeightProp";
  }
  create(a) {
    this.parent = a;
    this.el.style = this.l.Of;
    a.Z(this);
    this.label = new Nj(null);
    this.label.el.style = this.l.label;
    rj(this.label, "Weight");
    this.Z(this.label);
    this.j = new cm(this, 14, "px", 1, 30, 1);
    this.m = this.m.bind(this);
    this.j.addEventListener("spinnerUpdate", this.m);
    px(this);
  }
  m(a) {
    a = a.detail;
    qx(this, a);
    this.dispatchEvent(new CustomEvent("weightUpdate", {detail:a}));
  }
  vx(a) {
    this.qa = a;
    for (let b = 0; b < this.Ud.length; b++) {
      this.Ud[b][1].el.style.background = a;
    }
  }
  rg() {
    for (let a = 0; a < this.Ud.length; a++) {
      yj(this.Ud[a][0], "0");
    }
  }
  setData(a) {
    this.g = a;
    this.xd = this.xd = a.xd;
    let b = 0;
    3 > this.xd[0] && (b = 2);
    for (let c = 0; c < this.Ud.length; c++) {
      let d = this.Ud[c][1];
      d.ga(13 - (this.xd[c] + b) / 2, 13 - (this.xd[c] + b) / 2);
      gm(d, this.xd[c] + b);
    }
    this.zb = a.zb;
    qx(this, this.zb);
    this.qa = a.qa;
    this.vx(this.qa);
  }
}
;function gm(a, b) {
  a.V(b, b);
}
function im(a, b) {
  b ? a.el.style.removeProperty("opacity") : a.el.style.opacity = "0.44";
}
class fm extends Nj {
  constructor() {
    super(null);
    this.g = {MJ:"user-select: none;box-sizing: border-box;cursor: pointer; height: 26px; width: 26px;float: left; background: rgb(244, 20, 137); border: 1px solid rgb(192, 192, 192);border-radius: 50%; box-sizing: border-box; position: relative;"};
    this.el.style = this.g.MJ;
  }
  Zb() {
    return "ColorButton";
  }
  Eo(a) {
    "" == a ? (this.Im("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAJElEQVQYV2O8dOnSfwYkoKenx4jMZ6SDAmT7QGx0K1EcRBsFAJfOHd3Le79RAAAAAElFTkSuQmCC"), this.el.style.backgroundRepeat = "repeat", this.el.style.backgroundColor = "rgba(0, 0, 0, 0)") : (this.el.style.backgroundImage = "none", this.el.style.backgroundColor = a);
  }
}
;class sx extends Nj {
  constructor(a) {
    super(null);
    this.j = {Of:"clear:both;font-family: Roboto, Arial, Helvetica, sans-serif;user-select: none;height: 34px; width: 236px;box-sizing: border-box;display: block;margin-bottom :4px; position:static;", label:"user-select: none;height: 34px; width:170px;float: left; font-size: 16px;margin-left: 6px; box-sizing: border-box;line-height: 34px;display: block;position:static;", tm:"user-select: none; cursor: pointer;height: 26px; width: 26px;float: left; margin-left: 4px; margin-top: 4px;box-sizing: border-box;display: block; position:relative",
    };
    this.i = this.i.bind(this);
    this.qa = "#ff3b30";
    this.Vf = a;
    this.create();
  }
  Zb() {
    return "ColorProp";
  }
  i() {
    this.dispatchEvent(new CustomEvent("selectColorClicked", {detail:{}}));
  }
  vx(a) {
    this.g.Eo(a);
    "" == a ? this.tm.ja() : this.tm.pb();
  }
  create() {
    this.el.style = this.j.Of;
    this.g = new fm();
    this.label = new Nj(null);
    this.label.el.style = this.j.label;
    rj(this.label, this.Vf);
    this.Z(this.label);
    this.Z(this.g);
    this.g.Ee(4);
    this.g.el.style.marginLeft = "4px";
    Kj(this.g, this.i);
    this.tm = new Nj(null);
    R(this.tm, "extension_reset_css");
    Kj(this.tm, this.i);
    this.tm.el.className += " extension_icon extension_icon-chevron_right";
    this.tm.el.style = this.j.tm;
    this.Z(this.tm);
  }
  setData(a) {
    this.qa = a.qa;
    this.g.Eo(this.qa);
    "" == this.qa ? this.tm.ja() : this.tm.pb();
  }
}
;function tx(a, b) {
  let c = document.createElement("div");
  c.className = "extension_reset_css";
  c.style = a.j.Of;
  a.parent.appendChild(c);
  let d = document.createElement("div");
  d.className = "extension_reset_css";
  d.style = a.j.label;
  d.innerHTML = b;
  c.appendChild(d);
  return c;
}
function ux(a) {
  a.i = document.createElement("div");
  a.i.className = "extension_reset_css";
  uk(a.i, "XLineStrokeSelector");
  a.i.style = a.j.Of;
  a.i.style.height = "30px";
  a.parent.appendChild(a.i);
  a.m = [];
  for (let c = 0; 3 > c; c++) {
    var b = document.createElement("div");
    b.className = "extension_reset_css";
    uk(b, "XLineStrokeSelector_buttonContainer");
    b.addEventListener("click", function() {
      this.C(c);
    }.bind(a));
    b.style = a.j.wo;
    let d = document.createElement("div");
    0 == c ? (b.style.marginLeft = "0", d.className = "extension_reset_css extension_icon extension_icon-line", uk(d, "solid")) : 1 == c ? (b.style.marginLeft = "0px", d.className = "extension_reset_css extension_icon extension_icon-line_dashed", uk(d, "dashed")) : 2 == c ? (b.style.marginLeft = "0px", d.className = "extension_reset_css extension_icon extension_icon-line_dotted", uk(d, "dotted")) : 3 == c && (b.style.marginLeft = "0px", d.className = "extension_reset_css extension_icon extension_icon-line_wave", 
    uk(d, "wave"));
    d.style = a.j.DC;
    b.appendChild(d);
    d.style.top = "0px";
    d.style.left = "0px";
    a.m.push([b, d]);
  }
  for (b = 0; b < a.m.length; b++) {
    a.i.appendChild(a.m[b][0]);
  }
}
function vx(a) {
  for (let b = 0; b < a.m.length; b++) {
    a.m[b][0].style.border = 0;
  }
}
function wx(a, b) {
  a.G = b;
  vx(a);
  4 > b ? a.m[b][0].style.borderBottom = "3px solid rgb(33, 150, 243)" : (a.m[0][0].style.borderBottom = "3px solid rgb(33, 150, 243)", b = a.G = 0);
  3 > b ? (a.l.style.display = "block", a.v.style.display = "none", a.M.style.display = "block", a.N.style.display = "none") : (a.l.style.display = "none", a.v.style.display = "block", a.M.style.display = "none", a.N.style.display = "block");
  a.g && (a.g.Nf = b);
}
function xx(a) {
  a.l = document.createElement("div");
  a.l.className = "extension_reset_css";
  a.l.style = a.j.Of;
  a.l.style.height = "30px";
  uk(a.l, "XLineCapSelector");
  a.parent.appendChild(a.l);
  a.o = [];
  for (let c = 0; 4 > c; c++) {
    var b = document.createElement("div");
    b.className = "extension_reset_css";
    uk(b, "XLineCapSelector_buttonContainer");
    b.addEventListener("click", function() {
      this.u(c);
    }.bind(a));
    b.style = a.j.wo;
    let d = document.createElement("div");
    0 == c ? (b.style.marginLeft = "0", d.className = "extension_reset_css extension_icon extension_icon-line", uk(d, "no_cap")) : 1 == c ? (b.style.marginLeft = "0", d.className = "extension_reset_css extension_icon extension_icon-line_end_arrow", uk(d, "end_arrow")) : 2 == c && (b.style.marginLeft = "0", d.className = "extension_reset_css extension_icon extension_icon-line_double_arrow", uk(d, "double_arrow"));
    d.style = a.j.DC;
    b.appendChild(d);
    d.style.top = "0px";
    d.style.left = "0px";
    a.o.push([b, d]);
  }
  for (b = 0; b < a.o.length; b++) {
    a.l.appendChild(a.o[b][0]);
  }
}
function yx(a) {
  for (let b = 0; b < a.o.length; b++) {
    a.o[b][0].style.border = 0;
  }
}
function zx(a, b) {
  a.J = b;
  yx(a);
  3 > b ? a.o[b][0].style.borderBottom = "3px solid rgb(33, 150, 243)" : (a.o[0][0].style.borderBottom = "3px solid rgb(33, 150, 243)", b = a.J = 0);
  a.g && (a.g.Ng = b);
}
function Ax(a) {
  a.v = document.createElement("div");
  a.v.className = "extension_reset_css";
  a.v.style = a.j.Of;
  a.v.style.height = "30px";
  a.parent.appendChild(a.v);
  a.s = [];
  for (let c = 0; 4 > c; c++) {
    var b = document.createElement("div");
    b.className = "extension_reset_css";
    b.addEventListener("click", function() {
      this.B(c);
    }.bind(a));
    b.style = a.j.wo;
    let d = document.createElement("div");
    0 == c ? (b.style.marginLeft = "0", d.className = "extension_reset_css extension_icon extension_icon-line_wave") : 1 == c ? (b.style.marginLeft = "8", d.className = "extension_reset_css extension_icon extension_icon-line_wave_large") : 2 == c && (b.style.marginLeft = "8", d.className = "extension_reset_css extension_icon extension_icon-line_wave_medium");
    d.style = a.j.DC;
    b.appendChild(d);
    d.style.top = "0px";
    d.style.left = "0px";
    a.s.push([b, d]);
  }
  for (b = 0; b < a.s.length; b++) {
    a.v.appendChild(a.s[b][0]);
  }
}
function Bx(a) {
  for (let b = 0; b < a.s.length; b++) {
    a.s[b][0].style.border = 0;
  }
}
class Cx extends EventTarget {
  constructor(a) {
    super();
    this.j = {Of:"clear:both;font-family: Roboto, Arial, Helvetica, sans-serif;user-select: none;height: 34px; width: 236px; box-sizing: border-box;display: block;", label:"font-family: Roboto, Arial, Helvetica, sans-serif;font-family: Roboto, Arial, Helvetica, sans-serif;user-select: none;height: 34px; width: 114px;float: left; font-size: 16px; margin-left: 6px;box-sizing: border-box;line-height:34px;display: block;", EN:"user-select: none;height: 32px; width: 236px;box-sizing: border-box; padding-top: 3px; display: block;display: block;", 
    wo:"user-select: none; cursor: pointer;height: 32px width: 26px;box-sizing: border-box; float: left;background-position: initial; background-size: initial;background-repeat: initial; background-attachment: initial;background-origin: initial; background-clip: initial; border: 0px;border-radius: 0px; margin-left: 4px; margin-right: 0px;display: block;", DC:"user-select: none;  box-sizing: border-box;cursor: pointer;height: 26px; width: 26px;box-sizing: border-box; position: relative;display: block;",
    };
    this.g = null;
    this.ij = this.Ng = this.Nf = 0;
    this.m = [];
    this.C = this.C.bind(this);
    this.u = this.u.bind(this);
    this.B = this.B.bind(this);
    this.create(a);
  }
  C(a) {
    vx(this);
    wx(this, a);
    this.dispatchEvent(new CustomEvent("linePropChange", {detail:this.g}));
  }
  u(a) {
    yx(this);
    zx(this, a);
    this.dispatchEvent(new CustomEvent("linePropChange", {detail:this.g}));
  }
  B(a) {
    Bx(this);
    Bx(this);
    3 > a ? this.s[a][0].style.borderBottom = "3px solid rgb(33, 150, 243)" : (this.s[0][0].style.borderBottom = "3px solid rgb(33, 150, 243)", a = 0);
    this.g && (this.g.ij = a);
    this.dispatchEvent(new CustomEvent("linePropChange", {detail:this.g}));
  }
  create(a) {
    this.parent = a;
    tx(this, "Line Style");
    ux(this);
    this.M = tx(this, "Arrowheads");
    xx(this);
    this.N = tx(this, "Wavesize");
    Ax(this);
  }
  setData(a) {
    this.g = a;
    this.G = a.Nf;
    wx(this, this.G);
    this.J = a.Ng;
    zx(this, this.J);
  }
}
;function Dx(a, b) {
  a.data.Za = b;
  a.data.qa = a.data.Xb[b];
  a.color.setData(a.data);
  a.i.setData(a.data);
  a.g.setData(a.data);
  a.weight.setData(a.data);
}
class Ex extends Nj {
  constructor(a) {
    super(null);
    this.u = {xM:"user-select: none;color: black;position: fixed;background-color: rgb(255, 255, 255);z-index: " + Yj + ";padding: 4px;border: 1px solid rgb(192, 192, 192);box-sizing: border-box;display: block;top: 67px; left: 132px;display: block; font-weight : normal;", ik:"user-select: none;  width: 236px;box-sizing: border-box;line-height: 40px;display: block;position: static;", an:"user-select: none;  width: 236px;box-sizing: border-box; font-family: Roboto, Arial, Helvetica, sans-serif;display: block;position: static;", 
    wM:"user-select: none;height:40px; width: 236px;background-color: rgb(239, 239, 239);box-sizing: border-box;line-height: 40px;display: block;position: static;", KL:"font-family: Roboto, Arial, Helvetica, sans-serif;user-select: none; height: 40px;width: 186px;float: left; font-size: 16px;font-weight: bold; margin-left: 12px;box-sizing: border-box;display: block;position: static;line-height: 40px", JL:"user-select: none; cursor: pointer;height: 26px; width: 26px; font-weight: bold;float: left; margin-left: 4px; margin-top: 7px;box-sizing: border-box;display: block; position:relative;",
    };
    this.m = a;
    this.ic = this.ic.bind(this);
    this.Wb = this.Wb.bind(this);
    this.Db = this.Db.bind(this);
    this.ia = this.ia.bind(this);
    this.Jb = this.Jb.bind(this);
    this.Ha = this.Ha.bind(this);
    this.tn = this.tn.bind(this);
    this.ba = this.ba.bind(this);
    this.pa = this.pa.bind(this);
    this.ib = this.ib.bind(this);
    this.Gb = this.Gb.bind(this);
    this.Va = this.Va.bind(this);
    this.lb = this.lb.bind(this);
    this.ea = !0;
    this.data = {};
    this.data.xd = [1, 2, 3, 5, 7, 10, 12, 16];
    this.data.zb = 6;
    this.data.qa = "#fdfd96";
    this.data.Rb = 30;
    this.data.Xb = "#f7ee00 #f41489 #30f0bf #fdfd96 #21aeef #bcff00 #9930f2".split(" ");
    this.data.Za = 0;
    this.data.Hd = "#fdfd96";
    this.data.Ei = "#f7ee00 #f41489 #30f0bf #fdfd96 #21aeef #bcff00 #9930f2".split(" ");
    this.data.Kf = 0;
    this.data.Ni = "#f7ee00 #f41489 #30f0bf #fdfd96 #21aeef #bcff00 #9930f2".split(" ");
    this.data.Cc = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
    this.data.Cg = 3;
    this.data.Bg = 100;
    this.create();
    this.setData(this.data);
    this.he("annotate-element-toolbar");
    R(this, "annotate-no-print");
  }
  Zb() {
    return "ElementToolbar";
  }
  pb() {
    super.pb();
    this.nr(!0);
  }
  nr(a) {
    this.ea = a;
    this.g.nr(a);
    this.ea ? this.Of.ja() : (this.Of.pb(), this.ik.pb(), this.g.pb());
    this.an.ja();
    this.o.ja();
    this.g.pb();
  }
  getBoundingClientRect() {
    return this.el.getBoundingClientRect();
  }
  ba() {
    this.ik.pb();
    this.g.pb();
    this.an.ja();
    this.o.ja();
  }
  tn() {
    this.nr(!0);
  }
  Ha(a) {
    a = a.detail.qa;
    this.data.Xb[this.data.Za] = a;
    this.data.qa = a;
    this.setData(this.data);
    -1 !== this.i.Bw.Xb.indexOf(a.toLowerCase()) && this.i.Bw.Ud[this.i.Bw.Xb.indexOf(a.toLowerCase())][0].Qj("3px solid rgb(33, 150, 243)");
    this.dispatchEvent(new CustomEvent("propUpdate", {detail:this.data}));
  }
  ib(a) {
    a = a.detail.qa;
    this.data.Ei[this.data.Kf] = a;
    this.data.Hd = a;
    this.setData(this.data);
    this.dispatchEvent(new CustomEvent("propUpdate", {detail:this.data}));
  }
  Wb() {
    this.dispatchEvent(new CustomEvent("linePropChange", {detail:this.data}));
    this.dispatchEvent(new CustomEvent("propUpdate", {detail:this.data}));
  }
  ic() {
    this.dispatchEvent(new CustomEvent("propUpdate", {detail:this.data}));
  }
  Db() {
    this.dispatchEvent(new CustomEvent("propUpdate", {detail:this.data}));
  }
  Va(a) {
    var b = a.detail;
    a = b.Za;
    b = b.qa;
    this.fillColor.vx(b);
    this.data.Hd = b;
    this.data.Kf = a;
    this.dispatchEvent(new CustomEvent("propUpdate", {detail:this.data}));
  }
  lb() {
    this.data.Ni && (this.data.Hd = this.data.Ni[0], this.data.Ei = [...this.data.Ni], this.data.Kf = 0);
    this.setData(this.data);
  }
  Gb() {
    if (this.data.Hd && "" != this.data.Hd) {
      this.ik.ja();
      this.g.ja();
      this.o.pb();
      let a = {};
      a.Cc = this.data.Ni;
      a.qa = this.data.Hd;
      this.C.setData(a);
    }
  }
  Jb() {
    this.ik.ja();
    this.g.ja();
    this.an.pb();
    let a = {};
    a.Cc = this.data.Cc;
    a.qa = this.data.qa;
    this.i.setData(a);
  }
  pa() {
    this.ea ? this.nr(!this.ea) : (this.data.qa = this.data.Cc[0], this.data.Xb = [...this.data.Cc], this.data.Za = 0, this.setData(this.data), this.dispatchEvent(new CustomEvent("propUpdate", {detail:this.data})));
  }
  ia(a) {
    a = a.detail.qa;
    this.weight.vx(a);
    this.color.vx(a);
    this.i.setData(this.data);
    this.dispatchEvent(new CustomEvent("propUpdate", {detail:this.data}));
  }
  create() {
    var a = document.body;
    this.el.style = this.u.xM;
    a.appendChild(this.el);
    this.Of = new Nj(null);
    this.Of.Le("mainBox");
    this.Z(this.Of);
    tj(this.Of, "static");
    this.Of.ja();
    this.g = new jm(this.m);
    this.Z(this.g);
    this.g.addEventListener("colorChange", this.ia);
    this.g.addEventListener("extraButtonClick", this.pa);
    this.ik = new Nj(null);
    this.ik.Le("propContainer");
    this.ik.el.style = this.u.ik;
    this.Of.Z(this.ik);
    this.an = new Nj(null);
    this.an.Le("colorSelectionContainer");
    this.an.el.style = this.u.an;
    this.Of.Z(this.an);
    this.an.ja();
    this.i = new xm();
    this.an.Z(this.i);
    this.i.addEventListener("ColorSelectionChange", this.Ha);
    this.i.addEventListener("CloseButtonClicked", this.tn);
    this.i.addEventListener("BackButtonClicked", this.ba);
    this.i.setData(this.data);
    this.o = new Nj(null);
    this.o.Le("colorFillSelectionContainer");
    this.o.el.style = this.u.an;
    this.Of.Z(this.o);
    this.o.ja();
    this.C = new xm();
    this.o.Z(this.C);
    this.C.addEventListener("ColorSelectionChange", this.ib);
    this.C.addEventListener("CloseButtonClicked", this.tn);
    this.C.addEventListener("BackButtonClicked", this.ba);
    this.data.Ni && (a = {}, a.Cc = this.data.Ni, a.qa = this.data.Hd, this.C.setData(a));
    this.l = new Nj(null);
    this.l.Le("headerMain");
    this.l.el.style = this.u.wM;
    this.ik.Z(this.l);
    this.Ep = new Nj(null);
    rj(this.Ep, "Properties");
    this.Ep.el.style = this.u.KL;
    this.l.Z(this.Ep);
    this.j = new Nj(null);
    Kj(this.j, this.tn);
    this.j.el.className = "extension_reset_css extension_icon extension_icon-close";
    this.j.el.style = this.u.JL;
    this.l.Z(this.j);
    this.M = new Nj(null);
    this.M.Le("linePropContainer");
    tj(this.M, "static");
    this.M.ja();
    this.ik.Z(this.M);
    this.ya = new Cx(this.M.el);
    this.ya.addEventListener("linePropChange", this.Wb);
    this.ya.setData(this.data);
    this.weight = new rx(this.ik);
    this.weight.addEventListener("weightUpdate", this.ic);
    this.weight.setData(this.data);
    this.opacity = new zm();
    this.ik.Z(this.opacity);
    this.opacity.addEventListener("OpacityUpdate", this.Db);
    this.opacity.setData(this.data);
    this.s = new Nj(null);
    this.s.Le("fillColorContainer");
    tj(this.s, "static");
    this.s.ja();
    this.ik.Z(this.s);
    this.fillColor = new sx("Fill");
    this.s.Z(this.fillColor);
    this.fillColor.addEventListener("selectColorClicked", this.Gb);
    this.N = new jm(this.m);
    this.s.Z(this.N);
    this.N.nr(!1);
    this.N.addEventListener("colorChange", this.Va);
    this.N.addEventListener("extraButtonClick", this.lb);
    this.color = new sx("Stroke");
    this.ik.Z(this.color);
    this.color.addEventListener("selectColorClicked", this.Jb);
    this.color.setData(this.data);
  }
  setData(a) {
    this.data = a;
    this.weight.setData(a);
    this.opacity.setData(a);
    this.color.setData(a);
    this.i.setData(a);
    this.g.setData(a);
    if (this.data.Ni) {
      this.s.pb();
      let b = {};
      b.Xb = this.data.Ei;
      b.qa = this.data.Hd;
      b.Za = this.data.Kf;
      this.fillColor.setData(b);
      this.N.setData(b);
      this.C.setData(b);
    } else {
      this.s.ja();
    }
    null != this.data.Nf ? (this.M.pb(), this.ya.setData(a)) : this.M.ja();
  }
  Kz(a) {
    this.m = a;
    this.g && this.g.Kz(a);
  }
}
;function Fx(a) {
  a.j = {};
  a.j.xd = [1, 2, 3, 5, 7, 10, 12, 16];
  a.j.zb = a.lineWidth;
  a.j.qa = a.strokeStyle;
  a.j.Rb = a.G;
  a.j.Xb = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
  a.j.Hd = a.fillStyle;
  a.j.Ei = " #ffffff #000000 #f41489 #30f0bf #fdfd96 #21aeef".split(" ");
  a.j.Ni = " #ffffff #000000 #f41489 #30f0bf #fdfd96 #21aeef".split(" ");
  a.j.Za = Gx(a, a.strokeStyle);
  a.j.Kf = Hx(a, a.fillStyle);
  a.j.Cc = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
  a.j.Cg = 3;
  a.j.Bg = 1;
}
function Gx(a, b) {
  let c = 6;
  for (let d = 0; d < a.j.Xb.length; d++) {
    if (b == a.j.Xb[d]) {
      c = d;
      break;
    }
  }
  return c;
}
function Hx(a, b) {
  let c = 6;
  for (let d = 0; d < a.j.Ei.length; d++) {
    if (b == a.j.Ei[d]) {
      c = d;
      break;
    }
  }
  return c;
}
function Ix(a) {
  -1 != a.B && (clearTimeout(a.B), a.B = -1);
}
function Jx(a, b) {
  let c = a.l;
  var d = Um(a);
  return b - window.scrollX + d.x + a.m.x / c - a.Jb.x / c;
}
function Kx(a, b) {
  let c = a.l;
  var d = Um(a);
  return b - window.scrollY + d.y + a.m.y / c - a.Jb.y / c;
}
function Lx(a, b, c, d, e, f) {
  if (e <= a && e >= c || e <= c && e >= a) {
    if (f <= b && f >= d || f <= d && f >= b) {
      return !0;
    }
  }
  return !1;
}
class Co extends Wm {
  constructor(a, b, c, d, e, f, k, l) {
    super();
    this.i = a;
    this.lineWidth = d ? d : 30;
    this.strokeStyle = b ? b : "#222222";
    this.fillStyle = c ? c : "";
    this.fm = f ? f : 1;
    this.G = e ? e : 1;
    this.I = {x:0, y:0};
    this.L = {x:0, y:0};
    this.tl = !1;
    this.v;
    this.Gb = [];
    this.globalCompositeOperation = "source-over";
    this.Db = !1;
    this.B = -1;
    this.l = k ? k : 1;
    this.m = l ? l : {x:0, y:0, height:0, width:0};
    this.Jb = {x:0, y:0};
    this.S = -1;
    this.g = null;
    this.ea = !1;
    this.o = null;
    this.Kf = this.Za = 0;
    Fx(this);
  }
  Is() {
    return this.j;
  }
  kl(a) {
    this.S = a;
  }
  Vn(a) {
    this.m = a;
  }
  Xe() {
    return this.m;
  }
  Nn() {
    return this.l;
  }
  Km(a) {
    this.l = a;
  }
  nq(a) {
    this.Jb = a;
  }
  ic() {
    Ix(this);
    if (this.ea) {
      var a = Math.abs(this.I.x - this.L.x), b = Math.abs(this.I.y - this.L.y);
      b < a ? a = b : b = a;
      this.I.x <= this.L.x ? this.I.y <= this.L.y ? (this.L.x = this.I.x + a, this.L.y = this.I.y + b) : (this.L.x = this.I.x + a, this.L.y = this.I.y - b) : this.I.y <= this.L.y ? (this.L.x = this.I.x - a, this.L.y = this.I.y + b) : (this.L.x = this.I.x - a, this.L.y = this.I.y - b);
    }
    this.Db = !1;
    this.i.save();
    this.g && (this.g.width = this.g.width);
    this.Xf(this.i);
    this.i.restore();
  }
  Ft(a, b, c) {
    this.Db = !0;
    this.l = c;
    a = {x:a - this.m.x, y:b - this.m.y};
    this.Cb && (a = Ek(a.x, a.y, this.Cb));
    a.x /= c;
    a.y /= c;
    a.x = Math.round(100 * a.x) / 100;
    a.y = Math.round(100 * a.y) / 100;
    this.I = a;
    this.v = Date.now();
    null == this.g && (this.g = Mx(Ao));
  }
  Ro(a, b, c, d) {
    a = {x:a - this.m.x, y:b - this.m.y};
    this.Cb && (a = Ek(a.x, a.y, this.Cb));
    a.x /= d;
    a.y /= d;
    a.x = Math.round(100 * a.x) / 100;
    a.y = Math.round(100 * a.y) / 100;
    this.L = a;
    this.ea = c;
    -1 == this.B && (this.B = window.setTimeout(this.ic.bind(this), 10));
  }
  Em(a, b, c, d) {
    Ix(this);
    this.g && (this.g.width = this.g.width);
    this.Db ? (this.I.x = 0, this.I.y = 0, this.L.x = 0, this.L.y = 0) : (a = {x:a - this.m.x, y:b - this.m.y}, this.Cb && (a = Ek(a.x, a.y, this.Cb)), a.x /= d, a.y /= d, a.x = Math.round(100 * a.x) / 100, a.y = Math.round(100 * a.y) / 100, this.L = a, this.ea = c, this.ic());
  }
  cb() {
    return "rectangle";
  }
  wm(a) {
    this.o = a;
  }
  ya() {
    var a = this.I.x, b = this.L.x, c = this.I.y, d = this.L.y, e = {};
    e.left = (a < b ? a : b) * this.l;
    e.top = (c < d ? c : d) * this.l;
    e.width = Math.abs(b - a) * this.l;
    e.height = Math.abs(d - c) * this.l;
    e.left = e.left + this.m.x;
    e.top = e.top + this.m.y;
    a = Um(this);
    e.left += a.x;
    e.top += a.y;
    this.o && this.o.Ea && (e.left = e.left - this.m.x, e.top = e.top - this.m.y, a = this.o.Ea.getBoundingClientRect(), b = hl(this.o, yo(this.o, this.S), new il(this.o.scrollX, this.o.scrollY)), e.left = e.left - b.$a + a.left, e.top = e.top - b.Ua + a.top);
    return e;
  }
  getBoundingClientRect() {
    var a = this.I.x, b = this.L.x, c = this.I.y, d = this.L.y, e = {};
    e.left = a < b ? a : b;
    e.top = c < d ? c : d;
    e.width = Math.abs(b - a);
    e.height = Math.abs(d - c);
    e.left += this.m.x;
    e.top += this.m.y;
    return e;
  }
  nt(a) {
    this.tl = a;
  }
  It() {
    return this.tl;
  }
  Ha(a, b) {
    a -= this.m.x;
    b -= this.m.y;
    this.Cb && (b = Ek(a, b, this.Cb), a = b.x, b = b.y);
    var c = this.I.x, d = this.L.x;
    c *= this.l;
    d *= this.l;
    var e = this.Dg();
    e * this.l;
    var f = this.getBoundingClientRect();
    if ("" == this.j.Hd && f.width * this.l - 20 > 2 * e && f.height * this.l - 20 > 2 * e) {
      f = this.getBoundingClientRect();
      f.left = f.left - this.m.x;
      f.top = f.top - this.m.y;
      c = f.left;
      d = f.left + f.width;
      e = f.top;
      f = f.top + f.height;
      var k = this.Dg() * this.l / 2;
      k += 5;
      let l = Lx(c * this.l + k, e * this.l + k, d * this.l - k, f * this.l - k, a, b);
      return Lx(c * this.l - k, e * this.l - k, d * this.l + k, f * this.l + k, a, b) && !l ? !0 : !1;
    }
    c < d ? (c -= e / 2, d += e / 2) : (d -= e / 2, c += e / 2);
    f = this.I.y;
    k = this.L.y;
    f *= this.l;
    k *= this.l;
    f < k ? (f -= e / 2, k += e / 2) : (k -= e / 2, f += e / 2);
    if (a <= c && a >= d || a <= d && a >= c) {
      if (b <= f && b >= k || b <= k && b >= f) {
        return !0;
      }
    }
    return !1;
  }
  dj(a, b) {
    b = (this.I.x < this.L.x ? this.I.x : this.L.x) + b / this.l;
    this.I.x < this.L.x ? this.L.x = b : this.I.x = b;
    (b = Mx(Ao)) && b.getContext("2d").clearRect(0, 0, b.width, b.height);
    this.Xf(a);
  }
  Wg(a, b) {
    b = (this.I.y < this.L.y ? this.I.y : this.L.y) + b / this.l;
    this.I.y < this.L.y ? this.L.y = b : this.I.y = b;
    (b = Mx(Ao)) && b.getContext("2d").clearRect(0, 0, b.width, b.height);
    this.Xf(a);
  }
  Wb(a, b, c) {
    var d = this.getBoundingClientRect();
    b -= this.m.x;
    c -= this.m.y;
    this.I.x += (b - this.I.x) / this.l;
    this.I.y += (c - this.I.y) / this.l;
    this.L.x = this.I.x + d.width;
    this.L.y = this.I.y + d.height;
    null == this.g && (this.g = Mx(Ao));
    this.g && this.g.getContext("2d").clearRect(0, 0, this.g.width, this.g.height);
    this.o && this.o.Ea && (c = yo(this.o, this.S), -1 != c && (b = fl(this.o, Math.min(this.I.y, this.L.y) * this.l + ox(this.o, c)).S, b != c && (b > c ? (c = kl(this.o, c) / this.l, this.I.y -= c + 16, this.L.y -= c + 16) : (c = kl(this.o, b) / this.l, d = Math.abs(this.I.y - this.L.y), this.I.y < this.L.y ? (this.I.y = c + this.I.y + 16, this.L.y = this.I.y + d + 16) : (this.L.y = c + this.L.y + 16, this.I.y = this.L.y + d + 16)), c = hl(this.o, b, new il(this.o.scrollX, this.o.scrollY)), this.m = 
    {x:-c.$a, y:-c.Ua, width:jl(this.o, b), height:kl(this.o, b), scale:this.o.scale}, this.S = ll(this.o, b))));
    this.Xf(a);
  }
  Dd(a, b, c) {
    b = (this.I.x < this.L.x ? this.I.x : this.L.x) + b / this.l;
    this.I.x < this.L.x ? this.L.x = b : this.I.x = b;
    c = (this.I.y < this.L.y ? this.I.y : this.L.y) + c / this.l;
    this.I.y < this.L.y ? this.L.y = c : this.I.y = c;
    null == this.g && (this.g = Mx(Ao));
    this.g && this.g.getContext("2d").clearRect(0, 0, this.g.width, this.g.height);
    this.Xf(a);
  }
  Xf(a) {
    var b = this.l;
    a.save();
    var c = Vm(this);
    c && (a.beginPath(), a.rect(c.x, c.y, c.width, c.height), a.clip(), a.beginPath());
    a.scale(b, b);
    var d = this.I, e = this.L;
    if (1 > this.j.Rb) {
      a.globalCompositeOperation = "destination-out";
      a.lineJoin = "round";
      a.lineCap = "round";
      a.lineWidth = this.j.zb;
      a.strokeStyle = "rgba(0, 0, 0,1)";
      a.beginPath();
      b = Math.min(d.x, e.x);
      c = Math.min(d.y, e.y);
      var f = Math.abs(d.x - e.x);
      d = Math.abs(d.y - e.y);
      e = !1;
      15 > Math.abs(f - d) && (this.i == a && (e = !0), d > f ? d = f : f = d);
      a.strokeStyle = jh(this.j.qa, this.j.Rb);
      a.rect(Jx(this, b), Kx(this, c), f, d);
      a.stroke();
      a.globalCompositeOperation = "source-over";
      "" != this.j.Hd && (a.fillStyle = "" != this.j.Hd ? jh(this.j.Hd, this.j.Rb) : "", a.fill());
      a.stroke();
      a.closePath();
      e && (a.beginPath(), a.strokeStyle = "rgba( 26, 115, 232, 1)", a.lineWidth = 2, a.rect(Jx(this, b) - this.j.zb / 2, Kx(this, c) - this.j.zb / 2, f + this.j.zb, d + this.j.zb), a.stroke(), a.closePath());
    } else {
      a.globalCompositeOperation = "source-over", a.lineJoin = "round", a.lineCap = "round", a.lineWidth = this.j.zb, a.strokeStyle = jh(this.j.qa, this.j.Rb), a.beginPath(), b = Math.min(d.x, e.x), c = Math.min(d.y, e.y), f = Math.abs(d.x - e.x), d = Math.abs(d.y - e.y), e = !1, 15 > Math.abs(f - d) && (this.i == a && (e = !0), d > f ? d = f : f = d), a.rect(Jx(this, b), Kx(this, c), f, d), "" != this.j.Hd && (a.fillStyle = "" != this.j.Hd ? jh(this.j.Hd, this.j.Rb) : "", a.fill()), a.stroke(), 
      a.closePath(), e && (a.beginPath(), a.strokeStyle = "rgba( 26, 115, 232, 1)", a.lineWidth = 2, a.rect(Jx(this, b) - this.j.zb / 2, Kx(this, c) - this.j.zb / 2, f + this.j.zb, d + this.j.zb), a.stroke(), a.closePath());
    }
    a.restore();
  }
  Dg() {
    return this.j.zb;
  }
  Na() {
    var a = super.Na();
    this.Fb(a);
    return a;
  }
  Fa(a) {
    super.Fa(a);
    "arrDrawingPts" in a && (this.Gb = a.arrDrawingPts);
    "strStrokeStyle" in a && (this.strokeStyle = a.strStrokeStyle);
    this.l = a.uGlobalScale ? a.uGlobalScale : 1;
    this.m = a.offsetPoint ? a.offsetPoint : {x:0, y:0, height:0, width:0};
    "startPoint" in a && (null != a.startPoint.X && null != a.startPoint.Y ? (this.I.x = a.startPoint.X, this.I.y = a.startPoint.Y) : this.I = a.startPoint);
    "endPoint" in a && (null != a.endPoint.X && null != a.endPoint.Y ? (this.L.x = a.endPoint.X, this.L.y = a.endPoint.Y) : this.L = a.endPoint);
    "fillStyle" in a && (this.fillStyle = a.fillStyle);
    "fillAlpha" in a && (this.fm = a.fillAlpha);
    "strlineWidth" in a && (this.lineWidth = a.strlineWidth);
    "strStrokeAlpha" in a && (this.G = a.strStrokeAlpha);
    "pageIndex" in a && (this.S = a.pageIndex);
    this.Za = "currColorIndex" in a ? a.currColorIndex : Gx(this, this.strokeStyle);
    this.Kf = "currFillColorIndex" in a ? a.currFillColorIndex : Hx(this, this.fillStyle);
    Fx(this);
  }
  Fb(a) {
    a.strElement = this.cb();
    a.arrDrawingPts = this.Gb;
    a.strStrokeStyle = this.j.qa;
    a.strlineWidth = this.j.zb;
    a.strStrokeAlpha = this.j.Rb;
    a.currColorIndex = this.j.Za;
    a.currFillColorIndex = this.j.Kf;
    a.uGlobalScale = this.l;
    a.offsetPoint = this.m;
    a.startPoint = this.I;
    a.endPoint = this.L;
    a.fillStyle = this.j.Hd;
    a.fillAlpha = this.fm;
    a.pageIndex = this.S;
  }
  Ul(a) {
    a.strElement = this.cb();
    a.strStrokeStyle = this.j.qa;
    a.strlineWidth = this.j.zb;
    a.strStrokeAlpha = this.j.Rb;
    a.currColorIndex = this.j.Za;
    a.currFillColorIndex = this.j.Kf;
    a.fillStyle = this.j.Hd;
    a.fillAlpha = this.fm;
  }
  Ad(a) {
    super.Ad(a);
    "strStrokeStyle" in a && (this.strokeStyle = a.strStrokeStyle);
    "strlineWidth" in a && (this.lineWidth = a.strlineWidth);
    "strStrokeAlpha" in a && (this.G = a.strStrokeAlpha);
    "currColorIndex" in a && (this.Za = a.currColorIndex);
    "currFillColorIndex" in a && (this.Kf = a.currFillColorIndex);
    "fillStyle" in a && (this.fillStyle = a.fillStyle);
    "fillAlpha" in a && (this.fm = a.fillAlpha);
    this.j && (this.j.zb = this.lineWidth, this.j.qa = this.strokeStyle, this.j.Rb = this.G, this.j.Hd = this.fillStyle, this.j.Za = Gx(this, this.strokeStyle), this.j.Kf = Hx(this, this.fillStyle));
  }
}
;var Ko = function() {
  function a(r) {
    fc() && r.stopPropagation();
  }
  function b(r, z) {
    null != r && (r = uu(r, z)) && su(r, z);
  }
  function c(r) {
    null != r && (r = uu(r)) && ru(r);
  }
  function d(r) {
    r = tu(r);
    for (var z = 0; z < r.length; z++) {
      Fs(r[z]) && (-1 != yo(y, r[z].S) && Ia ? l(r[z], !0) : l(r[z], !1));
    }
  }
  function e() {
    yc();
    da = null;
    N && (N.style.display = "none", N.removeEventListener("pointerdown", X, {capture:!0, passive:!1}));
    var r = S;
    r.i && r.i.Tr();
    r.Ya && r.Ya.Tr();
    r.La && r.La.Tr();
  }
  function f() {
    Ia = !1;
    yc();
    let r = tu();
    for (var z = r.length - 1; 0 <= z; z--) {
      if (Fs(r[z])) {
        var C = r[z].la();
        C && (C.parentElement.className += " annotate-mathtext-hide");
      }
    }
  }
  function k() {
    if (!si() || Vk(P)) {
      Ia = !0;
      var r = tu();
      for (let z = r.length - 1; 0 <= z; z--) {
        if (Fs(r[z])) {
          let C = null;
          r[z].la() && (C = r[z].la().parentElement);
          C && -1 != C.className.search("annotate-mathtext-hide") && (C.className = C.className.split("annotate-mathtext-hide").join(""));
        }
      }
      si() && d(S.g);
    }
  }
  function l(r, z) {
    if (z && si() && !Vk(P)) {
      l(r, !1);
    } else {
      if (r && r.la() && Fs(r)) {
        let C = null;
        r && (C = r.la().parentElement);
        C && (z ? C.className.includes("annotate-mathtext-hide") && (C.className = C.className.split("annotate-mathtext-hide").join("")) : C.className += " annotate-mathtext-hide");
      }
    }
  }
  function n(r) {
    r.preventDefault();
  }
  function p(r) {
    r.currentTarget === r.target && (window.addEventListener("touchmove", n, {capture:!0, passive:!1}), window.addEventListener("pointermove", x, {capture:!0, passive:!1}), window.addEventListener("pointerup", t, {capture:!0, passive:!1}), Ua = r.clientX, $a = r.clientY);
  }
  function t() {
    window.removeEventListener("touchmove", n, {capture:!0});
    window.removeEventListener("pointermove", x, {capture:!0});
    window.removeEventListener("pointerup", t, {capture:!0});
    da && da.la() && wg(da.la());
  }
  function x(r) {
    if (kh(r)) {
      if (r.preventDefault(), da) {
        var z = r.clientX - Ua, C = r.clientY - $a, J = da.la(), T = parseFloat(J.parentElement.style.left.slice(0, -2)) + z, ba = parseFloat(J.parentElement.style.top.slice(0, -2)) + C;
        z = parseFloat(N.style.left.slice(0, -2)) + z;
        C = parseFloat(N.style.top.slice(0, -2)) + C;
        var ea = Math.ceil(J.parentElement.getBoundingClientRect().width), ka = Math.ceil(J.parentElement.getBoundingClientRect().height), oa = document.body.scrollWidth, bb = document.body.scrollHeight;
        0 == bb && (bb = window.innerHeight);
        0 == oa && (oa = window.innerWidth);
        var zb = parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-left")), Za = parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-top"));
        y && y.Ea && (oa = Nx(y), bb = Ox(y), Za = zb = 0);
        0 <= T && T <= oa - zb - ea && (J.parentElement.style.left = T + "px", N.style.left = z + "px", Ua = r.clientX);
        0 <= ba && ba <= bb - Za - ka && (J.parentElement.style.top = ba + "px", N.style.top = C + "px", $a = r.clientY);
      }
    } else {
      t();
    }
  }
  function D(r, z, C, J) {
    C = document.createElement("div");
    var T = "annotate-mathtext-container";
    -1 != window.location.href.indexOf("bing.com") && (T = "b_ " + T);
    C.className = "extension_reset_css " + T;
    C.style.width = "max-content";
    C.style.height = J + "px";
    C.style.position = "absolute";
    C.style.top = z + "px";
    C.style.left = r + "px";
    C.style.border = "1px solid black";
    C.style.zIndex = sd;
    C.style.padding = "10px";
    C.style.cursor = "all-scroll";
    C.style.boxSizing = "content-box";
    C.style.pointerEvents = "auto";
    C.addEventListener("pointerdown", p, {capture:!0, passive:!1});
    ik(C);
    return C;
  }
  function G(r, z, C, J, T, ba, ea, ka, oa) {
    var bb = document.createElement("div");
    bb.className = z;
    bb.style.paddingBottom = "10px";
    bb.style.boxSizing = "border-box";
    bb.style.height = "auto";
    bb.style.minHeight = r + "px";
    bb.style.outline = "0px solid transparent";
    bb.style.overflowWrap = "break-word";
    bb.spellcheck = !1;
    bb.style.fontSize = C + "px";
    bb.style.fontFamily = J;
    bb.style.color = T;
    bb.style.backgroundColor = ba;
    bb.style.lineHeight = "1em";
    bb.style.fontWeight = "normal";
    ea && (bb.style.fontWeight = "bold");
    ka && (bb.style.fontStyle = "italic");
    oa && (bb.style.textDecoration = "underline");
    return bb;
  }
  function I(r) {
    r.stopPropagation();
  }
  function Q(r) {
    if (r) {
      r.focus();
      var z = document.createRange();
      z.selectNodeContents(r);
      z.collapse(!1);
      r = window.getSelection();
      r.removeAllRanges();
      r.addRange(z);
    }
  }
  function X(r) {
    window.addEventListener("touchmove", n, {capture:!0, passive:!1});
    window.addEventListener("pointermove", La, {capture:!0, passive:!1});
    window.addEventListener("pointerup", Fa, {capture:!0, passive:!1});
    Ua = r.clientX;
    $a = r.clientY;
    N.style.display = "none";
    da.la().parentElement.style.cursor = "";
    da.la().style.minHeight = da.la().parentElement.style.height;
  }
  function Fa() {
    window.removeEventListener("pointermove", La, {capture:!0});
    window.removeEventListener("pointerup", Fa, {capture:!0});
    N.style.display = "block";
    da.la().parentElement.style.cursor = "all-scroll";
    Q(da);
  }
  function La(r) {
    if (kh(r)) {
      r.preventDefault();
      var z = 1;
      if (void 0 !== da) {
        var C = da.A;
        z = C && C.scale ? C.scale : 1;
      }
      C = r.clientX - Ua;
      z = da.la().parentElement.clientWidth + C / z;
      C = parseFloat(N.style.left.slice(0, -2)) + C;
      0 <= z && C < window.innerWidth + window.scrollX - N.offsetWidth && (da.la().parentElement.style.width = z + "px", N.style.left = C + "px", Ua = r.clientX);
    } else {
      Fa();
    }
  }
  function Aa(r) {
    if (da) {
      var z = r.target;
      for (-1 != z.className.indexOf("annotate-mathtext-container") && (z = z.children[0]); null != z && -1 == z.className.indexOf("annotate-mathtext ");) {
        z = z.parentElement;
      }
      if (z != da.la()) {
        Ha();
        return;
      }
    }
    r.preventDefault();
    gd = !1;
    Cb(r, !0);
  }
  function Ha() {
    null != Dc && Dc.jv(!0);
    document.removeEventListener("keydown", a, {capture:!0});
    if (da) {
      var r = da.la();
      let C = 0 == r.innerText.trim().length;
      Vg.unobserve(r);
      r.parentElement.style.border = "1px solid transparent";
      r.parentElement.style.cursor = "";
      r.style.cursor = "";
      r.style.height = "";
      r.style.minHeight = "";
      r.style.backgroundColor = "";
      r.parentElement.style.backgroundColor = ib;
      r.parentElement.style.borderRadius = "5px";
      r.contentEditable = "false";
      C ? r.parentElement.remove() : (0 == aa(r) && r.parentElement.remove(), r.parentElement.style.height = r.clientHeight + "px");
      N && (N.style.display = "none", N.removeEventListener("pointerdown", X, {capture:!0, passive:!1}));
      var z = 1;
      $c && !$c.scale ? $c.scale = 1 : $c && (z = $c.scale);
      r.parentElement.style.transformOrigin = "left top";
      r.parentElement.style.transform = "scale(" + z + ")";
      r.parentElement.removeEventListener("pointerdown", p, {capture:!0});
      r.removeEventListener("pointerdown", I, {capture:!0});
      z = gc(r);
      C ? void 0 !== z && (r = [da.Na()], 0 < r.length && Px({action:Qx, ub:Rx, F:r}, !0), c(da.ta)) : void 0 === z ? (da.Rk = Dc, Sx(da, r, Tx, $c, Sb), zu(da), Px({action:Ux, ub:Rx, F:[{nId:da.ta}]}, !0)) : (z.A = Object.assign({}, $c), z.S = Sb, Md && (Sx(z, r, Tx, null, null), Au(da), r = da.Na(), Md.data == r.data && Md.fontColor == r.fontColor && Md.fillColor == r.fillColor && Md.bBold == r.bBold && Md.bItalic == r.bItalic && Md.bUnderline == r.bUnderline && Md.fontSize == r.fontSize && Md.fontFamily == 
      r.fontFamily && Md.top == r.top && Md.left == r.left && Md.height == r.height && Md.width == r.width || Px({action:Vx, ub:Rx, F:[Md]}, !0), Md = null));
      da = null;
      Sb = -1;
    }
    yc();
  }
  function aa(r) {
    var z = document.createElement("canvas").getContext("2d"), C = "";
    Od && (C += "italic ");
    Xd && (C += "bold ");
    C += ub + "px " + hc;
    z.font = C;
    C = 0;
    r = r.childNodes;
    for (var J = 0; J < r.length; J++) {
      var T = r[J];
      T = 3 == T.nodeType ? T.nodeValue : ya(T);
      T = z.measureText(T);
      T.width > C && (C = T.width);
    }
    return Math.ceil(C);
  }
  function ya(r) {
    if (3 == r.nodeType) {
      return r.nodeValue;
    }
    var z = "";
    r = r.childNodes;
    for (var C = 0; C < r.length; C++) {
      z += ya(r[C]);
    }
    return z;
  }
  function fc() {
    return da && da.la() ? !0 : !1;
  }
  function ed(r) {
    td = r;
    var z = Cg;
    r && (z = sd);
    r = z;
    z = tu();
    for (var C = z.length - 1; 0 <= C; C--) {
      if (Fs(z[C])) {
        var J = z[C].la();
        J && (J.parentElement.style.zIndex = r);
      }
    }
  }
  function Bc() {
    F = hk({parent:document.body, id:"annotate-mathtool-edit-toolbar", style:{position:"absolute", backgroundColor:"rgb(255,255,255)", zIndex:"2147483641", padding:"4px", border:"1px solid #c0c0c0", display:"none", fontSize:0, fontWeight:"normal", "box-sizing":"border-box", width:"100px"}, buttons:[{id:"annotate-mathtext-edit", title:"Edit", className:"extension_icon extension_icon-edit", style:{height:"24px", width:"24px", "float":"left", boxSizing:"border-box", position:"relative", color:"#000000"}, 
    Qa:function() {
      if (O) {
        var r = O;
        yc();
        if (r && r.la()) {
          Md = r.Na();
          var z = r.la();
          r.Rk && (Dc = r.Rk, Dc.jv(!1));
          r && ($c = r.A, Sb = r.S);
          z.style.height = "auto";
          z.style.cursor = "text";
          z.style.minHeight = z.parentElement.style.height.slice(0, -2) + "px";
          z.parentElement.style.cursor = "all-scroll";
          z.parentElement.style.border = "1px solid black";
          z.style.backgroundColor = z.parentElement.style.backgroundColor;
          z.parentElement.style.backgroundColor = "";
          z.parentElement.style.borderRadius = "";
          Q(z);
          Dc.Oh();
          da = r;
          z.parentElement.addEventListener("pointerdown", p, {capture:!0, passive:!1});
          z.addEventListener("pointerdown", I, {capture:!0, passive:!1});
          Vg.observe(z);
          var C = r = 0;
          y && y.Ea && (C = y.Ea.getBoundingClientRect(), r = -C.left + y.scrollX, C = -C.top + y.scrollY);
          N.style.display = "none";
          N.style.left = z.parentElement.offsetLeft - r + z.parentElement.getBoundingClientRect().width - 12 + "px";
          N.style.top = z.parentElement.offsetTop - C + z.parentElement.getBoundingClientRect().height / 2 - 12 + "px";
          N.addEventListener("pointerdown", X, {capture:!0, passive:!1});
          oc = bh(z.style.color);
          ib = "" == z.style.backgroundColor ? "" : bh(z.style.backgroundColor);
          Xd = "bold" == z.style.fontWeight;
          Od = "italic" == z.style.fontStyle;
          Yd = "underline" == z.style.textDecoration;
          ub = parseInt(z.style.fontSize.slice(0, -2)) + "";
          hc = z.style.fontFamily;
          Kc && Kc(Xd, Od, Yd, oc, ib, ub, hc, !0);
          ic && ic();
          Dh = !0;
        }
      }
    }}, {id:"annotate-mathtext-sep", style:{height:"24px", width:"1px", "float":"left", backgroundColor:"#c0c0c0", marginLeft:"4px", boxSizing:"border-box"}}, {id:"annotate-mathtext-delete", title:"Delete", className:"extension_icon extension_icon-delete", style:{height:"24px", width:"24px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", color:"#000000"}, Qa:function() {
      if (O) {
        var r = [O.Na()];
        0 < r.length && Px({action:Qx, ub:Rx, F:r}, !0);
        c(O.ta);
        yc();
      }
    }}, {id:"annotate-mathtext-sep", style:{height:"24px", width:"1px", "float":"left", backgroundColor:"#c0c0c0", marginLeft:"4px", boxSizing:"border-box"}}, {id:"annotate-mathtext-close", title:"Close", className:"extension_icon extension_icon-close", style:{height:"24px", width:"24px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", color:"#000000"}, Qa:Kb}]});
  }
  function Kb() {
    gd = !0;
    yc();
  }
  function Cb(r, z) {
    if (td && !da && !gd) {
      var C = 1000;
      z && (C = 0);
      var J = r.target;
      -1 != Gi && (clearTimeout(Gi), Gi = -1);
      -1 != ai && (clearTimeout(ai), ai = -1);
      ai = setTimeout(function() {
        if (!(da || O && J.className == O.la().className)) {
          let T = J;
          for (-1 != T.className.indexOf("annotate-mathtext-container") && (T = T.children[0]); null != T && -1 == T.className.indexOf("annotate-mathtext ");) {
            T = T.parentElement;
          }
          T && (O = gc(T)) && O.la() && (z && Xe(), r.preventDefault());
        }
      }, C);
    }
  }
  function Xe() {
    var r = O.la();
    H.style.display = "block";
    H.style.border = "1px dashed #ff0000";
    H.style.zIndex = parseInt(sd) + 1 + "";
    H.style.cursor = "all-scroll";
    H.style.height = r.parentElement.getBoundingClientRect().height + 30 + "px";
    H.style.width = r.parentElement.getBoundingClientRect().width + 30 + "px";
    let z = r.parentElement.offsetTop, C = r.parentElement.offsetLeft;
    if (O && y && y.Bb && y.Bb.contains(r.parentElement)) {
      let J = y.Ea.getBoundingClientRect();
      C += J.left - y.scrollX;
      z += J.top - y.scrollY;
    }
    H.style.top = z - 15 + "px";
    H.style.left = C - 15 + "px";
    F.style.display = "block";
    H.offsetTop - 10 - F.offsetHeight >= window.scrollY ? (F.style.top = H.offsetTop - 10 - F.offsetHeight + "px", F.style.left = H.offsetLeft + H.offsetWidth / 2 - F.offsetWidth / 2 + "px") : H.offsetTop + H.offsetHeight + 10 + F.offsetHeight <= window.scrollY + window.innerHeight ? (F.style.top = H.offsetTop + H.offsetHeight + 10 + "px", F.style.left = H.offsetLeft + H.offsetWidth / 2 - F.offsetWidth / 2 + "px") : H.offsetLeft - 10 - F.offsetWidth >= window.scrollX ? (F.style.top = H.offsetTop + 
    H.offsetHeight / 2 - F.offsetHeight / 2 + "px", F.style.left = H.offsetLeft - F.offsetWidth - 10 + "px") : H.offsetLeft + H.offsetWidth + 15 + F.offsetWidth <= window.scrollX + window.visualViewport.offsetLeft + window.innerWidth ? (F.style.top = H.offsetTop + H.offsetHeight / 2 - F.offsetHeight / 2 + "px", F.style.left = H.offsetLeft + H.offsetWidth + 15 + "px") : (F.style.top = H.offsetTop + 25 + "px", F.style.left = H.offsetLeft + 25 + "px");
    N.style.display = "none";
    N.style.left = Math.floor(H.offsetLeft + H.offsetWidth - 12) + "px";
    N.style.top = Math.floor(H.offsetTop + H.offsetHeight / 2 - 12) + "px";
    N.addEventListener("pointerdown", mf, {capture:!0, passive:!1});
    fa.style.display = "block";
    fa.style.left = Math.floor(H.offsetLeft + H.offsetWidth - 12) + "px";
    fa.style.top = Math.floor(H.offsetTop + H.offsetHeight - 12) + "px";
    oc = bh(r.style.color);
    ib = "" == r.parentElement.style.backgroundColor ? "" : bh(r.parentElement.style.backgroundColor);
    Xd = "bold" == r.style.fontWeight;
    Od = "italic" == r.style.fontStyle;
    Yd = "underline" == r.style.textDecoration;
    ub = parseInt(r.style.fontSize.slice(0, -2)) + "";
    hc = r.style.fontFamily;
    Kc && Kc(Xd, Od, Yd, oc, ib, ub, hc, !0);
  }
  function yc() {
    H && (H.style.display = "none");
    N && (N.style.display = "none", N.removeEventListener("pointerdown", mf, {capture:!0, passive:!1}));
    fa && (fa.style.display = "none");
    O = null;
    F && (F.style.display = "none");
  }
  function wh(r) {
    null != O && (window.addEventListener("touchmove", n, {capture:!0, passive:!1}), window.addEventListener("pointermove", Uf, {capture:!0, passive:!1}), window.addEventListener("pointerup", Ue, {capture:!0, passive:!1}), Ua = r.clientX, $a = r.clientY, r = [O.Na()], 0 < r.length && Px({action:Vx, ub:Rx, F:r}, !0));
    N.style.display = "none";
    N.removeEventListener("pointerdown", mf, {capture:!0, passive:!1});
    fa.style.display = "none";
    F.style.display = "none";
    H.style.border = "0px";
  }
  function wg(r) {
    if (y && y.Ea) {
      y.Ea.getBoundingClientRect();
      let J = gc(r);
      var z = Sb;
      J && (z = yo(y, J.S), $c = J.A);
      if (-1 != z) {
        var C = fl(y, parseFloat(r.parentElement.style.top.slice(0, -2)) - $c.y + ox(y, z)).S;
        C != z && (z = hl(y, C, new il(y.scrollX, y.scrollY)), $c = {x:-z.$a + y.scrollX, y:-z.Ua + y.scrollY, width:jl(y, C), height:kl(y, C), scale:y.scale}, Sb = ll(y, C), y && y.Ea && !y.Bb.contains(r.parentElement) && y.Bb.appendChild(r.parentElement), J && (J.S = ll(y, C), J.A = $c));
      }
    }
  }
  function Ue() {
    window.removeEventListener("touchmove", n, {capture:!0});
    window.removeEventListener("pointermove", Uf, {capture:!0});
    window.removeEventListener("pointerup", Ue, {capture:!0});
    O && O.la() && (wg(O.la()), Xe(), Wx(O), Au(O));
    Dh = !0;
  }
  function Uf(r) {
    if (kh(r)) {
      r.preventDefault();
      var z = r.clientX - Ua, C = r.clientY - $a, J = parseFloat(H.style.left.slice(0, -2)) + z, T = parseFloat(H.style.top.slice(0, -2)) + C, ba = O.la(), ea = 0, ka = 0, oa = document.body.scrollWidth, bb = document.body.scrollHeight;
      0 == bb && (bb = window.innerHeight);
      0 == oa && (oa = window.innerWidth);
      var zb = parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-left")), Za = parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-top")), Xb = 0, Uc = 0;
      y && y.Ea && O && (ea = y.scrollX, ka = y.scrollY, Uc = y.Ea.getBoundingClientRect(), oa = Nx(y), bb = Ox(y), Za = zb = 0, Xb = Uc.left, Uc = Uc.top);
      J - Xb >= -ea - zb - 15 && J - Xb <= oa - ea - H.offsetWidth + 15 && (Ql.Ja() && to(), H.style.left = J + "px", ba.parentElement.style.left = parseFloat(ba.parentElement.style.left.slice(0, -2)) + z + "px", Ua = r.clientX);
      T - Uc >= -ka - Za - 15 && T - Uc <= bb - ka - H.offsetHeight + 15 && (Ql.Ja() && to(), H.style.top = T + "px", ba.parentElement.style.top = parseFloat(ba.parentElement.style.top.slice(0, -2)) + C + "px", $a = r.clientY);
    } else {
      Ue();
    }
  }
  function Th(r) {
    window.addEventListener("touchmove", n, {capture:!0, passive:!1});
    window.addEventListener("pointermove", xh, {capture:!0, passive:!1});
    window.addEventListener("pointerup", We, {capture:!0, passive:!1});
    Ua = r.clientX;
    $a = r.clientY;
    r = [O.Na()];
    0 < r.length && Px({action:Vx, ub:Rx, F:r}, !0);
    r = O.la();
    Wg = r.parentElement.clientWidth;
    ge = parseFloat(r.parentElement.style.height.slice(0, -2));
    Ae = parseInt(r.style.fontSize);
    H.style.display = "none";
    fa.style.display = "none";
    N.style.display = "none";
    F.style.display = "none";
  }
  function We() {
    window.removeEventListener("touchmove", n, {capture:!0});
    window.removeEventListener("pointermove", xh, {capture:!0});
    window.removeEventListener("pointerup", We, {capture:!0});
    var r = O.la(), z = parseFloat(r.parentElement.style.width.slice(0, -2)), C = aa(r) + 15;
    r.parentElement.style.width = z > C ? C + "px" : z + "px";
    r.parentElement.style.height = r.clientHeight + "px";
    Xe();
    Wx(O);
    Au(O);
    Dh = !0;
  }
  function xh(r) {
    if (kh(r)) {
      r.preventDefault();
      var z = O.la(), C = r.clientY - $a;
      r = Math.max((Wg + (r.clientX - Ua)) / Wg, (ge + C) / ge);
      C = Math.floor(r * Ae);
      if (!(8 > C || 99 < C)) {
        C = ge * r - ge;
        var J = 1;
        void 0 !== O && (J = (J = O.A) && J.scale ? J.scale : 1);
        C = ge + C / J;
        z.parentElement.style.width = "max-content";
        z.parentElement.style.height = C + "px";
        ub = Math.floor(Ae * r) + "";
        z.style.fontSize = ub + "px";
        Ql.Ja() && to();
      }
    } else {
      We();
    }
  }
  function mf(r) {
    window.addEventListener("touchmove", n, {capture:!0, passive:!1});
    window.addEventListener("pointermove", wc, {capture:!0, passive:!1});
    window.addEventListener("pointerup", xg, {capture:!0, passive:!1});
    Ua = r.clientX;
    $a = r.clientY;
    r = [O.Na()];
    0 < r.length && Px({action:Vx, ub:Rx, F:r}, !0);
    H.style.border = "2px solid black";
    H.style.zIndex = parseInt(sd) + 1 + "";
    H.style.cursor = "";
    fa.style.display = "none";
    N.style.display = "none";
    F.style.display = "none";
  }
  function xg() {
    window.removeEventListener("touchmove", n, {capture:!0});
    window.removeEventListener("pointermove", wc, {capture:!0});
    window.removeEventListener("pointerup", xg, {capture:!0});
    var r = parseFloat(H.style.width.slice(0, -2)) - 30, z = O.la(), C = aa(z) + 15;
    z.parentElement.style.width = r > C ? C + "px" : r + "px";
    z.parentElement.style.height = z.clientHeight + "px";
    Xe();
    Wx(O);
    Au(O);
    Dh = !0;
  }
  function wc(r) {
    if (kh(r)) {
      r.preventDefault();
      var z = r.clientX - Ua, C = parseFloat(H.style.width.slice(0, -2)) + z;
      z = parseFloat(N.style.left.slice(0, -2)) + z;
      z < window.innerWidth + window.scrollX - N.offsetWidth && (H.style.width = C + "px", N.style.left = z + "px", Ua = r.clientX);
    } else {
      xg();
    }
  }
  function ia(r) {
    if ($c && r.la() && Fs(r)) {
      let C = 1;
      r.A || (r.A = {x:0, y:0, height:0, width:0, scale:1});
      r.A.width && (C = $c.width / r.A.width);
      r.A.scale || (r.A.scale = 1);
      var z = (parseFloat(r.la().parentElement.style.top.slice(0, -2)) - r.A.y) * C + $c.y;
      r.la().parentElement.style.left = (parseFloat(r.la().parentElement.style.left.slice(0, -2)) - r.A.x) * C + $c.x + "px";
      r.la().parentElement.style.top = z + "px";
      r.la().parentElement.style.transformOrigin = "left top";
      r.la().parentElement.style.transform = "scale(" + C * r.A.scale + ")";
      r.A.x = $c.x;
      r.A.y = $c.y;
      r.A.width = $c.width;
      r.A.height = $c.height;
      r.A.scale *= C;
    }
  }
  function gb(r) {
    y = r;
    Ha();
    r.Ea && Ia ? k() : f();
    if (r.Ea) {
      if (2 == S.g) {
        for (var z = vu(), C = 0; C < z.length; C++) {
          xa(z[C], r);
        }
        z = xu();
        for (C = 0; C < z.length; C++) {
          xa(z[C], r);
        }
      } else if (3 == S.g) {
        z = vu();
        for (C = 0; C < z.length; C++) {
          xa(z[C], r);
        }
        z = wu();
        for (C = 0; C < z.length; C++) {
          xa(z[C], r);
        }
      }
      z = tu();
      for (C = 0; C < z.length; C++) {
        xa(z[C], r);
      }
      d(S.g);
    }
  }
  function xa(r, z) {
    if (r.la() && Fs(r)) {
      var C = yo(z, r.S);
      if (-1 != C) {
        var J = hl(z, C, new il(z.scrollX, z.scrollY));
        z = {x:-J.$a + z.scrollX, y:-J.Ua + z.scrollY, width:jl(z, C), height:kl(z, C), scale:z.scale};
        J = z.scale / r.A.scale;
        C = parseFloat(r.la().parentElement.style.left.slice(0, -2));
        var T = parseFloat(r.la().parentElement.style.top.slice(0, -2));
        y && y.Ea && r.la().offsetParent && !y.Bb.contains(r.la().parentElement) && y.Bb.appendChild(r.la().parentElement);
        T = (T - r.A.y) * J + z.y;
        r.la().parentElement.style.left = (C - r.A.x) * J + z.x + "px";
        r.la().parentElement.style.top = T + "px";
        r.la().parentElement.style.transformOrigin = "left top";
        r.la().parentElement.style.transform = "scale(" + J * r.A.scale + ")";
        r.A.x = z.x;
        r.A.y = z.y;
        r.A.width = z.width;
        r.A.height = z.height;
        r.A.scale = z.scale;
      }
    }
  }
  function fd(r, z) {
    var C = !1;
    Ia || (k(), C = !0);
    var J = [];
    for (let ea = 0; ea < r.length; ea++) {
      if (Fs(r[ea])) {
        Sx(r[ea], r[ea].la(), Tx, null, null);
        let ka = r[ea].Na();
        var T = ka;
        var ba = (ba = gc(r[ea].la())) && ba.Rk ? ba.Rk.tG() : null;
        T.renderData = ba;
        z && (ka.uDocType = z);
        J.push(ka);
      }
    }
    C && f();
    return J;
  }
  function qd(r) {
    var z = [], C = tu();
    for (let J = 0; J < C.length; J++) {
      Fs(C[J]) && r && r == C[J].ta && z.push(C[J].Na());
    }
    return z;
  }
  function Ld(r) {
    for (var z = 0; z < r.length; z++) {
      if (null == r[z].type) {
        continue;
      } else if (null != r[z].type && "textTool" == r[z].type) {
        continue;
      }
      let C = fe(r[z]);
      zu(C);
    }
  }
  function fe(r) {
    if (!r || null == r.type || null != r.type && "textTool" == r.type) {
      return null;
    }
    var z = {};
    r.pageInfo && (z = JSON.parse(r.pageInfo));
    z && ("scale" in z || (z.scale = 1));
    r.pageInfo = JSON.stringify(z);
    z = new Xx(Tx);
    z.Fa(r);
    return z;
  }
  function gc(r) {
    return tu().find(z => z.la() == r);
  }
  function qe(r, z) {
    var C = null;
    let J = r.fillColor;
    if (!r.la()) {
      C = r.A.scale;
      var T = r.g, ba = r.i, ea = r.j, ka = r.l, oa = r.fillColor, bb = r.fontSize, zb = r.fontFamily, Za = r.width * C, Xb = r.height * C, Uc = r.left, ad = r.top;
      var xc = r.data;
      T = G(Xb / C, r.Qe, bb, zb, ka, oa, T, ba, ea);
      xc = new Yl(T, xc, !1);
      xc.jv(!1);
      r.Rk = xc;
      xc = document.body;
      y && y.Ea && (xc = y.Bb);
      r.Cb && (ba = Um(r), Uc += ba.x, ad += ba.y);
      Za = D(Uc + 0, ad + 0, Za / C, Xb / C);
      Za.style.transformOrigin = "left top";
      Za.style.transform = "scale(" + C + ")";
      Za.style.backgroundColor = oa;
      Za.appendChild(T);
      xc.appendChild(Za);
      Za.addEventListener("click", Aa, {capture:!0, passive:!1});
      T.addEventListener("click", Aa, {capture:!0, passive:!1});
      C = T;
      r.R = C;
    } else if (r.m) {
      C = r.A.scale;
      ka = r.g;
      ba = r.i;
      ad = r.j;
      bb = r.l;
      zb = r.fillColor;
      T = r.fontSize;
      ea = r.fontFamily;
      oa = r.height * C;
      Uc = r.left;
      Xb = r.top;
      r.Cb && (Za = Um(r), Uc += Za.x, Xb += Za.y);
      xc = r.data;
      if (Za = r.la()) {
        Za.style.minHeight = oa / C + "px", Za.style.fontSize = T + "px", Za.style.fontFamily = ea, Za.style.color = bb, Za.style.backgroundColor = zb, Za.style.fontWeight = ka ? "bold" : "normal", Za.style.fontStyle = ba ? "italic" : "normal", Za.style.textDecoration = ad ? "underline" : "none";
      }
      r.Rk.zN(xc);
      if (ad = Za.parentElement) {
        ad.style.height = oa / C + "px", ad.style.top = Xb + "px", ad.style.left = Uc + "px";
      }
      C = Za;
      r.m = !1;
    }
    C && (oa = r.Rk, null != oa && oa.jv(!0), Za = r.la().parentElement, Za.style.border = "1px solid transparent", Za.style.cursor = "", C.style.cursor = "", C.style.height = "", C.style.minHeight = "", C.style.backgroundColor = "", Za.style.backgroundColor = J, Za.style.borderRadius = "5px", C.contentEditable = "false", 0 == C.innerHTML.trim().length ? Za.remove() : (0 == aa(C) && Za.remove(), Za.style.height = C.clientHeight + "px"), y ? xa(r, y) : ia(r), l(r, Yx(z)), oa.reflow());
  }
  function pc() {
    var r = tu();
    for (let z = 0; z < r.length; z++) {
      Fs(r[z]) && qe(r[z], S.g);
    }
  }
  var da = null, Sb = -1, td = !1, F = null, H = null, O = null, N = null, fa = null, Ua = 0, $a = 0, ub = "20", oc = "#000000", ib = "", hc = "Arial", Kc = null, ic = null, gd = !1, Gi = -1, ai = -1, Xd = !1, Od = !1, Yd = !1, ge, Wg, Ae, Vg = new ResizeObserver(function(r) {
    let z = 0;
    y && y.Ea && (z = -y.Ea.getBoundingClientRect().top + y.scrollY);
    for (var C = 0; C < r.length; C++) {
      if (da && r[C].target == da.la()) {
        let J = da.la();
        J.parentElement.style.height = parseFloat(r[C].contentRect.height + 10) + "px";
        N.style.top = J.parentElement.offsetTop - z + J.parentElement.getBoundingClientRect().height / 2 - 12 + "px";
      }
    }
  }), Dj = null, Dc = null, $c, Dh = !1, Cg = "2147483635", sd = "2147483638", Md = null, Ia = !0, y = null;
  document.getElementById("annotate-mathtool-edit-toolbar") && document.getElementById("annotate-mathtool-edit-toolbar").remove();
  document.getElementById("annotate-mathtool-resize-width-handle") && document.getElementById("annotate-mathtool-resize-width-handle").remove();
  document.getElementById("annotate-mathtool-resize-element-handle") && document.getElementById("annotate-mathtool-resize-element-handle").remove();
  document.getElementById("annotate-mathtool-resize-element-box") && document.getElementById("annotate-mathtool-resize-element-box").remove();
  e();
  return {xi:function() {
    Bc();
    N = document.createElement("div");
    N.id = "annotate-mathtool-resize-width-handle";
    N.classList.add("annotate-drag-elements");
    N.style.display = "none";
    N.style.width = "24px";
    N.style.height = "24px";
    N.style.position = "absolute";
    N.style.backgroundImage = "url(" + window.chrome.runtime.getURL("images/resize_width_handle.png") + ")";
    N.style.backgroundSize = "24px";
    N.style.zIndex = parseInt(sd) + 2 + "";
    ik(N);
    document.body.appendChild(N);
    fa = document.createElement("div");
    fa.id = "annotate-mathtool-resize-element-handle";
    fa.classList.add("annotate-drag-elements");
    fa.style.display = "none";
    fa.style.width = "24px";
    fa.style.height = "24px";
    fa.style.position = "absolute";
    fa.style.backgroundImage = "url(" + window.chrome.runtime.getURL("images/resize_element_handle.png") + ")";
    fa.style.backgroundSize = "24px";
    fa.style.zIndex = parseInt(sd) + 2 + "";
    ik(fa);
    document.body.appendChild(fa);
    fa.addEventListener("pointerdown", Th, {capture:!0, passive:!1});
    H = document.createElement("div");
    H.id = "annotate-mathtool-resize-element-box";
    H.classList.add("extension_reset_css");
    H.classList.add("annotate-drag-elements");
    H.style.border = "1px dashed #ff0000";
    H.style.display = "none";
    H.style.boxSizing = "border-box";
    H.style.position = "absolute";
    H.style.zIndex = Cg;
    H.style.cursor = "all-scroll";
    H.addEventListener("pointerdown", wh, {capture:!0, passive:!1});
    ik(H);
    document.body.appendChild(H);
  }, XC:e, YC:function() {
    Ko.Vi() && Ko.$h();
    yc();
    da = null;
    N && (N.style.display = "none", N.removeEventListener("pointerdown", X, {AN:!0, passive:!1}));
    let r = Oo(S);
    if (r) {
      let z = {arrTextElement:[]}, C = null;
      for (C of r.Fd) {
        Fs(C) && z.arrTextElement.push(C.ta);
      }
      r.Tr();
      r.xb();
      r.dispatchEvent(new CustomEvent(Cp.g, {detail:z}));
    }
  }, lC:f, FD:k, ll:function(r, z) {
    let C = tu();
    1 == r ? C = vu() : 2 == r ? C = wu() : 3 == r && (C = xu());
    if (z) {
      if (!y || y.Ea) {
        for (Ia = !0, r = C.length - 1; 0 <= r; r--) {
          l(C[r], !0);
        }
      }
    } else {
      for (Ia = !1, yc(), r = C.length - 1; 0 <= r; r--) {
        l(C[r], !1);
      }
    }
  }, ew:function(r, z, C, J, T, ba, ea, ka, oa, bb) {
    yc();
    C = 150 > C - 20 ? 150 : C - 20;
    J = 50 > J - 20 ? 50 : J - 20;
    $c = ka;
    !ka || "scale" in ka || (ka.scale = 1);
    let zb = 1;
    ka && "scale" in ka && (zb = ka.scale);
    ka = "annotate-mathtext " + (new Date()).getTime();
    T && (ka = T);
    T = G(J / zb, ka, ub, hc, oc, ib, Xd, Od, Yd);
    Dc = new Yl(T, ba, oa);
    Dc.jv(!1);
    T.addEventListener("pointerdown", I, {capture:!0, passive:!1});
    D(r, z, C / zb, J / zb);
    ba = document.body;
    y && y.Ea && (ba = y.Bb);
    C = D(r, z, C / zb, J / zb);
    C.style.transformOrigin = "left top";
    C.style.transform = "scale(" + zb + ")";
    C.appendChild(T);
    ba.appendChild(C);
    da = new Xx(Tx);
    da.xb();
    da.R = T;
    da.Cb = bb;
    Sb = ea;
    C.addEventListener("click", Aa, {capture:!0, passive:!1});
    T.addEventListener("click", Aa, {capture:!0, passive:!1});
    oa && (T.focus(), Dc.Oh());
    Dc.reflow();
    N && (ea = r, oa = z, y && y.Ea && (oa = y.Ea.getBoundingClientRect(), ea = r + oa.left - y.scrollX, oa = z + oa.top - y.scrollY), N.style.display = "none", N.style.left = ea + C.offsetWidth * zb - 12 + "px", N.style.top = oa + C.offsetHeight * zb / 2 - 12 + "px", N.addEventListener("pointerdown", X, {capture:!0, passive:!1}));
    Vg.observe(T);
  }, $h:Ha, Vi:function() {
    return da && da.la() || H && "block" == H.style.display ? !0 : !1;
  }, LG:fc, Zk:ed, Eo:function(r) {
    oc = r;
    da && (da.la().style.color = r);
  }, wh:function(r, z, C, J, T, ba, ea, ka) {
    Xd = r;
    Od = z;
    Yd = C;
    oc = J;
    ib = T;
    ub = ba;
    hc = ea;
    Kc = ka;
    da && (r = da.la(), r.style.fontWeight = Xd ? "bold" : "normal", r.style.fontStyle = Od ? "italic" : "normal", r.style.textDecoration = Yd ? "underline" : "none", r.style.color = oc, r.style.backgroundColor = ib, r.style.fontSize = ub + "px", r.style.fontFamily = hc);
    O && (r = [O.Na()], 0 < r.length && Px({action:Vx, ub:Rx, F:r}, !0), r = O.la(), r.style.fontWeight = Xd ? "bold" : "normal", r.style.fontStyle = Od ? "italic" : "normal", r.style.textDecoration = Yd ? "underline" : "none", r.style.color = oc, r.parentElement.style.backgroundColor = ib, r.style.fontSize = ub + "px", r.style.fontFamily = hc, z = parseFloat(r.parentElement.style.width.slice(0, -2)), C = aa(r) + 15, r.parentElement.style.width = z > C ? C + "px" : z + "px", r.parentElement.style.height = 
    r.clientHeight + "px", Xe(), Sx(O, r, Tx, null, null), Au(O));
  }, xm:function(r) {
    Ha();
    $c = r;
    if (2 == S.g) {
      r = vu();
      for (var z = 0; z < r.length; z++) {
        ia(r[z]);
      }
      r = xu();
      for (z = 0; z < r.length; z++) {
        ia(r[z]);
      }
    } else if (3 == S.g) {
      r = vu();
      for (z = 0; z < r.length; z++) {
        ia(r[z]);
      }
      r = wu();
      for (z = 0; z < r.length; z++) {
        ia(r[z]);
      }
    }
    r = tu();
    for (z = 0; z < r.length; z++) {
      ia(r[z]);
    }
  }, wm:gb, Sw:function() {
    return Dh;
  }, sA:function() {
    console.log("Mathtext reset modified");
    Dh = !1;
  }, ej:function(r, z, C) {
    Cg = r;
    sd = z;
    ed(td);
    fa && (fa.style.zIndex = parseInt(sd) + 2 + "");
    N && (N.style.zIndex = parseInt(sd) + 2 + "");
    F && (F.style.zIndex = C + "");
  }, vv:function(r) {
    var z = [];
    if (r) {
      r = r.Fd;
      for (let C = 0; C < r.length; C++) {
        Fs(r[C]) && (Sx(r[C], r[C].la(), Tx, null, null), z.push(r[C].Na()));
      }
    }
    return z;
  }, Dr:function(r, z) {
    let C = !z && P.l;
    for (var J = 0; J < r.length; J++) {
      if (null == r[J].type) {
        continue;
      } else if (null != r[J].type && "textTool" == r[J].type) {
        continue;
      }
      let T = fe(r[J]);
      C && ("uDocType" in r[J] ? z = r[J].uDocType : z = 1);
      z ? Bu(T, z) : yu(T);
    }
  }, Sz:fe, Av:function(r, z) {
    if (!r || !z || null != z.type && "textTool" == z.type) {
      return null;
    }
    let C = {};
    z.pageInfo && (C = JSON.parse(z.pageInfo));
    C && ("scale" in C || (C.scale = 1));
    z.pageInfo = JSON.stringify(C);
    r.Ad(z);
  }, qI:function(r) {
    let z = fe(r);
    qe(z, S.g);
    z && z.Rk && (r.renderData = z.Rk.tG());
    yr(z);
  }, DI:Ld, Br:function(r, z) {
    for (var C = 0; C < r.length; C++) {
      if (null != r[C].type && "textTool" == r[C].type) {
        continue;
      }
      let J = fe(r[C]);
      yu(J, z);
    }
  }, ct:function(r, z) {
    let C = [], J = tu(z);
    for (var T = 0; T < J.length; T++) {
      if (Fs(J[T]) && J[T].S == r) {
        let ba = [J[T].Na()];
        b(J[T].ta, z);
        for (let ea = 0; ea < ba.length; ++ea) {
          C.push(ba[ea]);
        }
        T--;
      }
    }
    return C;
  }, dt:function(r, z, C, J) {
    let T = tu(J), ba = [];
    for (let ea = 0; ea < T.length; ea++) {
      if (Fs(T[ea]) && T[ea].S == r) {
        let ka = [T[ea].Na()];
        for (let oa = 0; oa < ka.length; oa++) {
          let bb = T[ea].A.scale, zb = ka[oa].left - T[ea].A.x, Za = ka[oa].top - T[ea].A.y;
          zb = zb / bb + 11;
          Za = Za / bb + 11;
          if (zb > z || Za > C) {
            b(T[ea].ta, J), ba.push(ka[oa]), ea--;
          }
        }
      }
    }
    return ba;
  }, Tz:function(r, z, C, J, T) {
    if (r) {
      let ad = z.getContext("2d");
      for (var ba = 0; ba < r.length; ba++) {
        var ea = r[ba];
        if (null != ea.type && (null == ea.type || "textTool" != ea.type)) {
          var ka = -1;
          "pageIndex" in ea && (ka = ea.pageIndex);
          var oa = !0;
          J && y && C != yo(y, ka) && (oa = !1);
          if (oa) {
            let xc;
            ea.pageInfo && (xc = JSON.parse(ea.pageInfo));
            ka = "transparent";
            ea.fillColor && (ka = ea.fillColor);
            "scale" in xc || (xc.scale = 1);
            if (xc) {
              oa = xc.scale;
              var bb = ea.left - xc.x, zb = ea.top - xc.y;
              bb = bb / oa + 11;
              zb = zb / oa + 11;
              var Za = T.width / (xc.width / oa);
              ad.save();
              ad.scale(Za, Za);
              ad.translate(bb, zb);
              "transparent" != ka && (ad.fillStyle = ka, ad.fillRect(-10, -10, ea.width + 20, ea.height + 20));
              ka = ea;
              var Xb = ka.bBold;
              let tn = ka.bItalic, mp = ka.bUnderline, np = ka.fontColor;
              bb = ka.fillColor;
              let Tk = ka.fontSize, $f = ka.fontFamily;
              zb = ka.width * oa;
              zb = 150 > zb - 20 ? 150 : zb - 20;
              Za = ka.height * oa;
              Za = 50 > Za - 20 ? 50 : Za - 20;
              let op = ka.left, pp = ka.top;
              var Uc = void 0;
              Uc = ka.data;
              Xb = G(Za / oa, "", Tk, $f, np, bb, Xb, tn, mp);
              Uc = new Yl(Xb, Uc, !1);
              Uc.jv(!1);
              ka.mathquill = Uc;
              D(op, pp, zb / oa, Za / oa);
              ka = D(op + 0, pp + 0, zb / oa, Za / oa);
              ka.style.transformOrigin = "left top";
              ka.style.transform = "scale(" + oa + ")";
              ka.appendChild(Xb);
              ka.style.border = "1px solid transparent";
              ka.style.cursor = "";
              Xb.style.cursor = "";
              Xb.style.height = "";
              Xb.style.minHeight = "";
              Xb.style.backgroundColor = "";
              ka.style.backgroundColor = bb;
              ka.style.borderRadius = "5px";
              Xb.contentEditable = "false";
              0 == Xb.innerHTML.trim().length ? ka.remove() : (0 == aa(Xb) && ka.remove(), ka.style.height = Xb.clientHeight + "px");
              ka = Xb;
              Dj || (Dj = new hj());
              fj(Dj, ka, ea.width, z);
              ad.restore();
            }
          }
        }
      }
    }
  }, wq:function(r) {
    var z = td;
    yc();
    if (r.action == Ux) {
      var C = qd(r.F[0].nId);
      0 < C.length && Zx({action:$x, ub:Rx, F:C});
      c(r.F[0].nId);
    } else {
      r.action == Qx ? (Zx({action:ay, ub:Rx, F:[{nId:r.F[0].nId}]}), Ld(r.F), pc()) : r.action == Vx && (C = qd(r.F[0].nId), 0 < C.length && Zx({action:by, ub:Rx, F:C}), c(r.F[0].nId), Ld(r.F), pc());
    }
    ed(z);
    y && y.Ea && gb(y);
  }, ls:function(r) {
    var z = td;
    yc();
    if (r.action == ay) {
      var C = qd(r.F[0].nId);
      0 < C.length && Px({action:Qx, ub:Rx, F:C}, !1);
      c(r.F[0].nId);
    } else {
      r.action == $x ? (Px({action:Ux, ub:Rx, F:[{nId:r.F[0].nId}]}, !1), Ld(r.F), pc()) : r.action == by && (C = qd(r.F[0].nId), 0 < C.length && Px({action:Vx, ub:Rx, F:C}, !1), c(r.F[0].nId), Ld(r.F), pc());
    }
    ed(z);
    y && y.Ea && gb(y);
  }, oB:function(r) {
    var z = r.pageX - window.scrollX;
    r = r.pageY - window.scrollY;
    var C = tu();
    for (let ba = 0; ba < C.length; ba++) {
      if (Fs(C[ba])) {
        var J = C[ba];
        J = J.la();
        if (!J) {
          continue;
        }
        var T = J.getBoundingClientRect();
        let ea = T.x, ka = T.y, oa = T.x + T.width;
        T = T.y + T.height;
        if (z <= ea && z >= oa || z <= oa && z >= ea) {
          if (r <= ka && r >= T || r <= T && r >= ka) {
            return oc = bh(J.style.color), ib = "" == J.style.backgroundColor ? "" : bh(J.style.backgroundColor), Xd = "bold" == J.style.fontWeight, Od = "italic" == J.style.fontStyle, Yd = "underline" == J.style.textDecoration, ub = parseInt(J.style.fontSize.slice(0, -2)) + "", hc = J.style.fontFamily, Kc && Kc(Xd, Od, Yd, oc, ib, ub, hc, !1), !0;
          }
        }
      }
    }
    return !1;
  }, dD:function(r) {
    var z = r.pageX, C = r.pageY, J = null, T = tu();
    for (let ea = 0; ea < T.length; ea++) {
      if (Fs(T[ea])) {
        var ba = T[ea].la().getBoundingClientRect();
        let ka = ba.x, oa = ba.y, bb = ba.x + ba.width;
        ba = ba.y + ba.height;
        if (z <= ka && z >= bb || z <= bb && z >= ka) {
          if (C <= oa && C >= ba || C <= ba && C >= oa) {
            J = T[ea];
            break;
          }
        }
      }
    }
    if (J) {
      z = {};
      z.target = J.la();
      z.pageX = r.pageX;
      z.pageY = r.pageY;
      z.preventDefault = function() {
      };
      if (da) {
        J = J.ele;
        for (-1 != J.className.indexOf("annotate-mathtext-container") && (J = J.children[0]); null != J && -1 == J.className.indexOf("annotate-mathtext ");) {
          J = J.parentElement;
        }
        if (J != da.la()) {
          Ha();
          return;
        }
      }
      r.preventDefault();
      gd = !1;
      Cb(z, !0);
      return !0;
    }
    return !1;
  }, Xq:function(r, z) {
    let C, J, T;
    if (da && da.la() && da.la().parentElement) {
      var ba = getComputedStyle(da.la().parentElement);
      J = parseInt(ba.width);
      T = parseInt(ba.height);
      C = parseInt(ba.top);
      ba = parseInt(ba.left);
      if (r > ba && r < ba + J && z > C && z < C + T) {
        return !0;
      }
    }
    return null == O ? !1 : H && (J = parseInt(getComputedStyle(H).width), T = parseInt(getComputedStyle(H).height), C = parseInt(getComputedStyle(H).top), ba = parseInt(getComputedStyle(H).left), r > ba && r < ba + J && z > C && z < C + T) || N && (J = parseInt(getComputedStyle(N).width), T = parseInt(getComputedStyle(N).height), C = parseInt(getComputedStyle(N).top), ba = parseInt(getComputedStyle(N).left), r > ba && r < ba + J && z > C && z < C + T) || fa && (J = parseInt(getComputedStyle(fa).width), 
    T = parseInt(getComputedStyle(fa).height), C = parseInt(getComputedStyle(fa).top), ba = parseInt(getComputedStyle(fa).left), r > ba && r < ba + J && z > C && z < C + T) || F && (J = parseInt(getComputedStyle(F).width), T = parseInt(getComputedStyle(F).height), C = parseInt(getComputedStyle(F).top), ba = parseInt(getComputedStyle(F).left), r > ba && r < ba + J && z > C && z < C + T) ? !0 : !1;
  }, ZM:function(r, z) {
    ic = r;
    Kc = z;
  }, KN:function() {
    return fd(tu(), S.g);
  }, sI:function(r) {
    var z = [], C = fd(vu(), 1);
    z = z.concat(C);
    C = fd(wu(), r ? 2 : 1);
    z = z.concat(C);
    C = fd(xu(), r ? 3 : 1);
    return z = z.concat(C);
  }, dl:function() {
    Ue(null);
    let r = tu();
    for (let z = r.length - 1; 0 <= z; z--) {
      if (Fs(r[z]) && r[z].Cb) {
        let C = null;
        r[z].la() && (C = r[z].la().parentElement);
        let J = Um(r[z]), T = r[z].top + J.y;
        C.style.left = r[z].left + J.x + "px";
        C.style.top = T + "px";
      }
    }
  }, uf:qe, Jr:function() {
    if (da && da.Rk) {
      return da.Rk;
    }
    if (Dc) {
      return Dc;
    }
  },};
}();
function cy(a) {
  a.g = {};
  a.g.xd = [1, 2, 3, 5, 7, 10, 12, 16];
  a.g.zb = a.lineWidth;
  a.g.qa = a.strokeStyle;
  a.g.Rb = a.G;
  a.g.Xb = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
  a.g.Hd = a.fillStyle;
  a.g.Ei = " #ffffff #000000 #f41489 #30f0bf #fdfd96 #21aeef".split(" ");
  a.g.Ni = " #ffffff #000000 #f41489 #30f0bf #fdfd96 #21aeef".split(" ");
  a.g.Za = dy(a, a.strokeStyle);
  a.g.Kf = ey(a, a.fillStyle);
  a.g.Cc = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" ");
  a.g.Cg = 3;
  a.g.Bg = 1;
}
function dy(a, b) {
  let c = 6;
  for (let d = 0; d < a.g.Xb.length; d++) {
    if (b == a.g.Xb[d]) {
      c = d;
      break;
    }
  }
  return c;
}
function ey(a, b) {
  let c = 6;
  for (let d = 0; d < a.g.Ei.length; d++) {
    if (b == a.g.Ei[d]) {
      c = d;
      break;
    }
  }
  return c;
}
function fy(a) {
  -1 != a.B && (clearTimeout(a.B), a.B = -1);
}
function gy(a, b) {
  let c = a.l;
  var d = Um(a);
  return b - window.scrollX + d.x + a.m.x / c - a.Jb.x / c;
}
function hy(a, b) {
  let c = a.l;
  var d = Um(a);
  return b - window.scrollY + d.y + a.m.y / c - a.Jb.y / c;
}
class Do extends Wm {
  constructor(a, b, c, d, e, f, k, l) {
    super();
    this.j = a;
    this.lineWidth = d ? d : 30;
    this.strokeStyle = b ? b : "#222222";
    this.fillStyle = c ? c : "";
    this.fm = f ? f : 1;
    this.G = e ? e : 1;
    this.I = {x:0, y:0};
    this.L = {x:0, y:0};
    this.tl = !1;
    this.v;
    this.Gb = [];
    this.globalCompositeOperation = "source-over";
    this.Db = !1;
    this.B = -1;
    this.l = k ? k : 1;
    this.m = l ? l : {x:0, y:0, height:0, width:0};
    this.Jb = {x:0, y:0};
    this.i = null;
    this.ea = !1;
    this.o = null;
    this.Kf = this.Za = 0;
    cy(this);
  }
  Is() {
    return this.g;
  }
  kl(a) {
    this.S = a;
  }
  Vn(a) {
    this.m = a;
  }
  Xe() {
    return this.m;
  }
  Nn() {
    return this.l;
  }
  Km(a) {
    this.l = a;
  }
  nq(a) {
    this.Jb = a;
  }
  ic() {
    fy(this);
    if (this.ea) {
      var a = Math.abs(this.I.x - this.L.x), b = Math.abs(this.I.y - this.L.y);
      b < a ? a = b : b = a;
      this.I.x <= this.L.x ? this.I.y <= this.L.y ? (this.L.x = this.I.x + a, this.L.y = this.I.y + b) : (this.L.x = this.I.x + a, this.L.y = this.I.y - b) : this.I.y <= this.L.y ? (this.L.x = this.I.x - a, this.L.y = this.I.y + b) : (this.L.x = this.I.x - a, this.L.y = this.I.y - b);
    }
    this.Db = !1;
    this.j.save();
    this.i && (this.i.width = this.i.width);
    this.Xf(this.j);
    this.j.restore();
  }
  Ft(a, b, c) {
    this.Db = !0;
    this.l = c;
    a = {x:a - this.m.x, y:b - this.m.y};
    this.Cb && (a = Ek(a.x, a.y, this.Cb));
    a.x /= c;
    a.y /= c;
    a.x = Math.round(100 * a.x) / 100;
    a.y = Math.round(100 * a.y) / 100;
    this.I = a;
    this.v = Date.now();
    null == this.i && (this.i = document.getElementById("AnnotateAnnotationSelectionCanvas"));
  }
  Ro(a, b, c, d) {
    a = {x:a - this.m.x, y:b - this.m.y};
    this.Cb && (a = Ek(a.x, a.y, this.Cb));
    a.x /= d;
    a.y /= d;
    a.x = Math.round(100 * a.x) / 100;
    a.y = Math.round(100 * a.y) / 100;
    this.L = a;
    this.ea = c;
    -1 == this.B && (this.B = window.setTimeout(this.ic.bind(this), 10));
  }
  Em(a, b, c, d) {
    fy(this);
    this.i && (this.i.width = this.i.width);
    this.Db ? (this.I.x = 0, this.I.y = 0, this.L.x = 0, this.L.y = 0) : (a = {x:a - this.m.x, y:b - this.m.y}, this.Cb && (a = Ek(a.x, a.y, this.Cb)), a.x /= d, a.y /= d, a.x = Math.round(100 * a.x) / 100, a.y = Math.round(100 * a.y) / 100, this.L = a, this.ea = c, this.ic());
  }
  cb() {
    return "ellipse";
  }
  wm(a) {
    this.o = a;
  }
  ya() {
    var a = this.I.x, b = this.L.x, c = this.I.y, d = this.L.y, e = {};
    e.left = (a < b ? a : b) * this.l;
    e.top = (c < d ? c : d) * this.l;
    e.width = Math.abs(b - a) * this.l;
    e.height = Math.abs(d - c) * this.l;
    e.left = e.left + this.m.x;
    e.top = e.top + this.m.y;
    a = Um(this);
    e.left += a.x;
    e.top += a.y;
    this.o && this.o.Ea && (e.left = e.left - this.m.x, e.top = e.top - this.m.y, a = this.o.Ea.getBoundingClientRect(), b = hl(this.o, yo(this.o, this.S), new il(this.o.scrollX, this.o.scrollY)), e.left = e.left - b.$a + a.left, e.top = e.top - b.Ua + a.top);
    return e;
  }
  getBoundingClientRect() {
    var a = this.I.x, b = this.L.x, c = this.I.y, d = this.L.y, e = {};
    e.left = a < b ? a : b;
    e.top = c < d ? c : d;
    e.width = Math.abs(b - a);
    e.height = Math.abs(d - c);
    e.left += this.m.x;
    e.top += this.m.y;
    return e;
  }
  nt(a) {
    this.tl = a;
  }
  It() {
    return this.tl;
  }
  Ha(a, b) {
    a -= this.m.x;
    b -= this.m.y;
    this.Cb && (b = Ek(a, b, this.Cb), a = b.x, b = b.y);
    var c = this.I.x * this.l, d = this.L.x * this.l, e = this.Dg() * this.l, f = this.getBoundingClientRect();
    if ("" == this.g.Hd && f.width * this.l - 20 > 2 * e && f.height * this.l - 20 > 2 * e) {
      var k = this.getBoundingClientRect();
      k.left = k.left - this.m.x;
      k.top = k.top - this.m.y;
      f = this.Dg() * this.l;
      c = k.left * this.l + k.width * this.l / 2;
      d = k.top * this.l + k.height * this.l / 2;
      e = k.width * this.l / 2;
      k = k.height * this.l / 2;
      f = Math.pow(a - c, 2) / Math.pow(e - f - 5, 2) + Math.pow(b - d, 2) / Math.pow(k - f - 5, 2);
      a = Math.pow(a - c, 2) / Math.pow(e + 5, 2) + Math.pow(b - d, 2) / Math.pow(k + 5, 2);
      return 1 <= f && 1 >= a || 1 >= f && 1 <= a ? !0 : !1;
    }
    c < d ? (c -= e / 2, d += e / 2) : (d -= e / 2, c += e / 2);
    f = this.I.y * this.l;
    k = this.L.y * this.l;
    f < k ? (f -= e / 2, k += e / 2) : (k -= e / 2, f += e / 2);
    if (a <= c && a >= d || a <= d && a >= c) {
      if (b <= f && b >= k || b <= k && b >= f) {
        return !0;
      }
    }
    return !1;
  }
  dj(a, b) {
    b = (this.I.x < this.L.x ? this.I.x : this.L.x) + b / this.l;
    this.I.x < this.L.x ? this.L.x = b : this.I.x = b;
    (b = document.getElementById("AnnotateAnnotationSelectionCanvas")) && b.getContext("2d").clearRect(0, 0, b.width, b.height);
    this.Xf(a);
  }
  Wg(a, b) {
    b = (this.I.y < this.L.y ? this.I.y : this.L.y) + b / this.l;
    this.I.y < this.L.y ? this.L.y = b : this.I.y = b;
    (b = document.getElementById("AnnotateAnnotationSelectionCanvas")) && b.getContext("2d").clearRect(0, 0, b.width, b.height);
    this.Xf(a);
  }
  Wb(a, b, c) {
    var d = this.getBoundingClientRect();
    b -= this.m.x;
    c -= this.m.y;
    this.I.x += (b - this.I.x) / this.l;
    this.I.y += (c - this.I.y) / this.l;
    this.L.x = this.I.x + d.width;
    this.L.y = this.I.y + d.height;
    (b = document.getElementById("AnnotateAnnotationSelectionCanvas")) && b.getContext("2d").clearRect(0, 0, b.width, b.height);
    this.o && this.o.Ea && (c = yo(this.o, this.S), -1 != c && (b = fl(this.o, Math.min(this.I.y, this.L.y) * this.l + ox(this.o, c)).S, b != c && (b > c ? (c = kl(this.o, c) / this.l, this.I.y -= c + 16, this.L.y -= c + 16) : (c = kl(this.o, b) / this.l, d = Math.abs(this.I.y - this.L.y), this.I.y < this.L.y ? (this.I.y = c + this.I.y + 16, this.L.y = this.I.y + d + 16) : (this.L.y = c + this.L.y + 16, this.I.y = this.L.y + d + 16)), c = hl(this.o, b, new il(this.o.scrollX, this.o.scrollY)), this.m = 
    {x:-c.$a, y:-c.Ua, width:jl(this.o, b), height:kl(this.o, b), scale:this.o.scale}, this.S = ll(this.o, b))));
    this.Xf(a);
  }
  Dd(a, b, c) {
    b = (this.I.x < this.L.x ? this.I.x : this.L.x) + b / this.l;
    this.I.x < this.L.x ? this.L.x = b : this.I.x = b;
    c = (this.I.y < this.L.y ? this.I.y : this.L.y) + c / this.l;
    this.I.y < this.L.y ? this.L.y = c : this.I.y = c;
    null == this.i && (this.i = document.getElementById("AnnotateAnnotationSelectionCanvas"));
    this.i && this.i.getContext("2d").clearRect(0, 0, this.i.width, this.i.height);
    this.Xf(a);
  }
  Xf(a) {
    var b = this.l, c = Vm(this);
    c && (a.beginPath(), a.rect(c.x, c.y, c.width, c.height), a.clip(), a.beginPath());
    a.save();
    a.scale(b, b);
    var d = this.I, e = this.L;
    if (1 > this.g.Rb) {
      a.globalCompositeOperation = "destination-out";
      a.lineJoin = "round";
      a.lineCap = "round";
      a.lineWidth = this.g.zb;
      a.strokeStyle = "rgba(0,0,0,1)";
      a.beginPath();
      b = Math.min(d.x, e.x);
      c = Math.min(d.y, e.y);
      var f = Math.abs(d.x - e.x);
      d = Math.abs(d.y - e.y);
      e = !1;
      15 > Math.abs(f - d) && (this.j == a && (e = !0), d > f ? d = f : f = d);
      a.strokeStyle = jh(this.g.qa, this.g.Rb);
      a.ellipse(gy(this, b + f / 2), hy(this, c + d / 2), Math.abs(d / 2 - this.g.zb / 2), Math.abs(f / 2 - this.g.zb / 2), Math.PI / 2, 0, 2 * Math.PI);
      a.stroke();
      a.globalCompositeOperation = "source-over";
      "" != this.g.Hd && (a.fillStyle = "" != this.g.Hd ? jh(this.g.Hd, this.g.Rb) : "", a.fill());
      a.stroke();
      a.closePath();
      e && (a.beginPath(), a.strokeStyle = "rgba( 26, 115, 232, 1)", a.lineWidth = 2, a.ellipse(gy(this, b + f / 2), hy(this, c + d / 2), Math.abs(d / 2 - this.g.zb / 2) + this.g.zb / 2, Math.abs(f / 2 - this.g.zb / 2) + this.g.zb / 2, Math.PI / 2, 0, 2 * Math.PI), a.stroke(), a.closePath());
    } else {
      a.globalCompositeOperation = "source-over", a.lineJoin = "round", a.lineCap = "round", a.lineWidth = this.g.zb, a.strokeStyle = jh(this.g.qa, this.g.Rb), a.beginPath(), b = Math.min(d.x, e.x), c = Math.min(d.y, e.y), f = Math.abs(d.x - e.x), d = Math.abs(d.y - e.y), e = !1, 15 > Math.abs(f - d) && (this.j == a && (e = !0), d > f ? d = f : f = d), a.ellipse(gy(this, b + f / 2), hy(this, c + d / 2), Math.abs(d / 2 - this.g.zb / 2), Math.abs(f / 2 - this.g.zb / 2), Math.PI / 2, 0, 2 * Math.PI), 
      "" != this.g.Hd && (a.fillStyle = "" != this.g.Hd ? jh(this.g.Hd, this.g.Rb) : "", a.fill()), a.stroke(), a.closePath(), e && (a.beginPath(), a.strokeStyle = "rgba( 26, 115, 232, 1)", a.lineWidth = 2, a.ellipse(gy(this, b + f / 2), hy(this, c + d / 2), Math.abs(d / 2 - this.g.zb / 2) + this.g.zb / 2, Math.abs(f / 2 - this.g.zb / 2) + this.g.zb / 2, Math.PI / 2, 0, 2 * Math.PI), a.stroke(), a.closePath());
    }
    a.restore();
  }
  Dg() {
    return this.g.zb;
  }
  Na() {
    var a = super.Na();
    this.Fb(a);
    return a;
  }
  Fa(a) {
    super.Fa(a);
    "arrDrawingPts" in a && (this.Gb = a.arrDrawingPts);
    "strStrokeStyle" in a && (this.strokeStyle = a.strStrokeStyle);
    this.l = a.uGlobalScale ? a.uGlobalScale : 1;
    this.m = a.offsetPoint ? a.offsetPoint : {x:0, y:0, height:0, width:0};
    "startPoint" in a && (null != a.startPoint.X && null != a.startPoint.Y ? (this.I.x = a.startPoint.X, this.I.y = a.startPoint.Y) : this.I = a.startPoint);
    "endPoint" in a && (null != a.endPoint.X && null != a.endPoint.Y ? (this.L.x = a.endPoint.X, this.L.y = a.endPoint.Y) : this.L = a.endPoint);
    "fillStyle" in a && (this.fillStyle = a.fillStyle);
    "fillAlpha" in a && (this.fm = a.fillAlpha);
    "strlineWidth" in a && (this.lineWidth = a.strlineWidth);
    "strStrokeAlpha" in a && (this.G = a.strStrokeAlpha);
    "pageIndex" in a && (this.S = a.pageIndex);
    this.Za = "currColorIndex" in a ? a.currColorIndex : dy(this, this.strokeStyle);
    this.Kf = "currFillColorIndex" in a ? a.currFillColorIndex : ey(this, this.fillStyle);
    cy(this);
  }
  Fb(a) {
    a.strElement = this.cb();
    a.arrDrawingPts = this.Gb;
    a.strStrokeStyle = this.g.qa;
    a.strlineWidth = this.g.zb;
    a.strStrokeAlpha = this.g.Rb;
    a.currColorIndex = this.g.Za;
    a.currFillColorIndex = this.g.Kf;
    a.uGlobalScale = this.l;
    a.offsetPoint = this.m;
    a.startPoint = this.I;
    a.endPoint = this.L;
    a.fillStyle = this.g.Hd;
    a.fillAlpha = this.fm;
    a.pageIndex = this.S;
  }
  Ul(a) {
    a.strElement = this.cb();
    a.strStrokeStyle = this.g.qa;
    a.strlineWidth = this.g.zb;
    a.strStrokeAlpha = this.g.Rb;
    a.currColorIndex = this.g.Za;
    a.currFillColorIndex = this.g.Kf;
    a.fillStyle = this.g.Hd;
    a.fillAlpha = this.fm;
  }
  Ad(a) {
    super.Ad(a);
    "strStrokeStyle" in a && (this.strokeStyle = a.strStrokeStyle);
    "strlineWidth" in a && (this.lineWidth = a.strlineWidth);
    "strStrokeAlpha" in a && (this.G = a.strStrokeAlpha);
    "currColorIndex" in a && (this.Za = a.currColorIndex);
    "currFillColorIndex" in a && (this.Kf = a.currFillColorIndex);
    "fillStyle" in a && (this.fillStyle = a.fillStyle);
    "fillAlpha" in a && (this.fm = a.fillAlpha);
    this.g && (this.g.zb = this.lineWidth, this.g.qa = this.strokeStyle, this.g.Rb = this.G, this.g.Hd = this.fillStyle, this.g.Za = dy(this, this.strokeStyle), this.g.Kf = ey(this, this.fillStyle));
  }
}
;var iy = [], jy = [], ky = 50, Ux = 1, Qx = 2, Vx = 3, ay = 1, $x = 2, by = 3, Rx = 7;
function Kp() {
  iy = [];
  jy = [];
}
function Px(a, b) {
  iy.push(a);
  iy.length > ky && iy.shift();
  b && (jy = []);
}
function ly() {
  Ql.Ja() && to();
  var a = iy.pop();
  a && (4 == a.action ? L.wq(a) : 1 == a.ub || 5 == a.ub || 5 == a.ub || 6 == a.ub || 4 == a.ub || 8 == a.ub ? L.wq(a) : 2 == a.ub ? Ro.wq(a) : 3 == a.ub ? Jo.wq(a) : a.ub == Rx && Ko.wq(a));
}
function Zx(a) {
  jy.push(a);
}
function my() {
  Ql.Ja() && to();
  var a = jy.pop();
  a && (1 == a.ub || 5 == a.ub || 5 == a.ub || 6 == a.ub || 4 == a.ub || 8 == a.ub ? L.ls(a) : 2 == a.ub ? Ro.ls(a) : 3 == a.ub ? Jo.ls(a) : a.ub == Rx && Ko.ls(a));
}
;var Ro = function() {
  function a(F, H = 1) {
    const [O, N, fa] = F.match(/\w\w/g).map(Ua => parseInt(Ua, 16));
    return `rgba(${O},${N},${fa},${H})`;
  }
  function b() {
    var F = document.getSelection();
    if (!F || 0 == F.rangeCount) {
      return !1;
    }
    var H = F.getRangeAt(0);
    if (!H || H.startContainer == H.endContainer && H.startOffset == H.endOffset) {
      return !1;
    }
    F = F.toString();
    return "\n" == F || "" == F ? !1 : !0;
  }
  function c(F) {
    F.preventDefault();
    1 === F.buttons ? (fe = !1, d(F, !0)) : 2 === F.buttons && -1 != pc && (clearTimeout(pc), pc = -1);
  }
  function d(F, H) {
    if (ia && !b() && !fe) {
      var O = 1000;
      H && (O = 0);
      var N = F.target, fa = F.pageX - parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-left")), Ua = F.pageY - parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-top"));
      k();
      pc = setTimeout(function() {
        if (!fd || N.className != fd.Qe) {
          if (xa.style.display = "none", fd = xg(N.className)) {
            gb.style.display = "block", gb.style.left = fa + 1 + "px", gb.style.top = Ua - 32 + "px", gb.firstChild.style.backgroundColor = N.style.backgroundColor, F.preventDefault();
          }
        }
      }, O);
    }
  }
  function e(F) {
    -1 != pc && (clearTimeout(pc), pc = -1);
    d(F);
  }
  function f(F, H) {
    for (; H && H != document.body;) {
      if (H == F) {
        return !0;
      }
      H = H.parentNode;
    }
    return !1;
  }
  function k() {
    Ld && (clearTimeout(Ld), Ld = 0);
  }
  function l() {
    fd = null;
    td = 0;
    gb && (gb.style.display = "none");
    Qj();
  }
  function n(F) {
    f(gb, F.toElement) || f(xa, F.toElement) || (-1 != pc && (clearTimeout(pc), pc = -1), Ld = setTimeout(function() {
      l();
    }, 1000));
  }
  function p(F, H) {
    var O = document.createElement("font");
    O.style.margin = "0";
    O.style.padding = "0";
    O.style.backgroundColor = H;
    O.className = F;
    O.addEventListener("mouseover", d, {capture:!0, passive:!1});
    O.addEventListener("mouseleave", n, !1);
    O.addEventListener("mousemove", e, {capture:!0, passive:!1});
    O.addEventListener("mousedown", c, {capture:!0, passive:!1});
    return O;
  }
  function t(F, H) {
    var O = document.createElement("font");
    O.style.margin = "0";
    O.style.padding = "0";
    O.style.backgroundColor = H;
    O.className = F;
    return O;
  }
  function x() {
    var F = document.getSelection();
    F && F.rangeCount && F.removeAllRanges();
  }
  function D() {
    return "annotate-highlight-plugin ";
  }
  function G(F) {
    if (window.getSelection().rangeCount) {
      var H = Bc();
      if (H.valid) {
        var O = D() + (new Date()).getTime(), N = document.getSelection();
        N.rangeCount && (H.color = F, H["class"] = O, I(N, N.getRangeAt(0), F, O, !1), F = new ny(), F.Fa(H), F.xb(), ou(F), F.ru = !0, qd = F.ta, Px({action:Ux, ub:2, F:[{nId:F.ta}]}, !0));
      }
    }
  }
  function I(F, H, O, N, fa) {
    var Ua = [], $a = H.endContainer, ub = H.startContainer, oc = H.startOffset, ib = H.endOffset, hc = !1, Kc = !1;
    if ("#text" != ub.nodeName && 0 != oc) {
      if (oc < ub.childNodes.length && "script" != ub.nodeName.toLowerCase() && "style" != ub.nodeName.toLowerCase()) {
        ub = ub.childNodes[oc];
      } else {
        for (var ic = ub.nextSibling; !ic;) {
          ic = ub.parentNode;
          if (!ic) {
            return;
          }
          if (ic == document.body) {
            break;
          }
          ic = ic.nextSibling;
        }
        ub = ic;
      }
      oc = 0;
    }
    if ("#text" != $a.nodeName && 0 != ib) {
      if (ib < $a.childNodes.length) {
        $a = $a.childNodes[ib], ib = 0;
      } else if ($a != document.body) {
        for (ic = $a.nextSibling; !ic;) {
          ic = $a.parentNode;
          if (!ic) {
            return;
          }
          if (ic == document.body) {
            break;
          }
          ic = ic.nextSibling;
        }
        $a = ic;
        ib = 0;
      }
    }
    if ("#text" == $a.nodeName && $a.textContent.length != ib) {
      if ($a.parentNode.className.startsWith(D())) {
        var gd = $a.parentNode;
        ic = fa ? t(gd.className, gd.style.backgroundColor) : p(gd.className, gd.style.backgroundColor);
        ic.textContent = $a.textContent.substr(ib);
        gd.nextSibling ? gd.parentNode.insertBefore(ic, gd.nextSibling) : gd.parentNode.appendChild(ic);
        $a.textContent = $a.textContent.substr(0, ib);
      } else {
        $a.splitText(ib);
      }
      Kc = !0;
    }
    ib = ub;
    "#text" == ub.nodeName && 0 != oc && (ub.parentNode.className.startsWith(D()) ? (hc = !0, gd = ub.parentNode, ic = fa ? t(N, gd.style.backgroundColor) : p(N, gd.style.backgroundColor), ic.textContent = ub.textContent.substr(oc), gd.nextSibling ? gd.parentNode.insertBefore(ic, gd.nextSibling) : gd.parentNode.appendChild(ic), ub.textContent = ub.textContent.substr(0, oc), $a == ub && ($a = ic.firstChild, Kc = !0), ib = ic.firstChild) : (ub.splitText(oc), $a == ub && ($a = ub.nextSibling, Kc = !0), 
    ib = ub.nextSibling));
    if (hc || Kc) {
      H = H.cloneRange(), H.setStart(ib, 0), Kc && H.setEnd($a, $a.textContent.length), F.removeAllRanges(), F.addRange(H);
    }
    for (; null != ib;) {
      F = ib;
      if (F == $a) {
        break;
      }
      "#text" == F.nodeName ? (F.textContent.trim().length && Ua.push(F), ib = F.nextSibling) : ib = "script" != F.nodeName.toLowerCase() && "style" != F.nodeName.toLowerCase() && F.childNodes.length ? F.firstChild : F.nextSibling;
      for (; !ib;) {
        F = F.parentNode;
        if (!F) {
          break;
        }
        ib = F;
        if (ib == $a) {
          break;
        }
        ib = F.nextSibling;
        if (ib == $a) {
          break;
        }
      }
    }
    ib && "#text" == ib.nodeName && ib.textContent.trim().length && Ua.push(ib);
    for ($a = 0; $a < Ua.length; ++$a) {
      Ua[$a].parentNode.className.startsWith(D()) ? (Ua[$a].parentNode.className = N, Ua[$a].parentNode.style.backgroundColor = O) : (ic = fa ? t(N, O) : p(N, O), ic.textContent = Ua[$a].textContent, 0 == $a ? Ua[$a].nextSibling ? Ua[$a].parentNode.insertBefore(ic, Ua[$a].nextSibling) : Ua[$a].parentNode.appendChild(ic) : Ua[$a].parentNode.insertBefore(ic, Ua[$a]), Ua[$a].remove());
    }
    x();
  }
  function Q(F, H) {
    var O = "";
    if (null == F) {
      return O;
    }
    if (F = ku(F)) {
      O = F.color, F.color = H;
    }
    for (var N = document.getElementsByClassName(F.Qe), fa = 0; fa < N.length; ++fa) {
      N[fa].style.backgroundColor = H;
    }
    qu(F);
    x();
    return O;
  }
  function X(F) {
    null != F && (F = ku(F)) && hu(F);
  }
  function Fa() {
    da ? Sb.v() : (S.v(), 2 == S.g ? (iu(1), iu(3)) : 3 == S.g && (iu(1), iu(2)));
    l();
  }
  function La() {
    Qj();
    var F;
    window.getSelection().rangeCount && (F = Bc());
    qe = a(hi.s.qa, 0.5);
    if (A(qd) || F && F.valid) {
      G(qe);
    } else if (da) {
      F = qe.replace("0.5", "0.2");
      let H = oy(qd);
      H && F != H.color && (F = py(Sb, qd, F), F = {action:Vx, ub:2, F:[Object.assign({}, F)]}, Px(F, !0));
    } else {
      F = Q(qd, qe), "" != F && Px({action:Vx, ub:2, F:[{nId:qd, color:F}]}, !0);
    }
  }
  function Aa() {
    fd && (gb.style.display = "flex", k());
  }
  function Ha() {
    xa = mk(gc, function(F) {
      var H = document.getElementById("annotate-highlight-plugin-edit");
      F = F.currentTarget.style.backgroundColor;
      H.style.backgroundColor = F;
      var O = F.replace(/^rgba?\(|\s+|\)$/g, "").split(",");
      var N = `#${(16777216 + (parseInt(O[0]) << 16) + (parseInt(O[1]) << 8) + parseInt(O[2])).toString(16).slice(1)}`;
      O = document.getElementsByClassName("annotate-highlight-plugin-texthighlight-toolbar-button");
      N = hi.s.Cc.indexOf(N);
      for (var fa = 0; fa < O.length; fa++) {
        O[fa].style.borderBottom = fa == N ? "3px solid #2196f3" : "0";
      }
      hi.s.Za = N;
      hi.s.qa = hi.s.Cc[hi.s.Za];
      vi(hi);
      Qj();
      da ? td && (H = H.style.backgroundColor.replace("0.5", "0.2"), (F = oy(td)) && H != F.color && (H = py(Sb, td, H), H = {action:Vx, ub:2, F:[Object.assign({}, H)]}, Px(H, !0))) : fd && (H = Q(fd.ta, F), "" != H && Px({action:Vx, ub:2, F:[{nId:fd.ta, color:H}]}, !0));
    });
    gb = hk({parent:document.body, id:"annotate-highlight-plugin-toolbar", style:{position:"absolute", backgroundColor:"rgb(255,255,255)", zIndex:Yj, padding:"4px", border:"1px solid #c0c0c0", display:"none", fontSize:0, fontWeight:"normal"}, buttons:[{id:"annotate-highlight-plugin-edit", title:"Change color", style:{height:"24px", width:"24px", "float":"left", backgroundColor:gc[0], border:"1px solid #c0c0c0", borderRadius:"50%", boxSizing:"border-box"}, UC:xa}, {id:"annotate-highlight-plugin-color-sep", 
    style:{height:"24px", width:"1px", "float":"left", backgroundColor:"#c0c0c0", marginLeft:"4px", boxSizing:"border-box"}}, {id:"annotate-highlight-plugin-delete", title:"Delete", className:"extension_icon extension_icon-delete", style:{height:"24px", width:"24px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", color:"#000000"}, Qa:function() {
      if (da) {
        if (td) {
          var F = qy(Sb, td);
          F && (F = {action:Qx, ub:2, F:[Object.assign({}, F)]}, Px(F, !0));
        }
      } else {
        fd && (F = fd.Na(), F = {action:Qx, ub:2, F:[Object.assign({}, F)]}, Px(F, !0), hu(fd), mf());
      }
      l();
    },}, {id:"annotate-highlight-plugin-color-sep", style:{height:"24px", width:"1px", "float":"left", backgroundColor:"#c0c0c0", marginLeft:"4px", boxSizing:"border-box"}}, {id:"annotate-highlight-plugin-do-not-show", title:"Close", className:"extension_icon extension_icon-close", style:{height:"24px", width:"24px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", color:"#000000"}, Qa:aa,}]});
    xa.addEventListener("mouseover", Aa, !1);
    xa.addEventListener("mouseleave", n, !1);
    gb.addEventListener("mouseover", Aa, !1);
    gb.addEventListener("mouseleave", n, !1);
  }
  function aa() {
    l();
  }
  function ya() {
    qe = a(hi.s.qa, 0.5);
    if (da) {
      var F = Sb;
      var H = qe.replace("0.5", "0.2"), O = ql();
      let Ua = new ry();
      var N = Ua, fa = F.selection;
      N.id = (new Date()).getTime();
      N.en = fa.en;
      N.g = fa.g;
      N.i = fa.i;
      N.j = fa.j;
      N.color = H;
      Ua.xb();
      ou(Ua);
      H = Ua.Na();
      H.type = "ANNOTATE_PDF_ADD_HIGHLIGHT";
      H.uDocType = O;
      F.g.g(H);
      F = Ua;
      O = {action:Ux, ub:2, F:[F.Na()]};
      qd = F.Na().id;
      Px(O, !0);
    } else {
      G(qe);
    }
  }
  function fc(F) {
    F = F.target;
    !ia || F.id.startsWith("annotate-highlight-plugin-") || da || ya();
    qd = null;
  }
  function ed() {
    Ha();
    window.addEventListener("mouseup", fc, {capture:!0});
  }
  function Bc() {
    var F = {valid:!1, content:"", nth:1}, H;
    if (window.getSelection) {
      var O = window.getSelection();
      if (O.removeAllRanges) {
        O = Kb(H = O.getRangeAt(0));
        if ("" == O.trim()) {
          return F;
        }
        var N = H.endContainer;
      } else {
        O = String(O);
      }
    } else {
      O = document.getSelection();
    }
    O = Xe(O);
    if ("" == O) {
      return F;
    }
    F.content = O;
    F.valid = !0;
    if (N) {
      var fa = "";
      yc(document.body, N, H, function(Ua) {
        fa += Ua;
      });
      fa = fa.replace(/\s+/mg, " ");
      H = wh(F.content, fa);
      F.nth = H.length;
    }
    return F;
  }
  function Kb(F) {
    if (void 0 == F.htmlText) {
      var H = document.createElement("div");
      H.append(F.cloneContents());
      F = H.innerHTML;
    } else {
      F = F.htmlText;
    }
    return Cb(F);
  }
  function Cb(F) {
    return F.replace(RegExp("(?:<script.*?>)((\n|\r|.)*?)(?:\x3c/script>)", "img"), "");
  }
  function Xe(F) {
    var H = document.createElement("div");
    H.innerHTML = Cb(F);
    var O = "";
    yc(H, null, null, function(N) {
      O += N;
    });
    H.remove();
    return O.replace(/\s+/mg, " ").replace(/^\s|\s$/mg, "");
  }
  function yc(F, H, O, N) {
    var fa = !1, Ua = "applet area base basefont bdo button frame frameset iframe head hr img input link map meta noframes noscript optgroup option param script select style textarea title".split(" ");
    if (3 == F.nodeType || 1 == F.nodeType && -1 == Ua.indexOf(F.tagName.toLowerCase())) {
      for (3 == F.nodeType && (Ua = F.nodeValue, H && F == H && (fa = !0, O && (Ua = Ua.slice(0, O.endOffset))), N(Ua, F)), F = F.firstChild; F && !fa;) {
        fa = yc(F, H, O, N), F = F.nextSibling;
      }
    }
    return fa;
  }
  function wh(F, H, O) {
    for (var N = [], fa, Ua = 0, $a = 0; -1 < (fa = H.indexOf(F, Ua)) && !($a++, Ua = fa + 1, N.push(fa), O && $a >= O);) {
    }
    return N;
  }
  function wg() {
    var F = "", H = [], O = !1;
    yc(document.body, null, null, function(N, fa) {
      N = N.replace(/\s+/mg, " ");
      0 < N.length && (/^\s$/m.test(N) ? O || (F += " ", O = !0) : (O && (N = N.replace(/^\s+/m, "")), H.push({offset:F.length, node:fa, length:N.length}), F += N, O = /\s$/m.test(N)));
    });
    return {strDocument:F, arrDocTextNodeOffset:H};
  }
  function Ue(F, H, O) {
    var N = wh(F, O.strDocument, H), fa = -1;
    N.length >= H ? fa = N[H - 1] : 0 < N.length && (fa = N[N.length - 1]);
    if (-1 == fa) {
      return null;
    }
    H = fa + F.length - 1;
    N = O.arrDocTextNodeOffset.length;
    for (var Ua, $a, ub, oc, ib, hc, Kc = 0; Kc < N; Kc++) {
      ib = O.arrDocTextNodeOffset[Kc];
      if (fa == ib.offset || fa > ib.offset && (Kc + 1 == N || fa < O.arrDocTextNodeOffset[Kc + 1].offset)) {
        Ua = ib.node, hc = ib;
      }
      if (H == ib.offset || H > ib.offset && (Kc + 1 == N || H < O.arrDocTextNodeOffset[Kc + 1].offset)) {
        $a = ib.node;
        oc = ib;
        ub = F;
        F = H;
        O = {};
        N = !1;
        if (hc == oc) {
          H = hc.node.nodeValue;
          for (fa -= hc.offset; fa < H.length; fa++) {
            if (0 == H.slice(fa).replace(/\s+/mg, " ").indexOf(ub)) {
              O.startOffset = fa;
              N = !0;
              break;
            }
          }
          if (N) {
            for (fa = O.startOffset + ub.length; fa <= H.length; fa++) {
              if (-1 < H.slice(O.startOffset, fa).replace(/\s+/mg, " ").indexOf(ub)) {
                O.endOffset = fa;
                break;
              }
            }
          }
        } else {
          H = hc.node.nodeValue;
          ib = ub.slice(0, hc.offset + hc.length - fa);
          for (fa -= hc.offset; fa <= H.length - ib.length; fa++) {
            if (0 == H.slice(fa).replace(/\s+/mg, " ").indexOf(ib)) {
              O.startOffset = fa;
              N = !0;
              break;
            }
          }
          if (N) {
            for (H = oc.node.nodeValue, ib = ub.slice(ub.length - (F - oc.offset + 1)), fa = F - oc.offset + 1; fa <= H.length; fa++) {
              if (-1 < H.slice(0, fa).replace(/\s+/mg, " ").indexOf(ib)) {
                O.endOffset = fa;
                break;
              }
            }
          }
        }
        hc = O;
        ub = hc.startOffset;
        oc = hc.endOffset;
        break;
      }
    }
    return Ua && $a ? (hc = document.createRange(), hc.setStart(Ua, ub), hc.setEnd($a, oc), hc) : null;
  }
  function Uf(F) {
    var H = [], O = ju();
    for (let N = 0; N < O.length; N++) {
      null != F && F == O[N].ta && H.push(O[N].Na());
    }
    return H;
  }
  function Th(F, H) {
    if (da) {
      sy(Sb, F, H);
    } else {
      for (var O = 0; O < F.length; O++) {
        let N = We(F[O]);
        if (H) {
          pu(N, H);
        } else {
          let fa = Oo(S);
          fa && fa.ye.push(N);
        }
      }
    }
  }
  function We(F) {
    if (F) {
      var H = new ny();
      H.Fa(F);
      return H;
    }
  }
  function xh(F) {
    if (!da) {
      var H = wg();
      if (H = Ue(F.g, F.i, H)) {
        I(document.getSelection(), H, F.color, F.Qe, !1), F.ru = !0;
      }
    }
  }
  function mf() {
    let F = ju();
    for (let H = 0; H < F.length; H++) {
      xh(F[H]);
    }
  }
  function xg(F) {
    return ju().find(H => H.Qe == F);
  }
  function wc() {
    document.getElementById("annotate-highlight-plugin-addhightlighttoolbar") && document.getElementById("annotate-highlight-plugin-addhightlighttoolbar").remove();
    document.getElementById("annotate-highlight-plugin-toolbar") && document.getElementById("annotate-highlight-plugin-toolbar").remove();
  }
  var ia = !1, gb = null, xa = null, fd = null, qd = null, Ld = 0, fe = !1, gc = "rgba(247,238,0,0.5) rgba(244,20,137,0.5) rgba(48,240,191,0.5) rgba(253,253,150,0.5) rgba(33,174,239,0.5) rgba(188,255,0,0.5) rgba(153,48,242,0.5) rgba(255,186,2,0.5)".split(" "), qe = gc[0], pc = -1, da = !1, Sb = null, td = 0;
  wc();
  Fa();
  window.top == window && ed();
  return {xi:ed, eL:function() {
    ia = !0;
  }, Py:function() {
    ia = !1;
    l();
    qd = null;
  }, DM:Fa, EM:function() {
    da ? Gp(Sb) : gu();
    l();
    qd = null;
  }, LL:function() {
    let F = ju();
    for (let N = 0; N < F.length; N++) {
      for (var H = document.getElementsByClassName(F[N].Qe), O = H.length - 1; 0 <= O; O--) {
        H[O].className += " annotate-hightlight-hide";
      }
    }
  }, pN:function() {
    let F = ju();
    for (let fa = 0; fa < F.length; fa++) {
      for (var H = document.getElementsByClassName(F[fa].Qe + " annotate-hightlight-hide"), O = H.length - 1; 0 <= O; O--) {
        var N = H[O];
        -1 != N.className.search("annotate-hightlight-hide") && (N.className = N.className.split("annotate-hightlight-hide").join(""));
      }
    }
  }, ll:function(F, H) {
    let O = ju();
    1 == F ? O = lu() : 2 == F ? O = mu() : 3 == F && (O = nu());
    if (H) {
      for (var N = 0; N < O.length; N++) {
        for (F = document.getElementsByClassName(O[N].Qe + " annotate-hightlight-hide"), H = F.length - 1; 0 <= H; H--) {
          var fa = F[H];
          -1 != fa.className.search("annotate-hightlight-hide") && (fa.className = fa.className.split("annotate-hightlight-hide").join(""));
        }
      }
    } else {
      for (N = 0; N < O.length; N++) {
        for (F = document.getElementsByClassName(O[N].Qe), H = F.length - 1; 0 <= H; H--) {
          fa = F[H], fa.className += " annotate-hightlight-hide";
        }
      }
    }
  }, rg:x, pG:function(F) {
    let H = [];
    if (F) {
      if (si()) {
        return ty(F);
      }
      F = F.ye;
      for (let O = 0; O < F.length; ++O) {
        H.push(F[O].Na());
      }
    }
    return H;
  }, mF:Th, ML:function(F) {
    var H = Bc();
    if (H.valid) {
      var O = document.getSelection();
      if (O.rangeCount) {
        var N = "annotate-comment-highlight " + (new Date()).getTime();
        H.color = F;
        H["class"] = N;
        I(O, O.getRangeAt(0), F, N, !0);
        F = new ny();
        F.Fa(H);
        F.xb();
        F.ru = !0;
        return F;
      }
    }
  }, mI:function(F, H) {
    da ? F = uy(Sb, F, H) : (F = We(F), pu(F, H));
    return F;
  }, wq:function(F) {
    if (F.action == Ux) {
      if (da) {
        if (F = qy(Sb, F.F[0].id)) {
          F = {action:$x, ub:2, F:[Object.assign({}, F)]}, Zx(F);
        }
      } else {
        var H = Uf(F.F[0].nId);
        H && Zx({action:$x, ub:2, F:H});
        X(F.F[0].nId);
        mf();
      }
    } else {
      F.action == Qx ? (da ? uy(Sb, F.F[0], S.g) : (Th(F.F, S.g), mf()), Zx({action:ay, ub:2, F:F.F})) : F.action == Vx && (da ? (F = py(Sb, F.F[0].id, F.F[0].color), F = {action:by, ub:2, F:[Object.assign({}, F)]}, Zx(F)) : (H = Q(F.F[0].nId, F.F[0].color), Zx({action:by, ub:2, F:[{nId:F.F[0].nId, color:H}]})));
    }
  }, ls:function(F) {
    if (F.action == ay) {
      if (da) {
        if (F = qy(Sb, F.F[0].id)) {
          F = {action:Qx, ub:2, F:[Object.assign({}, F)]}, Px(F);
        }
      } else {
        var H = Uf(F.F[0].nId);
        H && Px({action:Qx, ub:2, F:H});
        X(F.F[0].nId);
        mf();
      }
    } else {
      F.action == $x ? da ? (uy(Sb, F.F[0], S.g), Px({action:Ux, ub:2, F:[F.F[0]]}, !1)) : (Th(F.F, S.g), mf(), Px({action:Ux, ub:2, F:[{nId:F.F[0].nId}]}, !1)) : F.action == by && (da ? (F = py(Sb, F.F[0].id, F.F[0].color), F = {action:Vx, ub:2, F:[Object.assign({}, F)]}, Px(F, !1)) : (H = Q(F.F[0].nId, F.F[0].color), Px({action:Vx, ub:2, F:[{nId:F.F[0].nId, color:H}]}, !1)));
    }
  }, iN:function() {
    da = !0;
  }, hN:function(F) {
    Sb = F;
  }, KO:function() {
  }, wI:function(F) {
    if (!ia || !vy(Sb.selection) || !F) {
      return !1;
    }
    ya();
  }, mO:function() {
  }, ez:l, oN:function(F, H, O) {
    if (ia && !vy(Sb.selection) && (O && (fe = !1), !fe)) {
      var N = H.x - parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-left")), fa = H.y - parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-top"));
      k();
      -1 != pc && (clearTimeout(pc), pc = -1);
      pc = setTimeout(function() {
        let Ua = oy(F);
        Ua ? F != td && Ua && (qd = Ua.id, td = F, xa.style.display = "none", gb.style.display = "block", gb.style.left = N + 1 + "px", gb.style.top = fa - 32 + "px", document.getElementById("annotate-highlight-plugin-edit").style.backgroundColor = Ua.color) : (td = 0, l());
      }, O ? 0 : 1000);
    }
  }, mq:xh, FE:function(F) {
    if (!da && F) {
      var H = wg();
      if (H = Ue(F.g, F.i, H)) {
        I(document.getSelection(), H, F.color, F.Qe, !0), F.ru = !0;
      }
    }
  }, Nr:function(F, H, O) {
    if (da) {
      wy(Sb, H.id, O);
    } else {
      if (F) {
        for (F = document.getElementsByClassName(F), H = F.length - 1; 0 <= H; H--) {
          O = F[H], O.previousSibling && 1 == O.previousSibling.nodeType && "FONT" == O.previousSibling.nodeName && O.nextSibling && 1 == O.nextSibling.nodeType && "FONT" == O.nextSibling.nodeName && O.previousSibling.className == O.nextSibling.className ? (O.className = O.previousSibling.className, O.style.backgroundColor = O.previousSibling.style.backgroundColor) : (O.parentNode.insertBefore(document.createTextNode(O.textContent), O), O.remove());
        }
      }
    }
  }, vI:function(F, H) {
    if (da) {
      var O = Sb, N = F.color;
      let fa = {type:"ANNOTATE_PDF_UPDATE_HIGHLIGHT"};
      fa.id = F.id;
      fa.color = N;
      fa.uDocType = H;
      O.g.g(fa);
    }
  }, HI:La, JJ:function(F, H) {
    for (var O = document.getElementsByClassName("annotate-highlight-plugin-texthighlight-toolbar-button"), N = 0; N < O.length; N++) {
      O[N].style.borderBottom = "0";
    }
    0 > F || F >= gc.length || O.length != gc.length || (O[F].style.borderBottom = "3px solid #2196f3", hi.s.Za = F, hi.s.qa = hi.o.Cc[F], H && vi(hi), La());
  }, qJ:function() {
    Qj();
    G(qe);
  }, gb:function() {
    window.removeEventListener("mouseup", fc, {capture:!0});
    wc();
    Fa();
  }};
}();
class ny extends Wm {
  constructor() {
    super();
    this.j = !1;
    this.g = "";
    this.i = 1;
    this.color = null;
    this.Qe = "";
    this.ru = !1;
  }
  Fa(a) {
    super.Fa(a);
    "valid" in a && (this.j = a.valid);
    "content" in a && (this.g = a.content);
    "nth" in a && (this.i = parseInt(a.nth));
    "color" in a && (this.color = a.color);
    "class" in a && (this.Qe = a["class"]);
  }
  Ad(a) {
    super.Ad(a);
    "valid" in a && (this.j = a.valid);
    "content" in a && (this.g = a.content);
    "nth" in a && (this.i = parseInt(a.nth));
    "color" in a && (this.color = a.color);
  }
  Na() {
    var a = super.Na();
    this.Fb(a);
    return a;
  }
  Fb(a) {
    a.valid = this.j;
    a.content = this.g;
    a.nth = this.i;
    a.color = this.color;
    a["class"] = this.Qe;
  }
  Ul(a) {
    this.Fb(a);
  }
}
;var xy = 1000 / 60;
function yy(a) {
  -1 != a.G && (clearTimeout(a.G), a.G = -1);
}
function zy(a, b) {
  if (!(2 > a.i.length)) {
    a.g.save();
    a.g.scale(b, b);
    var c = a.g.globalCompositeOperation;
    a.i.push(a.i[a.i.length - 2]);
    a.i.push(a.i[a.i.length - 2]);
    a.i.shift();
    for (a.i.shift(); 0 < a.i.length;) {
      var d = Ay(a.i);
      d.Rc = Math.round(100 * d.Rc) / 100;
      d.Xc = Math.round(100 * d.Xc) / 100;
      a.wd.push(d.Rc);
      a.wd.push(d.Xc);
      a.i.shift();
      a.i.shift();
      lz(a, b);
    }
    a.g.restore();
    a.g.globalCompositeOperation = c;
  }
}
function mz(a, b) {
  yy(a);
  a.G = setTimeout(() => {
    a.G = -1;
    a.o && (a.i.push(a.B.Rc), a.i.push(a.B.Xc), a.o = !1, a.B = null);
    zy(a, b);
  }, 100);
}
function nz(a) {
  var b = Ay(a.i);
  b.Rc = Math.round(100 * b.Rc) / 100;
  b.Xc = Math.round(100 * b.Xc) / 100;
  a.wd.push(b.Rc);
  a.wd.push(b.Xc);
}
function lz(a, b) {
  var c = Vm(a);
  c && (a.g.beginPath(), a.g.rect(c.x, c.y, c.width, c.height), a.g.clip(), a.g.beginPath());
  if (1 > a.m) {
    a.g.globalCompositeOperation = "destination-out";
    a.g.lineJoin = "round";
    a.g.lineCap = "round";
    a.g.lineWidth = a.lineWidth + 2;
    a.g.strokeStyle = "rgba(0,0,0,1)";
    a.g.beginPath();
    c = !0;
    for (var d = [], e = a.ea; e < a.wd.length; e += 2) {
      d.push(a.wd[e]), d.push(a.wd[e + 1]), 2 < d.length && (oz(a, d, c, b), c = !1);
    }
    a.g.stroke();
    a.g.globalCompositeOperation = "source-over";
    a.g.lineWidth = a.lineWidth;
    a.g.strokeStyle = jh(a.strokeStyle, a.m);
  } else {
    a.g.globalCompositeOperation = "source-over", a.g.lineJoin = "round", a.g.lineCap = "round", a.g.lineWidth = a.lineWidth, a.g.strokeStyle = jh(a.strokeStyle, a.m), a.g.beginPath(), oz(a, a.wd, !0, b);
  }
  a.g.stroke();
}
function Ay(a) {
  var b = {Rc:0, Xc:0};
  if (0 < a.length) {
    for (var c = 0; c < a.length; c += 2) {
      b.Rc += a[c], b.Xc += a[c + 1];
    }
    b.Rc = 2 * b.Rc / a.length;
    b.Xc = 2 * b.Xc / a.length;
  }
  return b;
}
function oz(a, b, c, d) {
  if (4 < b.length) {
    var e = b[b.length - 6];
    var f = b[b.length - 5];
    var k = b[b.length - 4];
    var l = b[b.length - 3];
    e = (e + k) / 2;
    f = (f + l) / 2;
    var n = b[b.length - 2];
    var p = b[b.length - 1];
    b = (k + n) / 2;
    n = (l + p) / 2;
  } else if (2 < b.length) {
    e = b[0], f = b[1], k = e, l = f, n = b[2], p = b[3], b = (k + n) / 2, n = (l + p) / 2;
  } else {
    return;
  }
  p = window.scrollX;
  var t = window.scrollY, x = Um(a);
  p -= x.x;
  t -= x.y;
  c && a.g.moveTo(e - p + a.Ze.x / d - a.l.x, f - t + a.Ze.y / d - a.l.y);
  lk(a.g, {Rc:e - p + a.Ze.x / d - a.l.x, Xc:f - t + a.Ze.y / d - a.l.y}, {Rc:k - p + a.Ze.x / d - a.l.x, Xc:l - t + a.Ze.y / d - a.l.y}, {Rc:b - p + a.Ze.x / d - a.l.x, Xc:n - t + a.Ze.y / d - a.l.y});
}
function pz(a, b, c, d, e, f, k, l, n, p, t, x, D, G, I, Q) {
  var X = x - a;
  G -= a;
  var Fa = D - b;
  I -= b;
  var La = a - x;
  x = c - x;
  var Aa = b - D;
  D = d - D;
  c -= a;
  d -= b;
  a = b = 0;
  var Ha = c, aa = d, ya = -d, fc = c, ed = Ha * Ha + aa * aa, Bc = c - a, Kb = d - b;
  Bc = 0 > Bc ? -Bc : Bc;
  Kb = 0 > Kb ? -Kb : Kb;
  if (Bc >= Kb) {
    var Cb = (X * Ha + Fa * aa) / ed * Ha;
    d = aa = (G * Ha + I * aa) / ed * Ha;
    Ha = Cb;
    Cb < aa && (d = Cb, Ha = aa);
    Cb = a;
    aa = c;
    a < c && (aa = a, Cb = c);
    c = !(d > Cb + Q || Ha < aa - Q);
  } else {
    Cb = (X * Ha + Fa * aa) / ed * aa, c = aa *= (G * Ha + I * aa) / ed, Ha = Cb, Cb < aa && (c = Cb, Ha = aa), Cb = b, aa = d, b < d && (aa = b, Cb = d), c = !(c > Cb + Q || Ha < aa - Q);
  }
  if (!c) {
    return !1;
  }
  Bc < Kb ? (Cb = (X * ya + Fa * fc) / ed * ya, aa = (G * ya + I * fc) / ed * ya, c = Cb - Q <= a && a <= aa + Q || aa - Q <= a && a <= Cb + Q) : (Cb = (X * ya + Fa * fc) / ed * fc, aa = (G * ya + I * fc) / ed * fc, c = Cb - Q <= b && b <= aa + Q || aa - Q <= b && b <= Cb + Q);
  if (!c) {
    return !1;
  }
  Bc = e - 0;
  Kb = f - 0;
  Bc = 0 > Bc ? -Bc : Bc;
  Kb = 0 > Kb ? -Kb : Kb;
  Bc >= Kb ? (Cb = (La * k + Aa * l) / t * k, d = aa = (x * k + D * l) / t * k, Ha = Cb, Cb < aa && (d = Cb, Ha = aa), Cb = 0, aa = e, 0 < e && (aa = 0, Cb = e), c = !(d > Cb + Q || Ha < aa - Q)) : (Cb = (La * k + Aa * l) / t * l, c = aa = (x * k + D * l) / t * l, Ha = Cb, Cb < aa && (c = Cb, Ha = aa), Cb = 0, aa = f, 0 < f && (aa = 0, Cb = f), c = !(c > Cb + Q || Ha < aa - Q));
  if (!c) {
    return !1;
  }
  Bc < Kb ? (Cb = (La * n + Aa * p) / t * n, aa = (x * n + D * p) / t * n, c = 0 >= Cb - Q && 0 <= aa + Q || 0 >= aa - Q && 0 <= Cb + Q) : (aa = (x * n + D * p) / t * p, Cb = (La * n + Aa * p) / t * p, c = 0 >= Cb - Q && 0 <= aa + Q || 0 >= aa - Q && 0 <= Cb + Q);
  return c ? !0 : !1;
}
function qz(a, b, c) {
  b = Math.round(100 * b) / 100;
  c = Math.round(100 * c) / 100;
  a.wd.push(b);
  a.wd.push(c);
}
function rz(a, b, c) {
  a.g = b;
  a.g.save();
  b = a.g.globalCompositeOperation;
  a.ea = eb.MG() ? 50 * Math.floor(a.wd.length / 50) : 0;
  lz(a, c);
  a.g.globalCompositeOperation = b;
  a.g.restore();
}
class Bo extends Wm {
  constructor(a, b, c, d, e, f) {
    super();
    this.g = a;
    this.lineWidth = c ? c : 3;
    this.strokeStyle = b ? b : "#222222";
    this.m = d ? d : 1;
    this.i = [];
    this.ya = this.o = !1;
    this.v;
    this.wd = [];
    this.ea = 0;
    this.globalCompositeOperation = "source-over";
    this.Ha = !1;
    this.G = -1;
    this.B = null;
    this.j = e ? e : 1;
    this.Ze = f ? f : {x:0, y:0, height:0, width:0};
    this.l = {x:0, y:0};
    this.N = 0;
  }
  kl(a) {
    this.S = a;
  }
  Vn(a) {
    this.Ze = a;
  }
  Xe() {
    return this.Ze;
  }
  Nn() {
    return this.j;
  }
  Km(a) {
    this.j = a;
  }
  nq(a) {
    this.l = a;
  }
  Ft(a, b, c) {
    this.ea = 0;
    this.Ha = !0;
    a = {Rc:a - this.Ze.x, Xc:b - this.Ze.y};
    this.Cb && (b = Ek(a.Rc, a.Xc, this.Cb), a.Rc = b.x, a.Xc = b.y);
    a.Rc /= c;
    a.Xc /= c;
    this.i.push(a.Rc);
    this.i.push(a.Xc);
    nz(this);
    this.o = this.ya = !0;
    this.B = a;
    this.v = Date.now();
  }
  Ro(a, b, c) {
    mz(this, c);
    a = {Rc:a - this.Ze.x, Xc:b - this.Ze.y};
    this.Cb && (b = Ek(a.Rc, a.Xc, this.Cb), a.Rc = b.x, a.Xc = b.y);
    var d = b = 0;
    0 < this.wd.length && (b = Math.round(Math.abs(this.wd[this.wd.length - 2] * c - a.Rc)), d = Math.round(Math.abs(this.wd[this.wd.length - 1] * c - a.Xc)));
    a.Rc /= c;
    a.Xc /= c;
    var e = Date.now();
    !this.o && e - this.v < xy && 1 > b && 1 > d ? (this.o = !0, this.B = a) : 1 > b && 1 > d || (this.i.push(a.Rc), this.i.push(a.Xc), 6 < this.i.length && (this.i.shift(), this.i.shift()), this.o = !1, this.B = null, this.v = e, this.Ha = !1, this.ea = 0, nz(this), 4 > this.wd.length || (this.g.save(), this.g.scale(c, c), lz(this, c), this.g.restore()));
  }
  Em(a, b, c) {
    this.ya = !1;
    this.Ha ? this.Ro(a + 1, b + 1, c) : (this.Ro(a, b, c), zy(this, c));
    yy(this);
  }
  Lc() {
    return this.ya;
  }
  cb() {
    return "pen";
  }
  Xf(a) {
    var b = this.j;
    a.save();
    var c = Vm(this);
    c && (a.beginPath(), a.rect(c.x, c.y, c.width, c.height), a.clip(), a.beginPath());
    a.scale(b, b);
    a.lineJoin = "round";
    a.lineCap = "round";
    a.lineWidth = this.lineWidth;
    a.strokeStyle = jh(this.strokeStyle, this.m);
    var d = window.scrollY, e = window.scrollX;
    c = Um(this);
    e -= c.x;
    d -= c.y;
    c = [];
    for (var f = 0; f < this.wd.length; f += 2) {
      c.push({Rc:this.wd[f] - e + this.Ze.x / b - this.l.x / b, Xc:this.wd[f + 1] - d + this.Ze.y / b - this.l.y / b});
    }
    if (c.length) {
      b = c[0].Rc;
      d = c[0].Xc;
      e = b;
      var k = d;
      a.beginPath();
      if (1 == c.length) {
        a.moveTo(b, d), a.lineTo(b + 0.5, d + 0.5);
      } else if (2 == c.length) {
        a.moveTo(b, d), a.lineTo(c[1].Rc, c[1].Xc);
      } else {
        a.moveTo(b, d);
        for (f = 1; f < c.length; f++) {
          var l = c[f].Rc;
          var n = c[f].Xc;
          var p = (b + l) / 2;
          var t = (d + n) / 2;
          lk(a, {Rc:e, Xc:k}, {Rc:b, Xc:d}, {Rc:p, Xc:t});
          e = p;
          k = t;
          b = l;
          d = n;
        }
        a.lineTo(b, d);
      }
      a.stroke();
    }
    a.restore();
  }
  Dg() {
    return this.lineWidth;
  }
  Na() {
    var a = super.Na();
    a.strElement = this.cb();
    a.arrDrawingPts = this.wd;
    a.strStrokeStyle = this.strokeStyle;
    a.strlineWidth = this.lineWidth;
    a.strStrokeAlpha = this.m;
    a.uGlobalScale = this.j;
    a.offsetPoint = this.Ze;
    a.pageIndex = this.S;
    return a;
  }
  Fa(a) {
    super.Fa(a);
    "arrDrawingPts" in a && (this.wd = a.arrDrawingPts);
    "strStrokeStyle" in a && (this.strokeStyle = a.strStrokeStyle);
    this.j = a.uGlobalScale ? a.uGlobalScale : 1;
    this.Ze = a.offsetPoint ? a.offsetPoint : {x:0, y:0, height:0, width:0};
    "strlineWidth" in a && (this.lineWidth = a.strlineWidth);
    "strStrokeAlpha" in a && (this.m = a.strStrokeAlpha);
    "pageIndex" in a && (this.S = a.pageIndex);
  }
  Fb(a) {
    a.strElement = this.cb();
    a.arrDrawingPts = this.wd;
    a.strStrokeStyle = this.strokeStyle;
    a.strlineWidth = this.lineWidth;
    a.strStrokeAlpha = this.m;
    a.uGlobalScale = this.j;
    a.offsetPoint = this.Ze;
    a.pageIndex = this.S;
  }
  ib(a) {
    let b = null;
    if (0 < a) {
      var c = this.J() - a;
      let d = null;
      c = this.wd.length >= a + c ? c : this.wd.length - a;
      this.wd.length > a && (d = this.wd.slice(a, a + c));
      if (a = d) {
        b = {};
        for (c = 0; c < a.length; c += 2) {
          a[c] = Math.round(100 * a[c]) / 100, a[c + 1] = Math.round(100 * a[c + 1]) / 100;
        }
        b.arrDrawingPts = a;
        b.strElement = this.cb();
      }
    } else {
      b = this.bh(), b.bFirstPoints = 1;
    }
    return b;
  }
  J() {
    return this.wd.length;
  }
  lb() {
    return 4;
  }
}
;class sz extends Bo {
  constructor(a, b) {
    super(a, "#C0C0C0", 10, 0.5, 1, b);
  }
  cb() {
    return "eraser";
  }
}
;class Fo extends Bo {
  constructor(a, b, c, d, e, f) {
    super(a, b, c, d, e, f);
    this.lineWidth = c ? c : 14;
    this.m = d ? d : 0.5;
    this.j = e ? e : 1;
    this.Ze = f ? f : {x:0, y:0, height:0, width:0};
  }
  cb() {
    return "highlighter";
  }
}
;class tz {
  constructor(a, b, c, d) {
    this.left = a;
    this.top = b;
    this.width = c;
    this.height = d;
  }
  vd() {
    return this.left;
  }
  rd() {
    return this.top;
  }
  Oo() {
    return this.left + this.width;
  }
  fq() {
    return this.top + this.height;
  }
}
function uz(a) {
  a.el.style.display = !a.visible || si() && !Vk(P) ? "none" : a.display;
}
function vz(a) {
  if (si()) {
    if (a.el && a.Ca) {
      var b = P.D, c = yo(b, a.Ca.S);
      -1 == c && wz(b, a.Ca.S) && (c = xz(b, a.Ca.S));
      if (-1 != c) {
        var d = hl(b, c, new il(b.scrollX, b.scrollY));
        d = {x:-d.$a + b.scrollX, y:-d.Ua + b.scrollY, width:jl(b, c), height:kl(b, c), scale:b.scale};
        c = d.scale / a.Ca.A.scale;
        var e = a.Ca.offsetLeft, f = a.Ca.offsetTop;
        b && b.Ea && a.el.parentElement == document.body && a.Kd(b.Bb);
        b = (e - a.Ca.A.x) * c + d.x;
        c = (f - a.Ca.A.y) * c + d.y;
        a.Ca.A.x = d.x;
        a.Ca.A.y = d.y;
        a.Ca.A.width = d.width;
        a.Ca.A.height = d.height;
        a.Ca.A.scale = d.scale;
        a.ef(d.scale);
        a.De(b, c);
        a.ec(!1);
      }
    }
  } else {
    (f = P.A) && f.height && f.width && !(0 >= f.height && 0 >= f.width) && a.Ca && a.Ca.A && (d = 1, a.Ca.A.width && (d = f.width / a.Ca.A.width), b = (a.Ca.offsetLeft - a.Ca.A.x) * d + f.x, c = (a.Ca.offsetTop - a.Ca.A.y) * d + f.y, a.Ca.A.x = f.x, a.Ca.A.y = f.y, a.Ca.A.width = f.width, a.Ca.A.height = f.height, a.Ca.A.scale *= d, a.ef(a.Ca.A.scale), a.De(b, c), a.ec(!1));
  }
}
function yz(a) {
  let b = new zz();
  b.jb((4).toString());
  R(b, "extension_icon-move");
  b.uc("Drag to move");
  b.Le(a.Zb() + "_DragButton");
  b.V(Az.Zg, Az.Zg);
  return b;
}
function Bz(a) {
  if (!A(a.Ca)) {
    var b = a.Ca.S;
    if (-1 != b && Vk(P)) {
      var c = P.D;
      b = yo(c, b);
      var d = Object.assign({}, a.Ca.A), e = fl(c, a.Ca.offsetTop - d.y + ox(c, b)).S;
      e != b && (b = hl(c, e, new il(c.scrollX, c.scrollY)), d = {x:-b.$a + c.scrollX, y:-b.Ua + c.scrollY, width:jl(c, e), height:kl(c, e), scale:c.scale}, a.Ca.S = ll(c, e), a.Ca.A = d);
    }
  }
}
function Cz(a, b) {
  a.sg = a.left;
  a.tg = a.top;
  a.lc = a.width;
  a.zc = a.height;
  a.Eb = b.clientX;
  a.Ib = b.clientY;
}
function Dz(a) {
  let b = parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-left")), c = parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-top")), d = document.body.scrollWidth, e = document.body.scrollHeight;
  var f = b;
  let k = c, l = d, n = e;
  if (Vk(P)) {
    let p = P.D;
    d = Nx(p);
    e = Ox(p);
    c = b = 0;
    a = a.Ca && -1 != a.Ca.S ? yo(p, a.Ca.S) : -1;
    -1 != a && (k = ox(p, a), f = Ez(p, a), l = jl(p, a), n = kl(p, a));
  } else {
    a.Ca && a.Ca.A && Jk(P) && (f = a.Ca.A, l = parseInt(f.width), n = parseInt(f.height), k = parseInt(f.y), f = parseInt(f.x));
  }
  0 == e && (e = window.innerHeight);
  0 == d && (d = window.innerWidth);
  return {scrollWidth:d, scrollHeight:e, marginLeft:b, marginTop:c, pageLeft:f, pageTop:k, Kl:l, Jl:n, Se:f + l, yd:k + n};
}
function Fz(a) {
  a.tg = a.top;
  a.sg = a.left;
  a.lc = a.width;
  a.zc = a.height;
}
function Gz(a, b) {
  a.eB = !0;
  a.Tp = b;
  Jj(a);
}
function Hz(a) {
  a.el.addEventListener("wheel", b => {
    b.preventDefault();
    a.el.scrollTop = 0 < b.deltaY ? a.el.scrollTop + 50 : a.el.scrollTop - 50;
  });
  a.st = 0;
  a.$m = !0;
  a.xE = 0;
  a.Qk = a.Qk.bind(a);
  a.eg = a.eg.bind(a);
  a.ic = a.ic.bind(a);
  a.el.addEventListener("pointerdown", a.Qk, {capture:!0, passive:!1});
}
function Iz(a, b, c, d) {
  return b ? c <= b.left + b.width * b.scale && b.left <= c + (a.width + d) * a.scale && a.top <= b.top + b.height * b.scale && b.top <= a.top + a.height * a.scale : !1;
}
function Jz(a, b, c) {
  var d = Kz.$b;
  return b ? a.left <= b.left + b.width * b.scale && b.left <= a.left + a.width * a.scale && c <= b.top + (b.height + d) * b.scale && b.top <= c + a.height * a.scale : !1;
}
function Lz(a, b, c, d) {
  let e = new zz();
  e.xe("#000000");
  b && b.length && nj(e, b);
  a && a.length && e.he(a);
  c && c.length && e.uc(c);
  e.V(26, 26);
  wj(e, 26);
  d && Kj(e, d);
  return e;
}
function Mz() {
  let a = new Nz(null);
  a.Le("btn-sep");
  zj(a, "#c0c0c0");
  a.V(1, 26);
  return a;
}
class Nz extends Nj {
  constructor(a) {
    super(a);
    this.bl = Xg();
    this.Ca = null;
    this.Jf = this.ac = this.Ey = !1;
    this.Yg = this.tg = this.sg = this.zc = this.lc = this.Ib = this.Eb = 0;
    this.qv = 200;
    eb.MG() && (this.qv = 500);
    this.In = new $g(this.iA.bind(this), this.qv);
    this.M();
    this.iB = !0;
    this.jI = this.KI.bind(this);
    this.kI = this.NI.bind(this);
    this.nE = this.VI.bind(this);
    P && (P.addEventListener(Xk.g, this.jI), P.addEventListener(Xk.i, this.kI), P.addEventListener(Xk.j, this.nE));
    uz(this);
    this.addEventListener(this.bl, this.mg.bind(this));
  }
  mg() {
  }
  NI() {
    this.iB && (uz(this), vz(this));
  }
  VI() {
    if (this.Ca) {
      let a = Um(this.Ca);
      this.ga(this.Ca.offsetLeft + a.x, this.Ca.offsetTop + a.y);
      this.qE();
    }
  }
  qE() {
  }
  ec(a) {
    this.ac = a;
  }
  sd(a) {
    this.Jf = a;
  }
  Sa(a) {
    a ? this.pb() : this.ja();
  }
  zm(a) {
    this.sf != a && (this.sf = a ? !0 : !1, bm(this.el, a, !0, !1));
  }
  Cd(a) {
    if (this.Ca = a) {
      if (this.Ca.s = this, this.Ca.addEventListener(this.Ca.Va, this.ba.bind(this)), -1 != a.width && -1 != a.height && this.V(a.width, a.height), Sm(a)) {
        let b = Um(a);
        this.ga(a.offsetLeft + b.x, a.offsetTop + b.y);
      }
    }
  }
  Hf(a) {
    this.Nd(a);
    this.Ca && Dm(this.Ca);
  }
  fc(a) {
    this.Ee(a);
    this.Ca && Dm(this.Ca);
  }
  De(a, b) {
    this.ga(a, b);
    this.Ca && Dm(this.Ca);
  }
  Ta() {
    return this.Ca;
  }
  ba() {
  }
  KI(a) {
    this.iB && a && a.detail && (a = a.detail, 1 == a.Es ? vz(this) : 2 == a.Es ? this.Mz(a.fd, a.width, a.height) : 3 == a.Es && this.Lz());
  }
  Lz() {
  }
  Mz() {
  }
  Kd(a) {
    a.contains(this.el) || a.appendChild(this.el);
  }
  Bd() {
    P.ia.appendChild(this.el);
  }
  M() {
    this.gE = this.Db.bind(this);
    this.hE = this.hl.bind(this);
    this.Ai = this.zi.bind(this);
    this.fE = this.TI.bind(this);
    this.minWidth = 20;
    this.minHeight = 10;
    this.qg = !1;
    this.Sb = new Nj(null);
    R(this.Sb, "annotateclickable");
    this.Sb.uc("Resize");
    this.Sb.jb((8).toString());
    this.Sb.ja();
    this.Z(this.Sb);
  }
  We() {
    return 20;
  }
  Ke() {
    return 10;
  }
  Qc(a) {
    super.Qc(a);
    this.Ca && this.Ca.Qc(a);
  }
  Mb(a) {
    super.Mb(a);
    this.Ca && this.Ca.Mb(a);
  }
  kg(a) {
    return this.top + a + (this.height + 4) * this.scale;
  }
  nh() {
  }
  Tj(a) {
    (this.qg = a) ? this.Sb.el.addEventListener("pointerdown", this.gE, {capture:!0, passive:!1}) : this.Sb.el.removeEventListener("pointerdown", this.gE, {capture:!0});
    this.oh(this.qg);
  }
  oh(a) {
    this.Sb && (this.qg && a ? this.Sb.pb() : this.Sb.ja());
  }
  Db(a) {
    a.target == this.Sb.el && (a.preventDefault(), a.stopPropagation(), Cz(this, a), this.nh(!0), window.addEventListener("pointerup", this.Ai, {capture:!0, passive:!1}), window.addEventListener("pointercancel", this.Ai, {capture:!0, passive:!1}), window.addEventListener("pointermove", this.hE, {capture:!0, passive:!1}), window.addEventListener("touchmove", this.fE, {capture:!0, passive:!1}));
  }
  hl(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      var b = this.lc + (a.clientX - this.Eb) / this.scale;
      a = this.zc + (a.clientY - this.Ib) / this.scale;
      a < this.We() || b < this.Ke() || (this.V(b, a), this.ga(this.left, this.top));
    } else {
      this.Ai();
    }
  }
  zi() {
    window.removeEventListener("pointerup", this.Ai, {capture:!0});
    window.removeEventListener("pointercancel", this.Ai, {capture:!0});
    window.removeEventListener("pointermove", this.hE, {capture:!0});
    window.removeEventListener("touchmove", this.fE, {capture:!0});
    this.nh(!1);
    this.lc == this.width && this.zc == this.height || this.mc(this.bl, {});
  }
  TI(a) {
    a.preventDefault();
  }
  Zo(a) {
    (this.Ey = a) && Jj(this);
  }
  fl(a) {
    return this.Sb.hc(a) ? !1 : super.fl(a);
  }
  J(a) {
    this.fl(a) && (super.J(a), this.nh(!0), Cz(this, a));
  }
  Wi(a) {
    let b = !0;
    if (!kh(a)) {
      return this.tf(), b;
    }
    a.preventDefault();
    b = !1;
    this.Ey && (b = this.$x(a));
    return b;
  }
  $x(a) {
    let b = !1;
    var c = this.left + (a.clientX - this.Eb), d = this.top + (a.clientY - this.Ib);
    let e = this.Ka(), f = this.ab(), k = Dz(this);
    c >= this.Yg && c <= k.scrollWidth - k.marginLeft - f - this.Yg && (this.Hf(c), this.Eb = a.clientX, b = !0);
    d >= this.Yg && d <= k.scrollHeight - k.marginTop - e - this.Yg && (this.fc(d), this.Ib = a.clientY, b = !0);
    return b;
  }
  tf() {
    Lj(this);
    this.nh(!1);
    if (this.top != this.tg || this.left != this.sg) {
      Bz(this), this.mc(this.bl, {op:!0});
    }
  }
  Wb(a, b) {
    this.Pe && this.Pe.call(this, b);
  }
  ZD(a) {
    a.preventDefault();
    Lj(this);
    this.nh(!1);
    if (a.target == this.el || this.el.contains(a.target)) {
      let b = {};
      b.currentTarget = this.el;
      b.offsetX = a.offsetX;
      b.offsetY = a.offsetY;
      this.eB && Zg(this.In) && null != this.Mp ? (this.Mp = null, this.In.stop(), console.log("#double clicked"), this.Tp && this.Tp.call(this, b)) : (this.Mp = b, this.In.start(), this.Wb(a, b));
    }
    if (this.top != this.tg || this.left != this.sg) {
      (!this.Ca || -1 != this.Ca.S && this.Ca.A && P.D) && Bz(this), this.mc(this.bl, {op:!0});
    }
  }
  iA() {
    this.In.stop();
    this.Mp = null;
  }
  qm(a) {
    super.qm(a);
    a = this.Zb();
    this.parent && this.parent.Zb() != a && (a = `${this.parent.Zb()}_${a}`);
    this.Le(a);
  }
  Zb() {
    return "ExtensionWidget";
  }
  Qk(a) {
    a.target == this.el && (a.preventDefault(), a.stopPropagation());
    window.addEventListener("pointermove", this.eg, {capture:!0, passive:!1});
    window.addEventListener("pointerup", this.ic, {capture:!0, passive:!1});
    this.st = a.clientY;
    this.$m = !0;
    this.xE = this.el.scrollTop;
    Ip();
  }
  eg(a) {
    if (kh(a)) {
      a.preventDefault();
      var b = Math.round(a.clientY - this.st), c = this.el.scrollTop, d = this.el.scrollHeight - this.el.clientHeight;
      if (0 < b && 0 < c || 0 > b && c < d) {
        this.el.scrollTop += -1 * b, this.st = a.clientY;
      }
      2 < Math.abs(this.xE - this.el.scrollTop) && (this.$m = !1);
    } else {
      this.ic();
    }
  }
  ic() {
    window.removeEventListener("pointermove", this.eg, {capture:!0});
    window.removeEventListener("pointerup", this.ic, {capture:!0});
  }
  Xi(a) {
    a.preventDefault();
    this.el.scrollLeft = 0 < a.deltaY ? this.el.scrollLeft + 50 : this.el.scrollLeft - 50;
  }
  Th(a) {
    a.target == this.el && (a.preventDefault(), a.stopPropagation());
    window.addEventListener("pointermove", this.Jb, {capture:!0, passive:!1});
    window.addEventListener("pointerup", this.ea, {capture:!0, passive:!1});
    this.pf = a.clientX;
    this.$m = !0;
    this.Rp = this.el.scrollLeft;
    Ip();
  }
  Jb(a) {
    if (kh(a)) {
      a.preventDefault();
      var b = Math.round(a.clientX - this.pf), c = this.el.scrollLeft, d = this.el.scrollWidth - this.el.clientWidth;
      if (0 < b && 0 < c || 0 > b && c < d) {
        this.el.scrollLeft += -1 * b, this.pf = a.clientX;
      }
      2 < Math.abs(this.Rp - this.el.scrollLeft) && (this.$m = !1);
    } else {
      this.ea();
    }
  }
  ea() {
    window.removeEventListener("pointermove", this.Jb, {capture:!0});
    window.removeEventListener("pointerup", this.ea, {capture:!0});
  }
  U() {
    super.U();
    P && (P.removeEventListener(Xk.g, this.jI), P.removeEventListener(Xk.i, this.kI), P.removeEventListener(Xk.j, this.nE));
    this.In && this.In.stop();
  }
}
class zz extends Nz {
  constructor() {
    super(null);
    R(this, "extension_icon");
    R(this, "annotateclickable");
    this.xe("#000000");
  }
  Zb() {
    return "IconButton";
  }
}
function Oz(a) {
  var b = Pz;
  null != b.g && b.g != a && b.g.ec(!1);
  A(a) || (b.g = a, bp && cp(), Ao.g = null, b.g.ec(!0));
}
class Qz extends EventTarget {
  constructor() {
    super();
    this.g = null;
  }
  Tn(a) {
    null == this.g || this.g != a && null != a || (this.g.ec(!1), this.g = null);
  }
}
var Pz = new Qz();
function Rz(a) {
  a.Ff = Xg();
  a.va = new Nz(null);
  a.va.he("ExtensionWidgetEditToolbar");
  zj(a.va, "rgb(255,255,255)");
  yj(a.va, "1px solid #c0c0c0");
  a.va.el.style.boxSizing = "content-box";
  R(a.va, "annotate-no-print");
  a.va.Mb(34);
  a.va.Sa(!1);
  a.pa = !0;
  a.ya = Lz("ExtensionWidgetEditToolbar-delete-btn", "extension_icon-edit", "Edit", () => {
    a.dispatchEvent(new CustomEvent(a.Ff, {detail:{Id:6}}));
  });
  a.va.Z(a.ya);
  a.Ha = Mz();
  a.va.Z(a.Ha);
  a.ow = !1;
  a.C = Lz("ExtensionWidgetEditToolbar-setting-btn", "extension_icon-settings", "Settings", () => {
    a.dispatchEvent(new CustomEvent(a.Ff, {detail:{Id:7}}));
  });
  a.va.Z(a.C);
  a.Va = Mz();
  a.va.Z(a.Va);
  a.ze = !0;
  a.Wa = Lz("ExtensionWidgetEditToolbar-delete-btn", "extension_icon-delete", "Delete", () => {
    a.dispatchEvent(new CustomEvent(a.Ff, {detail:{Id:4}}));
  });
  a.va.Z(a.Wa);
  a.ib = Mz();
  a.va.Z(a.ib);
  a.tb = Lz("ExtensionWidgetEditToolbar-close-btn", "extension_icon-close", "Close", () => {
    a.dispatchEvent(new CustomEvent(a.Ff, {detail:{Id:5}}));
    a.ec(!1);
  });
  a.va.Z(a.tb);
}
function Sz(a, b) {
  Mj(b, a.Tx, a.Ux, a.Nl, a.XI);
}
function Tz(a) {
  Sz(a, !1);
  a.ml(!0);
  a.nh(!1);
  if (a.top != a.tg || a.left != a.sg) {
    (!a.Ca || -1 != a.Ca.S && a.Ca.A && P.D) && Bz(a), a.mc(a.bl, {op:!0});
  }
}
function Uz(a) {
  Mj(!1, a.Hv, a.s, a.m, a.m);
  a.ml(!0);
  a.nh(!1);
  a.lc == a.width && a.zc == a.height || a.mc(a.bl, {});
}
function Vz(a) {
  let b = 4, c = (d, e) => {
    d.ob() && (d.ga(b, 4), b += 28, e.ga(b, 4), b += 2);
  };
  a.ya.Sa(a.pa);
  a.Ha.Sa(a.pa);
  a.C.Sa(a.ow);
  a.Va.Sa(a.ow);
  a.Wa.Sa(a.ze);
  a.ib.Sa(a.ze);
  c(a.ya, a.Ha);
  c(a.C, a.Va);
  c(a.Wa, a.ib);
  a.tb.ga(b, 4);
  b += 30;
  a.va.Qc(b);
}
class Wz extends Nz {
  constructor(a) {
    super(a);
    this.Md = new Nz(null);
    this.Md.Le(this.Zb() + "_SelectionBox");
    R(this.Md, "annotate-plugin-clickable-element");
    yj(this.Md, "1px dashed #ff0000");
    this.Md.uc("Drag to move");
    uj(this.Md, "auto");
    this.Md.ja();
    sj(this.Md, "all-scroll");
    this.Wx = this.Vx.bind(this);
    this.Nl = this.Bj.bind(this);
    this.Ux = this.mA.bind(this);
    this.Tx = this.An.bind(this);
    this.XI = this.WI.bind(this);
    this.Md.el.addEventListener("pointerdown", this.Wx, {capture:!0, passive:!1});
    a = new Nz(null);
    R(a, "annotate-drag-elements");
    R(a, "annotate-plugin-clickable-element");
    uj(a, "auto");
    a.ja();
    a.V(24, 24);
    Gj(a, "24px");
    this.jj = a;
    this.jj.ja();
    sj(this.jj, "ew-resize");
    this.jj.uc("Resize width");
    this.jj.Im(window.chrome.runtime.getURL("images/resize_width_handle.png"));
    this.N = this.N.bind(this);
    this.m = this.m.bind(this);
    this.s = this.s.bind(this);
    this.Hv = this.Hv.bind(this);
    this.jj.el.addEventListener("pointerdown", this.N, {capture:!0, passive:!1});
    Rz(this);
    this.oF = this.ia = this.ed = !0;
    this.Yg = 15;
  }
  sd(a) {
    super.sd(a);
    a || this.ec(!1);
  }
  ef(a) {
    super.ef(a);
    this.Md.ef(a);
  }
  jb(a) {
    super.jb(a);
    this.Md.jb((parseInt(a) + 1).toString());
    this.jj.jb((parseInt(a) + 2).toString());
    this.va.jb((parseInt(a) + 2).toString());
    this.Sb.jb((parseInt(a) + 2).toString());
  }
  Bd() {
    super.Bd();
    this.Md.Bd();
    this.jj.Bd();
    this.va.Bd();
  }
  Kd(a) {
    this.Md && this.Md.Kd(a);
    this.jj && this.jj.Kd(a);
    this.Sb && !a.contains(this.Sb.el) && a.appendChild(this.Sb.el);
    this.va && this.va.Kd(a);
    super.Kd(a);
  }
  ec(a) {
    super.ec(a);
    this.ml(a);
    this.Tj(a);
  }
  qE() {
    this.ml(this.ac);
  }
  aE() {
    let a = 2 * this.Yg;
    this.Md.V(this.width + a, this.height + a);
    this.Md.ga(this.left - this.Yg * this.scale, this.top - this.Yg * this.scale);
  }
  ml(a) {
    let b = (a = a && this.Jf) && this.oF;
    b && this.aE();
    this.Md.Sa(b);
    var c;
    (c = b && this.ed) && this.jj.ga(this.Md.left + this.Md.ab() - this.jj.ab() / 2, this.Md.top + (this.Md.Ka() - this.jj.Ka()) / 2);
    this.jj.Sa(c);
    this.oh(b);
    this.ey(a);
  }
  oE() {
    this.Md.Sa(!1);
    this.jj.Sa(!1);
    this.va.Sa(!1);
  }
  Vx(a) {
    a.preventDefault();
    a.stopPropagation();
    Cz(this, a);
    Sz(this, !0);
    this.ml(!1);
    this.nh(!0);
  }
  An(a) {
    kh(a) ? (a.preventDefault(), this.$x(a)) : Tz(this);
  }
  mA(a) {
    a.preventDefault();
    Tz(this);
  }
  Bj(a) {
    a.preventDefault();
    Sz(this, !1);
  }
  WI(a) {
    a.preventDefault();
  }
  M() {
    super.M();
    this.minHeight = 16;
    this.minWidth = 48;
    R(this.Sb, "annotate-drag-elements");
    R(this.Sb, "annotate-plugin-clickable-element");
    uj(this.Sb, "auto");
    this.Sb.ja();
    Gj(this.Sb, "24px");
    sj(this.Sb, "nw-resize");
    this.Sb.uc("Resize");
    this.Sb.Im(window.chrome.runtime.getURL("images/resize_element_handle.png"));
    P.ia.appendChild(this.Sb.el);
    this.Sb.V(24, 24);
  }
  We() {
    return 16;
  }
  Ke() {
    return 48;
  }
  Db(a) {
    a.target == this.Sb.el && (this.ml(!1), super.Db(a), this.nh(!0));
  }
  zi(a) {
    this.ml(!0);
    super.zi(a);
  }
  Tj(a) {
    a = a && this.ia;
    super.Tj(a);
  }
  oh(a) {
    (a = a && this.ia) && this.Sb.ga(this.Md.left + this.Md.ab() - this.Sb.ab() / 2, this.Md.top + this.Md.Ka() - this.Sb.Ka() / 2);
    super.oh(a);
  }
  N(a) {
    a.preventDefault();
    a.stopPropagation();
    Cz(this, a);
    Mj(!0, this.Hv, this.s, this.m, this.m);
    this.ml(!1);
    this.nh(!0);
  }
  Hv(a) {
    kh(a) || Uz(this);
    a.preventDefault();
    a = this.lc + (a.clientX - this.Eb);
    let b = Dz(this);
    36 > a || this.left > b.scrollWidth - b.marginLeft - (a + 15) * this.scale || this.V(a, this.height);
  }
  s(a) {
    a.preventDefault();
    Uz(this);
  }
  m(a) {
    a.preventDefault();
    Uz(this);
  }
  ey(a) {
    if (a) {
      let b = this.Md.vd(), c = this.Md.rd();
      Vz(this);
      let d = this.Md.ab();
      c = c - this.va.height - this.Yg;
      0 > c && (c = this.Md.rd() + this.Md.Ka() + this.Yg);
      this.va.ga(b + (d - this.va.width) / 2, c);
    }
    this.va.Sa(a);
  }
  hc(a) {
    return super.hc(a) || this.Sb.hc(a) || this.Md.hc(a) || this.jj.hc(a) || this.va.hc(a) ? !0 : !1;
  }
  U() {
    this.Sb.U();
    super.U();
    this.Md.U();
    this.jj.U();
    this.va.U();
  }
}
function Xz(a) {
  a.g.onfocus = () => {
    Yz(a, !0);
  };
  a.g.onblur = () => {
    Yz(a, !1);
  };
  a.g.onchange = () => {
    a.dispatchEvent(new CustomEvent(Zz.g, {detail:{value:a.g.value}}));
  };
  a.g.oninput = () => {
    a.dispatchEvent(new CustomEvent(Zz.g, {detail:{value:a.g.value}}));
  };
  a.g.onkeydown = b => {
    if (-1 != a.g.className.search("TextInputElementFocus")) {
      let c = ["-", "e", "+", "E", "."];
      a.i == Ng.cn && -1 != c.indexOf(b.key) && b.preventDefault();
    }
  };
}
function Yz(a, b) {
  b ? (a.g.classList.add("TextInputElementFocus"), a.label.classList.add("TextInputElementLabelFocus")) : (a.g.classList.remove("TextInputElementFocus"), a.label.classList.remove("TextInputElementLabelFocus"));
}
function $z(a, b) {
  b ? a.g.classList.add("TextInputElementErr") : a.g.classList.remove("TextInputElementErr");
}
function aA(a, b, c, d) {
  a.width = b;
  a.ra.style.width = a.width + "px";
  a.g.style.setProperty("width", a.width + "px", "important");
  a.label.style.width = "auto";
  a.ra.style.height = a.height + "px";
  a.g.style.height = "26px";
  a.ra.style.left = d + "px";
  a.ra.style.top = c + "px";
  b = c;
  a.label.style.left = d + "px";
  a.label.style.top = b + "px";
  b = b + a.label.offsetHeight + 4;
  a.g.style.left = d + "px";
  a.g.style.top = b + "px";
}
function bA(a, b) {
  b ? (a.g.removeAttribute("disabled"), a.g.style.opacity = "1") : (Yz(a, !1), a.g.setAttribute("disabled", "disabled"), a.g.style.opacity = "0.5");
}
function cA(a, b) {
  a.i = b;
  switch(a.i) {
    case Ng.Text:
      a.g.setAttribute("type", "text");
      break;
    case Ng.cn:
      a.g.setAttribute("type", "number");
      break;
    default:
      a.g.setAttribute("type", "text");
  }
}
function dA(a, b) {
  a.i == Ng.cn && (a.g.setAttribute("min", (0).toString()), 0 < b && a.g.setAttribute("max", b.toString()));
}
class Zz extends EventTarget {
  static get g() {
    return "EVT_VALUE_CHANGED";
  }
  constructor(a, b) {
    super();
    this.parent = a;
    this.Vf = b;
    this.label = this.g = this.ra = null;
    this.i = Ng.Text;
    this.width = 100;
    this.height = 52;
    this.bn();
  }
  bn() {
    this.ra = document.createElement("div");
    this.ra.classList.add("extension_reset_css");
    this.ra.style.position = "absolute";
    this.label = document.createElement("p");
    this.label.classList.add("extension_reset_css");
    this.label.classList.add("TextInputElementLabel");
    this.label.innerText = this.Vf;
    var a = this.label;
    a.style.margin = "0px";
    a.style.padding = "0px";
    this.g = document.createElement("input");
    this.g.classList.add("extension_reset_css");
    this.g.classList.add("TextInputElement");
    this.g.spellcheck = !1;
    this.g.style.setProperty("margin", "0px", "important");
    this.ra.appendChild(this.label);
    this.ra.appendChild(this.g);
    this.parent.appendChild(this.ra);
    Xz(this);
  }
  Hj(a) {
    this.g.value = a;
  }
  im() {
    return this.g.value;
  }
  offsetHeight() {
    return this.ra.offsetHeight;
  }
  gb() {
    this.ra && (this.ra.remove(), this.ra = null);
    this.g && (this.g.remove(), this.g = null);
    this.label && (this.label.remove(), this.label = null);
  }
}
class eA extends Nz {
  constructor() {
    super(null);
    this.l = Xg();
    R(this, "AnnotateWidget_Switch");
    this.V(52, 26);
    this.label = new Nz("label");
    this.label.Mb(16);
    this.label.Ee((this.height - this.label.wb()) / 2);
    this.Z(this.label);
    this.input = new Nz("input");
    this.j = this.input.el;
    lj(this.input, "type", "checkbox");
    tj(this.input, "static");
    this.input.el.onchange = () => {
      this.g = this.j.checked;
      this.dispatchEvent(new CustomEvent(this.l, {detail:{bChecked:this.g}}));
    };
    this.i = new Nz("span");
    tj(this.i, "relative");
    R(this.i, "lever");
    this.label.Z(this.input);
    this.label.Z(this.i);
    this.g = this.j.checked = !1;
  }
  yt(a) {
    this.g = this.j.checked = a;
  }
  Zb() {
    return "SwitchButton";
  }
}
class fA extends Nz {
  constructor() {
    super(null);
    this.i = Xg();
    zj(this, "rgb(255,255,255)");
    this.xe("rgb(0, 0, 0)");
    this.label = new Nj(null);
    this.label.vf(16);
    this.Z(this.label);
    this.g = new eA();
    R(this.g, "annotateclickable");
    this.g.addEventListener(this.g.l, this.j.bind(this));
    this.Z(this.g);
    this.label.Qc(ih("Border", 16) + 8);
    Ej(this.label, "Border");
    this.V(300, 34);
  }
  yt(a) {
    this.g.yt(a);
  }
  j() {
    this.dispatchEvent(new CustomEvent(this.i, {detail:{}}));
  }
  zm(a) {
    this.g.zm(a);
    qj(this.g).pointerEvents = a ? "auto" : "none";
  }
  V(a, b) {
    this.label.Mb(b);
    wj(this.label, this.label.wb());
    super.V(a, b);
  }
  ga(a, b) {
    super.ga(a, b);
    this.Oz(a);
  }
  Oz(a) {
    this.label.ga(4, (this.wb() - this.label.wb()) / 2);
    a = this.width - (this.g.width + 4);
    this.g.ga(a, (this.wb() - this.g.wb()) / 2);
  }
  Zb() {
    return "LabelWithSwitchButton";
  }
}
function gA(a, b) {
  b ? (window.addEventListener("click", function(c) {
    c.target == a.el || a.el.contains(c.target) || gA(a, !1);
  }, !1), a.i.pb()) : (a.i.ja(), window.removeEventListener("click", function(c) {
    c.target == a.el || a.el.contains(c.target) || gA(a, !1);
  }, !1));
}
class hA extends Nj {
  static get g() {
    return "EVT_SELECTION_CHANGED";
  }
  constructor() {
    super(null);
    let a = this;
    this.m = this.s();
    R(this.m, "annotatecustomselectselected");
    R(this.m, "annotateclickable");
    this.Z(this.m);
    Kj(this.m, function() {
      gA(a, !a.i.ob());
    });
    this.i = new Nz(null);
    R(this.i, "annotatecustomselectitems");
    this.Z(this.i);
    gA(this, !1);
    this.g = [];
    this.j = -1;
    this.C = !1;
  }
  Zb() {
    return "AnnotateDropdown";
  }
  uc(a) {
    this.m.uc(a);
  }
  Cd(a) {
    if (a) {
      var b = this;
      this.j = -1;
      this.g = [];
      for (let d = 0; d < a.length; d++) {
        var c = b.s();
        c.el.innerText = a[d];
        Kj(c, function() {
          b.l(b, d);
        });
        this.i.Z(c);
        this.g.push(c);
        0 == d && this.l(this, d);
      }
    }
  }
  s() {
    return new Nj(null);
  }
  l(a, b) {
    if (-1 != b) {
      var c = a.g[b];
      b != a.j && (-1 == a.j ? (a.j = b, R(c, "annotatebackgroundcolorgrey")) : -1 != a.j && (pj(a.g[a.j], "annotatebackgroundcolorgrey"), a.j = b, R(c, "annotatebackgroundcolorgrey"), a.dispatchEvent(new CustomEvent(hA.g, {detail:{uSelectedIndex:a.j}}))), a.m.el.innerText = c.el.innerText);
      gA(a, !1);
    }
  }
  V(a, b) {
    super.V(a, b);
    this.m.V(a, b);
    this.m.ga(0, 0);
    this.u(0, 0);
    this.C ? this.i.el.style.bottom = b + 8 + "px" : this.i.el.style.top = "100%";
  }
  u(a, b) {
    this.i.V(this.Ra(), 48 * this.g.length);
    for (let c = 0; c < this.g.length; c++) {
      this.g[c].V(this.Ra(), 48), this.g[c].ga(a, b), b += 48;
    }
  }
  U() {
    for (let a = 0; a < this.g.length; a++) {
      this.g[a].U();
    }
  }
}
function iA(a, b) {
  a.l != b && (a.l = b, a.j = function(c) {
    Ij(a.i);
    let d = c.target;
    "load" == c.type ? (console.log(a.l), console.log(">>Natural", d.naturalWidth, d.naturalHeight), console.log(">>non-natural", d.width, d.height), a.g.removeEventListener("load", a.j), a.i.Im(a.l), a.dispatchEvent(new CustomEvent(jA.g, {detail:{}}))) : "error" == c.type && (a.g.removeEventListener("load", a.j), a.dispatchEvent(new CustomEvent(jA.i, {detail:{}})));
    a.g = null;
  }, a.g && (a.g.removeEventListener("load", a.j), a.g = null), a.g = document.createElement("img"), a.g.addEventListener("load", a.j), a.g.src = a.l, a.i.Im(""), Hj(a.i));
}
class jA extends Nj {
  static get g() {
    return "EVT_LOADED";
  }
  static get i() {
    return "EVT_FAILED";
  }
  constructor(a) {
    super(null);
    a && R(this, "annotatecircular");
    this.l = "";
    this.j = this.g = null;
    let b = new Nj(null);
    R(b, "annotatepreviewelement");
    a && R(b, "annotatecircular");
    this.i = b;
    this.Z(b);
  }
  Zb() {
    return "ImagePreview";
  }
  V(a, b) {
    super.V(a, b);
    this.i.V(a, b);
  }
}
class kA extends Nj {
  constructor() {
    super(null);
    this.he("StudentItem");
    this.i = new jA(!0);
    this.Z(this.i);
    this.g = new Nj(null);
    R(this.g, "annotateellipsis");
    vj(this.g, "center");
    this.Z(this.g);
    this.model = null;
    this.tl = !1;
    this.l = this.o.bind(this);
  }
  get m() {
    return this.model;
  }
  Zb() {
    return "StudentItem";
  }
  Cd(a) {
    this.model = a;
    this.i.addEventListener(jA.g, this.l);
    iA(this.i, M.J + a.ba);
    Ej(this.g, en(a));
    this.uc(en(a));
    this.tl || (this.g.el.style.paddingRight = "16px");
  }
  o() {
    this.i.removeEventListener(jA.g, this.l);
    if (this.model) {
      var a = this.i, b = this.model.N;
      if (b) {
        let c = a.i.Ra() / b.w;
        Gj(a.i, a.g.width * c + "px " + a.g.height * c + "px");
        a.i.el.style.backgroundPosition = -(b.x * c) + "px " + -(b.y * c) + "px";
      } else {
        a.i.el.style.backgroundPosition = "0px 0px", Gj(a.i, "100%");
      }
    }
  }
  V(a, b) {
    super.V(a, b);
    this.i.V(36, 36);
    let c;
    this.i.ga(8, (this.height - this.i.height) / 2);
    c = this.i.vd() + this.i.Ra() + 4;
    a = a - c - 8;
    this.j && (this.j.V(24, b), a -= this.j.Ra() + 4);
    let d = 0;
    this.model && (d = ih(en(this.model), 14));
    this.tl && d >= a + 8 ? (this.g.el.style.whiteSpace = "break-spaces", this.g.V(a, 36), wj(this.g, 18), this.g.ga(c, (b - 36) / 2)) : (this.g.el.style.whiteSpace = "unset", this.g.V(a, b), wj(this.g, b), this.g.ga(c, 0));
    this.j && (c += this.g.Ra() + 4, this.j.ga(c, 0));
  }
}
function lA(a, b) {
  for (let c = 0; c < a.g.length; c++) {
    if (a.g[c].m.ve == b) {
      return c;
    }
  }
  return -1;
}
class mA extends hA {
  constructor() {
    super();
    var a = this.m;
    a.j = new Nj(null);
    R(a.j, "extension_icon");
    R(a.j, "extension_icon-chevron_down");
    a.j.vf(24);
    a.Z(a.j);
    this.C = a.tl = !0;
    this.i.el.style.maxHeight = "420px";
    this.i.el.style.overflow = "hidden scroll";
    Hz(this.i);
    R(this.i, "annotate_scrollable_widget");
    this.i.xe("rgba(0, 0, 0, 0.87)");
    zj(this.i, "white");
    this.g = [];
  }
  Cd(a, b) {
    if (a) {
      this.U();
      var c = this, d = this.j;
      this.j = -1;
      this.g = [];
      for (let f in a) {
        var e = a[f];
        let k = new kA();
        k.Cd(e);
        Kj(k, function() {
          c.i.$m && c.l(c, lA(c, k.model.ve));
        });
        this.i.Z(k);
        this.g.push(k);
      }
      b ? this.l(this, 0) : -1 != d && this.l(this, d);
      Bj(this);
    }
  }
  o(a) {
    this.l(this, lA(this, a));
  }
  l(a, b) {
    if (-1 != b) {
      var c = a.g[b];
      if (c && b != a.j) {
        if (Rl() && L.Ye() && nA(L.Ye(), c.model.ve) || fw() && nA(fw(), c.model.ve)) {
          return;
        }
        -1 == a.j ? (a.j = b, R(c, "annotatebackgroundcolorgrey")) : -1 != a.j && (pj(a.g[a.j], "annotatebackgroundcolorgrey"), a.j = b, R(c, "annotatebackgroundcolorgrey"));
        a.m.Cd(c.model);
        a.dispatchEvent(new CustomEvent(hA.g, {detail:{strStudentGuid:c.model.ve}}));
      }
      gA(a, !1);
      Bj(this);
    }
  }
  u(a, b) {
    this.i.V(this.parent.Ra(), 48 * this.g.length);
    for (let c = 0; c < this.g.length; c++) {
      this.g[c].V(this.parent.Ra(), 48), this.g[c].ga(a, b), b += 48;
    }
  }
  ga(a, b) {
    super.ga(a, b);
    this.i.Nd(-a);
  }
  s() {
    return new kA();
  }
  oi() {
    this.V(this.width, this.height);
    return !0;
  }
}
function oA(a) {
  let b = a.Sk.j, c = a.Sk.g.length, d = !0;
  0 >= b && (d = !1);
  pA(a.g, d);
  d = !0;
  b >= c - 1 && (d = !1);
  pA(a.i, d);
}
function pA(a, b) {
  a && (b ? (a.sf = !0, pj(a, "AnnotateMsgDialogBtnDisabled"), a.el.style.pointerEvents = "auto") : (a.sf = !1, R(a, "AnnotateMsgDialogBtnDisabled"), a.el.style.pointerEvents = "none"));
}
class qA extends Nj {
  constructor(a) {
    super(null);
    this.l = a;
    this.j = 4;
    this.he("annotate-student-feedback-list-toolbar");
    tj(this, "fixed");
    this.jb(Yj);
    this.g = new Nj(null);
    R(this.g, "extension_icon");
    R(this.g, "extension_icon-chevron_left");
    R(this.g, "annotateclickable");
    this.g.uc("Previous student");
    this.Z(this.g);
    this.Sk = new mA();
    this.Sk.vf(14);
    this.Z(this.Sk);
    this.i = new Nj(null);
    R(this.i, "extension_icon");
    R(this.i, "extension_icon-chevron_right");
    R(this.i, "annotateclickable");
    this.i.uc("Next student");
    this.Z(this.i);
    let b = this;
    Kj(this.g, function() {
      var c = b.Sk;
      console.log("navigate left");
      c.l(c, c.j - 1);
    });
    this.Sk.addEventListener(hA.g, c => {
      oA(b);
      var d = b.l;
      console.log("navigate student", c.detail);
      d.dispatchEvent(new CustomEvent(rA.l, {detail:c.detail}));
    });
    Kj(this.i, function() {
      var c = b.Sk;
      console.log("navigate right");
      c.l(c, c.j + 1);
    });
  }
  Zb() {
    return "StudentNotesFeedbackListToolbar";
  }
  Cd(a, b) {
    this.Sk.Cd(a, b);
    oA(this);
    this.V(this.width, this.height);
  }
  o(a) {
    this.Sk.o(a);
  }
  v(a) {
    super.v(a);
    this.j = parseInt(a);
  }
  V(a, b) {
    super.V(a, b);
    let c = 2 * this.j;
    this.g.V(26, b - c);
    this.i.V(26, b - c);
    this.Sk.V(a - (52 + c), b - c);
    a = this.j;
    this.g.ga(a, this.j);
    a += this.g.Ra();
    this.Sk.ga(a, this.j);
    a += this.Sk.Ra();
    this.i.ga(a, this.j);
  }
}
function sA(a, b, c, d) {
  a.i || (a.i = document.createElement("div"), a.i.style.visibility = "hidden", a.i.style.position = "absolute", a.i.style.left = "-999em", a.i.style.g = "break-word", a.i.style.whiteSpace = "pre-line", document.body.appendChild(a.i));
  a.i.style.width = d + "px";
  a.i.style.height = "auto";
  a.i.style.fontSize = c + "px";
  b && "\n" == b.substring(b.length - 1) && (b += "pad");
  a.i.innerHTML = b;
  return a.i.clientHeight;
}
function tA(a, b) {
  a.u = b;
}
function uA(a, b) {
  a.o = b;
}
class vA extends Wz {
  constructor(a) {
    super(null != a && a.length ? a : "textarea");
    this.Gb();
    this.ia = this.fh = !1;
    this.Cy = !0;
    this.nl();
    this.i = null;
    ki.addEventListener(qi.g, this.Ig.bind(this));
  }
  Gb() {
    R(this, "AnnotateMultiLineInputWid");
    this.g = this.el;
    this.g.setAttribute("type", "text");
    this.g.spellcheck = !1;
  }
  Ig() {
  }
  Wi() {
    return !0;
  }
  No(a, b) {
    a = sA(this, a, this.fontSize, this.Ra()) + 4;
    return b > a ? b : a;
  }
  Dm() {
    qj(this).overflowY = this.el.scrollHeight > this.height + 4 ? "auto" : "hidden";
  }
  Mb(a) {
    super.Mb(a);
    this.Dm();
  }
  vf(a) {
    super.vf(a);
    this.fontSize = a;
  }
  Nt(a) {
    (this.ko = a) ? this.g.setAttribute("readonly", "") : this.g.removeAttribute("readonly");
  }
  l(a) {
    a ? (this.g.onchange = () => {
      this.cs(this.g.value);
    }, this.g.oninput = () => {
      this.cs(this.g.value);
    }, this.g.onfocus = this.oq.bind(this), this.g.onblur = () => {
      this.wk(!0);
    }, R(this, "annotate-plugin-clickable-element")) : (this.g.onchange = null, this.g.oninput = null, this.g.onfocus = null, this.g.onblur = null, pj(this, "annotate-plugin-clickable-element"));
  }
  cs(a) {
    this.xt && this.xt(a);
  }
  oq(a) {
    this.Jf && (this.fh = !0, null == a && this.el.focus(), this.nl(), this.u && this.u());
  }
  Qj(a) {
    this.Cy || (a = "");
    super.Qj(a);
  }
  nl() {
    this.fh ? this.Qj("2px solid rgba(33, 150, 243, 0.54)") : this.Qj("1px solid rgba(0, 0, 0, 0.54)");
  }
  wk(a) {
    this.fh = !1;
    this.nl();
    a || this.g.blur();
    this.o && this.o();
  }
  ml(a) {
    super.ml(a);
    this.fh && this.wk(!1);
  }
  sd(a) {
    super.sd(a);
    this.Jf || this.wk(!1);
    uj(this, this.Jf ? "auto" : "none");
    this.l(this.Jf);
  }
  Wr(a) {
    this.g.placeholder = a;
  }
  Bi(a) {
    this.g.value = a;
  }
  U() {
    this.i && (this.i.remove(), this.i = null);
    super.U();
  }
  Zb() {
    return "MultilineInputWidget";
  }
}
function wA(a, b) {
  a.Ta() && (qj(a).boxShadow = a.Ta().ul ? "0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)" : "none", Aj(a, a.Ta().Rb), b && Ju(a.Ta()));
}
function xA(a, b, c) {
  a.Cd(b);
  b.Yk && (c = b.Yk);
  a.l.src = c + b.KD;
  a.j.ja();
  Hj(a);
}
class yA extends Wz {
  constructor(a, b, c) {
    super(null);
    R(this, "AnnotatePluginImageContainer");
    uj(this, "auto");
    this.ja();
    this.j = new Nj("img");
    R(this.j, "AnnotatePluginImageElement");
    this.j.ga(0, 0);
    this.Z(this.j);
    this.l = this.j.el;
    this.l.addEventListener("load", this.o.bind(this));
    this.Og = a;
    this.u = b;
    this.gi = !1;
    this.sd(!this.Og);
    this.ce = this.ed = !1;
    this.i = this.g = 1;
    this.minWidth = 20;
    this.pa = !1;
    this.ow = !0;
    this.addEventListener(this.Ff, d => {
      d && d.detail && 4 == d.detail.Id && this.u(this.Ca);
      7 == d.detail.Id && fp(zA.g, !0, this);
    });
    Kj(this, () => {
      !this.Og && AA() && Oz(this);
    });
    this.Bd();
    ml(P) && !nl() && c.insertBefore(this.el, document.getElementById("AnnotateAnnotationCaptureCanvas"));
  }
  Zb() {
    return "AnnotationImageElement";
  }
  o(a) {
    this.g = a.target.naturalWidth;
    this.i = a.target.naturalHeight;
    console.log("[IAM] Image size >>>" + this.g + "x" + this.i);
    a = this.minWidth;
    var b = this.Ta();
    if (-1 != b.width && -1 != b.height && this.Ta().Gy) {
      a = this.Ca.width > a ? this.Ca.width : a;
    } else {
      if (a = this.g > a ? this.g : a, a = 640 < a ? 640 : a, b = this.i / this.g * a, (Jk(P) || ml(P)) && this.Ta().A) {
        var c = this.Ta().A, d = parseInt(c.width), e = parseInt(c.height), f = parseInt(c.y);
        c = parseInt(c.x);
        this.top + b * this.scale > f + e ? (this.fc(f), this.top + b * this.scale > f + e && (d = this.top + b * this.scale - (f + e), a = this.g / this.i * (b - d))) : this.left + a * this.scale > c + d && (this.Hf(c), this.left + a * this.scale > c + d && (d = this.left + a * this.scale - (c + d), a -= d));
      } else {
        d = window.visualViewport.height, e = window.visualViewport.width, P.o && (f = 100 * this.scale, d = P.Cm().wb() || d - f, e = P.Cm().Ra() || e), f = this.top % d, c = this.left % e, f + b * this.scale > d ? (d = b * this.scale - (d - f), a = this.g / this.i * (b - d)) : c + a * this.scale > e && (d = a * this.scale - (e - c), a -= d);
      }
    }
    console.log(`image ${this.Ca.width} -> ${a} ${this.Ca.Io}`);
    this.Qc(a);
    this.Mb(this.i / this.g * a);
    this.ga(this.left, this.top);
    this.ef(this.scale);
    this.j.pb();
    Ij(this);
  }
  Ta() {
    return this.Ca;
  }
  aA() {
    return this.Ta() ? this.Ta().ma : "";
  }
  Cd(a) {
    super.Cd(a);
    wA(this, !1);
  }
  hc(a) {
    return super.hc(a) || ep && ep.i == this && ep.hc(a);
  }
  mg(a) {
    super.mg(a);
    Ju(this.Ta());
  }
  jb(a) {
    let b = this.ac ? 3 : 0;
    this.lb = a;
    a = (parseInt(a) + b).toString();
    super.jb(a);
    this.va.jb((parseInt(a) + 5).toString());
  }
  ec(a) {
    super.ec(a);
    this.jb(this.lb);
  }
  pb() {
    this.gi || super.pb();
  }
  ja() {
    this.ec(!1);
    super.ja();
  }
  Wn(a) {
    this.Og != a && (this.Og = a, this.sd(!this.Og), this.Og && Pz.Tn(this));
  }
  uk() {
    this.Sa(!1);
    this.gi = !0;
  }
  Yn(a) {
    this.gi = !1;
    a && this.Sa(!0);
  }
  iq() {
    return this.gi;
  }
  $x(a) {
    Ql.Ja() && to();
    let b = !1;
    var c = this.left + (a.clientX - this.Eb), d = this.top + (a.clientY - this.Ib);
    let e = this.Ka(), f = this.ab(), k = !1, l = !1;
    if ((Jk(P) || ml(P)) && this.Ta().A) {
      var n = this.Ta().A, p = parseInt(n.width), t = parseInt(n.height), x = parseInt(n.y);
      n = parseInt(n.x);
      c < n ? (c = n, k = !0) : c + f > n + p && (c = n + p - f, k = !0);
      d < x ? (d = x, l = !0) : d + e > x + t && (d = x + t - e, l = !0);
    }
    P.o && (p = window.visualViewport.height, t = window.visualViewport.width, x = 100 * this.scale, p = P.Cm().wb() || p - x, t = P.Cm().Ra() || t, c + f > t && (k = !0), d + e > p && (l = !0));
    p = Dz(this);
    c < this.Yg && (c = this.Yg);
    c >= this.Yg && c <= p.scrollWidth - p.marginLeft - f - this.Yg && (this.Hf(c), k || (this.Eb = a.clientX), b = !0);
    d >= this.Yg && d <= p.scrollHeight - p.marginTop - e - this.Yg && (this.fc(d), l || (this.Ib = a.clientY), b = !0);
    this.ce = !0;
    this.Ta().Gy = !0;
    return b;
  }
  hl(a) {
    if (kh(a) && this.qg) {
      Ql.Ja() && to();
      a.preventDefault();
      var b = this.lc + (a.clientX - this.Eb) / this.scale;
      a = this.zc + (a.clientY - this.Ib) / this.scale;
      var c = this.i / this.g * 20, d = this.i / this.g * 640, e = Dz(this);
      if (!(a < c || 20 > b || a > d || 640 < b || b * this.scale + this.left + this.Yg > e.scrollWidth - e.marginLeft)) {
        a = this.i / this.g * b;
        a *= this.scale;
        c = b * this.scale;
        if ((Jk(P) || ml(P)) && this.Ca.A) {
          d = this.Ca.A;
          e = parseInt(d.height);
          var f = parseInt(d.y);
          if (this.Ca.offsetLeft + c > parseInt(d.x) + parseInt(d.width) || this.Ca.offsetTop + a > f + e) {
            return;
          }
        } else if (P.o && (d = 100 * this.scale, e = window.visualViewport.height, f = window.visualViewport.width, e = P.Cm().wb() || e - d, f = P.Cm().Ra() || f, this.Ca.offsetLeft + c > f || this.Ca.offsetTop + a > e)) {
          return;
        }
        this.Qc(b);
        this.Mb(this.i / this.g * b);
        this.ce = this.Ta().Gy = !0;
      }
    } else {
      this.Ai();
    }
  }
  Qc(a) {
    this.j.Qc(a);
    super.Qc(a);
  }
  Mb(a) {
    this.j.Mb(a);
    super.Mb(a);
  }
}
class BA extends EventTarget {
  constructor() {
    var a = "svg";
    super();
    this.height = this.width = 0;
    a = a && 0 < a.length ? a : "svg";
    this.el = document.createElementNS("http://www.w3.org/2000/svg", a);
    this.el.setAttributeNS(null, "width", this.width.toString());
    this.el.setAttributeNS(null, "height", this.height.toString());
    this.scale = 1;
  }
  jb(a) {
    this.el.style.zIndex = a;
  }
  ef(a) {
    this.scale = a;
    this.el.style.transformOrigin = "left top";
    this.el.style.transform = "scale(" + a + ")";
  }
  Mb(a) {
    this.height = a;
    this.el.setAttributeNS(null, "height", this.height.toString());
  }
  Qc(a) {
    this.width = a;
    this.el.setAttributeNS(null, "width", this.width.toString());
  }
  V(a, b) {
    this.Qc(a);
    this.Mb(b);
  }
  Sa(a) {
    this.el.style.display = a ? "block" : "none";
  }
  Z(a) {
    this.el.appendChild(a);
  }
  ay(a) {
    this.el.removeChild(a);
  }
}
;var CA, DA = null, EA = null, FA = null, GA = null, HA, IA, JA, KA, LA, MA, NA, OA;
function Ip() {
  L && L.sa({type:"AnnotateClosePopup"}, null);
}
function PA(a, b) {
  return {id:b, style:{height:"1px", width:NA + "px", boxSizing:"border-box", position:"absolute", top:a, left:"0px", backgroundColor:"#e0e0e0", display:"block", cursor:"default"}};
}
function QA() {
  DA && "block" == DA.style.display && (DA.style.display = "none", RA(!1, "rgb(0,0,0,0.5)"));
}
function SA() {
  return TA && null !== navigator && void 0 !== navigator && null !== navigator.mediaDevices && void 0 !== navigator.mediaDevices && null !== navigator.mediaDevices.getDisplayMedia && void 0 !== navigator.mediaDevices.getDisplayMedia;
}
function UA(a) {
  if (a || EA && "block" == EA.style.display) {
    a = document.getElementById("annotate-highlight-plugin-recording-popup-audio-note"), TA ? (a.style.removeProperty("opacity"), a.style.cursor = "pointer") : (a.style.opacity = "0.44", a.style.cursor = "default"), a = document.getElementById("annotate-highlight-plugin-recording-popup-video-clip"), TA && VA ? (a.style.removeProperty("opacity"), a.style.cursor = "pointer") : (a.style.opacity = "0.44", a.style.cursor = "default"), a = document.getElementById("annotate-highlight-plugin-recording-popup-record-screen"), 
    SA() ? (a.style.removeProperty("opacity"), a.style.cursor = "pointer") : (a.style.opacity = "0.44", a.style.cursor = "default"), a = document.getElementById("annotate-highlight-plugin-recording-popup-record-screen-webcam"), SA() && TA && VA ? (a.style.removeProperty("opacity"), a.style.cursor = "pointer") : (a.style.opacity = "0.44", a.style.cursor = "default");
  }
}
function WA() {
  EA && "block" == EA.style.display && (EA.style.display = "none", RA(!1, "rgb(0,0,0,0.5)"));
}
function XA() {
  if (V) {
    var a = document.getElementById("annotate-highlight-plugin-start-presentation").getBoundingClientRect();
    var b = a.left + LA + 2 < Math.floor(window.visualViewport.width) ? a.left : Math.floor(window.visualViewport.width) - LA - 2;
    a = a.top + MA < Math.floor(window.visualViewport.height) ? a.top : Math.floor(window.visualViewport.height) - MA;
    var c = document.getElementById("annotate-highlight-plugin-livefeed-popup-pin");
    c && (c = c.getElementsByClassName("annotate-highlight-plugin-popup-item-label")) && 1 == c.length && (c[0].innerHTML = "Pin: " + YA(V));
    var d = c = !1;
    V && (c = V.l == ZA, d = $A(V));
    let e = document.getElementById("annotate-highlight-plugin-livefeed-popup-student-notes");
    e && aB(e, c);
    bB(d);
    FA.style.left = b + "px";
    FA.style.top = a + "px";
    FA.style.width = LA + "px";
    FA.style.height = MA + "px";
    FA.style.display = "block";
    RA(!0, "transparent");
  }
}
function cB() {
  FA && "block" == FA.style.display && (FA.style.display = "none", RA(!1, "rgb(0,0,0,0.5)"));
}
function dB(a) {
  a.preventDefault();
  if (eB && eB.bLink && L.Pb()) {
    dp();
    a = L.Pb();
    var b;
    if (b = a.po) {
      a: {
        if (b = a.po, a = b.hb.currentSrc, b.qw && (a = "https://youtu.be/" + b.kb.Xg), a) {
          b = window.navigator.platform;
          var c = window.navigator.userAgent;
          if (-1 != c.indexOf("iPad") || -1 != c.indexOf("iPod") || -1 != c.indexOf("iPhone") || -1 != b.indexOf("Mac") && 1 < navigator.maxTouchPoints) {
            console.log("copy sharable url to clipboard(ios)");
            b = document.createElement("textarea");
            b.id = "ios_sharable_link_copy_element";
            b.setAttribute("contenteditable", "true");
            b.setAttribute("readonly", "false");
            b.value = a;
            document.body.appendChild(b);
            c = document.createRange();
            c.selectNodeContents(b);
            let d = window.getSelection();
            if (null == d) {
              b = !1;
              break a;
            }
            d.removeAllRanges();
            d.addRange(c);
            document.getElementById("ios_sharable_link_copy_element").setSelectionRange(0, 999999);
            document.execCommand("copy", !1, a);
            document.body.removeChild(b);
          } else {
            console.log("copying sharable url to clipboard", a), b = document.createElement("textarea"), b.value = a, document.body.appendChild(b), b.select(), document.execCommand("copy", !1, a), document.body.removeChild(b);
          }
          console.log("copied!");
          b = !0;
        } else {
          console.log("found empty url"), b = !1;
        }
      }
    }
    b && gw("Link copied to clipboard", !1);
  }
}
function fB(a) {
  a.preventDefault();
  if (eB && eB.bDownload && L.Pb() && (dp(), a = L.Pb(), a.po)) {
    try {
      window.open(a.po.EB, "_blank", null);
    } catch (b) {
      console.log(">>>download process failed");
    }
  }
}
function gB(a) {
  a.preventDefault();
  eB && eB.bDelete && L.Pb() && (dp(), a = L.Pb(), a.po && (a = a.po, hB(a.Fl, a)));
}
function iB() {
  HA = 236;
  IA = 0;
  var a = [], b = 0;
  a.push({id:"annotate-highlight-plugin-media-popup-link", title:"Get shareable link", icon:"extension_icon extension_icon-shareable_link", label:"Get shareable link", style:{height:"48px", width:"236px", boxSizing:"border-box", position:"absolute", top:b + "px", left:"0px", color:"#000000"}, Qa:dB});
  IA += 48;
  b += 48;
  a.push({id:"annotate-highlight-plugin-media-popup-download", title:"Download", icon:"extension_icon extension_icon-download", label:"Download", style:{height:"48px", width:"236px", boxSizing:"border-box", position:"absolute", top:b + "px", left:"0px", color:"#000000"}, Qa:fB});
  IA += 48;
  a.push({id:"annotate-highlight-plugin-media-popup-delete", title:"Delete", icon:"extension_icon extension_icon-delete", label:"Delete", style:{height:"48px", width:"236px", boxSizing:"border-box", position:"absolute", top:b + 48 + "px", left:"0px", color:"#000000"}, Qa:gB});
  IA += 48;
  GA = jk({parent:document.body, id:"annotate-plugin-media-option-popup", style:{position:"fixed", backgroundColor:"rgb(255,255,255)", width:HA + "px", zIndex:2147483647, border:"1px solid #c0c0c0", display:"none", boxSizing:"content-box", fontSize:"16px", fontWeight:"normal"}, buttons:a});
}
var eB = null;
function dp() {
  GA && "block" == GA.style.display && (GA.style.display = "none", RA(!1, "rgb(0,0,0,0.5)"));
}
var ep = null;
function fp(a, b, c) {
  a.i = c;
  if (b && c) {
    a.data.ul = c.Ta().ul;
    a.data.Rb = c.Ta().Rb;
    a.g.yt(a.data.ul);
    a.opacity.setData(a.data);
    am(a.opacity.j);
    let d = 0, e = 0;
    c = c.C.el.getBoundingClientRect();
    c.left + HA + 2 < Math.floor(window.visualViewport.width) ? d = c.left : d = Math.floor(window.visualViewport.width) - HA - 2;
    c.top + IA < Math.floor(window.visualViewport.height) ? e = c.top : e = Math.floor(window.visualViewport.height) - IA;
    a.ga(d, e);
  }
  a.Sa(b);
  RA(b, b ? "transparent" : "rgb(0,0,0,0.5)");
}
function jB(a) {
  a.i ? (a.i.Ta().ul = a.data.ul, a.i.Ta().Rb = a.data.Rb, wA(a.i, !0)) : fp(a, !1, null);
}
class zA extends Nz {
  static get g() {
    A(ep) && (ep = new zA());
    return ep;
  }
  constructor() {
    super(null);
    R(this, "AnnotateImageSettingPopup");
    tj(this, "fixed");
    this.Sa(!1);
    this.g = new fA();
    this.g.V(236, 36);
    this.g.ga(0, 0);
    this.Z(this.g);
    this.g.addEventListener(this.g.i, () => {
      this.data.ul = this.g.g.g;
      jB(this);
    });
    this.opacity = new zm();
    tj(this.opacity, "absolute");
    this.opacity.V(236, 36);
    this.opacity.ga(0, 36);
    this.Z(this.opacity);
    this.opacity.addEventListener("OpacityUpdate", () => {
      jB(this);
      am(this.opacity.j);
    });
    this.V(236, 72);
    document.body.appendChild(this.el);
    this.data = {ul:!0, Rb:1};
    this.i = null;
  }
  Zb() {
    return "ImageSettingPopup";
  }
}
function Lp(a) {
  QA();
  WA();
  cB();
  ep && fp(ep, !1, null);
  a || dp();
}
function kB() {
  if (!CA) {
    var a = document.getElementById("AnnotateErrorMsgOverlay");
    a && a.remove();
    CA = document.createElement("div");
    CA.id = "AnnotateErrorMsgOverlay";
    CA.className = "extension_reset_css annotate-no-print ";
    CA.style.display = "none";
    ik(CA);
    CA.onclick = function(b) {
      b.preventDefault();
      QA();
      WA();
      cB();
      dp();
      ep && fp(ep, !1, null);
    };
  }
  document.body.appendChild(CA);
}
function RA(a, b = null) {
  a && kB();
  CA && (a ? CA.style.display = "block" : lB() || (CA.style.display = "none"), b && (CA.style.backgroundColor = b));
}
;var mB, nB, nw, oB, pB, qB, rB, sB, tB, uB, vB, wB, xB, yB, zB, AB, BB, CB, DB, EB, FB, GB = -1, HB, IB, JB = !1, KB = !1, LB = !0;
function MB(a, b, c, d, e, f) {
  a: {
    var k = NB;
    for (let l = 0; l < k.g.length; l++) {
      let n = k.g[l];
      if (null != n && n.ob() && n.getType() == a) {
        k = n;
        break a;
      }
    }
    k = void 0;
  }
  A(k) || k.gb();
  k = new nq();
  oq(k, c, d, e, f, null);
  k.type = a;
  k.g.innerHTML = b;
  k.C();
  k.l();
}
function OB(a, b, c) {
  a.o = c;
  a.o && b && 0 < b.length ? (a.g.el.innerText = b, a.g.pb()) : a.g.ja();
}
class PB extends Nj {
  static get j() {
    return "EVT_TOAST_HIDDEN";
  }
  static get m() {
    return 7000;
  }
  static get i() {
    return 3000;
  }
  static get g() {
    return 610;
  }
  static get l() {
    return 250;
  }
  constructor() {
    super(null);
    this.he("AnnotateExtensionToastDiv");
    this.i = null;
    this.l = PB.i;
    this.o = null;
    this.s = !1;
    this.j = new Nz(null);
    this.j.Le(this.Zb() + "_label");
    R(this.j, "annotateellipsis");
    this.Z(this.j);
    this.g = new Nz(null);
    R(this.g, "annotateclickable");
    vj(this.g, "center");
    this.g.xe("rgb(233, 30, 99)");
    this.g.Le(this.Zb() + "_button");
    this.Z(this.g);
    this.g.V(48, 36);
    wj(this.g, 36);
    this.g.ja();
    Kj(this.g, () => {
      this.o && (this.o(), this.ja());
    });
  }
  V(a, b) {
    super.V(a, b);
    var c = a - (this.g.ob() ? 40 : 32);
    this.g.ob() && (c -= this.g.Ra());
    this.j.V(c, b);
    wj(this.j, b);
    c = this.width / 2 - this.j.Ra() / 2;
    this.g.ob() && (c -= this.g.Ra() - 16);
    this.j.ga(c, (b - this.j.height) / 2);
    this.g.ob() && (c = a - 16 - this.g.width, this.g.ga(c, (b - this.g.height) / 2));
    this.m();
  }
  m() {
    this.Nd((window.visualViewport.width - this.width) / 2);
  }
  Zb() {
    return "Toast";
  }
  Yr(a, b, c, d, e) {
    let f = this;
    this.i && this.ja();
    OB(this, b, c);
    this.l = this.g.ob() || this.s ? PB.m : PB.i;
    vj(this.j, this.g.ob() ? "left" : "center");
    b = `fadeinToast 0.5s, fadeoutToast 0.5s ${this.l}s`;
    d && (b = `fadeinToastOpacity 0.5s, fadeoutToastOpacity 0.5s ${this.l}s`);
    this.el.style.bottom = d ? "0px" : "36px";
    this.j.el.innerText = a;
    d = PB.g > window.visualViewport.width ? window.visualViewport.width : PB.g;
    a = ih(a, 16) + 2;
    a = P.m ? a + 2 * (this.g.ob() ? 40 : 32) : a + (this.g.ob() ? 40 : 32);
    this.g.ob() && (a += this.g.width);
    a > d && (a = d);
    a < PB.l && (a = PB.l);
    this.V(a, 48);
    R(this, "show");
    this.el.style.animation = b;
    this.i = setTimeout(() => {
      f.ja();
      f.dispatchEvent(new CustomEvent(PB.j, {detail:{}}));
    }, this.l);
    e && (clearTimeout(this.i), this.i = null);
  }
  ja() {
    pj(this, "show");
    this.el.style.animation = "";
    this.i && (clearTimeout(this.i), this.i = null);
    this.g.ja();
    this.o = null;
  }
}
function QB(a) {
  a.g = new PB();
  document.body.appendChild(a.g.el);
}
function gw(a, b) {
  var c = RB;
  c.g || QB(c);
  c.g.s = !1;
  c.g.Yr(a, "", null, b, !1);
}
function Fw() {
  var a = RB;
  a.g && a.g.ja();
}
class SB extends ph {
  constructor() {
    super();
    this.g = null;
  }
  U() {
    this.g && (this.g.U(), this.g = null);
  }
}
var RB = new SB();
class TB extends PB {
  constructor() {
    super();
    this.he("AnnotateExtensionServerUnreachableWidget");
    this.i = null;
  }
  V(a, b) {
    super.V(a, b);
    this.j.V(a - 2, b);
    this.j.Nd(0);
    this.m();
  }
  m() {
    this.Nd((window.visualViewport.width - this.width) / 2);
  }
  Yr(a, b, c) {
    let d = this;
    this.i && this.ja();
    this.l = PB.i;
    vj(this.j, "center");
    let e = `fadeinUpperToast 0.5s, fadeoutUpperToast 0.5s ${this.l}s`;
    b && (e = `fadeinToastOpacity 0.5s, fadeoutToastOpacity 0.5s ${this.l}s`);
    this.el.style.top = b ? "0px" : "36px";
    this.j.el.innerText = a;
    b = PB.g > window.visualViewport.width ? window.visualViewport.width : PB.g;
    a = ih(a, 12) + 16;
    a > b && (a = b);
    this.V(a, 20);
    R(this, "show");
    this.el.style.animation = e;
    this.i = setTimeout(() => {
      d.ja();
      d.dispatchEvent(new CustomEvent(PB.j, {detail:{}}));
    }, this.l);
    c && (clearTimeout(this.i), this.i = null);
  }
  ja() {
    pj(this, "show");
    this.el.style.animation = "";
    this.i && (clearTimeout(this.i), this.i = null);
  }
}
function UB(a) {
  qB.className = a ? "extension_reset_css AnnotateMsgDialogBtn" : "extension_reset_css AnnotateMsgDialogBtn AnnotateMsgDialogBtnDisabled";
}
function VB() {
  Lp();
  -1 != GB && (clearInterval(GB), GB = -1);
  bs && (A(WB) || XB(!1));
  RA(!0);
}
function YB() {
  -1 != GB && (clearInterval(GB), GB = -1);
  if (pB) {
    var a = pB.cloneNode(!0);
    pB.parentNode.replaceChild(a, pB);
    pB = a;
  }
  qB && (a = qB.cloneNode(!0), qB.parentNode.replaceChild(a, qB), qB = a);
  rB && (a = rB.cloneNode(!0), rB.parentNode.replaceChild(a, rB), rB = a);
  mB && (mB.style.display = "none");
  RA(!1);
}
function Kn(a, b, c, d, e, f, k, l, n, p, t, x, D, G, I, Q, X, Fa) {
  function La() {
    HB >= D ? (clearInterval(GB), GB = -1) : vB.style.width = HB + "%";
  }
  if (mB) {
    ZB && $B(ZB);
    aC && $B(aC);
    VB();
    mB.style.display = "block";
    mB.style.width = "420px";
    mB.style.paddingLeft = "10px";
    nw.style.display = "none";
    a && "" != a && (nw.style.display = "block", nw.style.marginLeft = "0px", nw.innerHTML = a);
    oB.style.display = "block";
    a = 20;
    qB.className = "extension_reset_css AnnotateMsgDialogBtn";
    d && "" != d.trim() ? (qB.style.display = "inline-block", qB.innerText = d, qB.style.right = a + "px", qB.style.padding = "10px", a += qB.clientWidth + 10, qB.addEventListener("touchstart", function(Aa) {
      Aa.preventDefault();
      Aa.stopPropagation();
    }, {capture:!0, passive:!1}), qB.addEventListener("pointerdown", function(Aa) {
      Aa.preventDefault();
      Aa.stopPropagation();
    }, {capture:!0, passive:!1}), qB.addEventListener("pointerup", function(Aa) {
      Aa.preventDefault();
      Aa.stopPropagation();
      Ip();
      YB();
      f && f(wB.checked);
      W.ba && bC();
    }, {capture:!0, passive:!1})) : qB.style.display = "none";
    oB.innerHTML = b;
    c && "" != c.trim() ? (pB.style.display = "inline-block", pB.innerText = c, pB.style.right = a + "px", pB.style.padding = "10px", a += pB.clientWidth + 10, pB.addEventListener("touchstart", function(Aa) {
      Aa.preventDefault();
      Aa.stopPropagation();
    }, {capture:!0, passive:!1}), pB.addEventListener("pointerdown", function(Aa) {
      Aa.preventDefault();
      Aa.stopPropagation();
    }, {capture:!0, passive:!1}), pB.addEventListener("pointerup", function(Aa) {
      Aa.preventDefault();
      Aa.stopPropagation();
      Ip();
      YB();
      e && e(wB.checked);
      W.ba && bC();
    }, {capture:!0, passive:!1})) : pB.style.display = "none";
    X && "" != X.trim() ? (rB.style.display = "inline-block", rB.innerText = X, rB.style.left = "10px", rB.style.padding = "10px", rB.addEventListener("touchstart", function(Aa) {
      Aa.preventDefault();
      Aa.stopPropagation();
    }, {capture:!0, passive:!1}), rB.addEventListener("pointerdown", function(Aa) {
      Aa.preventDefault();
      Aa.stopPropagation();
    }, {capture:!0, passive:!1}), rB.addEventListener("pointerup", function(Aa) {
      Aa.preventDefault();
      Aa.stopPropagation();
      Ip();
      YB();
      Fa && Fa(wB.checked);
    }, {capture:!0, passive:!1})) : rB.style.display = "none";
    l && "" != l.trim() ? (sB.style.display = "inline-block", sB.innerText = l, sB.style.right = a + "px") : sB.style.display = "none";
    Q && "" != Q.trim() ? (tB.style.display = "inline-block", tB.innerHTML = Q) : tB.style.display = "none";
    n ? (nB.style.display = "inline-block", nB.addEventListener("touchstart", function(Aa) {
      Aa.preventDefault();
      Aa.stopPropagation();
    }, {capture:!0, passive:!1}), nB.addEventListener("pointerdown", function(Aa) {
      Aa.preventDefault();
      Aa.stopPropagation();
    }, {capture:!0, passive:!1}), nB.addEventListener("pointerup", function(Aa) {
      Aa.preventDefault();
      Aa.stopPropagation();
      Ip();
      YB();
      p();
    }, {capture:!0, passive:!1})) : nB.style.display = "none";
    -1 != GB && (clearInterval(GB), GB = -1);
    t ? (uB.style.display = "block", vB.style.width = "1%", -1 != x && (vB.style.width = x + "%", HB = x, GB = setInterval(La, 1000))) : uB.style.display = "none";
    G ? (xB.style.display = "block", wB.checked = !1, I ? yB.innerHTML = I : yB.innerHTML = "Do not remind again") : xB.style.display = "none";
    -1 == D && (D = 95);
    if (b = document.getElementById("AnnotateRedirectButton")) {
      b.classList.add("extension_reset_css"), b.onclick = function(Aa) {
        Aa.preventDefault();
        Ip();
        YB();
        k();
      };
    }
    zB.style.display = "none";
    AB.style.display = "none";
    BB.style.display = "none";
    CB.style.display = "none";
    DB.style.display = "none";
    EB.style.display = "none";
    FB.style.display = "none";
    mB.style.left = (Math.floor(window.visualViewport.width) - mB.offsetWidth) / 2 + "px";
    mB.style.top = (Math.floor(window.visualViewport.height) - mB.offsetHeight) / 2 + "px";
  }
}
function Nn() {
  ZB && $B(ZB);
  YB();
}
function lB() {
  var a;
  if (!(a = mB && "block" == mB.style.display) && (a = NB)) {
    a: {
      a = NB;
      for (let b = 0; b < a.g.length; b++) {
        if (a.g[b].ob()) {
          a = !0;
          break a;
        }
      }
      a = !1;
    }
  }
  return a ? !0 : !1;
}
function cC(a) {
  Kn("Alert!", "You are not logged in your Annotate web account on this browser. Please login to continue using the web annotation tools.", "CANCEL", "LOGIN", function() {
  }, function() {
    window.open(a, "_blank");
  });
}
function em(a) {
  Kn("", a ? "Your starter account allows only 10 saves. Please upgrade your account to save more annotations." : "Please upgrade your account to access premium features.", "CANCEL", "UPGRADE", function() {
    ii("10.13.2");
  }, function() {
    ii("10.13.1");
    window.open(M.Wb, "_blank");
  }, null, null, !1, null, !1, -1, -1, !1, null, "", "MORE INFORMATION", function() {
    ii("10.16.7");
    window.open(M.ze, "_blank");
  });
}
function dC() {
  Kn("", "Could not get document import status.", "", "OK", function() {
  }, function() {
  });
}
function Jn(a, b, c, d, e, f) {
  d || (d = -1);
  e || (e = 1);
  f || (f = 95);
  Kn("", a, "", "", function() {
  }, function() {
  }, null, "CANCEL", b, function() {
  }, c, e, f);
}
function eC(a) {
  Kn("", a, "", "OK", function() {
  }, function() {
  });
}
function fC(a) {
  Kn("", a, "", "OK", function() {
  }, function() {
  });
}
function gC(a, b) {
  Kn("", a, "", "OK", function() {
  }, function() {
    b ? ii("10.12.8") : ii("10.12.7");
  });
}
function hC() {
  Kn("Alert!", "Your browser resolution/ zoom has changed. Some annotations may not be visible or may render incorrectly.", "", "OK", function() {
  }, function() {
  });
}
function iC() {
  Kn("Feature Update - Improved compatibility with Google Slides!", "Annotations are now tracked and saved for every slide. You can switch between menus/controls in Google Slides and our annotation tools seamlessly.", "", "GOT IT", function() {
  }, function() {
    L && L.sa({type:"AnnotateGoogleSlideFeatureUpdateDialogShown"}, null);
  });
}
function jC() {
  Kn("Alert!", "A new update for the 'Annotate: Web Annotations with Screen Sharing' extension is available. Click 'Install Now' to install the update immediately. Otherwise, it will be automatically installed when you restart Chrome.", "LATER", "INSTALL NOW", function() {
  }, function() {
    L && L.sa({type:"annotateUpdateExtension"}, null);
  });
}
function kC() {
  lB() || lC(mC) || window.top != window || (Lp(!1), Kn("", "The 'Annotate: Web Annotations with Screen Sharing' extension was updated successfully.", "", "OK", function() {
  }, function() {
  }));
}
function nC(a, b) {
  function c() {
    L.Xn();
  }
  function d() {
  }
  b && (d = b);
  a && (c = a);
  Kn("PowerPoint file detected!", "Your annotations may not save/ sync correctly. Conversion to Google Slides recommended for best compatibility.", "CANCEL", "CONTINUE", d, c);
}
function oC() {
  Kn("Alert!", "Saving web annotations over PDF content is not recommended. Your annotations may not render properly the next time you open them. We suggest you import PDF content into your Annotate web account and use the notebook annotation tools. Would you still like to save your annotations?", "CANCEL", "SAVE", function() {
    ii("10.15.4");
  }, function() {
    ii("10.15.3");
    L.Xn();
  }, null, null, !1, null, !1, -1, -1, !1, null, '<a href="https://annotate.net/tutorials#IC" target="_blank">How do I import content?</a>');
}
function pC() {
  Kn("", "An active stylus has been detected. Constrain drawing to stylus inputs only? Touch inputs will be ignored for drawing tools.", "CANCEL", "ENABLE", function() {
    ii("10.14.2");
  }, function() {
    ii("10.14.1");
    KB = !0;
    L.sa({type:"annotateStylusModeUpdated", value:!0}, null);
    LB && qC();
  });
}
function qC() {
  Kn("", "Click the Annotate icon on the browser toolbar to change Active Stylus Tracking. ", "", "GOT IT", function() {
  }, function(a) {
    a && L.sa({type:"annotateStylusModeChangeOptionMsgShown"}, null);
  }, null, null, !1, null, !1, -1, -1, !0);
}
function rC() {
  function a() {
    lt(-1, "");
    mt(null);
    L.Xn();
  }
  function b() {
    Jv && null != Jv.i && (hw(L.Pb()), iw(Jv));
    Kv && null != Kv.getImageData() && (jw(L.Pb(), Kv.getImageData()), Kv.l = null);
    Kv && null != Lv(Kv) && (kw(L.Pb(), Lv(Kv)), Kv.m = null);
  }
  ot() ? (console.log("Save as new for deleted Temp Livefeed Web Annotation"), lt(-1, ""), mt(null), nt(0), L.Xn()) : Kn("", "File not found. Create new?", "CANCEL", "CREATE", b, a);
}
function sC(a) {
  if (a.evtData && a.server_url) {
    var b = a.evtData;
    let l = b.livefeedId;
    var c = b.initiator;
    let n = b.LivefeedInfo;
    var d = a.server_url;
    n.uLivefeedActivityId = b.uLivefeedActivityId;
    if (!Xl(d) && window.top == window) {
      if (2 == M.j) {
        if (a = a.bLaunchingOnSelfLivefeedTab, M.g) {
          c = n.strGUID;
          var e = n.strPageUrl, f = parseInt(n.uLivefeedClassId), k = parseInt(n.uLivefeedType);
          a && (W.u && V && tC(), Nn(), Vn("Loading...", null));
          uC(e, c, k, f, d, a, b.uLivefeedActivityId);
        }
      } else {
        MB(3, `A Livestream <span style=\"display:inline-block;\">from</span> <span style=\"display:inline-block;\">${c}</span> <span style=\"display:inline-block;\">is available.</span>`, "JOIN", () => {
          vC(!0);
          L && L.sa({type:"checkLivefeedTabMappingAndLaunchOnJoin", livefeedId:l, LivefeedInfo:n}, null);
        }, "CANCEL", () => {
          vC(!0);
        });
      }
    }
  } else if (a.ActiveLivefeedForCCL && a.server_url && (b = a.server_url, 2 == M.j && M.g)) {
    d = a.ActiveLivefeedForCCL;
    c = d.strGUID;
    e = d.strPageUrl;
    f = parseInt(d.uLivefeedClassId);
    k = parseInt(d.uLivefeedType);
    if (a = a.bLaunchingOnSelfLivefeedTab) {
      Nn(), Vn("Loading...", null);
    }
    uC(e, c, k, f, b, a, d.uLivefeedActivityId);
  }
}
function vC(a) {
  var b = NB;
  for (let c = 0; c < b.g.length; c++) {
    let d = b.g[c];
    if (null != d && d.ob() && 3 == d.getType()) {
      gq(d);
      break;
    }
  }
  a && L.sa({type:"annotateWebAnnotationLivefeed", action:"HideJoinLivefeedNotification"}, null);
}
;const wC = Object.freeze({NONE:0, BE:1, EE:2, GE:3});
function xC(a) {
  a.Jd && Zg(a.Jd) && a.Jd.stop();
}
class yC extends EventTarget {
  static get i() {
    return "EVT_TIME_UPDATED";
  }
  static get g() {
    return "EVT_TIME_ELAPSED";
  }
  constructor() {
    super();
    this.m = !0;
    this.l = this.i = this.g = 0;
    this.j = !1;
    this.o = this.s.bind(this);
    this.Jd = new $g(this.o, 1000);
  }
  s() {
    this.g = Date.now() - this.l;
    this.g >= this.i ? (this.dispatchEvent(new CustomEvent(yC.g, {})), xC(this)) : this.dispatchEvent(new CustomEvent(yC.i, {}));
  }
  Hs() {
    this.g > this.i && (this.g = this.i);
    return this.g;
  }
  clear() {
    this.l = this.i = this.g = 0;
    this.j = !1;
    this.Jd.stop();
    this.Jd = null;
  }
}
function zC(a) {
  a.Jd && Zg(a.Jd) && a.Jd.stop();
}
class AC extends EventTarget {
  static get g() {
    return "EVT_TIME_UPDATED";
  }
  constructor() {
    super();
    this.j = this.l = this.g = 0;
    this.i = !1;
    this.m = this.o.bind(this);
    this.Jd = new $g(this.m, 1000);
  }
  o() {
    this.g = Date.now() - this.j;
    this.dispatchEvent(new CustomEvent(AC.g, {}));
  }
  Hs() {
    return this.g;
  }
  clear() {
    this.j = this.l = this.g = 0;
    this.i = !1;
    this.Jd.stop();
    this.Jd = null;
  }
}
function BC(a) {
  a = Math.round(a);
  let b = Math.floor(a / 60);
  return CC(Math.floor(b / 60).toString()) + ":" + CC((b % 60).toString()) + ":" + CC((a % 60).toString());
}
function DC() {
  return V && -1 != V.l ? !Ks(1) || Qh() || M.g : !1;
}
function EC(a) {
  var b = Xo.g;
  b.R && (a ? b.R.addEventListener("pointerdown", b.l, b.O) : b.R.removeEventListener("pointerdown", b.l, b.O));
}
function FC(a) {
  a.R.style.left = a.left + "px";
  a.R.style.top = a.top + "px";
  a.R.style.width = a.width + "px";
  a.R.style.height = a.height + "px";
  a.R.style.fontSize = a.fontSize + "px";
}
function CC(a) {
  for (; 2 > a.length;) {
    a = "0" + a;
  }
  return a;
}
function ps(a, b) {
  Number.isNaN(b) || (a.i = b, a.Text = BC(b), a.R.innerText = a.Text);
}
class GC extends Wm {
  static get ui() {
    return 184;
  }
  static get Jj() {
    return 54;
  }
  static get i() {
    return 45;
  }
  static get j() {
    return 48;
  }
  static get g() {
    return "EVT_ELEMENT_CLICKED";
  }
  constructor(a) {
    super();
    this.parent = a;
    this.O = {capture:!0, passive:!1};
    this.A = this.j = null;
    this.S = -1;
    this.type = "timerElement";
    this.height = GC.Jj;
    this.width = GC.ui;
    this.top = GC.j;
    this.left = (window.visualViewport.width - this.width) / 2;
    this.i = 0;
    this.fontSize = GC.i;
    this.Mc = !1;
    this.R = null;
    this.g = !1;
    this.Text = BC(0);
    this.l = this.o.bind(this);
    this.v = this.m.bind(this);
    ki && ki.addEventListener(qi.g, this.v);
    this.bn();
  }
  bn() {
    this.R = document.createElement("div");
    this.R.className = "extension_reset_css annotate-plugin-clickable-element";
    this.R.id = "AnnotatePluginTimerClock";
    this.R.style.width = this.width + "px";
    this.R.style.height = this.height + "px";
    this.R.style.fontSize = this.fontSize + "px";
    this.R.style.top = this.top + "px";
    this.R.style.left = this.left + "px";
    this.R.style.visibility = "hidden";
    this.R.innerHTML = this.Text;
    ik(this.R);
    this.parent.appendChild(this.R);
    this.m();
  }
  m() {
    this.R && (ki && 1 == ki.g && !DC() ? this.R.style.cursor = "pointer" : this.R.style.cursor = "default");
  }
  o(a) {
    a.currentTarget === a.target && (a.stopPropagation(), a.preventDefault(), this.dispatchEvent(new CustomEvent(GC.g, {})));
  }
  lf(a) {
    this.R.style.fontSize = a + "px";
    this.fontSize = a;
  }
  ej(a) {
    this.R.style.zIndex = a;
  }
  Fa(a) {
    super.Fa(a);
    "type" in a && (this.type = a.type);
    "fontSize" in a && (this.fontSize = a.fontSize);
    "top" in a && (this.top = a.top);
    "left" in a && (this.left = a.left);
    "height" in a && (this.height = a.height);
    "width" in a && (this.width = a.width);
    "pageInfo" in a && (this.A = JSON.parse(JSON.stringify(a.pageInfo)));
    "pageIndex" in a && (this.S = parseInt(a.pageIndex));
    "bShow" in a && (this.Mc = a.bShow);
    this.R && (FC(this), this.Ql(this.Mc));
  }
  Na() {
    var a = super.Na();
    this.Fb(a);
    return a;
  }
  Fb(a) {
    a.type = this.type;
    a.fontSize = this.fontSize;
    a.top = this.top;
    a.left = this.left;
    a.height = this.height;
    a.width = this.width;
    a.pageInfo = this.A ? JSON.parse(JSON.stringify(this.A)) : this.A;
    a.pageIndex = this.S;
    a.timerData = Object.assign({}, this.j);
    a.bShow = this.Mc;
    a.bCurrentTimerState = this.g;
    a.uTime = this.i;
  }
  la() {
    return this.R;
  }
  Kd(a) {
    this.R && !a.contains(this.R) && a.appendChild(this.R);
  }
  getTime() {
    return this.i;
  }
  Ql(a) {
    a ? (this.R.style.visibility = "visible", this.Mc = !0) : (this.R.style.visibility = "hidden", this.Mc = !1);
  }
  gb() {
    this.R.remove();
    this.R = null;
  }
}
function Wo(a, b) {
  console.log("[Timer] Apply CurrentPage TimerState", b);
  b && (HC(a), "timerData" in b && (a.l = b.timerData), IC(a, a.l.time, a.l.message, a.l.lo), a.g.Fa(b), a.v = a.g.Mc, a.ce = !1);
  JC(a);
}
function qs() {
  var a = Xo;
  let b = a.ba;
  HC(a);
  console.log("apply saved user data", b, a.N);
  !b && a.N && IC(a, a.N.time, a.N.message, a.N.lo);
  a.v = !a.v;
  a.ce = !0;
  a.g && (a.g.Ql(a.v), KC(a), S.zy(a.g, a.v));
  !a.v && a.G && LC(a);
  a.v || MC(a, !1);
  Oo(S).xb();
  JC(a);
}
function IC(a, b, c, d) {
  a.l.lo = d;
  a.l.message = c;
  a.l.time = b;
  d || (a.l.rH = b, a.l.pH = c);
  d ? (a.g.g && (c = a.s, c.i = !0, zC(c)), a.B = 1000 * b) : (a.g.g && (b = a.m, b.j = !0, xC(b)), a.B = 0);
  a.g.g = !1;
  a.g && (ps(a.g, a.l.time), a.g.j = a.l);
  NC(a);
  OC(a, !0);
}
function NC(a) {
  let b = document.getElementById("annotate-timer-play-Pause");
  b && (a.l.lo || 0 != a.g.getTime() && 0 != a.l.time ? (b.classList.remove("AnnotateMsgDialogBtnDisabled"), b.style.cursor = "pointer") : (b.classList.add("AnnotateMsgDialogBtnDisabled"), b.style.cursor = "default"));
}
function OC(a, b) {
  let c = document.getElementById("annotate-timer-reset");
  c && (b ? (c.classList.add("AnnotateMsgDialogBtnDisabled"), c.style.cursor = "default") : (c.classList.remove("AnnotateMsgDialogBtnDisabled"), c.style.cursor = "pointer"), a.lb = !b);
}
function HC(a) {
  null == a.m && (a.m = new yC(), a.m.addEventListener(yC.i, a.ya), a.m.addEventListener(yC.g, a.ld));
  null == a.s && (a.s = new AC(), a.s.addEventListener(AC.g, a.ya));
  a.g && (a.g.g = !1);
  null == a.C && (a.C = document.createElement("audio"), a.C.className = "extension_reset_css", a.C.src = window.chrome.runtime.getURL("audio/Alarm.mp3"));
  null == a.g && (a.g = new GC(a.parentElement), a.g.ej(a.M), a.g.xb(), a.g.addEventListener(GC.g, a.Dd), a.g.Ql(!1), a.v = !1, IC(a, 0, "", !1), a.ce = !0);
  null == a.u && (a.u = new PC(420, 280), a.u.addEventListener(PC.i, a.Pe), a.u.addEventListener(PC.g, a.Lc));
  null == a.i && (a.i = document.createElement("div"), a.i.id = "annotate-timer-resize-element-box", a.i.classList.add("extension_reset_css"), a.i.classList.add("annotate-drag-elements"), a.i.style.border = "1px dashed #ff0000", a.i.style.display = "none", a.i.style.boxSizing = "border-box", a.i.style.position = "fixed", a.i.style.zIndex = parseInt(a.M) + 1 + "", a.i.style.cursor = "all-scroll", a.i.addEventListener("pointerdown", a.Db, a.O), a.parentElement.appendChild(a.i));
  null == a.o && (a.o = document.createElement("div"), a.o.id = "annotate-timer-resize-element-handle", a.o.classList.add("extension_reset_css"), a.o.classList.add("annotate-drag-elements"), a.o.style.display = "none", a.o.style.width = "24px", a.o.style.height = "24px", a.o.style.position = "fixed", a.o.style.backgroundImage = "url(" + window.chrome.runtime.getURL("images/resize_element_handle.png") + ")", a.o.style.backgroundSize = "24px", a.o.style.zIndex = parseInt(a.M) + 1 + "", a.parentElement.appendChild(a.o), 
  a.o.addEventListener("pointerdown", a.Gb, a.O));
  if (null == a.j) {
    let e = {parent:a.parentElement, id:"annotate-timer-edit-toolbar", style:{position:"fixed", backgroundColor:"rgb(255,255,255)", zIndex:a.Ha, padding:"4px", border:"1px solid #c0c0c0", display:"none", fontSize:0, fontWeight:"normal", "box-sizing":"border-box", width:"166px"}, buttons:[{id:"annotate-timer-setting", title:"Settings", className:"extension_icon extension_icon-settings", style:{height:"24px", width:"24px", "float":"left", boxSizing:"border-box", position:"relative", color:"#000000"}, 
    Qa:a.Tp}, {id:"annotate-timer-sep", style:{height:"24px", width:"1px", "float":"left", backgroundColor:"#c0c0c0", marginLeft:"4px", boxSizing:"border-box"}}, {id:"annotate-timer-play-Pause", title:"Play", className:"extension_icon extension_icon-play", style:{height:"24px", width:"24px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", color:"#000000"}, Qa:a.Bj}, {id:"annotate-timer-sep", style:{height:"24px", width:"1px", "float":"left", backgroundColor:"#c0c0c0", 
    marginLeft:"4px", boxSizing:"border-box"}}, {id:"annotate-timer-reset", title:"Reset", className:"extension_icon extension_icon-reset_timer", style:{height:"24px", width:"24px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", color:"#000000"}, Qa:a.Rp}, {id:"annotate-timer-sep", style:{height:"24px", width:"1px", "float":"left", backgroundColor:"#c0c0c0", marginLeft:"4px", boxSizing:"border-box"}}, {id:"annotate-timer-delete", title:"Delete", className:"extension_icon extension_icon-delete", 
    style:{height:"24px", width:"24px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", color:"#000000"}, Qa:a.qm}, {id:"annotate-timer-sep", style:{height:"24px", width:"1px", "float":"left", backgroundColor:"#c0c0c0", marginLeft:"4px", boxSizing:"border-box"}}, {id:"annotate-timer-close", title:"Close", className:"extension_icon extension_icon-close", style:{height:"24px", width:"24px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", 
    color:"#000000"}, Qa:a.Xi}]};
    var b = e.buttons;
    if (b && b.length) {
      a.j = document.createElement("div");
      a.j.classList.add("extension_reset_css");
      a.j.style.userSelect = "none";
      a.j.style["-webkit-user-select-none"] = "none";
      a.j.style.clear = "both";
      ik(a.j);
      e.title && a.j.setAttribute("title", e.title);
      e.id && (a.j.id = e.id);
      e.style && Pj(a.j, e.style);
      for (var c = 0; c < b.length; c++) {
        var d;
        (d = QC(b[c])) && a.j.appendChild(d);
      }
      e.parent.appendChild(a.j);
    }
    NC(a);
    OC(a, !0);
  }
  a.ba = !0;
  console.log("[Timer] Init Timer Components");
}
function JC(a) {
  si() && a.g && (Vk(P) && a.v ? a.g.Ql(!0) : a.g.Ql(!1));
}
function RC(a, b) {
  var c = Xo;
  c.M = a;
  c.Ha = b;
  c.ba && (c.g.ej(c.M), c.i.style.zIndex = parseInt(c.M) + 1 + "", c.o.style.zIndex = parseInt(c.M) + 1 + "", c.j.style.zIndex = c.Ha);
}
function QC(a) {
  function b() {
    window.addEventListener("pointerup", d, !1);
    window.addEventListener("pointercancel", c, !1);
  }
  function c() {
    window.removeEventListener("pointerup", d, !1);
    window.removeEventListener("pointercancel", c, !1);
  }
  function d(f) {
    window.removeEventListener("pointerup", d, !1);
    window.removeEventListener("pointercancel", c, !1);
    (f.target == e || e.contains(f.target)) && a.Qa && a.Qa.call(this, f);
  }
  let e = document.createElement("div");
  a.id && (e.id = a.id);
  a.title && e.setAttribute("title", a.title);
  e.style.userSelect = "none";
  e.style.cursor = "pointer";
  a.selected && (e.style.borderBottom = "3px solid #2196f3");
  e.className = "extension_reset_css";
  a.className && (e.className += " " + a.className);
  a.style && Pj(e, a.style);
  a.innerHTML && (e.innerHTML = a.innerHTML);
  a.Qa && e.addEventListener("pointerdown", b, !1);
  return e;
}
function SC(a) {
  let b = document.getElementById("annotate-timer-play-Pause");
  b && (a ? (b.className = "extension_reset_css extension_icon extension_icon-play", b.title = "Play") : (b.className = "extension_reset_css extension_icon extension_icon-pause", b.title = "Pause"));
}
function KC(a) {
  if (a.ba && (!a.g || !DC())) {
    var b = a.g.la();
    a.i.style.display = "block";
    a.i.style.border = "1px dashed #ff0000";
    a.i.style.zIndex = parseInt(a.M) + 1 + "";
    a.i.style.cursor = "all-scroll";
    a.i.style.height = b.getBoundingClientRect().height + 30 + "px";
    a.i.style.width = b.getBoundingClientRect().width + 30 + "px";
    var c = b.offsetLeft;
    a.i.style.top = b.offsetTop - 15 + "px";
    a.i.style.left = c - 15 + "px";
    a.j.style.display = "block";
    0 <= a.i.offsetTop - 10 - a.j.offsetHeight ? (a.j.style.top = a.i.offsetTop - 10 - a.j.offsetHeight + "px", a.j.style.left = a.i.offsetLeft + a.i.offsetWidth / 2 - a.j.offsetWidth / 2 + "px") : a.i.offsetTop + a.i.offsetHeight + 10 + a.j.offsetHeight <= window.visualViewport.height ? (a.j.style.top = a.i.offsetTop + a.i.offsetHeight + 10 + "px", a.j.style.left = a.i.offsetLeft + a.i.offsetWidth / 2 - a.j.offsetWidth / 2 + "px") : 0 <= a.i.offsetLeft - 10 - a.j.offsetWidth ? (a.j.style.top = a.i.offsetTop + 
    a.i.offsetHeight / 2 - a.j.offsetHeight / 2 + "px", a.j.style.left = a.i.offsetLeft - a.j.offsetWidth - 10 + "px") : a.i.offsetLeft + a.i.offsetWidth + 15 + a.j.offsetWidth <= window.visualViewport.width ? (a.j.style.top = a.i.offsetTop + a.i.offsetHeight / 2 - a.j.offsetHeight / 2 + "px", a.j.style.left = a.i.offsetLeft + a.i.offsetWidth + 15 + "px") : (a.j.style.top = a.i.offsetTop + 25 + "px", a.j.style.left = a.i.offsetLeft + 25 + "px");
    a.o.style.display = "block";
    a.o.style.left = a.i.offsetLeft + a.i.offsetWidth - 12 + "px";
    a.o.style.top = a.i.offsetTop + a.i.offsetHeight - 12 + "px";
    a.G = !0;
  }
}
function MC(a, b) {
  a.m && xC(a.m);
  a.s && Zg(a.s.Jd) && zC(a.s);
  b && (a.v = !1, a.g.Ql(a.v), S.zy(a.g, !1), a.G && LC(a), Oo(S).xb());
  a.B = 0;
  a.g && (a.g.g = !1, ps(a.g, a.l.time));
  SC(!0);
  NC(a);
  OC(a, !0);
}
function LC(a) {
  sk(a.i, !1);
  sk(a.o, !1);
  sk(a.j, !1);
  a.G = !1;
}
function TC(a) {
  var b = Xo;
  if (a = JSON.parse(a)) {
    let c = !1, d = "", e = 0;
    "bToggleState" in a && (c = a.bToggleState);
    "time" in a && (e = parseInt(a.time));
    "message" in a && (d = a.message);
    b.N = {lo:c, time:e, message:d};
  }
}
function UC(a, b) {
  let c = parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-left"));
  return a <= window.visualViewport.width - c - b - 15;
}
function VC(a, b) {
  let c = parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-top"));
  return a <= window.visualViewport.height - c - b - 15;
}
function WC(a) {
  var b = Xo;
  if (b.g && (a.target.id == b.g.la().id || a.target.id == b.i.id)) {
    return !0;
  }
  let c = a.clientX, d = a.clientY;
  if (b.g && b.v) {
    var e = b.j.getBoundingClientRect();
    if (b.G && e) {
      var f = e.width;
      let k = e.height, l = e.top;
      e = e.left;
      if (c > e && c < e + f && d > l && d < l + k) {
        return !0;
      }
    }
    if (a.target !== a.currentTarget) {
      return !1;
    }
    if (e = b.g.la().getBoundingClientRect()) {
      if (a = e.width, b = e.height, f = e.top, e = e.left, c > e && c < e + a && d > f && d < f + b) {
        return !0;
      }
    }
  }
  return !1;
}
function XC(a) {
  var b = Xo;
  b.v = a;
  b.g && b.g.Ql(a);
  !b.v && b.G && LC(b);
  b.v || MC(b, !1);
  JC(b);
}
function Lr(a, b) {
  a.m && b.timerControllerState && Object.keys(b.timerControllerState).length && (a.m.l = b.timerControllerState.initialTime, a.m.g = b.timerControllerState.timerElapsed, a.m.i = b.timerControllerState.totalTime);
  a.s && b.stopWatchControllerState && Object.keys(b.stopWatchControllerState).length && (a.s.j = b.stopWatchControllerState.initialTime, a.s.g = b.stopWatchControllerState.timerElapsed, a.s.l = b.stopWatchControllerState.totalTime);
}
class YC {
  constructor() {
    this.parentElement = document.body;
    this.zc = this.lc = this.Ib = this.Eb = 0;
    this.M = "2147483643";
    this.Ha = "2147483645";
    this.O = {capture:!0, passive:!1};
    this.J = this.j = this.o = this.i = this.u = this.g = null;
    this.G = this.v = !1;
    this.l = {lo:!1, time:0, message:"", rH:0, pH:""};
    this.N = null;
    this.B = 0;
    this.C = this.s = this.m = null;
    this.ce = this.lb = this.ba = !1;
    this.Dd = this.st.bind(this);
    this.Db = this.ze.bind(this);
    this.$s = this.Dj.bind(this);
    this.Jb = this.gf.bind(this);
    this.ia = this.Cf.bind(this);
    this.jx = this.cD.bind(this);
    this.Gb = this.oi.bind(this);
    this.ic = this.Wi.bind(this);
    this.pa = this.ib.bind(this);
    this.Tp = this.Nl.bind(this);
    this.Bj = this.ea.bind(this);
    this.qm = this.Qk.bind(this);
    this.Xi = this.Th.bind(this);
    this.Rp = this.Wb.bind(this);
    this.Pe = this.ed.bind(this);
    this.Lc = this.qv.bind(this);
    this.ya = this.Va.bind(this);
    this.ld = this.An.bind(this);
    this.pf = this.eg.bind(this);
    P.addEventListener(Xk.g, this.pf);
  }
  Va() {
    if (this.l.lo) {
      this.B = this.s.Hs();
      var a = this.B / 1000;
    } else {
      this.B = this.m.Hs(), a = this.m, a = (a.i - a.g) / 1000;
    }
    ps(this.g, a);
    OC(this, !1);
  }
  An() {
    this.B = 1000 * this.l.time;
    ps(this.g, 0);
    if (this.l.message && 0 < this.l.message.length) {
      var a = this.l.message;
      this.J || (this.J = new ZC(), this.J.ea.textContent = "Time's up", oq(this.J, "OK", null, null, null, null));
      this.J.g.innerHTML = a;
      this.J.C();
      this.J.l();
    }
    this.C && this.C.play();
    SC(!0);
    NC(this);
    OC(this, !1);
  }
  Nl() {
    if (this.u) {
      var a = this.u, b = this.l.rH, c = this.l.pH, d = this.l.lo;
      a.Wb = !0;
      a.Db = !0;
      a.Jb = !0;
      a.Va = !1;
      a.v.Hj("0");
      a.u.Hj("0");
      a.m.Hj("0");
      a.G.Hj("");
      $C(a, !0);
      a.pf = d;
      let e = Math.floor(b / 3600);
      a.ld = e.toString();
      b -= 3600 * e;
      e = Math.floor(b / 60);
      a.Dd = e.toString();
      a.ed = (b - 60 * e).toString();
      a.Lc = c;
      a.lb = !1;
      a.Wb && a.Db && a.Jb && a.lb || a.Va || a.pf ? $C(a, !0) : $C(a, !1);
      d ? (a.B.value = "Stopwatch", a.Va = d, a.v.Hj(a.ld), a.u.Hj(a.Dd), a.m.Hj(a.ed), a.G.Hj(a.Lc), aD(a)) : (a.B.value = "Timer", bD(a));
      this.u && this.u.C();
    }
  }
  ea() {
    KC(this);
    if (this.l.lo) {
      if (this.g.g) {
        var a = this.s;
        a.i = !0;
        zC(a);
        this.B = this.s.Hs();
        SC(!0);
      } else {
        this.s.i = !1;
        a = this.s;
        var b = this.B;
        a.j = Date.now() - b;
        a.g = b;
        a = this.s;
        a.i || Zg(a.Jd) || a.Jd.start();
        SC(!1);
      }
    } else {
      if (this.g.g) {
        a = this.m, a.j = !0, xC(a), this.B = this.m.Hs(), SC(!0);
      } else if (0 < 1000 * this.l.time - this.B) {
        this.m.j = !1, this.m.m = !0, a = this.m, b = this.B, a.l = Date.now() - b, a.g = b, a.m && a.dispatchEvent(new CustomEvent("ClockEvent", {detail:{second:20}})), a.g > a.i && (a.g = a.i), a = this.m, b = this.l.time, a.j || (Zg(a.Jd) || a.Jd.start(), a.i = 1000 * b), SC(!1);
      } else {
        return;
      }
    }
    yv(this.g, wC.BE);
    this.g.g = !this.g.g;
    this.C.load();
  }
  Qk() {
    MC(this, !0);
    this.ce = !0;
  }
  Th() {
    LC(this);
  }
  Wb() {
    this.lb && yv(this.g, wC.EE);
    KC(this);
    MC(this, !1);
    OC(this, !0);
  }
  ed(a) {
    MC(this, !1);
    let b = !1;
    a = a.detail;
    let c = !1, d = "", e = 0;
    "bToggleState" in a && (c = a.bToggleState, this.l.lo != c && (b = !0));
    "time" in a && (e = parseInt(a.time), this.l.time != e && (b = !0));
    "message" in a && (d = a.message, this.l.message != d && (b = !0));
    IC(this, e, d, c);
    KC(this);
    this.u && gq(this.u);
    this.ce = !0;
    console.log("[Timer] data to be set on save click", this.l);
    a = {lo:c, time:e, message:d};
    console.log("[Timer] data to be sent to save on server", JSON.stringify(a));
    a = JSON.stringify(a);
    L.sa({type:"saveTimerSettingPreference", oData:a}, null);
    b && yv(this.g, wC.GE);
  }
  qv() {
    KC(this);
  }
  st() {
    this.G || KC(this);
  }
  ze(a) {
    this.g && (window.addEventListener("touchmove", this.$s, this.O), window.addEventListener("pointermove", this.Jb, this.O), window.addEventListener("pointerup", this.ia, this.O), document.addEventListener("scroll", this.jx, this.O), document.addEventListener("pointerup", this.ia, this.O), this.Eb = a.clientX, this.Ib = a.clientY);
    this.o.style.display = "none";
    this.j.style.display = "none";
    this.i.style.border = "0px";
    a.stopPropagation();
    a.preventDefault();
  }
  cD() {
    this.Dw();
  }
  Dw() {
    window.removeEventListener("touchmove", this.$s, this.O);
    window.removeEventListener("pointermove", this.Jb, this.O);
    window.removeEventListener("pointerup", this.ia, this.O);
    document.removeEventListener("scroll", this.jx, this.O);
    document.removeEventListener("pointerup", this.ia, this.O);
    this.g && KC(this);
    if (this.g && this.Nk()) {
      let a = Oo(S);
      a && As(a, this.g);
    }
  }
  Dj(a) {
    a.preventDefault();
  }
  gf(a) {
    a.preventDefault();
    let b = this.g.la();
    var c = parseFloat(b.style.left.slice(0, -2)) + (a.clientX - this.Eb), d = parseFloat(b.style.top.slice(0, -2)) + (a.clientY - this.Ib);
    15 <= c && UC(c, b.offsetWidth) && (this.g.left = c, this.Eb = a.clientX);
    15 <= d && VC(d, b.offsetHeight) && (this.g.top = d, this.Ib = a.clientY);
    FC(this.g);
    this.ce = !0;
  }
  Cf() {
    this.Dw();
  }
  oi(a) {
    window.addEventListener("touchmove", this.$s, this.O);
    window.addEventListener("pointermove", this.ic, this.O);
    window.addEventListener("pointerup", this.pa, this.O);
    document.addEventListener("pointerup", this.pa, this.O);
    this.Eb = a.clientX;
    this.Ib = a.clientY;
    let b = this.g.la();
    this.lc = b.offsetWidth;
    this.zc = b.offsetHeight;
    this.i.style.display = "none";
    this.o.style.display = "none";
    this.j.style.display = "none";
    a.stopPropagation();
    a.preventDefault();
  }
  Wi(a) {
    if (kh(a)) {
      a.preventDefault();
      var b = a.clientX - this.Eb;
      b = this.lc * Math.max((this.lc + b) / this.lc, (this.zc + (a.clientY - this.Ib)) / this.zc) - this.lc;
      a = Math.floor(this.lc + b);
      b = Math.floor(GC.Jj / GC.ui * a);
      var c = GC.Jj / GC.ui * 500;
      b < GC.Jj / GC.ui * 120 || 120 > a || b > c || 500 < a || !UC(this.g.left, a) || !VC(this.g.top, b) || (c = this.g, c.width = a, c.height = b, c.R.style.width = a + "px", c.R.style.height = b + "px", this.g.lf(Math.floor(GC.i / GC.Jj * b)));
    } else {
      this.ib(a);
    }
  }
  ib(a) {
    a.preventDefault();
    window.removeEventListener("touchmove", this.$s, this.O);
    window.removeEventListener("pointermove", this.ic, this.O);
    window.removeEventListener("pointerup", this.pa, this.O);
    document.removeEventListener("pointerup", this.pa, this.O);
    KC(this);
    this.ce = !0;
    this.g && this.Nk() && (a = Oo(S)) && As(a, this.g);
  }
  Nk() {
    return this.g && this.ce;
  }
  eg() {
    LC(this);
  }
  Kd(a) {
    this.g && this.g.Kd(a);
  }
  hx() {
    this.ba = this.G = this.v = !1;
  }
  gb() {
    this.hx();
    this.g && this.g.removeEventListener(GC.g, this.Dd);
    this.u && (this.u.removeEventListener(PC.i, this.Pe), this.u.removeEventListener(PC.g, this.Lc));
    this.i && this.i.removeEventListener("pointerdown", this.Db, this.O);
    this.o && this.o.removeEventListener("pointerdown", this.Gb, this.O);
    this.s && this.s.removeEventListener(AC.g, this.ya);
    this.m && (this.m.removeEventListener(yC.i, this.ya), this.m.removeEventListener(yC.g, this.ld));
    this.g && (this.g.gb(), this.g = null);
    this.u && (this.u.gb(), this.u = null);
    this.J && (this.J.gb(), this.J = null);
    this.i && (this.i.remove(), this.i = null);
    this.o && (this.o.remove(), this.o = null);
    this.j && (this.j.remove(), this.j = null);
    this.s && (this.s.clear(), this.s = null);
    this.m && (this.m.clear(), this.m = null);
    this.C && (this.C.remove(), this.C = null);
    console.log("[Timer] Dispose timer UI Element");
  }
}
;function cD(a) {
  a.Nb.innerHTML = 1 == a.kp ? "Dark" : "Light";
  a.R.style.backgroundColor = "rgba(138,138,170," + a.kp + ")";
}
function hs(a) {
  a.R && (a.R.style.left = Math.floor(a.A.x + a.offsetLeft) + "px", a.R.style.top = a.A.y + a.offsetTop + "px", a.R.style.width = a.width + "px", a.R.style.height = a.height + "px", a.Oc && (a.W.Oc.top = a.height / 2 - a.Ob / 2 + "px", a.W.Oc.left = "12px"), a.Ec && (a.W.Ec.top = a.height / 2 - a.Ob / 2 + "px", a.W.Ec.left = a.width - a.Ob - 12 + "px"), a.dc && (a.W.dc.top = "12px", a.W.dc.left = a.width / 2 - a.Ob / 2 + "px"), a.Dc && (a.W.Dc.top = a.height - a.Ob - 12 + "px", a.W.Dc.left = a.width / 
  2 - a.Ob / 2 + "px"), a.tb && (a.W.tb.top = "10px", a.W.tb.left = a.width - a.Ob - 8 + "px"), a.Kc && (a.W.Kc.top = "8px", a.W.Kc.left = a.width - 2 * a.Ob - 16 + 1 + "px"), a.Gc && (a.W.Gc.top = "8px", a.W.Gc.left = a.width - 3 * a.Ob - 24 + "px"), a.bc && a.de && (a.bc.style.left = a.A.x + a.Ga + "px", a.bc.style.top = a.A.y + a.Ia + "px", a.bc.style.width = a.width < a.fb ? a.width - 16 + "px" : a.fb + "px", a.bc.style.height = a.height < a.nb ? a.height + "px" : a.nb + "px", a.fb = a.width < 
  a.fb ? a.width - 16 : a.fb, a.nb = a.height < a.nb ? a.height : a.nb, a.lm == dD && (a.bc.style.removeProperty("clip-path"), a.R.style.clipPath = `path('M 0 0 L 0 ${a.height} L ${a.width} ${a.height} L ${a.width} 0 L 0 0 M ${a.Ga - a.offsetLeft} ${a.Ia - a.offsetTop} L ${a.Ga - a.offsetLeft + a.fb} ${a.Ia - a.offsetTop} L ${a.Ga - a.offsetLeft + a.fb} ${a.Ia - a.offsetTop + a.nb} L ${a.Ga - a.offsetLeft} ${a.Ia - a.offsetTop + a.nb} L ${a.Ga - a.offsetLeft} ${a.Ia - a.offsetTop} z')`), a.lm == 
  eD && (a.R.style.clipPath = `path('M 0 0 L ${a.width} 0 L ${a.width} ${a.height} L 0 ${a.height} L 0 0 M ${a.Ga - a.offsetLeft + a.fb / 2} ${a.Ia - a.offsetTop} a ${a.fb / 2}, ${a.nb / 2} 0 1,0 1,0 z')`, a.bc.style.clipPath = `path('M ${a.fb / 2} 0 a ${a.fb / 2}, ${a.nb / 2} 0 1,0 1,0 z')`)), a.cd && a.de && (a.cd.style.top = a.A.y + a.Ia + a.nb - 12 + "px", a.cd.style.left = a.A.x + a.Ga + a.fb - 12 + "px"), a.Nb && (a.W.Nb.top = "12px", a.W.Nb.left = a.width - 3 * a.Ob - 48 - 32 - 2 + "px", cD(a), 
  a.Nb.innerHTML = 1 == a.kp ? "Dark" : "Light", a.R.style.backgroundColor = "rgba(138,138,170," + a.kp + ")"), parseFloat(a.W.dc.left) + parseFloat(a.dc.style.width) >= parseFloat(a.W.Nb.left) - 8 && (a.W.dc.left = parseFloat(a.W.Nb.left) - 8 - parseFloat(a.dc.style.width) + "px"), si() || Jk(P) || ml(P) || !a.de || (a.Ia <= a.offsetTop + parseFloat(a.W.Nb.top) + 26 && a.Ga + a.fb >= a.offsetLeft + parseFloat(a.W.Nb.left) - 4 && a.Ia + a.nb >= a.offsetTop + parseFloat(a.W.Nb.top) && a.Ga <= a.offsetLeft + 
  parseFloat(a.W.tb.left) + parseFloat(a.tb.style.width) + 8 ? (sk(a.Nb, !1), sk(a.Kc, !1), sk(a.Gc, !1), a.Ga + a.fb >= a.offsetLeft + parseFloat(a.W.tb.left) ? sk(a.tb, !1) : sk(a.tb, a.me())) : a.me() && (sk(a.Nb, !0), sk(a.Kc, !0), sk(a.Gc, !0), sk(a.tb, !0))));
}
function fD(a, b) {
  a.Ec && (a.Ec.style.display = b ? "block" : "none");
}
function gD(a, b) {
  a.Oc && (a.Oc.style.display = b ? "block" : "none");
}
function hD(a, b) {
  a.Dc && (a.Dc.style.display = b ? "block" : "none");
}
function iD(a, b) {
  a.dc && (a.dc.style.display = b ? "block" : "none");
}
function jD(a) {
  si() || Jk(P) || ml(P) || (kD(a, a.W.dc) && iD(a, !1), kD(a, a.W.Dc) && hD(a, !1), kD(a, a.W.Oc) && gD(a, !1), kD(a, a.W.Ec) && fD(a, !1));
  if (Vk(P) && a.de) {
    var b = hl(P.D, yo(P.D, a.S), new il(P.D.scrollX, P.D.scrollY));
    0 < b.Ua - a.Ia && iD(a, !1);
    -b.Ua + (a.Ia + a.nb) > P.D.Bb.clientHeight && hD(a, !1);
    0 < b.$a - a.Ga && gD(a, !1);
    -b.$a + (a.Ga + a.fb) > P.D.Bb.clientWidth && fD(a, !1);
    kD(a, a.W.dc) && iD(a, !1);
    kD(a, a.W.Dc) && hD(a, !1);
    kD(a, a.W.Oc) && gD(a, !1);
    kD(a, a.W.Ec) && fD(a, !1);
  }
  (Jk(P) || ml(P)) && a.de && (a.bc.getBoundingClientRect(), b = a.R.getBoundingClientRect(), a.A.y + a.Ia <= b.y && iD(a, !1), a.A.y + a.Ia + a.nb >= b.y + b.height && hD(a, !1), a.A.x + a.Ga <= b.x && gD(a, !1), a.A.x + a.Ga + a.fb >= b.x + b.width && fD(a, !1), lD(a, a.W.dc) && iD(a, !1), lD(a, a.W.Dc) && hD(a, !1), lD(a, a.W.Oc) && gD(a, !1), lD(a, a.W.Ec) && fD(a, !1));
}
function js(a) {
  0 == a.offsetLeft ? (fD(a, !0), gD(a, !1)) : (fD(a, !1), gD(a, !0));
  0 == a.offsetTop ? (hD(a, !0), iD(a, !1)) : (hD(a, !1), iD(a, !0));
  0 == a.offsetLeft && (0.0001 > Math.abs(a.offsetLeft + a.width - a.A.width) || Math.round(a.offsetLeft + a.width) >= a.A.width) && (gD(a, !0), fD(a, !0));
  0 == a.offsetTop && (0.0001 > Math.abs(a.offsetTop + a.height - a.A.height) || Math.round(a.offsetTop + a.height) >= a.A.height) && (iD(a, !0), hD(a, !0));
  jD(a);
  if (Math.round(a.height) < a.minHeight || Math.round(a.width) < a.minWidth || Vk(P) && 0.25 >= P.D.scale) {
    gD(a, !1), fD(a, !1), iD(a, !1), hD(a, !1);
  }
}
function kD(a, b) {
  return a.de ? a.Ia < parseFloat(b.top) + a.offsetTop && a.Ia + a.nb > parseFloat(b.top) + a.offsetTop + a.Ob && a.Ga < parseFloat(b.left) + a.offsetLeft && a.Ga + a.fb > parseFloat(b.left) + a.offsetLeft + a.Ob || a.Ia > parseFloat(b.top) + a.offsetTop - 12 && a.Ia < parseFloat(b.top) + a.offsetTop + a.Ob + 12 && (a.Ga > parseFloat(b.left) + a.offsetLeft - 12 && a.Ga < parseFloat(b.left) + a.offsetLeft + a.Ob + 12 || a.Ga + a.fb > parseFloat(b.left) + a.offsetLeft - 12 && a.Ga + a.fb < parseFloat(b.left) + 
  a.offsetLeft + a.Ob + 12 || a.Ga <= parseFloat(b.left) + a.offsetLeft - 12 && a.Ga + a.fb >= parseFloat(b.left) + a.offsetLeft + a.Ob + 12) || a.Ia + a.nb > parseFloat(b.top) + a.offsetTop - 12 && a.Ia + a.nb < parseFloat(b.top) + a.offsetTop + a.Ob + 12 && (a.Ga > parseFloat(b.left) + a.offsetLeft - 12 && a.Ga < parseFloat(b.left) + a.offsetLeft + a.Ob + 12 || a.Ga + a.fb > parseFloat(b.left) + a.offsetLeft - 12 && a.Ga + a.fb < parseFloat(b.left) + a.offsetLeft + a.Ob + 12 || a.Ga <= parseFloat(b.left) + 
  a.offsetLeft - 12 && a.Ga + a.fb >= parseFloat(b.left) + a.offsetLeft + a.Ob + 12) || a.Ga > parseFloat(b.left) + a.offsetLeft - 12 && a.Ga < parseFloat(b.left) + a.offsetLeft + a.Ob + 12 && (a.Ia > parseFloat(b.top) + a.offsetTop - 12 && a.Ia < parseFloat(b.top) + a.offsetTop + a.Ob + 12 || a.Ia + a.nb > parseFloat(b.top) + a.offsetTop - 12 && a.Ia + a.nb < parseFloat(b.top) + a.offsetTop + a.Ob + 12 || a.Ia <= parseFloat(b.top) + a.offsetTop - 12 && a.Ia + a.nb >= parseFloat(b.top) + a.offsetTop + 
  a.Ob + 12) || a.Ga + a.fb > parseFloat(b.left) + a.offsetLeft - 12 && a.Ga + a.fb < parseFloat(b.left) + a.offsetLeft + a.Ob + 12 && (a.Ia > parseFloat(b.top) + a.offsetTop - 12 && a.Ia < parseFloat(b.top) + a.offsetTop + a.Ob + 12 || a.Ia + a.nb > parseFloat(b.top) + a.offsetTop - 12 && a.Ia + a.nb < parseFloat(b.top) + a.offsetTop + a.Ob + 12 || a.Ia <= parseFloat(b.top) + a.offsetTop - 12 && a.Ia + a.nb >= parseFloat(b.top) + a.offsetTop + a.Ob + 12) ? !0 : !1 : !1;
}
function lD(a, b) {
  if (!a.de) {
    return !1;
  }
  let c = a.bc.getBoundingClientRect(), d = a.R.getBoundingClientRect();
  return c.y < parseFloat(b.top) + d.y && c.y + c.height > parseFloat(b.top) + d.y + a.Ob && c.x < parseFloat(b.left) + d.x && c.x + c.width > parseFloat(b.left) + d.x + a.Ob || c.y > parseFloat(b.top) + d.y - 12 && c.y < parseFloat(b.top) + d.y + a.Ob + 12 && (c.x > parseFloat(b.left) + d.x - 12 && c.x < parseFloat(b.left) + d.x + a.Ob + 12 || c.x + c.width > parseFloat(b.left) + d.x - 12 && c.x + c.width < parseFloat(b.left) + d.x + a.Ob + 12 || c.x <= parseFloat(b.left) + d.x - 12 && c.x + c.width >= 
  parseFloat(b.left) + d.x + a.Ob + 12) || c.y + c.height > parseFloat(b.top) + d.y - 12 && c.y + c.height < parseFloat(b.top) + d.y + a.Ob + 12 && (c.x > parseFloat(b.left) + d.x - 12 && c.x < parseFloat(b.left) + d.x + a.Ob + 12 || c.x + c.width > parseFloat(b.left) + d.x - 12 && c.x + c.width < parseFloat(b.left) + d.x + a.Ob + 12 || c.x <= parseFloat(b.left) + d.x - 12 && c.x + c.width >= parseFloat(b.left) + d.x + a.Ob + 12) || c.x > parseFloat(b.left) + d.x - 12 && c.x < parseFloat(b.left) + 
  d.x + a.Ob + 12 && (c.y > parseFloat(b.top) + d.y - 12 && c.y < parseFloat(b.top) + d.y + a.Ob + 12 || c.y + c.height > parseFloat(b.top) + d.y - 12 && c.y + c.height < parseFloat(b.top) + d.y + a.Ob + 12 || c.y <= parseFloat(b.top) + d.y - 12 && c.y + c.height >= parseFloat(b.top) + d.y + a.Ob + 12) || c.x + c.width > parseFloat(b.left) + d.x - 12 && c.x + c.width < parseFloat(b.left) + d.x + a.Ob + 12 && (c.y > parseFloat(b.top) + d.y - 12 && c.y < parseFloat(b.top) + d.y + a.Ob + 12 || c.y + 
  c.height > parseFloat(b.top) + d.y - 12 && c.y + c.height < parseFloat(b.top) + d.y + a.Ob + 12 || c.y <= parseFloat(b.top) + d.y - 12 && c.y + c.height >= parseFloat(b.top) + d.y + a.Ob + 12) ? !0 : !1;
}
function is(a) {
  a.Nb.style.top = a.W.Nb.top;
  a.Kc.style.top = a.W.Kc.top;
  a.Gc.style.top = a.W.Gc.top;
  a.tb.style.top = a.W.tb.top;
  a.dc.style.top = a.W.dc.top;
  a.Oc.style.top = a.W.Oc.top;
  a.Ec.style.top = a.W.Ec.top;
  a.Dc.style.top = a.W.Dc.top;
  a.Nb.style.left = a.W.Nb.left;
  a.Kc.style.left = a.W.Kc.left;
  a.Gc.style.left = a.W.Gc.left;
  a.tb.style.left = a.W.tb.left;
  a.dc.style.left = a.W.dc.left;
  a.Oc.style.left = a.W.Oc.left;
  a.Ec.style.left = a.W.Ec.left;
  a.Dc.style.left = a.W.Dc.left;
}
function ks(a, b) {
  (a.de = b) ? (a.Pw && (a.fb = 200, a.nb = 100, a.Ga = a.offsetLeft + a.width / 2 - a.fb / 2, a.Ia = a.offsetTop + a.height / 2 - a.nb / 2, a.Pw = !1), a.Ga + a.fb > a.offsetLeft + a.width && (a.Ga = a.offsetLeft + a.width - a.fb - 8), a.Ia + a.nb > a.offsetTop + a.height && (a.Ia = a.offsetTop + a.height - a.nb - 8), a.Ia < a.offsetTop && (a.Ia = a.offsetTop + 8), a.Ga < a.offsetLeft && (a.Ga = a.offsetLeft + 8), a.bc.style.display = "block", a.me() && (a.cd.style.display = "block"), a.lm == dD ? 
  (a.Kc.style.backgroundColor = "#c0c0c0", a.Gc.style.backgroundColor = "transparent") : (a.Gc.style.backgroundColor = "#c0c0c0", a.Kc.style.backgroundColor = "transparent"), hs(a), is(a), a.me() && js(a)) : (a.R.style.removeProperty("clip-path"), a.bc.style.display = "none", a.cd.style.display = "none", a.Kc.style.backgroundColor = "transparent", a.Gc.style.backgroundColor = "transparent");
}
function mD(a) {
  var b = null;
  Jk(P) && (b = document.getElementById("workspace-container"));
  ml(P) && P.g && (b = P.g.Gj, nD(P.g) && (b = P.g.Al));
  if (b) {
    var c = b.getBoundingClientRect();
    c.width = b.clientWidth;
    c.height = b.clientHeight;
    ml(P) && P.g && nD(P.g) && (c = oD(P.g, b));
    a.A.x + a.offsetLeft < c.x ? (a.R.style.left = c.x + "px", a.A.x + a.offsetLeft + a.width > c.x + c.width ? (a.R.style.width = c.width + "px", a.W.Oc.left = "12px", a.W.Ec.left = c.width - parseInt(a.Ec.style.height) - 12 + "px", a.W.dc.left = c.width / 2 - parseInt(a.dc.style.height) / 2 + "px", a.W.Dc.left = c.width / 2 - parseInt(a.Dc.style.height) / 2 + "px", a.W.tb.left = c.width - 24 - 8 + "px", a.W.Kc.left = c.width - 48 - 16 + 1 + "px", a.W.Gc.left = c.width - 72 - 24 + "px", a.W.Nb.left = 
    c.width - 72 - 48 - 32 - 2 + "px") : (a.R.style.width = a.A.x + a.offsetLeft + a.width - c.x + "px", a.W.Oc.left = "12px", a.W.Ec.left = parseFloat(a.R.style.width) - parseInt(a.Ec.style.height) - 12 + "px", a.W.dc.left = parseFloat(a.R.style.width) / 2 - parseInt(a.dc.style.height) / 2 + "px", a.W.Dc.left = parseFloat(a.R.style.width) / 2 - parseInt(a.Dc.style.height) / 2 + "px", a.W.tb.left = parseFloat(a.R.style.width) - 24 - 8 + "px", a.W.Kc.left = parseFloat(a.R.style.width) - 48 - 16 + 
    1 + "px", a.W.Gc.left = parseFloat(a.R.style.width) - 72 - 24 + "px", a.W.Nb.left = parseFloat(a.R.style.width) - 72 - 48 - 32 - 2 + "px")) : a.A.x + a.offsetLeft + a.width > c.x + c.width && (a.R.style.width = c.x + c.width - a.A.x - a.offsetLeft + "px", a.W.Oc.left = "12px", a.W.Ec.left = parseFloat(a.R.style.width) - parseInt(a.Ec.style.height) - 12 + "px", a.W.dc.left = parseFloat(a.R.style.width) / 2 - parseInt(a.dc.style.height) / 2 + "px", a.W.Dc.left = parseFloat(a.R.style.width) / 2 - 
    parseInt(a.Dc.style.height) / 2 + "px", a.W.tb.left = parseFloat(a.R.style.width) - 24 - 8 + "px", a.W.Kc.left = parseFloat(a.R.style.width) - 48 - 16 + 1 + "px", a.W.Gc.left = parseFloat(a.R.style.width) - 72 - 24 + "px", a.W.Nb.left = parseFloat(a.R.style.width) - 72 - 48 - 32 - 2 + "px");
    a.A.y + a.offsetTop < c.y ? (a.R.style.top = c.y + "px", a.A.y + a.offsetTop + a.height > c.y + c.height ? (a.R.style.height = c.height + "px", a.W.Oc.top = c.height / 2 - parseInt(a.Oc.style.height) / 2 + "px", a.W.Ec.top = c.height / 2 - parseInt(a.Ec.style.height) / 2 + "px", a.W.dc.top = "12px", a.W.Dc.top = c.height - parseInt(a.Dc.style.height) / 2 - 24 + "px") : (a.R.style.height = a.A.y + a.offsetTop + a.height - c.y + "px", a.W.dc.top = "12px", a.W.Dc.top = parseFloat(a.R.style.height) - 
    parseInt(a.Dc.style.height) / 2 - 24 + "px", a.W.Oc.top = parseFloat(a.R.style.height) / 2 - parseInt(a.Oc.style.height) / 2 + "px", a.W.Ec.top = parseFloat(a.R.style.height) / 2 - parseInt(a.Ec.style.height) / 2 + "px")) : a.A.y + a.offsetTop + a.height > c.y + c.height && (a.R.style.height = c.y + c.height - a.A.y - a.offsetTop + "px", a.W.dc.top = "12px", a.W.Dc.top = parseFloat(a.R.style.height) - parseInt(a.Dc.style.height) / 2 - 24 + "px", a.W.Oc.top = parseFloat(a.R.style.height) / 2 - 
    parseInt(a.Oc.style.height) / 2 + "px", a.W.Ec.top = parseFloat(a.R.style.height) / 2 - parseInt(a.Ec.style.height) / 2 + "px");
    parseFloat(a.W.dc.left) + parseFloat(a.dc.style.width) >= parseFloat(a.W.Nb.left) - 8 && (a.W.dc.left = parseFloat(a.W.Nb.left) - 8 - parseFloat(a.dc.style.width) + "px");
    if (a.de) {
      b = parseFloat(a.R.style.left);
      let d = parseFloat(a.R.style.top), e = parseFloat(a.R.style.width), f = parseFloat(a.R.style.height);
      a.lm == dD && (a.bc.style.removeProperty("clip-path"), a.R.style.clipPath = `path('M 0 0 L 0 ${f} L ${e} ${f} L ${e} 0 L 0 0 M ${a.A.x + a.Ga - b} ${a.A.y + a.Ia - d} L ${a.A.x + a.Ga - b + a.fb} ${a.A.y + a.Ia - d} L ${a.A.x + a.Ga - b + a.fb} ${a.A.y + a.Ia - d + a.nb} L ${a.A.x + a.Ga - b} ${a.A.y + a.Ia - d + a.nb} L ${a.A.x + a.Ga - b} ${a.A.y + a.Ia - d} z')`);
      a.lm == eD && (a.R.style.clipPath = `path('M 0 0 L ${e} 0 L ${e} ${f} L 0 ${f} L 0 0 M ${a.A.x + a.Ga - b + a.fb / 2} ${a.A.y + a.Ia - d} a ${a.fb / 2}, ${a.nb / 2} 0 1,0 1,0 z')`);
      a.A.x + a.Ga < c.x && (a.bc.style.left = c.x + "px", a.bc.style.width = a.A.x + a.Ga + a.fb - c.x + "px");
      a.A.x + a.Ga + a.fb > c.x + c.width && (a.bc.style.width = c.x + c.width - parseFloat(a.bc.style.left) + "px");
      a.A.y + a.Ia < c.y && (a.bc.style.top = c.y + "px", a.bc.style.height = a.A.y + a.Ia + a.nb - c.y + "px");
      a.A.y + a.Ia + a.nb > c.y + c.height && (a.bc.style.height = c.y + c.height - parseFloat(a.bc.style.top) + "px");
      a.bc.style.display = a.A.x + a.Ga + a.fb < c.x || a.A.x + a.Ga > c.x + c.width || a.A.y + a.Ia + a.nb < c.y || a.A.y + a.Ia > c.y + c.height ? "none" : "block";
      a.A.x + a.Ga + a.fb > c.x + c.width || a.A.x + a.Ga + a.fb < c.x || a.A.y + a.Ia + a.nb > c.y + c.height || a.A.y + a.Ia + a.nb < c.y ? a.cd.style.display = "none" : a.me() && (a.cd.style.display = "block");
    }
    a.Mc && a.me() && js(a);
    a.A.x + a.offsetLeft + a.width < c.x || a.A.x + a.offsetLeft > c.x + c.width || a.A.y + a.offsetTop + a.height < c.y || a.A.y + a.offsetTop > c.y + c.height ? (a.R.style.display = "none", a.Oc.style.display = "none", a.Ec.style.display = "none", a.dc.style.display = "none", a.Dc.style.display = "none", a.tb.style.display = "none") : a.Mc && (a.R.style.display = "block", a.me() && js(a), a.tb.style.display = a.me() ? "block" : "none");
    parseFloat(a.R.style.height) < a.minHeight || parseFloat(a.R.style.width) < a.minWidth ? (pD(a, !1), a.tb.style.display = a.me() ? "block" : "none") : (pD(a, a.me()), a.Mc && a.me() && js(a));
    if (parseFloat(a.W.tb.top) + a.Ob > parseFloat(a.R.style.height) || 0 > parseFloat(a.W.tb.left)) {
      a.tb.style.display = "none";
    }
    a.de && parseFloat(a.bc.style.top) <= parseFloat(a.R.style.top) + parseFloat(a.W.Nb.top) + 26 && a.A.x + a.Ga + a.fb >= parseFloat(a.R.style.left) + parseFloat(a.W.Nb.left) - 4 && a.A.y + a.Ia + a.nb >= parseFloat(a.R.style.top) + parseFloat(a.Nb.style.top) && a.A.x + a.Ga <= parseFloat(a.R.style.left) + parseFloat(a.tb.style.left) + parseFloat(a.tb.style.width) + 8 && (sk(a.Nb, !1), sk(a.Kc, !1), sk(a.Gc, !1), a.A.x + a.Ga + a.fb >= parseFloat(a.R.style.left) + parseFloat(a.W.tb.left) && sk(a.tb, 
    !1));
  }
}
function qD(a) {
  if (Vk(P)) {
    var b = hl(P.D, yo(P.D, a.S), new il(P.D.scrollX, P.D.scrollY)), c = !0;
    0 < b.Ua - a.offsetTop && a.height - (b.Ua - a.offsetTop) > P.D.Bb.clientHeight ? (a.W.Nb.top = b.Ua - a.offsetTop + 12 + "px", a.W.Kc.top = b.Ua - a.offsetTop + 8 + "px", a.W.Gc.top = b.Ua - a.offsetTop + 8 + "px", a.W.tb.top = b.Ua - a.offsetTop + 10 + "px", a.W.Oc.top = b.Ua - a.offsetTop + P.D.Bb.clientHeight / 2 - a.Ob / 2 + "px", a.W.Ec.top = b.Ua - a.offsetTop + P.D.Bb.clientHeight / 2 - a.Ob / 2 - 24 + "px", a.W.dc.top = b.Ua - a.offsetTop + 12 + "px", a.W.Dc.top = b.Ua - a.offsetTop + 
    P.D.Bb.clientHeight - 12 - 24 + "px") : 0 < b.Ua - a.offsetTop && 0 < a.height - (b.Ua - a.offsetTop) ? (a.height - (b.Ua - a.offsetTop) < a.minHeight ? (pD(a, !1), a.tb.style.display = a.me() ? "block" : "none", c = !1) : (pD(a, a.me()), a.me() && js(a)), a.W.Nb.top = b.Ua - a.offsetTop + 12 + "px", a.W.Kc.top = b.Ua - a.offsetTop + 8 + "px", a.W.Gc.top = b.Ua - a.offsetTop + 8 + "px", a.W.tb.top = b.Ua - a.offsetTop + 10 + "px", a.W.dc.top = b.Ua - a.offsetTop + 12 + "px", a.W.Oc.top = b.Ua - 
    a.offsetTop + (a.height - (b.Ua - a.offsetTop)) / 2 - a.Ob / 2 + "px", a.W.Ec.top = b.Ua - a.offsetTop + (a.height - (b.Ua - a.offsetTop)) / 2 - a.Ob / 2 + "px") : a.height - (b.Ua - a.offsetTop) > P.D.Bb.clientHeight && 0 < P.D.Bb.clientHeight - (-b.Ua + a.offsetTop) && (P.D.Bb.clientHeight - (-b.Ua + a.offsetTop) < a.minHeight ? (pD(a, !1), a.tb.style.display = a.me() ? "block" : "none", c = !1) : (pD(a, a.me()), a.me() && js(a)), a.W.Dc.top = P.D.Bb.clientHeight - (-b.Ua + a.offsetTop) - 12 - 
    24 + "px", a.W.Oc.top = (P.D.Bb.clientHeight - (-b.Ua + a.offsetTop)) / 2 - a.Ob / 2 + "px", a.W.Ec.top = (P.D.Bb.clientHeight - (-b.Ua + a.offsetTop)) / 2 - a.Ob / 2 + "px");
    0 < b.$a - a.offsetLeft && a.width - (b.$a - a.offsetLeft) > P.D.Bb.clientWidth ? (a.W.Nb.left = b.$a - a.offsetLeft + P.D.Bb.clientWidth - 72 - 48 - 32 - 2 + "px", a.W.Kc.left = b.$a - a.offsetLeft + P.D.Bb.clientWidth - 48 - 16 + 1 + "px", a.W.Gc.left = b.$a - a.offsetLeft + P.D.Bb.clientWidth - 72 - 24 + "px", a.W.tb.left = b.$a - a.offsetLeft + P.D.Bb.clientWidth - 24 - 8 + "px", a.W.Oc.left = b.$a - a.offsetLeft + 12 + "px", a.W.Ec.left = b.$a - a.offsetLeft + P.D.Bb.clientWidth - 12 - 24 + 
    "px", a.W.dc.left = b.$a - a.offsetLeft + P.D.Bb.clientWidth / 2 - a.Ob / 2 + "px", a.W.Dc.left = b.$a - a.offsetLeft + P.D.Bb.clientWidth / 2 - a.Ob / 2 + "px") : 0 < b.$a - a.offsetLeft && 0 < a.width - (b.$a - a.offsetLeft) ? (a.width - (b.$a - a.offsetLeft) < a.minWidth ? (pD(a, !1), a.tb.style.display = a.me() ? "block" : "none", c = !1) : c && (pD(a, a.me()), a.me() && js(a)), a.W.Oc.left = b.$a - a.offsetLeft + 12 + "px", a.W.dc.left = b.$a - a.offsetLeft + (a.width - (b.$a - a.offsetLeft)) / 
    2 - a.Ob / 2 + "px", a.W.Dc.left = b.$a - a.offsetLeft + (a.width - (b.$a - a.offsetLeft)) / 2 - a.Ob / 2 + "px") : a.width - (b.$a - a.offsetLeft) > P.D.Bb.clientWidth && (P.D.Bb.clientWidth - (-b.$a + a.offsetLeft) < a.minWidth ? (pD(a, !1), a.tb.style.display = a.me() ? "block" : "none", c = !1) : c && (pD(a, a.me()), a.me() && js(a)), a.W.Nb.left = P.D.Bb.clientWidth - (-b.$a + a.offsetLeft) - 72 - 48 - 32 - 2 + "px", a.W.Kc.left = P.D.Bb.clientWidth - (-b.$a + a.offsetLeft) - 48 - 16 + 1 + 
    "px", a.W.Gc.left = P.D.Bb.clientWidth - (-b.$a + a.offsetLeft) - 72 - 24 + "px", a.W.tb.left = P.D.Bb.clientWidth - (-b.$a + a.offsetLeft) - 24 - 8 + "px", a.W.Dc.left = (P.D.Bb.clientWidth - (-b.$a + a.offsetLeft)) / 2 - a.Ob / 2 + "px", a.W.dc.left = (P.D.Bb.clientWidth - (-b.$a + a.offsetLeft)) / 2 - a.Ob / 2 + "px", a.W.Ec.left = P.D.Bb.clientWidth - (-b.$a + a.offsetLeft) - 12 - 24 + "px");
    parseFloat(a.W.dc.left) + parseFloat(a.dc.style.width) >= parseFloat(a.W.Nb.left) - 8 && (a.W.dc.left = parseFloat(a.W.Nb.left) - 8 - parseFloat(a.dc.style.width) + "px");
    Math.round(a.height) < a.minHeight || Math.round(a.width) < a.minWidth ? (pD(a, !1), a.tb.style.display = a.me() ? "block" : "none") : c && (pD(a, a.me()), a.me() && js(a));
    a.de && a.Ia <= a.offsetTop + parseFloat(a.W.Nb.top) + 22 + 4 && a.Ga + a.fb >= a.offsetLeft + parseFloat(a.W.Nb.left) - 4 && a.Ia + a.nb >= a.offsetTop + parseFloat(a.W.Nb.top) && a.Ga <= a.offsetLeft + parseFloat(a.W.tb.left) + parseFloat(a.tb.style.width) + 8 && (sk(a.Nb, !1), sk(a.Kc, !1), sk(a.Gc, !1), a.Ga + a.fb >= a.offsetLeft + parseFloat(a.W.tb.left) && sk(a.tb, !1));
    0.25 >= P.D.scale && (pD(a, !1), a.tb.style.display = a.me() ? "block" : "none");
    parseFloat(a.W.tb.top) + a.Ob > a.height || 0 > parseFloat(a.W.tb.left) ? a.tb.style.display = "none" : !a.de || a.Ga + a.fb >= a.offsetLeft + parseFloat(a.W.tb.left) && a.Ia <= a.offsetTop + parseFloat(a.W.Nb.top) + 22 + 4 || (a.tb.style.display = a.me() ? "block" : "none");
  }
}
function pD(a, b) {
  sk(a.Oc, b);
  sk(a.Ec, b);
  sk(a.dc, b);
  sk(a.Dc, b);
  sk(a.tb, b);
  sk(a.Kc, b);
  sk(a.Gc, b);
  sk(a.Nb, b);
}
function gs(a) {
  a.Oc.id = "ScreenShade_leftKnob_" + a.S;
  a.Ec.id = "ScreenShade_rightKnob_" + a.S;
  a.dc.id = "ScreenShade_topKnob_" + a.S;
  a.Dc.id = "ScreenShade_bottomKnob_" + a.S;
  a.tb.id = "ScreenShade_closeBtn_" + a.S;
  a.Kc.id = "ScreenShade_rectangleHoleBtn_" + a.S;
  a.Gc.id = "ScreenShade_ellipseHoleBtn_" + a.S;
  a.Nb.id = "ScreenShade_alphaValueButton_" + a.S;
}
function rD(a) {
  a.de && parseFloat(a.bc.style.top) <= parseFloat(a.R.style.top) + parseFloat(a.W.Nb.top) + 26 && parseFloat(a.bc.style.left) + a.fb >= parseFloat(a.R.style.left) + parseFloat(a.W.Nb.left) - 4 && a.A.y + a.Ia + a.nb >= parseFloat(a.R.style.top) + parseFloat(a.Nb.style.top) && a.A.x + a.Ga <= parseFloat(a.R.style.left) + parseFloat(a.tb.style.left) + parseFloat(a.tb.style.width) + 8 ? (sk(a.Nb, !1), sk(a.Kc, !1), sk(a.Gc, !1), parseFloat(a.bc.style.left) + a.fb >= parseFloat(a.R.style.left) + parseFloat(a.W.tb.left) ? 
  sk(a.tb, !1) : sk(a.tb, a.me())) : a.me() && (sk(a.Nb, !0), sk(a.Kc, !0), sk(a.Gc, !0), sk(a.tb, !0));
}
function sD(a, b) {
  b ? (a.R.addEventListener("pointerdown", a.bv, a.O), a.bc.addEventListener("pointerdown", a.bv, a.O), a.cd.addEventListener("pointerdown", a.bv, a.O), a.R.addEventListener("touchstart", a.CG, a.O), a.R.addEventListener("pointermove", a.cH, a.O), a.R.style.cursor = "grab", a.bc.style.cursor = "grab", a.cd.style.cursor = "pointer") : (a.R.removeEventListener("pointerdown", a.bv, a.O), a.bc.removeEventListener("pointerdown", a.bv, a.O), a.cd.removeEventListener("pointerdown", a.bv, a.O), a.R.removeEventListener("touchstart", 
  a.CG, a.O), a.R.removeEventListener("pointermove", a.cH, a.O), a.R.style.cursor = "default", a.bc.style.cursor = "default", a.cd.style.cursor = "default");
}
function tD(a) {
  let b = S.i;
  if (b && -1 != b.g.indexOf(a)) {
    a && a.xb();
    b.xb();
    let c = {};
    c.arrScreenshadeAttachments = [a];
    b.dispatchEvent(new CustomEvent(Cp.l, {detail:c}));
  }
  a.ce = !0;
}
function uD(a, b, c) {
  a.zu != vD || Math.abs(a.Zj - b) < a.dE && Math.abs(a.$j - c) < a.dE || Math.abs(a.Zj - b) == Math.abs(a.$j - c) || (a.zu = Math.abs(a.Zj - b) > Math.abs(a.$j - c) ? 0 != a.offsetLeft ? wD : 0.0001 < a.A.width - a.width ? xD : 0 < b - a.Zj ? wD : xD : 0 != a.offsetTop ? yD : 0.0001 < a.A.height - a.height ? zD : 0 < c - a.$j ? yD : zD);
  if (a.zu != vD) {
    switch(a.zu) {
      case xD:
        if (!a.kr) {
          return;
        }
        b = a.Zj - b;
        if (0 < b) {
          if (Vk(P) && a.de && -hl(P.D, yo(P.D, a.S), new il(P.D.scrollX, P.D.scrollY)).$a + (a.Ga + a.fb) > P.D.Bb.clientWidth) {
            fD(a, !1);
            return;
          }
          if ((Jk(P) || ml(P)) && a.de && (a.bc.getBoundingClientRect(), c = a.R.getBoundingClientRect(), a.A.x + a.Ga + a.fb >= c.x + c.width)) {
            fD(a, !1);
            return;
          }
          Vk(P) && (c = hl(P.D, yo(P.D, a.S), new il(P.D.scrollX, P.D.scrollY)), a.width - (c.$a - a.offsetLeft) > P.D.Bb.clientWidth && (a.width -= a.width - (c.$a - a.offsetLeft) - P.D.Bb.clientWidth, a.As = a.width));
          if (Jk(P) || ml(P)) {
            if (c = null, Jk(P) && (c = document.getElementById("workspace-container")), ml(P) && P.g && (c = P.g.Gj, nD(P.g) && (c = P.g.Al)), c) {
              var d = c.getBoundingClientRect();
              d.width = c.clientWidth;
              d.height = c.clientHeight;
              ml(P) && P.g && nD(P.g) && (d = oD(P.g, c));
              a.A.x + a.offsetLeft + a.width > d.x + d.width && (a.width = d.x + d.width - a.A.x - a.offsetLeft, a.As = a.width);
            }
          }
        }
        a.width = a.As - b;
        break;
      case wD:
        if (!a.ar) {
          return;
        }
        b -= a.Zj;
        if (0 < b) {
          if (Vk(P) && a.de && 0 < hl(P.D, yo(P.D, a.S), new il(P.D.scrollX, P.D.scrollY)).$a - a.Ga) {
            gD(a, !1);
            return;
          }
          if ((Jk(P) || ml(P)) && a.de && (a.bc.getBoundingClientRect(), c = a.R.getBoundingClientRect(), a.A.x + a.Ga <= c.x)) {
            gD(a, !1);
            return;
          }
          Vk(P) && (c = hl(P.D, yo(P.D, a.S), new il(P.D.scrollX, P.D.scrollY)), 0 < c.$a - a.offsetLeft && 0 < a.width - (c.$a - a.offsetLeft) && (a.offsetLeft = c.$a, a.width -= Math.abs(c.$a - a.offsetLeft), a.Eb = a.offsetLeft, a.As = a.width));
          if (Jk(P) || ml(P)) {
            c = null, Jk(P) && (c = document.getElementById("workspace-container")), ml(P) && P.g && (c = P.g.Gj, nD(P.g) && (c = P.g.Al)), c && (d = c.getBoundingClientRect(), d.width = c.clientWidth, d.height = c.clientHeight, ml(P) && P.g && nD(P.g) && (d = oD(P.g, c)), a.A.x + a.offsetLeft < d.x && (a.offsetLeft = d.x - a.A.x, a.Eb = a.offsetLeft, a.As = a.width));
          }
        }
        a.offsetLeft = a.Eb + b;
        a.width = a.As - b;
        break;
      case yD:
        if (!a.wr) {
          return;
        }
        b = c - a.$j;
        if (0 < b) {
          if (Vk(P) && a.de && 0 < hl(P.D, yo(P.D, a.S), new il(P.D.scrollX, P.D.scrollY)).Ua - a.Ia) {
            iD(a, !1);
            return;
          }
          if ((Jk(P) || ml(P)) && a.de && (a.bc.getBoundingClientRect(), c = a.R.getBoundingClientRect(), a.A.y + a.Ia <= c.y)) {
            iD(a, !1);
            return;
          }
          Vk(P) && (c = hl(P.D, yo(P.D, a.S), new il(P.D.scrollX, P.D.scrollY)), 0 < c.Ua - a.offsetTop && 0 < a.height - (c.Ua - a.offsetTop) && (a.offsetTop = c.Ua, a.height -= Math.abs(c.Ua - a.offsetTop), a.Ib = a.offsetTop, a.zs = a.height));
          if (Jk(P) || ml(P)) {
            c = null, Jk(P) && (c = document.getElementById("workspace-container")), ml(P) && P.g && (c = P.g.Gj, nD(P.g) && (c = P.g.Al)), c && (d = c.getBoundingClientRect(), d.width = c.clientWidth, d.height = c.clientHeight, ml(P) && P.g && nD(P.g) && (d = oD(P.g, c)), a.A.y + a.offsetTop < d.y && (a.offsetTop = d.y - a.A.y, a.Ib = a.offsetTop, a.zs = a.height));
          }
        }
        a.offsetTop = a.Ib + b;
        a.height = a.zs - b;
        break;
      case zD:
        if (!a.Hq) {
          return;
        }
        b = a.$j - c;
        if (0 < b) {
          if (Vk(P) && a.de && -hl(P.D, yo(P.D, a.S), new il(P.D.scrollX, P.D.scrollY)).Ua + (a.Ia + a.nb) > P.D.Bb.clientHeight) {
            hD(a, !1);
            return;
          }
          if ((Jk(P) || ml(P)) && a.de && (a.bc.getBoundingClientRect(), c = a.R.getBoundingClientRect(), a.A.y + a.Ia + a.nb >= c.y + c.height)) {
            hD(a, !1);
            return;
          }
          Vk(P) && (c = hl(P.D, yo(P.D, a.S), new il(P.D.scrollX, P.D.scrollY)), a.height - (c.Ua - a.offsetTop) > P.D.Bb.clientHeight && 0 < P.D.Bb.clientHeight - (-c.Ua + a.offsetTop) && (a.height -= a.height - (c.Ua - a.offsetTop) - P.D.Bb.clientHeight, a.zs = a.height));
          if (Jk(P) || ml(P)) {
            c = null, Jk(P) && (c = document.getElementById("workspace-container")), ml(P) && P.g && (c = P.g.Gj, nD(P.g) && (c = P.g.Al)), c && (d = c.getBoundingClientRect(), d.width = c.clientWidth, d.height = c.clientHeight, ml(P) && P.g && nD(P.g) && (d = oD(P.g, c)), a.A.y + a.offsetTop + a.height > d.y + d.width && (a.height = d.y + d.height - a.A.y - a.offsetTop, a.Ib = a.offsetTop, a.zs = a.height));
          }
        }
        a.height = a.zs - b;
    }
    0 > a.offsetLeft && (a.offsetLeft = 0);
    0 > a.offsetTop && (a.offsetTop = 0);
    a.offsetLeft + a.width > a.A.width && (a.width = a.A.width - a.offsetLeft);
    a.offsetTop + a.height > a.A.height && (a.height = a.A.height - a.offsetTop);
    a.width < a.minWidth && (0 < a.offsetLeft ? a.offsetLeft -= a.minWidth - a.width : a.offsetLeft = 0, a.width = a.minWidth);
    a.height < a.minHeight && (0 < a.offsetTop ? a.offsetTop -= a.minHeight - a.height : a.offsetTop = 0, a.height = a.minHeight);
    a.de && (a.offsetLeft > a.Ga - 8 && (a.offsetLeft = a.Ga - 8, a.width = a.A.width - a.offsetLeft), a.offsetTop > a.Ia - 8 && (a.offsetTop = a.Ia - 8, a.height = a.A.height - a.offsetTop), a.offsetLeft + a.width < a.Ga + a.fb + 8 && (a.width = a.Ga + a.fb + 8 - a.offsetLeft), a.offsetTop + a.height < a.Ia + a.nb + 8 && (a.height = a.Ia + a.nb + 8 - a.offsetTop), Kk(P) && rD(a));
  }
}
class AD extends Wm {
  constructor(a, b, c) {
    super();
    this.width = window.visualViewport.width;
    this.height = window.innerHeight;
    this.minHeight = this.minWidth = 200;
    this.Mc = !1;
    this.R = null;
    this.parent = a;
    this.tb = this.Dc = this.dc = this.Ec = this.Oc = null;
    this.Ob = 24;
    this.A = {width:window.visualViewport.width, height:window.innerHeight, x:window.visualViewport.offsetLeft, y:window.visualViewport.offsetTop};
    this.bc = null;
    this.Ia = this.Ga = 0;
    this.fb = 200;
    this.Yu = this.nb = 100;
    this.Xu = 50;
    this.zn = this.cd = null;
    this.de = !1;
    this.Gc = this.Kc = this.lm = null;
    this.kp = 1;
    this.Nb = null;
    this.Pw = !0;
    this.S = b;
    this.W = {Nb:{top:"0px", left:"0px"}, Kc:{top:"0px", left:"0px"}, Gc:{top:"0px", left:"0px"}, tb:{top:"0px", left:"0px"}, Oc:{top:"0px", left:"0px"}, Ec:{top:"0px", left:"0px"}, dc:{top:"0px", left:"0px"}, Dc:{top:"0px", left:"0px"},};
    this.bn();
    this.ce = !1;
    this.zs = this.As = this.Ib = this.Eb = this.$j = this.Zj = 0;
    this.zu = vD;
    this.dE = 8;
    this.zz = this.Az = 1;
    this.lH = this.oH = this.nH = this.mH = 0;
    this.ii = null;
    this.Hq = this.wr = this.kr = this.ar = !1;
    this.O = {capture:!0, passive:!1};
    this.bv = this.bM.bind(this);
    this.cH = this.dM.bind(this);
    this.$s = this.Dj.bind(this);
    this.bH = this.cM.bind(this);
    this.KC = this.dH.bind(this);
    this.CG = this.GL.bind(this);
    this.me = c;
  }
  Le(a, b) {
    a && a.setAttribute("data-id", b);
  }
  bn() {
    this.R = document.createElement("div");
    this.R.className = "extension_reset_css annotate-plugin-clickable-element annotate-no-print ";
    this.R.classList.add("AnnotateScreenshadeElement");
    this.Le(this.R, "Screenshade_element" + this.ta);
    this.R.style.width = this.width + "px";
    this.R.style.height = this.height + "px";
    this.R.style.top = this.offsetTop + "px";
    this.R.style.left = this.offsetLeft + "px";
    this.parent.appendChild(this.R);
    this.bc = document.createElement("div");
    this.bc.className = "extension_reset_css annotate-plugin-clickable-element";
    this.Le(this.R, "Screenshade_holeDiv" + this.ta);
    this.bc.style.width = this.fb + "px";
    this.bc.style.height = this.nb + "px";
    this.bc.style.top = this.Ia + "px";
    this.bc.style.left = this.Ga + "px";
    this.bc.style.backgroundColor = "transparent";
    this.bc.style.position = "fixed";
    this.bc.style.cursor = "grab";
    this.bc.style.display = "none";
    this.bc.style.pointerEvents = "auto";
    this.parent.appendChild(this.bc);
    this.cd = document.createElement("div");
    this.cd.className = "extension_reset_css annotate-plugin-clickable-element";
    this.Le(this.R, "Screenshade_resizeHoleBtn" + this.ta);
    this.cd.style.width = "24px";
    this.cd.style.height = "24px";
    this.cd.style.top = this.Ia + this.nb - 12 + "px";
    this.cd.style.left = this.Ga + this.fb - 12 + "px";
    this.cd.style.backgroundColor = "transparent";
    this.cd.style.position = "fixed";
    this.cd.style.cursor = "pointer";
    this.cd.style.boxSizing = "border-box";
    this.cd.style.display = "none";
    this.cd.style.pointerEvents = "auto";
    this.parent.appendChild(this.cd);
    this.zn = document.createElement("div");
    this.zn.className = "extension_reset_css";
    this.Le(this.R, "Screenshade_resizeHoleBtnRed" + this.ta);
    this.zn.style.width = "12px";
    this.zn.style.height = "12px";
    this.zn.style.top = "6px";
    this.zn.style.left = "6px";
    this.zn.style.backgroundColor = "red";
    this.zn.style.position = "fixed";
    this.zn.style.cursor = "inherit";
    this.cd.appendChild(this.zn);
    this.Oc = document.createElement("div");
    this.Oc.id = "ScreenShade_leftKnob_" + this.S;
    this.Oc.className = "ScreenShadeKnob";
    this.Oc.style.width = "24px";
    this.Oc.style.height = "24px";
    this.Oc.style.borderRadius = "50%";
    this.Oc.style.position = "fixed";
    this.W.Oc.top = this.height / 2 - this.Ob / 2 + "px";
    this.W.Oc.left = "12px";
    this.Oc.style.backgroundColor = "#616161";
    this.Oc.style.boxShadow = "0 1px 2px 0 rgb(0 0 0 / 14%)";
    this.R.appendChild(this.Oc);
    this.Ec = document.createElement("div");
    this.Ec.id = "ScreenShade_rightKnob_" + this.S;
    this.Ec.className = "ScreenShadeKnob";
    this.Ec.style.width = "24px";
    this.Ec.style.height = "24px";
    this.Ec.style.borderRadius = "50%";
    this.Ec.style.position = "fixed";
    this.W.Ec.top = this.height / 2 - this.Ob / 2 + "px";
    this.W.Ec.left = this.width - this.Ob - 12 + "px";
    this.Ec.style.backgroundColor = "#616161";
    this.Ec.style.boxShadow = "0 1px 2px 0 rgb(0 0 0 / 14%)";
    this.R.appendChild(this.Ec);
    this.dc = document.createElement("div");
    this.dc.id = "ScreenShade_topKnob_" + this.S;
    this.dc.className = "ScreenShadeKnob";
    this.dc.style.width = "24px";
    this.dc.style.height = "24px";
    this.dc.style.borderRadius = "50%";
    this.dc.style.position = "fixed";
    this.W.dc.top = "12px";
    this.W.dc.left = this.width / 2 - this.Ob / 2 + "px";
    this.dc.style.backgroundColor = "#616161";
    this.dc.style.boxShadow = "0 1px 2px 0 rgb(0 0 0 / 14%)";
    this.R.appendChild(this.dc);
    this.Dc = document.createElement("div");
    this.Dc.id = "ScreenShade_bottomKnob_" + this.S;
    this.Dc.className = "ScreenShadeKnob";
    this.Dc.style.width = "24px";
    this.Dc.style.height = "24px";
    this.Dc.style.borderRadius = "50%";
    this.Dc.style.position = "fixed";
    this.W.Dc.top = this.height - this.Ob - 12 + "px";
    this.W.Dc.left = this.width / 2 - this.Ob / 2 + "px";
    this.Dc.style.backgroundColor = "#616161";
    this.Dc.style.boxShadow = "0 1px 2px 0 rgb(0 0 0 / 14%)";
    this.R.appendChild(this.Dc);
    this.tb = document.createElement("div");
    this.tb.id = "ScreenShade_closeBtn_" + this.S;
    this.tb.className = "extension_icon extension_icon-close";
    this.tb.style.width = "24px";
    this.tb.style.height = "24px";
    this.tb.style.borderRadius = "50%";
    this.tb.style.position = "fixed";
    this.W.tb.top = "10px";
    this.W.tb.left = this.width - this.Ob - 8 + "px";
    this.tb.style.backgroundColor = "transparent";
    this.tb.style.color = "white";
    this.tb.style.cursor = "pointer";
    this.R.appendChild(this.tb);
    this.Kc = document.createElement("div");
    this.Kc.id = "ScreenShade_rectangleHoleBtn_" + this.S;
    this.Kc.className = "extension_icon extension_icon-rectangle";
    this.Kc.style.width = "28px";
    this.Kc.style.height = "28px";
    this.Kc.style.borderRadius = "50%";
    this.Kc.style.position = "fixed";
    this.W.Kc.top = "8px";
    this.W.Kc.left = this.width - 2 * this.Ob - 16 + "px";
    this.Kc.style.backgroundColor = "transparent";
    this.Kc.style.cursor = "pointer";
    this.Kc.style.color = "white";
    this.R.appendChild(this.Kc);
    this.Gc = document.createElement("div");
    this.Gc.id = "ScreenShade_ellipseHoleBtn_" + this.S;
    this.Gc.className = "extension_icon extension_icon-ellipse";
    this.Gc.style.width = "28px";
    this.Gc.style.height = "28px";
    this.Gc.style.borderRadius = "50%";
    this.Gc.style.position = "fixed";
    this.W.Gc.top = "8px";
    this.W.Gc.left = this.width - 3 * this.Ob - 24 + "px";
    this.Gc.style.backgroundColor = "transparent";
    this.Gc.style.cursor = "pointer";
    this.Gc.style.color = "white";
    this.R.appendChild(this.Gc);
    this.Nb = document.createElement("div");
    this.Nb.id = "ScreenShade_alphaValueButton_" + this.S;
    this.Nb.style.width = "48px";
    this.Nb.style.height = "20px";
    this.Nb.style.position = "fixed";
    this.W.Nb.top = "12px";
    this.W.Nb.left = this.width - 3 * this.Ob - 48 - 32 - 2 + "px";
    this.Nb.style.backgroundColor = "transparent";
    this.Nb.style.border = "1px solid white";
    this.Nb.style.borderRadius = "2px";
    this.Nb.style.cursor = "pointer";
    this.Nb.style.textAlign = "center";
    this.Nb.style.lineHeight = "21px";
    this.Nb.style.boxSizing = "content-box";
    this.Nb.style.color = "#FFFFFF";
    this.Nb.style.fontSize = "14px";
    this.Nb.innerHTML = "Dark";
    this.R.appendChild(this.Nb);
  }
  ej(a) {
    this.R.style.zIndex = a;
    this.bc.style.zIndex = a;
    this.cd.style.zIndex = a;
  }
  la() {
    return this.R;
  }
  Ql(a) {
    a ? (this.R.style.display = "block", this.Mc = !0) : (this.R.style.display = "none", this.Mc = !1);
  }
  gb() {
    this.R.remove();
    this.R = null;
    this.bc && (this.bc.remove(), this.bc = null);
    this.cd && (this.cd.remove(), this.cd = null);
  }
  Fa(a) {
    super.Fa(a);
    "top" in a && (this.offsetTop = a.top);
    "left" in a && (this.offsetLeft = a.left);
    "height" in a && (this.height = a.height);
    "width" in a && (this.width = a.width);
    "holeShape" in a && (this.lm = a.holeShape);
    "holeLeft" in a && (this.Ga = a.holeLeft);
    "pageInfo" in a && (this.A = JSON.parse(JSON.stringify(a.pageInfo)));
    "holeTop" in a && (this.Ia = parseInt(a.holeTop));
    "holeHeight" in a && (this.nb = a.holeHeight);
    "holeWidth" in a && (this.fb = a.holeWidth);
    "initialHole" in a && (this.Pw = a.initialHole);
    "alphaValueSelected" in a && (this.kp = a.alphaValueSelected);
    "bShowHole" in a && (this.de = a.bShowHole);
    "pageIndex" in a && (this.S = a.pageIndex);
    a.editUUID && nh(this, a.editUUID);
    "bShow" in a && (this.Mc = a.bShow);
    !this.R || si() && !Vk(P) || (this.Mc ? ks(this, this.de) : this.hx(), this.Ql(this.Mc));
  }
  Na() {
    var a = super.Na();
    this.Fb(a);
    return a;
  }
  Fb(a) {
    a.top = this.offsetTop;
    a.left = this.offsetLeft;
    a.height = this.height;
    a.width = this.width;
    a.pageInfo = this.A ? JSON.parse(JSON.stringify(this.A)) : this.A;
    a.holeShape = this.lm;
    a.holeLeft = this.Ga;
    a.holeTop = this.Ia;
    a.holeHeight = this.nb;
    a.holeWidth = this.fb;
    a.initialHole = this.Pw;
    a.alphaValueSelected = this.kp;
    a.bShowHole = this.de;
    a.pageIndex = this.S;
    a.editUUID = this.qe;
    a.bShow = this.Mc;
    a.type = this.cb();
  }
  cb() {
    return "screenShade";
  }
  Ul(a) {
    this.Fb(a);
  }
  Ad(a) {
    super.Ad(a);
    this.Fa(a);
  }
  Kd(a) {
    this.R && !a.contains(this.R) && (a.appendChild(this.R), a.appendChild(this.bc), a.appendChild(this.cd), this.parent = a);
  }
  hx() {
    this.Mc = this.de = !1;
    this.Pw = !0;
    this.Ql(!1);
    ks(this, !1);
  }
  GL(a) {
    var b = !0;
    if (Vk(P)) {
      let c = P.D.Ea.offsetLeft, d = P.D.Ea.offsetTop, e = yo(P.D, this.S);
      -1 != e && (b = hl(P.D, e, new il(P.D.scrollX, P.D.scrollY)), b = a.touches[0].clientX >= c - b.$a + this.offsetLeft + parseFloat(this.Oc.style.left) + 36 && a.touches[0].clientX <= c - b.$a + this.offsetLeft + parseFloat(this.Ec.style.left) - 12 && a.touches[0].clientY >= d - b.Ua + this.offsetTop + parseFloat(this.dc.style.top) + 36 && a.touches[0].clientY <= d - b.Ua + this.offsetTop + parseFloat(this.Dc.style.top) - 12 ? !1 : !0);
    }
    b && a.preventDefault();
  }
  tn(a) {
    a.stopPropagation();
    a.preventDefault();
    this.hx();
    tD(this);
  }
  dM(a) {
    if (Vk(P)) {
      var b = P.D.Ea.offsetLeft;
      let c = P.D.Ea.offsetTop, d = hl(P.D, yo(P.D, this.S), new il(P.D.scrollX, P.D.scrollY));
      b = a.clientX >= b - d.$a + this.offsetLeft + parseFloat(this.Oc.style.left) + 36 && a.clientX <= b - d.$a + this.offsetLeft + parseFloat(this.Ec.style.left) - 12 && a.clientY >= c - d.Ua + this.offsetTop + parseFloat(this.dc.style.top) + 36 && a.clientY <= c - d.Ua + this.offsetTop + parseFloat(this.Dc.style.top) - 12 ? !1 : !0;
    } else {
      b = Jk(P) || ml(P) ? a.clientX >= parseFloat(this.R.style.left) + parseFloat(this.Oc.style.left) + 36 && a.clientX <= parseFloat(this.R.style.left) + parseFloat(this.Ec.style.left) - 12 && a.clientY >= parseFloat(this.R.style.top) + parseFloat(this.dc.style.top) + 36 && a.clientY <= parseFloat(this.R.style.top) + parseFloat(this.Dc.style.top) - 12 ? !1 : !0 : a.clientX >= this.A.x + this.offsetLeft + 48 && a.clientX <= this.A.x + this.offsetLeft + this.width - 48 && a.clientY >= this.A.y + 
      this.offsetTop + 48 && a.clientY <= this.A.y + this.offsetTop + this.height - 48 ? !1 : !0;
    }
    b ? "grabbing" != this.R.style.cursor && (this.R.style.cursor = "grab") : this.R.style.cursor = "default";
    a.stopPropagation();
    a.preventDefault();
  }
  bM(a) {
    Ro && Ro.ez();
    a.target == this.bc ? this.ii = this.bc : a.target == this.cd || a.target == this.zn ? this.ii = this.cd : this.ii = a.target == this.Gc || a.target == this.Kc ? a.target == this.Gc ? this.Gc : this.Kc : a.target == this.Nb ? this.Nb : a.target == this.tb ? this.tb : this.R;
    this.Zj = a.clientX;
    this.$j = a.clientY;
    this.Eb = this.offsetLeft;
    this.Ib = this.offsetTop;
    this.As = this.width;
    this.zs = this.height;
    this.zu = vD;
    this.mH = this.Ga;
    this.nH = this.Ia;
    this.oH = this.fb;
    this.lH = this.nb;
    if (Vk(P)) {
      let b = P.D.Ea.offsetLeft, c = P.D.Ea.offsetTop, d = hl(P.D, yo(P.D, this.S), new il(P.D.scrollX, P.D.scrollY));
      this.ar = this.Zj >= b - d.$a + this.offsetLeft + parseFloat(this.Oc.style.left) + 36 ? !1 : !0;
      this.kr = this.Zj <= b - d.$a + this.offsetLeft + parseFloat(this.Ec.style.left) - 12 ? !1 : !0;
      this.wr = this.$j >= c - d.Ua + this.offsetTop + parseFloat(this.dc.style.top) + 36 ? !1 : !0;
      this.Hq = this.$j <= c - d.Ua + this.offsetTop + parseFloat(this.Dc.style.top) - 12 ? !1 : !0;
    } else {
      Jk(P) || ml(P) ? (this.ar = this.Zj >= parseFloat(this.R.style.left) + parseFloat(this.Oc.style.left) + 36 ? !1 : !0, this.kr = this.Zj <= parseFloat(this.R.style.left) + parseFloat(this.Ec.style.left) - 12 ? !1 : !0, this.wr = this.$j >= parseFloat(this.R.style.top) + parseFloat(this.dc.style.top) + 36 ? !1 : !0, this.Hq = this.$j <= parseFloat(this.R.style.top) + parseFloat(this.Dc.style.top) - 12 ? !1 : !0) : (this.ar = this.Zj + window.visualViewport.offsetLeft >= this.A.x + this.offsetLeft + 
      48 ? !1 : !0, this.kr = this.Zj + window.visualViewport.offsetLeft <= this.A.x + this.offsetLeft + this.width - 48 ? !1 : !0, this.wr = this.$j + window.visualViewport.offsetTop >= this.A.y + this.offsetTop + 48 ? !1 : !0, this.Hq = this.$j + window.visualViewport.offsetTop <= this.A.y + this.offsetTop + this.height - 48 ? !1 : !0);
    }
    if (this.wr || this.Hq || this.ar || this.kr || this.ii == this.bc || this.ii == this.cd || this.ii == this.Gc || this.ii == this.Kc || this.ii == this.Nb || this.ii == this.tb) {
      window.addEventListener("pointermove", this.bH, this.O), window.addEventListener("touchmove", this.$s, this.O), window.addEventListener("pointerup", this.KC, this.O), window.addEventListener("pointercancel", this.KC, this.O);
    }
    if (this.wr || this.Hq || this.ar || this.kr) {
      this.R.style.cursor = "grabbing";
    }
    this.bc.style.cursor = "grabbing";
    this.cd.style.cursor = "grabbing";
    if (this.wr || this.Hq || this.ar || this.kr || this.ii == this.bc || this.ii == this.cd || this.ii == this.Gc || this.ii == this.Kc || this.ii == this.Nb || this.ii == this.tb) {
      a.stopPropagation(), a.preventDefault();
    }
  }
  cM(a) {
    Ro && Ro.ez();
    "mouse" != a.pointerType && "pen" != a.pointerType || a.buttons & 1 ? (a.preventDefault(), this.ii == this.bc ? (this.Ga = this.mH + a.clientX - this.Zj, this.Ia = this.nH + a.clientY - this.$j, this.Ga + this.fb > this.offsetLeft + this.width - 8 && (this.Ga = this.offsetLeft + this.width - 8 - this.fb), this.Ia + this.nb > this.offsetTop + this.height - 8 && (this.Ia = this.offsetTop + this.height - 8 - this.nb), this.Ia < this.offsetTop + 8 && (this.Ia = this.offsetTop + 8), this.Ga < this.offsetLeft + 
    8 && (this.Ga = this.offsetLeft + 8), hs(this), (Jk(P) || ml(P)) && mD(this), Vk(P) && qD(this), js(this), is(this), Kk(P) && rD(this)) : this.ii == this.cd ? (this.fb = this.oH + a.clientX - this.Zj, this.nb = this.lH + a.clientY - this.$j, this.fb < this.Yu && (this.fb = this.Yu), this.nb < this.Xu && (this.nb = this.Xu), this.Ga + this.fb > this.offsetLeft + this.width - 8 && (this.fb = this.offsetLeft + this.width - 8 - this.Ga), this.Ia + this.nb > this.offsetTop + this.height - 8 && (this.nb = 
    this.offsetTop + this.height - 8 - this.Ia), hs(this), (Jk(P) || ml(P)) && mD(this), Vk(P) && qD(this), js(this), is(this), Kk(P) && rD(this)) : Math.round(this.height) < this.minHeight || Math.round(this.width) < this.minWidth || Vk(P) && 0.25 >= P.D.scale || (uD(this, a.clientX, a.clientY), hs(this), js(this), (Jk(P) || ml(P)) && mD(this), Vk(P) && qD(this), is(this))) : this.dH(a);
  }
  Dj(a) {
    a.preventDefault();
  }
  dH(a) {
    if (a.target == this.ii && this.zu == vD) {
      if (a.target == this.Gc || a.target == this.Kc) {
        a.stopPropagation();
        a.preventDefault();
        this.de = !(a.target == this.Kc && this.lm == dD && this.de || a.target == this.Gc && this.lm == eD && this.de);
        a.target == this.Kc ? this.lm = dD : a.target == this.Gc && (this.lm = eD);
        ks(this, this.de);
        if (this.de && si()) {
          a: {
            if (si()) {
              if (!P.D) {
                break a;
              }
              a = hl(P.D, yo(P.D, this.S), new il(P.D.scrollX, P.D.scrollY));
              if (0 < a.Ua - (this.Ia + this.nb / 2) || -a.Ua + (this.Ia + this.nb / 2) > P.D.Bb.clientHeight || 0 < a.$a - (this.Ga + this.fb / 2) || -a.$a + (this.Ga + this.fb / 2) > P.D.Bb.clientWidth) {
                if (0 < a.Ua - this.offsetTop && this.height - (a.Ua - this.offsetTop) > P.D.Bb.clientHeight) {
                  this.Ia = this.offsetTop + (a.Ua - this.offsetTop) + P.D.Bb.clientHeight / 2 - this.nb / 2;
                } else if (0 < a.Ua - this.offsetTop && 0 < this.height - (a.Ua - this.offsetTop)) {
                  this.Ia = this.offsetTop + (a.Ua - this.offsetTop) + (this.height - (a.Ua - this.offsetTop)) / 2 - this.nb / 2;
                } else if (this.height - (a.Ua - this.offsetTop) > P.D.Bb.clientHeight) {
                  this.Ia = this.offsetTop + (P.D.Bb.clientHeight - (-a.Ua + this.offsetTop)) / 2 - this.nb / 2;
                } else {
                  if (0 < a.$a - this.offsetLeft && this.width - (a.$a - this.offsetLeft) > P.D.Bb.clientWidth || 0 < a.$a - this.offsetLeft || this.width - (a.$a - this.offsetLeft) > P.D.Bb.clientWidth) {
                    this.Ia = this.height / 2 - this.nb / 2;
                  }
                }
                if (0 < a.$a - this.offsetLeft && this.width - (a.$a - this.offsetLeft) > P.D.Bb.clientWidth) {
                  this.Ga = this.offsetLeft + (a.$a - this.offsetLeft) + P.D.Bb.clientWidth / 2 - this.fb / 2;
                } else if (0 < a.$a - this.offsetLeft) {
                  this.Ga = this.offsetLeft + (a.$a - this.offsetLeft) + (this.width - (a.$a - this.offsetLeft)) / 2 - this.fb / 2;
                } else if (this.width - (a.$a - this.offsetLeft) > P.D.Bb.clientWidth) {
                  this.Ga = this.offsetLeft + (P.D.Bb.clientWidth - (-a.$a + this.offsetLeft)) / 2 - this.fb / 2;
                } else {
                  if (0 < a.Ua - this.offsetTop && this.height - (a.Ua - this.offsetTop) > P.D.Bb.clientHeight || 0 < a.Ua - this.offsetTop && 0 < this.height - (a.Ua - this.offsetTop) || this.height - (a.Ua - this.offsetTop) > P.D.Bb.clientHeight) {
                    this.Ga = this.width / 2 - this.fb / 2;
                  }
                }
              }
            }
            this.Ga + this.fb > this.offsetLeft + this.width && (this.Ga = this.offsetLeft + this.width - this.fb - 8);
            this.Ia + this.nb > this.offsetTop + this.height && (this.Ia = this.offsetTop + this.height - this.nb - 8);
            this.Ia < this.offsetTop && (this.Ia = this.offsetTop + 8);
            this.Ga < this.offsetLeft && (this.Ga = this.offsetLeft + 8);
            this.bc.style.display = "block";
            this.me() && (this.cd.style.display = "block");
            this.lm == dD ? (this.Kc.style.backgroundColor = "#c0c0c0", this.Gc.style.backgroundColor = "transparent") : (this.Gc.style.backgroundColor = "#c0c0c0", this.Kc.style.backgroundColor = "transparent");
            hs(this);
            Vk(P) && qD(this);
            is(this);
            this.me() && js(this);
          }
        }
        (Jk(P) || ml(P)) && mD(this);
        if (this.de && (Jk(P) || ml(P))) {
          let b = null;
          Jk(P) && (b = document.getElementById("workspace-container"));
          ml(P) && P.g && (b = P.g.Gj, nD(P.g) && (b = P.g.Al));
          b && (a = b.getBoundingClientRect(), a.width = b.clientWidth, a.height = b.clientHeight, ml(P) && P.g && nD(P.g) && (a = oD(P.g, b)), this.A.y + (this.Ia + this.nb / 2) < a.y || this.A.y + (this.Ia + this.nb / 2) > a.y + a.height || this.A.x + (this.Ga + this.fb / 2) < a.x || this.A.x + (this.Ga + this.fb / 2) > a.x + a.width) && (this.A.y + this.offsetTop < a.y && this.A.y + this.offsetTop + this.height > a.y + a.height ? this.Ia = -this.A.y + a.y + a.height / 2 - this.nb / 2 : this.A.y + 
          this.offsetTop < a.y ? this.Ia = -this.A.y + a.y + (this.A.y + this.offsetTop + this.height - a.y) / 2 - this.nb / 2 : this.A.y + this.offsetTop + this.height > a.y + a.height && (this.Ia = this.offsetTop + (a.y + a.height - this.A.y - this.offsetTop) / 2 - this.nb / 2), this.A.x + this.offsetLeft < a.x && this.A.x + this.offsetLeft + this.width > a.x + a.width ? this.Ga = -this.A.x + a.x + a.width / 2 - this.fb / 2 : this.A.x + this.offsetLeft < a.x ? this.Ga = -this.A.x + a.x + (this.A.x + 
          this.offsetLeft + this.width - a.x) / 2 - this.fb / 2 : this.A.x + this.offsetLeft + this.width > a.x + a.width && (this.Ga = this.offsetLeft + (a.x + a.width - this.A.x - this.offsetLeft) / 2 - this.fb / 2), this.Ga + this.fb > this.offsetLeft + this.width && (this.Ga = this.offsetLeft + this.width - this.fb - 8), this.Ia + this.nb > this.offsetTop + this.height && (this.Ia = this.offsetTop + this.height - this.nb - 8), this.Ia < this.offsetTop && (this.Ia = this.offsetTop + 8), this.Ga < 
          this.offsetLeft && (this.Ga = this.offsetLeft + 8), this.bc.style.left = this.A.x + this.Ga + "px", this.bc.style.top = this.A.y + this.Ia + "px", this.bc.style.width = this.fb + "px", this.bc.style.height = this.nb + "px", this.cd.style.top = this.A.y + this.Ia + this.nb - 12 + "px", this.cd.style.left = this.A.x + this.Ga + this.fb - 12 + "px", mD(this));
        }
        is(this);
        tD(this);
      } else {
        a.target == this.Nb ? (this.kp = 1 == this.kp ? 0.85 : 1, cD(this), tD(this), a.stopPropagation()) : a.target == this.tb && this.tn(a);
      }
    }
    this.Az = this.width / this.A.width;
    this.zz = this.height / this.A.height;
    if (this.wr || this.Hq || this.ar || this.kr) {
      this.R.style.cursor = "grab";
    }
    this.bc.style.cursor = "grab";
    this.cd.style.cursor = "pointer";
    window.removeEventListener("pointermove", this.bH, this.O);
    window.removeEventListener("touchmove", this.$s, this.O);
    window.removeEventListener("pointerup", this.KC, this.O);
    tD(this);
  }
}
var vD = 0, wD = 1, xD = 2, yD = 3, zD = 4, dD = 0, eD = 1;
function Zo(a) {
  var b = Yo;
  if (a) {
    let c = S.i;
    c && gp(c);
    for (let d of a) {
      a = fs(b);
      a.Fa(d);
      gs(a);
      a.Az = a.width / a.A.width;
      a.zz = a.height / a.A.height;
      if (!si() || Vk(P)) {
        hs(a), is(a), a.Mc && a.me() && js(a), ks(a, a.de);
      }
      a.ce = !1;
      ls(a);
    }
  }
}
function $p() {
  let a = [], b = hv();
  for (let c = 0; c < b.length; c++) {
    a.push(b[c].Na());
  }
  0 == a.length && (a = null);
  return a;
}
function fs(a) {
  var b = 0;
  si() && a.D && a.D.Ea && (a.parentElement = a.D.Bb, b = ll(a.D, a.D.uq));
  b = new AD(a.parentElement, b, a.g);
  b.ej(a.i);
  b.Ql(!1);
  pD(b, a.g());
  sD(b, a.g());
  si() && (b.R.style.position = "absolute", b.bc.style.position = "absolute", b.cd.style.position = "absolute");
  return b;
}
function BD(a) {
  if (!si()) {
    return 0 < hv().length ? hv()[0] : null;
  }
  for (let b of hv()) {
    if (a.D && yo(a.D, b.S) == a.D.uq) {
      return b;
    }
  }
  return null;
}
function CD(a) {
  a.D = P.D;
  let b = hv();
  for (let c of b) {
    DD(a, c);
  }
}
function ED() {
  var a = Yo;
  hv().forEach(b => {
    hs(b);
    is(b);
  });
  si() ? CD(a) : Yo.xm(Object.assign({}, L.yp()));
}
function DD(a, b) {
  if (b) {
    var c = yo(a.D, b.S);
    if (-1 != c) {
      var d = hl(a.D, c, new il(a.D.scrollX, a.D.scrollY));
      c = {x:-d.$a + a.D.scrollX, y:-d.Ua + a.D.scrollY, width:jl(a.D, c), height:kl(a.D, c), scale:a.D.scale};
      d = b.A.width / c.width;
      var e = b.A.height / c.height;
      b.A.x = c.x;
      b.A.y = c.y;
      b.A.width = c.width;
      b.A.height = c.height;
      b.offsetLeft = b.offsetLeft / d;
      b.offsetTop = b.offsetTop / e;
      b.height = b.height / e;
      b.width = b.width / d;
      b.Ga = b.Ga / d;
      b.Ia = b.Ia / e;
      1 != d && 1 != e && (b.fb = b.fb / d, b.nb = b.nb / e);
      b.fb < b.Yu && (b.fb = b.Yu);
      b.nb < b.Xu && (b.nb = b.Xu);
      b.Ga + b.fb > b.offsetLeft + b.width - 8 && (b.Ga = b.offsetLeft + b.width - b.fb - 8);
      b.Ia + b.nb > b.offsetTop + b.height - 8 && (b.Ia = b.offsetTop + b.height - b.nb - 8);
      b.Ia < b.offsetTop + 8 && (b.Ia = b.offsetTop + 8);
      b.Ga < b.offsetLeft + 8 && (b.Ga = b.offsetLeft + 8);
      a.D && a.D.Ea && b.Kd(a.D.Bb);
      hs(b);
      Vk(P) && qD(b);
      b.Ql(b.Mc);
      b.Mc && jD(b);
      0.25 >= a.D.scale && (pD(b, !1), b.tb.style.display = a.g() ? "block" : "none");
    }
  }
}
function FD(a) {
  var b = hv();
  for (var c = 0; c < b.length; c++) {
    if (b[c].S == a) {
      if (a = S.i) {
        b = b[c];
        c = {arrScreenshadeAttachments:[]};
        let d = a.g.indexOf(b);
        0 <= d && (ar(a, d), c.arrScreenshadeAttachments.push(b.ta));
        a.xb();
        a.dispatchEvent(new CustomEvent(Cp.g, {detail:c}));
      }
      break;
    }
  }
}
function GD(a) {
  var b = Yo;
  b.i = a;
  for (let c of hv()) {
    c.ej(b.i);
  }
}
function HD() {
  let a = BD(Yo);
  !a || Jk(P) || ml(P) || si() || (a.A.x = window.visualViewport.offsetLeft, a.A.y = window.visualViewport.offsetTop, a.A.width = window.visualViewport.width, a.A.height = window.innerHeight, a.Mc && (a.width = a.Az * a.A.width, a.height = a.zz * a.A.height, 0 != a.offsetLeft && (a.offsetLeft = a.A.width - a.width), 0 != a.offsetTop && (a.offsetTop = a.A.height - a.height), a.Ga + a.fb > a.offsetLeft + a.width - 8 && (a.Ga = a.offsetLeft + a.width - a.fb - 8), a.Ia + a.nb > a.offsetTop + a.height - 
  8 && (a.Ia = a.offsetTop + a.height - a.nb - 8), a.Ia < a.offsetTop + 8 && (a.Ia = a.offsetTop + 8), a.Ga < a.offsetLeft + 8 && (a.Ga = a.offsetLeft + 8), hs(a), is(a), a.me() && js(a)));
}
function ID() {
  let a = BD(Yo);
  return a ? a.Mc : !1;
}
class JD {
  constructor() {
    this.parentElement = document.body;
    this.i = "2147483642";
    this.A = {x:0, y:0, width:0, height:0};
    this.ce = !1;
    this.D = null;
    this.O = {capture:!0, passive:!1};
    this.o = this.m.bind(this);
    this.j = this.l.bind(this);
    P.addEventListener(Xk.i, this.o);
    P.addEventListener(Xk.g, this.j);
  }
  m() {
    for (let a of hv()) {
      a.de && (ks(a, a.de), qD(a));
    }
    CD(this);
  }
  l(a) {
    a && a.detail && 1 == a.detail.Es && si() && CD(this);
  }
  xm(a) {
    if (a.height && a.width && !(0 >= a.height && 0 >= a.width) && (this.A.x = a.x, this.A.y = a.y, this.A.width = a.width, this.A.height = a.height, Jk(P) && !Fh(P) && (this.A.x += 1, this.A.y += 1), a = BD(this))) {
      var b = this.A, c = a.A.height;
      let d;
      d = a.A.width / b.width;
      c /= b.height;
      a.width = a.width / d;
      a.height = a.height / c;
      a.offsetLeft = a.offsetLeft / d;
      a.offsetTop = a.offsetTop / c;
      a.A.x = b.x;
      a.A.y = b.y;
      a.A.width = b.width;
      a.A.height = b.height;
      a.fb = a.fb / d;
      a.nb = a.nb / c;
      a.Ga = a.Ga / d;
      a.Ia /= c;
      a.fb < a.Yu && (a.fb = a.Yu);
      a.nb < a.Xu && (a.nb = a.Xu);
      a.Ga + a.fb > a.offsetLeft + a.width - 8 && (a.Ga = a.offsetLeft + a.width - a.fb - 8);
      a.Ia + a.nb > a.offsetTop + a.height - 8 && (a.Ia = a.offsetTop + a.height - a.nb - 8);
      a.Ia < a.offsetTop + 8 && (a.Ia = a.offsetTop + 8);
      a.Ga < a.offsetLeft + 8 && (a.Ga = a.offsetLeft + 8);
      hs(a);
      (Jk(P) || ml(P)) && mD(a);
      is(a);
    }
  }
  Nk() {
    for (let a of hv()) {
      if (a.ce) {
        return !0;
      }
    }
    return this.ce;
  }
  g() {
    return AA() ? Kh() ? 3 == S.g || L.mb().Ja() ? !1 : !0 : !1 : !1;
  }
  gb() {
    let a = S.i;
    if (a) {
      let b = {arrScreenshadeAttachments:[]}, c = null;
      for (c of a.g) {
        b.arrScreenshadeAttachments.push(c.ta);
      }
      gp(a);
      a.xb();
      a.dispatchEvent(new CustomEvent(Cp.g, {detail:b}));
    }
  }
}
;function ns(a, b, c) {
  a = new KD(a, c);
  a.Fa(b);
  -1 == a.ta && a.xb();
  return a;
}
function LD(a, b) {
  let c = [];
  for (let e = 0; e < a.length; e++) {
    var d = a[e];
    Gs(d) && (d = d.Na(), b && (d.uDocType = b), c.push(d));
  }
  return c;
}
function MD(a) {
  let b = a.recordedCommentMedia;
  if (b && !b.mediaFolderSrc) {
    let d = M.o;
    var c = d + "/" + Cn() + "record/";
    if (a = a.uDocType) {
      c = "", (a = Js(S, a)) && (c = a.Uf), c = d + "/" + c + "record/";
    }
    b.mediaFolderSrc = c;
  }
}
function ND() {
  let a = [];
  a = a.concat(Zu(S));
  a = a.concat($u(S));
  return a = a.concat(av(S));
}
function OD(a, b) {
  let c = !1;
  if (-1 == b.parentId) {
    var d = Yu(b.nId, b.uDocType);
    if (d) {
      if (d.aB) {
        d.qs = !0;
        var e = d.hg;
        for (var f = 0; f < e.length; f++) {
          PD(d, f);
        }
        S.ck(d, b.uDocType);
      } else {
        c || (c = null != d.Pn());
        if (!c) {
          for (e = d.hg, f = 0; f < e.length; f++) {
            if (null != e[f].Pn()) {
              c = !0;
              break;
            }
          }
        }
        ev(d, b.uDocType);
      }
    }
  } else {
    d = Yu(b.parentId, b.uDocType);
    if (!d) {
      return;
    }
    e = d.hg;
    for (f = 0; f < e.length; f++) {
      if (e[f].ta == b.nId) {
        c || (c = null != e[f].Pn());
        PD(d, f);
        S.ck(d, b.uDocType);
        break;
      }
    }
  }
  if (a.g && a.g.ci()) {
    a = a.g.ci();
    d = b.parentId;
    b = b.nId;
    for (e = 0; e < a.mp.length;) {
      if (-1 == d) {
        if (a.mp[e][0].id == b) {
          break;
        }
      } else {
        if (a.mp[e][0].parentId == d && a.mp[e][0].id == b) {
          break;
        }
      }
      e++;
    }
    e < a.mp.length && a.mp.splice(e, 1);
  }
  b = An();
  c && (Yg(b) && Us(b) ? mw(L.mb(), !1, !1) : yw(L.mb()) && Ov(L.mb(), !0));
}
function QD(a, b) {
  if (b) {
    var c = null;
    switch(b.updateType) {
      case a.l.BI:
        c = a.i(b);
        break;
      case a.l.nI:
        a.cq(b);
        break;
      case a.l.Er:
        OD(a, b);
        break;
      case a.l.mE:
        a.j(b);
    }
    return c;
  }
}
function RD() {
  var a = new Date();
  let b = a.getFullYear().toString(), c = (a.getMonth() + 1).toString();
  c = 1 == c.length ? "0" + c : c;
  let d = a.getDate().toString();
  d = 1 == d.length ? "0" + d : d;
  let e = a.getHours().toString();
  e = 1 == e.length ? "0" + e : e;
  let f = a.getMinutes().toString();
  f = 1 == f.length ? "0" + f : f;
  let k = a.getSeconds().toString();
  k = 1 == k.length ? "0" + k : k;
  a = a.getTimezoneOffset();
  var l = Math.abs(a);
  let n, p = 0;
  0 == l / 60 % 1 ? n = l / 60 : 0 == l / 30 % 1 ? (n = Math.floor(l / 30 / 2), p = l / 30 % 2 * 30) : 0 == l / 15 % 1 ? (n = Math.floor(l / 15 / 4), p = l / 15 % 4 * 15) : n = l / 60;
  l = "";
  1 == n.toString().length && (l = "0" + n + "'");
  return "D:" + b + c + d + e + f + k + (0 >= a ? "+" : "-") + l + (p + "'");
}
function SD(a, b, c) {
  b = (b ? b : "") + (" " + (c ? c : ""));
  a.Ha = "" == b ? "Annotate User" : b;
}
function TD(a, b, c) {
  if (1 == b.bMediaCommentType && b.recordedCommentMedia) {
    let d = b.recordedCommentMedia;
    d.mediaFolderSrc || (d.mediaFolderSrc = UD(L.Pb(), c));
    a.Xr(b.recordedCommentMedia, b.nId);
  }
}
function VD(a, b) {
  return !(a.Sf && 1 == a.Sf.bReencoded) && b && 1 == b.bReencoded;
}
class WD {
  constructor(a, b) {
    this.Dd = a;
    this.Lc = b;
    this.Ha = "Annotate User";
    this.u = this.va = null;
    this.v = -1;
    this.G = Ro;
    this.g = null;
    this.M = !1;
    this.l = {BI:1, nI:2, Er:3, mE:4};
  }
  zt(a, b) {
    let c = !b && P.l;
    if (c) {
      S.i && Yq(S.i), S.Ya && Yq(S.Ya), S.La && Yq(S.La);
    } else {
      var d = b, e = S;
      if (!d) {
        var f = Oo(e);
        f && Yq(f);
      }
      switch(d) {
        case 1:
          e.i && Yq(e.i);
          break;
        case 2:
          e.Ya && Yq(e.Ya);
          break;
        case 3:
          e.La && Yq(e.La);
      }
    }
    for (d = 0; d < a.length; d++) {
      if ("commentElement" == a[d].type) {
        if (e = ns(this, a[d], b), c && ("uDocType" in a[d] ? b = a[d].uDocType : b = 1), b) {
          switch(f = S, b) {
            case 1:
              f.i && f.i.Wd.push(e);
              break;
            case 2:
              f.Ya && f.Ya.Wd.push(e);
              break;
            case 3:
              f.La && f.La.Wd.push(e);
          }
        } else {
          -1 == e.ta ? os(e) : cv(e);
        }
      }
    }
  }
  vv(a) {
    return a ? LD(a.Wd, a.je()) : [];
  }
  bA(a) {
    var b = [], c = LD(Zu(S), 1);
    b = b.concat(c);
    c = LD($u(S), a ? 2 : 1);
    b = b.concat(c);
    c = LD(av(S), a ? 3 : 1);
    return b = b.concat(c);
  }
  i() {
  }
  Sr() {
    let a = Oo(S);
    a && Yq(a);
    S.i && Yq(S.i);
    S.Ya && Yq(S.Ya);
    S.La && Yq(S.La);
  }
  Gx(a, b) {
    (a = Yu(a, b)) && ev(a, b);
  }
  j(a) {
    if (-1 != a.parentId) {
      return !1;
    }
    let b = Yu(a.nId, a.uDocType);
    return b ? (XD(b, a.color, !1), S.ck(b, a.uDocType), !0) : !1;
  }
  Ht(a) {
    let b = Yu(a.parentId);
    a = ns(this, a, S.g);
    b.Ht(a);
  }
  U() {
    this.Sr();
  }
  N() {
    this.M = !0;
  }
  s() {
    this.M = !1;
  }
  cq() {
  }
  C() {
    return !1;
  }
  Ex() {
  }
  Va() {
  }
  ia() {
  }
  ic() {
  }
  ld() {
  }
  lq() {
  }
  ya() {
  }
  Db() {
  }
  IE() {
  }
  Gb() {
  }
  gy() {
  }
  ba() {
  }
  B() {
  }
  ea() {
  }
  J() {
  }
  gq() {
    return null;
  }
  ci() {
    return null;
  }
  lb() {
    return !1;
  }
  Ce() {
    return !1;
  }
  nj() {
  }
  Lm() {
  }
  m() {
    return "";
  }
  Wb() {
  }
  ib() {
  }
  Fx() {
  }
}
;function vw(a) {
  a.vq = Og.te;
  const b = si();
  Yu(a.g, S.g) && (b ? L.kd({type:YD, bSuccessful:!1, recordedMedia:null, mediaFolderSrc:null, parentId:a.g, id:a.wl, uDocType:S.g, bNewCommentItem:!1, renderData:null}) : ZD(a.jq, !1, null, a.g, a.wl));
}
function ww(a) {
  a.wl - 1;
  a.g = -1;
  a.Ym = !1;
  a.l = null;
  a.j = null;
  a.i = null;
  si() && a.m.kd({type:$D,});
}
function Dw(a) {
  if (a.Sf && a.Sf.iw) {
    var b = a.Sf.iw[0], c = M.o + "/" + Cn() + "record/", d = S.g;
    si() && a.m ? a.m.kd({type:YD, bSuccessful:!0, recordedMedia:b, mediaFolderSrc:c, parentId:a.g, id:a.wl, uDocType:d, bNewCommentItem:a.Ym, renderData:a.l}) : a.jq && (a.l && aE(a.jq, a.l), ZD(a.jq, !0, b, a.g, a.wl));
    (a = Yu(a.g, d)) && S.ck(a, d);
  }
}
function bE(a, b) {
  if (b && !a.Ce() && Jv.Pc) {
    var c = Jv.Pc, d = b.Hl ? b.Hl : b.nMediaType;
    a.vq = d;
    a.g = A(b.Vk) ? b.parentId : b.Vk;
    a.wl = A(b.id) ? b.id : b.id;
    a.Ym = A(b.Ym) ? b.bNewCommentItem : b.Ym;
    a.i = b.ww ? b.ww : b.commentThread;
    a.j = b.vw ? b.vw : b.commentItem;
    d == Og.em ? TA && cE(c, !1, !1) : d == Og.sj ? SA() && cE(c, !0, !1) : d == Og.Hk ? TA && VA && cE(c, !1, !0) : d == Og.zl && SA() && TA && VA && cE(c, !0, !0);
  }
}
function dE() {
  Pw() || Nn();
  var a = L.Pb();
  let b = An();
  Yg(b) && !ot() ? Us(b) || Ks(1) ? (lw.g(), Mw.g == Uw ? Tw(Ql, !0) : Pw() ? Qn(Ql, !1, !1, !1, !1) : mw(Ql, !1, !1)) : (a.U(), lw.g(), rC()) : (a = !1, bl(1) && (a = !0), lw.g(), Ql.Ja() || Ok(P) || a || ot() ? (L.Xn(), nw.innerHTML = 'Save annotations<br><span style="font-size: 12px;">We need to store this recording in your account.</span>', pB.innerText = "DISCARD") : Ov(Ql, !0));
}
function eE(a, b, c) {
  Pw() || Sn();
  a.vq = Og.te;
  var d = si();
  let e = Yu(a.g, S.g);
  e && c && c.length && (!b || c && c.length) && (a.Sf = {iw:c, vn:a.g, wl:a.wl, Ym:a.Ym}, -1 == a.wl && (b = {updateType:1, bAnnotateComment:!0, type:fE, parentId:a.g, bParentComment:!1, contents:"", uDocType:S.g,}, d ? (b.bInformPDFViewer = !1, d = L.II(b)) : (b.bInsertImmediately = !1, d = QD(a.jq.v, b)), at(!0), a.l = d.renderData, a.wl = d.nId), e.Xr(c[0], a.wl) && dE());
}
function gE(a) {
  if (a.vq == Og.em || a.vq == Og.Hk) {
    if (si()) {
      L.kd({type:hE, bShow:!0});
    } else {
      a = a.i ? a.i : a.j;
      if (!a) {
        return;
      }
      a = a.lh();
      a.Va = !0;
      a.m.ja();
      a.u.pb();
      a.s.pb();
      a.C.pb();
      a.j.pb();
      a.o.pb();
      a.i.ja();
      a.l.ja();
      Bj(a);
    }
    document.getElementById("annotate-highlight-plugin-recording-toolbar").style.display = "none";
  }
}
class iE {
  constructor(a, b) {
    this.jq = a ? a : null;
    this.m = b ? b : null;
    this.vq = Og.te;
    this.wl = this.g = -1;
    this.Ym = !1;
    this.l = this.j = this.i = this.Sf = null;
    this.mp = [];
  }
  yg(a, b) {
    let c = bv(b);
    for (let d = 0; d < c.length; d++) {
      c[d].yg(a) && S.ck(c[d], b);
    }
    si() ? L.kd({type:jE, mapStatus:a}) : this.jq && this.jq.yg(a);
  }
  pq(a) {
    if (this.Ce()) {
      if (si()) {
        this.m.kd({type:kE, duration:a});
      } else {
        const b = this.i ? this.i : this.j;
        b && b.pq(a);
      }
    }
  }
  Pn() {
    return this.Sf && this.Sf.iw ? this.Sf.iw : null;
  }
  Ce() {
    return this.vq != Og.te;
  }
  nj() {
    this.vq = Og.te;
    this.wl = this.g = -1;
    this.Ym = !1;
    this.l = this.j = this.i = this.Sf = null;
    this.mp = [];
  }
}
;function Gs(a) {
  return "" != a.mh() || null != a.Pn();
}
function lE(a) {
  let b = a.Na(), c = [];
  for (let d = 0; d < a.hg.length; d++) {
    if (!a.hg[d].qs) {
      let e = lE(a.hg[d]);
      c.push(e);
    }
  }
  b.replies = c;
  return b;
}
function PD(a, b) {
  0 <= b && b < a.hg.length && (a.hg[b].aB ? a.hg[b].qs = !0 : a.hg.splice(b, 1));
}
function XD(a, b, c) {
  a.mu = !0;
  "alpha" in b || (b.alpha = 51);
  a.color = new mE(b.red, b.green, b.blue, b.alpha);
  c || (a.Zu = RD());
}
function nE(a, b) {
  "bAnnotateComment" in b && (a.pF = b.bAnnotateComment);
  "bEmbeddedComment" in b && (a.aB = b.bEmbeddedComment);
  "type" in b && (a.type = b.type);
  "parentId" in b && (a.Vk = b.parentId);
  "pageIndex" in b && (a.S = b.pageIndex);
  "bDeleted" in b && (a.qs = b.bDeleted);
  "bHasAP" in b && (a.cB = b.bHasAP);
  "bEdited" in b && (a.mu = b.bEdited);
  "bParentComment" in b && (a.Zm = b.bParentComment);
  "author" in b && (a.Ih = b.author);
  "creationDate" in b && (a.xu = b.creationDate);
  "modificationDate" in b && (a.Zu = b.modificationDate);
  "contents" in b && (a.dg = b.contents.trim());
  b.recordedCommentMedia && (a.Sf = b.recordedCommentMedia, a.nw = 1);
  if ("rect" in b && b.rect) {
    var c = b.rect;
    a.rect = new oE(c.left, c.top, c.width, c.height);
  }
  "highlightElement" in b && b.highlightElement && (a.dk = new ny(), a.dk.Fa(b.highlightElement));
  if ("quadPointSet" in b && b.quadPointSet) {
    c = b.quadPointSet;
    a.sz = [];
    for (var d = 0; d < c.length; d++) {
      let e = c[d];
      a.sz.push(new pE(e.x1, e.y1, e.x2, e.y2, e.x3, e.y3, e.x4, e.y4));
    }
  }
  "color" in b && b.color ? (c = b.color, "alpha" in c || (c.alpha = 51), a.color = new mE(c.red, c.green, c.blue, c.alpha)) : a.Zm && (a.color = new mE(255, 255, 0, 51));
  "selection" in b && b.selection && (a.selection = new qE(), rE(a.selection, b.selection));
  if ("replies" in b) {
    for (a.hg = [], c = 0; c < b.replies.length; c++) {
      d = new KD(a.QJ, S.g), d.Fa(b.replies[c]), -1 == d.ta && d.xb(), d.Vk = a.ta, a.hg.push(d);
    }
  }
  "uDocType" in b && (a.qd = b.uDocType);
}
class KD extends Wm {
  constructor(a, b) {
    super();
    this.QJ = a;
    this.qd = b;
    this.aB = this.pF = !1;
    this.S = this.Vk = -1;
    this.type = "commentElement";
    this.qs = this.mu = this.cB = !1;
    this.Zm = !0;
    this.Ih = "Annotate User";
    this.Zu = this.xu = RD();
    this.dg = "";
    this.Sf = null;
    this.rect = new oE(0, 0, 0, 0);
    this.dk = null;
    this.sz = [];
    this.selection = this.color = null;
    this.hg = [];
    this.nw = 0;
  }
  Fa(a) {
    super.Fa(a);
    nE(this, a);
  }
  Ad(a) {
    super.Ad(a);
    nE(this, a);
  }
  Na() {
    let a = super.Na();
    this.Fb(a);
    return a;
  }
  Fb(a) {
    a.bAnnotateComment = this.pF;
    a.type = this.type;
    a.parentId = this.Vk;
    a.pageIndex = this.S;
    a.bDeleted = this.qs;
    a.bEdited = this.mu;
    a.bHasAP = this.cB;
    a.bParentComment = this.Zm;
    a.author = this.Ih;
    a.creationDate = this.xu;
    a.modificationDate = this.Zu;
    a.contents = this.dg;
    a.recordedCommentMedia = this.Sf;
    a.rect = sE(this.rect);
    a.highlightElement = this.dk && this.dk.Na();
    var b;
    if (b = this.color) {
      b = this.color;
      var c = {};
      c.red = b.red;
      c.green = b.green;
      c.blue = b.blue;
      c.alpha = b.alpha;
      b = c;
    }
    a.color = b;
    a.selection = this.selection && tE(this.selection);
    a.bMediaCommentType = this.nw;
    b = [];
    for (c = 0; c < this.sz.length; c++) {
      b.push(uE(this.sz[c]));
    }
    a.quadPointSet = b;
    b = [];
    for (c = 0; c < this.hg.length; c++) {
      let d = this.hg[c].Na();
      b.push(d);
    }
    a.replies = b;
    a.uDocType = this.je();
  }
  yg(a) {
    let b = !1;
    if (this.Sf) {
      var c = this.Sf.strURL + this.Sf.strExtension;
      a && 1 == a[c] && (console.log(`media comment reencoding status updated ${c}`), this.Sf.bReencoded = 1, this.Sf.strExtension = ".mp4", b = !0);
    }
    if (this.hg) {
      for (c = 0; c < this.hg.length; c++) {
        this.hg[c].yg(a) && !b && (b = !0);
      }
    }
    return b;
  }
  je() {
    return this.qd;
  }
  Ul(a) {
    this.Fb(a);
  }
  Xr(a, b) {
    let c = !1;
    if (this.ta == b) {
      this.Sf = a, this.nw = 1, c = !0;
    } else {
      for (let d = 0; d < this.hg.length; d++) {
        let e = this.hg[d];
        if (e.ta == b) {
          c = e.Xr(a, b);
          break;
        }
      }
    }
    return c;
  }
  Ht(a) {
    this.hg.push(a);
  }
  cq(a, b) {
    this.mu = !0;
    this.dg = a;
    this.Zu = RD();
    b && (this.xu = this.Zu, this.mu = !1);
  }
  Lm(a) {
    this.mu = a.bEdited;
    this.dg = a.contents;
    this.Zu = a.modificationDate;
  }
  Ox() {
    return this.Zm;
  }
  Kr() {
    return this.Vk;
  }
  mh() {
    return this.dg;
  }
  Pn() {
    return this.Sf;
  }
}
;class vE extends WD {
  constructor(a) {
    super(!0, a);
    this.D = this.kd = null;
    this.o = [];
    this.pa = !1;
    this.Jb = new iE(null, this);
  }
  zt(a, b) {
    super.zt(a, b);
    this.pa && this.lq(b);
  }
  i(a) {
    var b = null, c = null;
    let d = !0;
    0 == a.bInformPDFViewer && (d = !1);
    if (a.bParentComment) {
      b = ns(this, a, a.uDocType), os(b), b = b.Na();
    } else {
      let e = Yu(a.parentId, a.uDocType);
      e && (a.pageIndex = e.S, c = ns(this, a, a.uDocType), dv(c, a.uDocType), e.Ht(c), Gs(c) && S.ck(e, a.uDocType), b = c.Na(), c = {nId:c.ta});
    }
    b.pageId = b.pageIndex;
    b.pageIndex = yo(this.D, b.pageIndex);
    b.uDocType = a.uDocType;
    d && this.kd({type:wE, renderData:b});
    c && (c.renderData = b);
    return c;
  }
  lq(a) {
    if (this.pa) {
      var b = [];
      let d = ND();
      for (let e = 0; e < d.length; e++) {
        var c = d[e];
        Gs(c) && !c.qs && (c = lE(c), b.push(c));
      }
      this.D && xE(this.D, b, !1, a == S.g);
    }
  }
  Sr() {
    super.Sr();
    this.lq(S.g);
  }
  ba(a) {
    if (void 0 !== a && null !== a && -1 != a) {
      var b = S.g, c = [], d = fv(b);
      for (let e = d.length - 1; 0 <= e; e--) {
        d[e].S == a && (c.push(d[e]), ev(d[e], b));
      }
      return c;
    }
  }
  ea(a, b, c, d) {
    if (void 0 !== a && null !== a && -1 != a) {
      var e = [], f = fv(d);
      for (let k = f.length - 1; 0 <= k; k--) {
        if (f[k].S == a) {
          let l = f[k].rect;
          l && (l.left > b && l.left + l.width > b || l.top > c && l.top + l.height > c) && (e.push(f[k]), ev(f[k], d));
        }
      }
      return e;
    }
  }
  B(a, b) {
    if (a) {
      var c = [];
      for (let d = 0; d < a.length; d++) {
        let e = a[d];
        cv(e, b);
        Gs(e) && !e.qs && c.push(lE(e));
      }
      this.D && xE(this.D, c, !0, b == S.g);
    }
  }
  j(a) {
    let b = super.j(a);
    b && this.kd({type:yE, updateType:this.l.mE, color:a.color, nId:a.nId, uDocType:a.uDocType});
    return b;
  }
  cq(a) {
    if (-1 == a.parentId) {
      var b = Yu(a.nId);
      if (b) {
        var c = a.bNewComment ? a.bNewComment : !1;
        b.cq(a.contents, c);
        S.ck(b, a.uDocType);
        c && (a = {type:zE, creationDate:b.xu, parentId:b.Kr(), nId:b.ta}, this.Dd && this.kd && this.kd(a));
      }
    } else {
      if (b = Yu(a.parentId)) {
        c = b.hg;
        for (let d = 0; d < c.length; d++) {
          if (c[d].ta == a.nId) {
            c[d].cq(a.contents, !1);
            S.ck(b, a.uDocType);
            break;
          }
        }
      }
    }
  }
  Gx(a, b) {
    super.Gx(a, b);
    this.kd({type:AE, nId:a, uDocType:b});
  }
  Ex() {
    if (this.o && this.o.length) {
      var a = S.g, b = fv(a), c = !1;
      for (let d = 0; d < this.o.length; d++) {
        let e = this.o[d], f = e.creationDate, k = e.author;
        b.find(l => l.xu == f && l.Ih == k) || (c = !0, this.i(e));
      }
      c && this.lq(a);
    }
  }
  Lm(a, b) {
    var c = !1;
    let d = BE, e = {}, f = Yu(a.nId, b);
    if (f) {
      let n = f.hg, p = a.replies;
      var k = f.color, l = a.color;
      if (Gs(f)) {
        if (f.mh() != a.contents || 1 == a.bMediaCommentType && VD(f, a.recordedCommentMedia)) {
          c = !0, f.Lm(a), TD(f, a, b), d = BE, e.nId = f.ta, e.contents = f.mh(), e.bMediaCommentType = f.nw, e.recordedCommentMedia = f.Pn();
        } else if (n.length < p.length) {
          for (k = 0; k < p.length; k++) {
            let t = p[k];
            n.find(x => x.ta == t.nId) || (1 == t.bMediaCommentType && t.recordedCommentMedia && (l = t.recordedCommentMedia, l.mediaFolderSrc || (l.mediaFolderSrc = UD(L.Pb(), b))), this.i(t));
          }
        } else if (n.length > p.length) {
          for (b = 0; b < n.length; b++) {
            let t = n[b];
            if (!p.find(x => x.nId == t.ta)) {
              c = {};
              c.type = CE;
              c.renderData = {parentId:f.ta, nId:t.ta, uDocType:a.uDocType};
              OD(this, c.renderData);
              this.kd(c);
              return;
            }
          }
        } else if (k.red != l.red || k.green != l.green || k.blue != l.blue || k.alpha != l.alpha) {
          this.j(a);
        } else {
          for (k = 0; k < p.length; k++) {
            let t = p[k];
            if (l = n.find(x => x.ta == t.nId)) {
              if (l.mh() != t.contents ? (c = !0, l.Lm(t)) : 1 == t.bMediaCommentType && VD(l, t.recordedCommentMedia) && (c = !0, TD(l, t, b)), c) {
                d = DE;
                e.parentId = f.ta;
                e.nId = l.ta;
                e.contents = l.mh();
                e.bMediaCommentType = l.nw;
                e.recordedCommentMedia = l.Pn();
                break;
              }
            }
          }
        }
      } else {
        c = !0, d = EE, XD(f, a.color, !0), f.Lm(a), TD(f, a, b), e = f.Na(), e.pageId = e.pageIndex, e.pageIndex = yo(this.D, e.pageIndex);
      }
      c && (e.uDocType = a.uDocType, c = {type:d, renderData:e}, S.ck(f, a.uDocType), this.kd(c));
    }
  }
  Db(a, b, c, d) {
    let e = this;
    null != this.u && (clearTimeout(this.u), this.u = null);
    -1 == b && (this.v = -1);
    this.u = setTimeout(function() {
      var f = Yu(b);
      if (!f) {
        e.va && FE(e.va), e.v = -1;
      } else {
        if (b != e.v && f) {
          e.v = b;
          if (!e.va) {
            e.va = new GE(e.Lc);
            f = document.getElementById("annotate-edit-toolbar-delete");
            var k = document.getElementById("annotate-edit-toolbar-delete-sep");
            f && (f.style.display = "none");
            k && (k.style.display = "none");
          }
          f = e.va;
          if (f.va && a) {
            f.va.style.display = "flex";
            k = a.x - parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-left")) + 24;
            k + f.va.offsetWidth + 3 > window.innerWidth + window.scrollX - 18 && (k = window.innerWidth + window.scrollX - 18 - (f.va.offsetWidth + 3));
            var l = a.y - parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-top")) - 48;
            l + f.va.offsetHeight > window.innerHeight + window.scrollY && (l = window.innerHeight + window.scrollY - f.va.offsetHeight);
            f.va.style.left = k + "px";
            f.va.style.top = l + "px";
          }
          e.kd({type:HE, commentId:b, uDocType:c});
        }
      }
    }, d ? 0 : 1000);
  }
  Va(a) {
    if (a && a.type && a.type == IE && a.action) {
      var b = null;
      a.action == JE ? bE(this.Jb, a) : a.action == KE ? L.tA(null) : a.action == LE ? (L.CE(null), b = {type:ME, bPaused:Jv.Pc.Eq}) : a.action == NE && (L.zE(null), b = {type:OE, bMuted:Jv.Pc.qp});
      null != b && L.kd(b);
    }
  }
  ci() {
    return this.Jb;
  }
  ia(a) {
    this.D = a;
  }
  ic(a) {
    this.kd = a;
  }
  IE(a) {
    this.o = a;
  }
  ld(a) {
    this.pa = a;
  }
  C(a) {
    let b = fv(S.g).find(c => c.ta == a);
    return b ? b.cB : !1;
  }
}
;class PE extends WD {
  constructor() {
    var a = Ro, b = hi.o;
    super(!1, null);
    this.G = a;
    this.g = new QE(this, this.M, a, b);
  }
  Fx(a, b) {
    let c = bv(b);
    for (let d = 0; d < c.length; d++) {
      let e = this.m(c[d].Ih, c[d].mh()), f = c[d].dk;
      f && (this.G.FE(f), f.ru && (RE(this.g, f), SE(f, e)));
    }
    TE(this.g, a, !0, b);
  }
  lq(a) {
    let b = fv(a).map(c => c.Na());
    UE(this.g, a);
    this.zt(b, a);
    this.Fx(b, a);
  }
  i(a) {
    let b = null;
    var c = null, d = !0;
    0 == a.bInsertImmediately && (d = !1);
    a.author || (a.author = this.Ha);
    if (a.bParentComment) {
      d = ns(this, a, a.uDocType), os(d), a.nId = d.ta, a.parentId = d.Kr(), VE(this.g, a, !0, !1, !0, a.uDocType);
    } else {
      let e = Yu(a.parentId, a.uDocType);
      e && (c = ns(this, a, a.uDocType), dv(c, a.uDocType), e.Ht(c), Gs(c) && S.ck(e, a.uDocType), b = c.Na(), d && aE(this.g, b), c = {nId:c.ta});
    }
    WE(this.g);
    c && (c.renderData = b);
    return c;
  }
  Lm(a, b) {
    let c = !1, d = Yu(a.nId, b);
    if (d) {
      var e = d.hg, f = a.replies, k = d.color;
      let l = a.color;
      if (Gs(d)) {
        if (d.mh() != a.contents || 1 == a.bMediaCommentType && VD(d, a.recordedCommentMedia)) {
          c = !0, d.Lm(a), TD(d, a, b), XE(YE(this.g, a.nId, b), a);
        } else if (e.length < f.length) {
          for (a = 0; a < f.length; a++) {
            let n = f[a];
            e.find(p => p.ta == n.nId) || this.i(n);
          }
        } else if (e.length > f.length) {
          for (a = 0; a < e.length; a++) {
            let n = e[a];
            if (!f.find(p => p.nId == n.ta)) {
              b = YE(this.g, n.Kr(), b);
              b.pa(null, ZE(b, n.ta));
              return;
            }
          }
        } else if (k.red != l.red || k.green != l.green || k.blue != l.blue || k.alpha != l.alpha) {
          this.ya(d, a);
        } else {
          for (a = 0; a < f.length; a++) {
            let n = f[a];
            if ((k = e.find(p => p.ta == n.nId)) && k.mh() != n.contents && (k.mh() != n.contents ? (c = !0, k.Lm(n)) : 1 == n.bMediaCommentType && VD(k, n.recordedCommentMedia) && (c = !0, TD(k, n, b)), c)) {
              e = ZE(YE(this.g, k.parentId, b), k.ta);
              $E(e, n.contents);
              1 == n.bMediaCommentType && e.Dq && null != e.j && aF(e.j, n.recordedCommentMedia);
              break;
            }
          }
        }
      } else {
        c = !0, XD(d, a.color, !0), d.Lm(a), TD(d, a, b), e = this.m(d.Ih, d.mh()), f = d.dk, this.G.FE(f), RE(this.g, f), SE(f, e), TE(this.g, [a], !1, b);
      }
      c && S.ck(d, b);
    }
  }
  ya(a, b) {
    a && (bF(this.g, a.dk, b.color), this.j(b));
  }
  Gx(a, b) {
    let c = Yu(a, b);
    c && (ev(c, b), (a = YE(this.g, a, b)) && cF(a));
  }
  cq(a) {
    if (-1 == a.parentId) {
      var b = Yu(a.nId, a.uDocType);
      if (b) {
        b.cq(a.contents, a.bNewComment ? a.bNewComment : !1);
        S.ck(b, a.uDocType);
        var c = this.m(b.Ih, b.mh());
        SE(b.dk, c);
        "identifier" in a && a.identifier && a.identifier.uc(c);
      }
    } else {
      if (b = Yu(a.parentId)) {
        c = b.hg;
        for (let d = 0; d < c.length; d++) {
          if (c[d].ta == a.nId) {
            c[d].cq(a.contents, !1);
            S.ck(b, a.uDocType);
            break;
          }
        }
      }
    }
    WE(this.g);
  }
  J() {
    var a = dF(this.g);
    if (-1 != a && (a = Yu(a))) {
      bF(this.g, a.dk, null);
      a = {parentId:-1};
      a.nId = dF(this.g);
      let b = eF(this.g.C.qa).match(/[.?\d]+/g);
      a.color = {red:parseFloat(b[0]), green:parseFloat(b[1]), blue:parseFloat(b[2]), alpha:parseFloat(b[3]),};
      a.color.alpha *= 255;
      this.j(a);
    }
  }
  m(a, b) {
    a = a.trim() + ": " + b.trim();
    return a = 120 >= a.length ? a : a.substring(0, 117) + "...";
  }
  Sr() {
    fF(this.g, fv(S.g));
    fF(this.g, Zu(S));
    fF(this.g, $u(S));
    fF(this.g, av(S));
    super.Sr();
    gF(this.g, null, !0);
  }
  gq() {
    return this.g;
  }
  ci() {
    return this.g.ci();
  }
  Gb(a) {
    var b = this.g;
    let c = b.m != a;
    b.m = a;
    for (a = 0; a < b.g.length; a++) {
      hF(b.g[a], b.m);
    }
    c && b.V();
  }
  gy() {
    let a = Kh() && !fq(1);
    this.Gb(a);
  }
  lb() {
    return Kh() && this.g.m;
  }
  Ce() {
    return this.g.ci().Ce();
  }
  U() {
    this.Sr();
    var a = this.g;
    window.removeEventListener("mouseup", a.M, a.O);
    window.removeEventListener("pointerup", a.N, a.O);
  }
  Wb() {
    var a = this.g, b = gv();
    for (let d = 0; d < b.length; d++) {
      var c = b[d].dk;
      if (c) {
        c = document.getElementsByClassName(c.Qe + " annotate-hightlight-hide");
        for (let e = c.length - 1; 0 <= e; e--) {
          let f = c[e];
          -1 != f.className.search("annotate-hightlight-hide") && f.classList.remove("annotate-hightlight-hide");
        }
      }
    }
    for (b = 0; b < a.g.length; b++) {
      a.g[b].M.pb();
    }
  }
  ib() {
    var a = this.g;
    iF(a, null, !0);
    var b = gv();
    for (let d = 0; d < b.length; d++) {
      var c = b[d].dk;
      if (c) {
        c = document.getElementsByClassName(c.Qe);
        for (let e = c.length - 1; 0 <= e; e--) {
          c[e].className += " annotate-hightlight-hide";
        }
      }
    }
    for (b = 0; b < a.g.length; b++) {
      a.g[b].M.ja();
    }
  }
  N() {
    super.N();
    this.g.J = !0;
  }
  s() {
    super.s();
    this.g.J = !1;
  }
  nj() {
    this.g.nj();
  }
}
;function ZD(a, b, c, d, e) {
  a.u = !1;
  for (let p = 0; p < a.g.length; p++) {
    let t = a.g[p];
    if (t.vn == d) {
      var f = t, k = b, l = c, n = e;
      jF(f, !1);
      if (!k || null != n && -1 != n) {
        if (f.ad.On() == n) {
          kF(f.ad, k, l), l = !1, f.u && (n = lF(f.ad.lh()), l = "" == n, l || (mF(f.ad.lh()), f.g.g.el.value = n, f.g.M(!1), f.g.Xo())), l && !f.ad.Dq || f.ad.ea(null, !0);
        } else {
          for (let x = 0; x < f.i.length; x++) {
            f.i[x].On() == n && (kF(f.i[x], k, l), f.i[x].lh() ? f.i[x].lh().Xo() : f.g && (f.g.M(!1), f.g.Xo()));
          }
        }
        k && nF(f, !1);
        oF(f.g);
        pF(f.g, !0);
        f.g.M(f.Ce());
      }
      qF(t, !0);
      rF(a, p, t);
    }
    qF(t, !0);
  }
  a.j = null;
}
function aE(a, b) {
  if (b) {
    for (let c = 0; c < a.g.length; c++) {
      let d = a.g[c];
      if (d.vn == b.parentId && d.je() == b.uDocType) {
        d.Ht(b);
        break;
      }
    }
  }
}
function RE(a, b) {
  b = document.getElementsByClassName(b.Qe);
  for (let c = 0; c < b.length; c++) {
    b[c].addEventListener("click", a.B, {capture:!0, passive:!1});
  }
}
function SE(a, b) {
  a = document.getElementsByClassName(a.Qe);
  for (let c = 0; c < a.length; c++) {
    a[c].title = b;
  }
}
function TE(a, b, c, d) {
  if (b) {
    for (c && gF(a, d, !1), c = 0; c < b.length; c++) {
      b[c].bNewComment = !1, b[c].identifier = sF(a, b[c]), A(b[c].identifier) || VE(a, b[c], !1, !0, !1, d);
    }
  }
}
function UE(a, b) {
  b || (b = S.g);
  for (let c = a.g.length - 1; 0 <= c; c--) {
    a.g[c].je() == b && cF(a.g[c]);
  }
}
function VE(a, b, c, d, e, f) {
  var k = b.bNewComment;
  f = new tF(a, a.m && f == ql() && !cl(2), f);
  b = Object.assign({}, b);
  "bNewComment" in b && nF(f, b.bNewComment);
  "nId" in b ? f.vn = b.nId : "m_nId" in b && (f.vn = b.m_nId);
  if ("rect" in b && b.rect) {
    var l = b.rect;
    f.rect = new oE(l.left, l.top, l.width, l.height);
  }
  "highlightElement" in b && b.highlightElement && b.highlightElement["class"] && (f.ya = b.highlightElement["class"]);
  "identifier" in b && (f.M = b.identifier);
  "uDocType" in b && (f.qd = b.uDocType);
  f.ad = new uF(f, b, b.bNewComment ? b.bNewComment : !1, f.N);
  f.ad.addEventListener(uF.g, f.ba);
  f.ad.addEventListener(uF.i, f.ea);
  f.Z(f.ad);
  if ((b = b.replies) && b.length) {
    for (l = 0; l < b.length; l++) {
      let n = new uF(f, b[l], !1, f.N);
      n.addEventListener(uF.g, f.ba);
      n.addEventListener(uF.i, f.ea);
      f.i.push(n);
      f.Z(n);
    }
  }
  a.g.push(f);
  vF(f, !d);
  a.Ce() && (qF(f, !1), wF(f, !1));
  d && f.ja();
  c && (a.i = a.g.length - 1);
  document.body.appendChild(f.el);
  0 <= a.i && a.i < a.g.length && xF(a.g[a.i]);
  if (k) {
    for (yF(f.ad, !0), c = 0; c < a.g.length; c++) {
      a.g[c].u && a.g[c] != f && (d = a.g[c].ad, k = !1, d && (k = "" != d.mh()), !k && d && d.lh() && (k = "" != lF(d.lh())), a.g[c].Ce() || (k ? d.lh().Xo() : a.g[c].pa(null, d)));
    }
  }
  a.V();
  c = f.ad;
  c.g && c.g.g.el.focus();
  e && zF(a, f);
  wF(f, Ql.Ja() ? Ql.Gf() : !a.G && !a.Ce());
}
function WE(a) {
  a.j && (jF(a.j, !0), AF(a, a.j.m), a.j = null);
}
function YE(a, b, c) {
  for (let d = 0; d < a.g.length; d++) {
    let e = a.g[d];
    if (e.vn == b && e.je() == c) {
      return e;
    }
  }
  return null;
}
function bF(a, b, c) {
  a = c ? `rgba(${c.red},${c.green},${c.blue},${c.alpha})` : eF(a.C.qa);
  b.color = a;
  b = document.getElementsByClassName(b.Qe);
  for (c = 0; c < b.length; c++) {
    b[c].style.backgroundColor = a;
  }
}
function dF(a) {
  return (a = BF(a)) ? a.vn : -1;
}
function fF(a, b) {
  b.forEach(c => {
    if (c = c.dk) {
      c = document.getElementsByClassName(c.Qe);
      for (let d = 0; d < c.length; d++) {
        c[d].removeEventListener("click", a.B, {capture:!0});
      }
    }
  });
}
function gF(a, b, c) {
  b || (b = S.g);
  for (let d = a.g.length - 1; 0 <= d; d--) {
    (c || a.g[d].je() == b) && CF(a, a.g[d]);
  }
}
function xF(a) {
  var b = document.body.scrollHeight;
  let c = document.documentElement.clientWidth < Math.floor(window.visualViewport.width) ? document.documentElement.clientWidth : Math.floor(window.visualViewport.width), d = document.documentElement.clientHeight < Math.floor(window.visualViewport.height) ? document.documentElement.clientHeight : Math.floor(window.visualViewport.height), e = 0, f = 0;
  var k = document.getElementsByClassName(a.ya);
  if (k.length) {
    for (b = 0; b < k.length; b++) {
      var l = k[b].getBoundingClientRect();
      e = Math.max(e, l.x + l.width);
      f = Math.max(f, l.y + l.height);
    }
    e += window.scrollX;
    f += window.scrollY + 8;
  } else {
    e = a.rect.left + a.rect.width, f = a.rect.top + a.rect.height + 8, a.V(240, b);
  }
  k = window.scrollY + window.innerHeight;
  b = f + a.el.offsetHeight;
  l = window.scrollX + window.innerWidth;
  e + a.Ra() > l && (e = window.scrollX + c - a.Ra());
  b > k && (f = window.scrollY + d - a.el.offsetHeight);
  a.ga(e + 16, f);
}
function sF(a, b) {
  var c = null;
  "author" in b && "contents" in b && "" != b.author && "" != b.contents && (c = a.v.m(b.author, b.contents));
  b = b.highlightElement;
  let d = null;
  b && "class" in b && b["class"] && (d = document.getElementsByClassName(b["class"]));
  if (!d || !d.length) {
    return null;
  }
  b = new Nj(null);
  R(b, "extension_icon");
  R(b, "extension_icon-comments");
  R(b, "AnnotateNet_commentIdentifier");
  b.he("annotate-comment-identifier-" + (new Date()).getTime());
  c && b.uc(c);
  b.V(12, 12);
  b.el.addEventListener("click", a.B, {capture:!0, passive:!1});
  c = d[d.length - 1].getBoundingClientRect();
  a = window.scrollX + c.x + c.width - b.Ra() / 2 + 2;
  c = window.scrollY + c.y - 3 * b.wb() / 4 + 2;
  document.body.appendChild(b.el);
  b.ga(a, c);
  return b;
}
function CF(a, b) {
  if (b) {
    var c = a.g.indexOf(b), d = b.M;
    d && (d.el.removeEventListener("click", a.B, {capture:!0}), document.body.contains(d.el) && document.body.removeChild(d.el));
    b.el.removeEventListener("pointerup", b.ic, b.O);
    b.ad && (b.ad.removeEventListener(uF.g, b.ba), b.ad.removeEventListener(uF.i, b.ea), DF(b.ad));
    for (d = 0; d < b.i.length; d++) {
      b.i[d].removeEventListener(uF.g, b.ba), b.i[d].removeEventListener(uF.i, b.ea), DF(b.i[d]);
    }
    b.g.removeEventListener(EF.i, b.Db);
    b.g.removeEventListener(EF.j, b.Jb);
    b.g.removeEventListener(EF.l, b.Gb);
    b.g.removeEventListener(EF.g, b.Wb);
    FF(b.g);
    b.l && (b.l.removeEventListener(GF.g, b.Ha), b.l.removeEventListener(GF.Er, b.Va), HF(b.l));
    document.body.contains(b.el) && document.body.removeChild(b.el);
    -1 != c && a.g.splice(c, 1);
  }
}
function zF(a, b) {
  for (let c = 0; c < a.g.length; c++) {
    a.g[c] != b && a.g[c].ja();
  }
}
function eF(a) {
  const [b, c, d] = a.match(/\w\w/g).map(e => parseInt(e, 16));
  return `rgba(${b},${c},${d},${0.5})`;
}
function iF(a, b, c) {
  let d = a.g[a.i];
  d && (b && (IF(d, b.target), JF(d, b.target)), c || b && !d.el.contains(b.target)) && (d.u && !a.o.Ce() ? d.lb() : (d.ja(), vF(d, !1)), a.i = -1, KF(a));
}
function KF(a) {
  -1 != a.l && 14 != a.l && (L.Hm(a.l), a.l = -1);
}
function LF(a, b) {
  QD(a.v, b);
  3 == b.updateType && b.bMediaAdded && dE();
  a.V();
}
function MF(a) {
  let b = ki.g;
  14 != b && (a.l = b);
  -1 != a.l && L.Hm(14);
}
function rF(a, b, c) {
  a.i = b;
  NF(W);
  vF(c, !0);
  c.pb();
  xF(c);
  c.V(240, document.body.scrollHeight);
  zF(a, c);
}
function AF(a, b) {
  a.u = !0;
  for (let c = 0; c < a.g.length; c++) {
    qF(a.g[c], !1);
  }
  bE(a.o, b);
  b.Hl != Og.sj && b.Hl != Og.zl || iF(a, null, !0);
}
function BF(a) {
  return 0 > a.i || a.i >= a.g.length ? null : (a = a.g[a.i]) ? a : null;
}
class QE {
  constructor(a, b, c, d) {
    this.o = new iE(this, null);
    this.v = a;
    this.J = b;
    this.ea = c;
    this.C = d;
    this.O = {capture:!0, passive:!1};
    this.i = -1;
    this.g = [];
    this.s = null;
    this.l = -1;
    this.m = !0;
    this.u = !1;
    this.j = null;
    this.G = !1;
    this.M = this.ba.bind(this);
    this.N = this.ia.bind(this);
    this.B = this.pa.bind(this);
    this.xi();
  }
  xi() {
    window.addEventListener("mouseup", this.M, this.O);
    window.addEventListener("pointerdown", this.N, this.O);
  }
  V() {
    let a = this.g[this.i];
    a && a.Fi && (a.pb(), a.V(240, document.body.scrollHeight), xF(a), a.g.g.el.focus());
    this.s && (clearTimeout(this.s), this.s = null);
    this.s = setTimeout(() => {
      for (let e = 0; e < this.g.length; e++) {
        var b = this.g[e], c = document.getElementsByClassName(b.ya);
        if (c.length) {
          b = b.M;
          var d = c[c.length - 1].getBoundingClientRect();
          c = window.scrollX + d.x + d.width - b.Ra() / 2 + 2;
          d = window.scrollY + d.y - 3 * b.wb() / 4 + 2;
          b.ga(c, d);
        }
      }
    }, 100);
  }
  ba() {
    var a;
    if (a = this.J) {
      var b = document.getSelection();
      b && 0 != b.rangeCount ? (a = b.getRangeAt(0), !a || a.startContainer == a.endContainer && a.startOffset == a.endOffset ? a = !1 : (a = b.toString(), a = "\n" == a || "" == a ? !1 : !0)) : a = !1;
    }
    if (a) {
      a = {bAnnotateComment:!0};
      b = document.getSelection().getRangeAt(0).getBoundingClientRect();
      a.rect = {left:b.x + window.scrollX, top:b.y + window.scrollY, width:b.width, height:b.height};
      a.creationDate = RD();
      a.contents = "";
      a.bParentComment = !0;
      a.bNewComment = !0;
      b = eF(this.C.qa);
      b = this.ea.ML(b);
      var c = b.Na();
      RE(this, b);
      a.highlightElement = c;
      a.identifier = sF(this, a);
      a.uDocType = S.g;
      this.v.i(a);
    }
  }
  ia(a) {
    var b = document.getElementById("annotate-highlight-plugin-comment-toolbar");
    let c = document.getElementById("annotate-edit-toolbar"), d = document.getElementById("annotate-highlight-plugin-recording-toolbar");
    -1 == this.i || b && b.contains(a.target) || c && c.contains(a.target) || d && d.contains(a.target) || this.o.Ce() || ((b = this.g[this.i]) && a && (IF(b, a.target), JF(b, a.target)), ((b = bl(1)) && b.bSharedDoc || S.C) && iF(this, a, !1));
  }
  pa(a) {
    var b = ND();
    for (var c = 0; c < b.length; c++) {
      var d = b[c].dk;
      if (d && a.target.className == d.Qe) {
        for (d = 0; d < this.g.length; d++) {
          let e = this.g[d];
          if (e.vn == b[c].ta && e.je() == b[c].je()) {
            rF(this, d, e);
            return;
          }
        }
      }
    }
    for (b = 0; b < this.g.length; b++) {
      if (c = this.g[b], a.target.id == c.M.el.id) {
        rF(this, b, c);
        break;
      }
    }
  }
  Ce() {
    return this.u;
  }
  Zn() {
    for (let a = 0; a < this.g.length; a++) {
      this.g[a].Zn();
    }
  }
  yg(a) {
    for (let b = 0; b < this.g.length; b++) {
      this.g[b].yg(a);
    }
  }
  ci() {
    return this.o;
  }
  nj() {
    for (let a = this.g.length - 1; 0 <= a; a--) {
      CF(this, this.g[a]);
    }
    this.g = [];
    this.o.nj();
    this.i = -1;
    this.s = null;
    this.l = -1;
    this.m = !0;
    this.u = !1;
    this.j = null;
    this.G = !1;
  }
}
;function XE(a, b) {
  $E(a.ad, b.contents);
  1 == b.bMediaCommentType && (a = a.ad, a.Dq && null != a.j && aF(a.j, b.recordedCommentMedia));
}
function ZE(a, b) {
  let c = null;
  for (let d = 0; d < a.i.length; d++) {
    if (a.i[d].On() == b) {
      c = a.i[d];
      break;
    }
  }
  return c;
}
function cF(a) {
  OF(a, a.ad);
  for (let b = 0; b < a.i.length; b++) {
    OF(a, a.i[b]);
  }
  CF(a.o, a);
  Bj(a);
}
function vF(a, b) {
  a.Fi != b && (a.Fi = b, a.Fi ? (R(a, "AnnotateNet_activeComment"), a.N && (a.g.ob() || a.u || a.g.pb(), PF(a, !0)), a.ia.pb()) : (pj(a, "AnnotateNet_activeComment"), a.N && PF(a, !1), a.ia.ja()));
}
function qF(a, b) {
  a.ad && (QF(a.ad, b, !0), RF(a.ad, b));
  for (let c = 0; c < a.i.length; c++) {
    RF(a.i[c], b);
  }
  pF(a.g, b);
}
function wF(a, b) {
  SF(a.g, b);
  RF(a.ad, b);
  for (let c = 0; c < a.i.length; c++) {
    RF(a.i[c], b);
  }
}
function IF(a, b) {
  TF(a.ad, b);
  for (let c = 0; c < a.i.length; c++) {
    TF(a.i[c], b);
  }
}
function JF(a, b) {
  a.j.ob() && !a.j.el.contains(b) && a.j.ja();
}
function jF(a, b) {
  a.ib = b;
  let c = a.ad.lh();
  c && (c.N = b);
  for (let d = 0; d < a.i.length; d++) {
    if (c = a.i[d].lh()) {
      c.N = b;
    }
  }
  a.g && (a.g.N = b);
}
function hF(a, b) {
  a.N = b;
  a.ad && UF(a.ad, b);
  for (let c = 0; c < a.i.length; c++) {
    UF(a.i[c], b);
  }
  b ? a.g.pb() : a.g.ja();
}
function VF(a, b) {
  var c = b.FJ;
  b = b.left;
  let d = a.el.getBoundingClientRect().y - a.el.scrollTop;
  c = c.bottom;
  TA ? WF(a.j, a.s[0]) : XF(a.j, a.s[0]);
  TA && VA ? WF(a.j, a.s[1]) : XF(a.j, a.s[1]);
  SA() ? WF(a.j, a.s[2]) : XF(a.j, a.s[2]);
  SA() && TA && VA ? WF(a.j, a.s[3]) : XF(a.j, a.s[3]);
  a.j.V(192, 360);
  a.j.ga(b, c - d - a.j.wb());
  a.j.pb();
}
function nF(a, b) {
  a.u = b;
  a.u ? a.g.ja() : a.Fi && a.g.pb();
  a.ad && a.u != a.ad.u && YF(a.ad, a.u);
}
function OF(a, b) {
  b.removeEventListener(uF.g, a.ba);
  b.removeEventListener(uF.i, a.ea);
  DF(b);
  let c = a.i.indexOf(b);
  null != c && -1 < c && a.i.splice(c, 1);
  a.ay(b);
  Bj(a);
}
function PF(a, b) {
  ZF(a.g, b);
  if (a.ad) {
    var c = a.ad;
    c.g && ZF(c.g, b);
  }
  for (let d = 0; d < a.i.length; d++) {
    c = a.i[d], c.g && ZF(c.g, b);
  }
}
class tF extends Nj {
  constructor(a, b, c) {
    super(null);
    this.O = {capture:!0, passive:!1};
    this.ba = this.pa.bind(this);
    this.ea = this.ed.bind(this);
    this.Jb = this.Cf.bind(this);
    this.Db = this.gf.bind(this);
    this.Gb = this.Th.bind(this);
    this.Ha = this.Lc.bind(this);
    this.Va = this.lb.bind(this);
    this.ic = this.Xi.bind(this);
    this.Wb = this.pf.bind(this);
    this.ze = this.eg.bind(this);
    this.el.addEventListener("pointerup", this.ic, this.O);
    R(this, "AnnotateNet_commentThread");
    this.qd = c;
    this.Fi = this.u = !1;
    this.vn = -1;
    this.ib = !1;
    this.o = a;
    this.N = !0;
    this.rect = this.ad = null;
    this.ya = "";
    this.M = null;
    this.i = [];
    this.m = null;
    this.s = ["Voice note", "Camera recording", "Screen recording", "Screen + Camera recording"];
    this.j = new $F(13);
    aG(this.j, this.s);
    this.j.addEventListener($F.g, this.ze);
    this.Z(this.j);
    this.j.ja();
    this.ia = new Nj(null);
    R(this.ia, "AnnotateNet_leftpointer");
    this.Z(this.ia);
    this.C = new Nj(null);
    R(this.C, "AnnotateNet_leftpointer");
    R(this.C, "AnnotateNet_leftpointershadow");
    this.Z(this.C);
    this.C.ja();
    this.g = new EF(bG, this.u);
    this.g.addEventListener(EF.j, this.Jb);
    this.g.addEventListener(EF.i, this.Db);
    this.g.addEventListener(EF.l, this.Gb);
    this.g.addEventListener(EF.g, this.Wb);
    this.g.M(this.Ce());
    cG(this.g);
    this.o.Ce() && SF(this.g, !1);
    this.Z(this.g);
    this.l = null;
    hF(this, b);
  }
  Zb() {
    return "WebCommentThread";
  }
  oi() {
    this.V(240, document.body.scrollHeight);
    return !0;
  }
  V(a, b) {
    let c = 0;
    this.ia.ga(-10, 0);
    this.C.ga(-10, 0);
    this.ad && (this.ad.V(a, b), this.ad.ga(0, c), c += this.ad.wb());
    for (var d = 0; d < this.i.length; d++) {
      let e = this.i[d];
      e.V(a, b);
      e.ga(0, c);
      c += e.wb();
    }
    this.g.ob() && (this.g.V(a, b), this.g.ga(0, c), c += this.g.wb());
    this.l && this.l.ob() && (this.l.V(a, c), this.l.ga(0, 0));
    b = super.V;
    this.G || (this.G = new Nj(null), this.G.Qc(100), this.G.Ee(-500), this.G.Nd(-500), this.G.Mb(100), this.G.el.style.overflowY = "scroll", d = new Nj("div"), d.he("AnnotateNet_innerscroll"), d.el.style.width = "100%", d.el.style.height = "10px", this.G.Z(d), document.body.appendChild(this.G.el));
    d = this.G.Ra() - document.getElementById("AnnotateNet_innerscroll").offsetWidth;
    b.call(this, a + d, c);
  }
  Xi() {
    vF(this, !0);
  }
  Cf() {
    if (!this.Ce()) {
      var a = {updateType:1, bAnnotateComment:!0, type:fE, parentId:this.vn, bParentComment:!1, contents:lF(this.g), uDocType:S.g};
      LF(this.o, a);
    }
  }
  gf(a) {
    this.Ce() || (KF(this.o), (a = a.detail) && null != !a.value && a.Nq && "" == a.value && a.Nq == bG && this.ja());
  }
  Th() {
    MF(this.o);
  }
  Ht(a) {
    a = Object.assign({}, a);
    a = new uF(this, a, !1, this.N);
    a.addEventListener(uF.g, this.ba);
    a.addEventListener(uF.i, this.ea);
    this.i.push(a);
    this.Z(a);
    Bj(this);
  }
  ed(a) {
    a = a.detail;
    let b = {};
    b.type = fE;
    b.updateType = 2;
    b.bParentComment = a.Zm;
    b.parentId = a.Vk;
    b.nId = a.nz;
    b.contents = a.dg;
    b.bNewComment = this.u;
    b.creationDate = RD();
    b.identifier = this.M;
    this.ad.s.el.innerHTML = dG(b.creationDate);
    this.u && nF(this, !1);
    LF(this.o, b);
  }
  pa(a, b) {
    a && (b = a.detail.wH);
    a = {};
    a.type = fE;
    a.updateType = 3;
    a.parentId = b.Kr();
    a.nId = b.On();
    a.bParentComment = b.Ox();
    a.uDocType = this.je();
    a.bMediaAdded = b.Dq;
    LF(this.o, a);
    b.Ox() ? cF(this) : -1 != this.i.indexOf(b) && OF(this, b);
  }
  gq() {
    return this.o;
  }
  pq(a) {
    this.g && this.g.pq(a);
  }
  Lc() {
    this.l.ja();
    this.C.ja();
  }
  lb() {
    this.pa(null, this.ad);
    this.C.ja();
  }
  pf(a) {
    if (!this.Ce()) {
      var b = {Vk:this.vn, id:-1, Ym:!0, ww:this, vw:null};
      VF(this, a.detail);
      this.m = b;
    }
  }
  eg(a) {
    if (this.m) {
      switch(a.detail.selection) {
        case this.s[0]:
          this.m.Hl = Og.em;
          break;
        case this.s[1]:
          this.m.Hl = Og.Hk;
          break;
        case this.s[2]:
          this.m.Hl = Og.sj;
          break;
        case this.s[3]:
          this.m.Hl = Og.zl;
      }
      a = this.m.ww;
      var b = this.m.vw;
      this.u && "" != lF(this.ad.lh()) ? (this.m.ww = this, this.m.vw = null, this.m.id = -1, this.m.Vk = this.vn, this.m.Ym = !0, this.o.j = this, this.ad.lh().Xo()) : !b && a && "" != lF(this.lh()) ? (this.o.j = this, this.lh().Xo()) : (jF(this, !0), qF(this, !1), AF(this.o, this.m));
    }
  }
  Zn() {
    this.ad.Zn();
    for (let a = 0; a < this.i.length; a++) {
      this.i[a].Zn();
    }
  }
  yg(a) {
    this.ad.yg(a);
    for (let b = 0; b < this.i.length; b++) {
      this.i[b].yg(a);
    }
  }
  Ce() {
    return this.ib;
  }
  lh() {
    return this.g;
  }
  je() {
    return this.qd;
  }
}
function HF(a) {
  a.i.el.removeEventListener("pointerup", a.j, a.O);
  a.g.el.removeEventListener("pointerup", a.l, a.O);
}
class GF extends Nj {
  static get g() {
    return "CANCEL";
  }
  static get Er() {
    return "DELETE";
  }
  constructor(a, b) {
    super(null);
    R(this, "AnnotateNet_deleteConfirmation");
    R(this, "AnnotateNet_shadow");
    this.el.tabIndex = 0;
    this.j = this.m.bind(this);
    this.l = this.jA.bind(this);
    this.O = {capture:!0, passive:!1};
    this.o = a;
    this.el.onkeydown = c => {
      if (27 == c.keyCode || "Escape" == c.key) {
        c = this.o, c.l.ja(), c.C = !1, this.j();
      }
    };
    a = "Delete this comment?";
    b && (a = "Delete this entire thread?");
    this.text = new Nj(null);
    this.text.el.innerHTML = a;
    this.text.el.style.fontWeight = (500).toString();
    vj(this.text, "center");
    this.Z(this.text);
    this.i = new Nj(null);
    this.i.el.innerHTML = "CANCEL";
    R(this.i, "AnnotateMsgDialogBtn");
    this.i.el.style.backgroundColor = "#fff";
    this.i.el.style.borderRadius = "2px";
    this.i.vf(13);
    this.i.v("8px");
    this.i.el.addEventListener("pointerup", this.j, this.O);
    this.Z(this.i);
    this.g = new Nj(null);
    this.g.el.innerHTML = "DELETE";
    R(this.g, "AnnotateMsgDialogBtn");
    this.g.el.style.backgroundColor = "#fff";
    this.g.el.style.borderRadius = "2px";
    this.g.vf(13);
    this.g.v("8px");
    this.g.el.addEventListener("pointerup", this.l, this.O);
    this.g.el.focus();
    this.Z(this.g);
  }
  Zb() {
    return "DeleteConfirmation";
  }
  V(a, b) {
    super.V(a, b);
    this.text.V(a, 20);
    this.text.ga(0, 12);
    this.i.ga((a - this.i.Yf() - this.g.Yf() - 16) / 2, 40);
    this.g.ga(this.i.vd() + this.g.Yf() + 16, 40);
  }
  m() {
    this.dispatchEvent(new CustomEvent(GF.g, {}));
  }
  jA() {
    this.dispatchEvent(new CustomEvent(GF.Er, {}));
  }
}
var bG = 2;
function $E(a, b) {
  a.dg.el.innerHTML = eG(b);
  "" == a.mh() ? a.dg.ja() : a.dg.pb();
}
function DF(a) {
  a.i.el.removeEventListener("pointerup", a.Ha, a.O);
  a.l.removeEventListener($F.g, a.ya);
  a.g && (a.g.removeEventListener(EF.i, a.ba), a.g.removeEventListener(EF.j, a.ia), a.g.removeEventListener(EF.g, a.pa), FF(a.g));
  a.m && (a.m.removeEventListener(GF.g, a.M), a.m.removeEventListener(GF.Er, a.N), HF(a.m));
}
function QF(a, b, c) {
  fG(a, b);
  a.g && !c && pF(a.g, b);
}
function RF(a, b) {
  a.g && (b && "" == a.mh() && null == a.j ? SF(a.g, !0) : SF(a.g, !1));
}
function kF(a, b, c) {
  if (!b || c) {
    b && (YF(a, !1), a.j && a.j.U(), a.j = new gG(a, c), a.j.addEventListener(gG.g, () => {
      b && Bj(a);
    }), a.g && hG(a.g), a.Z(a.j), a.Dq = !0), QF(a, !0, !1), a.g && oF(a.g), b && a.g && SF(a.g, !1), b && setTimeout(() => Bj(a), 300), a.g && iG(a.g);
  }
}
function YF(a, b) {
  a.u = b;
  a.u ? (a.s.ja(), a.i.ja(), a.dg.ja()) : (a.s.pb(), a.i.pb(), a.dg.pb());
  if (a.g) {
    var c = a.g;
    c.ea = b;
    SF(c, !b);
  }
  Bj(a);
}
function UF(a, b) {
  b && !a.B().Ce() ? fG(a, !0) : fG(a, !1);
}
function yF(a, b) {
  b || MF(a.B().o);
  a.g || (a.g = new EF(3, a.u), a.g.addEventListener(EF.i, a.ba), a.g.addEventListener(EF.j, a.ia), a.g.addEventListener(EF.g, a.pa), a.j && hG(a.g), a.Z(a.g), a.B().Fi && ZF(a.g, !0), a.B().o.Ce() && SF(a.g, !1));
  (a.j || "" != a.mh()) && SF(a.g, !1);
  a.dg.ja();
  a.g.g.el.value = a.mh();
  a.g.ba = a.mh();
  a.g.M(a.B().Ce());
  a.g.pb();
  iG(a.g);
  Bj(a);
  setTimeout(() => {
    a.g && a.g.g.el.focus();
    let c = lF(a.g);
    a.g.g.el.value = "";
    a.g.g.el.value = c;
  }, 1);
}
function TF(a, b) {
  a.l.ob() && !a.i.el.contains(b) && b != a.l.el && (a.l.ja(), a.C = !a.C);
}
function dG(a) {
  let b = parseInt(a.slice(2, 6)), c = parseInt(a.slice(6, 8)), d = parseInt(a.slice(8, 10)), e = parseInt(a.slice(10, 12));
  var f = parseInt(a.slice(12, 14));
  a = new Date((new Date(Date.UTC(b, c - 1, d, e, f, parseInt(a.slice(14, 16)), 0))).getTime() - 60000 * parseInt(a.charAt(16) + (60 * parseInt(a.slice(17, 20)) + parseInt(a.slice(20, 22)))));
  b = a.getFullYear();
  c = a.getMonth() + 1;
  d = a.getDate();
  e = a.getHours();
  f = a.getMinutes();
  a = 1 == f.toString().length ? "0" + f : f.toString();
  f = 12 > e ? "AM" : "PM";
  "PM" == f && (e -= 12);
  0 == e && (e = 12);
  return e + ":" + a + " " + f + " " + "Jan Feb Mar Apr May Jun Jul Aug Sept Oct Nov Dec".split(" ")[c - 1] + " " + d + ", " + b;
}
function fG(a, b) {
  b ? (a.i.sf = !0, pj(a.i, "AnnotateMsgDialogBtnDisabled"), a.i.el.style.pointerEvents = "auto") : (a.i.sf = !1, R(a.i, "AnnotateMsgDialogBtnDisabled"), a.i.el.style.pointerEvents = "none");
}
function eG(a) {
  return a.replace(/(((https?:\/\/)|(www\.))[^\s]+)/g, function(b, c, d) {
    return '<a href="' + ("www." == d ? "http://" + b : b) + '" target="_blank">' + b + "</a>";
  });
}
class uF extends Nj {
  static get i() {
    return "COMMENT_EDIT_REQ";
  }
  static get g() {
    return "COMMENT_DELETE_REQ";
  }
  constructor(a, b, c, d) {
    super(null);
    this.ia = this.ea.bind(this);
    this.ba = this.lb.bind(this);
    this.ya = this.Db.bind(this);
    this.M = this.Va.bind(this);
    this.N = this.ib.bind(this);
    this.Ha = this.Jb.bind(this);
    this.pa = this.Wb.bind(this);
    this.O = {capture:!0, passive:!1};
    R(this, "AnnotateNet_commentItem");
    this.parent = a;
    this.u = c;
    this.Vk = b.parentId;
    this.Dq = !1;
    "nId" in b ? this.nz = b.nId : "m_nId" in b && (this.nz = b.m_nId);
    this.C = !0;
    (this.Zm = b.bParentComment) && R(this, "AnnotateNet_parentComment");
    this.o = new Nj(null);
    a = this.o.el;
    let e = b.author.trim().split(" ");
    a.innerHTML = 2 == e.length ? e[0].charAt(0) + e[1].charAt(0) : e[0].charAt(0);
    R(this.o, "AnnotateNet_profileThumbnail");
    this.Z(this.o);
    this.Ih = new Nj(null);
    this.Ih.el.innerHTML = b.author;
    R(this.Ih, "annotateellipsis");
    this.Ih.el.style.fontWeight = (500).toString();
    this.Z(this.Ih);
    this.s = new Nj(null);
    this.s.el.innerHTML = c ? "" : dG(b.creationDate);
    R(this.s, "AnnotateNet_date");
    this.Z(this.s);
    this.i = new Nj(null);
    sj(this.i, "pointer");
    R(this.i, "extension_icon");
    R(this.i, "extension_icon-more_options");
    this.i.el.addEventListener("pointerup", this.Ha, this.O);
    this.i.uc("More options");
    this.Z(this.i);
    this.l = new $F(13);
    aG(this.l, ["Edit", "Delete"]);
    this.l.addEventListener($F.g, this.ya);
    this.Z(this.l);
    this.l.ja();
    this.j = null;
    this.dg = new Nj(null);
    R(this.dg, "AnnotateNet_contents");
    $E(this, b.contents);
    this.Z(this.dg);
    this.m = this.g = null;
    kF(this, !0, b.recordedCommentMedia);
    YF(this, this.u);
    UF(this, d);
  }
  Zb() {
    return "CommentItem";
  }
  V(a, b) {
    let c = 8, d = 8;
    this.o.V(36, 36);
    this.o.ga(c, d);
    c += this.o.Ra() + 8;
    this.Ih.V(150, 18);
    let e = d;
    this.u && (e = this.o.rd() + (this.o.wb() - this.Ih.wb()) / 2);
    this.Ih.ga(c, e);
    wj(this.Ih, this.Ih.wb());
    this.s.V(150, 18);
    this.s.ga(c, d + this.Ih.wb());
    wj(this.s, this.Ih.wb());
    this.Ih.Ra();
    this.i.V(24, 24);
    this.i.ga(a - this.i.Ra() - 8, d + (this.o.wb() - this.i.wb()) / 2);
    c = 8;
    d += this.o.wb();
    this.l.V(70, 200);
    this.l.ga(a - this.l.Ra() - 8 - 4, this.i.rd() + this.i.wb());
    d += 12;
    this.j && this.Dq && (this.j.V(a, 0), this.j.ga(0, d), d += this.j.wb() + 8);
    this.dg && this.dg.ob() && ("" == this.mh() ? this.dg.ja() : (this.dg.Qc(a - 2 * c), this.dg.ga(c, d), d += this.dg.$g() + 12));
    this.g && this.g.ob() && (this.g.V(a, b), this.g.ga(0, d), d += this.g.wb());
    this.m && this.m.ob() && (this.m.V(a, d), this.m.ga(0, 0));
    super.V(a, d);
  }
  B() {
    return this.parent;
  }
  Zn() {
    this.Dq && null != this.j && this.j.Zn();
  }
  yg(a) {
    this.Dq && null != this.j && this.j.yg(a);
  }
  Db(a) {
    a = a.detail.selection;
    "Delete" == a ? this.Zm ? (a = this.B(), a.l || (a.l = new GF(a.ad, !0), a.l.addEventListener(GF.g, a.Ha), a.l.addEventListener(GF.Er, a.Va), a.Z(a.l)), a.l.pb(), a.C.pb(), a.l.el.focus(), Bj(a)) : (this.m || (this.m = new GF(this, !1), this.m.addEventListener(GF.g, this.M), this.m.addEventListener(GF.Er, this.N), this.Z(this.m)), this.m.pb(), this.m.el.focus(), Bj(this)) : "Edit" == a && yF(this, !1);
  }
  Va() {
    this.m.ja();
  }
  ib() {
    this.dispatchEvent(new CustomEvent(uF.g, {detail:{wH:this}}));
  }
  Wb(a) {
    var b = this.Kr();
    let c = this.On();
    -1 == b && this == this.B().ad && (b = c);
    b = {Vk:b, id:c, Ym:!1, ww:null, vw:this};
    VF(this.B(), a.detail);
    this.B().m = b;
  }
  ea(a, b) {
    null != a && (b = a.detail.yJ);
    this.dg.pb();
    this.g.ja();
    b && ($E(this, lF(this.g)), this.dispatchEvent(new CustomEvent(uF.i, {detail:{Vk:this.Kr(), nz:this.On(), dg:this.mh(), Zm:this.Ox()}})));
    Bj(this);
  }
  lb() {
    this.B().Ce() || (this.u ? this.dispatchEvent(new CustomEvent(uF.g, {detail:{wH:this}})) : (this.dg.pb(), this.g.ja(), Bj(this)));
  }
  Jb() {
    this.i.sf && (this.C ? (this.j ? (XF(this.l, "Edit"), Ql.Ja() && !Ql.Gf() && XF(this.l, "Delete")) : WF(this.l, "Edit"), this.l.pb(), this.C = !1) : (this.l.ja(), this.C = !0));
  }
  pq(a) {
    this.g && this.g.pq(a);
  }
  lh() {
    return this.g;
  }
  On() {
    return this.nz;
  }
  Kr() {
    return this.Vk;
  }
  mh() {
    return this.dg.el.innerText;
  }
  Ox() {
    return this.Zm;
  }
}
;function lF(a) {
  return a.g.el.value.trim();
}
function cG(a) {
  a.Nq == bG && ("" == a.g.el.value.trim() ? a.l.el.innerText = "HIDE" : a.l.el.innerText = "CANCEL");
  Bj(a);
}
function SF(a, b) {
  b ? a.lb && !a.Ha && (a.m.sf = !0, pj(a.m, "AnnotateNet_disabled")) : (a.m.sf = !1, R(a.m, "AnnotateNet_disabled"));
}
function FF(a) {
  a.i.el.removeEventListener("pointerup", a.ia, a.O);
  a.l.el.removeEventListener("pointerup", a.ib, a.O);
}
function pF(a, b) {
  (a.lb = b) ? (SF(a, !0), a.l.sf = !0, a.i.sf = !0, pj(a.l, "AnnotateMsgDialogBtnDisabled"), pj(a.i, "AnnotateMsgDialogBtnDisabled")) : (SF(a, !1), a.l.sf = !1, a.i.sf = !1, R(a.l, "AnnotateMsgDialogBtnDisabled"), R(a.i, "AnnotateMsgDialogBtnDisabled"));
  a.M(a.Ce());
}
function mF(a) {
  a.g.el.value = "";
  a.pa(!1);
  cG(a);
}
function oF(a) {
  a.pq("00:00");
  a.Va && (a.Va = !1, a.m.pb(), a.u.ja(), a.s.ja(), a.C.ja(), a.j.ja(), a.o.ja(), a.i.pb(), a.l.pb(), Bj(a));
}
function ZF(a, b) {
  b ? R(a.g, "AnnotateNet_activeCommentReplyInput") : pj(a.g, "AnnotateNet_activeCommentReplyInput");
}
function hG(a) {
  a.Ha = !0;
  Bj(a);
}
function iG(a) {
  1 == a.Nq || a.ea ? a.i.el.innerText = "ADD" : a.Nq == bG ? a.i.el.innerText = "REPLY" : 3 == a.Nq && (a.i.el.innerText = "UPDATE");
}
class EF extends Nj {
  static get i() {
    return "CANCEL";
  }
  static get j() {
    return "SUBMIT";
  }
  static get l() {
    return "TEXTAREA_FOCUS";
  }
  static get g() {
    return "BTN_RECORD_TAP";
  }
  constructor(a, b) {
    super(null);
    R(this, "AnnotateNet_commentEditor");
    this.pa = this.M.bind(this);
    this.ia = this.Xo.bind(this);
    this.ib = this.Wb.bind(this);
    this.Jb = this.Db.bind(this, EF.g);
    this.O = {capture:!0, passive:!1};
    this.Ha = this.N = !1;
    this.Nq = a;
    this.ea = b;
    this.ya = !1;
    this.ba = "";
    this.Va = !1;
    this.maxHeight = 0;
    this.lb = !0;
    this.g = new Nj("textarea");
    R(this.g, "AnnotateNet_commentReplyInput");
    pj(this.g, "extension_reset_css");
    xj(this.g, 0);
    this.g.v("4px");
    yj(this.g, "1px solid rgb(200, 200, 200)");
    this.g.el.style.outline = "none";
    wj(this.g, 16);
    this.g.el.style.fontFamily = "Roboto, Arial, Helvetica, sans-serif";
    this.g.vf(13);
    this.g.el.style.fontWeight = (400).toString();
    this.g.el.style.boxShadow = "none";
    this.g.xe("rgb(0, 0, 0)");
    this.g.el.style.resize = "none";
    this.g.el.style.minHeight = "26px";
    this.g.el.style.overflowY = "hidden";
    this.g.el.tabIndex = 0;
    this.g.el.setAttribute("placeholder", "Enter your comment here...");
    this.g.el.oninput = () => {
      this.pa(this.Ce());
      cG(this);
    };
    this.g.el.oncopy = c => c.stopPropagation();
    this.g.el.onfocus = () => {
      this.dispatchEvent(new CustomEvent(EF.l, {}));
    };
    this.g.el.onkeydown = c => {
      !c.ctrlKey || 13 != c.keyCode && 13 != c.which && "Enter" != c.key || this.ia();
      c.stopPropagation();
    };
    this.Z(this.g);
    this.m = new Nj(null);
    sj(this.m, "pointer");
    this.m.xe("#ff0000");
    oj(this.m, ["extension_icon", "extension_icon-recording_start"]);
    this.m.el.addEventListener("pointerup", this.Jb, this.O);
    this.m.uc("Start recording");
    this.Z(this.m);
    this.u = new Nj(null);
    sj(this.u, "pointer");
    this.u.xe("#ff0000");
    oj(this.u, ["extension_icon", "extension_icon-recording_stop"]);
    this.u.el.addEventListener("pointerup", () => L.tA(null), this.O);
    this.u.uc("Stop recording");
    this.Z(this.u);
    this.u.ja();
    this.s = new Nj(null);
    sj(this.s, "pointer");
    this.s.xe("#ff0000");
    oj(this.s, ["extension_icon", "extension_icon-recording_pause"]);
    this.s.el.addEventListener("pointerup", () => {
      L.CE(null);
      Jv.Pc.Eq ? (R(this.s, "AnnotateBlinkAnimation"), this.s.uc("Resume recording")) : (pj(this.s, "AnnotateBlinkAnimation"), this.s.uc("Pause recording"));
    }, this.O);
    this.s.uc("Pause recording");
    this.Z(this.s);
    this.s.ja();
    this.C = new Nj(null);
    R(this.C, "AnnotateNet_duration");
    this.C.el.innerHTML = "00:00";
    this.C.ja();
    this.Z(this.C);
    this.j = new Nj(null);
    sj(this.j, "pointer");
    oj(this.j, ["extension_icon", "extension_icon-mic"]);
    this.j.el.addEventListener("pointerup", () => {
      L.zE(null);
      var c = Jv.Pc.qp;
      this.j.uc(c ? "Unmute" : "Mute");
      c ? (pj(this.j, "extension_icon-mic"), R(this.j, "extension_icon-mute"), this.o.ja()) : (pj(this.j, "extension_icon-mute"), R(this.j, "extension_icon-mic"), this.o.pb());
    }, this.O);
    this.j.uc("Mute");
    this.Z(this.j);
    this.j.ja();
    this.o = new Nj(null);
    zj(this.o, "#a4d26f");
    this.o.uc("Mic volume");
    this.Z(this.o);
    this.o.ja();
    this.o.ga(-1, -1);
    this.l = new Nj(null);
    this.l.vf(13);
    this.l.v("8px");
    this.l.el.innerHTML = "CANCEL";
    R(this.l, "AnnotateMsgDialogBtn");
    this.l.el.addEventListener("pointerup", this.ib, this.O);
    this.Z(this.l);
    this.i = new Nj(null);
    this.i.vf(13);
    this.i.v("8px");
    this.i.el.innerHTML = "ADD";
    R(this.i, "AnnotateMsgDialogBtn");
    this.i.el.addEventListener("pointerup", this.ia, this.O);
    this.Z(this.i);
    this.i.sf = !1;
    iG(this);
  }
  Zb() {
    return "CommentEditor";
  }
  V(a) {
    let b = 8, c = 8;
    this.g.el.style.height = "auto";
    this.g.Qc(a - 2 * b);
    this.g.Mb(24);
    let d = this.g.di();
    this.ea && 100 > d && !this.Ha && (d = 100);
    this.g.V(a - 2 * b, d);
    this.g.ga(b, c);
    c += d + 10;
    this.m && this.m.ob() && (this.m.V(26, 26), this.m.ga(b, c), b += this.m.Ra() + 4);
    this.u && this.u.ob() && (this.u.V(26, 26), this.u.ga(b, c), b += this.u.Ra() + 4);
    this.s && this.s.ob() && (this.s.V(26, 26), this.s.ga(b, c), b += this.s.Ra() + 4);
    this.C && this.C.ob() && (this.C.V(64, 26), this.C.ga(b, c), b += this.C.Ra() + 4);
    this.j && this.j.ob() && (this.j.V(26, 26), this.j.ga(b, c), b += this.j.Ra());
    this.o && this.o.ob() && (this.o.Qc(4), -1 != this.o.vd() && -1 != this.o.rd() || this.o.ga(b, c), this.o.Ra(), c += this.j.$g() + 8);
    this.i && this.i.ob() && this.i.ga(a - this.i.Yf() - 8, c);
    this.l && this.l.ob() && (this.l.ga(this.i.vd() - this.l.Yf() - 4, c), c += this.i.$g() + 4);
    this.maxHeight = d + 54;
    super.V(a, c);
  }
  pq(a) {
    this.C.el.innerHTML = a;
  }
  Xo() {
    if (this.i.sf) {
      if (this.ya) {
        let a = !0;
        "" != this.ba && lF(this) == this.ba && (this.ba = "", a = !1);
        this.dispatchEvent(new CustomEvent(EF.j, {detail:{yJ:a}}));
        mF(this);
        SF(this, Ql.Ja() ? Ql.Gf() : !0);
      } else {
        this.pa(!1);
      }
    }
  }
  Db(a) {
    this.m.sf && this.dispatchEvent(new CustomEvent(a, {detail:{left:this.m.vd(), FJ:this.m.el.getBoundingClientRect()}}));
  }
  Wb() {
    this.l.sf && (this.dispatchEvent(new CustomEvent(EF.i, {detail:{Nq:this.Nq, value:lF(this)}})), mF(this));
  }
  M(a) {
    (this.ya = "" != lF(this)) && !a ? (this.i.sf = !0, pj(this.i, "AnnotateMsgDialogBtnDisabled")) : (this.i.sf = !1, R(this.i, "AnnotateMsgDialogBtnDisabled"));
    Bj(this);
  }
  Ce() {
    return this.N;
  }
}
;function aF(a, b) {
  a.i = Object.assign({}, b);
  a.Zn();
}
function jG(a) {
  const b = kG(a);
  a.g = new Nj("video");
  lj(a.g, "controls", "controls");
  lj(a.g, "preload", "metadata");
  lj(a.g, "webkit-playsinline", "true");
  lj(a.g, "playsinline", "true");
  lj(a.g, "disablepictureinpicture", "true");
  a.g.el.oncanplay = () => {
    a.dispatchEvent(new CustomEvent(gG.g, {detail:null}));
  };
  lj(a.g, "controlslist", "nodownload noplaybackrate");
  R(a.g, "extension_reset_css");
  R(a.g, "AnnotateNet_mediaElement");
  a.i.nMediaType == Og.em ? R(a.g, "AnnotateNet_commentVoiceRecordingElement") : R(a.g, "AnnotateNet_commentScreenRecordingElement");
  a.mk = new Nj("source");
  lj(a.mk, "src", b);
  lj(a.mk, "type", "");
  a.g.Z(a.mk);
  a.Z(a.g);
}
function kG(a) {
  return UD(L.Pb(), a.parent.parent.qd) + lG(a);
}
function lG(a) {
  return a.i.bReencoded && 1 == a.i.bReencoded ? a.i.strURL + ".mp4" : a.i.strURL + a.i.strExtension;
}
class gG extends Nj {
  static get g() {
    return "COMMENT_MEDIA_LOADED";
  }
  constructor(a, b) {
    super(null);
    this.parent = a;
    this.i = Object.assign({}, b);
    this.mk = this.g = null;
    jG(this);
  }
  V(a, b) {
    this.g && super.V(a, 0 != b ? b : this.g.$g());
  }
  Zn() {
    const a = kG(this);
    lj(this.mk, "src", a);
  }
  yg(a) {
    let b = lG(this);
    a && 1 == a[b] && (console.log(`media comment reencoding status updated ${b}`), this.i.bReencoded = 1, this.Zn());
  }
}
;class mG {
  constructor(a, b, c, d) {
    this.l = a;
    this.g = b;
    this.j = c;
    this.i = d;
  }
}
function Jw(a, b, c) {
  var d = S.j;
  if (b) {
    var e = new URLSearchParams(window.location.search), f = e.get("whiteboardData"), k = bl(1);
    k = k ? k.bSharedDoc : !1;
    f || (f = btoa(JSON.stringify({})));
    try {
      let l = JSON.parse(atob(f));
      if (l && l.guid != b) {
        l.guid = b;
        l.shared = k;
        l.uClassId = d;
        l.uCurDocType = c;
        e.set("whiteboardData", btoa(JSON.stringify(l)));
        if (history.replaceState) {
          let n = window.location.protocol + "//" + window.location.host + window.location.pathname + "?";
          n += e.toString();
          window.history.replaceState({path:n}, "", n);
        }
        a.g.g({type:"ANNOTATE_WB_URL_PARAMS_CHANGED", shared:k, uCurDocType:c});
      }
    } catch (l) {
    }
  }
}
function Kw(a, b) {
  b && "" != b || (b = pt(), "" == b && (b = a.g.i()));
  a.g.g({type:"ANNOTATE_WB_SET_TITLE", title:b});
}
function nG(a, b) {
  let c = 0, d = 0;
  b && (c = b.width, d = b.height);
  a.Qc(c);
  a.Mb(d);
  a.g.g({type:"ANNOTATE_WB_SET_DATA", width:c, height:d, uCurDocType:S.g});
}
function oG(a, b) {
  var c = !1;
  switch(b.type) {
    case "ANNOTATE_WB_READY":
      a.g.l();
      if (b = (new URLSearchParams(window.location.search)).get("whiteboardData")) {
        b = JSON.parse(atob(b)), "guid" in b && (c = -1, "uClassId" in b && (c = b.uClassId), Ln(b.guid, c, !1));
      }
      c = !0;
      Kw(a, null);
      break;
    case "ANNOTATE_WB_SIZE_CHANGED":
      b.bExtended && a.g.j(a.width, a.height, b.bRight), a.Qc(b.width), a.Mb(b.height), c = !0;
  }
  return c;
}
class pG {
  constructor(a) {
    this.g = a;
    this.height = this.width = 0;
  }
  Wn(a) {
    this.g.g({type:"ANNOTATE_FILE_CONTROL_CHANGED", bViewOnlyMode:a});
  }
  Na() {
    return {width:this.width, height:this.height,};
  }
  Qc(a) {
    if (!(0 >= a || this.width == a)) {
      this.width = a;
      var b = this.height;
      qG(L.Pb(), a, b);
      rG(a, b);
    }
  }
  Mb(a) {
    if (!(0 >= a || this.height == a)) {
      this.height = a;
      var b = this.width;
      qG(L.Pb(), b, a);
      rG(b, a);
    }
  }
  Ra() {
    return this.width;
  }
  wb() {
    return this.height;
  }
}
;function aG(a, b) {
  for (let e = 0; e < b.length; e++) {
    var c = a, d = b[e];
    let f = new Nj(null);
    R(f, "AnnotateNet_element");
    f.el.innerHTML = d;
    f.el.addEventListener("pointerdown", c.g.bind(c, d), {capture:!0, passive:!1});
    c.Z(f);
    c.F.push(f);
  }
}
function WF(a, b) {
  a = sG(a, b);
  pj(a, "AnnotateNet_disabled");
  a.sf = !0;
}
function XF(a, b) {
  if (a = sG(a, b)) {
    R(a, "AnnotateNet_disabled"), a.sf = !1;
  }
}
function sG(a, b) {
  if (!b) {
    return null;
  }
  for (let c = 0; c < a.F.length; c++) {
    if (a.F[c].el.innerHTML && a.F[c].el.innerHTML.toLowerCase() == b.toLowerCase()) {
      return a.F[c];
    }
  }
  return null;
}
class $F extends Nj {
  static get g() {
    return "ELEMENT_SELECTED";
  }
  constructor(a) {
    super(null);
    R(this, "AnnotateNet_select");
    this.fontSize = a;
    this.vf(a);
    this.F = [];
  }
  Zb() {
    return "Select";
  }
  V(a, b) {
    let c = 0;
    super.V(a, b);
    for (b = 0; b < this.F.length; b++) {
      let d = this.F[b];
      d.V(a, this.fontSize + 12);
      d.ga(0, c);
      wj(d, this.fontSize + 12);
      c += d.wb();
    }
    super.V(a, c);
  }
  g(a) {
    this.dispatchEvent(new CustomEvent($F.g, {detail:{selection:a}}));
    (a = sG(this, a)) && a.sf && this.ja();
  }
}
function tG(a, b) {
  a.j != b && (a.j && pj(a.g, a.j), a.j = b, R(a.g, b));
}
class uG extends Nj {
  constructor(a, b, c) {
    super(null);
    this.Hr = Xg();
    this.g = new Nj(null);
    R(this.g, "extension_icon");
    tG(this, b);
    this.Z(this.g);
    this.i = new Nj(null);
    this.Vf = a;
    this.i.el.innerText = this.Vf;
    this.Z(this.i);
    c && Kj(this, () => {
      this.dispatchEvent(new CustomEvent(this.Hr, {detail:{selection:this.Vf}}));
    });
  }
  Zb() {
    return "IconItem";
  }
  V(a, b) {
    super.V(a, b);
    this.g.V(26, 26);
    a -= this.g.Ra();
    this.i.V(a, b);
    wj(this.i, b);
  }
  ga(a, b) {
    super.ga(a, b);
    a = 0;
    this.g.ga(a, (this.height - this.g.height) / 2);
    a += this.g.Ra() + 8;
    this.i.ga(a, 0);
  }
}
;function FE(a) {
  a.va && "none" != a.va.style.display && (a.va.style.display = "none");
}
class GE {
  constructor(a) {
    this.va = null;
    this.l = a;
    this.j = this.j.bind(this);
    this.i = this.i.bind(this);
    this.g = this.g.bind(this);
    this.va = hk({parent:document.body, className:"annotate-edit-comment-toolbar", id:"annotate-edit-toolbar", style:{position:"absolute", backgroundColor:"rgb(255,255,255)", zIndex:Yj, padding:"4px", border:"1px solid #c0c0c0", display:"none", fontSize:0}, buttons:[{id:"annotate-edit-toolbar-edit", title:"Edit", className:"extension_icon extension_icon-edit", style:{height:"24px", width:"24px", "float":"left", boxSizing:"border-box", position:"relative", color:"#000000"}, Qa:this.j}, {id:"annotate-edit-toolbar-edit-sep", 
    style:{height:"24px", width:"1px", "float":"left", backgroundColor:"#c0c0c0", marginLeft:"4px", boxSizing:"border-box"}}, {id:"annotate-edit-toolbar-delete", title:"Delete", className:"extension_icon extension_icon-delete", style:{height:"24px", width:"24px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", color:"#000000"}, Qa:this.i}, {id:"annotate-edit-toolbar-delete-sep", style:{height:"24px", width:"1px", "float":"left", backgroundColor:"#c0c0c0", marginLeft:"4px", 
    boxSizing:"border-box", color:"#000000"}}, {id:"annotate-edit-toolbar-close", title:"Close", className:"extension_icon extension_icon-close", style:{height:"24px", width:"24px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", color:"#000000"}, Qa:this.g}]});
  }
  j() {
    this.l && this.l();
  }
  i() {
  }
  g() {
    FE(this);
  }
}
;var Jo = function() {
  function a(y) {
    fc() && y.stopPropagation();
  }
  function b(y, r) {
    null != y && (y = uu(y, r)) && su(y, r);
  }
  function c(y) {
    null != y && (y = uu(y)) && ru(y);
  }
  function d(y) {
    if (Vk(P)) {
      y = tu(y);
      for (var r = 0; r < y.length; r++) {
        Es(y[r]) && (-1 != yo(Ia, y[r].S) && Md ? l(y[r], !0) : l(y[r], !1));
      }
    }
  }
  function e() {
    yc();
    da = null;
    N && (N.style.display = "none", N.removeEventListener("pointerdown", X, {capture:!0, passive:!1}));
    var y = S;
    y.i && y.i.Ur();
    y.Ya && y.Ya.Ur();
    y.La && y.La.Ur();
  }
  function f() {
    Md = !1;
    yc();
    let y = tu();
    for (var r = y.length - 1; 0 <= r; r--) {
      Es(y[r]) && l(y[r], !1);
    }
  }
  function k() {
    Md = !0;
    let y = tu();
    for (let r = y.length - 1; 0 <= r; r--) {
      Es(y[r]) && l(y[r], !0);
    }
    d(S.g);
  }
  function l(y, r) {
    if (r && si() && !Vk(P)) {
      l(y, !1);
    } else {
      if (y && y.la() && Es(y)) {
        let z = null;
        y && (z = y.la().parentElement);
        z && (r ? z.className.includes("annotate-text-hide") && (z.className = z.className.split("annotate-text-hide").join("")) : z.className += " annotate-text-hide");
      }
    }
  }
  function n(y) {
    y.preventDefault();
  }
  function p(y) {
    y.currentTarget === y.target && da && (window.addEventListener("touchmove", n, {capture:!0, passive:!1}), window.addEventListener("pointermove", x, {capture:!0, passive:!1}), window.addEventListener("pointerup", t, {capture:!0, passive:!1}), Ua = y.clientX, $a = y.clientY);
  }
  function t() {
    window.removeEventListener("touchmove", n, {capture:!0});
    window.removeEventListener("pointermove", x, {capture:!0});
    window.removeEventListener("pointerup", t, {capture:!0});
    da && da.la() && wg(da.la());
  }
  function x(y) {
    if (kh(y)) {
      if (y.preventDefault(), da) {
        var r = y.clientX - Ua, z = y.clientY - $a, C = da.la(), J = parseFloat(C.parentElement.style.left.slice(0, -2)) + r, T = parseFloat(C.parentElement.style.top.slice(0, -2)) + z;
        r = parseFloat(N.style.left.slice(0, -2)) + r;
        z = parseFloat(N.style.top.slice(0, -2)) + z;
        var ba = document.body.scrollWidth, ea = document.body.scrollHeight;
        0 == ea && (ea = window.innerHeight);
        0 == ba && (ba = window.innerWidth);
        var ka = parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-left")), oa = parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-top")), bb = Math.ceil(C.parentElement.getBoundingClientRect().width), zb = Math.ceil(C.parentElement.getBoundingClientRect().height);
        Ia && Ia.Ea && (ba = Nx(Ia), ea = Ox(Ia), oa = ka = 0);
        0 <= J && J <= ba - ka - bb && (C.parentElement.style.left = J + "px", N.style.left = r + "px", Ua = y.clientX);
        0 <= T && T <= ea - oa - zb && (C.parentElement.style.top = T + "px", N.style.top = z + "px", $a = y.clientY);
      }
    } else {
      t();
    }
  }
  function D(y, r, z, C) {
    var J = document.createElement("div"), T = "annotate-text-container";
    -1 != window.location.href.indexOf("bing.com") && (T = "b_ " + T);
    J.className = "extension_reset_css " + T;
    J.style.width = z + "px";
    J.style.height = C + "px";
    J.style.position = "absolute";
    J.style.top = r + "px";
    J.style.left = y + "px";
    J.style.border = "1px solid black";
    J.style.zIndex = Cg;
    J.style.padding = "10px";
    J.style.cursor = "all-scroll";
    J.style.boxSizing = "content-box";
    J.style.pointerEvents = "auto";
    J.addEventListener("pointerdown", p, {capture:!0, passive:!1});
    ik(J);
    return J;
  }
  function G(y, r, z, C, J, T, ba, ea, ka) {
    var oa = document.createElement("div");
    oa.className = "extension_reset_css " + r;
    oa.contentEditable = "true";
    oa.style.userSelect = "auto";
    oa.style["-webkit-user-select"] = "auto";
    oa.style.paddingBottom = "10px";
    oa.style.boxSizing = "border-box";
    oa.style.height = "auto";
    oa.style.minHeight = y + "px";
    oa.style.outline = "0px solid transparent";
    oa.style.overflowWrap = "break-word";
    oa.spellcheck = !1;
    oa.style.fontSize = z + "px";
    oa.style.fontFamily = C;
    oa.style.color = J;
    oa.style.backgroundColor = T;
    oa.style.cursor = "text";
    oa.style.lineHeight = "normal";
    oa.style["font-kerning"] = "none";
    oa.style.fontWeight = "normal";
    ba && (oa.style.fontWeight = "bold");
    ea && (oa.style.fontStyle = "italic");
    ka && (oa.style.textDecoration = "underline");
    return oa;
  }
  function I(y) {
    y.stopPropagation();
  }
  function Q(y) {
    if (!y) {
      if (da) {
        y = da.la();
      } else {
        return;
      }
    }
    y.focus();
    var r = document.createRange();
    r.selectNodeContents(y);
    r.collapse(!1);
    y = window.getSelection();
    y.removeAllRanges();
    y.addRange(r);
  }
  function X(y) {
    window.addEventListener("touchmove", n, {capture:!0, passive:!1});
    window.addEventListener("pointermove", La, {capture:!0, passive:!1});
    window.addEventListener("pointerup", Fa, {capture:!0, passive:!1});
    Ua = y.clientX;
    $a = y.clientY;
    N.style.display = "none";
    da.la().parentElement.style.cursor = "";
    da.la().style.minHeight = da.la().parentElement.style.height;
  }
  function Fa() {
    window.removeEventListener("touchmove", n, {capture:!0});
    window.removeEventListener("pointermove", La, {capture:!0});
    window.removeEventListener("pointerup", Fa, {capture:!0});
    N.style.display = "block";
    da.la().parentElement.style.cursor = "all-scroll";
    Q(da.la());
  }
  function La(y) {
    y.preventDefault();
    var r = 1;
    if (Dc && Dc.scale) {
      r = Dc.scale;
    } else if (void 0 !== da) {
      var z = da.A;
      r = z && z.scale ? z.scale : 1;
    }
    z = y.clientX - Ua;
    r = parseFloat(da.la().parentElement.style.width.slice(0, -2)) + z / r;
    z = parseFloat(N.style.left.slice(0, -2)) + z;
    0 < r && z < window.innerWidth + window.scrollX - N.offsetWidth && (da.la().parentElement.style.width = r + "px", N.style.left = z + "px", Ua = y.clientX);
  }
  function Aa(y) {
    if (da) {
      var r = y.target;
      for (-1 != r.className.indexOf("annotate-text-container") && (r = r.children[0]); null != r && -1 == r.className.indexOf("annotate-text ");) {
        r = r.parentElement;
      }
      if (r != da.la()) {
        Ha();
        return;
      }
    }
    null == da && y.target && y.target.tagName && ("A" == y.target.tagName || "a" == y.target.tagName) ? (r = y.target, r.href && (y.preventDefault(), y.stopPropagation(), window.open(r.href, "_blank"))) : (y.preventDefault(), gd = !1, Cb(y, !0));
  }
  function Ha() {
    document.removeEventListener("keydown", a, {capture:!0});
    if (da) {
      var y = da.la();
      let z = 0 == y.innerText.trim().length;
      Vg.unobserve(y);
      y.parentElement.style.border = "1px solid transparent";
      y.parentElement.style.cursor = "";
      y.style.cursor = "";
      y.style.height = "";
      y.style.minHeight = "";
      y.style.backgroundColor = "";
      y.parentElement.style.backgroundColor = ib;
      y.parentElement.style.borderRadius = "5px";
      y.contentEditable = "false";
      if (z) {
        y.parentElement.remove();
      } else {
        var r = aa(y);
        0 == r ? y.parentElement.remove() : y.parentElement.clientWidth > r && (y.parentElement.style.width = r + "px");
        y.parentElement.style.height = y.clientHeight + "px";
      }
      N && (N.style.display = "none", N.removeEventListener("pointerdown", X, {capture:!0, passive:!1}));
      r = 1;
      da.A && !da.A.scale ? da.A.scale = 1 : da.A && (r = da.A.scale);
      y.parentElement.style.transformOrigin = "left top";
      y.parentElement.style.transform = "scale(" + r + ")";
      y.parentElement.removeEventListener("pointerdown", p, {capture:!0});
      y.removeEventListener("pointerdown", I, {capture:!0});
      r = gc(y);
      z ? void 0 !== r && (y = [da.Na()], 0 < y.length && Px({action:Qx, ub:3, F:y}, !0), c(da.ta)) : void 0 === r ? (Sx(da, y, vG, da.A, Sb), zu(da), Px({action:Ux, ub:3, F:[{nId:da.ta}]}, !0)) : sd && (Sx(r, y, vG, null, null), Au(da), y = da.Na(), sd.data == y.data && sd.fontColor == y.fontColor && sd.fillColor == y.fillColor && sd.bBold == y.bBold && sd.bItalic == y.bItalic && sd.bUnderline == y.bUnderline && sd.fontSize == y.fontSize && sd.fontFamily == y.fontFamily && sd.top == y.top && sd.left == 
      y.left && sd.height == y.height && sd.width == y.width || Px({action:Vx, ub:3, F:[sd]}, !0), sd = null);
      da = null;
      Sb = -1;
    }
    yc();
  }
  function aa(y) {
    var r = document.createElement("canvas");
    r.style["font-kerning"] = "none";
    r = r.getContext("2d");
    r.font = "bold " + (y.style.fontSize + " " + y.style.fontFamily);
    var z = 0;
    y = y.innerText.split("\n");
    for (var C = 0; C < y.length; C++) {
      var J = r.measureText(y[C]);
      J.width > z && (z = J.width);
    }
    return Math.ceil(z);
  }
  function ya() {
    return da || H && "block" == H.style.display ? !0 : !1;
  }
  function fc() {
    return da ? !0 : !1;
  }
  function ed(y) {
    td = y;
    var r = Dh;
    y && (r = Cg);
    y = r;
    r = tu();
    for (var z = r.length - 1; 0 <= z; z--) {
      if (Es(r[z])) {
        var C = r[z].la();
        C && (C.parentElement.style.zIndex = y);
      }
    }
  }
  function Bc() {
    F = hk({parent:document.body, id:"annotate-texttool-edit-toolbar", style:{position:"absolute", backgroundColor:"rgb(255,255,255)", zIndex:"2147483641", padding:"4px", border:"1px solid #c0c0c0", display:"none", fontSize:0, fontWeight:"normal", "box-sizing":"border-box", width:"100px"}, buttons:[{id:"annotate-text-edit", title:"Edit", className:"extension_icon extension_icon-edit", style:{height:"24px", width:"24px", "float":"left", boxSizing:"border-box", position:"relative", color:"#000000"}, 
    Qa:function() {
      if (O) {
        var y = O;
        yc();
        if (y && y.la()) {
          sd = y.Na();
          var r = y.la();
          y && (Dc = y.A, Sb = y.S);
          r.style.height = "auto";
          r.style.cursor = "text";
          r.style.minHeight = r.parentElement.style.height.slice(0, -2) + "px";
          r.parentElement.style.cursor = "all-scroll";
          r.parentElement.style.border = "1px solid black";
          r.contentEditable = "true";
          r.style.userSelect = "auto";
          r.style["-webkit-user-select"] = "auto";
          r.style.backgroundColor = r.parentElement.style.backgroundColor;
          r.parentElement.style.backgroundColor = "";
          r.parentElement.style.borderRadius = "";
          Q(r);
          da = y;
          r.parentElement.addEventListener("pointerdown", p, {capture:!0, passive:!1});
          r.addEventListener("pointerdown", I, {capture:!0, passive:!1});
          Vg.observe(r);
          var z = y = 0;
          Ia && Ia.Ea && (z = Ia.Ea.getBoundingClientRect(), y = -z.left + Ia.scrollX, z = -z.top + Ia.scrollY);
          N.style.display = "block";
          N.style.left = r.parentElement.offsetLeft - y + r.parentElement.getBoundingClientRect().width - 12 + "px";
          N.style.top = r.parentElement.offsetTop - z + r.parentElement.getBoundingClientRect().height / 2 - 12 + "px";
          N.addEventListener("pointerdown", X, {capture:!0, passive:!1});
          oc = bh(r.style.color);
          ib = "" == r.style.backgroundColor ? "" : bh(r.style.backgroundColor);
          Xd = "bold" == r.style.fontWeight;
          Od = "italic" == r.style.fontStyle;
          Yd = "underline" == r.style.textDecoration;
          ub = parseInt(r.style.fontSize.slice(0, -2)) + "";
          hc = r.style.fontFamily;
          Kc && Kc(Xd, Od, Yd, oc, ib, ub, hc, !1);
          ic && ic();
          document.addEventListener("keydown", a, {capture:!0, passive:!1});
          $c = !0;
        }
      }
    }}, {id:"annotate-text-sep", style:{height:"24px", width:"1px", "float":"left", backgroundColor:"#c0c0c0", marginLeft:"4px", boxSizing:"border-box"}}, {id:"annotate-text-delete", title:"Delete", className:"extension_icon extension_icon-delete", style:{height:"24px", width:"24px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", color:"#000000"}, Qa:function() {
      if (O) {
        var y = [O.Na()];
        0 < y.length && Px({action:Qx, ub:3, F:y}, !0);
        c(O.ta);
        yc();
      }
    }}, {id:"annotate-text-sep", style:{height:"24px", width:"1px", "float":"left", backgroundColor:"#c0c0c0", marginLeft:"4px", boxSizing:"border-box"}}, {id:"annotate-text-close", title:"Close", className:"extension_icon extension_icon-close", style:{height:"24px", width:"24px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", color:"#000000"}, Qa:Kb}]});
  }
  function Kb() {
    gd = !0;
    yc();
  }
  function Cb(y, r) {
    if (td && !da && !gd) {
      var z = 1000;
      r && (z = 0);
      var C = y.target;
      -1 != Gi && (clearTimeout(Gi), Gi = -1);
      -1 != ai && (clearTimeout(ai), ai = -1);
      ai = setTimeout(function() {
        if (!(da || O && C.className == O.la().className)) {
          let J = C;
          for (-1 != J.className.indexOf("annotate-text-container") && (J = J.children[0]); null != J && -1 == J.className.indexOf("annotate-text ");) {
            J = J.parentElement;
          }
          J && (O = gc(J)) && O.la() && (r && Xe(), y.preventDefault());
        }
      }, z);
    }
  }
  function Xe() {
    var y = O.la();
    H.style.display = "block";
    H.style.border = "1px dashed #ff0000";
    H.style.zIndex = parseInt(Cg) + 1 + "";
    H.style.cursor = "all-scroll";
    let r = y.parentElement.offsetTop, z = y.parentElement.offsetLeft;
    if (O && Ia && Ia.Bb && Ia.Bb.contains(y.parentElement)) {
      let C = Ia.Ea.getBoundingClientRect();
      z += C.left - Ia.scrollX;
      r += C.top - Ia.scrollY;
    }
    H.style.top = r - 15 + "px";
    H.style.left = z - 15 + "px";
    H.style.height = y.parentElement.getBoundingClientRect().height + 30 + "px";
    H.style.width = y.parentElement.getBoundingClientRect().width + 30 + "px";
    F.style.display = "block";
    H.offsetTop - 10 - F.offsetHeight >= window.scrollY ? (F.style.top = H.offsetTop - 10 - F.offsetHeight + "px", F.style.left = H.offsetLeft + H.offsetWidth / 2 - F.offsetWidth / 2 + "px") : H.offsetTop + H.offsetHeight + 10 + F.offsetHeight <= window.scrollY + window.innerHeight ? (F.style.top = H.offsetTop + H.offsetHeight + 10 + "px", F.style.left = H.offsetLeft + H.offsetWidth / 2 - F.offsetWidth / 2 + "px") : H.offsetLeft - 10 - F.offsetWidth >= window.scrollX ? (F.style.top = H.offsetTop + 
    H.offsetHeight / 2 - F.offsetHeight / 2 + "px", F.style.left = H.offsetLeft - F.offsetWidth - 10 + "px") : H.offsetLeft + H.offsetWidth + 15 + F.offsetWidth <= window.scrollX + window.innerWidth ? (F.style.top = H.offsetTop + H.offsetHeight / 2 - F.offsetHeight / 2 + "px", F.style.left = H.offsetLeft + H.offsetWidth + 15 + "px") : (F.style.top = H.offsetTop + 25 + "px", F.style.left = H.offsetLeft + 25 + "px");
    N.style.display = "block";
    N.style.left = Math.floor(H.offsetLeft + H.offsetWidth - 12) + "px";
    N.style.top = Math.floor(H.offsetTop + H.offsetHeight / 2 - 12) + "px";
    N.addEventListener("pointerdown", mf, {capture:!0, passive:!1});
    fa.style.display = "block";
    fa.style.left = Math.floor(H.offsetLeft + H.offsetWidth - 12) + "px";
    fa.style.top = Math.floor(H.offsetTop + H.offsetHeight - 12) + "px";
    oc = bh(y.style.color);
    ib = "" == y.parentElement.style.backgroundColor ? "" : bh(y.parentElement.style.backgroundColor);
    Xd = "bold" == y.style.fontWeight;
    Od = "italic" == y.style.fontStyle;
    Yd = "underline" == y.style.textDecoration;
    ub = parseInt(y.style.fontSize.slice(0, -2)) + "";
    hc = y.style.fontFamily;
    Kc && Kc(Xd, Od, Yd, oc, ib, ub, hc, !1);
  }
  function yc() {
    H && (H.style.display = "none");
    N && (N.style.display = "none", N.removeEventListener("pointerdown", mf, {capture:!0, passive:!1}));
    fa && (fa.style.display = "none");
    O = null;
    F && (F.style.display = "none");
  }
  function wh(y) {
    null != O && (window.addEventListener("touchmove", n, {capture:!0, passive:!1}), window.addEventListener("pointermove", Uf, {capture:!0, passive:!1}), window.addEventListener("pointerup", Ue, {capture:!0, passive:!1}), Ua = y.clientX, $a = y.clientY, y = [O.Na()], 0 < y.length && Px({action:Vx, ub:3, F:y}, !0));
    N.style.display = "none";
    N.removeEventListener("pointerdown", mf, {capture:!0, passive:!1});
    fa.style.display = "none";
    F.style.display = "none";
    H.style.border = "0px";
  }
  function wg(y) {
    if (Ia && Ia.Ea) {
      let C = gc(y);
      var r = Sb;
      C && (r = yo(Ia, C.S), Dc = C.A);
      if (-1 != r) {
        var z = fl(Ia, parseFloat(y.parentElement.style.top.slice(0, -2)) - Dc.y + ox(Ia, r)).S;
        z != r && (r = hl(Ia, z, new il(Ia.scrollX, Ia.scrollY)), Dc = {x:-r.$a + Ia.scrollX, y:-r.Ua + Ia.scrollY, width:jl(Ia, z), height:kl(Ia, z), scale:Ia.scale}, Ia && Ia.Bb && !Ia.Bb.contains(y.parentElement) && Ia.Bb.appendChild(y.parentElement), Sb = ll(Ia, z), C && (C.S = ll(Ia, z), C.A = Dc));
      }
    }
  }
  function Ue() {
    window.removeEventListener("touchmove", n, {capture:!0});
    window.removeEventListener("pointermove", Uf, {capture:!0});
    window.removeEventListener("pointerup", Ue, {capture:!0});
    O && O.la() && (wg(O.la()), Xe(), Wx(O), Au(O), $c = !0);
  }
  function Uf(y) {
    y.preventDefault();
    var r = y.clientX - Ua, z = y.clientY - $a, C = parseFloat(H.style.left.slice(0, -2)) + r, J = parseFloat(H.style.top.slice(0, -2)) + z, T = O.la();
    let ba = 0, ea = 0, ka = document.body.scrollWidth, oa = document.body.scrollHeight;
    0 == oa && (oa = window.innerHeight);
    0 == ka && (ka = window.innerWidth);
    let bb = parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-left")), zb = parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-top")), Za = 0;
    var Xb = 0;
    Ia && Ia.Ea && O && (ba = Ia.scrollX, ea = Ia.scrollY, Xb = Ia.Ea.getBoundingClientRect(), ka = Nx(Ia), oa = Ox(Ia), zb = bb = 0, Za = Xb.left, Xb = Xb.top);
    C - Za >= -ba - bb - 15 && C - Za <= ka - ba - H.offsetWidth + 15 && (Ql.Ja() && to(), H.style.left = C + "px", T.parentElement.style.left = parseFloat(T.parentElement.style.left.slice(0, -2)) + r + "px", Ua = y.clientX);
    J - Xb >= -ea - zb - 15 && J - Xb <= oa - ea - H.offsetHeight + 15 && (Ql.Ja() && to(), H.style.top = J + "px", T.parentElement.style.top = parseFloat(T.parentElement.style.top.slice(0, -2)) + z + "px", $a = y.clientY);
  }
  function Th(y) {
    window.addEventListener("touchmove", n, {capture:!0, passive:!1});
    window.addEventListener("pointermove", xh, {capture:!0, passive:!1});
    window.addEventListener("pointerup", We, {capture:!0, passive:!1});
    Ua = y.clientX;
    $a = y.clientY;
    y = [O.Na()];
    0 < y.length && Px({action:Vx, ub:3, F:y}, !0);
    y = O.la();
    Wg = parseFloat(y.parentElement.style.width.slice(0, -2));
    ge = parseFloat(y.parentElement.style.height.slice(0, -2));
    Ae = parseInt(y.style.fontSize);
    H.style.display = "none";
    fa.style.display = "none";
    N.style.display = "none";
    F.style.display = "none";
  }
  function We() {
    window.removeEventListener("touchmove", n, {capture:!0});
    window.removeEventListener("pointermove", xh, {capture:!0});
    window.removeEventListener("pointerup", We, {capture:!0});
    var y = O.la(), r = parseFloat(y.parentElement.style.width.slice(0, -2)), z = aa(y);
    y.parentElement.style.width = r > z ? z + "px" : r + "px";
    y.parentElement.style.height = y.clientHeight + "px";
    Xe();
    Wx(O);
    Au(O);
    $c = !0;
  }
  function xh(y) {
    if (kh(y)) {
      y.preventDefault();
      var r = O.la(), z = y.clientX - Ua, C = y.clientY - $a;
      y = Math.max((Wg + z) / Wg, (ge + C) / ge);
      z = Math.floor(y * Ae);
      if (!(8 > z || 99 < z)) {
        z = Wg * y - Wg;
        C = ge * y - ge;
        var J = 1;
        void 0 !== O && (J = (J = O.A) && J.scale ? J.scale : 1);
        C = ge + C / J;
        r.parentElement.style.width = Wg + z / J + "px";
        r.parentElement.style.height = C + "px";
        ub = Math.floor(Ae * y) + "";
        r.style.fontSize = ub + "px";
        Ql.Ja() && to();
      }
    } else {
      We();
    }
  }
  function mf(y) {
    window.addEventListener("touchmove", n, {capture:!0, passive:!1});
    window.addEventListener("pointermove", wc, {capture:!0, passive:!1});
    window.addEventListener("pointerup", xg, {capture:!0, passive:!1});
    Ua = y.clientX;
    $a = y.clientY;
    y = [O.Na()];
    0 < y.length && Px({action:Vx, ub:3, F:y}, !0);
    H.style.border = "2px solid black";
    H.style.zIndex = parseInt(Cg) + 1 + "";
    H.style.cursor = "";
    fa.style.display = "none";
    N.style.display = "none";
    F.style.display = "none";
  }
  function xg() {
    window.removeEventListener("touchmove", n, {capture:!0});
    window.removeEventListener("pointermove", wc, {capture:!0});
    window.removeEventListener("pointerup", xg, {capture:!0});
    var y = 1;
    void 0 !== O && (y = (y = O.A) && y.scale ? y.scale : 1);
    y = (parseFloat(H.style.width.slice(0, -2)) - 30) / y - 22;
    var r = O.la(), z = aa(r);
    r.parentElement.style.width = y > z ? z + "px" : y + "px";
    r.parentElement.style.height = r.clientHeight + "px";
    Xe();
    Wx(O);
    Au(O);
    $c = !0;
  }
  function wc(y) {
    if (kh(y)) {
      y.preventDefault();
      var r = y.clientX - Ua, z = parseFloat(H.style.width.slice(0, -2)) + r;
      r = parseFloat(N.style.left.slice(0, -2)) + r;
      r < window.innerWidth + window.scrollX - N.offsetWidth && (H.style.width = z + "px", N.style.left = r + "px", Ua = y.clientX);
    } else {
      xg();
    }
  }
  function ia(y) {
    if (Dc && y.la() && Es(y)) {
      let z = 1;
      y.A || (y.A = {x:0, y:0, height:0, width:0, scale:1});
      y.A.width && (z = Dc.width / y.A.width);
      y.A.scale || (y.A.scale = 1);
      var r = (parseFloat(y.la().parentElement.style.top.slice(0, -2)) - y.A.y) * z + Dc.y;
      y.la().parentElement.style.left = (parseFloat(y.la().parentElement.style.left.slice(0, -2)) - y.A.x) * z + Dc.x + "px";
      y.la().parentElement.style.top = r + "px";
      y.la().parentElement.style.transformOrigin = "left top";
      y.la().parentElement.style.transform = "scale(" + z * y.A.scale + ")";
      y.A.x = Dc.x;
      y.A.y = Dc.y;
      y.A.width = Dc.width;
      y.A.height = Dc.height;
      y.A.scale *= z;
    }
  }
  function gb(y) {
    Ia = y;
    if (ya() && da) {
      var r = 0, z = 0;
      Ia && Ia.Ea && (z = Ia.Ea.getBoundingClientRect(), r = -z.left + Ia.scrollX, z = -z.top + Ia.scrollY);
      let C = da.la();
      xa(da, y);
      N.style.left = C.parentElement.offsetLeft - r + C.parentElement.getBoundingClientRect().width - 12 + "px";
      N.style.top = C.parentElement.offsetTop - z + C.parentElement.getBoundingClientRect().height / 2 - 12 + "px";
    } else {
      yc();
    }
    y.Ea && Md ? k() : f();
    if (y.Ea) {
      if (2 == S.g) {
        z = vu();
        for (r = 0; r < z.length; r++) {
          xa(z[r], y);
        }
        z = xu();
        for (r = 0; r < z.length; r++) {
          xa(z[r], y);
        }
      } else if (3 == S.g) {
        z = vu();
        for (r = 0; r < z.length; r++) {
          xa(z[r], y);
        }
        z = wu();
        for (r = 0; r < z.length; r++) {
          xa(z[r], y);
        }
      }
      z = tu();
      for (r = 0; r < z.length; r++) {
        xa(z[r], y);
      }
      d(S.g);
    }
  }
  function xa(y, r) {
    if (y && y.la() && Es(y)) {
      var z = yo(r, y.S);
      if (-1 != z) {
        var C = hl(r, z, new il(r.scrollX, r.scrollY));
        r = {x:-C.$a + r.scrollX, y:-C.Ua + r.scrollY, width:jl(r, z), height:kl(r, z), scale:r.scale};
        C = r.scale / y.A.scale;
        z = parseFloat(y.la().parentElement.style.left.slice(0, -2));
        var J = parseFloat(y.la().parentElement.style.top.slice(0, -2));
        Ia && Ia.Bb && y.la().offsetParent && !Ia.Bb.contains(y.la().parentElement) && Ia.Bb.appendChild(y.la().parentElement);
        J = (J - y.A.y) * C + r.y;
        y.la().parentElement.style.left = (z - y.A.x) * C + r.x + "px";
        y.la().parentElement.style.top = J + "px";
        y.la().parentElement.style.transformOrigin = "left top";
        y.la().parentElement.style.transform = "scale(" + C * y.A.scale + ")";
        y.A.x = r.x;
        y.A.y = r.y;
        y.A.width = r.width;
        y.A.height = r.height;
        y.A.scale = r.scale;
      }
    }
  }
  function fd(y, r) {
    var z = [];
    for (let C = 0; C < y.length; C++) {
      if (Es(y[C])) {
        Sx(y[C], y[C].la(), vG, null, null);
        let J = y[C].Na();
        r && (J.uDocType = r);
        z.push(J);
      }
    }
    return z;
  }
  function qd(y) {
    var r = [], z = tu();
    for (let C = 0; C < z.length; C++) {
      Es(z[C]) && y && y == z[C].ta && r.push(z[C].Na());
    }
    return r;
  }
  function Ld(y) {
    for (var r = 0; r < y.length; r++) {
      if (null != y[r].type && "mathTextTool" == y[r].type) {
        continue;
      }
      let z = fe(y[r]);
      zu(z);
    }
  }
  function fe(y) {
    if (!y || null != y.type && "mathTextTool" == y.type) {
      return null;
    }
    var r = {};
    y.pageInfo && (r = JSON.parse(y.pageInfo));
    r && ("scale" in r || (r.scale = 1));
    y.pageInfo = JSON.stringify(r);
    r = new Xx(vG);
    r.Fa(y);
    return r;
  }
  function gc(y) {
    return tu().find(r => r.la() == y);
  }
  function qe(y, r) {
    var z = null;
    if (!y.la()) {
      z = y.A.scale;
      var C = y.fillColor, J = y.width * z, T = y.height * z, ba = y.left, ea = y.top, ka = G(T / z, y.Qe, y.fontSize, y.fontFamily, y.l, C, y.g, y.i, y.j);
      ka.innerHTML = y.data;
      if (y.Cb) {
        var oa = Um(y);
        ba += oa.x;
        ea += oa.y;
      }
      J = D(ba, ea, J / z, T / z);
      J.style.transformOrigin = "left top";
      J.style.transform = "scale(" + z + ")";
      J.appendChild(ka);
      J.addEventListener("click", Aa, {capture:!0, passive:!1});
      ka.addEventListener("click", Aa, {capture:!0, passive:!1});
      J.style.backgroundColor = C;
      z = ka;
      y.R = z;
    } else if (y.m) {
      z = y.A.scale;
      var bb = y.g, zb = y.i;
      oa = y.j;
      var Za = y.l;
      ka = y.fillColor;
      var Xb = y.fontSize, Uc = y.fontFamily;
      C = y.width * z;
      T = y.height * z;
      ea = y.left;
      ba = y.top;
      y.Cb && (J = Um(y), ea += J.x, ba += J.y);
      J = y.la();
      var ad = ka;
      J && (J.style.minHeight = T / z + "px", J.style.fontSize = Xb + "px", J.style.fontFamily = Uc, J.style.color = Za, J.style.backgroundColor = ad, J.style.fontWeight = bb ? "bold" : "normal", J.style.fontStyle = zb ? "italic" : "normal", J.style.textDecoration = oa ? "underline" : "none");
      J.innerHTML = y.data;
      oa = Xb = J.parentElement;
      T /= z;
      oa && (oa.style.width = C / z + "px", oa.style.height = T + "px", oa.style.top = ba + "px", oa.style.left = ea + "px");
      Xb.style.transformOrigin = "left top";
      Xb.style.transform = "scale(" + z + ")";
      Xb.style.backgroundColor = ka;
      z = J;
      y.m = !1;
    }
    z && (ka = y.la().parentElement, C = document.body, Ia && Ia.Ea && (C = Ia.Bb), C.appendChild(ka), ka.style.border = "1px solid transparent", ka.style.cursor = "", z.style.cursor = "", z.style.height = "", z.style.minHeight = "", z.style.backgroundColor = "", ka.style.backgroundColor = y.la().parentElement.style.backgroundColor, ka.style.borderRadius = "5px", z.contentEditable = "false", 0 == z.innerHTML.trim().length ? ka.remove() : (C = aa(z), 0 == C ? ka.remove() : (C = 100 > C ? 100 : C, 
    ka.clientWidth > C && (ka.style.width = C + "px")), ka.style.height = z.clientHeight + "px"), Ia ? xa(y, Ia) : ia(y), l(y, Yx(r)), Vg.observe(z), document.addEventListener("keydown", a, {capture:!0, passive:!1}));
  }
  function pc() {
    var y = tu();
    for (let r = 0; r < y.length; r++) {
      Es(y[r]) && qe(y[r], S.g);
    }
  }
  var da = null, Sb = -1, td = !1, F = null, H = null, O = null, N = null, fa = null, Ua = 0, $a = 0, ub = "20", oc = "#000000", ib = "", hc = "Arial", Kc = null, ic = null, gd = !1, Gi = -1, ai = -1, Xd = !1, Od = !1, Yd = !1, ge, Wg, Ae, Vg = new ResizeObserver(function(y) {
    let r = 0;
    Ia && Ia.Ea && (r = -Ia.Ea.getBoundingClientRect().top + Ia.scrollY);
    for (var z = 0; z < y.length; z++) {
      if (da && y[z].target == da.la()) {
        let C = da.la();
        C.parentElement.style.height = parseFloat(y[z].contentRect.height + 10) + "px";
        N.style.top = C.parentElement.offsetTop - r + C.parentElement.getBoundingClientRect().height / 2 - 12 + "px";
        break;
      }
    }
  }), Dj = null, Dc, $c = !1, Dh = "2147483635", Cg = "2147483638", sd = null, Md = !0, Ia = null;
  document.getElementById("annotate-texttool-edit-toolbar") && document.getElementById("annotate-texttool-edit-toolbar").remove();
  document.getElementById("annotate-texttool-resize-width-handle") && document.getElementById("annotate-texttool-resize-width-handle").remove();
  document.getElementById("annotate-texttool-resize-element-handle") && document.getElementById("annotate-texttool-resize-element-handle").remove();
  document.getElementById("annotate-texttool-resize-element-box") && document.getElementById("annotate-texttool-resize-element-box").remove();
  e();
  return {xi:function() {
    Bc();
    N = document.createElement("div");
    N.id = "annotate-texttool-resize-width-handle";
    N.classList.add("annotate-drag-elements");
    N.style.display = "none";
    N.style.width = "24px";
    N.style.height = "24px";
    N.style.position = "absolute";
    N.style.backgroundImage = "url(" + window.chrome.runtime.getURL("images/resize_width_handle.png") + ")";
    N.style.backgroundSize = "24px";
    N.style.zIndex = parseInt(Cg) + 2 + "";
    ik(N);
    document.body.appendChild(N);
    fa = document.createElement("div");
    fa.id = "annotate-texttool-resize-element-handle";
    fa.classList.add("annotate-drag-elements");
    fa.style.display = "none";
    fa.style.width = "24px";
    fa.style.height = "24px";
    fa.style.position = "absolute";
    fa.style.backgroundImage = "url(" + window.chrome.runtime.getURL("images/resize_element_handle.png") + ")";
    fa.style.backgroundSize = "24px";
    fa.style.zIndex = parseInt(Cg) + 2 + "";
    ik(fa);
    document.body.appendChild(fa);
    fa.addEventListener("pointerdown", Th, {capture:!0, passive:!1});
    H = document.createElement("div");
    H.id = "annotate-texttool-resize-element-box";
    H.classList.add("extension_reset_css");
    H.classList.add("annotate-drag-elements");
    H.style.border = "1px dashed #ff0000";
    H.style.display = "none";
    H.style.boxSizing = "border-box";
    H.style.position = "absolute";
    H.style.zIndex = Dh;
    H.style.cursor = "all-scroll";
    H.addEventListener("pointerdown", wh, {capture:!0, passive:!1});
    ik(N);
    document.body.appendChild(H);
  }, XC:e, YC:function() {
    Jo.Vi() && Jo.$h();
    yc();
    da = null;
    N && (N.style.display = "none", N.removeEventListener("pointerdown", X, {AN:!0, passive:!1}));
    let y = Oo(S);
    if (y) {
      let r = {arrTextElement:[]}, z = null;
      for (z of y.Fd) {
        Es(z) && r.arrTextElement.push(z.ta);
      }
      y.Ur();
      y.xb();
      y.dispatchEvent(new CustomEvent(Cp.g, {detail:r}));
    }
  }, lC:f, FD:k, ll:function(y, r) {
    let z = tu();
    1 == y ? z = vu() : 2 == y ? z = wu() : 3 == y && (z = xu());
    if (r) {
      if (!Ia || Ia.Ea) {
        for (Md = !0, y = z.length - 1; 0 <= y; y--) {
          l(z[y], !0);
        }
      }
    } else {
      for (yc(), Md = !1, y = z.length - 1; 0 <= y; y--) {
        l(z[y], !1);
      }
    }
  }, ew:function(y, r, z, C, J, T, ba, ea, ka) {
    yc();
    z = 150 > z - 20 ? 150 : z - 20;
    C = 75 > C - 20 ? 75 : C - 20;
    Dc = ba;
    let oa = 1;
    !ba || "scale" in ba ? ba && (oa = ba.scale) : ba.scale = 1;
    ba = "annotate-text " + (new Date()).getTime();
    J && (ba = J);
    J = G(C / oa, ba, ub, hc, oc, ib, Xd, Od, Yd);
    J.addEventListener("pointerdown", I, {capture:!0, passive:!1});
    ba = document.body;
    Ia && Ia.Ea && (ba = Ia.Bb);
    z = D(y, r, z / oa, C / oa);
    z.style.transformOrigin = "left top";
    z.style.transform = "scale(" + oa + ")";
    z.appendChild(J);
    ba.appendChild(z);
    da = new Xx(vG);
    da.xb();
    da.R = J;
    da.Cb = ka;
    Sb = T;
    Sx(da, J, vG, Dc, Sb);
    z.addEventListener("click", Aa, {capture:!0, passive:!1});
    J.addEventListener("click", Aa, {capture:!0, passive:!1});
    ea && J.focus();
    N && (T = y, ea = r, Ia && Ia.Ea && (ea = Ia.Ea.getBoundingClientRect(), T = y + ea.left - Ia.scrollX, ea = r + ea.top - Ia.scrollY), N.style.display = "block", N.style.left = T + z.offsetWidth * oa - 12 + "px", N.style.top = ea + z.offsetHeight * oa / 2 - 12 + "px", N.addEventListener("pointerdown", X, {capture:!0, passive:!1}));
    Vg.observe(J);
    document.addEventListener("keydown", a, {capture:!0, passive:!1});
  }, $h:Ha, Vi:ya, LG:fc, PN:function() {
    if (da && da.R) {
      var y = da.R;
      null != y && wG(da, [y]);
    }
  }, Zk:ed, Eo:function(y) {
    oc = y;
    da && (da.la().style.color = y);
  }, wh:function(y, r, z, C, J, T, ba, ea) {
    Xd = y;
    Od = r;
    Yd = z;
    oc = C;
    ib = J;
    ub = T;
    hc = ba;
    Kc = ea;
    da && (y = da.la(), y.style.fontWeight = Xd ? "bold" : "normal", y.style.fontStyle = Od ? "italic" : "normal", y.style.textDecoration = Yd ? "underline" : "none", y.style.color = oc, y.style.backgroundColor = ib, y.style.fontSize = ub + "px", y.style.fontFamily = hc);
    O && (y = [O.Na()], 0 < y.length && Px({action:Vx, ub:3, F:y}, !0), y = O.la(), y.style.fontWeight = Xd ? "bold" : "normal", y.style.fontStyle = Od ? "italic" : "normal", y.style.textDecoration = Yd ? "underline" : "none", y.style.color = oc, y.parentElement.style.backgroundColor = ib, y.style.fontSize = ub + "px", y.style.fontFamily = hc, r = parseFloat(y.parentElement.style.width.slice(0, -2)), z = aa(y), y.parentElement.style.width = r > z ? z + "px" : r + "px", y.parentElement.style.height = 
    y.clientHeight + "px", Xe(), Sx(O, y, vG, null, null), Au(O));
  }, xm:function(y) {
    Dc = y;
    if (2 == S.g) {
      y = vu();
      for (var r = 0; r < y.length; r++) {
        ia(y[r]);
      }
      y = xu();
      for (r = 0; r < y.length; r++) {
        ia(y[r]);
      }
    } else if (3 == S.g) {
      y = vu();
      for (r = 0; r < y.length; r++) {
        ia(y[r]);
      }
      y = wu();
      for (r = 0; r < y.length; r++) {
        ia(y[r]);
      }
    }
    y = tu();
    for (r = 0; r < y.length; r++) {
      ia(y[r]);
    }
  }, wm:gb, Sw:function() {
    return $c;
  }, sA:function() {
    console.log("simple text reset modified");
    $c = !1;
  }, ej:function(y, r, z) {
    Dh = y;
    Cg = r;
    ed(td);
    fa && (fa.style.zIndex = parseInt(Cg) + 2 + "");
    N && (N.style.zIndex = parseInt(Cg) + 2 + "");
    F && (F.style.zIndex = z + "");
  }, vv:function(y) {
    return y ? fd(y.Fd, y.je()) : [];
  }, bA:function(y) {
    var r = [], z = fd(vu(), 1);
    r = r.concat(z);
    z = fd(wu(), y ? 2 : 1);
    r = r.concat(z);
    z = fd(xu(), y ? 3 : 1);
    return r = r.concat(z);
  }, Dr:function(y, r) {
    let z = !r && P.l;
    for (var C = 0; C < y.length; C++) {
      if (null != y[C].type && "mathTextTool" == y[C].type) {
        continue;
      }
      let J = fe(y[C]), T = r;
      z && ("uDocType" in y[C] ? T = y[C].uDocType : T = 1);
      T ? Bu(J, T) : yu(J);
    }
  }, Sz:fe, Av:function(y, r) {
    if (!y || !r || null != r.type && "mathTextTool" == r.type) {
      return null;
    }
    let z = {};
    r.pageInfo && (z = JSON.parse(r.pageInfo));
    z && ("scale" in z || (z.scale = 1));
    r.pageInfo = JSON.stringify(z);
    y.Ad(r);
  }, DI:Ld, Br:function(y, r) {
    for (var z = 0; z < y.length; z++) {
      if (null != y[z].type && "mathTextTool" == y[z].type) {
        continue;
      }
      let C = fe(y[z]);
      yu(C, r);
    }
  }, ct:function(y, r) {
    let z = [], C = tu(r);
    for (var J = 0; J < C.length; J++) {
      if (Es(C[J]) && C[J].S == y) {
        let T = [C[J].Na()];
        b(C[J].ta, r);
        for (let ba = 0; ba < T.length; ++ba) {
          z.push(T[ba]);
        }
        J--;
      }
    }
    return z;
  }, dt:function(y, r, z, C) {
    let J = tu(C), T = [];
    for (let ba = 0; ba < J.length; ba++) {
      if (Es(J[ba]) && J[ba].S == y) {
        let ea = [J[ba].Na()];
        for (let ka = 0; ka < ea.length; ka++) {
          let oa = J[ba].A.scale, bb = ea[ka].left - J[ba].A.x, zb = ea[ka].top - J[ba].A.y;
          bb = bb / oa + 11;
          zb = zb / oa + 11;
          if (bb > r || zb > z) {
            b(J[ba].ta, C), T.push(ea[ka]), ba--;
          }
        }
      }
    }
    return T;
  }, Tz:function(y, r, z, C, J) {
    if (y) {
      let Xb = r.getContext("2d");
      for (var T = 0; T < y.length; T++) {
        if (null == y[T].type || "mathTextTool" != y[T].type) {
          var ba = y[T], ea = -1;
          "pageIndex" in ba && (ea = ba.pageIndex);
          var ka = !0;
          C && Ia && z != yo(Ia, ea) && (ka = !1);
          if (ka) {
            let Uc;
            ba.pageInfo && (Uc = JSON.parse(ba.pageInfo));
            ea = "transparent";
            ba.fillColor && (ea = ba.fillColor);
            "scale" in Uc || (Uc.scale = 1);
            if (Uc) {
              ka = Uc.scale;
              var oa = ba.left - Uc.x, bb = ba.top - Uc.y;
              oa = oa / ka + 11;
              bb = bb / ka + 11;
              var zb = J.width / (Uc.width / ka);
              Xb.save();
              Xb.scale(zb, zb);
              Xb.translate(oa, bb);
              "transparent" != ea && (Xb.fillStyle = ea, Xb.fillRect(-10, -10, ba.width + 20, ba.height + 20));
              ea = ba;
              var Za = ea.bBold;
              let ad = ea.bItalic, xc = ea.bUnderline, tn = ea.fontColor;
              oa = ea.fillColor;
              let mp = ea.fontSize, np = ea.fontFamily;
              bb = ea.width * ka;
              bb = 150 > bb - 20 ? 150 : bb - 20;
              zb = ea.height * ka;
              zb = 75 > zb - 20 ? 75 : zb - 20;
              let Tk = ea.left, $f = ea.top;
              Za = G(zb / ka, "", mp, np, tn, oa, Za, ad, xc);
              Za.innerHTML = ea.data;
              ea = D(Tk, $f, bb / ka, zb / ka);
              ea.style.transformOrigin = "left top";
              ea.style.transform = "scale(" + ka + ")";
              ea.appendChild(Za);
              ea.style.border = "1px solid transparent";
              ea.style.cursor = "";
              Za.style.cursor = "";
              Za.style.height = "";
              Za.style.minHeight = "";
              Za.style.backgroundColor = "";
              ea.style.backgroundColor = oa;
              ea.style.borderRadius = "5px";
              Za.contentEditable = "false";
              0 == Za.innerHTML.trim().length ? ea.remove() : (ka = aa(Za), 0 == ka ? ea.remove() : (ka = 100 > ka ? 100 : ka, ea.clientWidth > ka && (ea.style.width = ka + "px")), ea.style.height = Za.clientHeight + "px");
              Dj || (Dj = new hj());
              fj(Dj, ea, ba.width, r);
              Xb.restore();
            }
          }
        }
      }
    }
  }, wq:function(y) {
    var r = td;
    yc();
    if (y.action == Ux) {
      var z = qd(y.F[0].nId);
      0 < z.length && Zx({action:$x, ub:3, F:z});
      c(y.F[0].nId);
    } else {
      y.action == Qx ? (Zx({action:ay, ub:3, F:[{nId:y.F[0].nId}]}), Ld(y.F), pc()) : y.action == Vx && (z = qd(y.F[0].nId), 0 < z.length && Zx({action:by, ub:3, F:z}), c(y.F[0].nId), Ld(y.F), pc());
    }
    ed(r);
    Ia && Ia.Ea && gb(Ia);
  }, ls:function(y) {
    var r = td;
    yc();
    if (y.action == ay) {
      var z = qd(y.F[0].nId);
      0 < z.length && Px({action:Qx, ub:3, F:z}, !1);
      c(y.F[0].nId);
    } else {
      y.action == $x ? (Px({action:Ux, ub:3, F:[{nId:y.F[0].nId}]}, !1), Ld(y.F), pc()) : y.action == by && (z = qd(y.F[0].nId), 0 < z.length && Px({action:Vx, ub:3, F:z}, !1), c(y.F[0].nId), Ld(y.F), pc());
    }
    ed(r);
    Ia && Ia.Ea && gb(Ia);
  }, oB:function(y) {
    var r = y.pageX - window.scrollX, z = y.pageY - window.scrollY, C = tu();
    for (let T = 0; T < C.length; T++) {
      let ba = C[T].la();
      if (Es(C[T]) && null != ba) {
        var J = ba.getBoundingClientRect();
        let ea = J.x, ka = J.y, oa = J.x + J.width;
        J = J.y + J.height;
        if (r <= ea && r >= oa || r <= oa && r >= ea) {
          if (z <= ka && z >= J || z <= J && z >= ka) {
            if (null == da && y.target && y.target.tagName && ("A" == y.target.tagName || "a" == y.target.tagName)) {
              r = y.target;
              r.href && (y.preventDefault(), y.stopPropagation(), window.open(r.href, "_blank"));
              break;
            }
            oc = bh(ba.style.color);
            ib = "" == ba.style.backgroundColor ? "" : bh(ba.style.backgroundColor);
            Xd = "bold" == ba.style.fontWeight;
            Od = "italic" == ba.style.fontStyle;
            Yd = "underline" == ba.style.textDecoration;
            ub = parseInt(ba.style.fontSize.slice(0, -2)) + "";
            hc = ba.style.fontFamily;
            Kc && Kc(Xd, Od, Yd, oc, ib, ub, hc, !1);
            return !0;
          }
        }
      }
    }
    return !1;
  }, dD:function(y) {
    var r = y.pageX, z = y.pageY, C = null, J = tu();
    for (let ba = 0; ba < J.length; ba++) {
      if (Es(J[ba])) {
        var T = J[ba].la().getBoundingClientRect();
        let ea = T.x, ka = T.y, oa = T.x + T.width;
        T = T.y + T.height;
        if (r <= ea && r >= oa || r <= oa && r >= ea) {
          if (z <= ka && z >= T || z <= T && z >= ka) {
            C = J[ba];
            break;
          }
        }
      }
    }
    if (C) {
      r = {};
      r.target = C.la();
      r.pageX = y.pageX;
      r.pageY = y.pageY;
      r.preventDefault = function() {
      };
      if (da) {
        C = C.la();
        for (-1 != C.className.indexOf("annotate-text-container") && (C = C.children[0]); null != C && -1 == C.className.indexOf("annotate-text ");) {
          C = C.parentElement;
        }
        if (C != da.la()) {
          Ha();
          return;
        }
      }
      y.preventDefault();
      gd = !1;
      Cb(r, !0);
      return !0;
    }
    return !1;
  }, Xq:function(y, r) {
    let z, C, J, T;
    return null == O ? !1 : H && (J = parseInt(getComputedStyle(H).width), T = parseInt(getComputedStyle(H).height), C = parseInt(getComputedStyle(H).top), z = parseInt(getComputedStyle(H).left), y > z && y < z + J && r > C && r < C + T) || N && (J = parseInt(getComputedStyle(N).width), T = parseInt(getComputedStyle(N).height), C = parseInt(getComputedStyle(N).top), z = parseInt(getComputedStyle(N).left), y > z && y < z + J && r > C && r < C + T) || fa && (J = parseInt(getComputedStyle(fa).width), 
    T = parseInt(getComputedStyle(fa).height), C = parseInt(getComputedStyle(fa).top), z = parseInt(getComputedStyle(fa).left), y > z && y < z + J && r > C && r < C + T) || F && (J = parseInt(getComputedStyle(F).width), T = parseInt(getComputedStyle(F).height), C = parseInt(getComputedStyle(F).top), z = parseInt(getComputedStyle(F).left), y > z && y < z + J && r > C && r < C + T) ? !0 : !1;
  }, $M:function(y, r) {
    ic = y;
    Kc = r;
  }, dl:function() {
    O = null;
    Ue(null);
    yc();
    let y = tu();
    for (let r = y.length - 1; 0 <= r; r--) {
      if (Es(y[r]) && y[r].Cb) {
        let z = null;
        y[r].la() && (z = y[r].la().parentElement);
        let C = Um(y[r]), J = y[r].top + C.y;
        z.style.left = y[r].left + C.x + "px";
        z.style.top = J + "px";
      }
    }
  }, uf:qe, Bn:Q};
}(), xG = Jo;
var vG = 0, Tx = 1;
function Es(a) {
  return "textTool" == a.type ? !0 : !1;
}
function yr(a) {
  a.R && a.R.parentElement && (a.R.parentElement.remove(), a.R = null);
}
function Fs(a) {
  return "mathTextTool" == a.type ? !0 : !1;
}
function Sx(a, b, c, d, e) {
  a.R = b;
  yG(a, c);
  a.R && a.R.parentElement && (Es(a) ? (b = a.R, null != b && wG(a, [b]), a.data = a.R.innerHTML) : Fs(a) && (a.data = a.Rk.getData()), a.Qe = a.R.className, a.l = bh(a.R.style.color), a.fillColor = "" == a.R.parentElement.style.backgroundColor ? "" : bh(a.R.parentElement.style.backgroundColor), a.g = "bold" == a.R.style.fontWeight, a.i = "italic" == a.R.style.fontStyle, a.j = "underline" == a.R.style.textDecoration, a.fontSize = parseInt(a.R.style.fontSize), a.fontFamily = a.R.style.fontFamily);
  Wx(a);
  d && (a.A = Object.assign({}, d));
  if (0 == e || e) {
    a.S = e;
  }
}
function Wx(a) {
  if (a.R && a.R.parentElement) {
    Es(a) ? a.data = a.R.innerHTML : Fs(a) && (a.data = a.Rk.getData());
    a.top = parseFloat(a.R.parentElement.style.top);
    a.left = parseFloat(a.R.parentElement.style.left);
    if (a.Cb) {
      let b = Ek(a.left, a.top, a.Cb);
      a.left = b.x;
      a.top = b.y;
    }
    a.height = parseFloat(a.R.parentElement.style.height);
    zG(a) == vG ? a.width = parseFloat(a.R.parentElement.style.width) : zG(a) == Tx && (a.width = a.R.parentElement.offsetWidth);
    a.fontSize = parseInt(a.R.style.fontSize);
  }
}
function yG(a, b) {
  b == vG ? a.type = "textTool" : b == Tx && (a.type = "mathTextTool");
}
function AG(a) {
  let b = {};
  a.replace(/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/gi, function(c) {
    var d = c;
    "http://" != d.substr(0, 7) && "https://" != d.substr(0, 8) && (d = "https://" + c);
    d = '<a href="' + d + '">' + c + "</a>";
    return b[c] = d;
  });
  return b;
}
function wG(a, b) {
  for (var c = 0, d = b.length; c < d; c++) {
    if (b[c].children && 0 !== b[c].children.length) {
      var e = b[c];
      wG(a, e.children);
      if (e.children && 0 < e.children.length) {
        var f = document.createElement(e.tagName);
        f.innerHTML = e.innerHTML;
        for (var k = f.children.length - 1; 0 <= k; k--) {
          f.removeChild(f.children[k]);
        }
        f = AG(f.innerText.trim());
        if ((k = Object.keys(f)) && 0 < k.length) {
          var l = e.innerHTML;
          for (var n = 0; n < k.length; n++) {
            l = l.replace(k[n], f[k[n]]);
          }
          e.innerHTML = l;
        }
      }
    } else {
      if (e = b[c], "A" == e.tagName || "a" == e.tagName) {
        f = e.innerText.trim();
        k = AG(f);
        l = Object.keys(k);
        f = e.innerHTML;
        for (n = 0; n < l.length; n++) {
          f = f.replace(l[n], k[l[n]]);
        }
        k = document.createElement("span");
        k.innerHTML = f;
        e.parentNode && e.parentNode.replaceChild(k, e);
      } else {
        if (f = AG(e.innerText.trim()), (k = Object.keys(f)) && 0 < k.length) {
          l = e.innerHTML;
          for (n = 0; n < k.length; n++) {
            l = l.replace(k[n], f[k[n]]);
          }
          e.innerHTML = l;
        }
      }
    }
  }
}
function zG(a) {
  let b = -1;
  "textTool" == a.type ? b = vG : "mathTextTool" == a.type && (b = Tx);
  return b;
}
class Xx extends Wm {
  constructor(a) {
    super();
    this.A = {x:0, y:0, height:0, width:0, scale:1};
    this.R = null;
    this.S = -1;
    this.data = null;
    this.fillColor = this.l = this.Qe = this.type = "";
    this.j = this.i = this.g = !1;
    this.fontSize = 0;
    this.fontFamily = "";
    this.width = this.height = this.left = this.top = 0;
    yG(this, a);
    this.Rk = null;
    this.m = !1;
  }
  Fa(a) {
    super.Fa(a);
    "data" in a && (this.data = a.data);
    "type" in a && (this.type = a.type);
    "class" in a && (this.Qe = a["class"]);
    "fontColor" in a && (this.l = a.fontColor);
    "fillColor" in a && (this.fillColor = a.fillColor);
    "bBold" in a && (this.g = a.bBold);
    "bItalic" in a && (this.i = a.bItalic);
    "bUnderline" in a && (this.j = a.bUnderline);
    "fontSize" in a && (this.fontSize = a.fontSize);
    "fontFamily" in a && (this.fontFamily = a.fontFamily);
    "top" in a && (this.top = a.top);
    "left" in a && (this.left = a.left);
    "height" in a && (this.height = a.height);
    "width" in a && (this.width = a.width);
    "pageInfo" in a && (this.A = JSON.parse(a.pageInfo));
    "pageIndex" in a && (this.S = parseInt(a.pageIndex));
    "ele" in a && (this.R = a.ele);
  }
  Ad(a) {
    super.Ad(a);
    "data" in a && (this.data = a.data);
    "fontColor" in a && (this.l = a.fontColor);
    "fillColor" in a && (this.fillColor = a.fillColor);
    "bBold" in a && (this.g = a.bBold);
    "bItalic" in a && (this.i = a.bItalic);
    "bUnderline" in a && (this.j = a.bUnderline);
    "fontSize" in a && (this.fontSize = a.fontSize);
    "fontFamily" in a && (this.fontFamily = a.fontFamily);
    "top" in a && (this.top = a.top);
    "left" in a && (this.left = a.left);
    "height" in a && (this.height = a.height);
    "width" in a && (this.width = a.width);
    "pageInfo" in a && (this.A = JSON.parse(a.pageInfo));
    "pageIndex" in a && (this.S = parseInt(a.pageIndex));
  }
  Na() {
    var a = super.Na();
    this.Fb(a);
    return a;
  }
  Fb(a) {
    a.data = this.data;
    a.type = this.type;
    a["class"] = this.Qe;
    a.fontColor = this.l;
    a.fillColor = this.fillColor;
    a.bBold = this.g;
    a.bItalic = this.i;
    a.bUnderline = this.j;
    a.fontSize = this.fontSize;
    a.fontFamily = this.fontFamily;
    a.top = this.top;
    a.left = this.left;
    a.height = this.height;
    a.width = this.width;
    a.pageInfo = JSON.stringify(this.A);
    a.pageIndex = this.S;
  }
  Ul(a) {
    a.type = this.type;
    a.fontColor = this.l;
    a.fillColor = this.fillColor;
    a.bBold = this.g;
    a.bItalic = this.i;
    a.bUnderline = this.j;
    a.fontSize = this.fontSize;
    a.fontFamily = this.fontFamily;
  }
  la() {
    return this.R;
  }
}
;function BG(a, b, c) {
  let d = document.createElement("div");
  d.id = a;
  d.className = b + " extension_reset_css ";
  d.style.display = "none";
  d.style.width = c + "px";
  d.style.height = c + "px";
  d.style.top = "0px";
  d.style.left = "0px";
  d.style.borderRadius = c / 2 + "px";
  return d;
}
function CG(a, b) {
  a.g && (a.g.style.display = b ? "block" : "none");
}
function DG(a, b, c) {
  a && (a.style.transform = "translate(" + b + "px, " + c + "px)");
}
function EG(a) {
  -1 != a.o && (clearInterval(a.o), a.o = -1);
}
function kH(a, b) {
  if (!a.i) {
    a.l = [];
    for (var c = 0; 5 > c; c++) {
      let d = BG("", "AnnotateRemoteLaserTrail", 32 - 4 * c);
      a.l.push(d);
    }
    for (c = 4; 0 <= c; c--) {
      document.body.appendChild(a.l[c]);
    }
    c = BG("AnnotateRemoteLaserElement", "", 32);
    document.body.appendChild(c);
    a.i = c;
  }
  0 >= a.m.length && (a.j = []);
  a.m.push(...b);
  b = a.m.length;
  0 < b && (EG(a), b = Math.ceil(100 / b), lH(a), a.s = setInterval(a.v.bind(a), b));
}
function lH(a) {
  -1 != a.s && (clearInterval(a.s), a.s = -1);
}
function mH(a) {
  var b = a.j.length;
  for (let c = 0; c < b; c++) {
    let d = a.j[c];
    DG(a.l[c], d.eX - 16, d.eY - 16);
    a.l[c].style.display = "block";
  }
  for (; 5 > b; b++) {
    a.l[b].style.display = "none";
  }
}
class nH {
  constructor() {
    this.i = this.g = null;
    this.m = [];
    this.s = -1;
    this.l = [];
    this.j = [];
    this.o = -1;
  }
  v() {
    if (0 >= this.m.length) {
      EG(this), this.o = setInterval(this.u.bind(this), 16), lH(this);
    } else {
      var a = this.m.shift();
      if (a) {
        switch(a.type) {
          case 1:
          case 0:
            DG(this.i, a.eX - 16, a.eY - 16);
            this.i && (this.i.style.display = "block");
            mH(this);
            5 <= this.j.length && this.j.pop();
            this.j.splice(0, 0, a);
            break;
          case 2:
            mH(this), this.i && (this.i.style.display = "none");
        }
      }
    }
  }
  u() {
    0 >= this.j.length ? EG(this) : (this.j.pop(), mH(this));
  }
  U() {
    this.m = [];
    lH(this);
    this.g && (this.g.remove(), this.g = null);
    this.j = [];
    EG(this);
    var a = this.l.length;
    for (--a; 0 <= a; a--) {
      this.l[a].remove();
    }
    this.l = [];
    this.i && (this.i.remove(), this.i = null);
  }
}
;function cp() {
  var a = bp;
  a.g && (a.g.nt(!1), a.g = null);
  document.removeEventListener("keydown", a.Gb, a.O);
  a.va && oH(a);
}
function pH(a, b, c) {
  var d = bp;
  d.oi = a;
  d.v = b;
  d.eg = c;
  d.i && (d.i.style.zIndex = d.oi);
  d.j && (d.j.style.zIndex = parseInt(d.v) + 2 + "");
  d.l && (d.l.style.zIndex = parseInt(d.v) + 2 + "");
  d.m && (d.m.style.zIndex = parseInt(d.v) + 2 + "");
  d.s && (d.s.style.zIndex = parseInt(d.v) + 2 + "");
  d.o && (d.o.style.zIndex = parseInt(d.v) + 2 + "");
  d.va && (d.va.style.zIndex = d.eg);
}
function qH(a) {
  if (a.i && a.g) {
    var b = a.g.ya(), c = 0;
    a.i.style.display = "block";
    a.i.style.border = "1px dashed #ff0000";
    a.i.style.zIndex = parseInt(a.v) + 1 + "";
    a.i.style.cursor = "all-scroll";
    a.i.style.top = b.top - (15 + a.g.Dg() / 2 * a.g.l) + "px";
    a.i.style.left = b.left - (15 + a.g.Dg() / 2 * a.g.l) + "px";
    a.i.style.height = b.height + (30 + a.g.Dg() * a.g.l) + "px";
    a.i.style.width = b.width + (30 + a.g.Dg() * a.g.l) + "px";
    a.i.style.transformOrigin = null != b.at && null != b.bt ? "" + (b.at + (15 + a.g.Dg() / 2 * a.g.l)) + "px " + (b.bt + (15 + a.g.Dg() / 2 * a.g.l)) + "px" : "0px 0px";
    null != b.Hz ? (a.i.style.transform = "rotate(" + b.Hz + "deg)", c = b.Hz) : a.i.style.transform = "rotate(0deg)";
    null == document.getElementById("annotate-selection-resize-element-box") && document.body.appendChild(a.i);
    null == document.getElementById("annotate-selection-resize-width-handle") && document.body.appendChild(a.j);
    null == document.getElementById("annotate-selection-resize-Height-handle") && document.body.appendChild(a.l);
    null == document.getElementById("annotate-selection-resize-element-handle") && document.body.appendChild(a.m);
    null == document.getElementById("annotate-selection-edit-toolbar") && document.body.appendChild(a.va);
    b = a.i.getBoundingClientRect();
    b.x += window.scrollX;
    b.y += window.scrollY;
    c = Math.round(c);
    "block" == document.getElementById("annotate-selection-edit").style.display && (a.va.style.width = "100px");
    a.va.style.display = "block";
    if (b.y - 10 - a.va.offsetHeight >= window.scrollY && 0 <= c) {
      if (0 == c || 90 == c) {
        var d = b.y - a.va.offsetHeight - 10;
        var e = b.x + b.width / 2 - a.va.offsetWidth / 2;
      } else {
        d = b.y - a.va.offsetHeight - 10, e = b.x;
      }
    } else {
      b.y + b.height + 10 + a.va.offsetHeight <= window.scrollY + window.innerHeight ? (d = b.y + b.height + 10, 0 > c ? e = b.x : e = 0 != c && 90 != c ? b.x + b.width - a.va.offsetWidth : b.x + b.width / 2 - a.va.offsetWidth / 2) : b.x >= window.scrollX ? (d = b.y - a.va.offsetHeight - 10, e = b.x + b.width - a.va.offsetWidth) : b.x + b.width + 15 + a.va.offsetWidth <= window.scrollX + window.innerWidth ? (d = b.y - a.va.offsetHeight - 10, e = b.x + b.width - a.va.offsetWidth) : (d = b.y + 25, 
      e = b.x + 25);
    }
    a.va.style.top = d + "px";
    a.va.style.left = 0 > e ? "0px" : e + "px";
    a.j.style.display = "block";
    a.j.style.left = Math.floor(a.i.offsetLeft + a.i.offsetWidth - 12) + "px";
    a.j.style.top = Math.floor(a.i.offsetTop + a.i.offsetHeight / 2 - 12) + "px";
    a.j.addEventListener("pointerdown", a.ya, a.O);
    a.l.style.display = "block";
    a.l.style.top = Math.floor(a.i.offsetTop + a.i.offsetHeight - 12) + "px";
    a.l.style.left = Math.floor(a.i.offsetLeft + a.i.offsetWidth / 2 - 12) + "px";
    a.l.addEventListener("pointerdown", a.pa, a.O);
    a.m.style.display = "block";
    a.m.style.left = Math.floor(a.i.offsetLeft + a.i.offsetWidth - 12) + "px";
    a.m.style.top = Math.floor(a.i.offsetTop + a.i.offsetHeight - 12) + "px";
    a.s.style.display = "none";
    e = c = 0;
    a.g.o && a.g.o.Ea && (e = a.g.o.Ea.getBoundingClientRect(), c = e.left, e = e.top);
    if ("line" == a.g.cb()) {
      a.j.style.display = "none";
      a.l.style.display = "none";
      a.m.style.display = "none";
      b = a.g.I.x * a.g.l + a.g.m.x;
      d = a.g.I.y * a.g.l + a.g.m.y;
      var f = Um(a.g);
      b += f.x;
      d += f.y;
      a.s.style.display = "block";
      a.s.style.left = b + c - 12 + "px";
      a.s.style.top = d + e - 12 + "px";
    }
    a.s.addEventListener("pointerdown", a.ia, a.O);
    a.o.style.display = "none";
    "line" == a.g.cb() && (b = a.g.L.x * a.g.l + a.g.m.x, d = a.g.L.y * a.g.l + a.g.m.y, f = Um(a.g), b += f.x, d += f.y, a.o.style.display = "block", a.o.style.left = b + c - 12 + "px", a.o.style.top = d + e - 12 + "px");
    a.o.addEventListener("pointerdown", a.ea, a.O);
  }
}
function rH(a) {
  var b = bp, c = Ao.g;
  Pz && Pz.Tn(null);
  b.va || (b.va = hk({parent:document.body, id:"annotate-selection-edit-toolbar", style:{position:"absolute", backgroundColor:"rgb(255,255,255)", zIndex:b.eg, padding:"4px", border:"1px solid #c0c0c0", display:"none", fontSize:0, fontWeight:"normal", "box-sizing":"border-box", width:"100px"}, buttons:[{id:"annotate-selection-edit", title:"Edit", className:"extension_icon extension_icon-edit", style:{height:"24px", width:"24px", "float":"left", boxSizing:"border-box", position:"relative", color:"#000000"}, 
  Qa:b.Th}, {id:"annotate-selection-edit-sep", style:{height:"24px", width:"1px", "float":"left", backgroundColor:"#c0c0c0", marginLeft:"4px", boxSizing:"border-box"}}, {id:"annotate-selection-delete", title:"Delete", className:"extension_icon extension_icon-delete", style:{height:"24px", width:"24px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", color:"#000000"}, Qa:b.Jb}, {id:"annotate-selection-sep", style:{height:"24px", width:"1px", "float":"left", backgroundColor:"#c0c0c0", 
  marginLeft:"4px", boxSizing:"border-box", color:"#000000"}}, {id:"annotate-selection-close", title:"Close", className:"extension_icon extension_icon-close", style:{height:"24px", width:"24px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", color:"#000000"}, Qa:b.Wi}]}), b.j = document.createElement("div"), b.j.id = "annotate-selection-resize-width-handle", b.j.classList.add("extension_reset_css"), b.j.classList.add("annotate-drag-elements"), b.j.style.display = "none", 
  b.j.style.width = "24px", b.j.style.height = "24px", b.j.style.position = "absolute", b.j.style.backgroundImage = "url(" + window.chrome.runtime.getURL("images/resize_width_handle.png") + ")", b.j.style.backgroundSize = "24px", b.j.style.zIndex = parseInt(b.v) + 2 + "", ik(b.j), document.body.appendChild(b.j), b.l = document.createElement("div"), b.l.id = "annotate-selection-resize-Height-handle", b.l.classList.add("extension_reset_css"), b.l.classList.add("annotate-drag-elements"), b.l.style.display = 
  "none", b.l.style.width = "24px", b.l.style.height = "24px", b.l.style.position = "absolute", b.l.style.backgroundImage = "url(" + window.chrome.runtime.getURL("images/resize_width_handle.png") + ")", b.l.style.backgroundSize = "24px", b.l.style.zIndex = parseInt(b.v) + 2 + "", ik(b.l), document.body.appendChild(b.l), b.m = document.createElement("div"), b.m.id = "annotate-selection-resize-element-handle", b.m.classList.add("extension_reset_css"), b.m.classList.add("annotate-drag-elements"), b.m.style.display = 
  "none", b.m.style.width = "24px", b.m.style.height = "24px", b.m.style.position = "absolute", b.m.style.backgroundImage = "url(" + window.chrome.runtime.getURL("images/resize_element_handle.png") + ")", b.m.style.backgroundSize = "24px", b.m.style.zIndex = parseInt(b.v) + 2 + "", ik(b.m), document.body.appendChild(b.m), b.m.addEventListener("pointerdown", b.gf, b.O), b.i = document.createElement("div"), b.i.id = "annotate-selection-resize-element-box", b.i.classList.add("extension_reset_css"), 
  b.i.classList.add("annotate-drag-elements"), b.i.style.border = "1px dashed #ff0000", b.i.style.display = "none", b.i.style.boxSizing = "border-box", b.i.style.position = "absolute", b.i.style.zIndex = b.oi, b.i.style.cursor = "all-scroll", b.i.addEventListener("pointerdown", b.ze, b.O), ik(b.i), document.body.appendChild(b.i), b.s = document.createElement("div"), b.s.id = "annotate-selection-line-start-control-handle", b.s.classList.add("extension_reset_css"), b.s.classList.add("annotate-drag-elements"), 
  b.s.style.display = "none", b.s.style.width = "24px", b.s.style.height = "24px", b.s.style.position = "absolute", b.s.style.backgroundImage = "url(" + window.chrome.runtime.getURL("images/resize_width_handle.png") + ")", b.s.style.backgroundSize = "24px", b.s.style.zIndex = parseInt(b.v) + 2 + "", ik(b.s), document.body.appendChild(b.s), b.o = document.createElement("div"), b.o.id = "annotate-selection-line-end-control-handle", b.o.classList.add("extension_reset_css"), b.o.classList.add("annotate-drag-elements"), 
  b.o.style.display = "none", b.o.style.width = "24px", b.o.style.height = "24px", b.o.style.position = "absolute", b.o.style.backgroundImage = "url(" + window.chrome.runtime.getURL("images/resize_width_handle.png") + ")", b.o.style.backgroundSize = "24px", b.o.style.zIndex = parseInt(b.v) + 2 + "", ik(b.o), document.body.appendChild(b.o));
  b.g && b.g.nt(!1);
  b.g = c;
  b.g.nt(!0);
  c = document.getElementById("annotate-selection-edit-toolbar");
  let d = document.getElementById("annotate-selection-edit"), e = document.getElementById("annotate-selection-edit-sep");
  c && d && (a ? (d.style.display = "none", c.style.width = "75px") : d.style.display = "block");
  e && (e.style.display = a ? "none" : "block");
  qH(b);
  document.addEventListener("keydown", b.Gb, b.O);
}
function oH(a) {
  a.i && (a.i.style.display = "none");
  a.j && (a.j.style.display = "none", a.j.removeEventListener("pointerdown", a.ya, {capture:!0}));
  a.l && (a.l.style.display = "none", a.l.removeEventListener("pointerdown", a.pa, {capture:!0}));
  a.s && (a.s.style.display = "none", a.s.removeEventListener("pointerdown", a.ia, {capture:!0}));
  a.o && (a.o.style.display = "none", a.o.removeEventListener("pointerdown", a.ea, {capture:!0}));
  a.m && (a.m.style.display = "none");
  a.va && (a.va.style.display = "none");
}
function sH() {
  var a = bp;
  a.i && "block" == a.i.style.display && null != a.g && qH(a);
}
class tH {
  constructor(a, b) {
    this.M = Ao.B;
    this.i = null;
    this.oi = "2147483635";
    this.v = "2147483638";
    this.eg = "2147483641";
    this.m = this.l = this.j = null;
    this.Wb = this.lb = this.Ib = this.Eb = this.lc = this.zc = 0;
    this.minHeight = this.minWidth = 20;
    this.Cf = this.u = !1;
    this.ld = this.ic = 0;
    this.va = null;
    this.ib = !1;
    this.Db = null;
    this.O = {capture:!0, passive:!1};
    this.g = null;
    this.gf = this.gf.bind(this);
    this.C = this.C.bind(this);
    this.Va = this.Va.bind(this);
    this.ze = this.ze.bind(this);
    this.B = this.B.bind(this);
    this.Ha = this.Ha.bind(this);
    this.ya = this.ya.bind(this);
    this.G = this.G.bind(this);
    this.Pe = this.Pe.bind(this);
    this.pa = this.pa.bind(this);
    this.J = this.J.bind(this);
    this.ed = this.ed.bind(this);
    this.ia = this.ia.bind(this);
    this.Lc = this.Lc.bind(this);
    this.ba = this.ba.bind(this);
    this.ea = this.ea.bind(this);
    this.Dd = this.Dd.bind(this);
    this.N = this.N.bind(this);
    this.Gb = this.Gb.bind(this);
    this.Jb = this.Jb.bind(this);
    this.Th = this.Th.bind(this);
    this.Wi = this.Wi.bind(this);
    this.pf = this.pf.bind(this);
    this.Bj = a;
    this.qm = b;
  }
  Xq(a, b) {
    let c, d, e, f;
    return null == this.g ? !1 : this.i && (e = parseInt(getComputedStyle(this.i).width), f = parseInt(getComputedStyle(this.i).height), d = parseInt(getComputedStyle(this.i).top), c = parseInt(getComputedStyle(this.i).left), a > c && a < c + e && b > d && b < d + f) || this.j && (e = parseInt(getComputedStyle(this.j).width), f = parseInt(getComputedStyle(this.j).height), d = parseInt(getComputedStyle(this.j).top), c = parseInt(getComputedStyle(this.j).left), a > c && a < c + e && b > d && b < d + 
    f) || this.l && (e = parseInt(getComputedStyle(this.l).width), f = parseInt(getComputedStyle(this.l).height), d = parseInt(getComputedStyle(this.l).top), c = parseInt(getComputedStyle(this.l).left), a > c && a < c + e && b > d && b < d + f) || this.m && (e = parseInt(getComputedStyle(this.m).width), f = parseInt(getComputedStyle(this.m).height), d = parseInt(getComputedStyle(this.m).top), c = parseInt(getComputedStyle(this.m).left), a > c && a < c + e && b > d && b < d + f) || this.va && (e = 
    parseInt(getComputedStyle(this.va).width), f = parseInt(getComputedStyle(this.va).height), d = parseInt(getComputedStyle(this.va).top), c = parseInt(getComputedStyle(this.va).left), a > c && a < c + e && b > d && b < d + f) ? !0 : !1;
  }
  Gb(a) {
    "Delete" == a.key && this.Jb(a);
  }
  Th() {
    Ql.Ja() && to();
    let a = document.getElementById("annotate-selection-edit"), b = document.getElementById("annotate-selection-edit-sep");
    a && (a.style.display = "none", this.va.style.width = parseInt(this.va.style.width) - 24 + "px");
    b && (b.style.display = "none", this.va.style.width = parseInt(this.va.style.width) - 5 + "px");
    qH(this);
    this.Db && this.Db();
  }
  Jb(a) {
    if (this.g) {
      Ql.Ja() && to();
      var b = this.g.cb();
      Px({action:Qx, ub:"rectangle" == b || "ellipse" == b ? 5 : "line" == b ? 6 : void 0, F:[this.g]}, !0);
      this.Bj(this.g);
      this.g = null;
      oH(this);
      a.stopPropagation && a.stopPropagation();
      a.preventDefault && a.preventDefault();
    }
  }
  Wi() {
    oH(this);
    this.qm();
  }
  dl() {
    this.i && (this.Cf && this.B(), this.g && qH(this));
  }
  gf(a) {
    window.addEventListener("touchmove", this.Dj, this.O);
    window.addEventListener("pointermove", this.Va, this.O);
    window.addEventListener("pointerup", this.C, this.O);
    window.addEventListener("pointercancel", this.C, this.O);
    document.addEventListener("pointerup", this.C, this.O);
    this.Eb = a.clientX;
    this.Ib = a.clientY;
    this.u = !0;
    var b = this.g.ya();
    this.lc = b.width;
    this.zc = b.height;
    this.i.style.display = "none";
    this.m.style.display = "none";
    this.j.style.display = "none";
    this.l.style.display = "none";
    this.va.style.display = "none";
    a.stopPropagation();
    a.preventDefault();
  }
  C() {
    this.u = !1;
    window.removeEventListener("touchmove", this.Dj, this.O);
    window.removeEventListener("pointermove", this.Va, this.O);
    window.removeEventListener("pointerup", this.C, this.O);
    window.removeEventListener("pointercancel", this.C, this.O);
    document.removeEventListener("pointerup", this.C, this.O);
    qH(this);
    this.g && Ct(this.g);
  }
  Va(a) {
    if (kh(a)) {
      a.preventDefault();
      var b = a.clientX - this.Eb, c = a.clientY - this.Ib;
      a = Math.max((this.lc + b) / this.lc, (this.zc + c) / this.zc);
      b = this.lc * a - this.lc;
      c = this.zc * a - this.zc;
      a = this.lc + b;
      var d = this.zc + c;
      b = parseFloat(this.j.style.left.slice(0, -2)) + b;
      c = parseFloat(this.j.style.top.slice(0, -2)) + c;
      a >= this.minWidth && b < window.innerWidth + window.scrollX - this.j.offsetWidth && d >= this.minHeight && c < window.innerHeight + window.scrollY - this.l.offsetHeight && (Ql.Ja() && to(), this.g.Dd(this.M, a, d));
    } else {
      this.C();
    }
  }
  ze(a) {
    null != this.g && (window.addEventListener("touchmove", this.Dj, this.O), window.addEventListener("pointermove", this.Ha, this.O), window.addEventListener("pointerup", this.B, this.O), window.addEventListener("pointercancel", this.B, this.O), document.addEventListener("pointerup", this.B, this.O), this.Xi = parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-left")), this.Qk = parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-top")), this.Eb = a.clientX, 
    this.Ib = a.clientY, this.Cf = this.u = !0);
    this.j.style.display = "none";
    this.j.removeEventListener("pointerdown", this.ya, this.O);
    this.l && (this.l.style.display = "none", this.l.removeEventListener("pointerdown", this.pa, this.O));
    this.s && (this.s.style.display = "none", this.s.removeEventListener("pointerdown", this.ia, {capture:!0}));
    this.o && (this.o.style.display = "none", this.o.removeEventListener("pointerdown", this.ea, {capture:!0}));
    this.m.style.display = "none";
    this.va.style.display = "none";
    this.i.style.border = "0px";
    a.preventDefault();
  }
  B(a) {
    null != this.g && (a && (a.preventDefault(), this.lb = a.clientX, this.Wb = a.clientY, a.stopPropagation()), window.removeEventListener("touchmove", this.Dj, this.O), window.removeEventListener("pointermove", this.Ha, this.O), window.removeEventListener("pointerup", this.B, this.O), window.removeEventListener("pointercancel", this.B, this.O), document.removeEventListener("pointerup", this.B, this.O), this.pf(), qH(this), this.Cf = this.u = !1, this.g && Ct(this.g));
  }
  Dj(a) {
    a.preventDefault();
  }
  Ha(a) {
    kh(a) ? null != this.g && (a.preventDefault(), this.lb = a.clientX, this.Wb = a.clientY, this.pf()) : this.B();
  }
  ia(a) {
    window.addEventListener("touchmove", this.Dj, this.O);
    window.addEventListener("pointermove", this.Lc, this.O);
    window.addEventListener("pointerup", this.ba, this.O);
    window.addEventListener("pointercancel", this.ba, this.O);
    this.Eb = a.clientX;
    this.Ib = a.clientY;
    this.u = !0;
    this.i.style.border = "0px";
    this.i.style.zIndex = parseInt(this.v) + 1 + "";
    this.i.style.cursor = "";
    this.m.style.display = "none";
    this.j.style.display = "none";
    this.l.style.display = "none";
    this.va.style.display = "none";
    a.preventDefault();
  }
  Lc(a) {
    if (kh(a)) {
      a.preventDefault();
      var b = 0, c = 0, d = 0, e = 0;
      this.g.o && this.g.o.Ea ? (c = this.g.o.Ea.getBoundingClientRect(), b = c.left, c = c.top) : (d = window.scrollX, e = window.scrollY);
      var f = a.clientX - this.g.m.x - b, k = a.clientY - this.g.m.y - c;
      k = Ek(f + d, k + e, this.g.Cb);
      f = k.x;
      k = k.y;
      d = f / this.g.l - this.g.L.x;
      e = k / this.g.l - this.g.L.y;
      this.ib ? Math.abs(d) > Math.abs(e) ? (this.g.I.y = this.g.L.y, this.Eb = a.clientX) : (this.g.I.x = this.g.L.x, this.Ib = a.clientY) : (this.Eb = a.clientX, this.Ib = a.clientY);
      a = this.g.L;
      k = {x:f / this.g.l, y:k / this.g.l};
      d = this.g.ia(a.x, k.x, a.y, k.y);
      f = Math.floor(d / 45);
      d %= 45;
      5 > d || 40 < d ? (e = 45 * f, 40 < d && (e = 45 * (f + 1)), f = this.g.ba(this.g.pa(e), this.g.u(k, a), 0), k.x = f.x + a.x, k.y = f.y + a.y, f = k.x, k = k.y) : (f = k.x, k = k.y);
      this.g.I.x = f;
      this.g.I.y = k;
      this.s.style.left = f * this.g.l + this.g.m.x + b - 12 + "px";
      this.s.style.top = k * this.g.l + this.g.m.y + c - 12 + "px";
      this.g.ld(!0, !1, this.M);
    } else {
      this.ba();
    }
  }
  ba() {
    window.removeEventListener("touchmove", this.Dj, this.O);
    window.removeEventListener("pointermove", this.Lc, this.O);
    window.removeEventListener("pointerup", this.ba, this.O);
    window.removeEventListener("pointercancel", this.ba, this.O);
    this.u = !1;
    qH(this);
    this.g && Ct(this.g);
  }
  ea(a) {
    window.addEventListener("touchmove", this.Dj, this.O);
    window.addEventListener("pointermove", this.Dd, this.O);
    window.addEventListener("pointerup", this.N, this.O);
    window.addEventListener("pointercancel", this.N, this.O);
    this.Eb = a.clientX;
    this.Ib = a.clientY;
    this.u = !0;
    this.i.style.border = "0px";
    this.i.style.zIndex = parseInt(this.v) + 1 + "";
    this.i.style.cursor = "";
    this.m.style.display = "none";
    this.j.style.display = "none";
    this.l.style.display = "none";
    this.va.style.display = "none";
    a.preventDefault();
  }
  Dd(a) {
    if (kh(a)) {
      a.preventDefault();
      var b = 0, c = 0, d = 0, e = 0;
      this.g.o && this.g.o.Ea ? (e = this.g.o.Ea.getBoundingClientRect(), d = e.left, e = e.top) : (b = window.scrollX, c = window.scrollY);
      var f = a.clientX - this.g.m.x - d, k = a.clientY - this.g.m.y - e;
      k = Ek(f + b, k + c, this.g.Cb);
      f = k.x;
      k = k.y;
      b = f / this.g.l - this.g.I.x;
      c = k / this.g.l - this.g.I.y;
      this.ib ? Math.abs(b) > Math.abs(c) ? (this.g.L.y = this.g.I.y, this.Eb = a.clientX) : (this.g.L.x = this.g.I.x, this.Ib = a.clientY) : (this.Eb = a.clientX, this.Ib = a.clientY);
      a = this.g.I;
      k = {x:f / this.g.l, y:k / this.g.l};
      b = this.g.ia(a.x, k.x, a.y, k.y);
      f = Math.floor(b / 45);
      b %= 45;
      5 > b || 40 < b ? (c = 45 * f, 40 < b && (c = 45 * (f + 1)), f = this.g.ba(this.g.pa(c), this.g.u(a, k), 0), k.x = f.x + a.x, k.y = f.y + a.y, f = k.x, k = k.y) : (f = k.x, k = k.y);
      this.g.L.x = f;
      this.g.L.y = k;
      this.o.style.left = f * this.g.l + this.g.m.x + d - 12 + "px";
      this.o.style.top = k * this.g.l + this.g.m.y + e - 12 + "px";
      this.g.ld(!1, !1, this.M);
    } else {
      this.N();
    }
  }
  N() {
    window.removeEventListener("touchmove", this.Dj, this.O);
    window.removeEventListener("pointermove", this.Dd, this.O);
    window.removeEventListener("pointerup", this.N, this.O);
    window.removeEventListener("pointercancel", this.N, this.O);
    this.u = !1;
    qH(this);
    this.g && Ct(this.g);
  }
  pf() {
    if (null != this.g) {
      var a = this.lb - this.Eb, b = this.Wb - this.Ib, c = parseFloat(this.i.style.left.slice(0, -2)) + a, d = parseFloat(this.i.style.top.slice(0, -2)) + b, e = this.g.getBoundingClientRect(), f = this.i.getBoundingClientRect();
      this.ic = e.left;
      this.ld = e.top;
      c >= window.scrollX - this.Xi - 15 && c <= window.innerWidth + window.scrollX - f.width + 15 && (Ql.Ja() && to(), this.i.style.left = c + "px", this.ic += a, this.Eb = this.lb);
      f.top + window.scrollY + b >= window.scrollY - this.Qk - 15 && f.top + window.scrollY + b <= window.innerHeight + window.scrollY - f.height + 15 && (Ql.Ja() && to(), this.i.style.top = d + "px", this.ld += b, this.Ib = this.Wb);
      this.g.Wb(this.M, this.ic, this.ld);
    }
  }
  ya(a) {
    window.addEventListener("touchmove", this.Dj, this.O);
    window.addEventListener("pointermove", this.Pe, this.O);
    window.addEventListener("pointerup", this.G, this.O);
    window.addEventListener("pointercancel", this.G, this.O);
    document.addEventListener("pointerup", this.G, this.O);
    this.Eb = a.clientX;
    this.Ib = a.clientY;
    this.u = !0;
    this.i.style.display = "none";
    this.m.style.display = "none";
    this.j.style.display = "none";
    this.l.style.display = "none";
    this.va.style.display = "none";
    a.stopPropagation();
    a.preventDefault();
  }
  Pe(a) {
    if (kh(a)) {
      a.preventDefault();
      var b = a.clientX - this.Eb, c = parseFloat(this.i.style.width.slice(0, -2)) + b;
      b = parseFloat(this.j.style.left.slice(0, -2)) + b;
      c >= this.minWidth + 30 && b < window.innerWidth + window.scrollX - this.j.offsetWidth && (this.i.style.width = c + "px", this.j.style.left = b + "px", this.Eb = a.clientX, this.g.dj(this.M, c - 30));
    } else {
      this.G();
    }
  }
  G() {
    window.removeEventListener("touchmove", this.Dj, {capture:!0});
    window.removeEventListener("pointermove", this.Pe, {capture:!0});
    window.removeEventListener("pointerup", this.G, {capture:!0});
    window.removeEventListener("pointercancel", this.G);
    document.removeEventListener("pointerup", this.G, this.O);
    this.u = !1;
    qH(this);
    this.g && Ct(this.g);
  }
  pa(a) {
    window.addEventListener("touchmove", this.Dj, this.O);
    window.addEventListener("pointermove", this.ed, this.O);
    window.addEventListener("pointerup", this.J, this.O);
    window.addEventListener("pointercancel", this.J, this.O);
    document.addEventListener("pointerup", this.J, this.O);
    this.Eb = a.clientX;
    this.Ib = a.clientY;
    this.u = !0;
    this.i.style.display = "none";
    this.m.style.display = "none";
    this.j.style.display = "none";
    this.l.style.display = "none";
    this.va.style.display = "none";
    a.stopPropagation();
    a.preventDefault();
  }
  ed(a) {
    if (kh(a)) {
      a.preventDefault();
      var b = a.clientY - this.Ib, c = parseFloat(this.i.style.height.slice(0, -2)) + b;
      b = parseFloat(this.l.style.top.slice(0, -2)) + b;
      c >= this.minHeight + 30 && b < window.innerHeight + window.scrollY - this.l.offsetHeight && (this.i.style.height = c + "px", this.l.style.top = b + "px", this.Ib = a.clientY, this.g.Wg(this.M, c - 30));
    } else {
      this.J();
    }
  }
  J() {
    window.removeEventListener("touchmove", this.Dj, this.O);
    window.removeEventListener("pointermove", this.ed, this.O);
    window.removeEventListener("pointerup", this.J, this.O);
    window.removeEventListener("pointercancel", this.J, this.O);
    document.removeEventListener("pointerup", this.J, this.O);
    this.u = !1;
    qH(this);
    this.g && Ct(this.g);
  }
  gb() {
    let a = "annotate-selection-edit-toolbar annotate-selection-resize-width-handle annotate-selection-resize-Height-handle annotate-selection-resize-element-handle annotate-selection-resize-element-box annotate-selection-line-start-control-handle annotate-selection-line-end-control-handle".split(" ");
    for (let b = 0; b < a.length; b++) {
      for (; document.getElementById(a[b]);) {
        document.getElementById(a[b]).remove();
      }
    }
  }
}
var bp = null;
function uH(a) {
  var b = (new Date()).getTimezoneOffset();
  RegExp("^[0-9]{4}-[0-9]{2}-[0-9]{2}\\s[0-9]{2}:[0-9]{2}:[0-9]{2}$").test(a.Bs) || (b = 0, a.Bs = "0000-00-00 00:00:00");
  var c = a.Bs.substr(11, 8), d = a.Bs.substr(0, 10).split("-");
  a = parseInt(d[0].trim(), 10);
  let e = parseInt(d[1].trim(), 10) - 1;
  d = parseInt(d[2].trim(), 10);
  var f = c.split(":");
  c = parseInt(f[0].trim(), 10);
  b = parseInt(f[1].trim(), 10) - b;
  f = parseInt(f[2].trim(), 10);
  a = new Date(a, e, d, c, b, f);
  return "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[a.getMonth()] + " " + a.getDate() + ", " + a.getFullYear();
}
class vH extends Nz {
  constructor(a, b) {
    super(null);
    this.i = a;
    this.Bs = this.i.Bs;
    this.s = b;
    this.xi();
  }
  xi() {
    R(this, "AnnotateWebAnnotationCommon");
    R(this, "AnnotateWebAnnotationItem");
    this.uc(this.i.Hn);
    this.o = new Nj(null);
    R(this.o, "AnnotateWebAnnotationCommon");
    R(this.o, "AnnotateWebAnnotationPreview");
    this.o.Im(this.i.qx);
    this.g = new Nj(null);
    R(this.g, "AnnotateWebAnnotationCommon");
    R(this.g, "AnnotateWebAnnotationInfo");
    this.j = Lz("", "extension_icon-web_annotation", "", null);
    R(this.j, "AnnotateWebAnnotationCommon");
    R(this.j, "AnnotateWebAnnotationIcon");
    Aj(this.j, 0.5);
    this.m = new Nj(null);
    R(this.m, "AnnotateWebAnnotationCommon");
    R(this.m, "AnnotateWebAnnotationInfoName");
    rj(this.m, this.i.Hn);
    this.l = new Nj(null);
    R(this.l, "AnnotateWebAnnotationCommon");
    R(this.l, "AnnotateWebAnnotationInfoDetail");
    rj(this.l, "Created: " + uH(this));
    this.Z(this.o);
    this.Z(this.g);
    this.g.Z(this.j);
    this.g.Z(this.m);
    this.g.Z(this.l);
    Kj(this, () => this.s(this.i.ma));
  }
  Zb() {
    return "WebAnnotationCard";
  }
}
;var wH = null;
function xH(a, b, c) {
  this.src = a;
  this.Df = b;
  this.ue = c;
  this.gh = {};
  this.rn = {};
  this.ri = {};
  this.Ml = this.Zc = this.Af = null;
  this.dm = !1;
  this.fw = {};
  this.La = this.Ya = null;
  this.QH = this.RH = this.RD = 0;
  this.np = this.am = this.bm = this.Ek = this.tF = !0;
  this.rx = this.Sq = this.un = null;
  this.qF = !1;
}
function yH(a) {
  var b = zH;
  b.Af = a;
  b.Zc = AH(b);
  var c = BH(b.Zc);
  b.Sq = function() {
    this.rn[this.Zc] && this.gh[this.Zc] && (CH(document.getElementById(b.Zc), !0), DH(b, a), EH(b, a), FH(b, !0));
  };
  c.addEventListener("load", () => {
    console.log("IFrame Loaded", b.Zc);
    b.rn[b.Zc] = 1;
    b.Sq && b.Sq();
  });
  c.setAttribute("src", b.src + a);
  CH(c, !1);
  b.ri[b.Zc] = b.Af;
  document.body.appendChild(c);
  ik(c);
}
function GH(a) {
  var b = zH;
  -1 != a.url.indexOf(b.ri[b.Zc]) && -1 != a.url.indexOf("preview") && -1 != a.url.indexOf("slide") ? (console.log("New IFrame Linked", b.Zc, a.frameId, a.url, b.ri[b.Zc]), b.gh[b.Zc] = a.frameId, b.Sq && b.Sq()) : console.log("Could not link new IFrame", b.Zc, a.frameId, a.url, b.ri[b.Zc]);
}
function HH(a) {
  zH.qF = a;
  console.log("bNotesFeedbackSharingInFeedbackView", a);
}
function IH(a, b) {
  null == a.rx && (a.rx = new PB(), document.body.appendChild(a.rx.el));
  b ? a.qF ? Vn("Loading...", null) : a.rx.Yr("Syncing...", "", null, !0, !0) : (a.rx.ja(), Sn());
}
function JH(a, b) {
  if (a.Af && a.Zc) {
    var c = KH(a, b), d = document.getElementById(c);
    FH(a, !1);
    var e = d && "" != c;
    console.log("Slide from Id while creating or reusing", b, c, e);
    e ? (IH(a, !1), c != a.Ml && CH(document.getElementById(a.Ml), !1), c != a.Zc && CH(document.getElementById(a.Zc), !1), CH(d, !0), a.Ml = null, a.Zc = c, EH(a, b), FH(a, !0)) : (window.postMessage({type:"annotatePreviewSlideShowLoading"}, "*"), IH(a, !0), c = AH(a), d = BH(c), a.Sq = function() {
      a.rn[a.Zc] && a.gh[a.Zc] && (CH(document.getElementById(a.Zc), !0), a.Zc != a.Ml && CH(document.getElementById(a.Ml), !1), a.Ml = null, DH(a, b), IH(a, !1), EH(a, b), FH(a, !0), LH(a));
    }, d.addEventListener("load", () => {
      console.log("IFrame Loaded", a.Zc);
      a.rn[a.Zc] = 1;
      a.Sq && a.Sq();
    }), d.setAttribute("src", a.src + b), CH(d, !1), a.ri[c] = b, ik(d), document.body.appendChild(d), a.Af = b, a.gh[a.Zc] && a.rn[a.Zc] ? ((d = document.getElementById(a.Ml)) && CH(d, !1), a.Ml = a.Zc) : CH(document.getElementById(a.Zc), !1), a.Zc = c);
    LH(a);
    3 == S.g && window.postMessage({type:"ANNOTATE_SLIDE_ACTIVE_PAGE_CHANGED", curSlideId:a.Af}, "*");
  }
}
function BH(a) {
  var b = document.createElement("iframe");
  b.id = a;
  b.allow = "camera; microphone; display-capture; fullscreen";
  b.classList.add("AnntoatePreviewSlide");
  return b;
}
function AH(a) {
  a.RD += 1;
  return "AnnotateSlide_" + a.RD;
}
function KH(a, b) {
  for (let c of Object.keys(a.ri)) {
    if (a.ri[c] == b && a.gh[c] && a.rn[c]) {
      return c;
    }
  }
  return "";
}
function MH(a, b) {
  var c = zH;
  if (c.gh[c.Zc] == b) {
    c.Af = a, c.ri[c.Zc] = a, console.log("Update Active slide for current iFrame", c.Zc, a), 3 == S.g && window.postMessage({type:"ANNOTATE_SLIDE_ACTIVE_PAGE_CHANGED", curSlideId:c.Af}, "*");
  } else {
    for (let d of Object.keys(c.gh)) {
      c.gh[d] == b && (console.log("Update Active slide for non current iFrame", c.Zc, a), c.ri[d] = a);
    }
  }
}
function NH(a) {
  return a.gh[a.Zc];
}
function CH(a, b) {
  a && (b ? (console.log("Show preview iframe", a.id), a.style.visibility = "visible") : (console.log("Hide preview iframe", a.id), a.style.visibility = "hidden"));
}
function FH(a, b) {
  a.dm = b;
  a.un && b && OH(a.un, !1);
}
function LH(a) {
  var b;
  for (let d of Object.keys(a.ri)) {
    if (!(d == a.Zc || a.gh[d] && a.rn[d]) && (b = d)) {
      console.log("Release IFrame", b);
      var c = document.getElementById(b);
      c && document.body.removeChild(c);
      b in a.rn && delete a.rn[b];
      b in a.gh && delete a.gh[b];
      b in a.ri && delete a.ri[b];
      b == a.Ml && (a.Ml = null);
    }
  }
  b = null;
  if (null == b && 3 < Object.keys(a.ri).length) {
    for (let d of Object.keys(a.ri)) {
      if (d != a.Ml && d != a.Zc) {
        b = d;
        break;
      }
    }
  }
  b && (console.log("Release IFrame", b), (c = document.getElementById(b)) && document.body.removeChild(c), b in a.gh && delete a.gh[b], b in a.rn && delete a.rn[b], b in a.ri && delete a.ri[b], b == a.Ml && (a.Ml = null));
}
function PH(a) {
  var b = zH;
  b.ue && b.ue({type:"annotatePreviewSlideKeyEvent", evtData:a, frameId:b.gh[b.Zc],}, null);
}
function QH(a, b) {
  if (0 <= b && b < a.Df.length) {
    a.ue && -1 != b && a.ue({type:"annotatePreviewIndexJumped", index:b + 1, total:a.Df.length, slideId:a.Df[b]}, null);
    if (a.ue && a.dm) {
      a.ue({type:"ANNOTATE_SLIDE_PREVIEW_DOC_DATA_REQ_EVENT", frameId:a.gh[a.Zc], newSlideId:a.Df[b]}, null);
      var c = !0;
    } else {
      c = !1;
    }
    c || JH(a, a.Df[b]);
  }
}
function RH(a) {
  var b = zH;
  b.Af != a && (a = b.Df.indexOf(a), 0 <= a && a < b.Df.length && QH(b, a));
}
function SH(a, b, c, d, e) {
  a.un || (a.un = new TH(a));
  a = a.un;
  var f = !0;
  b && a.g && (c = {slideId:b, animationIdx:c, direction:d, prevSlideId:e,}, d = a.g.Af, console.log("Slide action received", c, d), a.j ? (d = a.j.slideId, d != b ? UH(a, d, b) ? (f = !1, a.j = c, a.i.push(c)) : (a.j = c, a.i = [c]) : (f = !1, a.j = c, a.i.push(c))) : (a.j = c, a.i.push(c)), OH(a, f));
}
function DH(a, b) {
  a.Af == b && window.postMessage({type:"annotatePresentationSlideHideLoading"}, "*");
}
xH.prototype.dy = function(a, b, c) {
  this.fw = a.pageAnnotations;
  this.Ya = b;
  this.La = c;
  EH(this, this.Af);
};
function EH(a, b) {
  if ("" != b && a.fw && a.ue) {
    var c = null;
    a.Ya && (c = {}, c.strGUID = a.Ya.ma, c.strAnnotationPath = a.Ya.Uf, c.versionNo = a.Ya.bg, c.annotationData = a.Ya.Pa, c.nMaxElementId = Yp(a.Ya), c.uuid = a.Ya.qe, c.documentOwnerInfo = a.Ya.Yi);
    var d = null;
    a.La && (d = {}, d.strGUID = a.La.ma, d.strAnnotationPath = a.La.Uf, d.versionNo = a.La.bg, d.annotationData = a.La.Pa, d.nMaxElementId = Yp(a.La), d.uuid = a.La.qe, d.documentOwnerInfo = a.La.Yi);
    let f = null, k = null, l = "";
    var e = S.i;
    e && (f = e.Yi, k = e.ma, l = e.Uf);
    e = S.g;
    let n = null;
    null != S.l && (n = Object.assign({}, S.l), $s());
    c = {type:"annotatePreviewSlidesAnnotationData", curSlideId:b, frameId:a.gh[a.Zc], annotationData:a.fw, documentOwnerInfo:f, notesAnnotationData:c, feedbackAnnotationData:d, lstSlideId:a.Df, curAnnotationMode:e, curOwnerGuid:S.zd, uClassId:S.j, bAnnotationsAllowed:a.np, strGUID:k, strAnnotationPath:l, uLivefeedType:V ? V.l : null, uDocAccessedAs:S.m, bPublished:!1, strAssessmentFileGuid:Ws(), extraLoadedData:n};
    c.bShowAnnotations = a.tF;
    2 == e ? (c.bShowBaseAnnotations = a.Ek, c.bShowFeedbackAnnotations = a.am) : 3 == e && (c.bShowBaseAnnotations = a.Ek, c.bShowNotesAnnotations = a.bm);
    3 == S.g && b == a.YH && (c.prevSlideIdInFeedbackMode = a.qH, a.qH = null, a.YH = null, console.log("Feedback mode slide: Jump - reset info"), console.log("Slide Apply data(feedback mode) - parent to preview - ", b, c.prevSlideIdInFeedbackMode, a.Zc, a.gh[a.Zc]));
    a.ue(c, null);
  }
}
function VH(a, b) {
  a.ue && a.ue(b, null);
}
function WH(a) {
  var b = zH, c = S.g;
  let d = null;
  2 == c ? d = b.Ya : 3 == c && (d = b.La);
  d && (d.Pa = a.annotationData, d.dh = a.nMaxElementId, nh(d, a.uuid), dq(d, a.versionNo));
  JH(b, a.newSlideId);
}
var zH, XH = {}, YH = null, ZH = null;
function $H(a, b, c, d, e, f) {
  for (var k = [], l = 0; l < c.length; l++) {
    k[l] = c[l].objectId;
  }
  l = [];
  for (var n, p, t, x = 0; x < c.length; x++) {
    var D = {};
    D.slideId = c[x].objectId;
    n = "";
    if (c[x].pageElements) {
      p = c[x].pageElements;
      for (var G = 0; G < p.length; G++) {
        if (p[G].shape && (t = p[G].shape, "TEXT_BOX" === t.shapeType && t.placeholder && ("CENTERED_TITLE" === t.placeholder.type || "TITLE" === t.placeholder.type) && t.text && t.text.textElements)) {
          t = t.text.textElements;
          for (var I = 0; I < t.length; I++) {
            t[I].textRun && t[I].textRun.content && (n += t[I].textRun.content);
          }
        }
      }
    }
    D.strTitle = n;
    l[x] = D;
  }
  c = k.indexOf(b);
  -1 == c && (b = k[0], c = 0, console.log("Given slide not found, selecting first slide in a list", b));
  null == zH && (a = zH = new xH(a + "&slide=id.", k, f), a.ue && -1 != c && a.ue({type:"annotatePreviewSlideListUpdated", index:c + 1, total:a.Df.length, slidesMap:l, guid:d}, null));
  d = zH;
  e && ("uWidth" in e && (d.RH = e.uWidth), "uHeight" in e && (d.QH = e.uHeight));
  zH.dy(XH, YH, ZH);
  yH(b);
  e = zH;
  e.ue && e.ue({type:"annotateUpdateToolbarVisibleState", bShow:!0}, null);
  return b;
}
function aI(a) {
  zH && a && (NH(zH) ? (a = {type:"HANDLE_RECORDING_BEFORE_PREVIEW_NAVIGATE_JUMP", idx:a, frameId:NH(zH)}, L.sa(a, null), console.log("sent from preview parent", a)) : bI(a));
}
function bI(a) {
  if (zH && a) {
    let e = parseInt(a) - 1;
    if (P.m && 3 == S.g && zH.dm && zH.Zc) {
      a = zH.Df[e];
      var b = zH;
      var c = zH;
      var d = zH.Zc;
      c = c.ri[d] ? c.ri[d] : null;
      b.qH = c;
      b.YH = a;
      console.log("Feedback mode slide: Jump", zH.Df.indexOf(c), c, "--\x3e", zH.Df.indexOf(a), a);
    }
    QH(zH, e);
  }
}
function cI() {
  wH || wH || (wH = document.createElement("div"), wH.id = "AnnotateSlidesPreviewBlockDiv");
  document.body.appendChild(wH);
  wH.addEventListener("pointerdown", dI);
  wH.addEventListener("pointerup", dI);
  wH.addEventListener("wheel", dI);
}
function dI(a) {
  a.preventDefault();
  a.stopPropagation();
}
;function ow(a) {
  let b = a.Lc ? eI.g : fI.g;
  b && b.Sk.o(a.Jo);
  a.Jo = "";
}
function Hw(a, b) {
  if (b && (window == window.top || a.m)) {
    var c = {type:"ANNOTATE_AUTO_SAVE_FEEDBACK_RESPONSE", bSuccessful:b.bSuccessful, strOwnerGuid:b.strOwnerGuid, annotationGuid:b.savedAnnotationGuid, versionNo:parseInt(b.savedAnnotationVersionNo.toString()), arrMediaReencodeStatus:b.arrMediaReencodeStatus};
    if (3 == a.N || Rl()) {
      var d = b.strOwnerGuid;
      Rl() && (d = b.strStudentGuid, c.strStudentGuid = d);
      if (a = a.tc ? a.tc[d] : null) {
        b = c.annotationGuid;
        if (a.o && a.Ae && a.Ae.ma == b) {
          if (console.log(`#autosave > notes save response ${c.bSuccessful}`), c.bSuccessful) {
            a.Ae.bi = c.versionNo;
            if (c.arrMediaReencodeStatus && c.arrMediaReencodeStatus.length) {
              b = a.Ae;
              d = c.arrMediaReencodeStatus;
              let e = d.length != b.l.length;
              if (!e) {
                for (let f of b.l) {
                  for (let k of d) {
                    if (f.strMediaName == k.strMediaName && f.bReencoded != k.bReencoded) {
                      e = !0;
                      break;
                    }
                  }
                }
              }
              b.l = d;
              e && b.dispatchEvent(new CustomEvent(cn.i, {detail:d}));
            }
            a.Ae.Xr([]);
          } else {
            gn(a, !0);
          }
        }
        a.ia && a.mc(7, c);
        a.J();
      }
    } else {
      gI(a, c);
    }
  }
}
function nA(a, b) {
  return Jv.Pc.cg ? (a.Jo = b, Vw(Jv.Pc), !0) : !1;
}
function hI(a) {
  return Yg(a.Va) && a.Va == Un() ? !0 : !1;
}
function iI(a, b) {
  a.s = b;
  console.log("SetNotesAllowed - bNotesAllowed:", a.s, "bCacheStudentNotesAllowed", a.u);
}
function jI(a, b, c) {
  -1 != a.G && (clearTimeout(a.G), a.G = -1);
  if (a.lb) {
    a.lb = !1, a.J = b, null == a.u ? (a.s = c, console.log("OnStudentNotesDataLoaded (livestream N) - bNotesAllowed:", a.s, "bCacheStudentNotesAllowed", a.u, "got", c)) : (a.u = c, console.log("OnStudentNotesDataLoaded (livestream Y) - bNotesAllowed:", a.s, "bCacheStudentNotesAllowed", a.u, "got", c)), a.J && 0 < a.J.length ? 3 == a.N ? kI(a) : lI(a) : Kn("", "No students in this course.", "", "OK", function() {
    }, function() {
    });
  } else {
    c = !1;
    if (b) {
      for (let d of b) {
        let e = d.strStudentGuid;
        0 <= a.pa.indexOf(e) && (mI(a, e), c = !0);
      }
    }
    c ? 3 == a.N ? nI(a, b) : gI(a, {type:"ANNOTATE_NEW_NOTES_DOCUMENT_DATA", data:b,}) : Sn();
  }
}
function oI(a, b) {
  Vn("Loading student work...", null);
  a.i = b;
  if (b = S.i) {
    L.sa({type:"annotateLoadStudentNotesAnnotations", uClassId:S.j, arrStudentGuid:null, strAnnotationGuid:b.ma, bOwnedFile:b.Fm() ? 1 : 0,}, c => {
      "annotateStudentNotesLoadError" == c.type ? Kn("", "Error loading notes. Please try again.", "", "OK", function() {
      }, function() {
      }) : jI(a, c.arrStudentAnnotation, 1 == c.bNotesAllowed);
    }), a.lb = !0, a.G = setTimeout(() => {
      a.lb = !1;
      Kn("", "Error loading notes. Please try again.", "", "OK", function() {
      }, function() {
      });
    }, 3E4);
  }
}
function kI(a) {
  pI(a);
  a.tc = {};
  a.ed = !0;
  if (a.J) {
    let b = "";
    a.i && "strFilePath" in a.i && (b = a.i.strFilePath);
    let c = -1;
    a.i && "versionNo" in a.i && (c = a.i.versionNo);
    for (let d of a.J) {
      let e = a.tc[d.strStudentGuid];
      e || (e = new hn(d.strStudentGuid, !1), jj(e, 5, a.Dd, a), jj(e, 8, a.pf, a));
      e.re(d);
      e.Va = b;
      e.ib = c;
      a.tc[e.ve] = e;
    }
  }
  fI.j(!0);
  fI.Cd(a.tc, !0);
  Sn();
  a.M = !0;
  fI && qI(a.s);
  a.g.j = !0;
  rI(a);
  "strStudentGuid" in S.l && S.l.strStudentGuid && (fI.o(S.l.strStudentGuid), delete S.l.strStudentGuid);
}
function lI(a) {
  null == a.l && (a.l = document.createElement("iframe"), a.l.id = "annotateNotesFrame", a.l.classList.add("AnntoatePreviewSlide"), a.l.style.zIndex = "2147483645", a.l.style.border = "none", a.l.allow = "camera; microphone; display-capture; fullscreen", ik(a.l), document.body.appendChild(a.l));
  sI(a, !1);
  a.l.onload = function() {
    si() && window.postMessage({type:tI}, "*");
  };
  a.l.setAttribute("src", M.J + Kl());
}
function mI(a, b) {
  b = a.pa.indexOf(b);
  0 <= b && a.pa.splice(b, 1);
}
function nI(a, b) {
  let c = !1;
  if (b) {
    for (let e of b) {
      var d = a.tc[e.strStudentGuid];
      if (d) {
        a.v && a.v.ve == d.ve && (c = !0);
        d.re(e);
        b = a;
        let f = [], k = d.Il;
        k && f.push({docGuid:k.ma, strOwnerGuid:d.ve, bPublisher:!1,});
        (k = d.Ae) && f.push({docGuid:k.ma, strOwnerGuid:d.ve, bPublisher:!0,});
        uI(b.g, f);
      }
    }
  }
  c && vI(a, !0);
}
function gI(a, b) {
  a.l && a.l.contentWindow && a.l.contentWindow.postMessage(b, "*");
}
function pI(a) {
  fI || (fI = new rA(), fI.addEventListener(rA.g, function(b) {
    W.o({bBaseDoc:b.detail});
  }), fI.addEventListener(rA.j, function(b) {
    W.o({bNotesDoc:b.detail});
  }), fI.addEventListener(rA.i, function(b) {
    W.o({bFeedbackDoc:b.detail});
  }), fI.addEventListener(rA.m, a.Xx.bind(a)), fI.addEventListener(rA.o, a.gf.bind(a)), fI.addEventListener(rA.l, a.Gb.bind(a)));
}
function vI(a, b) {
  let c = a.ib(a.v);
  c && (L.Pz(c), L.fy(!0, !1), a = a.v, a.Ae && null != a.Ae.ma ? b && gw("Notes updated.", !0) : gw("No notes taken.", !0));
}
function wI(a, b) {
  iI(a, b);
  L.eA(b);
  L.Lj() || L.sa && L.sa({type:"ANNOTATE_REQ_STUDENT_NOTES_TAKING_CHANGED", bNotesAllowed:b ? 1 : 0, strAnnotationGuid:Un(), uClassId:S.j, bOwnedFile:S.Fm(1) ? 1 : 0}, null);
}
function xI(a) {
  a.M = !1;
  a.pa = [];
  a.m = !1;
  a.Va = null;
  a.ld = "";
  a.C = null;
  a.Ha = null;
  a.J = [];
  a.ya = !1;
  a.s = !0;
  a.l && (document.body.removeChild(a.l), a.l = null);
  a.i = null;
  a.v = null;
}
function rI(a) {
  let b = [];
  if (a.tc) {
    let c, d;
    for (let e of Object.keys(a.tc)) {
      c = a.tc[e], (d = c.Il) && b.push({docGuid:d.ma, strOwnerGuid:c.ve, bPublisher:!1,}), (d = c.Ae) && b.push({docGuid:d.ma, strOwnerGuid:c.ve, bPublisher:!0,});
    }
  }
  uI(a.g, b);
}
function yI(a, b) {
  let c = b.docGuid;
  var d = a.tc[a.Lc ? b.strStudentGuid : b.strOwnerGuid];
  d && (d = d.Ae) && d.ma == c && (zI(a, d, b), d.Wo());
}
function zI(a, b, c) {
  let d = c.data;
  switch(c.type) {
    case "ANNOTATE_ELEMENTS_ADDED":
      a = a.ba;
      b.bi = d.docVersionNo;
      b.g = d.docUUID;
      b.j = d.nMaxElementId;
      b.wf(d.pageInfo);
      if (b = b.Rf) {
        1 == a.g || 3 == a.g || 4 == a.g ? pn(b, d) : 2 == a.g && (a = d.slideId, c = b.pageAnnotations, c || (c = {}, b.pageAnnotations = c), c && a && (b = c[a], b || (c[a] = {}, b = c[a]), pn(b, d)));
      }
      break;
    case "ANNOTATE_ELEMENTS_REMOVED":
      a = a.ba;
      b.bi = d.docVersionNo;
      b.g = d.docUUID;
      b.j = d.nMaxElementId;
      b.wf(d.pageInfo);
      if (b = b.Rf) {
        1 == a.g || 3 == a.g || 4 == a.g ? qn(b, d) : 2 == a.g && (a = d.slideId, c = b.pageAnnotations, c || (c = {}, b.pageAnnotations = c), c && a && (b = c[a], b || (c[a] = {}, b = c[a]), qn(b, d)));
      }
      break;
    case "ANNOTATE_ELEMENT_PROPS_UPDATED":
      a = a.ba;
      b.bi = d.docVersionNo;
      b.g = d.docUUID;
      b.j = d.nMaxElementId;
      b.wf(d.pageInfo);
      if (b = b.Rf) {
        1 == a.g || 3 == a.g || 4 == a.g ? rn(b, d) : 2 == a.g && (a = d.slideId, c = b.pageAnnotations, c || (c = {}, b.pageAnnotations = c), c && a && (b = c[a], b || (c[a] = {}, b = c[a]), rn(b, d)));
      }
      break;
    case "ANNOTATE_ELEMENT_MODIFIED":
      a = a.ba;
      b.bi = d.docVersionNo;
      b.g = d.docUUID;
      b.j = d.nMaxElementId;
      if (b = b.Rf) {
        1 == a.g || 3 == a.g || 4 == a.g ? un(b, d) : 2 == a.g && (a = d.slideId, c = b.pageAnnotations, c || (c = {}, b.pageAnnotations = c), c && a && (b = c[a], b || (c[a] = {}, b = c[a]), un(b, d)));
      }
      break;
    case "ANNOTATE_MEDIA_REENCODED":
      b && d.arrMediaReencodeStatus && (b.l = d.arrMediaReencodeStatus);
  }
}
function sI(a, b) {
  a.l && (a.l.style.visibility = b ? "visible" : "hidden");
}
function AI(a, b) {
  a.Jb = b;
  a.M && gI(a, {type:"ANNOTATE_LIVEFEED_INFO", data:a.Jb});
}
function BI(a) {
  Sn();
  sI(a, !0);
  a.M = !0;
  let b = {type:"annotateStudentNotesAnnotations", data:a.J, bNotesAllowed:a.s, bPDFViewer:si(), bGoogleSlides:a.m, baseDocData:a.i, uClassId:S.j, strAssessmentFileGuid:Ws(), uNotesPanelViewType:hi.ba};
  S.l && S.l.strStudentGuid && (b.strStudentGuid = S.l.strStudentGuid, delete S.l.strStudentGuid);
  si() && (b.pdfViewerPath = "/docs/viewer", b.urlData = window.location.search, b.pageIndex = a.C, b.imgData = a.Ha);
  b.strServerUrl = M.J;
  a.m && (b.slidesPreviewPath = "GoogleSlidesPresentation/preview.html", b.strGUID = a.Va, b.strCurSlideId = a.C, b.strPresentationId = a.ld);
  gI(a, b);
  AI(a, a.Jb);
}
function CI(a, b) {
  b && (window == window.top || a.m) && (Rl() && (b.strStudentGuid = b.strOwnerGuid, b.strOwnerGuid = S.zd), b.type = "annotateSaveAnnotations", b.bAnnotatePDFViewer = si(), b.url = si() ? P.G : void 0, b.uSaveAnnotationType = 3, b.thumbnail = "", L.sa(b, null), console.log(`#autosave > notes save req at content ${b.strOwnerGuid}`));
}
function DI(a) {
  di((b, c) => {
    c ? (console.log("send get auth token... (on ValidateAccessTokenForSlideLoadNotes failed)", document.fullscreenElement), Fh(P) && L.sa({type:"checkIsFullScreenOnBaseFrame"}, d => {
      console.log("got fullscreen state in slideshow", d);
      if (d.fullscreen) {
        d = window.navigator || {};
        let e = (d.userAgent || "").toLowerCase(), f = (d.vendor || "").toLowerCase();
        /mac/.test((d.platform || "").toLowerCase()) && null != (/google inc/.test(f) ? e.match(/(?:chrome|crios)\/(\d+)/) : null) ? (console.log("Exit slideshow fullscreen - keyboard event dispached (\u2318 + Shift + F)"), document.body.dispatchEvent(new KeyboardEvent("keydown", {bubbles:!0, cancelable:!0, key:"f", code:"KeyF", metaKey:!0, shiftKey:!0}))) : (console.log("Exit slideshow fullscreen - keyboard event dispached (Ctrl + Shift + F)"), document.body.dispatchEvent(new KeyboardEvent("keydown", 
        {bubbles:!0, cancelable:!0, key:"f", code:"KeyF", ctrlKey:!0, shiftKey:!0})));
      }
    }), bi(M, (d, e) => {
      e ? (console.log("#test access denied"), Sn()) : BI(a);
    })) : BI(a);
  });
}
function EI(a, b) {
  if (3 == a.N) {
    switch(b.type) {
      case "ANNOTATE_GET_LIVE_DOCUMENTS":
        rI(a);
        break;
      case "ANNOTATE_GET_DOCUMENT_VERSION_TREE":
        var c = b.docGuid, d = b.strOwnerGuid, e = a.tc[d], f = null;
        if (e && (b = e.Il) && b.ma == c && (e = b.Rf) && (f = nn(e), f.versionNo = b.bi, f.uuid = b.g, b = {}, f.pageAnnotations = b, e = e.pageAnnotations)) {
          for (var k in e) {
            b[k] = nn(e[k]);
          }
        }
        f && FI(a.g, c, d, f);
        break;
      case "ANNOTATE_GET_DOCUMENT_SYNC_DATA":
        k = b.docGuid;
        c = b.strOwnerGuid;
        d = b.senderInfo;
        var l = b.versionTree;
        if (a.v && a.v.ve == c && 3 == ql()) {
          (f = tv(l)) && GI(a.g, k, c, f, d);
        } else {
          var n = a.tc[c];
          b = null;
          if (n && (n = n.Ae) && n.ma == k) {
            b = {docGuid:k, versionNo:n.bi, nMaxElementId:n.j, uuid:n.g, pageInfo:n.A};
            var p = n.Rf;
            if (p && (l.versionNo != n.bi || l.uuid != n.g)) {
              if (n = kn(p, l)) {
                b.arrElement = n.arrElement, b.arrTextHighlights = n.arrTextHighlights, b.arrTextElements = n.arrTextElements, b.arrMediaAttachments = n.arrMediaAttachments, b.arrImageAttachments = n.arrImageAttachments, b.arrUploadedVideoAttachments = n.arrUploadedVideoAttachments, b.arrComments = n.arrComments, b.arrAssessmentData = n.arrAssessmentData, b.screenShadeElementData = n.screenShadeElementData;
              }
              n = {};
              b.pageAnnotations = n;
              p = p.pageAnnotations;
              if ((l = l.pageAnnotations) && p) {
                for (e in p) {
                  l[e] || (l[e] = {arrElement:[], arrTextHighlights:[], arrTextElements:[], arrMediaAttachments:[], arrImageAttachments:[], arrUploadedVideoAttachments:[], arrComments:[], arrAssessmentData:[], screenShadeElementData:[]});
                }
                for (f in l) {
                  (e = p[f]) && (n[f] = kn(e, l[f]));
                }
              }
            }
          }
          GI(a.g, k, c, b, d);
        }
        break;
      case "ANNOTATE_PARSE_DOCUMENT_SYNC_DATA":
        if (c = b.docGuid, d = b.strOwnerGuid, k = b.syncData) {
          if (f = a.tc[d]) {
            a.v && a.v.ve == d && (uv(k), HI(Ao)), (a = f.Il) && a.ma == c && (a.bi = k.versionNo, a.j = k.nMaxElementId, a.g = k.uuid, a = a.Rf, k && a && (c = a.arrAnnotations, c || (c = [], a.arrAnnotations = c), on(k.arrElement, c), c = a.arrTextHighlights, c || (c = [], a.arrTextHighlights = c), on(k.arrTextHighlights, c), c = a.arrTextElements, c || (c = [], a.arrTextElements = c), on(k.arrTextElements, c), c = a.arrMediaAttachments, c || (c = [], a.arrMediaAttachments = c), on(k.arrMediaAttachments, 
            c), c = a.arrImageAttachments, c || (c = [], a.arrImageAttachments = c), on(k.arrImageAttachments, c), c = a.arrComments, c || (c = [], a.arrComments = c), on(k.arrUploadedVideoAttachments, c), c = a.arrAssessmentData, c || (c = [], a.arrAssessmentData = c), on(k.arrUploadedVideoAttachments, c), c = a.screenShadeElementData, c || (c = [], a.screenShadeElementData = c), on(k.screenShadeElementData, c)));
          }
        }
    }
  } else {
    gI(a, b);
  }
}
function II(a, b) {
  a.C = b;
  hI(a) && JI(a) && gI(a, {type:"ANNOTATE_SLIDE_CHANGED_OUTER_NOTES_PANEL", strCurSlideId:a.C});
}
function KI(a) {
  var b = fw();
  if (L.sa && void 0 != b.l && a.source == b.l.contentWindow && a.data && "object" == typeof a.data) {
    if ("annotateCloseStudentNotes" == a.data.type) {
      LI({bLaunchNotesViewer:!1}), sI(b, !1), b.ya = a.data.bFeedbackViewerReady, b.ya ? (II(b, b.C), b.i = null, b.C = null, b.Ha = null) : (b.g.j = !1, MI(b.g), xI(b));
    } else if ("ANNOTATE_STUDENT_NOTES_VIEWER_READY" == a.data.type) {
      window != window.top && !b.m || si() && !Vk(P) || (b.m ? DI(b) : BI(b));
    } else if ("ANNOTATE_AUTO_SAVE_FEEDBACK_REQUEST" == a.data.type) {
      CI(b, a.data.saveReqData);
    } else if ("ANNOTATE_PDF_GET_BYTES" == a.data.type) {
      (window == window.top || b.m) && window.postMessage(a.data, "*");
    } else if ("ANNOTATE_NOTES_TAKING_CHANGED" == a.data.type) {
      (window == window.top || b.m) && wI(b, a.data.bNotesAllowed);
    } else if ("ANNOTATE_SHARE_NOTES_FEEDBACK_TOGGLED" == a.data.type) {
      (window == window.top || b.m) && b.fA(a.data.strSharedNotesDocGUID, a.data.strSharedFeedbackDocGUID, a.data.strSharedStudentGUID);
    } else if ("ANNOTATE_CHANGE_NOTES_PANEL_VIEW_TYPE" == a.data.type) {
      if (window == window.top || b.m) {
        a = a.data.uNotesPanelViewType, b = hi, console.log(`notes panel view change ${b.ba}->${a}`), b.ba = a, vi(b);
      }
    } else if ("ANNOTATE_CONNECT_LIVE_DOCUMENTS" == a.data.type) {
      if (window == window.top || b.m) {
        b.g.j = !0, a = b.g, a.s() && NI(a);
      }
    } else if ("ANNOTATE_DISCONNECT_LIVE_DOCUMENTS" == a.data.type) {
      if (window == window.top || b.m) {
        b.g.j = !1, MI(b.g);
      }
    } else if ("ANNOTATE_SEND_LIVE_DOCUMENTS" == a.data.type) {
      (window == window.top || b.m) && uI(b.g, a.data.arrDocs);
    } else if ("ANNOTATE_SEND_DOCUMENT_VERSION_TREE" == a.data.type) {
      (window == window.top || b.m) && FI(b.g, a.data.docGuid, a.data.studentGuid, a.data.tree);
    } else if ("ANNOTATE_SEND_DOCUMENT_SYNC_DATA" == a.data.type) {
      (window == window.top || b.m) && GI(b.g, a.data.docGuid, a.data.studentGuid, a.data.syncData, a.data.senderInfo);
    } else if ("ANNOTATE_FEEDBACK_DOCUMENT_EDITED_FROM_NOTES_VIEW" == a.data.type) {
      (window == window.top || b.m) && b.g.Gt(a.data.msgData);
    } else if ("ANNOTATE_INIT_STUDENT_FEEDBACK_SYNC" == a.data.type) {
      if (window == window.top || b.m) {
        var c = a.data.docGuid;
        (b = b.g.g.g(c)) && OI(b, c, a.data.studentGuid);
      }
    } else if ("ANNOTATE_CURRENT_LOADED_STUDENT" == a.data.type) {
      console.log(">>change student", a.data.strStudentGuid), LI({strStudentGuid:a.data.strStudentGuid});
    } else if ("ANNOTATE_DISCONNECT_DOCUMENT" == a.data.type && a.data.arrDocGuid && b.g.g) {
      for (c of a.data.arrDocGuid) {
        PI(b.g.g, c);
      }
    }
  }
}
function QI() {
  var a = fw();
  return a.l ? a.l.contentWindow : null;
}
function RI(a) {
  Sn();
  sI(a, !0);
  let b = {type:"annotateStudentNotesUpdateAnnotations", baseDocData:a.i, bNotesAllowed:a.s};
  si() ? (b.pageIndex = a.C, b.imgData = a.Ha) : a.m && (b.strCurSlideId = a.C, b.uTempShowReloadDocBtn = Lk() ? 1 : 0);
  gI(a, b);
}
function SI(a, b) {
  var c = fw();
  c.C = a;
  c.Ha = b;
  c.M && (c.ya ? RI(c) : BI(c));
}
function JI(a) {
  return a.M && a.ya ? !0 : !1;
}
function TI(a, b) {
  if (a.M) {
    let c = S.i;
    c && (L.sa({type:"annotateLoadStudentNotesAnnotations", uClassId:S.j, strAnnotationGuid:c.ma, arrStudentGuid:[b],}, d => {
      jI(a, d.arrStudentAnnotation, 1 == d.bNotesAllowed);
    }), a.pa.push(b));
  }
}
class UI {
  constructor(a, b, c, d, e) {
    this.lb = !1;
    this.pa = [];
    this.ya = this.M = !1;
    this.u = null;
    this.s = !0;
    null != e && (this.s = e, this.u = !0, console.log("StudentNotesHandler constructor (livestream Y) - bNotesAllowed:", this.s, "bCacheStudentNotesAllowed", this.u));
    this.Jb = c;
    b && (this.g = new VI(this, a, b));
    this.m = !1;
    this.Va = null;
    this.ld = "";
    this.Ha = this.C = null;
    this.J = [];
    this.tc = {};
    this.i = this.l = this.v = null;
    this.ba = new wn();
    this.Lc = d;
    this.Jo = "";
    this.N = 0;
    this.ba.g = 0;
    this.ic = !1;
  }
  ia(a) {
    this.v = a;
  }
  ae() {
    return this.v;
  }
  Gb(a) {
    a = a.detail.strStudentGuid;
    LI({strStudentGuid:a});
    this.ia(this.tc[a]);
    vI(this, !1);
  }
  gf() {
    fI && qI(!this.s);
    wI(this, !this.s);
    gw(this.s ? "Student note taking is enabled" : "Student note taking is disabled", !0);
    console.log("current notes taking status>>>", this.s);
  }
  Xx() {
    if (Jv.Pc.cg) {
      W.Gb = 1, Vw(Jv.Pc);
    } else {
      W.Gb = 0;
      LI({bLaunchNotesViewer:!1});
      this.g.j = !1;
      MI(this.g);
      xI(this);
      fI.j(!1);
      var a = In;
      L && a.g && a.g.g && (L.Pz(a.g.g), L.fy(!0, !1), gw("Notes review ended.", !1));
      S.i && S.i.Rj(this.ic);
      this.ic = !1;
    }
  }
  pf(a, b) {
    a = b.arrMediaReencodeStatus;
    this.v.ve === b.strStudentGuid && S.yg(a, S.g);
  }
  ib(a) {
    let b = null;
    if (a && this.i) {
      b = {type:"AnnotateSendStudentFeedbackData", strGUID:this.i.strGUID, strAnnotationPath:this.i.strAnnotationPath, versionNo:this.i.versionNo, annotationData:this.i.annotationData, arrMediaReencodeStatus:this.i.arrMediaReencodeStatus, bForScreenShot:!1, bApplyForceFully:!0, bSlidesPreview:!1, bPDFViewer:!1, uClassId:S.j, strAssessmentFileGuid:Ws(), strStudentGuid:a.ve,};
      this.i.baseDocumentOwnerInfo && (b.baseDocumentOwnerInfo = this.i.baseDocumentOwnerInfo);
      var c = null, d = a.Il;
      d && (c = {}, c.strGUID = d.ma, c.strAnnotationPath = d.Uf, c.versionNo = d.bi, c.uuid = d.g, c.nMaxElementId = d.j, c.annotationData = d.Rf, c.arrMediaReencodeStatus = d.l, c.strPublisherGuid = d.i, c.strPublishedAnnotationGuid = d.ma, c.strPublisherPicture = d.v, c.oPublisherPicturePosition = d.m, c.strPublisherFirstName = d.o, c.strPublisherLastName = d.s, c.uPublisherFeatureValue = d.u);
      b.notesData = c;
      c = null;
      if (d = a.Ae) {
        c = {}, c.strGUID = d.ma, c.strAnnotationPath = d.Uf, c.versionNo = d.bi, c.uuid = d.g, c.nMaxElementId = d.j, c.annotationData = d.Rf, c.arrMediaReencodeStatus = d.l, c.strPublisherGuid = d.i, c.strPublishedAnnotationGuid = d.ma, c.strPublisherPicture = d.v, c.oPublisherPicturePosition = d.m, c.strPublisherFirstName = d.o, c.strPublisherLastName = d.s, c.uPublisherFeatureValue = d.u, c.bDirty = a.l;
      }
      b.feedbackData = c;
      b.uCurrentMode = 3;
      b.bScrollWhileInitialize = this.ed;
      this.ed = !1;
    }
    return b;
  }
  iy(a) {
    let b = this.tc ? this.tc[a.strOwnerGuid] : null;
    b && b.iy(a.annotationGuid, a.versionNo, a.annotationData, a.uuid, a.nMaxElementId);
  }
  Gt(a) {
    yI(this, a);
    this.g && this.g.Gt(a);
  }
  fA(a, b, c) {
    L.fA({strSharedNotesDocGUID:a, strSharedFeedbackDocGUID:b, strSharedStudentGUID:c});
  }
  Dd(a, b) {
    CI(this, b);
  }
  nA(a) {
    if (3 == this.N) {
      let b = this.v.ve, c = !1;
      for (let d of a) {
        a = this.tc ? this.tc[d] : null, fn(a), a.Il && PI(this.g.g, a.Il.ma), a.Ae && PI(this.g.g, a.Ae.ma), b !== d ? (WI(d, !1), delete this.tc[d]) : c = !0;
      }
      c && Kn("", "This student has been removed from the course.", null, "OK", null, () => {
        delete this.tc[b];
        0 == Object.keys(this.tc).length ? this.Xx(null) : WI(b, !0);
      });
    } else {
      gI(this, {type:"ANNOTATE_STUDENT_REMOVED_FROM_COURSE", arrRemovedStudent:a,});
    }
  }
  U() {
    this.g && this.g.U();
    xI(this);
  }
}
;var Uw = 4;
function Lw(a, b) {
  if (yw(Ql)) {
    Kn("", "You have unsaved work.", "CANCEL", "SAVE", null, function() {
      L.by(null);
    });
  } else {
    let d = P.s;
    Jo.Vi() && Jo.$h();
    Ko.Vi() && Ko.$h();
    var c = Uk();
    b && (Gk(P) ? c = Rk(P) : Qk() && (c = Sk()));
    let e = No();
    mv(c, e);
    const f = k => {
      let l = Object.keys(k), n = l.length, p;
      for (let t = 0; t < n; t++) {
        if (p = k[l[t]], p.arrAnnotations && p.arrAnnotations.length || p.arrTextElements && p.arrTextElements.length || p.arrImageAttachments && p.arrImageAttachments.length || p.arrMediaAttachments && p.arrMediaAttachments.length || p.arrUploadedVideoAttachments && p.arrUploadedVideoAttachments.length) {
          return !0;
        }
      }
      return !1;
    };
    c = () => {
      window != window.top && XI();
      let k = YI();
      if (f(k)) {
        var l = Object.keys(k);
        let n = l.length, p;
        for (let t = 0; t < n; t++) {
          p = k[l[t]], p.arrTextElements && p.arrTextElements.length && p.arrTextElements.forEach(x => {
            "textTool" === x.type ? (a.i || (a.i = new hj()), x.arrWords = gj(a.i, x)) : "mathTextTool" === x.type && Ko.qI(x);
          }), p.arrImageAttachments && p.arrImageAttachments.length && p.arrImageAttachments.forEach(x => {
            let D = ZI(L.Pb(), x.uDocType);
            x.serializedAnnotateResourceBasePath ? D = x.serializedAnnotateResourceBasePath : x.serializedAnnotateResourceBasePath = D;
            x.posterUrl = D + x.strImageName;
          }), p.arrMediaAttachments && p.arrMediaAttachments.length && p.arrMediaAttachments.forEach(x => {
            let D = UD(L.Pb(), x.uDocType), G = $I(L.Pb(), x.uDocType);
            null != x.serializedS3BasePath && null != x.serializedAnnotateResourceBasePath ? (D = x.serializedS3BasePath, G = x.serializedAnnotateResourceBasePath) : (x.serializedS3BasePath = D, x.serializedAnnotateResourceBasePath = G);
            x.posterUrl = 1 === x.arrMedia[0].nMediaType ? null : G + x.arrMedia[0].strURL + ".png";
            x.mediaUrl = D + x.arrMedia[0].strURL + ".mp4";
          }), p.arrUploadedVideoAttachments && p.arrUploadedVideoAttachments.length && p.arrUploadedVideoAttachments.forEach(x => {
            let D = aJ(L.Pb(), x.uDocType), G = bJ(L.Pb(), x.uDocType);
            null != x.serializedS3BasePath && x.serializedAnnotateResourceBasePath ? (D = x.serializedS3BasePath, G = x.serializedAnnotateResourceBasePath) : (x.serializedS3BasePath = D, x.serializedAnnotateResourceBasePath = G);
            x.videoServerType == Rg.Ds ? (x.mediaUrl = it(x.strURL), x.posterUrl = G + x.strThumbUrl) : (x.mediaUrl = D + x.strURL + "." + x.strFileExtension, x.posterUrl = G + x.strURL + ".png");
          });
        }
        l = window.location.href;
        Zh(d, {type:"slidesAnnotations", annotationData:{annotations:k}, presentationId:l.substring(l.indexOf("docs.google.com/presentation/d/") + 31, l.indexOf("/", l.indexOf("docs.google.com/presentation/d/") + 31)), isClassRoomSlidesExport:b, isClassroomTurnIn:L.Bm().Qq, currPageUrl:Ul(), tokenResponse:{access_token:M.l}});
      } else {
        d && cJ(d, {type:dJ});
      }
    };
    if (Jk(P) || Gk(P) || Qk()) {
      Ip(), QA(), !M.m || b ? (b || (Nn(), Vn("Loading...", null)), d && (b ? Yh(d, c, eJ) : Yh(d, c, fJ))) : em(!1);
    }
  }
}
function Qw(a) {
  var b = Mw, c = L.mb();
  let d = P.D, e = L.Pb(), f = L.Zf();
  if ((!a || !Tw(c, !1)) && c.pp) {
    c.pp = !1;
    Jo.Vi() && Jo.$h();
    Ko.Vi() && Ko.$h();
    var k = !(a && !wv()), l = (t, x, D, G) => {
      for (let I = 0; I < t.length; I++) {
        let Q = x ? t[I].Na() : t[I];
        if (D) {
          Q.pageId = Q.pageIndex;
          let X = yo(d, Q.pageId);
          -1 != X && (Q.pageIndex = X);
          -1 == X && wz(d, Q.pageId) && (Q.pageIndex = xz(d, Q.pageId));
        }
        G && (Q.uDocType = a ? G : 1);
        t[I] = Q;
      }
    }, n = () => {
      l(p, !1, !0, null);
      var t = [];
      var x = gJ(e, 1, 1);
      t = t.concat(x);
      x = gJ(e, 2, a ? 2 : 1);
      t = t.concat(x);
      x = gJ(e, 3, a ? 3 : 1);
      t = t.concat(x);
      l(t, !1, !0, null);
      x = [];
      var D = [].concat(Dt());
      l(D, !0, !0, 1);
      x = x.concat(D);
      D = [].concat(Et());
      l(D, !0, !0, 2);
      x = x.concat(D);
      D = [].concat(Ft());
      l(D, !0, !0, 3);
      x = x.concat(D);
      D = Jo.bA(a);
      l(D, !1, !0, null);
      for (var G = 0; G < D.length; G++) {
        b.i || (b.i = new hj()), D[G].arrWords = gj(b.i, D[G]), D[G].pageInfo = JSON.parse(D[G].pageInfo);
      }
      G = Ko.sI(a);
      l(G, !1, !0, null);
      var I = [];
      var Q = hJ(e, 1, 1);
      I = I.concat(Q);
      Q = hJ(e, 2, a ? 2 : 1);
      I = I.concat(Q);
      Q = hJ(e, 3, a ? 3 : 1);
      I = I.concat(Q);
      l(I, !1, !0, null);
      Q = f.bA(a);
      for (var X = 0; X < Q.length; X++) {
        MD(Q[X]);
        let Fa = Q[X].replies;
        for (let La = 0; La < Fa.length; La++) {
          MD(Fa[La]);
        }
      }
      l(Q, !1, !0, null);
      b.g = 0;
      a ? (X = S, X = X.i ? X.i.bg : -1) : X = -1;
      L.kd({type:iJ, bAnnotationsFound:k, annotations:x, simpleTextAnnotations:D, mathTextToolAnnotations:G, mediaAttachments:p, videoAttachments:t, imageAttachments:I, comments:Q, baseDocVersionNo:X, notesDocVersionNo:a ? tt() : -1, feedbackDocVersionNo:a ? ut() : -1});
    };
    c = jJ(e, a);
    var p = c.arrAttachment;
    c = c.arrAttachmentForThumbnail;
    Ch() || (c = []);
    c.length ? L.sa({type:kJ, bForPDF:!0, data:{arrAttachments:c,}}, t => {
      if ("UploadImageToS3Response" == t.type) {
        if (t.res && t.res.bSuccessful) {
          console.log(t.res.arrAttachments);
          t = t.res.arrAttachments;
          var x = p;
          for (let D = 0; D < t.length; D++) {
            for (let G = 0; G < x.length; G++) {
              if (t[D].nId == x[G].nId && t[D].uDocType == x[G].uDocType) {
                x[G].posterUrl = t[D].strThumbnailUrl;
                break;
              }
            }
          }
          p = x;
        }
        n();
      }
    }) : n();
  }
}
function lJ(a, b, c) {
  Nk() ? (a.j = new mJ(() => {
  }, b), nJ(a.j)) : (a.l = new oJ(b, c), pJ(a.l));
}
function qJ(a) {
  var b = Mw;
  if (b.l && b.l.s) {
    var c = b.l;
    c.i ? rJ(c.i) : c.C.Cr();
    c.s = !1;
    c.g ? c.g.jl(0, 0) : c.j && sJ(c.j);
    c.g = null;
    c.i = null;
    c.j = null;
    c.C = null;
    tJ(c.m);
    c.m = null;
    L.sa({type:"annotateCloseExportProgressWindow", windowId:c.l}, null);
    L.rr(!0);
    uJ(c);
    a && Kn("", "Error exporting annotations.", "OK");
  }
  b.j && b.j.m && b.j.Cr(a);
}
function vJ() {
  Vk(P) && (Ip(), QA(), M.m ? (em(!1), L.Hm(1)) : yw(Ql) ? Kn("", "You have unsaved work.", "CANCEL", "SAVE", null, function() {
    L.by(null);
  }) : L.kd({type:wJ}));
}
function xJ(a) {
  Ip();
  QA();
  M.m ? (em(!1), L.Hm(1)) : yw(Ql) ? Kn("", "You have unsaved work.", "CANCEL", "SAVE", null, function() {
    L.by(null);
  }) : yJ((b, c) => {
    lJ(a, b, c);
  });
}
function YI() {
  let a = jv();
  var b = S;
  var c = {};
  b.Ya && (c = b.Ya.Pa);
  b = c;
  c = S;
  var d = {};
  c.La && (d = c.La.Pa);
  c = d;
  d = {};
  let e = ["arrAnnotations", "arrTextElements", "arrImageAttachments", "arrMediaAttachments", "arrUploadedVideoAttachments"];
  e.push("elementGroupData");
  let f = Object.keys(a).length > Object.keys(b).length ? a : b;
  f = Object.keys(f).length > Object.keys(c).length ? f : c;
  for (let p of Object.keys(f)) {
    d[p] = {};
    for (let t of e) {
      if (a[p] && a[p][t] && ("arrMediaAttachments" == t && 0 < a[p][t].length || "arrUploadedVideoAttachments" == t && 0 < a[p][t].length || "arrImageAttachments" == t && 0 < a[p][t].length || "arrAnnotations" == t && 0 < a[p][t].length || "elementGroupData" == t && 0 < a[p][t].length)) {
        for (var k = a[p][t].length - 1; 0 <= k; k--) {
          a[p][t][k].uDocType = 1;
        }
      }
      k = a[p] && a[p][t] ? a[p][t] : [];
      if (b[p] && b[p][t] && ("arrMediaAttachments" == t && 0 < b[p][t].length || "arrUploadedVideoAttachments" == t && 0 < b[p][t].length || "arrImageAttachments" == t && 0 < b[p][t].length || "arrAnnotations" == t && 0 < b[p][t].length || "elementGroupData" == t && 0 < b[p][t].length)) {
        for (var l = b[p][t].length - 1; 0 <= l; l--) {
          b[p][t][l].markAsExportedInSlides ? b[p][t].splice(l, 1) : b[p][t][l].uDocType = 2;
        }
      }
      l = b[p] && b[p][t] ? b[p][t] : [];
      if (c[p] && c[p][t] && ("arrMediaAttachments" == t && 0 < c[p][t].length || "arrUploadedVideoAttachments" == t && 0 < c[p][t].length || "arrImageAttachments" == t && 0 < c[p][t].length || "arrAnnotations" == t && 0 < c[p][t].length || "elementGroupData" == t && 0 < c[p][t].length)) {
        for (var n = c[p][t].length - 1; 0 <= n; n--) {
          c[p][t][n].markAsExportedInSlides ? c[p][t].splice(n, 1) : c[p][t][n].uDocType = 3;
        }
      }
      n = c[p] && c[p][t] ? c[p][t] : [];
      L.mb().Ja() && Ph() && (n = []);
      L.mb().Ja() && Kh() && (l = []);
      d[p][t] = [].concat(k, l, n);
    }
    d[p].pageData = f[p].pageData;
  }
  return d;
}
class zJ extends ph {
  constructor() {
    super();
    this.i = null;
    this.m = this.m.bind(this);
    this.g = 0;
    this.l = this.j = null;
  }
  m() {
    WB && XB(!1);
    si() ? vJ() : Jk(P) || Gk(P) ? Lw(this, !1) : Sl() && Kh() && xJ(this);
  }
  o() {
    Array.from(document.getElementsByClassName("annotate-print-svg-element")).forEach(a => {
      a.remove();
    });
  }
  U() {
    window.removeEventListener("afterprint", this.o.bind(this));
    this.o();
  }
}
var Mw = new zJ();
var ti = "ANNOTATE_PDF_SET_TOOL", Ms = "ANNOTATE_PDF_CURRENT_ANNTOATION_MODE", iJ = "ANNOTATE_PDF_SERIALIZE_INFO", wJ = "ANNOTATE_PDF_EXPORT", tI = "ANNOTATE_PDF_GET_DATA_FOR_NOTES_VIEW", fE = "ANNOTATE_PDF_COMMENT_DATA_UPDATED", yE = "ANNOTATE_PDF_RENDER_UPDATED_COMMENT_DATA", wE = "ANNOTATE_PDF_RENDER_COMMENT", Pi = "ANNOTATE_PDF_COMMENT_HIGHLIGHT_COLOR_CHANGED", EE = "ANNOTATE_PDF_INSERT_REMOTE_COMMENT", BE = "ANNOTATE_PDF_UPDATE_REMOTE_COMMENT", AE = "ANNOTATE_PDF_DELETE_REMOTE_COMMENT", DE = 
"ANNOTATE_PDF_UPDATE_REMOTE_REPLY", CE = "ANNOTATE_PDF_DELETE_REMOTE_REPLY", zE = "ANNOTATE_PDF_UPDATE_COMMENT_DATE", HE = "ANNOTATE_PDF_SET_COMMENT_ACTIVE", dl = "ANNOTATE_PDF_URL_PARAMS_CHANGED", ws = "ANNOTATE_PDF_DIRTY_DOCUMENT", Wv = "ANNOTATE_PDF_UPDATE_DRIVE_FAILED", Wn = "ANNOTATE_PDF_SHOW_HIDE_CHANGES_SAVED", IE = "ANNOTATE_PDF_MEDIA_COMMENT_ACTION", JE = "ANNOTATE_PDF_COMMENT_RECORDING_STARTED", YD = "ANNOTATE_PDF_COMMENT_RECORDED_MEDIA_DATA", Iw = "ANNOTATE_PDF_UPDATE_COMMENT_MEDIA_PATH", 
jE = "ANNOTATE_PDF_UPDATE_MEDIA_REENCODING_STATUS", kE = "ANNOTATE_PDF_UPDATE_RECORDING_DURATION", $D = "ANNOTATE_PDF_CLEAR_CURRENT_COMMENT_MEDIA", KE = "ANNOTATE_PDF_STOP_RECORDING", LE = "ANNOTATE_PDF_PAUSE_RESUME_RECORDING", NE = "ANNOTATE_PDF_MUTE_UNMUTE_RECORDING", ME = "ANNOTATE_PDF_RECORDING_PAUSE_RESUME_STATE_CHANGED", OE = "ANNOTATE_PDF_RECORDING_MUTE_UNMUTE_STATE_CHANGED", hE = "ANNOTATE_PDF_SHOW_HIDE_RECORDING_CONTROLS", Rw = "ANNOTATE_PDF_EXPORT_STATUS";
class il {
  constructor(a, b) {
    this.x = a;
    this.y = b;
  }
}
class AJ {
  constructor(a, b, c, d, e, f, k, l, n, p, t, x, D, G, I, Q, X, Fa, La, Aa, Ha, aa, ya, fc, ed, Bc, Kb, Cb) {
    this.ba = a;
    this.N = b;
    this.j = c;
    this.Va = d;
    this.u = e;
    this.l = f;
    this.Ha = k;
    this.ya = l;
    this.M = n;
    this.s = p;
    this.o = t;
    this.i = x;
    this.ea = D;
    this.v = G;
    this.ia = I;
    this.pa = Q;
    this.B = X;
    this.Db = Fa;
    this.g = La;
    this.ib = Aa;
    this.m = Ha;
    this.G = aa;
    this.J = ya;
    this.C = fc;
    this.Wb = ed;
    this.Jb = Bc;
    this.mb = Kb;
    this.lb = Cb;
  }
}
class BJ {
  constructor(a) {
    this.pointerId = a.pointerId;
    this.pointerType = a.pointerType;
    this.pageX = a.pageX;
    this.pageY = a.pageY;
    this.target = a.target;
    this.buttons = a.buttons;
    this.ctrlKey = a.ctrlKey;
    this.shiftKey = a.shiftKey;
  }
}
class CJ extends BJ {
  constructor(a) {
    super(a);
    this.deltaX = a.deltaX;
    this.deltaY = a.deltaY;
  }
}
class DJ extends BJ {
}
class EJ {
  constructor(a, b) {
    this.S = a;
    this.Ua = b;
  }
}
class FJ {
  constructor(a, b, c) {
    this.S = a;
    this.$a = b;
    this.Ua = c;
  }
}
function GJ(a, b) {
  a.width = b.width;
  a.height = b.height;
  a.fd = b.pageId;
  a.Ah = b.pdfPageIndex;
  "rotation" in b ? a.rotation = b.rotation : a.rotation = -1 == a.Ah ? -1 : 0;
  "bHidden" in b && (a.g = b.bHidden);
  "uuid" in b && nh(a, b.uuid);
}
function HJ(a) {
  return {pageId:a.fd, width:a.width, height:a.height, pdfPageIndex:a.Ah, rotation:a.rotation, bHidden:a.g, uuid:a.qe,};
}
function IJ(a, b, c) {
  let d = a.width != b || a.height != c;
  a.width = b;
  a.height = c;
  d && a.xb();
}
class JJ extends ph {
  constructor() {
    super();
    this.height = this.width = 0;
    this.Ah = this.fd = -1;
    this.rotation = 0;
    this.g = !1;
  }
  wi() {
    return {pageId:this.fd, uuid:this.qe,};
  }
}
function sE(a) {
  let b = {};
  b.left = a.left;
  b.top = a.top;
  b.width = a.width;
  b.height = a.height;
  return b;
}
class oE {
  constructor(a, b, c, d) {
    this.left = a;
    this.top = b;
    this.width = c;
    this.height = d;
  }
  rd() {
    return this.top;
  }
  wb() {
    return this.height;
  }
}
function uE(a) {
  let b = {};
  b.x1 = a.yx;
  b.y1 = a.Ax;
  b.x2 = a.zx;
  b.y2 = a.Bx;
  b.x3 = a.g;
  b.y3 = a.j;
  b.x4 = a.i;
  b.y4 = a.l;
  return b;
}
class pE {
  constructor(a, b, c, d, e, f, k, l) {
    this.yx = a;
    this.Ax = b;
    this.zx = c;
    this.Bx = d;
    this.g = e;
    this.j = f;
    this.i = k;
    this.l = l;
  }
}
class mE {
  constructor(a, b, c, d) {
    this.red = a;
    this.green = b;
    this.blue = c;
    this.alpha = d;
  }
}
class ry extends Wm {
  constructor() {
    super();
    this.j = this.i = this.g = this.en = this.id = 0;
    this.color = "rgba(0,0,0.2)";
  }
  Na() {
    let a = super.Na();
    this.Fb(a);
    return a;
  }
  Fb(a) {
    a.id = this.id;
    a.fromChar = this.en;
    a.fromPage = this.g;
    a.toChar = this.i;
    a.toPage = this.j;
    a.color = this.color;
  }
  Ul(a) {
    this.Fb(a);
  }
  Fa(a) {
    super.Fa(a);
    this.id = a.id;
    this.en = a.fromChar;
    this.g = a.fromPage;
    this.i = a.toChar;
    this.j = a.toPage;
    this.color = a.color;
  }
  Ad(a) {
    super.Ad(a);
    "color" in a && (this.color = a.color);
  }
}
function vy(a) {
  return a.Qx() ? !(a.en == a.i && a.g == a.j) : !1;
}
function rE(a, b) {
  a.en = b.fromChar;
  a.g = b.fromPage;
  a.i = b.toChar;
  a.j = b.toPage;
}
function tE(a) {
  let b = {};
  b.fromChar = a.en;
  b.fromPage = a.g;
  b.toChar = a.i;
  b.toPage = a.j;
  return b;
}
class qE {
  constructor() {
    this.g = 0;
    this.en = -1;
    this.j = 0;
    this.i = -1;
  }
  Qx() {
    return -1 != this.en && -1 != this.i && -1 != this.g && -1 != this.j;
  }
}
class KJ {
  constructor() {
    this.S = -1;
    this.g = this.rect = null;
  }
}
function fl(a, b) {
  const c = a.j;
  let d = c, e = 0;
  for (; e < a.wc.length && !(d + a.wc[e].height * a.scale > b || e == a.wc.length - 1); e++) {
    d += a.wc[e].height * a.scale, d += c;
  }
  return new EJ(e, d);
}
function gl(a, b, c) {
  a = a.Ea;
  let d = 0, e = 0;
  for (; a;) {
    d = d + a.offsetLeft - a.scrollLeft, e = e + a.offsetTop - a.scrollTop, a = a.offsetParent;
  }
  return new il(b - d, c - e);
}
function hl(a, b, c) {
  return new FJ(b, c.x - Ez(a, b), c.y - ox(a, b));
}
function jl(a, b) {
  return a.wc[b].width * a.scale;
}
function kl(a, b) {
  return a.wc[b].height * a.scale;
}
function ll(a, b) {
  return 0 <= b && b < a.wc.length ? a.wc[b].fd : -1;
}
function yo(a, b) {
  for (let c = 0; c < a.wc.length; ++c) {
    if (a.wc[c].fd == b) {
      return c;
    }
  }
  return -1;
}
function ox(a, b) {
  let c = a.j, d = a.wc;
  for (let e = 0; e < b; e++) {
    c += d[e].height * a.scale, c += a.j;
  }
  return c;
}
function sy(a, b, c) {
  if (!c && P.l) {
    S.v();
    var d = {baseTextHighlights:[], notesTextHighlights:[], feedbackTextHighlights:[], type:"ANNOTATE_PDF_SET_HIGHTLIGHTS"};
    for (c = 0; c < b.length; ++c) {
      var e = new ry();
      e.Fa(b[c]);
      var f = 1;
      "uDocType" in b[c] && (f = b[c].uDocType);
      1 == f && d.baseTextHighlights.push(b[c]);
      2 == f && d.notesTextHighlights.push(b[c]);
      3 == f && d.feedbackTextHighlights.push(b[c]);
      pu(e, f);
    }
    a.g.g(d);
  } else {
    d = "baseTextHighlights";
    switch(c) {
      case 1:
        d = "baseTextHighlights";
        break;
      case 2:
        d = "notesTextHighlights";
        break;
      case 3:
        d = "feedbackTextHighlights";
    }
    c ? iu(c) : S.v();
    for (e = 0; e < b.length; ++e) {
      if (f = new ry(), f.Fa(b[e]), c) {
        pu(f, c);
      } else {
        let k = Oo(S);
        k && k.ye.push(f);
      }
    }
    c = {type:"ANNOTATE_PDF_SET_HIGHTLIGHTS"};
    c[d] = b;
    a.g.g(c);
  }
}
function Gp(a) {
  gu();
  a.g.g({type:"ANNOTATE_PDF_SET_HIGHTLIGHTS", LO:[]});
}
function aq(a) {
  let b = [];
  for (var c = 0; c < a.wc.length; ++c) {
    b.push(HJ(a.wc[c]));
  }
  for (c = 0; c < a.i.length; ++c) {
    let d = HJ(a.i[c]);
    b.splice(d.pageId, 0, d);
  }
  return b;
}
function Nx(a) {
  let b = LJ(a);
  a.s && (b += a.m + a.j);
  b < a.clientWidth && (b = a.clientWidth);
  return b;
}
function Ox(a) {
  const b = a.j;
  let c = b;
  for (let d = 0; d < a.wc.length; d++) {
    c += a.wc[d].height * a.scale, c += b;
  }
  return c;
}
function oy(a) {
  let b = ju();
  for (let c = 0; c < b.length; ++c) {
    if (b[c].id == a) {
      return b[c];
    }
  }
  return null;
}
function py(a, b, c) {
  var d = S.g, e = oy(b);
  if (!e) {
    return null;
  }
  let f = e.Na();
  e.color = c;
  qu(e);
  e = {type:"ANNOTATE_PDF_UPDATE_HIGHLIGHT"};
  e.id = b;
  e.color = c;
  e.uDocType = d;
  a.g.g(e);
  return f;
}
function qy(a, b) {
  let c = oy(b);
  if (!c) {
    return null;
  }
  hu(c);
  wy(a, b, S.g);
  return c.Na();
}
function ty(a) {
  let b = [];
  if (a) {
    a = a.ye;
    for (let c = 0; c < a.length; ++c) {
      b.push(a[c].Na());
    }
  }
  return b;
}
function uy(a, b, c) {
  if (b) {
    var d = new ry();
    d.Fa(b);
  } else {
    d = null;
  }
  c ? pu(d, c) : ou(d);
  b.type = "ANNOTATE_PDF_ADD_HIGHLIGHT";
  b.uDocType = c;
  a.g.g(b);
  return d;
}
function wy(a, b, c) {
  let d = {type:"ANNOTATE_PDF_DELETE_HIGHLIGHT"};
  d.id = b;
  d.uDocType = c;
  a.g.g(d);
}
function wz(a, b) {
  for (let c = 0; c < a.i.length; ++c) {
    if (a.i[c].fd == b) {
      return a.i[c].g;
    }
  }
  return !1;
}
function xz(a, b) {
  return b >= a.wc.length ? a.wc.length - 1 : 0 < b && b + a.B < a.wc.length ? b + a.B : b;
}
function Ez(a, b) {
  let c = Nx(a);
  var d = LJ(a);
  a.s && (a.clientWidth - d) / 2 < a.m + a.j && (c = 2 * (c - (a.m + a.j) - d) + d);
  if (!a.wc.length) {
    return 0;
  }
  d = a.wc[b];
  return A(d) || a.wc.length <= b ? 0 : (c - d.width * a.scale) / 2;
}
function xE(a, b, c, d) {
  let e = M.o, f = Cn();
  for (let t = 0; t < b.length; t++) {
    b[t].pageId = b[t].pageIndex;
    b[t].pageIndex = yo(a, b[t].pageIndex);
    let x = b[t].recordedCommentMedia;
    if (x && !x.mediaFolderSrc) {
      var k = e + "/" + f + "record/", l = b[t].uDocType;
      l && (k = "", (l = Js(S, l)) && (k = l.Uf), k = e + "/" + k + "record/");
      x.mediaFolderSrc = k;
    }
    l = b[t].replies;
    for (k = 0; k < l.length; k++) {
      if ((x = l[k].recordedCommentMedia) && !x.mediaFolderSrc) {
        var n = e + "/" + f + "record/", p = b[t].uDocType;
        p && (n = "", (p = Js(S, p)) && (n = p.Uf), n = e + "/" + n + "record/");
        x.mediaFolderSrc = n;
      }
    }
  }
  a.g.g({type:c ? "ANNOTATE_PDF_RENDER_COMMENTS_ON_UNDO_REDO" : "ANNOTATE_PDF_RENDER_SAVED_COMMENTS", commentsData:b, bComputeView:d});
}
function MJ(a, b, c, d) {
  a.wc = [];
  for (let e = 0; e < b.length; ++e) {
    let f = new JJ();
    GJ(f, b[e]);
    a.wc.push(f);
  }
  a.Ss = c;
  a.Ea && (b = {type:"ANNOTATE_PDF_SET_ANNOTATION_DATA", pdfAnnotationPages:b, baseTextHighlights:d, maxPageId:a.Ss,}, a.un && a.un.m && -1 != a.un.l && (b.activePageIdx = a.un.l, a.un.m = !1), a.g.g(b));
}
function LJ(a) {
  let b = 2 * a.j, c = a.wc;
  for (let d = 0; d < c.length; d++) {
    let e = c[d];
    b < e.width * a.scale + 2 * a.j && (b = e.width * a.scale + 2 * a.j);
  }
  return b;
}
function NJ(a, b, c, d, e, f, k, l) {
  let n = new JJ();
  n.width = e;
  n.height = f;
  n.fd = c;
  n.Ah = d;
  n.rotation = l;
  n.xb();
  a.wc.splice(b, 0, n);
  k && a.g.g({type:"ANNOTATE_PDF_HANDLE_UNDO_REDO", actionType:"pageinserted", pageId:c, width:e, height:f, pageIndex:b, pdfPageIndex:d, rotation:l});
}
function OJ(a, b, c, d) {
  if (a.wc[b].fd == c) {
    let e = a.wc[b];
    d && a.g.g({type:"ANNOTATE_PDF_HANDLE_UNDO_REDO", actionType:"pageremoved", pageId:c, width:e.width, height:e.height, pageIndex:b, pdfPageIndex:e.Ah});
    a.wc.splice(b, 1);
  }
}
function PJ(a, b, c, d) {
  for (let n = 0; n < b.length; n++) {
    var e = b[n], f = e.pageId;
    if (null != f && void 0 != f && -1 != f) {
      if (c) {
        if (e = e.newPageIndex, null != e && void 0 != e && -1 != e) {
          var k = null;
          for (var l = 0; l < a.i.length; l++) {
            if (a.i[l].fd === f) {
              k = a.i[l];
              a.i.splice(l, 1);
              f = k;
              0 != f.g && (f.g = !1, f.xb());
              break;
            }
          }
          a.wc.splice(e, 0, k);
        }
      } else {
        if (e = yo(a, f), -1 != e) {
          k = 0;
          for (l = 0; l < a.wc.length && a.wc[l].fd != f; ++l) {
            -1 == a.wc[l].Ah && k++;
          }
          a.B = k;
          FD(f);
          f = e = a.wc.splice(e, 1)[0];
          1 != f.g && (f.g = !0, f.xb());
          a.i.push(e);
        }
      }
    }
  }
  d && a.g.g({type:"ANNOTATE_PDF_HANDLE_UNDO_REDO", actionType:"pageshowhide", arrPageInfo:b, bShow:c, bHandlingUndo:d});
}
function QJ(a) {
  var b = S.g, c = Tu(b), d = Eu(b);
  b = Mu(b);
  for (let e = 0; e < c.length; e++) {
    if (c[e].S === a) {
      return !0;
    }
  }
  for (c = 0; c < d.length; c++) {
    if (d[c].S === a) {
      return !0;
    }
  }
  for (d = 0; d < b.length; d++) {
    if (b[d].S === a) {
      return !0;
    }
  }
  return !1;
}
function RJ(a, b, c) {
  var d = !1;
  switch(b.type) {
    case "ANNOTATE_PDF_REQUEST_ACCESS_TOKEN":
      a.g.g({type:"ANNOTATE_PDF_SEND_ACCESS_TOKEN", access_token:M.l});
      d = !0;
      break;
    case "ANNOTATE_SET_ACCESS_TOKEN_FROM_PDF":
      b.access_token && (console.log("[auth] pdf authorization success"), gi(!0, b, !1));
      d = !0;
      break;
    case "ANNOTATE_PDF_OPEN":
      d = !0;
      break;
    case "ANNOTATE_PDF_VIEWER_READY_ON_EXTENSION_INITIALIZED":
    case "ANNOTATE_PDF_VIEWER_READY":
      a.g.ba();
      break;
    case "ANNOTATE_PDF_LOADED":
      a.scale = b.scale;
      c = b.pages;
      a.wc = [];
      var e = b.pageRotation;
      for (var f = 0; f < c.length; ++f) {
        var k = new JJ();
        GJ(k, c[f]);
        e && void 0 != e[f] && null != e[f] && (d = e[f], void 0 != d && null != d && (k.rotation = d));
        a.wc.push(k);
      }
      a.Ss = b.maxPageId;
      a.scrollX = b.scrollX;
      a.scrollY = b.scrollY;
      a.j = b.pageGap;
      a.clientHeight = b.clientHeight;
      a.clientWidth = b.clientWidth;
      a.G = b.renderElementId;
      a.M = b.renderShadowElementId;
      a.s = b.hasComment;
      a.l = b.bCommentOperationsAllowed;
      a.m = b.commentContainerWidth;
      a.o = b.bPageSelectorVisible;
      a.J = b.docTitle;
      a.Ea = document.getElementById(a.G);
      a.Bb = document.getElementById(a.M);
      "uDocType" in b && 3 == b.uDocType && window.postMessage({type:"AnnotateFeedbackPdfViewerReady"}, "*");
      b.bLaunchNotesViewer && ((b = S.l) ? b.bLaunchNotesViewer = !0 : Xs({bLaunchNotesViewer:!0}));
      a.g.N();
      a.g.j();
      a.g.Jb();
      d = !0;
      break;
    case "ANNOTATE_PDF_PAN_ZOOM_CHANGED":
      a.g.i();
      a.scrollX = b.scrollX;
      a.scrollY = b.scrollY;
      a.clientHeight = b.clientHeight;
      a.clientWidth = b.clientWidth;
      a.scale = b.scale;
      a.s = b.hasComment;
      a.m = b.commentContainerWidth;
      a.o = b.bPageSelectorVisible;
      a.g.j();
      Lp(!1);
      d = !0;
      break;
    case "ANNOTATE_PDF_POINTER_EVENTS":
      switch(b.eventType) {
        case 1:
          a.g.ya(new DJ(b));
          break;
        case 2:
          a.g.M(new CJ(b));
          break;
        case 3:
          a.g.s(new CJ(b));
          break;
        case 4:
          a.g.o(new CJ(b));
          break;
        case 5:
          a.g.i();
          break;
        case 8:
          a.g.Ha(new CJ(b));
      }d = !0;
      break;
    case "ANNOTATE_PDF_SELECTION_CHANGED":
      rE(a.selection, b);
      d = null;
      b.point && (d = new il(b.point.x, b.point.y));
      a.g.u(d, b);
      d = !0;
      break;
    case "ANNOTATE_PDF_AREA_SELECTION_CHANGED":
      d = a.C;
      c = b.quadPoint;
      e = b.rect;
      d.S = b.pageIndex;
      d.rect = new oE(e.left, e.top, e.width, e.height);
      d.g = new pE(c.x1, c.y1, c.x2, c.y2, c.x3, c.y3, c.x4, c.y4);
      a.g.l();
      d = !0;
      break;
    case "ANNOTATE_PDF_TEXT_HIGHLIGHT_CLICKED":
      a.g.Va(b.id, new il(b.point.x, b.point.y), b.click);
      break;
    case "ANNOTATE_PDF_PAGE_INSERTED":
      c = b.pageId;
      e = b.pageIndex;
      f = b.width;
      k = b.height;
      var l = b.pdfPageIndex, n = b.rotation;
      a.Ss = b.maxPageId;
      NJ(a, e, c, l, f, k, !1, n);
      a.g.ea(e, c, f, k, l);
      break;
    case "ANNOTATE_PDF_PAGE_REMOVED":
      c = b.pageId;
      e = b.pageIndex;
      f = b.width;
      k = b.height;
      b = b.pdfPageIndex;
      OJ(a, e, c, !1);
      a.g.v(e, c, f, k, b);
      break;
    case "ANNOTATE_PDF_PAGE_SIZE_CHANGED":
    case "ANNOTATE_PDF_PAGE_ROTATED":
      c = b.pageId;
      e = b.pageIndex;
      f = b.width;
      k = b.height;
      l = b.bRight;
      var p = a.wc[e];
      n = b.bHandlingUndo;
      if (p.fd == c) {
        let t = p.width, x = p.height, D = "ANNOTATE_PDF_PAGE_ROTATED" == b.type ? b.origRotation : p.rotation;
        b = "ANNOTATE_PDF_PAGE_ROTATED" == b.type && -1 != D ? b.newRotation : p.rotation;
        IJ(p, f, k);
        let G = p.rotation != b;
        p.rotation = b;
        G && p.xb();
        a.g.ia(e, c, f, k, t, x, l, D, b, n);
      }
      break;
    case "ANNOTATE_PDF_SHOW_HIDE_PAGE":
      PJ(a, b.arrPageInfo, b.bShow, !1);
      a.g.pa(b.arrPageInfo, b.bShow);
      break;
    case "ANNOTATE_PDF_CHECK_PAGE_MEDIA_ELEMENTS":
      a.g.g({type:"ANNOTATE_PDF_CHECK_PAGE_MEDIA_ELEMENTS_RESPONSE", pageContainsMedia:QJ(b.pageId)});
      break;
    case "ANNOTATE_ACTIVE_PAGE_CHANGED":
      c == window && (a.uq = b.uCurPageIdx);
      break;
    case "ANNOTATE_UPDATE_PDF_ACTIVE_PAGE":
      window != window.top && c != window && a.g.g(b);
      break;
    case "ANNOTATE_PDF_ANNOTATION_DATA_TO_EXPORT":
      a.g.mb().pp = !0;
      Mw.g = b.uExportType;
      a.g.B(b.bMaintainDocType);
      d = !0;
      break;
    case "ANNOTATE_PDF_UPDATE_SELECTION_CANVAS":
      a.g.Db();
      break;
    case "ANNOTATE_PDF_SET_DESERIALIZED_PDF_DATA":
      if (b.annotationPages) {
        for (e = b.annotationPages, a.wc = [], c = e.pdfAnnotationPages, a.Ss = e.maxPageId, e = 0; e < c.length; ++e) {
          f = new JJ(), GJ(f, c[e]), a.wc.push(f);
        }
      }
      P.l = b.bIsClassroomGrading;
      a.g.ib(b.annotationData, !0);
      break;
    case "ANNOTATE_PDF_SEND_DRAWN_TEXT_HIGHLIGHTS":
      window != window.top && c == window && (b.type = b.bBaseThumbnail ? "ANNOTATE_SEND_TEACHER_PAGE_THUMBNAIL_FOR_BG" : "ANNOTATE_SEND_STUDENT_PAGE_THUMBNAIL_FOR_BG", window.postMessage(b, "*"));
      break;
    case fE:
      a.g.m(b);
      break;
    case "ANNOTATE_PDF_COMMENT_HIGHLIGHT_SELECTED":
      c = null;
      b.point && (c = new il(b.point.x, b.point.y));
      a.g.G(c, b);
      break;
    case "ANNOTATE_PDF_UPDATE_RENDERER_RECT":
      a.g.Wb(parseFloat(b.PDFRendererLeft), parseFloat(b.PDFRendererWidth));
      break;
    case "ANNOTATE_PDF_ACTIVE_COMMENT_CHANGED":
      a.u = b.commentId;
      a.g.J();
      break;
    case "ANNOTATE_PDF_CHANGE_AUTOSAVE_SETTING":
      Pv.Sj(b.googleCourseWorkDetails);
      a.g.C(b);
      d = !0;
      break;
    case "ANNOTATE_PDF_UPDATE_DIRTY_STATE":
      at(b.bDirty);
      break;
    case IE:
      a.g.lb(b);
      break;
    case "ANNOTATE_PDF_EXERNAL_DOC_GRADING":
      SJ(L.Pb(), !1);
      d = !0;
      break;
    case "webClassroomAssignmentPdf":
      P.Ha = !0;
      L.sa({type:"annotateAnnotationModeGot", value:!1}, null);
      d = !0;
      break;
    case "ANNOTATE_PDF_HANDLE_ANNOTS_AFTER_RETURN_TURNIN":
      Pv.Sj(b.googleCourseWorkDetails);
      d = !0;
      break;
    case "ANNOTATE_PDF_CLOSE_TAB":
      a = {type:"annotateClosePresentationTab"};
      b.bGradingFromIFrame && (a.type = "COMM_UPDATE_GRADE_WITH_ANNOTATE", a.bGradeWithAnnotate = !1, a.bDisposeIframe = !0);
      L.sa(a, null);
      d = !0;
      break;
    case "ANNOTATE_PDF_LAUNCH_NOTES_VIEWER":
      console.log("[notes] on pdf load, open noteview "), (a = S.l) ? a.bLaunchNotesViewer = !0 : Xs({bLaunchNotesViewer:!0}), pw && TJ(), d = !0;
  }
  return d;
}
function UJ(a, b) {
  b = yo(a, b);
  return 0 <= b && b < a.wc.length ? a.wc[b] : null;
}
function VJ(a, b, c, d, e, f, k, l) {
  let n = a.wc[b];
  n.fd == c && (a.g.g({type:"ANNOTATE_PDF_HANDLE_UNDO_REDO", actionType:"pageresized", pageId:c, width:d, height:e, pageIndex:b, bRight:f, rotation:k, bHandlingUndo:l}), IJ(n, d, e), a = n.rotation != k, n.rotation = k, a && n.xb());
}
function WJ(a) {
  let b = [];
  a = a.wc;
  for (let c = 0; c < a.length; c++) {
    b.push(a[c].wi());
  }
  return {pages:b,};
}
function XJ(a, b) {
  if (!b) {
    return null;
  }
  b = a.wc.map(c => HJ(c));
  a = a.i.map(c => HJ(c));
  return {arrPages:b, arrHiddenPages:a,};
}
function YJ(a, b) {
  var c = a.scale;
  0 >= c && (c = 1);
  let d = a.scrollY, e = hl(a, fl(a, d).S, new il(a.scrollX, a.scrollY));
  c = {curPage:a.uq, posData:{pageIndex:fl(a, d).S, scale:c, xPageOffset:e.$a, yPageOffset:e.Ua, width:a.clientWidth, height:a.clientHeight, aspectRatio:null != a.Ea ? a.Ea.offsetWidth / a.Ea.offsetHeight : a.clientWidth / a.clientHeight, bPageSelectorVisible:a.o,},};
  b && (c.pagesData = XJ(a, b));
  return c;
}
function ZJ(a, b) {
  if (b) {
    var c = b.arrPages;
    b = b.arrHiddenPages;
    a.wc = [];
    a.i = [];
    for (var d = 0; d < c.length; ++d) {
      let e = new JJ();
      GJ(e, c[d]);
      a.wc.push(e);
    }
    for (c = 0; c < b.length; ++c) {
      d = new JJ(), GJ(d, b[c]), a.i.push(d);
    }
    a.g.g({type:"ANNOTATE_PDF_HANDLE_LIVEFEED_SYNC", pdfAnnotationPages:aq(a), textHighlights:ty(Oo(S)), maxPageId:a.Ss,});
  }
}
function $J(a, b) {
  return (a = UJ(a, b)) ? a.qe : null;
}
class aK {
  constructor(a) {
    this.g = a;
    this.scale = 1;
    this.selection = new qE();
    this.C = new KJ();
    this.wc = [];
    this.i = [];
    this.j = this.scrollY = this.scrollX = this.B = 0;
    this.clientWidth = this.clientHeight = 1;
    this.N = "";
    this.uq = -1;
    this.un = null;
    this.m = 0;
    this.s = !1;
    this.o = !0;
    this.u = -1;
    this.l = !0;
  }
  v() {
    S.v();
    2 == S.g ? (iu(1), iu(3)) : 3 == S.g && (iu(1), iu(2));
    this.g.g({type:"ANNOTATE_PDF_SET_HIGHTLIGHTS", textHighlights:[], baseTextHighlights:[], notesTextHighlights:[], feedbackTextHighlights:[]});
  }
}
;function bK(a) {
  var b = (new Date()).getTimezoneOffset();
  RegExp("^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}Z$").test(a.i) || (b = 0, a.i = "0000-00-00T00:00:00.000Z");
  var c = a.i.substr(12, 8), d = a.i.substr(0, 10).split("-");
  a = parseInt(d[0].trim(), 10);
  var e = parseInt(d[1].trim(), 10) - 1;
  d = parseInt(d[2].trim(), 10);
  var f = c.split(":");
  c = parseInt(f[0].trim(), 10);
  b = parseInt(f[1].trim(), 10) - b;
  f = parseInt(f[2].trim(), 10);
  a = new Date(a, e, d, c, b, f);
  return "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[a.getMonth()] + " " + a.getDate() + ", " + a.getFullYear();
}
function cK(a) {
  let b = document.createElement("div");
  b.className = "AnnotatePdfFileSelectorCommon AnnotatePdfItem ";
  "-" != a.g && (b.title = a.g);
  var c = document.createElement("div");
  c.className = "AnnotatePdfFileSelectorCommon AnnotatePdfItemPreview";
  c.style.backgroundImage = "url(" + a.qx + ")";
  b.appendChild(c);
  c = document.createElement("div");
  c.className = "AnnotatePdfFileSelectorCommon AnnotatePdfItemInfo";
  b.appendChild(c);
  var d = -1 == a.g.lastIndexOf("/") ? a.g : a.g.substring(a.g.lastIndexOf("/") + 1);
  let e = document.createElement("div");
  e.className = "AnnotatePdfFileSelectorCommon AnnotatePdfItemInfoName";
  e.innerHTML = "Location: " + d;
  c.appendChild(e);
  d = document.createElement("div");
  d.className = "AnnotatePdfFileSelectorCommon AnnotatePdfItemInfoDetail";
  d.innerHTML = "Last Opened: " + bK(a);
  c.appendChild(d);
  b.addEventListener("touchstart", function(f) {
    f.preventDefault();
  }, {capture:!0, passive:!1});
  b.addEventListener("pointerdown", function(f) {
    f.preventDefault();
  }, {capture:!0, passive:!1});
  b.addEventListener("pointerup", function(f) {
    f.preventDefault();
    a.j(a.m, a.l);
  }, {capture:!0, passive:!1});
  return b;
}
class dK {
  constructor(a, b, c, d, e, f) {
    a || (a = "-");
    this.g = a.replace(/\/$/, "");
    this.i = b;
    this.qx = c;
    this.m = d;
    this.l = e;
    this.j = f;
  }
}
;function eK() {
  Pk() && setTimeout(() => {
    L.sa({type:"COMM_MSG_ASSIGNMENT_RETURN"}, null);
  }, 2E3);
}
function fK(a) {
  if (-1 !== a.u.indexOf("classroom.google.com") && !Ph()) {
    document.querySelectorAll('div[data-item-type="assignment"]:not([data-should-create-quiz="true"]), div[data-item-type="1"]:not([data-should-create-quiz="true"])').forEach(c => {
      if (1 == c.nodeType && !c.parentElement.parentElement.querySelector(".create-annotate-assignment-button")) {
        if (c.dataset.Zp) {
          var d = document.createElement("div");
          d.setAttribute("role", "menuitem");
          d.setAttribute("aria-label", "Create Annotate Assignment");
          d.setAttribute("aria-disabled", "false");
          d.setAttribute("data-tooltip", "Create Annotate Assignment");
          d.setAttribute("data-item-type", "annotate-assignment");
          d.setAttribute("data-tooltip-position", "left");
          d.className = "XHsn7e hCfBIe UISY8d-Tvm9db bFjUmb-Wvd9Cc create-annotate-assignment-button";
          d.innerHTML = ' <div class="HaXdpb"></div><div class="HRp7vf MbhUzd" jsname="ksKsZd"></div><content><content><div class="Ip8zfc" jsaction="JIbuQc:ObNs8b"><div class="create-annotate-assignment-icon"></div></div></content></content>';
          c.parentElement.insertBefore(d, c);
          var e = document.createElement("span");
          c.parentElement.insertBefore(e, c.nextSibling);
          e.outerHTML = '<span class="RM9ulf PgfOZ qs41qe" style="bottom: 181.5px;right: 94px;visibility: visible;transform-origin: 100% 50% 0px;transform: translate(0px, 0px);"><span class="R8qYlc"></span><span class="AZnilc">Create Annotate assignment</span></span>';
          d.addEventListener("click", () => {
            document.body.click();
            gK(a);
          });
        } else {
          e = document.createElement("div"), e.innerHTML = '<div class="z80M1 FeRvI create-annotate-assignment-button" aria-label="Annotate Assignment" role="menuitem" tabindex="-1" jsaction="mouseenter:SKyDAe; mouseleave:xq3APb;" jsname="j7LFlb">            \n                                            <div class="PCdOIb Ce1Y1c" aria-hidden="true">\n                                                <span class="create-annotate-assignment-icon" aria-hidden="true"></span>\n                                            </div>    \n                                            <div class="uyYuVb oJeWuf" data-item-type="assignment">\n                                                <div class="jO7h3c">Annotate activity</div>\n                                            </div>\n                                        </div>', 
          d = e.firstElementChild, e.removeChild(d), c.parentElement.parentElement.insertBefore(d, c.parentElement.nextSibling), d.addEventListener("click", () => {
            document.body.click();
            gK(a);
          });
        }
      }
    });
    var b = document.querySelectorAll(hi.pa.MenuParent + ' ul[role="menu"]');
    if (0 != b.length) {
      for (let c = 0; c < b.length; ++c) {
        if (-1 != b[c].textContent.indexOf("Annotate activity")) {
          continue;
        }
        let d = b[c].querySelectorAll("li[role=menuitem]");
        0 != d.length && (1 == d.length ? hK(a, d[0]) : hK(a, d[1]));
      }
    }
  }
}
function iK(a, b) {
  function c(f) {
    var k = document.querySelector("#AnnotateGradingModeBtnText");
    if (f.courseWorkDetails && f.courseWorkDetails.strBaseWebPageUrl) {
      d.i = f.courseWorkDetails.strBaseWebPageUrl, k && d.j && (k.innerHTML = "Grade in a new tab");
    } else {
      if (A(f.courseWorkDetails)) {
        Pv.i = null;
        k && (k.innerHTML = d.j ? "Stop grading with Annotate" : "Grade with Annotate");
        L.sa({type:"AnnotateCheckWebAssignmentForNonAnnotateStudent", fileId:e.ids[0]}, d.ba.bind(d));
        return;
      }
    }
    Pv.i = f.courseWorkDetails;
    jK(d, b);
  }
  let d = a;
  b && a.i && (Pv.i = null, a.s = !1);
  let e = kK();
  0 == e.ids.length ? setTimeout(() => {
    let f = kK();
    a.j && Pk() && 0 < f.ids.length && (console.log(">>>> timeout > sending get req", f), L.sa({type:"AnnotateCheckAndLaunchWebAssignment", fileId:f.ids[0]}, c));
  }, 1000) : Pk() && 0 < e.ids.length && !Pv.i ? (console.log(">>>> sending get req", e), L.sa({type:"AnnotateCheckAndLaunchWebAssignment", fileId:e.ids[0]}, c)) : Pv.i && jK(a, b);
}
function lK() {
  return document.getElementById("material-iframe");
}
function mK(a) {
  a.m || -1 == a.u.indexOf("classroom.google.com") || (a.G || window != window.top || (a.G = !0, document.body.addEventListener("click", a.C.bind(a))), a.m = new MutationObserver(b => {
    b.forEach(c => {
      if (c.addedNodes) {
        for (var d = 0; d < c.addedNodes.length; d++) {
          var e = c.addedNodes[d];
          1 == e.nodeType && (e.attributes && e.attributes["data-item-type"] && ("assignment" == e.attributes["data-item-type"] || "1" == e.attributes["data-item-type"]) || 0 < e.querySelectorAll("[data-item-type='assignment'], [data-item-type='1']").length || 0 < e.querySelectorAll(hi.pa.MenuParent + " li[role=menuitem]").length) && fK(a);
          1 == e.nodeType && "material-iframe" == e.id && e.querySelectorAll("#material-iframe") && iK(a, !0);
        }
      }
    });
  }), a.m.observe(document.body, {subtree:!0, childList:!0}), a.o = new ResizeObserver(b => {
    let c = document.querySelector("#annotate-iframe");
    if (lK()) {
      for (let d of b) {
        b = d.contentRect.width;
        let e = d.contentRect.height;
        b && e && (c.style.width = b + "px", c.style.height = e + "px");
      }
    } else {
      c.style.visibility = "hidden";
    }
  }));
}
function nK(a) {
  let b = "", c = "";
  a && L.Ye() && L.Ye().hd() ? (b = L.Ye().hd().strGoogleCourseSubmissionId, c = L.Ye().hd().strGoogleCourseWorkId) : Pv.pc() && (b = Pv.pc().id, c = Pv.pc().strGoogleCourseWorkId);
  b && (a = {type:"ANNOTATE_SEND_DOC_OPENED", bGoogleAssignmentAutosaved:!0, strGoogleSubmissionId:b}, c && (a.strGoogleCourseWorkId = c), L.sa(a, null));
}
function oK() {
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(a) {
    var b = 16 * Math.random() | 0;
    return ("x" == a ? b : b & 3 | 8).toString(16);
  });
}
function hK(a, b) {
  let c = document.createElement("li");
  c.setAttribute("role", "menuitem");
  c.setAttribute("aria-label", "Create Annotate Assignment");
  c.setAttribute("aria-disabled", "false");
  c.setAttribute("data-tooltip", "Create Annotate Assignment");
  c.setAttribute("data-item-type", "annotate-assignment");
  c.setAttribute("data-tooltip-position", "left");
  c.className = b.className + " create-annotate-assignment-button";
  c.innerHTML = '<span class="VfPpkd-StrnGf-rymPhb-pZXsl"></span><span  class="VfPpkd-StrnGf-rymPhb-f7MjDc"><span class="create-annotate-assignment-icon" aria-hidden="true"></span></span><span jsname="K4r5Ff" class="VfPpkd-StrnGf-rymPhb-b9t22c">Annotate activity</span>';
  b.parentElement.insertBefore(c, b);
  c.addEventListener("click", () => {
    document.body.click();
    gK(a);
  });
}
function gK(a) {
  var b = document.getElementsByClassName("create-annotate-assignment-iframe");
  for (var c = 0; c < b.length; c++) {
    var d = b[c];
    d.parentElement.removeChild(d);
  }
  b = window.location.href.match(/https?:\/\/classroom\.google\.com.*\/[cw]\/([A-z0-9]+)/);
  c = 1 < b.length ? b[1] : null;
  b = a.ea;
  d = oK();
  b += "?extensionToken=" + d;
  null !== c && (b += "&googleCourseAlternateId=" + c);
  b += "&bWebAssignmentSupport=1";
  a.B = {key:d};
  c = document.createElement("iframe");
  c.classList.add("create-annotate-assignment-iframe");
  c.setAttribute("src", b);
  Vn("Loading...", null);
  document.body.appendChild(c);
  a.l = c;
}
function pK(a) {
  let b = lK();
  return b && /\/file\/d\/([A-z0-9-_]+)\/grading/.test(b.src) ? (a = new URL(a.M), a.pathname = "/docs/viewer", a.searchParams.set("state", JSON.stringify(kK())), a.toString()) : b.src;
}
function qK(a) {
  let b = document.createElement("iframe"), c = lK();
  if (c) {
    return b.setAttribute("allow", "display-capture *; accelerometer *; ambient-light-sensor *; autoplay *; camera *;encrypted-media *; fullscreen *; geolocation *; gyroscope *; magnetometer *;microphone *; midi *; payment *; picture-in-picture *; speaker *; usb *; vr *;"), b.setAttribute("id", "annotate-iframe"), b.removeAttribute("style"), b.style.position = "absolute", b.style.borderWidth = "0", b.style.width = c.offsetWidth + "px", b.style.height = c.offsetHeight + "px", b.style.top = c.offsetTop + 
    "px", b.src = "" == a.i ? pK(a) : a.i, document.querySelector("c-wiz").appendChild(b), b;
  }
}
function kK() {
  const a = lK();
  return {action:"open", ids:a ? [a.src.match(/\/d\/([A-z0-9-_]+)\/grading/)[1]] : [], userId:"", pdfData:"", from:"classroomgradingview"};
}
function rK() {
  return document.getElementById("annotate-iframe");
}
function sK(a) {
  return window == window.top && -1 != a.u.indexOf("classroom.google.com") && null != a.u.match("/*g/tg/*");
}
function tK(a, b) {
  if (b && -1 != a.g) {
    L.sa({type:"checkAndSaveBeforeStudentChange", frameId:a.g}, null);
  } else {
    var c = rK();
    null == c ? c = qK(a) : c.src == pK(a) || a.i || (c.src = pK(a));
    a.i && -1 == a.g && c.src != a.M + "/WebAssignment/index.html" ? c.src = a.M + "/WebAssignment/index.html" : !a.v || -1 == a.g || !b && a.s || (console.log(">>>> in RenderAnnotateIframe"), L.sa({type:"CheckWebAssignmentLoadedInIframe", frameId:a.g, courseWorkDetails:Pv.i}, null), a.s = !0);
    lK().style.visibility = "hidden";
    c.style.visibility = "visible";
    a.o.observe(lK());
    a.v && -1 != a.g && L.sa({type:"checkNewTabGradingDocumentOpen", frameId:a.g}, null);
  }
}
function uK() {
  lK() && (lK().style.visibility = "visible");
  rK() && (rK().style.visibility = "hidden");
}
function jK(a, b) {
  a.o.disconnect();
  if ("" != a.i && a.j) {
    tK(a, b);
  } else {
    var c = lK();
    (c = c && /\/file\/d\/([A-z0-9-_]+)\/grading/.test(c.src)) || (c = (c = lK()) && /\/presentation\/d\/([A-z0-9-_]+)\/grading/.test(c.src));
    c && a.j ? tK(a, b) : uK();
  }
}
function vK(a, b) {
  a.g = b;
  var c = 0;
  Vn("Loading web assignment", null);
  b = rK();
  null == b ? b = qK(a) : a.i && b.src != a.i && (b.src = a.i);
  console.log(">> in classroom helper", a.g);
  a.Jd = setInterval(() => {
    c += 1;
    5 < c ? (clearInterval(a.Jd), console.log("could not load assignment in iframe"), Kn("", "Unable to open page in grading view. Open in new tab?", "CANCEL", "OPEN", null, a.N.bind(a))) : (console.log(">> in classroom helper, timer =", c), L.sa({type:"CheckWebAssignmentLoadedInIframe", frameId:a.g, courseWorkDetails:Pv.i}, null), a.s = !0);
  }, 1000);
}
function wK(a) {
  a.v = !0;
  clearInterval(a.Jd);
  Sn();
  console.log("successfully loaded assignment in iframe");
}
function xK(a) {
  a.j && L.sa({type:"COMM_UPDATE_GRADE_WITH_ANNOTATE", bGradeWithAnnotate:!1,}, null);
  if ((a = Pv.i) && "" != a.strCloneAnnotationMapGUID) {
    let b = {type:"annotateOpenSaveAnnotations", strPageUrl:a.strBaseWebPageUrl, strGUID:a.strBaseWebAnnotationGuid, bShared:!0, bOpenInNewTab:!0, bChangeUrlInCurrentTab:!1};
    b.strStudentGuid = a.strStudentGuid;
    b.strGoogleCourseWorkId = a.strGoogleCourseWorkId;
    b.uClassId = a.uClassId;
    b.strInstructorWebAnnotationGuid = a.strInstructorWebAnnotationGuid;
    b.strStudentWebAnnotationGuid = a.strWebAnnotationGuid;
    b.strCloneAnnotationMapGUID = a.strCloneWebAnnotationMapGuid;
    L.sa(b, null);
  }
}
function yK(a, b) {
  var c = !1;
  switch(b.type) {
    case "ANNOTATE_CLOSE_CREATE_GOOGLE_ASSIGNMENT_IFRAME":
      b = document.getElementsByClassName("create-annotate-assignment-iframe");
      for (c = 0; c < b.length; c++) {
        const d = b[c];
        d.parentElement.removeChild(d);
      }
      a.l = null;
      c = !0;
      break;
    case "ANNOTATE_SEND_REQUEST_TO_SERVER":
      a.B && b.token === a.B.key && (a.J(b.uType, b.oRequest, b.url, {requestCtx:b.ctx, type:"googleClassroom"}), c = !0);
      break;
    case "ANNOTATE_CREATE_GOOGLE_ASSIGNMENT_IFRAME_LOADED":
      Sn();
      c = !0;
      break;
    case "ANNOTATE_GET_ACCESS_TOKEN":
      console.log(">> send current token to assignment dialog");
      a.l.contentWindow.postMessage({type:"ANNOTATE_GAPI_ACCESS_TOKEN", tokenResponse:{access_token:M.l}}, "*");
      c = !0;
      break;
    case "ANNOTATE_SET_ACCESS_TOKEN":
      console.log(">> set new token recieved from assignment dialog"), gi(!0, b.data, !1), c = !0;
  }
  return c;
}
class zK {
  constructor(a) {
    this.m = null;
    this.u = window.location.href;
    this.ea = a + "/CreateGoogleAssignment/index.html";
    this.B = this.l = null;
    this.J = this.J.bind(this);
    this.j = !1;
    this.M = a;
    this.Jd = this.g = -1;
    this.i = "";
    this.G = this.s = this.v = !1;
  }
  C(a) {
    if (a.target && a.composedPath()) {
      var b = !1;
      for (let c = 0; c < a.composedPath().length && !(5 < c); c++) {
        if (a.composedPath()[c].className && "string" == typeof a.composedPath()[c].className && -1 != a.composedPath()[c].className.indexOf(hi.pa.ReturnBtn)) {
          b = !0;
          break;
        }
      }
      b && (console.log("return button click detected"), eK(), document.body.removeEventListener("click", this.C.bind(this)), this.G = !1);
    }
  }
  U() {
    window == window.top && (document.getElementById("AnnotateGradingModeDiv") && document.getElementById("AnnotateGradingModeDiv").remove(), document.body.removeEventListener("click", this.C.bind(this)));
    this.m && (this.m.disconnect(), this.m = null);
    var a = document.getElementsByClassName("create-annotate-assignment-button");
    for (var b = 0; b < a.length; b++) {
      var c = a[b];
      c.parentElement.removeChild(c);
    }
    a = document.getElementsByClassName("create-annotate-assignment-iframe");
    for (b = 0; b < a.length; b++) {
      c = a[b], c.parentElement.removeChild(c);
    }
    this.l = null;
    (a = document.getElementById("annotate-iframe")) && a.parentElement.removeChild(a);
    this.j = !1;
    this.o && (this.o.disconnect(), this.o = null);
  }
  ba(a) {
    if (a.courseWorkDetails && a.courseWorkDetails.strBaseWebPageUrl) {
      console.log("non annotate getcoursework success", a);
      var b = document.querySelector("#AnnotateGradingModeBtnText");
      this.i = a.courseWorkDetails.strBaseWebPageUrl;
      b && this.j && (b.innerHTML = "Grade in a new tab");
      a.courseWorkDetails.bNonAnnotateStudent = !0;
      Pv.i = a.courseWorkDetails;
      jK(this, !0);
    } else {
      jK(this, !0), console.log("non annotate getcoursework failure", a);
    }
  }
  N() {
    this.j && this.v ? L.sa({type:"saveBeforeOpeningNewGradingTab", frameId:this.g}, null) : xK(this);
  }
  J(a, b, c, d) {
    L.sa({type:"SendRequestToServer", uType:a, url:c, oRequest:b, ctx:d}, e => {
      var f = e.ctx;
      let k = !1;
      "googleClassroom" == f.type && this.l && (this.l.contentWindow.postMessage({type:"ANNOTATE_RECEIVE_RESPONSE_FROM_SERVER", res:e.res, ctx:f.requestCtx}, "*"), k = !0);
      if (k) {
        return !0;
      }
    });
  }
}
;function AK(a) {
  var b = BK;
  if (P.s) {
    var c = () => {
      Zh(P.s, a);
    };
    1 == document.getElementsByClassName("create-gapi-frame").length ? Zh(P.s, a) : Yh(P.s, c, b);
  }
}
function CK(a) {
  W.startTime = performance.now();
  AK({type:"slidesClassroomAuth", action:"getGoogleCourseWorkDetails", courseWorkDetails:a});
}
function DK(a) {
  W.startTime = performance.now();
  AK({type:"slidesClassroomAuth", action:"getAllStudentsGoogleCourseWorkDetails", courseWorkDetails:a});
}
function EK(a) {
  console.log(">>>turnin assignment callback after iframe launch");
  AK({type:"slidesClassroomAuth", action:"turnIn", courseWorkDetails:a});
}
function FK(a) {
  P.s && (console.log(">>>return assignment"), AK({type:"slidesClassroomAuth", action:"returnClassroomAssignment", courseWorkDetails:a}));
}
function GK(a, b, c) {
  P.s && AK({type:"slidesClassroomAuth", action:"gradeClassroomAssignment", courseWorkDetails:a, grade:b, bReturnAssignment:c});
}
function HK(a, b) {
  L.sa({type:"COMM_UPDATE_SUBMISSION_STATE", courseWorkDetails:{id:b.id, strGoogleCourseSubmissionId:b.strGoogleCourseSubmissionId,}, bSubmitted:a ? 1 : 0}, null);
}
function IK(a, b) {
  let c = L.Ye(), d = L.Bm();
  Ol(P) && c && c.hd().strBaseWebPageUrl ? (console.log(" >>>>>> web google course work details received", b), c.Sj(b), c.vk(a, !0, null), c.Qt()) : d && (d.Sj(b), JK(d, !0), d.vk(a, !0), HK("TURNED_IN" == d.pc().state ? !0 : !1, d.hd()));
}
class KK {
  constructor() {
    this.l = null;
    this.j = this.g = !1;
    this.i = null;
  }
  Sj(a) {
    this.l = a;
  }
  pc() {
    return this.l;
  }
  vk(a, b, c) {
    Rl() && L.Ye() ? L.Ye().vk(a, b, c) : (Gk(P) || Jk(P)) && L.Bm() && L.Bm().vk(a, b);
  }
  Pr() {
    Rl() && L.Ye().Pr();
  }
}
var Pv = new KK();
class LK {
  constructor(a, b, c) {
    var d = Ql;
    this.i = a;
    this.j = b;
    this.l = c;
    this.g = d;
  }
}
function xs() {
  var a = L.Bm();
  S.Vl() && Kh() && (Gk(P) || Qk()) && MK(a, !1, "");
}
function JK(a, b) {
  a.j && Ph() && Jh() ? "CREATED" == a.j.state || "RECLAIMED_BY_STUDENT" == a.j.state ? (MK(a, !1, ""), NK(a, !0)) : "RETURNED" == a.j.state ? (MK(a, !1, ""), A(a.g) && OK(a), a.g && (a.g.style.display = "block", a.g.innerText = "RESUBMIT"), a.l && (a.l.style.display = "block")) : "TURNED_IN" == a.j.state ? (NK(a, !1), MK(a, !0, "TURNED IN")) : NK(a, !1) : a.j && Kh() && Jh() ? "TURNED_IN" == a.j.state ? (PK(a, !0), Qk() || QK(a, !0)) : QK(a, !1) : NK(a, !1);
  if (b) {
    b = a.hd();
    a.s = null != b;
    let c = {type:"ANNOTATE_PDF_CHANGE_AUTOSAVE_SETTING", uUserType:M.j, bAutoSaveEnabled:RK(a), bGoogleClassroomSubmission:a.s, strGoogleCourseSubmissionId:b ? b.strGoogleCourseSubmissionId : "", uGoogleAssignmentSubmissionId:b ? parseInt(b.id) : -1};
    Ch() ? (c.strWebAnnotationGuid = b ? b.strWebAnnotationGuid : null, c.strInstructorWebAnnotationGuid = b ? b.strInstructorWebAnnotationGuid : null) : (c.uWebAnnotationId = b && b.uWebAnnotationId ? parseInt(b.uWebAnnotationId) : -1, c.uInstructorWebAnnotationId = b && b.uInstructorWebAnnotationId ? parseInt(b.uInstructorWebAnnotationId) : -1);
    Lk() || Gk(P) ? a.v.j(c) : (Kk(P) || Qk()) && a.v.l(c);
  }
}
function SK(a) {
  if ((!Ph() || !Gk(P) && !Qk()) && document.body) {
    var b = document.getElementById("workspace-container"), c = document.getElementsByClassName("punch-viewer-page-wrapper-container")[0];
    if (c && (Qk() || Kk(P))) {
      b = c.getBoundingClientRect();
    } else if (b && (Gk(P) || Lk())) {
      b = b.getBoundingClientRect();
    } else {
      return;
    }
    c = document.createElement("div");
    c.id = "AnnotateDropUpUpdateSlidesBtn";
    c.className = "extension_reset_css ";
    c.style.height = "28px";
    c.style.width = "120px";
    c.style.position = "absolute";
    c.style.cursor = "pointer";
    c.style.left = b.left + b.width - 121 - 8 + "px";
    c.style.top = b.top + b.height - 36 - 28 - 8 + "px";
    c.style.lineHeight = "28px";
    c.style.borderRadius = "2px";
    c.style.border = "1px solid rgba(0,0,0,0.2)";
    c.style.boxShadow = "0 2px 4px rgb(0 0 0 / 20%)";
    c.style.backgroundColor = "#FFFFFF";
    c.style.color = "rgba(0, 0, 0, 0.87)";
    c.innerText = "UPDATE SLIDES";
    c.style.fontSize = "14px";
    c.style.textAlign = "center";
    c.style.display = "none";
    c.style.zIndex = "2147483644";
    c.addEventListener("pointerdown", a.ea, {capture:!0, passive:!1});
    a.m = c;
    document.body.appendChild(c);
  }
}
function TK(a) {
  if ((!Ph() || !Gk(P) && !Qk()) && document.body) {
    var b = document.getElementById("workspace-container"), c = document.getElementsByClassName("punch-viewer-page-wrapper-container")[0];
    if (c && (Qk() || Kk(P))) {
      b = c.getBoundingClientRect();
    } else if (b && (Gk(P) || Lk())) {
      b = b.getBoundingClientRect();
    } else {
      return;
    }
    c = document.createElement("div");
    c.id = "AnnotateUpdateSlidesBtn";
    c.className = "extension_reset_css ";
    c.style.height = "36px";
    c.style.width = "136px";
    c.style.position = "absolute";
    c.style.cursor = "pointer";
    c.style.left = b.left + b.width - 136 - 8 + "px";
    c.style.top = b.top + b.height - 36 - 8 + "px";
    c.style.lineHeight = "36px";
    c.style.borderRadius = "2px";
    c.style.backgroundColor = "#0084ff";
    c.style.color = "#FFFFFF";
    c.innerText = "UPDATE SLIDES";
    c.style.fontSize = "14px";
    c.style.textAlign = "center";
    c.style.display = "none";
    c.style.zIndex = "2147483644";
    c.addEventListener("pointerdown", a.ea, {capture:!0, passive:!1});
    a.i = c;
    document.body.appendChild(c);
  }
}
function OK(a) {
  if ((!Ph() || !Gk(P) && !Qk()) && document.body) {
    var b = document.getElementById("workspace-container"), c = document.getElementsByClassName("punch-viewer-page-wrapper-container")[0];
    if (c && (Qk() || Kk(P))) {
      b = c.getBoundingClientRect();
    } else if (b && (Gk(P) || Lk())) {
      b = b.getBoundingClientRect();
    } else {
      return;
    }
    c = document.createElement("div");
    c.id = "AnnotateTurnInBtn";
    c.className = "extension_reset_css ";
    c.style.height = "36px";
    c.style.width = "85px";
    c.style.position = "absolute";
    c.style.cursor = "pointer";
    c.style.left = b.left + b.width - 121 - 8 + "px";
    c.style.top = b.top + b.height - 36 - 8 + "px";
    c.style.lineHeight = "36px";
    c.style.backgroundColor = "#0084ff";
    c.style.color = "#FFFFFF";
    c.innerText = "TURN IN";
    c.style.fontSize = "14px";
    c.style.textAlign = "center";
    c.style.display = "none";
    c.style.zIndex = "2147483644";
    c.addEventListener("pointerdown", a.ya, {capture:!0, passive:!1});
    a.g = c;
    document.body.appendChild(c);
    c = document.createElement("div");
    c.id = "AnnotateGCLassroomDropUpBtn";
    c.className = "extension_reset_css extension_icon extension_icon-chevron_up";
    c.style.height = "36px";
    c.style.width = "36px";
    c.style.position = "absolute";
    c.style.cursor = "pointer";
    c.style.left = b.left + b.width - 36 - 8 + "px";
    c.style.top = b.top + b.height - 36 - 8 + "px";
    c.style.lineHeight = "36px";
    c.style.backgroundColor = "#0084ff";
    c.style.color = "#FFFFFF";
    c.style.textAlign = "center";
    c.style.display = "none";
    c.style.zIndex = "2147483644";
    c.addEventListener("pointerdown", a.pa, {capture:!0, passive:!1});
    a.l = c;
    document.body.appendChild(c);
  }
}
function UK(a) {
  if ((!Ph() || !Gk(P) && !Qk()) && document.body) {
    var b = document.getElementById("workspace-container"), c = document.getElementsByClassName("punch-viewer-page-wrapper-container")[0];
    if (c && (Qk() || Kk(P))) {
      b = c.getBoundingClientRect();
    } else if (b && (Gk(P) || Lk())) {
      b = b.getBoundingClientRect();
    } else {
      return;
    }
    c = document.createElement("div");
    c.id = "AnnotateSlidesClassroomStatusWidget";
    c.className = "extension_reset_css";
    c.style.height = "36px";
    c.style.width = "136px";
    c.style.position = "absolute";
    c.style.border = "1px solid #808080";
    c.style.left = b.left + b.width - 136 - 8 + "px";
    c.style.top = b.top + b.height - 36 - 8 + "px";
    c.style.lineHeight = "36px";
    c.style.backgroundColor = "#FFFFFF";
    c.style.color = "#808080";
    c.style.textAlign = "center";
    c.style.display = "none";
    c.style.fontSize = "14px";
    c.innerText = "TURNED IN";
    c.style.zIndex = "2147483645";
    a.tk = c;
    document.body.appendChild(c);
  }
}
function VK(a, b) {
  b ? (A(a.m) && SK(a), a.m && (a.m.style.display = "block")) : a.m && (a.m.style.display = "none");
}
function RK(a) {
  let b = a.o ? parseInt(a.o.id) : -1;
  return "" != (a.o ? a.o.strGoogleCourseSubmissionId : "") && -1 != b && a.j && Jh() ? Kh() && "TURNED_IN" == a.j.state || Ph() && ("CREATED" == a.j.state || "RECLAIMED_BY_STUDENT" == a.j.state || "RETURNED" == a.j.state) ? !0 : !1 : !1;
}
function PK(a, b) {
  b ? (A(a.i) && TK(a), a.i && a.J && (a.i.style.display = "block")) : a.i && (a.i.style.display = "none");
}
function NK(a, b) {
  b ? (A(a.g) && OK(a), a.g && (a.g.style.display = "block", a.g.innerText = "TURN IN"), a.l && (a.l.style.display = "block")) : (a.g && (a.g.style.display = "none"), a.l && (a.l.style.display = "none"));
}
function QK(a, b) {
  if (a.i) {
    if (b) {
      a.i.style.pointerEvents = "auto", a.i.style.cursor = "pointer", a.i.style.opacity = "1";
    } else {
      if (Gk(P) || Lk()) {
        a.i.style.pointerEvents = "none", a.i.style.cursor = "default";
      }
      a.i.style.opacity = "0.44";
    }
  }
}
function WK(a) {
  let b = document.getElementById("AnnotateGCLassroomDropUpBtn");
  if (a.g) {
    if (Gk(P) || Lk()) {
      a.g.style.pointerEvents = "none", a.g.style.cursor = "default", b.style.pointerEvents = "none", b.style.cursor = "default";
    }
    a.g.style.opacity = "0.44";
    b.style.opacity = "0.44";
  }
}
function MK(a, b, c) {
  b ? (A(a.tk) && UK(a), a.tk && (a.tk.innerText = c, a.tk.style.display = "block")) : a.tk && (a.tk.style.display = "none");
}
function XK(a) {
  var b = document.getElementById("workspace-container"), c = document.getElementsByClassName("punch-viewer-page-wrapper-container")[0];
  if (c && (Qk() || Kk(P))) {
    b = c.getBoundingClientRect();
  } else if (b && (Gk(P) || Lk())) {
    b = b.getBoundingClientRect();
  } else {
    return;
  }
  c = 8;
  if (Qk() || Kk(P)) {
    c = 16;
  }
  a.i && (a.i.style.left = b.left + b.width - 136 - c + "px", a.i.style.top = b.top + b.height - 36 - c + "px");
  a.g && (a.g.style.left = b.left + b.width - 121 - c + "px", a.g.style.top = b.top + b.height - 36 - c + "px");
  a.l && (a.l.style.left = b.left + b.width - 36 - c + "px", a.l.style.top = b.top + b.height - 36 - c + "px");
  a.tk && (a.tk.style.left = b.left + b.width - 136 - c + "px", a.tk.style.top = b.top + b.height - 36 - c + "px");
  a.m && (a.m.style.left = b.left + b.width - 121 - c + "px", a.m.style.top = b.top + b.height - 36 - 28 - c + "px");
}
function YK(a) {
  function b(d) {
    if ("courseworkDetailsSuccess" == d.type) {
      if (d.error || 0 == d.courseWorkDetails.length) {
        Gk(P) && (so(3), S.La || (Ls(3), MK(c, !0, "CHANGES SAVED")), S.Ya || Ls(2));
      } else {
        Vn("Loading slides...", null);
        var e = c;
        e.o = d.courseWorkDetails[0];
        e.s = !0;
        CK(e.o);
      }
    }
  }
  let c = a;
  !a.hd() && (Gk(P) || Jk(P) && Ph() && !Kk(P)) && (a = window.location.href, -1 != a.indexOf("docs.google.com/presentation/d/") && L.sa({type:"annotateGetSlidesClassroomCourseWorkInfo", presentationId:a.substring(a.indexOf("docs.google.com/presentation/d/") + 31, a.indexOf("/", a.indexOf("docs.google.com/presentation/d/") + 31)), bTeacher:Kh()}, b));
}
function ZK(a) {
  if (!a.s && !Gk(P)) {
    return Sn(), !1;
  }
  if (1 == a.Qq) {
    return EK(a.o), a.v.g && Hs(a.v.g, !1, !1), !0;
  }
  Sn();
  return 0 == a.Qq ? (Kh() && MK(a, !0, "CHANGES SAVED"), a.v.g && Hs(a.v.g, !1, !1), !0) : !1;
}
function $K(a) {
  a.i && (a.i.style.display = "none");
  a.g && (a.g.style.display = "none");
  a.m && (a.m.style.display = "none");
  a.tk && (a.tk.style.display = "none");
  a.l && (a.l.style.display = "none");
}
class aL {
  constructor(a) {
    this.v = a;
    this.l = this.tk = this.m = this.g = this.i = null;
    this.B = !1;
    this.j = this.o = null;
    this.s = !1;
    this.Qq = 0;
    this.J = this.nu = !1;
    this.ea = this.ea.bind(this);
    this.C = this.C.bind(this);
    this.ya = this.ya.bind(this);
    this.N = this.N.bind(this);
    this.pa = this.pa.bind(this);
    this.G = this.G.bind(this);
    this.u = this.u.bind(this);
    this.ia = this.ia.bind(this);
    this.ba = this.ba.bind(this);
    this.M = this.M.bind(this);
    if (Jk(P) || Qk()) {
      SK(this), TK(this), OK(this), UK(this);
    }
  }
  ea(a) {
    a.preventDefault();
    Gk(P) || Lk() ? window.addEventListener("pointerup", this.C, {capture:!0, passive:!1}) : (Qk() || Kk(P)) && window.addEventListener("pointerup", this.ia, {capture:!0, passive:!1});
  }
  C(a) {
    a.preventDefault();
    window.removeEventListener("pointerup", this.C, {capture:!0});
    this.m && "block" == this.m.style.display && (VK(this, !1), this.B = !1);
    this.Qq = 0;
    Pn("Updating file on Google Drive...", "Updating Slides");
    a: {
      a = iv();
      for (b in a) {
        let c = a[b];
        if (c.arrMediaAttachments && 0 < c.arrMediaAttachments.length) {
          for (let d = 0; d < c.arrMediaAttachments.length; d++) {
            for (let e = 0; e < c.arrMediaAttachments[d].arrMedia.length; e++) {
              if (0 == c.arrMediaAttachments[d].arrMedia[e].bReencoded) {
                var b = !0;
                break a;
              }
            }
          }
        }
      }
      b = !1;
    }
    b ? (this.nu = !0, Hs(this.v.g)) : this.v.i(!0);
  }
  ia(a) {
    a.preventDefault();
    window.removeEventListener("pointerup", this.ia, {capture:!0});
    RK(this) ? Kn("", "Please exit presentation mode to save changes to the document.", "", "OK", null, null) : Qk() && !this.hd() ? Kn("", "Please exit presentation mode to save changes to the document.", "", "OK", null, null) : Kn("", "Assignment not turned in by student. Unable to save feedback.", "", "OK", null, null);
  }
  ya(a) {
    a.preventDefault();
    Gk(P) || Lk() ? window.addEventListener("pointerup", this.N, {capture:!0, passive:!1}) : (Qk() || Kk(P)) && window.addEventListener("pointerup", this.ba, {capture:!0, passive:!1});
  }
  N(a) {
    a && (a.preventDefault(), window.removeEventListener("pointerup", this.N, {capture:!0}));
    Pn("Submitting the assignment...", "Turn In");
    this.Qq = 1;
    Jv.Pc.cg ? (this.nu = !0, Vw(Jv.Pc)) : this.v.i(!0);
  }
  ba(a) {
    a && (a.preventDefault(), window.removeEventListener("pointerup", this.ba, {capture:!0}));
    Kn("", "Please exit presentation mode to turn in your assignment.", "", "OK", null, null);
  }
  pa(a) {
    a.preventDefault();
    Gk(P) || Lk() ? window.addEventListener("pointerup", this.G, {capture:!0, passive:!1}) : (Qk() || Kk(P)) && window.addEventListener("pointerup", this.M, {capture:!0, passive:!1});
  }
  M(a) {
    a && (a.preventDefault(), window.removeEventListener("pointerup", this.M, {capture:!0}));
    Kn("", "Please exit presentation mode to turn in your assignment.", "", "OK", null, null);
  }
  G(a) {
    a.preventDefault();
    window.removeEventListener("pointerup", this.G, {capture:!0});
    this.B ? (this.B = !1, VK(this, !1), window.removeEventListener("pointerdown", this.u, {capture:!0})) : (this.B = !0, VK(this, !0), window.addEventListener("pointerdown", this.u, {capture:!0, passive:!1}));
  }
  u(a) {
    a.preventDefault();
    window.removeEventListener("pointerdown", this.u, {capture:!0});
    a.target != this.l && (this.B = !1, VK(this, !1));
  }
  Sj(a) {
    Pv.Sj(a);
    this.j = a;
  }
  pc() {
    return this.j;
  }
  hd() {
    return this.o;
  }
  Ja() {
    return this.s;
  }
  vk(a, b) {
    if (b) {
      "turnin" == a && Kn("", "Your assignment was submitted successfully.", "", "OK", null, null);
    } else {
      let c = this;
      "auth" != a || this.j ? 1 != this.Qq || "auth" != a && "turnin" != a ? 0 != this.Qq || "auth" != a && "update" != a || (Sn(), Kn("Error", "Could not update the document on drive.", "", "CLOSE", null, null)) : (Sn(), Kn("Error", "Could not turn in the assignment.", "", "CLOSE", null, null)) : Kn("", "Error loading assignment status. Please try again.", "CLOSE", "RETRY", null, function() {
        Vn("Loading slides...", null);
        CK(c.o);
      });
    }
  }
  U() {
    ["AnnotateGCLassroomDropUpBtn", "AnnotateTurnInBtn", "AnnotateUpdateSlidesBtn", "AnnotateDropUpUpdateSlidesBtn", "AnnotateSlidesClassroomStatusWidget"].forEach(a => {
      for (; document.getElementById(a);) {
        document.getElementById(a).remove();
      }
    });
    window.removeEventListener("pointerup", this.C);
  }
}
;var kJ = "UploadImageToS3", dJ = "zeroAnnotationsError", $h = 1, fJ = 2, eJ = 3, BK = 4;
class bL {
  constructor(a, b, c) {
    this.j = a;
    this.g = b;
    this.i = c;
  }
}
function Yh(a, b, c) {
  a.i = c;
  a.j = setTimeout(() => {
    cJ(a, {type:"exportError", error:"Iframe loading error"});
    a.j = -1;
  }, 30000);
  c = document.getElementsByClassName("create-gapi-frame");
  for (var d = 0; d < c.length; d++) {
    const e = c[d];
    e.parentElement.removeChild(e);
  }
  c = M.pf;
  d = cL();
  d = `<iframe src="${c + ("?extensionToken=" + d)}" class="create-gapi-frame" id="GapiFrame" seamless></iframe>`;
  c = document.createElement("div");
  c.innerHTML = d;
  d = c.firstElementChild;
  c.removeChild(d);
  document.body.appendChild(d);
  a.g = d;
  a.g.style.zIndex = "100000000000000";
  a.g.style.display = "none";
  a.g.onload = function() {
    clearTimeout(a.j);
    b();
  };
}
function Zh(a, b) {
  try {
    let c = a.g;
    c || (c = document.getElementById("GapiFrame"));
    let d = c.src, e = d.substring(0, d.indexOf("?"));
    b.serverUrl = M.J;
    a.g.contentWindow.postMessage(b, e);
  } catch (c) {
  }
}
function cJ(a, b) {
  let c = !1;
  if (b.type === kJ) {
    L.sa({type:kJ, data:{mediaData:b.mediaData, arrImgData:b.arrImgData,},}, e => {
      if (-1 == a.l) {
        return !0;
      }
      -1 != a.l && (clearTimeout(a.l), a.l = -1, Zh(a, e));
    }), a.l = setTimeout(function() {
      a.l = -1;
      cJ(a, {type:"exportError", error:"Image upload Timeout"});
    }, 3E4), c = !0;
  } else if ("exportSuccess" === b.type) {
    dL(a);
    if (a.i === eJ) {
      In.j(!0), Jp(!0), a.m.i();
    } else {
      let e = () => {
        L.sa({type:"userRedirectUrl", url:b.userUrl}, null);
      };
      eL(() => {
        Kn(null, "Your annotations were exported.", "CLOSE", "OPEN FILE", null, e, null, null, !1, null, !1, -1, -1, !1, null, null);
      });
    }
    c = !0;
  } else if ("partialExportSuccess" === b.type) {
    dL(a);
    if (a.i == eJ) {
      Sn();
      console.log("[Slides Export] partially exported");
      return;
    }
    let e = () => {
      L.sa({type:"userRedirectUrl", url:b.userUrl}, null);
    };
    eL(() => {
      Kn(null, "A few elements could not be exported.", "CLOSE", "OPEN FILE", null, e, null, null, !1, null, !1, -1, -1, !1, null, null);
    });
    c = !0;
  } else if ("exportError" === b.type) {
    a.U(), a.i == fJ ? fL(a, "There was an issue in exporting your annotations. Please try again later.") : a.i == eJ ? Pv.vk("update", !1, null) : Pv.vk("iframe_load", !1), b.error && console.log("[Slides Export] ", b.error), c = !0;
  } else if ("exportProgress" === b.type) {
    -1 != GB && (HB = b.progressPercent);
  } else if ("signInError" === b.type) {
    a.U(), a.i == fJ || a.i == eJ ? fL(a, "There was an issue with your google credentials. Try signing in again.") : Pv.vk("auth", !1), c = !0;
  } else if ("fileConversionStarted" === b.type) {
    Vn("Converting your file to google slides", null), c = !0;
  } else if ("fileConversionFailed" === b.type) {
    dL(a), Kn(null, "File conversion failed.", null, "CANCEL", null, null, null, null, !1, null, !1, -1, -1, !1, null, null), c = !0;
  } else if ("exportStarted" === b.type) {
    dL(a), Kn(null, "Exporting slides with annotations...", null, "CANCEL", null, () => {
      -1 !== a.l && (clearTimeout(a.l), a.l = -1);
      a.U();
    }, null, null, null, null, !0, 0, 100), c = !0;
  } else if ("setNewAccessToken" === b.type) {
    var d = b.data;
    d && d.access_token && gi(!0, d, !1);
  } else {
    "getAuthTokenSuccess" === b.type ? (console.log("[auth] gapi authorization success"), console.log(b), b.bDontHideIframe || dL(a), (d = b.data) && d.access_token ? a.m.g(!0, d) : (a.m.g(!1, {err:"Unable to get access token"}), gw("Unable to get access token", !1))) : "getAuthTokenFailed" === b.type ? (dL(a), b.err && (d = b.err, "popup_closed_by_user" == b.err && (d = "Popup closed by user"), gw(d, !1), a.m.g(!1, b), d = {type:"gotAuthTokenError"}, b.errType && (d.errType = b.errType), L.sa(d, 
    null))) : b.type === dJ ? (a.U(), -1 != a.j && (clearTimeout(a.j), a.j = -1), a.m.i() && a.i != fJ || Kn(null, "No Annotations found.", null, "CANCEL", null, null, null, null, !1, null, !1, -1, -1, !1, null, null), c = !0) : "hideFrame" === b.type ? (Sn(), dL(a), c = !0) : "showFrame" === b.type ? (gL(a), clearTimeout(a.j), -1 != a.j && (clearTimeout(a.j), a.j = -1), c = !0) : "showLoading" === b.type ? (Vn("Loading...", null), c = !0) : "authorizeSuccess" === b.type ? (Vn("Signing you in...", 
    null), c = !0) : "authorizeFailed" === b.type ? (hL(a), c = !0) : "gapiInitError" === b.type ? (a.U(), a.i == fJ || a.i == eJ ? fL(a, "Unable to initialize slides api.") : a.m.g(!1, b), c = !0) : "googleCourseWorkDetailsRes" == b.type ? (Sn(), Rl() || dL(a), b.gCourseWorkDetails && IK(b.action, b.gCourseWorkDetails), c = !0) : "allGoogleCourseWorkDetailsResponse" == b.type ? (b.gCourseWorkDetails && Pv.vk(b.action, !0, b), c = !0) : "ClassroomReturnMultipleResponse" == b.type ? (Sn(), console.log(b), 
    Pv.vk(b.action, b.bSuccess, b.result), c = !0) : "slidesClassroomTurnInRes" == b.type ? (b.turnedInSuccess ? console.log("turn in response received") : (Sn(), dL(a), Kn("", "Could not turn in the assignment.", "", "CLOSE", null, null)), c = !0) : "ClassroomGradeResponse" == b.type || "ClassroomReturnResponse" == b.type || "ClassroomTurnInResponse" == b.type ? (Pv.vk(b.action, b.bSuccess, b.data), c = !0) : "TOGGLE_IFRAME_VISIBILITY" === b.type ? (iL(b.bShow), c = !0) : "AUTH_IN_PROGRESS" === 
    b.type ? (a.Pr(), c = !0) : "AUTH_SUCCESS" === b.type && (b.bSuccess && Rl() && (a.i != fJ && Pv.vk("auth", !0, null), iL(!1)), c = !0);
  }
  return c;
}
function cL() {
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(a) {
    var b = 16 * Math.random() | 0;
    return ("x" == a ? b : b & 3 | 8).toString(16);
  });
}
function dL(a) {
  if (a.g) {
    a.g.style.display = "none";
  } else {
    if (a = document.getElementById("GapiFrame")) {
      a.style.display = "none";
    }
  }
}
function iL(a) {
  document.getElementById("GapiFrame").style.visibility = a ? "visible" : "hidden";
}
function gL(a) {
  if (a.g) {
    a.g.style.display = "block", Rl() && iL(!1);
  } else {
    if (a = document.getElementById("GapiFrame")) {
      a.style.display = "block", Rl() && iL(!1);
    }
  }
}
function hL(a) {
  Sn();
  dL(a);
  a.i != fJ && Pv.vk("auth", !1);
}
function eL(a) {
  -1 != GB ? (HB = 100, a && setTimeout(a, 1000)) : a && a();
}
function fL(a, b) {
  Kn(null, b, "CANCEL", "RETRY", null, () => {
    a.m.j(!1);
  }, null, null, !1, null, !1, -1, -1, !1, null, null);
}
class jL {
  constructor(a) {
    this.m = a;
    this.g;
    this.j = this.l = -1;
    this.i = $h;
  }
  U() {
    let a = document.getElementsByClassName("create-gapi-frame");
    for (let b = 0; b < a.length; b++) {
      const c = a[b];
      c.parentElement.removeChild(c);
    }
    this.g = null;
  }
  Pr() {
    Pv.Pr();
  }
}
;var kL = !1, TA = !1, VA = !1, lL = !1, mL = !1, nL = [], oL = "", pL = null;
(function() {
  mL = lL = VA = TA = kL = !1;
  var a = "https:" === location.protocol, b = !1;
  navigator.mediaDevices && navigator.mediaDevices.enumerateDevices && (navigator.enumerateDevices = function(d) {
    navigator.mediaDevices.enumerateDevices().then(d);
  });
  a = "https:" === location.protocol;
  b = !1;
  "undefined" !== typeof MediaStreamTrack && "getSources" in MediaStreamTrack ? b = !0 : navigator.mediaDevices && navigator.mediaDevices.enumerateDevices && (b = !0);
  if (b && (!navigator.enumerateDevices && window.MediaStreamTrack && window.MediaStreamTrack.g && (navigator.enumerateDevices = window.MediaStreamTrack.g.bind(window.MediaStreamTrack)), !navigator.enumerateDevices && navigator.enumerateDevices && (navigator.enumerateDevices = navigator.enumerateDevices.bind(navigator)), navigator.enumerateDevices)) {
    var c = function() {
      mL = lL = VA = TA = kL = !1;
      navigator.enumerateDevices(function(d) {
        nL = [];
        d.forEach(function(f) {
          var k = {}, l;
          for (l in f) {
            k[l] = f[l];
          }
          "audio" === k.kind && (k.kind = "audioinput");
          "video" === k.kind && (k.kind = "videoinput");
          k.deviceId || (k.deviceId = k.id);
          k.id || (k.id = k.deviceId);
          k.label ? ("videoinput" !== k.kind || mL || (mL = !0), "audioinput" !== k.kind || lL || (lL = !0)) : (k.label = "Please invoke getUserMedia once.", a || (k.label = "HTTPs is required to get label of this " + k.kind + " device."));
          "audioinput" === k.kind && (TA = !0);
          "audiooutput" === k.kind && (kL = !0);
          "videoinput" === k.kind && (VA = !0, nL.push(k));
          L && L.FI();
        });
        d = !1;
        for (var e = 0; e < nL.length; ++e) {
          if (oL == nL[e].deviceId) {
            d = !0;
            break;
          }
        }
        d || (oL = "", nL.length && (oL = nL[0].deviceId));
      });
    };
    pL = c;
    navigator.mediaDevices.ondevicechange = function() {
      console.log("Media device state changed");
      c();
    };
    c();
  }
})();
function qL(a, b) {
  var c = this;
  this.mw = b;
  this.$u = 0;
  this.lp = [];
  this.lr = this.bufferedAmount = 0;
  this.iu = [];
  this.By = [];
  this.zF = 0;
  this.Pd = new WebSocket(a);
  c.Pd.onopen = function(d) {
    c.Zs && c.Zs(d);
  };
  c.Pd.onclose = function(d) {
    c.Tk && c.Tk(d);
  };
  c.Pd.onmessage = function(d) {
    c.eH && c.eH(d);
  };
  c.Pd.onerror = function(d) {
    c.Tk && c.Tk(d);
  };
}
qL.prototype.close = function() {
  this.Pd.onopen = null;
  this.Pd.onclose = null;
  this.Pd.onmessage = null;
  this.Pd.onerror = null;
  this.Pd.close();
  this.Pd = null;
  this.$u = 0;
  this.lp = [];
  this.lr = this.bufferedAmount = 0;
  this.iu = [];
  this.By = [];
};
function rL(a) {
  return a.mw ? a.bufferedAmount : a.Pd.bufferedAmount;
}
qL.prototype.eH = function(a) {
  this.oz();
  if (a.data instanceof Blob || "ack" !== a.data) {
    if (0 < this.$u) {
      if (this.lp.push(a.data), this.$u -= sL(a.data), 0 == this.$u && 0 < this.lp.length) {
        if (this.lp[0] instanceof Blob) {
          var b = new Blob(this.lp, {type:this.lp[0].type});
        } else {
          for (b = "", a = 0; a < this.lp.length; a++) {
            b += this.lp[a];
          }
        }
        this.lp = [];
        if (b instanceof Blob) {
          this.Ys(b);
        } else {
          this.onMessage(b);
        }
      }
    } else {
      if (a.data instanceof Blob) {
        this.Ys(a.data);
      } else {
        try {
          b = JSON.parse(a.data);
        } catch (c) {
          b = {};
        }
        b.cL && (this.$u = b.cL);
      }
    }
  } else {
    this.mw && (b = this.By.shift(), this.lr -= b, this.bufferedAmount -= b, tL(this));
  }
};
qL.prototype.send = function(a) {
  var b = {}, c = sL(a);
  b.cL = c;
  b = JSON.stringify(b);
  this.bufferedAmount += b.length;
  this.iu.push(b);
  for (b = 0; b < c;) {
    var d = a.slice(b, b + 4096);
    this.bufferedAmount += sL(d);
    this.iu.push(d);
    b += 4096;
  }
  tL(this);
};
function sL(a) {
  return a instanceof Blob ? a.size : a.length;
}
function tL(a) {
  if (!a.zF) {
    if (null != a.Pd) {
      var b = 1;
      try {
        b = a.Pd.readyState;
      } catch (c) {
        b = 0;
      }
      if (1 != b) {
        a.zF = setTimeout(function() {
          a.Tk && a.Tk();
        }, 0);
        return;
      }
    }
    for (; a.iu.length;) {
      if (b = a.iu[0], 21000 >= a.lr + sL(b)) {
        a.lr += sL(b), a.Pd.send(b), a.By.push(sL(b)), a.iu.shift(), a.mw || (b = a.By.shift(), a.lr -= b, a.bufferedAmount -= b);
      } else {
        break;
      }
    }
  }
}
;function uL(a) {
  this.mw = !1;
  this.parent = a;
  this.Pd = null;
  this.Jd = -1;
  this.Gi = this.xx = !1;
  this.hw = [];
  this.mv = -1;
  this.CC = 0;
  var b = this;
  b.fM = function() {
    b.Jd = -1;
    b.Pd && (b.Gi ? b.xx ? b.Tk() : (b.cw({type:"ping",}), b.xx = !0, vL(b)) : b.Tk());
  };
  b.eM = function() {
    rL(b.Pd) < b.CC && (b.CC = rL(b.Pd), vL(b));
    524288 > rL(b.Pd) && (wL(b), xL(b));
  };
}
ca = uL.prototype;
ca.connect = function(a) {
  var b = this;
  if (b.Pd) {
    return !1;
  }
  b.Gi = !1;
  b.xx = !1;
  b.Pd = new qL(a, this.mw);
  b.Pd.Zs = function(c) {
    b.Zs(c);
  };
  b.Pd.Tk = function(c) {
    b.Tk(c);
  };
  b.Pd.onMessage = function(c) {
    b.onMessage(c);
  };
  b.Pd.Ys = function(c) {
    b.Ys(c);
  };
  b.Pd.oz = function() {
    b.oz();
  };
  vL(b);
  return !0;
};
ca.oz = function() {
  vL(this);
};
function vL(a) {
  a.clearTimeout();
  a.Jd = setTimeout(a.fM, 20000);
}
ca.clearTimeout = function() {
  -1 != this.Jd && (window.clearTimeout(this.Jd), this.Jd = -1);
};
ca.Zs = function() {
  this.Gi = !0;
  vL(this);
  this.parent.Zs(this);
};
ca.Tk = function(a) {
  this.Pd && (this.xx = this.Gi = !1, this.Pd.Zs = null, this.Pd.Tk = null, this.Pd.onMessage = null, this.Pd.oz = null, this.Pd.close(), this.Pd = null, this.clearTimeout(), wL(this), this.hw.length = 0, this.parent.Tk(this, a ? a.data : null));
};
ca.cw = function(a) {
  this.Pd && this.Gi && (vL(this), this.hw.push(a), -1 == this.mv && 1048576 > rL(this.Pd) ? xL(this) : -1 == this.mv && (this.CC = rL(this.Pd), wL(this), this.mv = setInterval(this.eM, 500)));
};
function wL(a) {
  -1 != a.mv && (window.clearInterval(a.mv), a.mv = -1);
}
function xL(a) {
  for (var b = []; 0 < a.hw.length;) {
    var c = a.hw.shift();
    c instanceof Blob ? (b.length && (a.Pd.send(JSON.stringify({arrPacket:b})), b = []), a.Pd.send(c)) : b.push(c);
  }
  b.length && a.Pd.send(JSON.stringify({arrPacket:b}));
  a.hw.length = 0;
}
ca.onMessage = function(a) {
  this.xx = !1;
  var b = null;
  if (a) {
    try {
      b = JSON.parse(a);
    } catch (c) {
      b = null;
    }
    if (b && b.arrPacket) {
      this.parent.onMessage(this, b.arrPacket);
    }
  }
};
ca.Ys = function(a) {
  this.parent && this.parent.Ys && this.parent.Ys(this, a);
};
ca.disconnect = function() {
  this.Tk();
};
class yL extends ph {
  static get i() {
    return "evt_ws_connected";
  }
  static get j() {
    return "evt_ws_disconnected";
  }
  static get l() {
    return "evt_ws_message";
  }
  static get g() {
    return "evt_ws_binary_message";
  }
  constructor() {
    super();
    this.g = new uL(this);
    this.j = this.l = this.port = this.i = "";
  }
  connect(a, b, c, d) {
    this.i = a;
    this.port = b;
    0 == this.port.length && (this.port = "443");
    this.l = c;
    this.j = d;
    "" != this.i && null != this.g && this.g.connect("wss://" + this.i + ":" + this.port + this.l + "/ws?" + this.j);
    return !0;
  }
  disconnect() {
    null != this.g && this.g.disconnect();
  }
  cw(a) {
    null != this.g && this.g.cw(a);
  }
  Zs() {
    this.dispatchEvent(new CustomEvent(yL.i));
  }
  Tk() {
    this.dispatchEvent(new CustomEvent(yL.j));
  }
  onMessage(a, b) {
    this.dispatchEvent(new CustomEvent(yL.l, {detail:b}));
  }
  Ys(a, b) {
    this.dispatchEvent(new CustomEvent(yL.g, {detail:b}));
  }
}
;function zL(a) {
  a.m.addEventListener(yL.i, () => {
    console.log("WS connected..");
    a.l = 1000;
    null != a.g && (clearInterval(a.g), a.g = null);
    a.i = !0;
    a.j = !1;
    a.dispatchEvent(new CustomEvent(AL.g));
  });
  a.m.addEventListener(yL.j, () => {
    a.i = !1;
    a.j = !1;
    console.log("WS disconnected..");
    let b = {};
    if (b.bDisconnectedManually = a.s) {
      null != a.g && (clearInterval(a.g), a.g = null);
      let c = a.l;
      a.l += 5000;
      a.l > a.M && (a.l = a.M);
      a.g = setInterval(() => {
        a.dispatchEvent(new CustomEvent(AL.m));
        clearInterval(a.g);
        a.g = null;
        BL(a);
      }, c);
    }
    a.dispatchEvent(new CustomEvent(AL.i, {detail:b}));
  });
  a.m.addEventListener(yL.l, b => {
    a.dispatchEvent(new CustomEvent(AL.j, {detail:b.detail}));
  });
  a.m.addEventListener(yL.g, b => {
    a.dispatchEvent(new CustomEvent(AL.l, {detail:b.detail}));
  });
}
function BL(a) {
  a.j || (a.i ? (console.log("WS already connected.."), a.l = 1000, null != a.g && (clearInterval(a.g), a.g = null), a.i = !0, a.j = !1, a.dispatchEvent(new CustomEvent(AL.g))) : (a.j = !0, a.m.connect(a.v, a.N, a.B, Ch() ? "userguid=" + a.o + "&strGUID=" + a.J + "&ulogintype=1&bAutoCleanFiles=" + a.C + "&PHPSESSID=" + a.u : "userid=" + a.G.toString() + "&strGUID=" + a.J + "&ulogintype=1&bAutoCleanFiles=" + a.C + "&PHPSESSID=" + a.u)));
}
function CL(a) {
  null != a.g && (clearInterval(a.g), a.g = -1);
  a.s = !1;
  (a.i || a.j) && a.m.disconnect();
  a.i = !1;
  a.j = !1;
}
function DL(a, b) {
  a.i ? a.m.cw(b) : console.log("Trying to send when websocket is not connected");
}
class AL extends ph {
  static get o() {
    return "/mediarecorder";
  }
  static get C() {
    return "next_data_info";
  }
  static get J() {
    return "recording_start";
  }
  static get G() {
    return "recording_stop";
  }
  static get v() {
    return "ack_data";
  }
  static get u() {
    return "ack_start";
  }
  static get B() {
    return "ack_stop";
  }
  static get g() {
    return "evt_rec_ws_connected";
  }
  static get i() {
    return "evt_rec_ws_disconnected";
  }
  static get m() {
    return "evt_rec_ws_reconnecting";
  }
  static get j() {
    return "evt_rec_ws_message";
  }
  static get l() {
    return "evt_rec_ws_binary_message";
  }
  constructor() {
    super();
    this.M = 30000;
    this.m = new yL();
    this.G = -1;
    this.u = this.B = this.N = this.v = "";
    this.l = 1;
    this.g = null;
    this.j = this.i = !1;
    this.s = !0;
    this.J = "";
    this.C = 0;
    zL(this);
  }
  connect(a, b) {
    this.J = a;
    this.C = b;
    a = M.Cf;
    b = M.Db;
    var c = AL.o, d = M.s, e = Bh(), f = M.G;
    a == this.v && c == this.B && d == this.G && e == this.o || CL(this);
    this.s = !1;
    this.B = c;
    this.v = a;
    this.N = b;
    this.G = d;
    this.o = e;
    this.u = f;
    BL(this);
  }
}
;Object.freeze({te:1, YF:2, eO:3, fO:4});
function EL(a) {
  a.j.addEventListener(AL.g, () => {
    a.g = !1;
    a.dispatchEvent(new CustomEvent(FL.j));
  });
  a.j.addEventListener(AL.i, () => {
    a.g = !1;
    a.l = [];
    a.m || (a.m = !0, a.dispatchEvent(new CustomEvent(FL.l)));
  });
  a.j.addEventListener(AL.j, b => {
    b = b.detail;
    for (let e = 0; e < b.length; e++) {
      var c = b[e];
      switch(c.type) {
        case AL.v:
          var d = a;
          c.bSuccessful ? (d.s = parseInt(c.nBytesWritten), d.g = !1, d.i || 0 != d.l.length ? GL(d) : (c = d, console.log("MRUC: Send Stop Packet"), c = c.j, d = {}, d.type = AL.G, DL(c, d))) : d.dispatchEvent(new CustomEvent(FL.g));
          break;
        case AL.u:
          d = a;
          c.bSuccessful ? (d.g = !1, GL(d)) : d.dispatchEvent(new CustomEvent(FL.g));
          break;
        case AL.B:
          c = a, HL(c), c.g = !1, c.dispatchEvent(new CustomEvent(FL.i));
      }
    }
  });
}
function HL(a) {
  a.m = !0;
  a.i = !1;
  CL(a.j);
}
function IL(a) {
  console.log("MRUC: Send Start Packet");
  a.l = [];
  a.g = !0;
  a.s = 0;
  a = a.j;
  let b = {};
  b.type = AL.J;
  DL(a, b);
}
function GL(a) {
  if (!a.g) {
    var b = new Blob(a.l, a.v);
    if (0 != b.size) {
      a.g = !0;
      a.o && (a.s = 0);
      var c = a.j, d = a.s, e = a.o;
      let f = {};
      f.type = AL.C;
      f.nFileWritePosition = d;
      f.bTruncate = e;
      DL(c, f);
      DL(a.j, b);
      a.l = [];
      a.o = !1;
    }
  }
}
function JL(a, b) {
  0 != b.size && (a.l[a.l.length] = b, GL(a));
}
class FL extends ph {
  static get i() {
    return "evt_file_upload_complete";
  }
  static get g() {
    return "evt_file_upload_failed";
  }
  static get j() {
    return "evt_rec_ws_conn_manager_connected";
  }
  static get l() {
    return "evt_rec_ws_conn_manager_disconnected";
  }
  constructor() {
    super();
    this.j = new AL();
    EL(this);
    this.l = [];
    this.g = !1;
    this.s = 0;
    this.i = !1;
    this.m = !0;
    this.v = {};
    this.v.type = "video/webm";
    this.o = !1;
  }
}
;const KL = {Pi:0, yl:1, Gk:2};
Object.freeze(KL);
function LL() {
  let a = {videoBitsPerSecond:8000000};
  MediaRecorder.isTypeSupported("video/webm;codecs=h264") ? a.mimeType = "video/webm;codecs=h264" : MediaRecorder.isTypeSupported("video/webm;codecs=avc1") ? a.mimeType = "video/webm;codecs=avc1" : MediaRecorder.isTypeSupported("video/webm;codecs=vp9") ? a.mimeType = "video/webm;codecs=vp9" : MediaRecorder.isTypeSupported("video/webm;codecs=vp8") ? a.mimeType = "video/webm;codecs=vp8" : a.mimeType = "";
  return a;
}
function ML(a, b) {
  a.j = b;
  return new Promise((c, d) => {
    try {
      a.g = new MediaRecorder(a.j, LL()), a.g.ondataavailable = e => {
        a.dispatchEvent(new CustomEvent(NL.i, {detail:e}));
      }, a.g.onerror = e => {
        console.log("ScreenRecorder: error", e);
        a.i = KL.Pi;
        a.dispatchEvent(new CustomEvent(NL.g));
      }, a.g.onstart = () => {
        console.log("ScreenRecorder: started");
        if (a.l) {
          if (a.l = !1, null != a.g) {
            try {
              a.g.pause();
            } catch (e) {
              console.log("ScreenRecorder: exception while internally pausing after trim", e);
            }
          }
        } else {
          a.i = KL.yl;
        }
      }, a.g.onstop = () => {
        console.log("ScreenRecorder: stopped");
        if (a.m) {
          if (a.m = !1, a.dispatchEvent(new CustomEvent(NL.j)), null != a.g) {
            try {
              a.l = !1, a.i == KL.Gk && (a.l = !0), a.g.start(1000);
            } catch (e) {
              a.l = !1, console.log("ScreenRecorder: exception while internal start for trim", e);
            }
          }
        } else {
          a.i = KL.Pi, a.dispatchEvent(new CustomEvent(NL.m)), a.g = null;
        }
      }, a.g.onpause = () => {
        console.log("ScreenRecorder: paused");
        a.i = KL.Gk;
      }, a.g.onresume = () => {
        console.log("ScreenRecorder: resumed");
        a.i = KL.yl;
        a.dispatchEvent(new CustomEvent(NL.l));
      };
    } catch (e) {
      d(e);
      return;
    }
    c();
  });
}
function OL(a) {
  null != a.j && a.j.active && a.j.getTracks().forEach(b => {
    b.stop();
  });
}
function PL(a) {
  console.log("stop Screen Recorder");
  if (null != a.g && "inactive" != a.g.state) {
    try {
      a.g.stop();
    } catch (b) {
      a.dispatchEvent(new CustomEvent(NL.g));
    }
  }
  OL(a);
}
class NL extends ph {
  static get g() {
    return "SR_EVT_SCREEN_RECORDING_ERROR";
  }
  static get i() {
    return "SR_EVT_SCREEN_RECORDING_DATA_AVAILABLE";
  }
  static get m() {
    return "SR_EVT_SCREEN_RECORDING_STOPPED";
  }
  static get l() {
    return "SR_EVT_SCREEN_RECORDING_RESUMED";
  }
  static get j() {
    return "SR_EVT_SCREEN_RECORDING_TRIM_NOW";
  }
  constructor() {
    super();
    this.g = this.j = null;
    this.i = KL.Pi;
    this.l = this.m = !1;
  }
}
;Object.freeze({Pi:0, yl:1, Gk:2});
function QL(a) {
  let b = {};
  0 < a.i.getVideoTracks().length ? MediaRecorder.isTypeSupported("video/webm;codecs=h264") ? b.mimeType = "video/webm;codecs=h264" : MediaRecorder.isTypeSupported("video/webm;codecs=avc1") ? b.mimeType = "video/webm;codecs=avc1" : MediaRecorder.isTypeSupported("video/mp4") ? (b.mimeType = "video/mp4", b.videoBitsPerSecond = 2500000) : MediaRecorder.isTypeSupported("video/webm;codecs=vp9") ? b.mimeType = "video/webm;codecs=vp9" : MediaRecorder.isTypeSupported("video/webm;codecs=vp8,opus") ? b.mimeType = 
  "video/webm;codecs=vp8,opus" : MediaRecorder.isTypeSupported("video/webm;codecs=vp8") ? b.mimeType = "video/webm;codecs=vp8" : b.mimeType = "" : MediaRecorder.isTypeSupported("audio/webm;codecs=opus") ? b.mimeType = "audio/webm;codecs=opus" : MediaRecorder.isTypeSupported("audio/mp4") ? b.mimeType = "audio/mp4" : MediaRecorder.isTypeSupported("audio/ogg;codecs=opus") ? b.mimeType = "audio/ogg;codecs=opus" : b.mimeType = "";
  return b;
}
function RL(a, b) {
  a.i = b;
  a.i.getTracks().forEach(function(c) {
    "audio" == c.kind && (c.enabled = !0, console.log("onstart - Audio track.readyState=" + c.readyState + ", track.muted=" + c.muted));
  });
  return new Promise((c, d) => {
    try {
      a.g = new MediaRecorder(a.i, QL(a)), a.g.ondataavailable = e => {
        console.log("MCR: blob size", e.data.size);
        a.dispatchEvent(new CustomEvent(SL.i, {detail:e}));
      }, a.g.onerror = e => {
        console.log("WebRTCMediaRecorder: error", e);
        a.dispatchEvent(new CustomEvent(SL.g));
      }, a.g.onstart = () => {
        console.log("WebRTCMediaRecorder: started");
      }, a.g.onstop = () => {
        console.log("WebRTCMediaRecorder: stopped");
        a.dispatchEvent(new CustomEvent(SL.l));
        a.g = null;
      }, a.g.onpause = () => {
        console.log("WebRTCMediaRecorder: paused");
      }, a.g.onresume = () => {
        console.log("WebRTCMediaRecorder: resumed");
        a.dispatchEvent(new CustomEvent(SL.j));
      };
    } catch (e) {
      d(e);
      return;
    }
    c();
  });
}
function TL(a) {
  console.log("start media Recorder");
  if (null != a.g) {
    try {
      a.i.getTracks().forEach(function(b) {
        "audio" == b.kind && (b.enabled = !0, console.log("onstart - Audio track.readyState=" + b.readyState + ", track.muted=" + b.muted));
        "video" == b.kind && console.log("onstart - Video track.readyState=" + b.readyState + ", track.muted=" + b.muted);
      }), a.g.start(1000);
    } catch (b) {
      console.log("WebRTCMediaRecorder: exception", b), a.dispatchEvent(new CustomEvent(SL.g));
    }
  }
}
function UL(a) {
  null != a.i && a.i.active && a.i.getTracks().forEach(b => {
    b.stop();
  });
}
function VL(a) {
  console.log("stop media Recorder");
  if (null != a.g && "inactive" != a.g.state) {
    try {
      a.g.stop();
    } catch (b) {
      a.dispatchEvent(new CustomEvent(SL.g));
    }
  }
  UL(a);
}
class SL extends ph {
  static get g() {
    return "MR_EVT_MEDIA_RECORDING_ERROR";
  }
  static get i() {
    return "MR_EVT_MEDIA_RECORDING_DATA_AVAILABLE";
  }
  static get l() {
    return "MR_EVT_MEDIA_RECORDING_STOPPED";
  }
  static get j() {
    return "MR_MEDIA_RECORDING_RESUMED";
  }
  constructor() {
    super();
    this.g = this.i = null;
  }
}
;function WL(a) {
  a.g.getTracks().forEach(b => {
    "video" == b.kind && b.applyConstraints && b.applyConstraints({frameRate:{max:10}}).then(function() {
      console.log("constraints applied");
    }).catch(function(c) {
      console.log("constraints failed", c);
    });
    b.onended = () => {
      a.g = null;
      console.log("SSH: stopped on track ended");
      a.i && a.i.zH && a.i.zH();
    };
  });
}
function XL(a) {
  return new Promise((b, c) => {
    navigator.mediaDevices.getDisplayMedia({video:!0}).then(d => {
      a.g = d;
      WL(a);
      b(a.g);
    }).catch(d => {
      c(d);
    });
  });
}
function YL(a) {
  null !== a.g && (a.g.getTracks().forEach(b => {
    b.stop();
  }), a.g = null, console.log("SSH: stopped on stopstream"));
}
class ZL {
  constructor(a) {
    this.i = a;
    this.g = null;
  }
}
;function $L(a, b) {
  return new Promise((c, d) => {
    let e = {audio:!0};
    if (b) {
      let f = {width:{max:480}, frameRate:{max:15},};
      0 < nL.length && null != oL && void 0 != oL && (f.deviceId = oL);
      e.video = f;
    }
    navigator.mediaDevices.getUserMedia(e).then(f => {
      void 0 != oL && null == oL || pL();
      a.g = f;
      a.g.getTracks().forEach(k => {
        k.onended = () => {
          a.g = null;
          console.log("MSH: stopped on track ended");
          a.i && a.i.VG && a.i.VG();
        };
      });
      c(a.g);
    }).catch(f => {
      d(f);
    });
  });
}
function aM(a) {
  null !== a.g && (a.g.getTracks().forEach(b => {
    b.stop();
  }), a.g = null, a.j = !1, console.log("MSH: stopped on stopstream"));
}
function bM(a) {
  return a.g && a.g.active ? a.g : null;
}
class cM {
  constructor(a) {
    this.i = a;
    this.g = null;
    this.j = !1;
  }
}
;const dM = {te:0, Eu:1, hO:2, PF:3};
Object.freeze(dM);
const eM = {XF:0, aL:1};
Object.freeze(eM);
function fM(a) {
  return a.Xg + ".webm";
}
function gM(a) {
  return a.Dk && a.Hl != dM.Eu ? a.Xg + ".png" : null;
}
class hM {
  constructor() {
    this.g = this.Hl = this.i = this.Xg = null;
    this.Dk = !1;
  }
  Hu() {
    return this.Dk ? this.Xg + ".mp4" : this.Xg + ".webm";
  }
  getData() {
    return {strURL:this.Xg, strExtension:this.i, nMediaType:this.Hl, nContentType:this.g, bReencoded:this.Dk ? 1 : 0};
  }
}
class Pr extends Wm {
  static get ui() {
    return 250;
  }
  static get Jj() {
    return 140;
  }
  static get Bv() {
    return 720;
  }
  constructor() {
    super();
    this.Yk = this.Bh = this.Ij = this.bj = this.ma = null;
    this.pg = -1;
    this.fj = null;
    this.height = Pr.Jj;
    this.width = Pr.ui;
    this.qd = 1;
    this.sn = !1;
  }
  Fa(a) {
    super.Fa(a);
    let b = a.arrMedia;
    for (let e = 0; e < b.length; e++) {
      let f = new hM();
      var c = f, d = b[e];
      c.Xg = d.strURL;
      c.i = d.strExtension;
      c.Hl = d.nMediaType;
      c.g = d.nContentType;
      c.Dk = d.bReencoded && 1 == d.bReencoded ? !0 : !1;
      f.g == eM.XF ? this.bj = f : this.Ij = f;
    }
    "offsetTop" in a && (this.offsetTop = a.offsetTop);
    "offsetLeft" in a && (this.offsetLeft = a.offsetLeft);
    a.height && 0 <= a.height && (this.height = a.height);
    a.width && 0 <= a.width && (this.width = a.width);
    if (null == this.ma || void 0 == this.ma) {
      a.strGUID && 0 < a.strGUID.length ? this.ma = a.strGUID : this.zq();
    }
    a.pageInfo && (this.A = JSON.parse(JSON.stringify(a.pageInfo)));
    "pageId" in a ? this.S = a.pageId : "pageIndex" in a && (this.S = a.pageIndex);
    "serializedS3BasePath" in a && (this.Bh = a.serializedS3BasePath);
    "serializedAnnotateResourceBasePath" in a && (this.Yk = a.serializedAnnotateResourceBasePath);
    "annotationId" in a && (this.pg = a.annotationId);
    "strAnnotationGuid" in a && (this.fj = a.strAnnotationGuid);
    "uDocType" in a && (this.qd = a.uDocType);
    "markAsExportedInSlides" in a && (this.sn = a.markAsExportedInSlides);
  }
  eq() {
    return this.pg;
  }
  Mv(a) {
    this.pg = a;
  }
  Lv(a) {
    this.fj = a;
  }
  je() {
    return this.qd;
  }
  Na() {
    var a = super.Na();
    this.Fb(a);
    return a;
  }
  Fb(a) {
    super.Fb(a);
    let b = [];
    null != this.bj && b.push(this.bj.getData());
    null != this.Ij && b.push(this.Ij.getData());
    a.type = this.cb();
    a.arrMedia = b;
    a.offsetTop = this.offsetTop;
    a.offsetLeft = this.offsetLeft;
    a.height = this.height;
    a.width = this.width;
    a.strGUID = this.ma;
    a.pageInfo = this.A ? JSON.parse(JSON.stringify(Object.assign({}, this.A))) : this.A;
    a.pageIndex = this.S;
    a.serializedS3BasePath = this.Bh;
    a.serializedAnnotateResourceBasePath = this.Yk;
    a.strAnnotationGuid = this.fj;
    a.annotationId = this.pg;
    a.markAsExportedInSlides = this.sn;
  }
  Ul(a) {
    this.Fb(a);
  }
  Ad(a) {
    super.Ad(a);
    this.Fa(a);
  }
  cb() {
    return "mediaAttachment";
  }
  lx() {
    let a = this.Na();
    a.posterUrl = this.li().Hl == dM.Eu ? null : this.li().Xg + ".png";
    a.mediaUrl = this.li().Xg + ".mp4";
    return a;
  }
  zq() {
    let a = (new Date()).getTime();
    this.ma = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(b) {
      var c = (a + 16 * Math.random()) % 16 | 0;
      a = Math.floor(a / 16);
      return ("x" == b ? c : c & 3 | 8).toString(16);
    }).toLowerCase();
  }
  Ui(a) {
    if (this.ma == a.ma) {
      return !0;
    }
    let b = null == a.bj && null == this.bj;
    b || null == a.bj || null == this.bj || fM(a.bj) != fM(this.bj) || (b = !0);
    let c = null == a.Ij && null == this.Ij;
    c || null == a.Ij || null == this.Ij || fM(a.Ij) != fM(this.Ij) || (c = !0);
    return b && c;
  }
  li() {
    return null != this.bj && null == this.Ij ? this.bj : null == this.bj && null != this.Ij ? this.Ij : this.bj;
  }
  Rx() {
    return null != this.li() && this.li().Hl == dM.Eu;
  }
  qD() {
    this.sn = !0;
  }
}
;class Ur extends Wm {
  static get ui() {
    return 250;
  }
  static get Jj() {
    return 250;
  }
  constructor() {
    super();
    this.ma = null;
    this.KD = this.LD = "";
    this.width = this.height = -1;
    this.Yk = this.Bh = null;
    this.pg = -1;
    this.fj = null;
    this.qd = 1;
    this.ul = this.Gy = !0;
    this.Rb = 1;
  }
  Fa(a) {
    super.Fa(a);
    "strImageUrl" in a && (this.LD = a.strImageUrl);
    "strImageName" in a && (this.KD = a.strImageName);
    "height" in a && (this.height = parseInt(a.height));
    "width" in a && (this.width = parseInt(a.width));
    "nOpacity" in a && (this.Rb = parseFloat(a.nOpacity));
    "bShowBorder" in a && (this.ul = 1 == a.bShowBorder);
    "offsetTop" in a && (this.offsetTop = parseInt(a.offsetTop));
    "offsetLeft" in a && (this.offsetLeft = parseInt(a.offsetLeft));
    a.pageInfo && (this.A = JSON.parse(JSON.stringify(a.pageInfo)));
    "pageIndex" in a && (this.S = a.pageIndex);
    if (null == this.ma || void 0 == this.ma) {
      a.strGUID && 0 < a.strGUID.length ? this.ma = a.strGUID : this.zq();
    }
    "serializedS3BasePath" in a && (this.Bh = a.serializedS3BasePath);
    "serializedAnnotateResourceBasePath" in a && (this.Yk = a.serializedAnnotateResourceBasePath);
    "annotationId" in a && (this.pg = a.annotationId);
    "strAnnotationGuid" in a && (this.fj = a.strAnnotationGuid);
    "uDocType" in a && (this.qd = a.uDocType);
  }
  eq() {
    return this.pg;
  }
  Mv(a) {
    this.pg = a;
  }
  Lv(a) {
    this.fj = a;
  }
  je() {
    return this.qd;
  }
  Na() {
    var a = super.Na();
    this.Fb(a);
    return a;
  }
  Fb(a) {
    a.strGUID = this.ma;
    a.strImageUrl = this.LD;
    a.strImageName = this.KD;
    a.type = this.cb();
    a.height = this.height;
    a.width = this.width;
    a.nOpacity = this.Rb;
    a.bShowBorder = this.ul ? 1 : 0;
    a.offsetTop = this.offsetTop;
    a.offsetLeft = this.offsetLeft;
    a.pageInfo = this.A;
    a.pageIndex = this.S;
    a.serializedS3BasePath = this.Bh;
    a.serializedAnnotateResourceBasePath = this.Yk;
    a.strAnnotationGuid = this.fj;
    a.annotationId = this.pg;
  }
  Ul(a) {
    this.Fb(a);
  }
  Ad(a) {
    super.Ad(a);
    this.Fa(a);
  }
  zq() {
    let a = (new Date()).getTime();
    this.ma = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(b) {
      var c = (a + 16 * Math.random()) % 16 | 0;
      a = Math.floor(a / 16);
      return ("x" == b ? c : c & 3 | 8).toString(16);
    }).toLowerCase();
  }
  cb() {
    return "imageAttachment";
  }
  lx() {
    return this.Na();
  }
  Ui(a) {
    return this.ma == a.ma ? !0 : !1;
  }
  getURL() {
    return this.LD;
  }
}
function iM(a) {
  return a.Ar == Rg.Ds ? a.OD : a.Xg + ".png";
}
class Zr extends Wm {
  constructor() {
    super();
    this.ma = null;
    this.XH = this.mx = this.Xg = "";
    this.Ar = Rg.$K;
    this.OD = "";
    this.Yk = this.Bh = null;
    this.pg = -1;
    this.fj = null;
    this.height = Pr.Jj;
    this.width = Pr.ui;
    this.qd = 1;
    this.sn = !1;
  }
  Fa(a) {
    super.Fa(a);
    "strURL" in a && (this.Xg = a.strURL);
    "strFileExtension" in a && (this.mx = a.strFileExtension);
    "strTempDir" in a && (this.XH = a.strTempDir);
    "videoServerType" in a && (this.Ar = parseInt(a.videoServerType));
    "strThumbUrl" in a && (this.OD = a.strThumbUrl);
    "offsetTop" in a && (this.offsetTop = a.offsetTop);
    "offsetLeft" in a && (this.offsetLeft = a.offsetLeft);
    a.height && 0 <= a.height && (this.height = a.height);
    a.width && 0 <= a.width && (this.width = a.width);
    if (null == this.ma || void 0 == this.ma) {
      a.strGUID && 0 < a.strGUID.length ? this.ma = a.strGUID : this.zq();
    }
    a.pageInfo && (this.A = JSON.parse(JSON.stringify(a.pageInfo)));
    "pageIndex" in a && (this.S = a.pageIndex);
    "serializedS3BasePath" in a && (this.Bh = a.serializedS3BasePath);
    "serializedAnnotateResourceBasePath" in a && (this.Yk = a.serializedAnnotateResourceBasePath);
    "annotationId" in a && (this.pg = a.annotationId);
    "strAnnotationGuid" in a && (this.fj = a.strAnnotationGuid);
    "uDocType" in a && (this.qd = a.uDocType);
    "markAsExportedInSlides" in a && (this.sn = a.markAsExportedInSlides);
  }
  eq() {
    return this.pg;
  }
  Mv(a) {
    this.pg = a;
  }
  Lv(a) {
    this.fj = a;
  }
  je() {
    return this.qd;
  }
  Na() {
    var a = super.Na();
    this.Fb(a);
    return a;
  }
  Fb(a) {
    super.Fb(a);
    a.strURL = this.Xg;
    a.strFileExtension = this.mx;
    a.strTempDir = this.XH;
    a.videoServerType = this.Ar;
    a.strThumbUrl = this.OD;
    a.type = this.cb();
    a.offsetTop = this.offsetTop;
    a.offsetLeft = this.offsetLeft;
    a.height = this.height;
    a.width = this.width;
    a.strGUID = this.ma;
    a.pageInfo = this.A ? JSON.parse(JSON.stringify(this.A)) : this.A;
    a.pageIndex = this.S;
    a.serializedS3BasePath = this.Bh;
    a.serializedAnnotateResourceBasePath = this.Yk;
    a.strAnnotationGuid = this.fj;
    a.markAsExportedInSlides = this.sn;
    a.annotationId = this.pg;
  }
  Ul(a) {
    this.Fb(a);
  }
  Ad(a) {
    super.Ad(a);
    this.Fa(a);
  }
  cb() {
    return "videoAttachment";
  }
  lx() {
    let a = this.Na();
    a.posterUrl = iM(this);
    a.mediaUrl = this.Hu();
    return a;
  }
  zq() {
    let a = (new Date()).getTime();
    this.ma = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(b) {
      var c = (a + 16 * Math.random()) % 16 | 0;
      a = Math.floor(a / 16);
      return ("x" == b ? c : c & 3 | 8).toString(16);
    }).toLowerCase();
  }
  Hu() {
    return this.Ar == Rg.Ds ? this.Xg : this.Xg + "." + this.mx;
  }
  Ui(a) {
    if (this.ma == a.ma) {
      return !0;
    }
  }
  li() {
    return null;
  }
  Rx() {
    return this.Ar == Rg.Eu;
  }
  qD() {
    this.sn = !0;
  }
}
;function jM(a) {
  a.l = null;
  a.i && (a.i.stop(), a.i.removeEventListener(kM.g, a.m), console.log("MVW: SoundMeter stopped"));
}
function lM(a, b) {
  if (null == a.j) {
    try {
      a.j = new (window.AudioContext || window.webkitAudioContext)();
    } catch (c) {
      console.log("MVW: Web Audio API not supported!!!");
      return;
    }
    a.j && (a.i = new kM(a.j));
  }
  a.l = b;
  console.log("MVW: SoundMeter audio stream got");
  a.i.addEventListener(kM.g, a.m);
  mM(a.i, a.l, c => {
    c ? (console.log("MVW: Error while starting SoundMeter!", c), jM(a)) : console.log("MVW: SoundMeter started");
  });
}
class nM {
  constructor() {
    this.height = this.width = 32;
    this.volume = this.g = this.ra = null;
    this.bn();
    this.l = this.j = this.i = null;
    this.m = this.o.bind(this);
  }
  bn() {
    this.ra = document.createElement("div");
    this.ra.style.display = "none";
    this.ra.style.top = "0px";
    this.ra.style.left = "0px";
    this.ra.style.width = this.width + "px";
    this.ra.style.height = this.height + "px";
    this.ra.className = "extension_reset_css AnnotateMicVolumeWidget";
    this.g = document.createElement("div");
    this.g.style.height = "24px";
    this.g.style.width = "24px";
    this.g.style.top = "4px";
    this.g.style.left = "4px";
    this.g.className = "extension_reset_css AnnotateMicVolumeWidgetMic extension_icon extension_icon-mic";
    this.volume = document.createElement("div");
    this.volume.style.height = "24px";
    this.volume.style.width = "4px";
    this.volume.style.top = "4px";
    this.volume.style.left = "25px";
    this.volume.className = "extension_reset_css AnnotateMicVolumeWidgetVolume";
    this.ra.appendChild(this.g);
    this.ra.appendChild(this.volume);
  }
  show() {
    this.ra.style.display = "block";
  }
  kn() {
    this.ra.style.display = "none";
  }
  o(a) {
    var b = a.detail.micVolume;
    0.01 > b && (b = 0.01);
    1 < b && (b = 1);
    a = parseInt(this.g.style.top) + parseInt(this.g.offsetHeight) - 1;
    b = Math.floor((20 + 10 * Math.log(b) / Math.log(10)) / 20 * 24);
    this.volume.style.height = b + "px";
    this.volume.style.top = a - b + "px";
  }
  gb() {
    this.i && jM(this);
    this.j = this.i = null;
  }
}
;class oM extends Nj {
  constructor() {
    super(null);
    this.g = this.label = null;
    this.bn();
  }
  bn() {
    R(this, "AudioTestingDialog");
    this.V(100, 90);
    this.ga(0, 0);
    this.el.style["user-select"] = "none";
    this.el.style["-webkit-user-select"] = "none";
    this.ja();
    this.label = new Nj(null);
    this.label.el.style.height = "auto";
    this.label.Qc(this.width);
    this.label.ga(16, 16);
    rj(this.label, "Mic test");
    R(this.label, "AudioTestingDialogLabel");
    this.g = new nM();
    this.Z(this.label);
    this.el.appendChild(this.g.ra);
    document.body.appendChild(this.el);
    var a = this.g, b = (this.width - this.g.width) / 2;
    a.ra.style.top = this.height - this.g.height - 12 + "px";
    a.ra.style.left = b + "px";
    this.g.show();
  }
  Zb() {
    return "AudioTestingDialog";
  }
  U() {
    this.g && this.g.gb();
    super.U();
  }
}
;function pM(a) {
  a.m.addEventListener(yL.i, () => {
    console.log("WS connected..");
    a.l = 1000;
    null != a.g && (clearInterval(a.g), a.g = null);
    a.i = !0;
    a.j = !1;
    a.dispatchEvent(new CustomEvent(qM.g));
  });
  a.m.addEventListener(yL.j, () => {
    a.i = !1;
    a.j = !1;
    console.log("WS disconnected..");
    let b = {};
    if (b.bDisconnectedManually = a.s) {
      null != a.g && (clearInterval(a.g), a.g = null);
      let c = a.l;
      a.l += 5000;
      a.l > a.B && (a.l = a.B);
      a.g = setInterval(() => {
        a.dispatchEvent(new CustomEvent(qM.o));
        clearInterval(a.g);
        a.g = null;
        rM(a);
      }, c);
    }
    a.dispatchEvent(new CustomEvent(qM.i, {detail:b}));
  });
  a.m.addEventListener(yL.l, b => {
    a.dispatchEvent(new CustomEvent(qM.j, {detail:b.detail}));
  });
  a.m.addEventListener(yL.g, b => {
    a.dispatchEvent(new CustomEvent(qM.m, {detail:b.detail}));
  });
}
function rM(a) {
  a.j || (a.i ? (console.log("WS already connected.."), a.l = 1000, null != a.g && (clearInterval(a.g), a.g = null), a.i = !0, a.j = !1, a.dispatchEvent(new CustomEvent(qM.g))) : (a.j = !0, a.m.connect(a.v, a.C, a.u, "userguid=" + a.o + "&ulogintype=1&PHPSESSID=" + a.J)));
}
function sM(a) {
  null != a.g && (clearInterval(a.g), a.g = -1);
  a.s = !1;
  (a.i || a.j) && a.m.disconnect();
  a.i = !1;
  a.j = !1;
}
class qM extends ph {
  static get l() {
    return "/edgeconnection";
  }
  static get g() {
    return "evt_user_ws_connected";
  }
  static get i() {
    return "evt_user_ws_disconnected";
  }
  static get o() {
    return "evt_user_ws_reconnecting";
  }
  static get j() {
    return "evt_user_ws_message";
  }
  static get m() {
    return "evt_user_ws_binary_message";
  }
  constructor() {
    super();
    this.B = 30000;
    this.m = new yL();
    this.J = this.u = this.C = this.v = this.o = "";
    this.l = 1;
    this.g = null;
    this.j = this.i = !1;
    this.s = !0;
    pM(this);
  }
  connect(a, b, c, d) {
    var e = qM.l;
    a == this.v && e == this.u && c == this.o || sM(this);
    this.s = !0;
    this.u = e;
    this.v = a;
    this.C = b;
    this.o = c;
    this.J = d;
    rM(this);
  }
}
;class tM extends ph {
  static get i() {
    return "evt_ws_controller_connected";
  }
  static get j() {
    return "evt_ws_controller_disconnected";
  }
  static get g() {
    return "evt_message_packet";
  }
  constructor() {
    super();
    this.l = this.l.bind(this);
    this.m = this.m.bind(this);
    this.j = this.j.bind(this);
    this.g = 0;
    this.i = new qM();
    this.i.addEventListener(qM.g, this.l);
    this.i.addEventListener(qM.i, this.m);
    this.i.addEventListener(qM.j, this.j);
  }
  l() {
    2 == this.g ? console.log("Packet controller already connected!") : (this.g = 2, this.dispatchEvent(new CustomEvent(tM.i)));
  }
  m() {
    0 == this.g ? (console.log("Packet controller already disconnected!"), L.sa({type:"ANNOTATE_EVENT_SERVER_GET_CONNECTION_STATE"}, a => {
      a && "bConnected" in a && (a.bConnected || yh(!1));
    })) : (this.g = 0, this.dispatchEvent(new CustomEvent(tM.j)));
  }
  j(a) {
    a = a.detail;
    for (let b = 0; b < a.length; b++) {
      let c = a[b];
      "pong" != c.type && this.dispatchEvent(new CustomEvent(tM.g, {detail:c}));
    }
  }
}
;function uM(a) {
  null != a.B && (clearInterval(a.B), a.B = null);
}
function vM(a, b) {
  a.v && b && (b.sType = a.type, a = a.v.g.i, a.i ? a.m.cw(b) : console.log("Trying to send when websocket is not connected"));
}
function wM(a) {
  console.log("Virtual Conn : Disconnect", a.o);
  3 == a.type && xM(yM.HB);
  uM(a);
  vM(a, {type:"PKT_LEAVE_JOINED_ROOM", strUserGuid:a.i.wA, channelId:a.s,});
  1 == a.m && (a.C = !0);
}
function zM(a, b, c) {
  b = {type:"PKT_USER_CHANNEL_PACKET", packetData:b, channelId:a.s, strUserGuid:a.i ? a.i.wA : null};
  c && (b.receiverInfo = c);
  vM(a, b);
}
function AM(a) {
  a.B = setInterval(function() {
    a.u(a.o, a.type, a.i);
  }, 10000);
}
function BM(a) {
  console.log("Virtual Conn : Retrying connect", a.o);
  uM(a);
  AM(a);
}
class CM extends ph {
  static get g() {
    return "connected";
  }
  static get i() {
    return "connectionFail";
  }
  static get j() {
    return "disconnected";
  }
  static get l() {
    return "message";
  }
  constructor(a) {
    super();
    this.v = a;
    this.s = -1;
    this.o = this.type = null;
    this.m = 0;
    this.B = null;
    this.C = !1;
  }
  u(a, b, c) {
    console.log("Virtual Conn : Connecting", a, b);
    uM(this);
    this.C = !1;
    this.o = a;
    this.type = b;
    this.i = c;
    this.s = this.v.s++;
    b = c.Fs;
    c = {ChromeClientLogin:M.g};
    3 == b.g.g ? (c.uLivefeedActivityId = b.G, c.uClassId = b.j, c.docGuid = b.o, c.uLivefeedType = b.l, c.strUserName = b.Jb, c.bCCLAllowed = b.i) : 1 == b.g.g ? c.SharedNotesFeedbackData = b.m : Kh() && 2 == b.g.g && (c.bTeacherEventConnForCCL = M.g ? !0 : !1);
    a = {type:"PKT_CREATE_OR_JOIN_ROOM", roomId:a, channelId:this.s, strUserGuid:this.i.wA, userType:this.i.m, bPublisher:this.i.hB, extraData:c};
    this.v.j[this.s] = this;
    this.m = 1;
    vM(this, a);
  }
  Fr(a) {
    0 != this.m && (console.log("Virtual Conn : Disconnected", this.o, "Retry", a), 3 == this.type && xM(yM.HB), this.m = 0, a ? this.dispatchEvent(new CustomEvent(CM.i, {detail:this})) : (a = this.s, this.s = -1, delete this.v.j[a], this.dispatchEvent(new CustomEvent(CM.j, {detail:this}))));
  }
  ge() {
    return 2 == this.m;
  }
}
;const DM = Object.freeze({MI:1, LN:2, lI:3, EI:4});
function EM(a, b, c, d) {
  a && !a.ge() && a.u(b, c, d);
}
function FM(a, b, c, d) {
  let e = null;
  1 == c ? e = new GM(a) : 2 == c ? e = new CM(a) : 3 == c && (e = new HM(a));
  a = e;
  EM(a, b, c, d);
  return a;
}
class IM extends ph {
  static get g() {
    return "evt_connection_connected";
  }
  static get i() {
    return "evt_connection_disconnected";
  }
  constructor(a) {
    super();
    this.i = Bh();
    this.m = this.m.bind(this);
    this.o = this.o.bind(this);
    this.l = this.l.bind(this);
    this.j = {};
    this.s = 0;
    this.g = a;
    this.g.addEventListener(tM.i, this.m);
    this.g.addEventListener(tM.j, this.o);
    this.g.addEventListener(tM.g, this.l);
  }
  m() {
    this.dispatchEvent(new CustomEvent(IM.g));
  }
  o() {
    this.s = 0;
    this.j = {};
    this.dispatchEvent(new CustomEvent(IM.i));
  }
  l(a) {
    a = a.detail;
    switch(a.type) {
      case "PKT_CREATE_OR_JOIN_ROOM_ACK":
        console.log("Created or join room ", a.docGuid);
        var b = this.j[a.channelId];
        b && (console.log("Virtual Conn : Connected", b.o, " ", b.type), b.m = 2, b.C ? (console.log("Virtual Conn : Disconnect on Connected", b.o), b.C = !1, wM(b)) : (3 == b.type && xM(yM.SF), uM(b), b.dispatchEvent(new CustomEvent(CM.g, {detail:b}))));
        break;
      case "PKT_CREATE_OR_JOIN_ROOM_FAILED_ACK":
        console.log("Virtual conn : create or join room failed", a.errType, a.errorCode);
        if (b = this.j[a.channelId]) {
          "errorCode" in a && a.errorCode == DM.MI ? b.Fr(!1) : "errorCode" in a && a.errorCode == DM.lI ? (gw("Access denied", !0), b.Fr(!0)) : "errorCode" in a && a.errorCode == DM.EI ? (Nn(), NB && JM("The maximum number of active connections for an Open Enrollment course has been reached.")) : b.Fr(!0);
        }
        break;
      case "PKT_ROOM_SERVER_DISCONNECTED":
        a = a.arrChannelId;
        for (b of a) {
          (a = this.j[b]) && a.Fr(!0);
        }
        break;
      case "PKT_ROOM_CLOSED":
        b = a.channelId;
        console.log("Channel/Room closed on server notification received", b);
        b && (b = this.j[b]) && b.Fr(!1);
        break;
      case "PKT_VIRTUAL_CHANNEL_PACKET":
        b = {packetData:a.packetData, senderInfo:a.senderInfo,};
        (a = this.j[a.channelId]) && a.dispatchEvent(new CustomEvent(CM.l, {detail:b}));
        break;
      default:
        console.log("Packet handler not found!", a.type);
    }
  }
  U() {
  }
}
;function KM(a) {
  if (Kh() && (1 == S.g || Pl() && 3 == S.g)) {
    var b = a.strAnnotationGuid;
    if (Yg(b) && Un() == b) {
      return b = pw, b.g && TI(b.g, a.strStudentGuid), !0;
    }
  } else if (Ph() && Yg(a.strStudentGuid) && Yg(a.strNoteAnnotationGuid) && Bh() == a.strStudentGuid) {
    return L.sa({type:"ANNOTATE_NEW_WEB_ANNOTATION_FILE_ADDED", oAnnotation:{strGUID:a.strNoteAnnotationGuid, uAnnotationType:1, uVersionNo:a.uVersionNo}}, null), !0;
  }
  return !1;
}
function LM(a) {
  return a && Un() == a.strAnnotationGuid ? (a = 1 == a.bNotesAllowed ? !0 : !1, 2 == S.g && Ph() && (MM(W, a, S.Vl()), gw(a ? "Notetaking has been enabled by your instructor." : "Notetaking has been disabled by your instructor.", !0)), !0) : !1;
}
function NM(a) {
  console.log("Livefeed Notification", a);
  L && L.sa({type:"annotateLivefeedNotificationEvent", evtData:a,}, null);
}
function OM(a) {
  console.log("Livefeed Ended Notification", a);
  L && L.sa({type:"annotateLivefeedDeletedEvent", evtData:a,}, null);
}
function PM(a) {
  let b = !1;
  Yg(a.strDocumentGuid) && Un() == a.strDocumentGuid && 1 == S.g && (a.strGUID = a.strDocumentGuid, a.uLivefeedClassId = a.uGroupId, dt(a, !0), b = !0);
  console.log("On CoTProjection Room Added", b, a);
  return b;
}
function QM(a) {
  var b = !1;
  Yg(a.strDocumentGuid) && Un() == a.strDocumentGuid && 1 == S.g && ((b = Js(S, 1)) && b.o.j == a.strDocumentGuid && (b.o.nj(), b.su = !1, iq(W, b.qd, hq(b))), b = !0);
  console.log("On CoTProjection Room Closed", b, a);
  return b;
}
function RM(a) {
  return Kh() && (a = a.strAnnotationGuid, Yg(a) && Un() == a && V && SM()) ? (Kn("", "The maximum number of active Livestream connections for an Open Enrollment course has been reached. To allow more users to access your Livestream, please create a course, enroll your students, and then initiate a Livestream.", "OK"), !0) : !1;
}
function TM(a, b) {
  let c = parseInt(a.uClassId), d = Js(S, 1);
  if (d && -1 != c && c == S.j && Yg(d.ma)) {
    let e = !1, f = Kh() ? 67 == b : !1;
    "bDeleted" in a && (e = 1 == parseInt(a.bDeleted));
    "bLeftBySelf" in a && (f = 1 == parseInt(a.bLeftBySelf));
    Kh() && 4 == b ? W.nA(a.arrRemovedStudentGuid) : UM(W, 2, 1, k => {
      var l = Ph() ? "Your instructor has removed you from this course." : "You have been removed from this course.";
      e ? l = "This course has been deleted." : f && (l = "You have left the course successfully.");
      k && (k = l, l = RB, l.g || QB(l), l.g.s = !0, l.g.Yr(k, "", null, !1, !1), l = "This Livestream is no longer available.");
      NB && JM(l);
    });
  }
  return !1;
}
function VM(a) {
  if ("arrAnnotation" in a && "arrClass" in a) {
    let b = a.arrAnnotation, c = a.arrClass, d = Js(S, 1), e = S.j;
    d && (-1 != e && -1 != c.indexOf(e) || "bMoveToTrash" in a && 1 == parseInt(a.bMoveToTrash)) && (a = d.ma, Yg(a) && -1 != b.indexOf(a) && UM(W, 2, 1, () => {
      NB && JM("This web annotation is no longer available in this course.");
    }));
  }
  return !1;
}
function WM(a) {
  console.log("Web annotation export Notification", a);
  if (a.bPdf) {
    var b = {};
    b.strGUID = a.strAnnotationGuid;
    b.uExportPDFStatus = a.uStatus;
    b.strPDFDownloadLink = a.strImageLink;
    b.uExportedPDFVersionNo = a.uExportedVersionNo;
    L.sa({type:"annotateWebannotationExportStatusEvent", evtData:b,}, null);
  } else {
    "strAnnotationGuid" in a && a.strAnnotationGuid == An() && (b = XM, b.j.i == YM && lC(b.j) && ZM(XM, {uPanelType:YM, action:Kg.YK, response:a}));
  }
}
function $M(a) {
  console.log("Web annotation export Notification", a);
  if (L) {
    var b = {};
    b.strGUID = a.strAnnotationGuid;
    b.uExportingStage = a.uExportingStage;
    L.sa({type:"annotateWebannotationExportStatusEvent", evtData:b,}, null);
  }
}
function aN(a) {
  console.log("Open WA livefeed ", a);
  L && L.sa({type:"ANNOATATE_INITIATED_OPEN_WA_LF_BY_TEACHER", LivefeedInfo:a.LivefeedInfo,}, null);
  return !0;
}
function bN(a) {
  var b = !0;
  if (a) {
    switch(a.packetSubType) {
      case 314:
        b = KM(a.packetData);
        break;
      case 315:
        b = cN(a.packetData);
        break;
      case 316:
        b = LM(a.packetData);
        break;
      case 317:
        NM(a.packetData);
        break;
      case 417:
        OM(a.packetData);
        break;
      case 103:
        b = PM(a.packetData);
        break;
      case 105:
        b = QM(a.packetData);
        break;
      case 319:
        b = RM(a.packetData);
        break;
      case 33:
      case 47:
      case 308:
      case 1001:
        !A(a) && Lo ? (pl(), b = !1) : b = !1;
        break;
      case 76:
        b = ht(a.packetData);
        break;
      case 4:
      case 67:
      case 70:
        b = TM(a.packetData, a.packetSubType);
        break;
      case 311:
        b = VM(a.packetData);
        break;
      case 318:
        console.log("PKT_CHECK_LOGIN_STATE...");
        L.sa({type:"AnnotateCheckLoginState"}, null);
        break;
      case 306:
        WM(a.packetData);
        break;
      case 323:
        $M(a.packetData);
        break;
      case 32:
        L.sa({type:"annotateAccountUpgrade"}, null);
        break;
      case 4000:
        Kh() && !M.g && a && "bCCLConnected" in a && Eh(M, a.bCCLConnected);
        break;
      case 4001:
        M.g && a && "bWebConnected" in a && (window.top == window || Fh(P)) && console.log("Web event conn state updated", a.bWebConnected);
        break;
      case 1:
        if (Kh() && !M.g && a && a.packetData) {
          a = a.packetData.arrIP.filter(d => d && d.trim().length);
          let c = 0 < a.length;
          console.log("bAMCLoggedIn", c, "DESKTOP_IP_UPDATED", a);
          V && dN({bAMCLoggedIn:c});
        }
        break;
      case 9999:
        Kh() && !M.g && a && "status" in a && (a = a.status, console.log("bCCLLoggedIn", a), V && dN({bCCLLoggedIn:a}));
        break;
      case 107:
        Kh() && !M.g && a && (b = aN(a.packetData));
    }
  }
  return b;
}
;function eN(a) {
  a.i = !0;
  fN(a.g) ? L.sa({type:"ANNOTATE_EVENT_SERVER_GET_CONNECTION_STATE"}, b => {
    if (b && "bConnected" in b) {
      if (b.bConnected) {
        yh(!0);
      } else {
        yh(!1);
        b = a.g;
        var c = new $m(2);
        c.re({strUserGuid:b.i, userType:b.B, bPublisher:!1, strOwnerGuid:b.i});
        if (2 == b.j.g.g) {
          if (b.g) {
            fN(b) && EM(b.g, b.i, 2, c);
          } else {
            if (b.g = FM(b.j, b.i, 2, c), c = b.g) {
              c.addEventListener(CM.g, b.l), c.addEventListener(CM.i, b.m), c.addEventListener(CM.j, b.o), c.addEventListener(CM.l, b.s);
            }
          }
        }
      }
    }
  }) : yh(!0);
}
class gN extends ph {
  constructor(a) {
    super();
    this.l = this.l.bind(this);
    this.m = this.m.bind(this);
    this.j = this.j.bind(this);
    this.g = new hN(a);
    this.g.addEventListener(hN.i, this.l);
    this.g.addEventListener(hN.j, this.m);
    this.g.addEventListener(hN.g, this.j);
    this.i = !0;
  }
  l() {
    console.log("Event Server : Packet controller connected!");
    this.i && eN(this);
  }
  m() {
    console.log("Event Server : Packet controller disconnected!");
    console.log("Check is user logged out? on edge server ws disconnection");
    L.sa({type:"ANNOTATE_EVENT_SERVER_GET_CONNECTION_STATE"}, a => {
      a && "bConnected" in a && (a.bConnected || yh(!1));
    });
    L.sa({type:"AnnotateCheckLogout"}, null);
  }
  j(a) {
    if (a = a.detail) {
      let b = a.packetSubType;
      318 == b || 306 == b && a.packetData.bPdf || 323 == b || Ph() && 314 == b ? bN(a) || L.sa({type:"ANNOTATE_EVENT_SERVER_MSG_FORWARD_TO_OTHER_TAB", packet:a}, null) : L.sa({type:"ANNOTATE_EVENT_SERVER_MSG_FORWARD_TO_ALL_TAB", packet:a}, null);
    }
  }
  ge() {
    return this.g ? this.g.ge() : !1;
  }
  U() {
    if (this.g) {
      this.i = !1;
      var a = this.g;
      a.g && wM(a.g);
    }
  }
}
;function fN(a) {
  return a.g ? 0 == a.g.m : !0;
}
function iN(a, b) {
  b && (b.removeEventListener(CM.g, a.l), b.removeEventListener(CM.i, a.m), b.removeEventListener(CM.j, a.o), b.removeEventListener(CM.l, a.s));
}
class hN extends ph {
  static get i() {
    return "evt_event_ws_conn_manager_connected";
  }
  static get j() {
    return "evt_event_ws_conn_manager_disconnected";
  }
  static get g() {
    return "evt_event_ws_message";
  }
  constructor(a) {
    super();
    this.i = Bh();
    this.B = M.j;
    this.g = null;
    this.v = this.v.bind(this);
    this.u = this.u.bind(this);
    this.l = this.l.bind(this);
    this.m = this.m.bind(this);
    this.o = this.o.bind(this);
    this.s = this.s.bind(this);
    this.j = a;
    this.j.addEventListener(IM.g, this.v);
    this.j.addEventListener(IM.i, this.u);
  }
  v() {
    this.dispatchEvent(new CustomEvent(hN.i));
  }
  u() {
    this.g && (iN(this, this.g), this.g = null);
    this.dispatchEvent(new CustomEvent(hN.j));
  }
  l() {
    console.log("Event server room connected");
    yh(!0);
    L.sa({type:"ANNOTATE_EVENT_SERVER_UPDATE_CONNECTION_STATE", bConnected:!0}, null);
  }
  o() {
    console.log("Event server room disconnected");
    this.g && (iN(this, this.g), this.g = null);
    L.sa({type:"ANNOTATE_EVENT_SERVER_UPDATE_CONNECTION_STATE", bConnected:!1}, null);
    L.sa({type:"ANNOTATE_EVENT_SERVER_GET_CONNECTION_STATE"}, a => {
      a && "bConnected" in a && (a.bConnected || yh(!1));
    });
  }
  m() {
    console.log("Event room connection failed");
    this.g && BM(this.g);
  }
  s(a) {
    this.dispatchEvent(new CustomEvent(hN.g, {detail:a.detail.packetData}));
  }
  ge() {
    return this.g ? this.g.ge() : !1;
  }
}
;function jN(a) {
  return a.i ? a.i.hB : !1;
}
function kN(a, b, c, d, e) {
  jN(a) && zM(a, {type:102, docGuid:b, strOwnerGuid:c, data:d,}, e);
}
function OI(a, b, c) {
  jN(a) && zM(a, {type:103, docGuid:b, strOwnerGuid:c}, null);
}
function lN(a, b, c, d) {
  jN(a) || zM(a, {type:101, docGuid:b, strOwnerGuid:c, versionTree:d}, null);
}
function mN(a, b) {
  jN(a) && zM(a, {type:112, docGuid:a.g(), data:b,}, null);
}
function nN(a, b) {
  jN(a) && zM(a, {type:113, docGuid:a.g(), data:b,}, null);
}
function oN(a, b) {
  jN(a) && zM(a, {type:114, docGuid:a.g(), data:b,}, null);
}
function pN(a, b) {
  jN(a) && zM(a, {type:115, docGuid:a.g(), data:b,}, null);
}
function qN(a, b) {
  jN(a) && zM(a, {type:118, docGuid:a.g(), data:b,}, null);
}
function rN(a, b) {
  jN(a) && zM(a, {type:121, docGuid:a.g(), data:b,}, null);
}
function sN(a, b) {
  jN(a) && zM(a, {type:122, docGuid:a.g(), data:b,}, null);
}
function tN(a, b, c) {
  jN(a) && zM(a, {type:131, docGuid:a.g(), data:b,}, c);
}
function uN(a, b, c) {
  jN(a) && zM(a, {type:132, docGuid:a.g(), data:b,}, c);
}
class vN extends CM {
  constructor(a) {
    super(a);
    this.J = !1;
  }
  Fr(a) {
    this.J = !1;
    super.Fr(a);
  }
  g() {
    return this.i ? this.i.Hx : null;
  }
  l() {
    return this.i ? this.i.Fs.zd : null;
  }
}
;function wN(a, b) {
  if (b && jN(b)) {
    let c = Oo(S);
    if (c && c.ma == b.g() || a.s && a.s == b.g()) {
      a.i = b;
    }
  }
}
function xN(a, b) {
  VH(a.j, {type:"annotateLiveNotesRequestEvent", frameId:NH(a.j), msgData:b,});
}
function yN(a, b, c) {
  Un() != b && Zs() != b || a.g != zN || a.kd({type:"ANNOTATE_PDF_UPDATE_PDF_VIEW", data:c});
}
function AN(a, b, c) {
  if (c && Un() == b) {
    if (a.g == BN) {
      var d = c.eleData;
      let e = c.slideId, f = CN(!0);
      DN(f, d);
      a.j && (a.j.Af == e && a.j.dm ? (d = !1, f.tu && (d = !0, c.eleData = f.Qs, f.tu = !1), xN(a, {type:"ANNOTATE_ELEMENT_ADDING", docGuid:b, data:c, docMode:1, bRepaint:d,})) : f.tu = !0);
    } else {
      a.g == zN && (a = CN(!0)) && EN(a, c);
    }
  }
}
class FN extends ph {
  constructor(a) {
    super();
    this.m = a;
    this.j = this.m.s();
    this.D = this.m.g();
    this.i = null;
    this.g = zN;
    this.s = null;
  }
  o(a) {
    if (Un() == a) {
      if ((a = nv()) && this.g == zN) {
        let b = this.m.g();
        b && (a.pdfTree = WJ(b));
      }
      return a;
    }
    return null;
  }
  v(a, b, c, d) {
    if (Un() == a || this.s == a) {
      if (this.g == BN) {
        d = {type:"ANNOTATE_GET_DOCUMENT_SYNC_DATA", docGuid:a, versionTree:d, senderInfo:c, strOwnerGuid:b, docMode:1,}, this.m.ue && this.m.ue({type:"annotateSlideToPresentationEvent", msgData:d});
      } else if (this.g == zN) {
        return b = this.m.g(), (a = rv(d)) && b && (a.docSyncData = YJ(b, d.pdfTree), (d = this.m.l()) && (a.curEleSyncData = d)), a;
      }
    }
    return null;
  }
  u(a, b, c) {
    if (Un() == a) {
      this.g == BN && this.j.dm && xN(this, {type:"ANNOTATE_PARSE_DOCUMENT_SYNC_DATA", docGuid:a, strOwnerGuid:b, syncData:c, docMode:1});
      b = S;
      b.i && vr(b.i, c);
      b = null;
      if ("docSyncData" in c) {
        var d = c.docSyncData;
        if (d && "curPage" in d) {
          if (b = d.curPage, this.g == BN && this.j) {
            SH(this.j, b, d.curAnimation, d.direction, d.prevPage);
          } else if (this.g == zN) {
            let e = d.pagesData;
            if (e) {
              let f = this.m.g();
              f && ZJ(f, e);
            }
            yN(this, a, d.posData);
          }
        }
      }
      if (this.g == zN) {
        if (GN(Ao, 1, [], !0), "curEleSyncData" in c && (c = c.curEleSyncData)) {
          c.bFirstPoints = 1, AN(this, a, c);
        }
      } else {
        this.g == BN && "curEleSyncData" in c && (c = c.curEleSyncData) && (c.bFirstPoints = 1, d = CN(!0), DN(d, c), d.tu = !0, this.j && this.j.Af == b && this.j.dm && (d.tu = !1, xN(this, {type:"ANNOTATE_ELEMENT_ADDING", docGuid:a, data:{slideId:b, eleData:c,}, docMode:1, bRepaint:!0,})));
      }
    }
  }
  B(a, b, c) {
    if (Un() == a) {
      if (b = S.i, this.g == BN) {
        let d = c, e = CN(!1);
        if (e) {
          let f = e.Qs;
          if (f) {
            d = JSON.parse(JSON.stringify(c));
            let k = null;
            "arrElement" in d && d.arrElement && 0 < d.arrElement.length && (k = d.arrElement[0]);
            DN(e, k);
            e.Qs = null;
            e.tu = !1;
            k && (f.nId = k.nId, f.uuid = k.uuid, d.arrElement[0] = f);
          }
        }
        HN(b, d);
        xN(this, {type:"ANNOTATE_ELEMENTS_ADDED", docGuid:a, data:c, docMode:1});
      } else {
        this.g == zN && IN(b, c, 1);
      }
    }
  }
  G(a, b, c) {
    Un() == a && (b = S.i, this.g == BN ? (JN(b, c), xN(this, {type:"ANNOTATE_ELEMENTS_REMOVED", docGuid:a, data:c, docMode:1})) : this.g == zN && ((a = CN(!1)) && a.Tn(), KN(b, c, 1)));
  }
  C(a, b, c) {
    Un() == a && (b = S.i, this.g == BN ? (LN(b, c), xN(this, {type:"ANNOTATE_ELEMENT_PROPS_UPDATED", docGuid:a, data:c, docMode:1})) : this.g == zN && MN(b, c, 1));
  }
  N(a, b, c) {
    Un() == a && (b = S.i, this.g == BN ? (LN(b, c), xN(this, {type:"ANNOTATE_ELEMENT_MODIFIED", docGuid:a, data:c, docMode:1})) : this.g == zN && NN(b, c, 1));
  }
  J(a, b, c) {
    Un() == a && (a = S.i, this.g != BN && this.g != zN || ON(a, c, 1));
  }
  M(a, b, c) {
    Un() == a && (b = S.i, this.g == BN && (PN(b, c), xN(this, {type:"ANNOTATE_SLIDE_ACTION", docGuid:a, data:c, docMode:1})));
  }
  kd(a) {
    -1 != window.location.href.indexOf("https://annotate.net") && window.postMessage(a, "*");
  }
}
;function QN(a, b) {
  b && (b.removeEventListener(vN.g, a.m), b.removeEventListener(vN.i, a.o), b.removeEventListener(vN.j, a.s), b.removeEventListener(vN.l, a.v));
}
function RN(a, b) {
  b && (b.addEventListener(vN.g, a.m), b.addEventListener(vN.i, a.o), b.addEventListener(vN.j, a.s), b.addEventListener(vN.l, a.v));
}
function SN(a) {
  a.i && (QN(a, a.i), a.i = null);
}
class TN extends ph {
  static get m() {
    return "EVT_CONNECTION_CONNECTED";
  }
  static get j() {
    return "EVT_CONNECTION_DISCONNECTED";
  }
  static get g() {
    return "EVT_DOCUMENT_CONNECTED";
  }
  static get i() {
    return "EVT_DOCUMENT_DISCONNECTED";
  }
  static get l() {
    return "EVT_WS_MESSAGE_RECEIVED";
  }
  constructor(a) {
    super();
    this.C = this.C.bind(this);
    this.u = this.u.bind(this);
    this.m = this.m.bind(this);
    this.o = this.o.bind(this);
    this.s = this.s.bind(this);
    this.v = this.v.bind(this);
    this.i = null;
    this.l = a;
    this.l.addEventListener(IM.g, this.C);
    this.l.addEventListener(IM.i, this.u);
  }
  C() {
    this.dispatchEvent(new CustomEvent(TN.m));
  }
  u() {
    this.i && (QN(this, this.i), this.i = null);
    this.dispatchEvent(new CustomEvent(TN.j));
  }
  B(a) {
    let b = a.docGuid, c = a.strOwnerGuid, d = a.uClassId, e = c + "_" + d + "_" + b, f = new $m(3);
    f.re({strUserGuid:Bh(), userType:M.j, bPublisher:a.bPublisher, extraInfo:{strOwnerGuid:c, uClassId:parseInt(d), docGuid:b, uLivefeedType:a.uLivefeedType, strUserName:a.strUserName, bCCLAllowed:a.bCCLAllowed, uLivefeedActivityId:V.G}});
    f.o = e;
    f.Hx = b;
    f.l = d;
    2 == this.l.g.g && (this.i && this.i.o == e ? (this.i ? 0 == this.i.m : 1) && EM(this.i, e, 3, f) : (this.i = FM(this.l, e, 3, f), RN(this, this.i)));
  }
  m() {
    this.dispatchEvent(new CustomEvent(TN.g, {detail:this.i}));
  }
  s() {
    QN(this, this.i);
    this.dispatchEvent(new CustomEvent(TN.i, {detail:this.i}));
  }
  o() {
    console.log("Document virtual connection failed");
    this.i && BM(this.i);
  }
  v(a) {
    this.dispatchEvent(new CustomEvent(TN.l, {detail:a.detail}));
  }
  g() {
    return this.i;
  }
}
;var zN = 0, BN = 1;
function UN(a, b) {
  a.ba = b;
  a.i.g = a.ba;
}
function VN(a) {
  return a && !jN(a) && a.J ? !0 : !1;
}
class WN extends ph {
  constructor(a) {
    super();
    this.u = this.u.bind(this);
    this.B = this.B.bind(this);
    this.C = this.C.bind(this);
    this.G = this.G.bind(this);
    this.o = this.o.bind(this);
    this.g = this.i = null;
    this.ib(a);
    this.g && (this.g.addEventListener(XN.m, this.u), this.g.addEventListener(XN.j, this.B), this.g.addEventListener(XN.g, this.C), this.g.addEventListener(XN.i, this.G), this.g.addEventListener(XN.l, this.o));
    this.ba = zN;
  }
  ib(a) {
    this.g = new TN(a);
  }
  u() {
  }
  B() {
  }
  C() {
  }
  G() {
  }
  o(a) {
    var b = a.detail;
    if (!b) {
      return !1;
    }
    var c = !1;
    a = b.packetData;
    b = b.senderInfo;
    if (a) {
      switch(a.type) {
        case 101:
          this.pa(a, b);
          c = !0;
          break;
        case 102:
          this.ya(a);
          c = !0;
          break;
        case 103:
          this.ia(a);
          c = !0;
          break;
        case 112:
          if (a) {
            var d = a.docGuid;
            c = this.g.g(d);
            VN(c) && this.i.B(d, c.l(), a.data);
          }
          c = !0;
          break;
        case 113:
          a && (d = a.docGuid, c = this.g.g(d), VN(c) && this.i.G(d, c.l(), a.data));
          c = !0;
          break;
        case 114:
          a && (d = a.docGuid, c = this.g.g(d), VN(c) && this.i.C(d, c.l(), a.data));
          c = !0;
          break;
        case 115:
          a && (d = a.docGuid, c = this.g.g(d), VN(c) && this.i.N(d, c.l(), a.data));
          c = !0;
          break;
        case 117:
          a && (d = a.docGuid, c = this.g.g(d), VN(c) && this.i.M(d, c.l(), a.data));
          c = !0;
          break;
        case 121:
          if (a && (d = a.docGuid, (c = this.g.g(d)) && !jN(c) && (c = this.i, a = a.data, (Un() == d || Zs() == d) && c.g == BN && c.j))) {
            b = a.curPage;
            var e = a.curAnimation, f = a.direction;
            let k = null;
            Zs() == d && a.prevPage && a.prevPage.length && (k = a.prevPage);
            SH(c.j, b, e, f, k);
          }
          c = !0;
          break;
        case 122:
          a && (d = a.docGuid, (c = this.g.g(d)) && !jN(c) && yN(this.i, d, a.data));
          c = !0;
          break;
        case 123:
          a && (d = a.docGuid, (c = this.g.g(d)) && !jN(c) && (c = this.i, Un() == d && c.g == zN && c.m.i("ANNOTATE_PDF_PAGE_INSERTED", a.data)));
          c = !0;
          break;
        case 124:
          a && (d = a.docGuid, (c = this.g.g(d)) && !jN(c) && (c = this.i, Un() == d && c.g == zN && c.m.i("ANNOTATE_PDF_PAGE_REMOVED", a.data)));
          c = !0;
          break;
        case 125:
          a && (d = a.docGuid, (c = this.g.g(d)) && !jN(c) && (c = this.i, Un() == d && c.g == zN && c.m.i("ANNOTATE_PDF_PAGE_SIZE_CHANGED", a.data)));
          c = !0;
          break;
        case 126:
          a && (d = a.docGuid, (c = this.g.g(d)) && !jN(c) && (c = this.i, Un() == d && c.g == zN && c.m.i("ANNOTATE_PDF_SHOW_HIDE_PAGE", a.data)));
          c = !0;
          break;
        case 111:
          a && (d = a.docGuid, VN(this.g.g(d)) && AN(this.i, d, a.data));
          c = !0;
          break;
        case 116:
          if (a && (b = a.docGuid, VN(this.g.g(b)) && (c = this.i, (a = a.data) && Un() == b))) {
            if (c.g == BN) {
              xN(c, {type:"ANNOTATE_LASER_MOVING", docGuid:b, data:a, docMode:1});
            } else if (c.g == zN && c.D) {
              a = a.arrPts;
              for (d of a) {
                if (2 == d.type) {
                  break;
                }
                b = c.D.scale;
                0 < b && (d.eX *= b, d.eY *= b);
                b = c.D.uq;
                e = ox(c.D, b);
                d.eX += Ez(c.D, b);
                d.eY += e;
                b = c.D.Ea;
                e = d.eX;
                for (f = d.eY; b;) {
                  e = e + b.offsetLeft - b.scrollLeft, f = f + b.offsetTop - b.scrollTop, b = b.offsetParent;
                }
                b = new il(e, f);
                e = L.tL();
                f = L.uL();
                d.eX = b.x - e;
                d.eY = b.y - f;
              }
              c.m.v(a);
            }
          }
          c = !0;
          break;
        case 131:
          a && (c = a.docGuid, VN(this.g.g(c)) && (d = this.i, (a = a.data) && Un() == c && Ph() && (MM(W, a.bNotesAllowed, S.Vl()), gw(a.bNotesAllowed ? "Notetaking has been enabled by your instructor." : "Notetaking has been disabled by your instructor.", !0), d.g == zN && d.kd({type:"ANNOTATE_PDF_STUDENT_NOTES_MODE_CHANGED", data:a}))));
          c = !0;
          break;
        case 132:
          a && (d = a.docGuid, VN(this.g.g(d)) && (a = a.data, window == window.top && Un() == d && (Ph() || M.g || 2 == S.m) && YN(a && null != a.strSharedStudentGUID && a.strSharedStudentGUID != Bh(), a)));
          c = !0;
          break;
        case 118:
          a && (d = a.docGuid, c = this.g.g(d), VN(c) && this.i.J(d, c.l(), a.data)), c = !0;
      }
    }
    return c;
  }
  pa() {
  }
  ya() {
  }
  ia() {
  }
  v(a) {
    if (a) {
      let b = a.data;
      switch(a.type) {
        case "ANNOTATE_ELEMENTS_ADDED":
          a = this.i;
          a.i && a.i.ge() && mN(a.i, b);
          break;
        case "ANNOTATE_ELEMENTS_REMOVED":
          a = this.i;
          a.i && a.i.ge() && nN(a.i, b);
          break;
        case "ANNOTATE_ELEMENT_PROPS_UPDATED":
          a = this.i;
          a.i && a.i.ge() && oN(a.i, b);
          break;
        case "ANNOTATE_ELEMENT_MODIFIED":
          a = this.i;
          a.i && a.i.ge() && pN(a.i, b);
          break;
        case "ANNOTATE_SLIDE_ACTION":
          a = this.i;
          a.i && a.i.ge() && (a = a.i, jN(a) && zM(a, {type:117, docGuid:a.g(), data:b,}, null));
          break;
        case "ANNOTATE_PDF_VIEW_UPDATED":
          a = this.i;
          a.i && a.i.ge() && sN(a.i, b);
          break;
        case "ANNOTATE_POLYLINE_ADDING":
          a = this.i;
          a.i && a.i.ge() && (a = a.i, jN(a) && zM(a, {type:111, docGuid:a.g(), data:b,}, null));
          break;
        case "ANNOTATE_SLIDES_VIEW_UPDATED":
          a = this.i;
          a.i && a.i.ge() && rN(a.i, b);
          break;
        case "ANNOTATE_PDF_PAGE_INSERTED":
          a = this.i;
          a.i && a.i.ge() && (a = a.i, jN(a) && zM(a, {type:123, docGuid:a.g(), data:b,}, null));
          break;
        case "ANNOTATE_PDF_PAGE_REMOVED":
          a = this.i;
          a.i && a.i.ge() && (a = a.i, jN(a) && zM(a, {type:124, docGuid:a.g(), data:b,}, null));
          break;
        case "ANNOTATE_PDF_PAGE_SIZE_CHANGED":
          a = this.i;
          a.i && a.i.ge() && (a = a.i, jN(a) && zM(a, {type:125, docGuid:a.g(), data:b,}, null));
          break;
        case "ANNOTATE_PDF_SHOW_HIDE_PAGE":
          a = this.i;
          a.i && a.i.ge() && (a = a.i, jN(a) && zM(a, {type:126, docGuid:a.g(), data:b,}, null));
          break;
        case "ANNOTATE_LASER_MOVING":
          a = this.i;
          a.i && a.i.ge() && (a = a.i, jN(a) && zM(a, {type:116, docGuid:a.g(), data:b,}, null));
          break;
        case "ANNOTATE_NOTES_MODE_CHANGED":
          a = this.i;
          a.i && a.i.ge() && tN(a.i, b, null);
          break;
        case "ANNOTATE_SHARE_NOTES_FEEDBACK_CHANGED":
          a = this.i;
          a.i && a.i.ge() && uN(a.i, b, null);
          break;
        case "ANNOTATE_MEDIA_REENCODED":
          a = this.i, a.i && a.i.ge() && qN(a.i, b);
      }
    }
  }
  s() {
    return 2 == this.g.l.g.g;
  }
  U() {
  }
}
;function DN(a, b) {
  if (b && ("pen" == b.strElement || "highlighter" == b.strElement)) {
    if ("bFirstPoints" in b && 1 == b.bFirstPoints && (a.Qs = null), a.Qs) {
      if ((a = a.Qs.arrDrawingPts) && b.arrDrawingPts) {
        b = b.arrDrawingPts;
        for (let c = 0; c < b.length; c += 2) {
          b[c] = Math.round(100 * b[c]) / 100, b[c + 1] = Math.round(100 * b[c + 1]) / 100, a.push(b[c]), a.push(b[c + 1]);
        }
      }
    } else {
      a.Qs = b;
    }
  }
}
function EN(a, b) {
  if (b && ("pen" == b.strElement || "highlighter" == b.strElement) && ("bFirstPoints" in b && 1 == b.bFirstPoints && (a.g = null), !a.g || "pen" == a.g.cb() || "highlighter" == a.g.cb())) {
    if (a.g) {
      if (a = Ao, a.v && a.s) {
        var c = a.v;
        let d = a.v.j;
        si() && (d = P.D.scale);
        a.s.save();
        a.s.scale(d, d);
        if (b.arrDrawingPts) {
          b = b.arrDrawingPts;
          for (let e = 0; e < b.length; e += 2) {
            qz(c, b[e], b[e + 1]), rz(c, a.s, d);
          }
        }
        a.s.restore();
      }
    } else {
      a.g = zo(b, !1), c = Ao, c.v = a.g, c.v && c.s && (a = c.v.j, si() && (a = P.D.scale), c.s.save(), c.s.scale(a, a), rz(c.v, c.s, a), c.s.restore());
    }
  }
}
class ZN {
  constructor() {
    this.Qs = this.g = null;
    this.tu = !1;
  }
  Tn() {
    this.g && (this.g = null, Ao.v = null);
  }
}
;function qI(a) {
  let b = document.getElementById("annotate-student-notes-control-toolbar-NotesStatus");
  if (b) {
    let c, d = "white";
    a ? (a = "extension_icon extension_icon-student_notes_unlocked_base", c = "extension_icon extension_icon-student_notes_unlocked_layer") : (a = "extension_icon extension_icon-student_notes_locked_base", c = "extension_icon extension_icon-student_notes_locked_layer", d = "red");
    b.innerHTML = `<div style="width: ${26}px; height: ${32}px;">
        <div class="${a}" style="width: ${26}px; height: ${32}px; color: ${"white"}"></div>
        <div class="${c}" style="width: ${26}px; height: ${32}px; color: ${d}"></div>
        </div>`;
  }
}
function WI(a, b) {
  var c = fI;
  if (c.g) {
    c = c.g;
    var d = c.Sk;
    a = lA(d, a);
    -1 != a && (b && d.l(d, a == d.g.length - 1 ? a - 1 : a), d.i.ay(d.g[a]), d.g.splice(a, 1));
    oA(c);
    c.V(c.width, c.height);
  }
}
function $N(a) {
  var b = 0;
  a.i && (b += a.i.offsetWidth);
  a.g && (b += a.g.Ra());
  b = (window.visualViewport.width - b) / 2;
  a.g && (a.g.Nd(b), b += a.g.Ra());
  a.i && (a.i.style.left = b + "px");
}
function aO(a, b) {
  a.s = b;
  if (a = document.getElementById("annotate-student-notes-control-toolbar-notes")) {
    b ? (a.className = "extension_icon extension_icon-student_notes_visible", a.setAttribute("title", Kh() ? "Hide student work" : "Hide my work")) : (a.className = "extension_icon extension_icon-student_notes_invisible", a.setAttribute("title", Kh() ? "Show student work" : "Show my work"));
  }
}
function bO(a, b) {
  a.m = b;
  if (a = document.getElementById("annotate-student-notes-control-toolbar-feedback")) {
    b ? (a.className = "extension_icon extension_icon-student_notes_feedback_visible", a.setAttribute("title", "Hide Instructor comments")) : (a.className = "extension_icon extension_icon-student_notes_feedback_invisible", a.setAttribute("title", "Show Instructor comments"));
  }
}
class rA extends ph {
  static get g() {
    return "EVT_SHOW_HIDE_BASE_ANNOTATIONS";
  }
  static get j() {
    return "EVT_SHOW_HIDE_NOTES";
  }
  static get i() {
    return "EVT_SHOW_HIDE_FEEDBACK";
  }
  static get m() {
    return "EVT_CLOSE_FEEDBACK_DOCUMENT";
  }
  static get o() {
    return "EVT_NOTE_TAKING_CHANGED";
  }
  static get l() {
    return "EVT_STUDENT_CHANGED";
  }
  constructor() {
    super();
    this.g = this.i = null;
    this.m = this.s = this.l = !0;
  }
  o(a) {
    this.g.o(a);
  }
  j(a) {
    if (!this.i && a) {
      if (!this.i) {
        var b = [{id:"annotate-student-notes-control-toolbar-base", title:"Show/ hide web annotations", className:"extension_icon extension_icon-base_annotations_visible", style:{height:"32px", width:"26px", "float":"left", background:"transparent", boxSizing:"border-box", position:"relative", color:"#FFFFFF"}, Qa:this.v.bind(this)}, {id:"annotate-student-notes-control-toolbar-notes", title:Kh() ? "Hide student work" : "Hide my work", className:"extension_icon extension_icon-student_notes_visible", 
        style:{height:"32px", width:"26px", "float":"left", background:"transparent", boxSizing:"margin-left", "margin-left":"8px", position:"relative", color:"#FFFFFF"}, Qa:this.C.bind(this)}, {id:"annotate-student-notes-control-toolbar-feedback", title:"Hide Instructor comments", className:"extension_icon extension_icon-student_notes_feedback_visible", style:{height:"32px", width:"26px", "float":"left", background:"transparent", boxSizing:"border-box", "margin-left":"8px", position:"relative", 
        color:"#FFFFFF"}, Qa:this.u.bind(this)}];
        Kh() && Pl() && (b.push({id:"annotate-student-notes-control-toolbar-NotesStatus", title:"Enable/ disable note taking", className:"", style:{height:"32px", width:"26px", "float":"left", background:"transparent", boxSizing:"border-box", "margin-left":"8px", position:"relative", color:"#FFFFFF"}, Qa:this.J.bind(this)}), b.push({id:"annotate-student-notes-control-toolbar-close", title:"Close student notes", className:"extension_icon extension_icon-close", style:{height:"32px", width:"26px", "float":"left", 
        background:"transparent", boxSizing:"border-box", "margin-left":"8px", position:"relative", color:"#FFFFFF"}, Qa:this.B.bind(this)}));
        this.i = hk({parent:document.body, id:"annotate-student-notes-control-toolbar", style:{position:"fixed", zIndex:Yj, display:"none", boxSizing:"content-box", fontSize:0, padding:"8px", "background-color":"rgba(32, 32, 32, 0.54)", color:"white", bottom:"48px",}, buttons:b});
      }
      qI(!0);
    }
    Kh() && !this.g && a && (b = this.g = new qA(this), zj(b, "rgba(32, 32, 32, 0.54)"), b.xe("white"), this.g.v((8).toString()), this.g.V(250, 48), this.g.el.style.bottom = "48px", document.body.appendChild(this.g.el));
    this.i && (this.i.style.display = a ? "block" : "none");
    this.g && (a ? this.g.pb() : this.g.ja());
    $N(this);
  }
  Cd(a, b) {
    this.g && this.g.Cd(a, b);
  }
  v() {
    var a = !this.l;
    this.l = a;
    let b = document.getElementById("annotate-student-notes-control-toolbar-base");
    b && (b.className = a ? "extension_icon extension_icon-base_annotations_visible" : "extension_icon extension_icon-base_annotations_invisible");
    this.dispatchEvent(new CustomEvent(rA.g, {detail:this.l}));
  }
  C() {
    aO(this, !this.s);
    this.dispatchEvent(new CustomEvent(rA.j, {detail:this.s}));
  }
  u() {
    bO(this, !this.m);
    this.dispatchEvent(new CustomEvent(rA.i, {detail:this.m}));
  }
  B() {
    this.dispatchEvent(new CustomEvent(rA.m, {detail:{}}));
  }
  J() {
    this.dispatchEvent(new CustomEvent(rA.o, {detail:{}}));
  }
}
;function cO(a, b) {
  a.dispatchEvent(new CustomEvent(dO.g, {detail:b}));
}
function eO(a, b, c) {
  if (a && b && c in a) {
    b[c] = [];
    var d = a[c];
    if (d) {
      a = null;
      for (a of d) {
        d = a;
        let e = d.C();
        d.Ul(e);
        b[c].push(e);
      }
    }
  }
}
class dO extends ph {
  static get g() {
    return "evt_document_updated";
  }
  constructor() {
    super();
    this.g = null;
    this.j = this.j.bind(this);
    this.m = this.m.bind(this);
    this.l = this.l.bind(this);
    this.i = this.i.bind(this);
    this.s = this.s.bind(this);
    this.o = this.o.bind(this);
  }
  j(a) {
    if (a = a.detail) {
      let e = {};
      var b = e;
      if (a && b && "arrElement" in a) {
        b.arrElement = [];
        var c = a.arrElement;
        if (c) {
          let f = null;
          for (f of c) {
            var d = null;
            if ("pen" == f.cb() || "highlighter" == f.cb()) {
              if (c = f, 0 < c.N) {
                d = c;
                let k = d.ib(d.N);
                k && (k.nId = d.ta, k.uuid = d.qe, k.bLastPoints = 1);
                d = k;
                c.N = 0;
              }
            }
            d || (d = f.bh(null));
            b.arrElement.push(d);
          }
        }
      }
      this.Fb(a, e, "arrTextHighlight");
      this.Fb(a, e, "arrTextElement");
      this.Fb(a, e, "arrMediaAttachments");
      this.Fb(a, e, "arrImageAttachments");
      this.Fb(a, e, "arrUploadedVideoAttachments");
      this.Fb(a, e, "arrCommentElement");
      this.Fb(a, e, "arrAssessmentAttachments");
      this.Fb(a, e, "arrScreenshadeAttachments");
      this.Fb(a, e, "timerElement");
      this.Fb(a, e, "arrElementGroup");
      this.$p(e);
      cO(this, {type:"ANNOTATE_ELEMENTS_ADDED", strOwnerGuid:S.zd, docGuid:this.g.ma, data:e});
    }
  }
  Fb(a, b, c) {
    if (a && b && c in a) {
      b[c] = [];
      var d = a[c];
      if (d) {
        a = null;
        for (a of d) {
          d = a.bh(null), b[c].push(d);
        }
      }
    }
  }
  m(a) {
    if (a = a.detail) {
      this.$p(a), cO(this, {type:"ANNOTATE_ELEMENTS_REMOVED", strOwnerGuid:S.zd, docGuid:this.g.ma, data:a,});
    }
  }
  i(a) {
    if (a = a.detail) {
      let c = {};
      eO(a, c, "arrElement");
      eO(a, c, "arrTextHighlight");
      eO(a, c, "arrTextElement");
      eO(a, c, "arrMediaAttachments");
      eO(a, c, "arrImageAttachments");
      eO(a, c, "arrUploadedVideoAttachments");
      eO(a, c, "arrCommentElement");
      eO(a, c, "arrAssessmentAttachments");
      eO(a, c, "arrScreenshadeAttachments");
      var b = c;
      if (a.timerElement) {
        let d = {};
        d.timerElement = a.timerElement.element;
        let e = {};
        this.Fb(d, e, "timerElement");
        b.timerElement = {element:e.timerElement, uAction:a.timerElement.uAction};
      }
      this.$p(c);
      cO(this, {type:"ANNOTATE_ELEMENT_PROPS_UPDATED", strOwnerGuid:S.zd, docGuid:this.g.ma, data:c,});
    }
  }
  s(a) {
    let b = !1;
    a && a.detail && (b = a.detail.bRemovePenHighlighterOnly);
    cO(this, {type:"ANNOTATE_SLIDE_ACTION", strOwnerGuid:S.zd, docGuid:this.g.ma, data:{uActionType:1, bRemovePenHighlighterOnly:b,},});
  }
  l(a) {
    if (a = a.detail) {
      let b = {};
      this.Fb(a, b, "arrElement");
      this.Fb(a, b, "arrTextHighlight");
      this.Fb(a, b, "arrTextElement");
      this.Fb(a, b, "arrMediaAttachments");
      this.Fb(a, b, "arrImageAttachments");
      this.Fb(a, b, "arrUploadedVideoAttachments");
      this.Fb(a, b, "arrCommentElement");
      this.Fb(a, b, "arrAssessmentAttachments");
      this.Fb(a, b, "arrScreenshadeAttachments");
      this.Fb(a, b, "arrElementGroup");
      this.Fb(a, b, "timerElement");
      this.$p(b);
      cO(this, {type:"ANNOTATE_ELEMENT_MODIFIED", strOwnerGuid:S.zd, docGuid:this.g.ma, data:b,});
    }
  }
  o(a) {
    if (a = a.detail) {
      this.$p(a), cO(this, {type:"ANNOTATE_MEDIA_REENCODED", strOwnerGuid:S.zd, docGuid:this.g.ma, data:a,});
    }
  }
  $p(a) {
    let b = Oo(S);
    b && b.$p(a);
  }
}
;function fO(a, b) {
  var c = null;
  if (a) {
    switch(a.type) {
      case "ANNOTATE_GET_DOCUMENT_VERSION_TREE":
        c = a.docGuid;
        b = a.docMode;
        var d = null;
        1 == b ? Un() == c && (d = nv()) : 3 == b ? Tn() == c && (d = pv()) : 2 == b && qt() == c && (d = ov());
        c = {mainType:"ANNOTATE_SEND_DOCUMENT_VERSION_TREE", docGuid:c, strOwnerGuid:a.strOwnerGuid, tree:d};
        break;
      case "ANNOTATE_GET_DOCUMENT_SYNC_DATA":
        a: {
          c = a.docGuid;
          d = a.docMode;
          var e = a.versionTree;
          b = gO();
          if (e) {
            var f = e.pageAnnotations;
            b in f && (f = f[b], e.arrElement = f.arrElement, e.arrTextHighlights = f.arrTextHighlights, e.arrTextElements = f.arrTextElements, e.arrMediaAttachments = f.arrMediaAttachments, e.arrUploadedVideoAttachments = f.arrUploadedVideoAttachments, e.arrImageAttachments = f.arrImageAttachments, e.arrComments = f.arrComments, e.arrAssessmentData = f.arrAssessmentData, e.screenShadeElementData = f.screenShadeElementData, e.elementGroupData = f.elementGroupData, e.timerElementData = A(f.timerElementData) ? 
            [] : f.timerElementData);
          }
          if (d == ql()) {
            if (Un() == c) {
              d = rv(e);
            } else if (Tn() == c) {
              d = tv(e);
            } else if (qt() == c) {
              d = sv(e);
            } else {
              c = null;
              break a;
            }
            d && b && (e = {}, e.arrElement = d.arrElement, e.arrTextHighlights = d.arrTextHighlights, e.arrTextElements = d.arrTextElements, e.arrMediaAttachments = d.arrMediaAttachments, e.arrUploadedVideoAttachments = d.arrUploadedVideoAttachments, e.arrImageAttachments = d.arrImageAttachments, e.arrComments = d.arrComments, e.arrAssessmentData = d.arrAssessmentData, e.screenShadeElementData = d.screenShadeElementData, e.elementGroupData = d.elementGroupData, e.timerElementData = d.timerElementData, 
            (f = d.pageAnnotations) && (f[b] = e), d.arrElement = [], d.arrTextHighlights = [], d.arrTextElements = [], d.arrMediaAttachments = [], d.arrUploadedVideoAttachments = [], d.arrImageAttachments = [], d.arrComments = [], d.arrAssessmentData = [], d.screenShadeElementData = [], d.elementGroupData = [], d.timerElementData = []);
            c = {mainType:"ANNOTATE_SEND_DOCUMENT_SYNC_DATA", docGuid:c, syncData:d, strOwnerGuid:a.strOwnerGuid, senderInfo:a.senderInfo};
          } else {
            c = null;
          }
        }
        break;
      case "ANNOTATE_PARSE_DOCUMENT_SYNC_DATA":
        d = a.docGuid;
        b = a.docMode;
        a = a.syncData;
        window.top != window && null != S.s && a.pageAnnotations && (e = a.pageAnnotations[S.s]) && (a.arrElement = e.arrElement, a.arrTextHighlights = e.arrTextHighlights, a.arrTextElements = e.arrTextElements, a.arrMediaAttachments = e.arrMediaAttachments, a.arrUploadedVideoAttachments = e.arrUploadedVideoAttachments, a.arrImageAttachments = e.arrImageAttachments, a.arrComments = e.arrComments, a.arrAssessmentData = e.arrAssessmentData, a.screenShadeElementData = e.screenShadeElementData, a.timerElementData = 
        e.timerElementData);
        1 == b ? Un() == d && (d = S, d.i && vr(d.i, a), hO(b)) : 3 == b ? Tn() == d && (d = S, d.La && vr(d.La, a), hO(b)) : 2 == b && qt() == d && (uv(a), hO(b));
        break;
      case "ANNOTATE_ELEMENTS_ADDED":
        d = iO(a);
        var k = a.docMode;
        (e = a.data) && b && (b = !1, f = e.slideId, f == gO() && (a = IN(d, a.data, k)) && (a = a.bh()) && (b = !0, lr(d, f, a)), b || HN(d, e));
        break;
      case "ANNOTATE_ELEMENTS_REMOVED":
        (d = CN(!1)) && d.Tn();
        d = iO(a);
        e = a.docMode;
        (f = a.data) && b && (JN(d, f), f.slideId == gO() && KN(d, a.data, e));
        break;
      case "ANNOTATE_ELEMENT_PROPS_UPDATED":
        d = iO(a);
        e = a.docMode;
        (f = a.data) && b && (LN(d, f), f.slideId == gO() && MN(d, a.data, e));
        break;
      case "ANNOTATE_ELEMENT_MODIFIED":
        d = iO(a);
        e = a.docMode;
        (a = a.data) && b && (LN(d, a), a.slideId == gO() && NN(d, a, e));
        break;
      case "ANNOTATE_SLIDE_ACTION":
        d = iO(a);
        (a = a.data) && b && PN(d, a);
        break;
      case "ANNOTATE_ELEMENT_ADDING":
        if (d = a.data) {
          b = d.eleData, d.slideId == gO() && b && ((d = CN(!0)) && EN(d, b), a.bRepaint && L.rA());
        }
        break;
      case "ANNOTATE_LASER_MOVING":
        if (a = a.data) {
          if (b = a.eleData, a.slideId == gO() && b && "arrPts" in b && (a = b.arrPts, b = L.rI())) {
            e = L.yp();
            f = e.width;
            for (d of a) {
              k = f / d.width, d.eX = d.eX * k + e.x, d.eY = d.eY * k + e.y;
            }
            kH(b, a);
          }
        }
        break;
      case "ANNOTATE_MEDIA_REENCODED":
        d = iO(a), e = a.docMode, f = a.data, (k = a.arrMediaReencodeStatus) || (k = f.arrMediaReencodeStatus), k && b && (d.yg(k), f.slideId == gO() && ON(d, a, e));
    }
  }
  return c;
}
function gO() {
  let a = S.s;
  a || (a = Uk());
  return a;
}
function iO(a) {
  if (!a) {
    return null;
  }
  let b = a.docGuid;
  a = a.docMode;
  let c = null;
  1 == a && Un() == b ? c = S.i : 3 == a && Tn() == b ? c = S.La : 2 == a && qt() == b && (c = S.Ya);
  return c;
}
function jO(a) {
  var b = kO;
  let c = S.Ya;
  if (c && b) {
    switch(a.type) {
      case "ANNOTATE_ELEMENTS_ADDED":
        IN(c, a.data, 2);
        break;
      case "ANNOTATE_ELEMENTS_REMOVED":
        KN(c, a.data, 2);
        break;
      case "ANNOTATE_ELEMENT_PROPS_UPDATED":
        MN(c, a.data, 2);
        break;
      case "ANNOTATE_ELEMENT_MODIFIED":
        NN(c, a.data, 2);
        break;
      case "ANNOTATE_MEDIA_REENCODED":
        ON(c, a.data, 2);
    }
  }
}
function lO(a) {
  var b = kO;
  let c = S.Ya;
  if (c && b) {
    switch(a.type) {
      case "ANNOTATE_ELEMENTS_ADDED":
        HN(c, a.data);
        break;
      case "ANNOTATE_ELEMENTS_REMOVED":
        JN(c, a.data);
        break;
      case "ANNOTATE_ELEMENT_PROPS_UPDATED":
        LN(c, a.data);
        break;
      case "ANNOTATE_ELEMENT_MODIFIED":
        LN(c, a.data);
        break;
      case "ANNOTATE_SLIDE_ACTION":
        PN(c, a.data);
    }
  }
}
;function HN(a, b) {
  if (a) {
    if ("arrElement" in b) {
      var c = b.slideId;
      if (c) {
        var d = b.arrElement;
        if (d) {
          for (var e of d) {
            lr(a, c, e);
          }
        }
      }
    }
    if ("arrTextHighlight" in b && (c = b.slideId) && (d = b.arrTextHighlight)) {
      for (var f of d) {
        d = f, c && ((e = a.Pa[c]) || (e = kr(a, c)), e && "arrTextHighlights" in e && (e = e.arrTextHighlights) && e.push(d));
      }
    }
    if ("arrTextElement" in b && (f = b.slideId) && (c = b.arrTextElement)) {
      for (var k of c) {
        c = k, f && ((d = a.Pa[f]) || (d = kr(a, f)), d && "arrTextElements" in d && (d = d.arrTextElements) && d.push(c));
      }
    }
    if ("arrMediaAttachments" in b && (k = b.slideId) && (f = b.arrMediaAttachments)) {
      for (var l of f) {
        f = l, k && ((c = a.Pa[k]) || (c = kr(a, k)), c && "arrMediaAttachments" in c && (c = c.arrMediaAttachments) && c.push(f));
      }
    }
    if ("arrImageAttachments" in b && (l = b.slideId) && (k = b.arrImageAttachments)) {
      for (var n of k) {
        k = n, l && ((f = a.Pa[l]) || (f = kr(a, l)), f && "arrImageAttachments" in f && (f = f.arrImageAttachments) && f.push(k));
      }
    }
    if ("arrUploadedVideoAttachments" in b && (n = b.slideId) && (l = b.arrUploadedVideoAttachments)) {
      for (var p of l) {
        l = p, n && ((k = a.Pa[n]) || (k = kr(a, n)), k && "arrUploadedVideoAttachments" in k && (k = k.arrUploadedVideoAttachments) && k.push(l));
      }
    }
    if ("arrAssessmentAttachments" in b && (p = b.arrAssessmentAttachments)) {
      for (var t of p) {
        Gr(t);
      }
    }
    if ("arrScreenshadeAttachments" in b && (t = b.slideId) && (p = b.arrScreenshadeAttachments)) {
      for (var x of p) {
        p = x, t && ((n = a.Pa[t]) || (n = kr(a, t)), n && "screenShadeElementData" in n && (n.screenShadeElementData || (n.screenShadeElementData = []), (n = n.screenShadeElementData) && n.push(p)));
      }
    }
    if ("arrElementGroup" in b && (x = b.slideId) && (t = b.arrElementGroup)) {
      for (var D of t) {
        if (t = a, l = x, p = D, console.log("###### addSlidePageElementGroupData called ", l, p), l && ((n = t.Pa[l]) || (n = kr(t, l)), n)) {
          n.elementGroupData || (n.elementGroupData = []);
          if (l = n.elementGroupData) {
            for (l.push(p), n = n.arrAnnotations, l = 0; l < p.arrElementId.length; l++) {
              for (k = 0; k < n.length; k++) {
                if (p.arrElementId[l] === n[k].nId) {
                  n[k].groupId = p.nId;
                  break;
                }
              }
            }
          }
          console.log("###### pageannotations ", t.Pa);
        }
      }
    }
    if ("timerElement" in b && (D = b.slideId) && (x = b.timerElement)) {
      for (let G of x) {
        x = a, t = G, D && ((p = x.Pa[D]) || (p = kr(x, D)), p && (p.timerElementData = t, console.log(">> pageannotations ", x.Pa)));
      }
    }
    dq(a, b.docVersionNo);
    nh(a, b.docUUID);
    a.dh = b.nMaxElementId;
  }
}
function IN(a, b, c) {
  var d = null;
  if (a) {
    let X = [];
    if ("arrElement" in b) {
      X.push("arrElement");
      var e = b.arrElement;
      if (e) {
        for (var f of e) {
          if ("bLastPoints" in f && 1 == f.bLastPoints) {
            d = a;
            e = null;
            if (f) {
              a: {
                var k = f;
                e = Ao;
                if (!e.v || "pen" != e.v.cb() && "highlighter" != e.v.cb()) {
                  e = null;
                  break a;
                }
                let Fa = e.v;
                Tm(Fa, k);
                if (k.arrDrawingPts) {
                  k = k.arrDrawingPts;
                  for (let La = 0; La < k.length; La += 2) {
                    qz(Fa, k[La], k[La + 1]);
                  }
                }
                e.v = null;
                e = Fa;
              }
              e && d.F.push(e);
            }
            d = e;
          } else {
            wr(a, f);
          }
        }
      }
    }
    if ("arrTextHighlight" in b && (X.push("arrTextHighlight"), f = b.arrTextHighlight)) {
      for (var l of f) {
        xr(a, l);
      }
    }
    if ("arrTextElement" in b && (X.push("arrTextElement"), l = b.arrTextElement)) {
      for (var n of l) {
        zr(a, n);
      }
    }
    if ("arrMediaAttachments" in b && (X.push("arrMediaAttachments"), n = b.arrMediaAttachments)) {
      for (var p of n) {
        Ar(a, p);
      }
    }
    if ("arrImageAttachments" in b && (X.push("arrImageAttachments"), p = b.arrImageAttachments)) {
      for (var t of p) {
        Cr(a, t);
      }
    }
    if ("arrUploadedVideoAttachments" in b && (X.push("arrUploadedVideoAttachments"), t = b.arrUploadedVideoAttachments)) {
      for (var x of t) {
        Er(a, x);
      }
    }
    if ("arrCommentElement" in b && (X.push("arrCommentElement"), x = b.arrCommentElement)) {
      for (var D of x) {
        Kr(a, D);
      }
    }
    if ("arrAssessmentAttachments" in b && (X.push("arrAssessmentAttachments"), D = b.arrAssessmentAttachments)) {
      for (var G of D) {
        Gr(G);
      }
    }
    if ("arrScreenshadeAttachments" in b && (X.push("arrScreenshadeAttachments"), G = b.arrScreenshadeAttachments)) {
      for (var I of G) {
        Hr(I);
      }
    }
    if ("arrElementGroup" in b && (X.push("arrElementGroup"), I = b.arrElementGroup)) {
      for (var Q of I) {
        Jr(Q);
      }
    }
    if ("timerElement" in b && (Q = b.timerElement)) {
      for (let Fa of Q) {
        Mr(Fa, !1);
      }
    }
    dq(a, b.docVersionNo);
    nh(a, b.docUUID);
    a.dh = b.nMaxElementId;
    GN(Ao, c, X, !1);
  }
  return d;
}
function JN(a, b) {
  if (a) {
    if ("arrElement" in b) {
      var c = b.slideId;
      if (c) {
        var d = b.arrElement;
        if (d) {
          for (var e of d) {
            if (d = mr(a, c, e), 0 <= d) {
              var f = a.Pa[c];
              f && "arrAnnotations" in f && (f = f.arrAnnotations) && f.splice(d, 1);
            }
          }
        }
      }
    }
    if ("arrTextHighlight" in b && (c = b.slideId) && (e = b.arrTextHighlight)) {
      for (var k of e) {
        e = or(a, c, k), 0 <= e && (d = a.Pa[c]) && "arrTextHighlights" in d && (d = d.arrTextHighlights) && d.splice(e, 1);
      }
    }
    if ("arrTextElement" in b && (k = b.slideId) && (c = b.arrTextElement)) {
      for (var l of c) {
        c = nr(a, k, l), 0 <= c && (e = a.Pa[k]) && "arrTextElements" in e && (e = e.arrTextElements) && e.splice(c, 1);
      }
    }
    if ("arrMediaAttachments" in b && (l = b.slideId) && (k = b.arrMediaAttachments)) {
      for (var n of k) {
        k = pr(a, l, n), 0 <= k && (c = a.Pa[l]) && "arrMediaAttachments" in c && (c = c.arrMediaAttachments) && c.splice(k, 1);
      }
    }
    if ("arrImageAttachments" in b && (n = b.slideId) && (l = b.arrImageAttachments)) {
      for (var p of l) {
        l = qr(a, n, p), 0 <= l && (k = a.Pa[n]) && "arrImageAttachments" in k && (k = k.arrImageAttachments) && k.splice(l, 1);
      }
    }
    if ("arrUploadedVideoAttachments" in b && (p = b.slideId) && (n = b.arrUploadedVideoAttachments)) {
      for (var t of n) {
        n = rr(a, p, t), 0 <= n && (l = a.Pa[p]) && "arrUploadedVideoAttachments" in l && (l = l.arrUploadedVideoAttachments) && l.splice(n, 1);
      }
    }
    if ("arrScreenshadeAttachments" in b && (t = b.slideId) && (p = b.arrScreenshadeAttachments)) {
      for (var x of p) {
        a: {
          if (t && t in a.Pa && (p = a.Pa[t]) && "screenShadeElementData" in p && (p = p.screenShadeElementData)) {
            for (n = 0; n < p.length; n++) {
              if (p[n].nId == x) {
                p = n;
                break a;
              }
            }
          }
          p = -1;
        }
        0 <= p && (n = a.Pa[t]) && "screenShadeElementData" in n && (n = n.screenShadeElementData) && n.splice(p, 1);
      }
    }
    if ("arrElementGroup" in b && (x = b.slideId) && (t = b.arrElementGroup)) {
      for (var D of t) {
        ir(a, x, D);
      }
    }
    if ("arrAssessmentAttachments" in b && (D = b.arrAssessmentAttachments)) {
      for (var G of D) {
        rs(a, G);
      }
    }
    "timerElement" in b && (G = b.slideId) && G && (a.Pa[G].timerElementData = {});
    dq(a, b.docVersionNo);
    nh(a, b.docUUID);
    a.dh = b.nMaxElementId;
  }
}
function KN(a, b, c) {
  if (a) {
    let I = [];
    if ("arrElement" in b) {
      I.push("arrElement");
      var d = b.arrElement;
      if (d) {
        for (var e of d) {
          d = a;
          var f = Oq(d, e);
          0 <= f && d.F.splice(f, 1);
        }
      }
    }
    if ("arrTextHighlight" in b && (I.push("arrTextHighlight"), e = b.arrTextHighlight)) {
      for (var k of e) {
        e = a, d = Kq(e, k), 0 <= d && (f = e.ye[d], Ro.Nr(f.Qe, f, e.qd), e.ye.splice(d, 1));
      }
    }
    if ("arrTextElement" in b && (I.push("arrTextElement"), k = b.arrTextElement)) {
      for (var l of k) {
        k = a, e = Mq(k, l), 0 <= e && (yr(k.Fd[e]), k.Fd.splice(e, 1));
      }
    }
    if ("arrMediaAttachments" in b && (I.push("arrMediaAttachments"), l = b.arrMediaAttachments)) {
      for (var n of l) {
        l = a, k = Uq(l, n), 0 <= k && (e = l.Ed[k], l.Ed.splice(k, 1), Br(L.Pb(), e, l.je()));
      }
    }
    if ("arrImageAttachments" in b && (I.push("arrImageAttachments"), n = b.arrImageAttachments)) {
      for (var p of n) {
        n = a, l = Qq(n, p), 0 <= l && (k = n.Ld[l], n.Ld.splice(l, 1), Dr(L.Pb(), k, n.je()));
      }
    }
    if ("arrUploadedVideoAttachments" in b && (I.push("arrUploadedVideoAttachments"), p = b.arrUploadedVideoAttachments)) {
      for (var t of p) {
        p = a, n = Sq(p, t), 0 <= n && (l = p.Gd[n], p.Gd.splice(n, 1), Fr(L.Pb(), l, p.je()));
      }
    }
    if ("arrCommentElement" in b && (I.push("arrCommentElement"), t = b.arrCommentElement)) {
      for (var x of t) {
        (t = L.Zf()) && t.Gx(x, c);
      }
    }
    if ("arrScreenshadeAttachments" in b && (I.push("arrScreenshadeAttachments"), (x = b.arrScreenshadeAttachments) && x)) {
      for (var D of x) {
        x = a, t = cr(x, D), 0 <= t && (p = x.g[t], x.g.splice(t, 1), p && p.gb());
      }
    }
    if ("arrElementGroup" in b && (I.push("arrElementGroup"), (D = b.arrElementGroup) && D)) {
      for (var G of D) {
        0 <= G && G < a.g.length && a.Oe.splice(G, 1);
      }
    }
    if ("arrAssessmentAttachments" in b && (I.push("arrAssessmentAttachments"), G = b.arrAssessmentAttachments)) {
      for (let Q of G) {
        rs(a, Q);
      }
    }
    "timerElement" in b && Nr();
    dq(a, b.docVersionNo);
    nh(a, b.docUUID);
    a.dh = b.nMaxElementId;
    GN(Ao, c, I, !1);
  }
}
function MN(a, b, c) {
  if (a) {
    let G = [];
    if ("arrElement" in b) {
      var d = b.arrElement;
      if (d) {
        G.push("arrElement");
        for (var e of d) {
          (d = Pq(a, e.nId)) && d.Ad(e);
        }
      }
    }
    if ("arrTextHighlight" in b && (G.push("arrTextHighlight"), e = b.arrTextHighlight)) {
      for (var f of e) {
        if (e = Lq(a, f.nId)) {
          e.Ad(f), Ro.vI(e, c);
        }
      }
    }
    if ("arrTextElement" in b && (G.push("arrTextElement"), f = b.arrTextElement)) {
      for (var k of f) {
        if (d = Nq(a, k.nId)) {
          f = d, e = k, f && (Es(f) ? Jo.Av(f, e) : Fs(f) && Ko.Av(f, e)), d.m = !0;
        }
      }
    }
    if ("arrMediaAttachments" in b && (G.push("arrMediaAttachments"), k = b.arrMediaAttachments)) {
      for (var l of k) {
        (k = Vq(a, l.nId)) && k.Ad(l);
      }
    }
    if ("arrImageAttachments" in b && (G.push("arrImageAttachments"), l = b.arrImageAttachments)) {
      for (var n of l) {
        (l = Rq(a, n.nId)) && l.Ad(n);
      }
    }
    if ("arrUploadedVideoAttachments" in b && (G.push("arrUploadedVideoAttachments"), n = b.arrUploadedVideoAttachments)) {
      for (var p of n) {
        (n = Tq(a, p.nId)) && n.Ad(p);
      }
    }
    if ("arrCommentElement" in b && (G.push("arrCommentElement"), p = b.arrCommentElement)) {
      for (var t of p) {
        t && (p = L.Zf()) && p.Lm(t, c);
      }
    }
    if ("arrAssessmentAttachments" in b && (G.push("arrAssessmentAttachments"), t = b.arrAssessmentAttachments)) {
      for (var x of t) {
        (t = $q(a, x.nId)) && t.Ad(x);
      }
    }
    if ("arrScreenshadeAttachments" in b && (G.push("arrScreenshadeAttachments"), x = b.arrScreenshadeAttachments)) {
      for (var D of x) {
        (x = dr(a, D.nId)) && x.Ad(D);
      }
    }
    "timerElement" in b && (D = b.timerElement, Xo && D && (x = Xo, x.g && (t = D.element[0], x.g.Fa(D.element), D.uAction == wC.BE ? x.ea(null) : D.uAction == wC.EE ? x.Wb(null) : D.uAction == wC.GE && x.ed({detail:t.timerData}))));
    dq(a, b.docVersionNo);
    nh(a, b.docUUID);
    a.dh = b.nMaxElementId;
    GN(Ao, c, G, !1);
  }
}
function LN(a, b) {
  if (a) {
    if ("arrElement" in b) {
      var c = b.slideId;
      if (c) {
        var d = b.arrElement;
        if (d) {
          for (var e of d) {
            if (d = mr(a, c, e.nId), 0 <= d && c && c in a.Pa) {
              var f = a.Pa[c];
              f && "arrAnnotations" in f && (f = f.arrAnnotations) && 0 <= d && d < f.length && (f[d] = e);
            }
          }
        }
      }
    }
    if ("arrTextHighlight" in b && (c = b.slideId) && (e = b.arrTextHighlight)) {
      for (var k of e) {
        e = or(a, c, k.nId), 0 <= e && c && c in a.Pa && (d = a.Pa[c]) && "arrTextHighlights" in d && (d = d.arrTextHighlights) && 0 <= e && e < d.length && (d[e] = k);
      }
    }
    if ("arrTextElement" in b && (k = b.slideId) && (c = b.arrTextElement)) {
      for (var l of c) {
        c = nr(a, k, l.nId), 0 <= c && k && k in a.Pa && (e = a.Pa[k]) && "arrTextElements" in e && (e = e.arrTextElements) && 0 <= c && c < e.length && (e[c] = l);
      }
    }
    if ("arrMediaAttachments" in b && (l = b.slideId) && (k = b.arrMediaAttachments)) {
      for (var n of k) {
        k = pr(a, l, n.nId), 0 <= k && l && l in a.Pa && (c = a.Pa[l]) && "arrMediaAttachments" in c && (c = c.arrMediaAttachments) && 0 <= k && k < c.length && (c[k] = n);
      }
    }
    if ("arrImageAttachments" in b && (n = b.slideId) && (l = b.arrImageAttachments)) {
      for (var p of l) {
        l = qr(a, n, p.nId), 0 <= l && n && n in a.Pa && (k = a.Pa[n]) && "arrImageAttachments" in k && (k = k.arrImageAttachments) && 0 <= l && l < k.length && (k[l] = p);
      }
    }
    if ("arrUploadedVideoAttachments" in b && (p = b.slideId) && (n = b.arrUploadedVideoAttachments)) {
      for (var t of n) {
        n = rr(a, p, t.nId), 0 <= n && p && p in a.Pa && (l = a.Pa[p]) && "arrUploadedVideoAttachments" in l && (l = l.arrUploadedVideoAttachments) && 0 <= n && n < l.length && (l[n] = t);
      }
    }
    if ("arrScreenshadeAttachments" in b && (t = b.slideId) && (p = b.arrScreenshadeAttachments)) {
      for (var x of p) {
        p = Bs(a, t), 0 <= p && t && t in a.Pa && (n = a.Pa[t]) && "screenShadeElementData" in n && (n = n.screenShadeElementData) && 0 <= p && p < n.length && (n[p] = x);
      }
    }
    if ("arrElementGroup" in b && (x = b.slideId) && (t = b.arrElementGroup)) {
      for (var D of t) {
        t = jr(a, x, D.nId), 0 <= t && x && x in a.Pa && (p = a.Pa[x]) && "elementGroupData" in p && (p = p.elementGroupData) && 0 <= t && t < p.length && (p[t] = D);
      }
    }
    if ("timerElement" in b && (D = b.slideId) && (t = x = b.timerElement, "element" in x && (t = x.element), t)) {
      for (let G of t) {
        Bs(a, D) && D && D in a.Pa && (x = a.Pa[D]) && "timerElementData" in x && (x.timerElementData = G);
      }
    }
    dq(a, b.docVersionNo);
    nh(a, b.docUUID);
    a.dh = b.nMaxElementId;
  }
}
function NN(a, b, c) {
  if (a) {
    let I = [];
    if ("arrElement" in b) {
      I.push("arrElement");
      var d = b.arrElement;
      if (d) {
        for (var e of d) {
          if (d = Pq(a, e.nId)) {
            d.Fa(e), wp(d);
          }
        }
      }
    }
    if ("arrTextHighlight" in b && (I.push("arrTextHighlight"), e = b.arrTextHighlight)) {
      for (var f of e) {
        (e = Lq(a, f.nId)) && e.Fa(f);
      }
    }
    if ("arrTextElement" in b && (I.push("arrTextElement"), f = b.arrTextElement)) {
      for (var k of f) {
        if (d = Nq(a, k.nId)) {
          f = d, e = k, f && (Es(f) ? Jo.Av(f, e) : Fs(f) && Ko.Av(f, e)), d.m = !0;
        }
      }
    }
    if ("arrMediaAttachments" in b && (I.push("arrMediaAttachments"), k = b.arrMediaAttachments)) {
      for (var l of k) {
        (k = Vq(a, l.nId)) && k.Ad(l);
      }
    }
    if ("arrImageAttachments" in b && (I.push("arrImageAttachments"), l = b.arrImageAttachments)) {
      for (var n of l) {
        (l = Rq(a, n.nId)) && l.Ad(n);
      }
    }
    if ("arrUploadedVideoAttachments" in b && (I.push("arrUploadedVideoAttachments"), n = b.arrUploadedVideoAttachments)) {
      for (var p of n) {
        (n = Tq(a, p.nId)) && n.Ad(p);
      }
    }
    if ("arrCommentElement" in b && (I.push("arrCommentElement"), p = b.arrCommentElement)) {
      for (var t of p) {
        t && (p = L.Zf()) && p.Lm(t, c);
      }
    }
    if ("arrAssessmentAttachments" in b && (I.push("arrAssessmentAttachments"), t = b.arrAssessmentAttachments)) {
      for (var x of t) {
        (t = $q(a, x.nId)) && t.Ad(x);
      }
    }
    if ("arrScreenshadeAttachments" in b && (I.push("arrScreenshadeAttachments"), x = b.arrScreenshadeAttachments)) {
      for (var D of x) {
        (x = dr(a, D.nId)) && x.Ad(D);
      }
    }
    if ("arrElementGroup" in b && (I.push("arrElementGroup"), D = b.arrElementGroup)) {
      for (var G of D) {
        (D = Ir(a, G.nId)) && D.Ad(G);
      }
    }
    "timerElement" in b && (I.push("timerElement"), G = b.timerElement[0], Xo && G && Xo.g.Fa(G));
    dq(a, b.docVersionNo);
    nh(a, b.docUUID);
    a.dh = b.nMaxElementId;
    GN(Ao, c, I, !1);
  }
}
function ON(a, b, c) {
  a && "arrMediaReencodeStatus" in b && a.yg(b.arrMediaReencodeStatus);
  dq(a, b.docVersionNo);
  nh(a, b.docUUID);
  a.dh = b.nMaxElementId;
  GN(Ao, c, ["arrMediaAttachments"], !1);
}
function PN(a, b) {
  if (a) {
    let c = 0;
    "uActionType" in b && (c = parseInt(b.uActionType));
    switch(c) {
      case 1:
        b.bRemovePenHighlighterOnly ? Np(a) : hr(a, !1), zH && 1 == a.je() && (a = a.Pa, b = zH, b.fw && a && (b.fw = a));
    }
  }
}
class mO {
}
var kO = new mO();
function nO(a, b) {
  if (Pl()) {
    a = a.l;
    let d = b.docGuid;
    var c = a.tc[b.strOwnerGuid];
    c && (3 == ql() && a.v && a.v.ve == c.ve && jO(b), (c = c.Il) && c.ma == d && zI(a, c, b));
  } else {
    gI(a.l, {type:"ANNOTATE_NOTES_DOCUMENT_UPDATED_TO_NOTES_VIEW", msgData:b});
  }
}
class oO extends FN {
  constructor(a, b) {
    super(b);
    this.l = a;
  }
  o(a, b, c) {
    if (this.l) {
      EI(this.l, {type:"ANNOTATE_GET_DOCUMENT_VERSION_TREE", docGuid:a, strOwnerGuid:c, docMode:2});
    } else if (Tn() == a) {
      if (this.g == BN && this.j.dm) {
        xN(this, {type:"ANNOTATE_GET_DOCUMENT_VERSION_TREE", docGuid:a, strOwnerGuid:b, docMode:3});
      } else {
        return (b = pv()) && Zs() == a && ((a = this.m.g()) && (b.pdfTree = WJ(a)), this.g == BN && (b.bSendAnimationSyncData = !0)), b;
      }
    } else if (qt() == a && Ys(S) == a) {
      if (this.g == BN && this.j.dm) {
        xN(this, {type:"ANNOTATE_GET_DOCUMENT_VERSION_TREE", docGuid:a, strOwnerGuid:b, docMode:2});
      } else {
        return ov();
      }
    }
    return null;
  }
  v(a, b, c, d, e) {
    if (this.l) {
      EI(this.l, {type:"ANNOTATE_GET_DOCUMENT_SYNC_DATA", docGuid:a, strOwnerGuid:e, senderInfo:c, versionTree:d,});
    } else if (qt() == a) {
      if (this.g == BN && this.j.dm) {
        xN(this, {type:"ANNOTATE_GET_DOCUMENT_SYNC_DATA", docGuid:a, versionTree:d, senderInfo:c, strOwnerGuid:b, docMode:2});
      } else {
        return sv(d);
      }
    }
  }
  u(a, b, c, d) {
    this.l ? EI(this.l, {type:"ANNOTATE_PARSE_DOCUMENT_SYNC_DATA", docGuid:a, strOwnerGuid:d, syncData:c,}) : Tn() == a ? (this.g == BN && this.j.dm && xN(this, {type:"ANNOTATE_PARSE_DOCUMENT_SYNC_DATA", docGuid:a, strOwnerGuid:b, syncData:c, docMode:3}), b = S, b.La && vr(b.La, c), "docSyncData" in c && (c = c.docSyncData) && "curPage" in c && (b = c.curPage, this.g == BN && this.j ? SH(this.j, b, c.curAnimation, c.direction, c.prevPage) : this.g == zN && ((b = c.pagesData) && (d = this.m.g()) && 
    ZJ(d, b), yN(this, a, c.posData))), this.g == zN && GN(Ao, 3, [], !0)) : qt() == a && Ys(S) == a && (this.g == BN && this.j.dm && xN(this, {type:"ANNOTATE_PARSE_DOCUMENT_SYNC_DATA", docGuid:a, strOwnerGuid:b, syncData:c, docMode:2}), uv(c), this.g == zN && GN(Ao, 2, [], !0));
  }
  B(a, b, c) {
    this.l ? nO(this, {type:"ANNOTATE_ELEMENTS_ADDED", docGuid:a, strOwnerGuid:b, data:c, docMode:2}) : Tn() == a ? (b = S.La, this.g == BN ? (HN(b, c), xN(this, {type:"ANNOTATE_ELEMENTS_ADDED", docGuid:a, data:c, docMode:3})) : this.g == zN && IN(b, c, 3)) : qt() == a && Ys(S) == a && (b = S.Ya, this.g == BN ? (HN(b, c), xN(this, {type:"ANNOTATE_ELEMENTS_ADDED", docGuid:a, data:c, docMode:2})) : this.g == zN && IN(b, c, 2));
  }
  G(a, b, c) {
    this.l ? nO(this, {type:"ANNOTATE_ELEMENTS_REMOVED", docGuid:a, strOwnerGuid:b, data:c, docMode:2}) : Tn() == a ? (b = S.La, this.g == BN ? (JN(b, c), xN(this, {type:"ANNOTATE_ELEMENTS_REMOVED", docGuid:a, data:c, docMode:3})) : this.g == zN && KN(b, c, 3)) : qt() == a && Ys(S) == a && (b = S.Ya, this.g == BN ? (JN(b, c), xN(this, {type:"ANNOTATE_ELEMENTS_REMOVED", docGuid:a, data:c, docMode:2})) : this.g == zN && KN(b, c, 2));
  }
  C(a, b, c) {
    this.l ? nO(this, {type:"ANNOTATE_ELEMENT_PROPS_UPDATED", docGuid:a, strOwnerGuid:b, data:c, docMode:2}) : Tn() == a ? (b = S.La, this.g == BN ? (LN(b, c), xN(this, {type:"ANNOTATE_ELEMENT_PROPS_UPDATED", docGuid:a, data:c, docMode:3})) : this.g == zN && MN(b, c, 3)) : qt() == a && Ys(S) == a && (b = S.Ya, this.g == BN ? (LN(b, c), xN(this, {type:"ANNOTATE_ELEMENT_PROPS_UPDATED", docGuid:a, data:c, docMode:2})) : this.g == zN && MN(b, c, 2));
  }
  N(a, b, c) {
    this.l ? nO(this, {type:"ANNOTATE_ELEMENT_MODIFIED", docGuid:a, strOwnerGuid:b, data:c, docMode:2}) : Tn() == a ? (b = S.La, this.g == BN ? (LN(b, c), xN(this, {type:"ANNOTATE_ELEMENT_MODIFIED", docGuid:a, data:c, docMode:3})) : this.g == zN && NN(b, c, 3)) : qt() == a && Ys(S) == a && (b = S.Ya, this.g == BN ? (LN(b, c), xN(this, {type:"ANNOTATE_ELEMENT_MODIFIED", docGuid:a, data:c, docMode:2})) : this.g == zN && NN(b, c, 2));
  }
  J(a, b, c) {
    this.l ? nO(this, {type:"ANNOTATE_MEDIA_REENCODED", docGuid:a, strOwnerGuid:b, data:c, docMode:2}) : Tn() == a ? (b = S.La, this.g == BN ? (ON(b, c, 3), xN(this, {type:"ANNOTATE_MEDIA_REENCODED", docGuid:a, arrMediaReencodeStatus:c.arrMediaReencodeStatus, docMode:3})) : this.g == zN && ON(b, c, 3)) : qt() == a && Ys(S) == a && (b = S.Ya, this.g == BN ? (ON(b, c, 2), xN(this, {type:"ANNOTATE_MEDIA_REENCODED", docGuid:a, arrMediaReencodeStatus:c.arrMediaReencodeStatus, docMode:2})) : this.g == 
    zN && ON(b, c, 2));
  }
  M(a, b, c) {
    this.l ? nO(this, {type:"ANNOTATE_SLIDE_ACTION", docGuid:a, strOwnerGuid:b, data:c, docMode:2}) : this.g == BN && (b = S, b = b.i && b.i.ma == a ? b.i : !b.Ya || b.Ya.ma != a && Ys(b) != a ? b.La && b.La.ma == a ? b.La : null : b.Ya, null != b && (PN(b, c), xN(this, {type:"ANNOTATE_MEDIA_REENCODED", docGuid:a, data:c, docMode:b.je()})));
  }
}
;class GM extends vN {
  constructor(a) {
    super(a);
    this.j = null;
  }
  u(a, b, c) {
    this.j = a;
    this.zd = c.Fs.zd;
    super.u(a, b, c);
  }
  g() {
    return this.j;
  }
  l() {
    return this.i ? this.i.Fs.zd : null;
  }
}
;function PI(a, b) {
  let c = a.j[b];
  c && c.ge() && wM(c);
  QN(a, c);
  delete a.j[b];
}
class XN extends TN {
  constructor(a) {
    super(a);
    this.j = {};
  }
  u() {
    for (let a in this.j) {
      QN(this, this.j[a]);
    }
    this.j = {};
    this.dispatchEvent(new CustomEvent(XN.j));
  }
  B(a) {
    let b = a.docGuid, c = a.SharedNotesFeedbackData, d = new $m(1);
    d.re({strUserGuid:Bh(), userType:M.j, bPublisher:a.bPublisher, strOwnerGuid:a.strOwnerGuid, extraInfo:{SharedNotesFeedbackData:c ? c : {}}});
    d.Hx = b;
    b in this.j ? (console.log("Virtual channel exists", b), a = this.j[b], a.ge() || EM(a, b, 1, d)) : (a = FM(this.l, b, 1, d), RN(this, a), this.j[b] = a);
  }
  m(a) {
    this.dispatchEvent(new CustomEvent(XN.g, {detail:a.detail}));
  }
  s(a) {
    if (a = a.detail) {
      QN(this, a), delete this.j[a.g()];
    }
    this.dispatchEvent(new CustomEvent(XN.i, {detail:a}));
  }
  o(a) {
    console.log("Document virtual connection failed");
    (a = a.detail) && BM(a);
  }
  g(a) {
    return this.j[a];
  }
}
;function MI(a) {
  pO(a);
  a = a.g;
  for (let b in a.j) {
    PI(a, b);
  }
  a.j = {};
}
function FI(a, b, c, d) {
  d && (a = a.g.g(b)) && lN(a, b, c, d);
}
function uI(a, b) {
  if (b) {
    for (let c of b) {
      a.l.push(c);
    }
  }
  a.s() && qO(a);
}
function GI(a, b, c, d, e) {
  d && (a = a.g.g(b)) && kN(a, b, c, d, e);
}
function pO(a) {
  a.m || (clearInterval(a.m), a.m = null);
}
function NI(a) {
  var b = a.i;
  if (b.l) {
    EI(b.l, {type:"ANNOTATE_GET_LIVE_DOCUMENTS",}), b = null;
  } else {
    b = rl();
    let d = [];
    var c = S.Ya;
    c && d.push({docGuid:c.ma, strOwnerGuid:S.zd, bPublisher:b && b.strSharedNotesDocGUID == c.ma && b.strSharedStudentGUID == S.zd ? !1 : !0, SharedNotesFeedbackData:b});
    (c = S.La) && d.push({docGuid:c.ma, strOwnerGuid:S.zd, bPublisher:!1, SharedNotesFeedbackData:b});
    b = d;
  }
  b && uI(a, b);
}
function qO(a) {
  pO(a);
  a.m = setInterval(() => {
    if (0 >= a.l.length) {
      pO(a);
    } else {
      var b = a.l.shift();
      a.g.B(b);
    }
  }, 100);
}
class VI extends WN {
  constructor(a, b, c) {
    super(c);
    this.i = new oO(a, b);
    this.l = [];
    this.m = null;
    this.j = !1;
  }
  ib(a) {
    this.g = new XN(a);
  }
  u() {
    console.log("Student notes : Packet controller connected!");
    pO(this);
    this.l = [];
    (3 == M.j || (Kh() || M.g) && rl() || this.j) && NI(this);
  }
  B() {
    console.log("Student notes : Packet controller disconnected!");
    pO(this);
    this.l = [];
  }
  C(a) {
    if (a = a.detail) {
      let b = a.g(), c = a.l();
      if (jN(a)) {
        OI(a, b, c), wN(this.i, a);
      } else {
        let d = this.i.o(b, c, c);
        d && lN(a, b, c, d);
      }
    }
  }
  o(a) {
    let b = super.o(a);
    return b ? !0 : a.detail ? b : !1;
  }
  pa(a, b) {
    let c = a.docGuid, d = a.strOwnerGuid;
    var e = a.versionTree;
    (a = this.g.g(c)) && (e = this.i.v(c, d, b, e, a.l())) && kN(a, c, d, e, b);
  }
  ya(a) {
    let b = a.docGuid, c = a.strOwnerGuid;
    a = a.data;
    let d = this.g.g(b);
    d && (d.J = !0, this.i.u(b, c, a, d.l()));
  }
  ia(a) {
    let b = a.docGuid;
    a = a.strOwnerGuid;
    let c = this.g.g(b);
    if (c && !jN(c)) {
      let d = this.i.o(b, a, c.l());
      d && lN(c, b, a, d);
    }
  }
  Gt(a) {
    if (a) {
      switch(a.type) {
        case "ANNOTATE_ELEMENTS_ADDED":
          if (a) {
            var b = this.g.g(a.docGuid);
            b && b.ge() && mN(b, a.data);
          }
          break;
        case "ANNOTATE_ELEMENTS_REMOVED":
          a && (b = this.g.g(a.docGuid)) && b.ge() && nN(b, a.data);
          break;
        case "ANNOTATE_ELEMENT_PROPS_UPDATED":
          a && (b = this.g.g(a.docGuid)) && b.ge() && oN(b, a.data);
          break;
        case "ANNOTATE_ELEMENT_MODIFIED":
          a && (b = this.g.g(a.docGuid)) && b.ge() && pN(b, a.data);
          break;
        case "ANNOTATE_PDF_VIEW_UPDATED":
          a && (a = a.data, (b = this.g.g(a.docGuid)) && b.ge() && sN(b, a));
          break;
        case "ANNOTATE_SLIDES_VIEW_UPDATED":
          a && (a = a.data, (b = this.g.g(a.docGuid)) && b.ge() && rN(b, a));
          break;
        case "ANNOTATE_MEDIA_REENCODED":
          a && (b = this.g.g(a.docGuid)) && b.ge() && qN(b, a.data);
      }
    }
  }
  U() {
    MI(this);
  }
}
;function rO(a) {
  a.i.Im(a.g.oe.Tl);
  Hj(a.i);
  a.g.oe.Hy ? pj(a.i, "AnnotatePluginUserNameProfilePic") : R(a.i, "AnnotatePluginUserNameProfilePic");
  Ej(a.i, a.g.oe.VH);
  if (a.g.oe.Hy && a.g.oe.$i) {
    var b = 32 / a.g.oe.$i.w;
    a.i.el.style.backgroundPosition = `${-(a.g.oe.$i.x * b)}px ${-(a.g.oe.$i.y * b)}px`;
    let c = new Image();
    c.onload = () => {
      null == a.i ? console.log("profile pic loaded for already disposed item") : (Gj(a.i, `${c.width * b}px ${c.height * b}px`), Ij(a.i));
    };
    c.src = a.g.oe.Tl;
  } else {
    a.i.el.style.backgroundPosition = "0px 0px", Gj(a.i, "100%"), Ij(a.i);
  }
}
class sO extends Nz {
  constructor(a, b, c) {
    super(null);
    this.g = a;
    this.Og = b;
    this.O = {capture:!0, passive:!1};
    R(this, "AnnotatePluginAudioItemContainer");
    uj(this, "auto");
    this.i = new Nj(null);
    R(this.i, "AnnotatePluginAudioItemProfile");
    this.g.oe.gj && this.g.oe.hj && this.i.uc(this.g.oe.gj + " " + this.g.oe.hj);
    this.l = new Nj(null);
    R(this.l, "AnnotatePluginAudioItemWaveImage");
    rj(this.l, '<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" \n            width="80" height="40" viewBox="0 0 80 40"><g><rect x="5" y="19" width="1" height="2"/><rect x="23" y="19" \n            width="1" height="2"/><rect x="41" y="19" width="1" height="2"/><rect x="71" y="18" width="1" height="4"/>\n            <rect x="47" y="19" width="1" height="2"/><rect x="8" y="18" width="1" height="4"/><rect x="44" y="18" width="1" \n            height="4"/><rect x="50" y="18" width="1" height="4"/><rect x="68" y="17" width="1" height="6"/><rect x="53" \n            y="17" width="1" height="6"/><rect x="65" y="15" width="1" height="10"/><rect x="11" y="15" width="1" \n            height="10"/><rect x="26" y="17" width="1" height="6"/><rect x="35" y="17" width="1" height="6"/><rect x="38" \n            y="16" width="1" height="8"/><rect x="14" y="12" width="1" height="16"/><rect x="17" y="13" width="1" \n            height="14"/><rect x="29" y="12" width="1" height="16"/><rect x="56" y="12" width="1" height="16"/>\n            <rect x="62" y="11" width="1" height="18"/><rect x="59" y="13" width="1" height="14"/><rect x="32" y="10" \n            width="1" height="20"/><rect x="20" y="16" width="1" height="8"/><rect x="74" y="19" width="1" height="2"/>\n            </g></svg>');
    this.j = new Nj(null);
    R(this.j, "AnnotatePluginAudioItemWaveImagePlayAreaOverlay");
    this.j.uc("Play");
    this.Wa = new zz();
    this.Wa.el.className = "extension_reset_css AnnotatePluginAudioItemDeleteBtn extension_icon extension_icon-delete";
    this.Wa.xe("#000000");
    this.Wa.uc("Delete");
    (this.Og || L.mb().Ja() && !L.mb().Gf()) && this.Wa.Sa(!1);
    this.Z(this.i);
    this.Z(this.l);
    this.Z(this.j);
    this.Z(this.Wa);
    this.ga(0, 0);
    this.Sa(!1);
    c.appendChild(this.el);
    Kj(this.Wa, () => {
      var d = this.g;
      hB(d.Fl, d);
    });
    this.onclick = null;
    Kj(this.j, () => {
      this.g.ra.style.display = "block";
      this.ja();
      this.g.hb && this.g.hb.paused && this.g.hb.play();
    });
    this.m = null;
  }
  Wn(a) {
    this.Og != a && (this.Og = a, this.bs(), this.Og ? this.Wa.ja() : this.Wa.pb());
  }
  bs() {
    this.g.oe.gj && this.g.oe.hj && this.i.uc(this.g.oe.gj + " " + this.g.oe.hj);
    rO(this);
  }
  Zb() {
    return "AudioItem";
  }
  U() {
    this.i && (this.i.U(), this.i = null);
    this.l && (this.l.U(), this.l = null);
    this.j && (this.j.el.onclick = null, this.j.U(), this.j = null);
    this.Wa && (this.Wa.el.onclick = null, this.Wa.U(), this.Wa = null);
    super.U();
  }
}
;function tO(a, b) {
  a.Fy = b;
  var c = 4;
  b = 4;
  uO(a) && (c = 8, b = 9);
  a.ug.style.top = c + "px";
  a.si.style.top = c + "px";
  a.ug.style.left = a.width - a.Zg - b + "px";
  c = A(S.j) ? -1 : S.j;
  let d = Fh(P) || nl();
  a.Cq = a.Fl.gB && !a.qw && !a.Fy && !d && (!a.Og || -1 != c && Ph()) && !yw(Ql) && Jh() && Oo(S) && Yg(Oo(S).ma) ? !0 : !1;
  vO(a);
  a.si.style.left = (a.Cq || a.ps || wO(a)) && !a.Fy ? a.width - 2 * a.Zg - b - 4 + "px" : a.width - a.Zg - b - 4 + "px";
}
function xO(a) {
  console.log("updated has pro feature value for media");
  tO(a, !1);
}
function uO(a) {
  return null != a.kb && a.kb.Rx() ? !0 : !1;
}
function yO(a) {
  a.ZA && !a.Og ? (a.ne.setAttribute("title", "Drag to move"), a.ne.style.cursor = "move", a.Wj.style.cursor = "move", sj(a.kf, "move"), a.Jc && (sj(a.Jc.l, "move"), sj(a.Jc, "move"), sj(a.Jc.i, "move")), uO(a) || (a.Je.style.display = "block")) : (a.ne.removeAttribute("title"), a.ne.style.cursor = "default", a.Wj.style.cursor = "default", sj(a.kf, "default"), a.Jc && (sj(a.Jc.l, "default"), sj(a.Jc, "default"), sj(a.Jc.i, "default")), a.Je.style.display = "none");
}
function wO(a) {
  return M.g || !Jh() || Qh() ? !1 : a.qw || a.Cq || "" == Ql.i && !a.Cq && Jk(P) && window.top != window;
}
function zO(a) {
  a.qf.onclick = () => {
    a.qw ? (bs && AO(null, !0), Kv && BO(a)) : a.hb && a.hb.paused && a.hb.play();
  };
  a.Hg.onclick = () => {
    a.hb && !a.hb.paused && a.hb.pause();
  };
  a.si.onclick = () => {
    uO(a) && (a.hb && !a.hb.paused && a.hb.pause(), a.ra.style.display = "none", a.Jc.pb());
  };
  a.hb.onplay = b => {
    bs && bs.g(b);
    CO(a);
    uO(a) || (DO(a), tO(a, !0));
    console.log(">>>>> PLAYING");
  };
  a.hb.onpause = b => {
    b = b.target;
    console.log(">>>>> PAUSED | seeking ", b.seeking);
    b.paused && !b.seeking && (a.sF && (b.currentTime = 0, uO(a) && (a.ra.style.display = "none", a.Jc.pb()), gw("Playback limited to " + Math.floor(Pr.Bv / 60) + " minutes", !1)), EO(a), uO(a) || FO(a), tO(a, !1));
  };
  a.hb.onended = b => {
    let c = b.target;
    EO(a);
    uO(a) || FO(a);
    tO(a, !1);
    console.log(">>>>> ENDED");
    uO(a) && setTimeout(() => {
      c && c.paused && (a.ra.style.display = "none", a.Jc.pb(), a.Fl.yE(a, a.ps, a.Cq, !1, !1));
    }, 500);
  };
  a.sF = !1;
  a.hb.ontimeupdate = b => {
    b = b.target;
    !a.Fl.gB && b && b.currentTime > Pr.Bv && (a.sF = !0, b.pause());
  };
}
function GO(a) {
  a.hb.addEventListener("webkitfullscreenchange", b => {
    (b = b.target) && b.webkitDisplayingFullscreen ? (a.ou = !0, a.fB = !1) : (a.fB = !0, setTimeout(() => {
      a.fB && (a.fB = !1, a.ou = !1);
    }, 2000));
  }, a.O);
}
function DO(a) {
  a.ps = !1;
  vO(a);
  tO(a, !1);
  uO(a) && a.Jc.Wa.ja();
}
function FO(a) {
  a.Og || L.mb().Ja() && !L.mb().Gf() || (a.ps = !0, vO(a), tO(a, !1), uO(a) && a.Jc.Wa.pb());
}
function HO(a) {
  a.kf.Im(a.oe.Tl);
  Hj(a.kf);
  a.oe.Hy ? pj(a.kf, "AnnotatePluginUserNameProfilePic") : R(a.kf, "AnnotatePluginUserNameProfilePic");
  Ej(a.kf, a.oe.VH);
  if (a.oe.Hy && a.oe.$i) {
    var b = 32 / a.oe.$i.w;
    a.kf.el.style.backgroundPosition = `${-(a.oe.$i.x * b)}px ${-(a.oe.$i.y * b)}px`;
    let c = new Image();
    c.onload = () => {
      null == a.kf ? console.log("profile pic loaded for already disposed item") : (Gj(a.kf, `${c.width * b}px ${c.height * b}px`), Ij(a.kf));
    };
    c.src = a.oe.Tl;
  } else {
    a.kf.el.style.backgroundPosition = "0px 0px", Gj(a.kf, "100%"), Ij(a.kf);
  }
}
function IO(a, b, c, d) {
  null != a.kb.Bh && null != a.kb.Yk && (c = a.kb.Bh);
  a.mk.setAttribute("src", c + b.Hu());
  a.hb.load();
  a.EB = d + "&mType=1&filename=" + b.Hu();
  FO(a);
  uO(a) ? (a.Je.style.display = "none", CO(a), a.ug.className = "AnnotatePluginVideoContainerBtn AudioOnly annotate-plugin-clickable-element extension_icon extension_icon-more_options", a.hb.className = "AnnotatePluginVideoElement AudioOnly", R(a.kf, "AudioOnly"), a.Wj.style.display = "block", a.si.style.display = "flex") : (EO(a), a.hb.className = "AnnotatePluginVideoElement", b.Dk && gM(b) && JO(a));
  yO(a);
  tO(a, !1);
  a.hb.controlsList && a.hb.controlsList.supports && (a.hb.controlsList.supports("nodownload") && a.hb.controlsList.add("nodownload"), a.hb.controlsList.supports("noplaybackrate") && a.hb.controlsList.add("noplaybackrate"));
}
function KO(a, b, c, d) {
  null != a.kb.Bh && null != a.kb.Yk && (c = a.kb.Bh);
  b.Ar == Rg.Ds ? (a.qw = !0, a.qf.innerHTML = '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512"><path style="fill:#ff0021;" d="M460.8,68.452H51.2c-28.16,0-51.2,23.04-51.2,51.2v272.696c0,28.16,23.04,51.2,51.2,51.2h409.6c28.16,0,51.2-23.04,51.2-51.2V119.652C512,91.492,488.96,68.452,460.8,68.452z M188.44,359.98V151.108l195.624,104.44L188.44,359.98z"/><polygon style="fill:#FFFFFF;" points="188.44,359.98 384.056,255.548 188.44,151.108 "/></svg>', 
  a.qf.classList.remove("AnnotatePluginVideoContainerPlayBtn"), a.qf.classList.add("AnnotatePluginYoutubePlayBtn")) : (a.mk.setAttribute("src", c + b.Hu()), a.EB = d + "&mType=2&filename=" + b.Hu());
  a.hb.load();
  FO(a);
  uO(a) ? (a.Je.style.display = "none", CO(a), a.ug.className = "AnnotatePluginVideoContainerBtn AudioOnly annotate-plugin-clickable-element extension_icon extension_icon-more_options", a.hb.className = "AnnotatePluginVideoElement AudioOnly", R(a.kf, "AudioOnly"), a.Wj.style.display = "block", a.si.style.display = "flex") : (EO(a), a.hb.className = "AnnotatePluginVideoElement", JO(a));
  yO(a);
  a.hb.controlsList && a.hb.controlsList.supports && (a.hb.controlsList.supports("nodownload") && a.hb.controlsList.add("nodownload"), a.hb.controlsList.supports("noplaybackrate") && a.hb.controlsList.add("noplaybackrate"));
  tO(a, !1);
}
function LO(a, b, c, d) {
  a.dn = b;
  "arrMediaAttachments" == a.dn ? IO(a, a.kb.li(), c, d) : "arrUploadedVideoAttachments" == a.dn && KO(a, a.kb, c, d);
  HO(a);
  uO(a) && rO(a.Jc);
}
function JO(a) {
  let b = MO(a), c = new Image();
  c.onload = () => {
    a.hb && (a.hb.setAttribute("poster", b), console.log(`poster loaded ${b}`));
  };
  c.src = b;
}
function NO(a) {
  4 != a.hb.readyState && a.hb.load();
  let b = !1;
  if (!uO(a) && !Yg(a.hb.getAttribute("poster"))) {
    if ("arrUploadedVideoAttachments" == a.dn) {
      b = !0;
    } else {
      let c = a.kb.li();
      c && c.Dk && gM(c) && (b = !0);
    }
  }
  b && JO(a);
}
function CO(a) {
  a.qf && (a.qf.style.display = "none", uO(a) || a.hb.setAttribute("controls", "controls"), a.ne.style.height = a.height - a.xw + "px");
  a.Hg && !uO(a) ? a.Hg.style.display = "block" : a.Hg.style.display = "none";
}
function EO(a) {
  uO(a) || (a.qf && (a.qf.style.display = "block", a.hb.removeAttribute("controls"), a.ne.style.height = a.height + "px"), a.Hg && (a.Hg.style.display = "none"));
}
function MO(a) {
  var b = a.Fl, c = a.qd;
  b = "arrMediaAttachments" == a.dn ? M.v + b.Rl + "record/" : M.v + b.Rl + "video/";
  c && (b = "arrMediaAttachments" == a.dn ? $I(0, c) : bJ(0, c));
  c = b;
  null != a.kb.Yk && (c = a.kb.Yk);
  return c = "arrMediaAttachments" == a.dn ? c + gM(a.kb.li()) : c + iM(a.kb);
}
function OO(a, b, c) {
  a.ra.style.left = b + "px";
  a.ra.style.top = c + "px";
  a.Jc.ga(b, c);
}
function vO(a) {
  a.ug.style.display = (a.Cq || a.ps || wO(a)) && !a.Fy ? "flex" : "none";
}
function PO(a, b) {
  for (; null != a;) {
    if (a == b) {
      return !0;
    }
    a = a.parentElement;
  }
  return !1;
}
class QO extends ph {
  constructor(a, b, c, d, e) {
    super();
    this.Uz = Xg();
    this.Fl = a;
    this.qd = d;
    this.kb = e;
    this.Og = b;
    this.ZA = !0;
    this.oe = RO(this.Fl, d, this);
    this.width = Pr.ui;
    this.height = Pr.Jj;
    this.dv = this.ev = 36;
    this.Up = 9;
    this.Zg = 32;
    this.xw = 70;
    this.Fy = !1;
    this.tg = this.sg = 0;
    this.EB = "";
    this.ug = this.Je = this.ne = this.Hg = this.qf = this.mk = this.hb = this.ra = null;
    this.Cq = this.ps = !1;
    this.Jc = this.si = this.Wj = this.kf = null;
    this.vB(c);
    this.O = {capture:!0, passive:!1};
    this.Ib = this.Eb = 0;
    this.qo = this.FB.bind(this);
    this.ax = this.RC.bind(this);
    this.jx = this.cD.bind(this);
    this.xn = this.qz.bind(this);
    this.GC();
    this.zc = this.lc = 0;
    this.ix = this.$C.bind(this);
    this.bx = this.SC.bind(this);
    this.rm = this.TC.bind(this);
    this.HC();
    this.ce = !1;
    this.D = null;
    this.gi = !1;
    this.scale = 1;
    this.qw = this.ou = !1;
    this.dn = null;
    this.bs = this.bs.bind(this);
    (a = e.xs) && a.addEventListener(a.g, this.bs);
  }
  vB(a) {
    this.hb = document.createElement("video");
    this.hb.setAttribute("controls", "controls");
    this.hb.setAttribute("preload", "metadata");
    this.hb.setAttribute("webkit-playsinline", "true");
    this.hb.setAttribute("playsinline", "true");
    this.hb.setAttribute("width", this.width + "");
    this.hb.setAttribute("height", this.height + "");
    this.hb.className = "extension_reset_css AnnotatePluginVideoElement";
    this.hb.setAttribute("disablepictureinpicture", "true");
    this.mk = document.createElement("source");
    this.mk.setAttribute("src", "");
    this.mk.setAttribute("type", "");
    this.hb.appendChild(this.mk);
    this.ne = document.createElement("div");
    this.ne.className = "extension_reset_css AnnotatePluginMediaContainerOverlay";
    this.ne.style.height = this.height - this.xw + "px";
    this.ne.style.width = this.width + "px";
    this.qf = document.createElement("div");
    this.qf.className = "extension_reset_css";
    this.qf.setAttribute("title", "Play");
    this.qf.style.height = this.ev + "px";
    this.qf.style.width = this.ev + "px";
    this.qf.style.top = (this.height - this.ev) / 2 + "px";
    this.qf.style.left = (this.width - this.ev) / 2 + "px";
    this.qf.innerHTML = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve"><style type="text/css">.annotatePlay0{display:none;}.annotatePlay1{display:inline;fill:#FFFFFF;}.annotatePlay3{display:inline;fill:#2196f3;}</style><g id="Layer_1_1_" class="annotatePlay0"></g><g id="Layer_2" class="annotatePlay0"><path class="annotatePlay1" d="M22.1,12.8"/></g><g id="Layer_3"><path class="annotatePlay3" d="M17.8,12.6l-9.1,5.6c-0.3,0.2-0.7,0-0.7-0.4V6.2c0-0.4,0.4-0.6,0.7-0.4l9.1,6C18.1,12,18.1,12.5,17.8,12.6z"/></g></svg>';
    this.qf.className = "AnnotatePluginVideoContainerPlayBtn annotate-plugin-clickable-element";
    this.Hg = document.createElement("div");
    this.Hg.className = "extension_reset_css";
    this.Hg.setAttribute("title", "Pause");
    this.Hg.style.height = this.dv + "px";
    this.Hg.style.width = this.dv + "px";
    this.Hg.style.top = (this.height - this.dv) / 2 + "px";
    this.Hg.style.left = (this.width - this.dv) / 2 + "px";
    this.Hg.innerHTML = '<?xml version="1.0" encoding="utf-8"?><svg version="1.1" id="Layer_2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve"> <style> .annotatePauseMedia{display:inline;fill:#2196f3;}</style> <rect class="annotatePauseMedia" x="8" y="6" width="2" height="12"/> <rect class="annotatePauseMedia" x="15" y="6" width="2" height="12"/></svg>';
    this.Hg.className = "AnnotatePluginVideoContainerPauseBtn annotate-plugin-clickable-element";
    this.Je = document.createElement("div");
    this.Je.className = "extension_reset_css";
    this.Je.setAttribute("title", "Resize");
    this.Je.style.top = this.height - this.Up + "px";
    this.Je.style.left = this.width - this.Up + "px";
    this.Je.className = "AnnotatePluginVideoContainerResizeHandleLShape";
    this.ug = document.createElement("div");
    this.ug.className = "extension_reset_css";
    this.ug.setAttribute("title", "More");
    this.ug.style.height = this.Zg + "px";
    this.ug.style.width = this.Zg + "px";
    this.ug.style.top = "4px";
    this.ug.style.left = this.width - this.Zg - 4 + "px";
    this.ug.className = "AnnotatePluginVideoContainerBtn annotate-plugin-clickable-element extension_icon extension_icon-more_options";
    this.ug.style.color = "#000000";
    this.ug.style.display = "none";
    this.ug.onclick = b => {
      b.preventDefault();
      b = wO(this);
      console.log("Delete Download GetLink:", this.ps, this.Cq, b);
      this.Fl.yE(this, this.ps, this.Cq, b, !0);
    };
    this.kf = new Nj(null);
    Cj(this.kf, "flex");
    this.kf.pb();
    R(this.kf, "AnnotatePluginVideoItemProfile");
    this.oe.gj && this.oe.hj && this.kf.uc(this.oe.gj + " " + this.oe.hj);
    this.Wj = document.createElement("div");
    this.Wj.style.display = "none";
    this.Wj.className = "extension_reset_css AnnotatePluginAudioItemWaveImageExpanded";
    this.Wj.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" width="80" height="40" viewBox="0 0 80 40"><g><rect x="5" y="19" width="1" height="2"/><rect x="23" y="19" width="1" height="2"/><rect x="41" y="19" width="1" height="2"/><rect x="71" y="18" width="1" height="4"/><rect x="47" y="19" width="1" height="2"/><rect x="8" y="18" width="1" height="4"/><rect x="44" y="18" width="1" height="4"/><rect x="50" y="18" width="1" height="4"/><rect x="68" y="17" width="1" height="6"/><rect x="53" y="17" width="1" height="6"/><rect x="65" y="15" width="1" height="10"/><rect x="11" y="15" width="1" height="10"/><rect x="26" y="17" width="1" height="6"/><rect x="35" y="17" width="1" height="6"/><rect x="38" y="16" width="1" height="8"/><rect x="14" y="12" width="1" height="16"/><rect x="17" y="13" width="1" height="14"/><rect x="29" y="12" width="1" height="16"/><rect x="56" y="12" width="1" height="16"/><rect x="62" y="11" width="1" height="18"/><rect x="59" y="13" width="1" height="14"/><rect x="32" y="10" width="1" height="20"/><rect x="20" y="16" width="1" height="8"/><rect x="74" y="19" width="1" height="2"/></g></svg>';
    this.si = document.createElement("div");
    this.si.setAttribute("title", "Minimize");
    this.si.style.display = "none";
    this.si.style.height = this.Zg + "px";
    this.si.style.width = this.Zg + "px";
    this.si.style.top = "4px";
    this.si.style.left = this.width - 2 * this.Zg - 4 - 4 + "px";
    this.Og && (this.si.style.left = this.width - this.Zg - 4 + "px");
    this.si.className = "extension_reset_css AnnotatePluginVideoContainerMinimizeBtn annotate-plugin-clickable-element extension_icon extension_icon-minimize";
    this.si.style.color = "#000000";
    this.ra = document.createElement("div");
    this.ra.style.display = "none";
    this.ra.style.top = "0px";
    this.ra.style.left = "0px";
    this.ra.style.width = this.width + "px";
    this.ra.style.height = this.height + "px";
    this.ra.style.pointerEvents = "auto";
    this.ra.className = "extension_reset_css AnnotatePluginMediaContainer";
    this.ra.appendChild(this.hb);
    this.ra.appendChild(this.ne);
    this.ra.appendChild(this.Hg);
    this.ra.appendChild(this.qf);
    this.ra.appendChild(this.Je);
    this.ra.appendChild(this.ug);
    this.ra.appendChild(this.kf.el);
    this.ra.appendChild(this.Wj);
    this.ra.appendChild(this.si);
    ik(this.ra);
    a.appendChild(this.ra);
    this.Jc = new sO(this, this.Og, a);
    yO(this);
    zO(this);
    GO(this);
  }
  Wn(a) {
    this.Og != a && (this.Og = a, this.bs(), this.Og ? DO(this) : FO(this), yO(this));
  }
  bs() {
    this.kb && (this.oe = RO(this.Fl, this.qd, this), HO(this), this.oe.gj && this.oe.hj && this.kf.uc(this.oe.gj + " " + this.oe.hj), uO(this) && this.Jc.bs());
  }
  Kd(a) {
    a.contains(this.ra) || a.appendChild(this.ra);
    this.Jc && this.Jc.Kd(a);
  }
  aA() {
    return this.kb ? this.kb.ma : "";
  }
  uk() {
    this.gi = !0;
    this.kn();
  }
  Yn(a) {
    this.gi = !1;
    a && this.show();
  }
  iq() {
    return this.gi;
  }
  show() {
    this.gi || uO(this) && ("none" != this.ra.style.display || this.Jc.ob()) || (this.Jc && uO(this) ? (this.Jc.pb(), this.ra.style.display = "none") : (this.ra.style.display = "block", this.Jc.ja()));
  }
  kn() {
    this.hb.paused || this.hb.pause();
    this.ra.style.display = "none";
    this.Jc.ja();
  }
  Fo(a, b, c, d) {
    this.ra.style.left = a + "px";
    this.ra.style.top = b + "px";
    this.Jc.ga(a, b);
    this.width = c;
    this.height = d;
    !uO(this) && (d < Pr.Jj || c < Pr.ui) && (this.width = Pr.ui, this.height = .5625 * Pr.ui);
    uO(this) && (this.xw = 50, this.height = 100, this.kb.height = this.height);
    this.wt(!1);
  }
  De(a, b) {
    this.ra.style.left = a + "px";
    this.ra.style.top = b + "px";
    this.Jc.ga(a, b);
    this.kb && (this.kb.Cb && (b = Ek(a, b, this.kb.Cb), a = b.x, b = b.y), this.kb.offsetLeft = a, this.kb.offsetTop = b);
  }
  Fn(a) {
    this.scale = a;
    this.ra.style.transformOrigin = "left top";
    this.ra.style.transform = "scale(" + a + ")";
    this.Jc.ef(a);
    a = 1 / a;
    this.qf.style.transformOrigin = "center center";
    this.qf.style.transform = "scale(" + a + ")";
    this.Hg.style.transformOrigin = "center center";
    this.Hg.style.transform = "scale(" + a + ")";
    uO(this) || (this.kf.ef(a), this.Wj.style.transformOrigin = "left top", this.Wj.style.transform = "scale(" + a + ")", this.ug.style.transformOrigin = "right top", this.ug.style.transform = "scale(" + a + ")", this.si.style.transformOrigin = "right top", this.si.style.transform = "scale(" + a + ")");
  }
  getBoundingClientRect() {
    return this.ra.getBoundingClientRect();
  }
  isVisible(a) {
    return a && "block" == a.style.display ? !0 : !1;
  }
  GC() {
    this.ne.addEventListener("pointerdown", this.qo, this.O);
    this.kf.el.addEventListener("pointerdown", this.qo, this.O);
    this.Wj.addEventListener("pointerdown", this.qo, this.O);
    if (this.Jc) {
      var a = this.Jc;
      a.m = this.qo;
      a.el.addEventListener("pointerdown", a.m, a.O);
    }
  }
  FB(a) {
    a.preventDefault();
    if (this.ZA && !this.Og) {
      Ql.Ja() && to();
      var b = a.target;
      b != this.Jc.j.el && b != this.Jc.Wa.el && !PO(b, this.Jc.Wa.el) && (this.sg = this.ra.offsetLeft, this.tg = this.ra.offsetTop, PO(b, this.Jc.el) && (this.sg = this.Jc.el.offsetLeft, this.tg = this.Jc.el.offsetTop), this.Eb = a.clientX, this.Ib = a.clientY, window.addEventListener("pointerup", this.xn, this.O), window.addEventListener("pointercancel", this.xn, this.O), document.addEventListener("pointerup", this.xn, this.O), window.addEventListener("pointermove", this.ax, this.O), window.addEventListener("touchmove", 
      this.Qr, this.O), document.addEventListener("scroll", this.jx, this.O), "none" == this.qf.style.display || this.Jc.ob()) && (this.ne.style.height = this.height + "px");
    }
  }
  Qr(a) {
    a.preventDefault();
  }
  RC(a) {
    if (kh(a)) {
      a.preventDefault();
      var b = parseFloat(this.ra.style.left.slice(0, -2)) + (a.clientX - this.Eb), c = parseFloat(this.ra.style.top.slice(0, -2)) + (a.clientY - this.Ib), d = this.ra.offsetHeight, e = this.ra.offsetWidth;
      !uO(this) || 0 != d && 0 != e || (d = 100, e = Pr.ui);
      if (this.kb.A && this.kb.A.scale) {
        var f = this.kb.A.scale;
        d *= f;
        e *= f;
      }
      var k = f = !1;
      if ((Jk(P) || ml(P)) && this.kb.A) {
        var l = this.kb.A, n = parseInt(l.width), p = parseInt(l.height), t = parseInt(l.y);
        l = parseInt(l.x);
        b < l ? (b = l, f = !0) : b + e > l + n && (b = l + n - e, f = !0);
        c < t ? (c = t, k = !0) : c + d > t + p && (c = t + p - d, k = !0);
      }
      n = parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-left"));
      p = parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-top"));
      t = document.body.scrollWidth;
      l = document.body.scrollHeight;
      Jk(P) && window.top != window && (0 == l && (l = window.innerHeight), 0 == t && (t = window.innerWidth));
      this.D && this.D.Ea && (t = Nx(this.D), l = Ox(this.D), p = n = 0);
      0 == l && (l = window.innerHeight);
      0 == t && (t = window.innerWidth);
      0 <= b && b <= t - n - e && (this.Hf(b), f || (this.Eb = a.clientX));
      0 <= c && c <= l - p - d && (this.fc(c), k || (this.Ib = a.clientY));
      this.ce = !0;
    } else {
      this.qz(a);
    }
  }
  Hf(a) {
    this.ra && (this.ra.style.left = a + "px", this.Jc.Nd(a), this.kb && (this.kb.Cb && (a = Ek(a, 0, this.kb.Cb).x), this.kb.offsetLeft = a));
  }
  fc(a) {
    this.ra && (this.ra.style.top = a + "px", this.Jc.Ee(a), this.kb && (this.kb.Cb && (a = Ek(0, a, this.kb.Cb).y), this.kb.offsetTop = a));
  }
  cD() {
    this.Dw();
  }
  qz(a) {
    a.preventDefault();
    this.Dw();
  }
  Dw() {
    window.removeEventListener("pointerup", this.xn, this.O);
    window.removeEventListener("pointercancel", this.xn, this.O);
    window.removeEventListener("pointermove", this.ax, this.O);
    window.removeEventListener("touchmove", this.Qr, this.O);
    document.removeEventListener("scroll", this.jx, this.O);
    document.removeEventListener("pointerup", this.xn, this.O);
    this.ne.style.height = "none" == this.qf.style.display ? this.height - this.xw + "px" : this.height + "px";
    if (!(this.ra.offsetTop == this.tg && this.ra.offsetLeft == this.sg || this.Jc.el.offsetTop == this.tg && this.Jc.el.offsetLeft == this.sg)) {
      if (-1 != this.kb.S && this.kb.A && this.D) {
        let c = this.kb.S;
        if (-1 != c && Vk(P)) {
          c = yo(this.D, c);
          var a = Object.assign({}, this.kb.A), b = fl(this.D, this.kb.offsetTop - a.y + ox(this.D, c)).S;
          b != c && (a = hl(this.D, b, new il(this.D.scrollX, this.D.scrollY)), a = {x:-a.$a + this.D.scrollX, y:-a.Ua + this.D.scrollY, width:jl(this.D, b), height:kl(this.D, b), scale:this.D.scale}, this.kb.S = ll(this.D, b), this.kb.A = a);
        }
      }
      this.Cv();
    }
  }
  HC() {
    this.Je.addEventListener("pointerdown", this.ix, this.O);
  }
  $C(a) {
    a.preventDefault();
    this.ZA && !this.Og && (Ql.Ja() && to(), this.Eb = a.clientX, this.Ib = a.clientY, this.lc = this.ra.offsetWidth, this.zc = this.ra.offsetHeight, window.addEventListener("pointerup", this.rm, this.O), window.addEventListener("pointercancel", this.rm, this.O), document.addEventListener("pointerup", this.rm, this.O), window.addEventListener("pointermove", this.bx, this.O), window.addEventListener("touchmove", this.Qr, this.O));
  }
  TC(a) {
    a.preventDefault();
    window.removeEventListener("pointerup", this.rm, this.O);
    window.removeEventListener("pointercancel", this.rm, this.O);
    window.removeEventListener("pointermove", this.bx, this.O);
    window.removeEventListener("touchmove", this.Qr, this.O);
    document.removeEventListener("pointerup", this.rm, this.O);
    this.wt(!1);
    this.Cv();
  }
  SC(a) {
    if (kh(a)) {
      a.preventDefault();
      var b = this.lc + (a.clientX - this.Eb) / this.scale;
      a = this.zc + (a.clientY - this.Ib) / this.scale;
      var c = Pr.ui;
      if (!(a < Pr.Jj || b < c || 360 < a || 640 < b)) {
        if ((Jk(P) || ml(P)) && this.kb.A) {
          var d = this.kb.A;
          a = parseInt(d.width);
          c = parseInt(d.height);
          let e = parseInt(d.y);
          d = parseInt(d.x);
          let f = 9 * b / 16, k = b;
          if (this.kb.A.scale) {
            let l = this.kb.A.scale;
            f *= l;
            k *= l;
          }
          if (this.kb.offsetLeft + k > d + a || this.kb.offsetTop + f > e + c) {
            return;
          }
        }
        this.width = b;
        this.height = 9 * b / 16;
        this.wt(!0);
        this.kb.height = this.height;
        this.kb.width = this.width;
        this.ce = !0;
      }
    } else {
      this.rm();
    }
  }
  wt(a) {
    this.ra.style.width = this.width + "px";
    this.ra.style.height = this.height + "px";
    this.hb.setAttribute("width", this.width.toString());
    this.hb.setAttribute("height", this.height.toString());
    this.qf.style.top = (this.height - this.ev) / 2 + "px";
    this.qf.style.left = (this.width - this.ev) / 2 + "px";
    this.Hg.style.top = (this.height - this.dv) / 2 + "px";
    this.Hg.style.left = (this.width - this.dv) / 2 + "px";
    this.Je.style.top = this.height - this.Up + "px";
    this.Je.style.left = this.width - this.Up + "px";
    tO(this, !1);
    this.ne.style.width = this.width + "px";
    this.ne.style.height = "none" != this.qf.style.display || a ? this.height + "px" : this.height - this.xw + "px";
  }
  Zy() {
    return uO(this) && this.Jc.ob() ? this.Jc.el.getBoundingClientRect() : "none" != this.ra.style.display ? this.ra.getBoundingClientRect() : null;
  }
  Cv() {
    if (S && this.dn) {
      if ("arrMediaAttachments" == this.dn) {
        var a = Oo(S);
        if (a) {
          var b = this.kb;
          if (-1 != a.Ed.indexOf(b)) {
            b && b.xb();
            a.xb();
            var c = {};
            c.arrMediaAttachments = [b];
            a.dispatchEvent(new CustomEvent(Cp.i, {detail:c}));
          }
        }
      } else {
        "arrUploadedVideoAttachments" == this.dn && (a = Oo(S)) && (b = this.kb, -1 != a.Gd.indexOf(b) && (b && b.xb(), a.xb(), c = {}, c.arrUploadedVideoAttachments = [b], a.dispatchEvent(new CustomEvent(Cp.i, {detail:c}))));
      }
    }
  }
  gb() {
    this.mc(this.Uz);
    this.kb = null;
    this.mk && this.mk.remove();
    this.mk = null;
    this.hb && (this.hb.paused || this.hb.pause(), this.hb && (this.hb.onplay = null, this.hb.onpause = null, this.hb.onended = null), this.hb.remove());
    this.hb = null;
    this.ne && (this.ne.removeEventListener("pointerdown", this.qo, this.O), this.ne.remove());
    this.ne = null;
    this.kf && (this.kf.removeEventListener("pointerdown", this.qo, this.O), this.kf.U());
    this.Wj && (this.Wj.removeEventListener("pointerdown", this.qo, this.O), this.Wj.remove());
    this.qf && this.qf.remove();
    this.qf = null;
    this.Hg && this.Hg.remove();
    this.Hg = null;
    this.Je && (this.Je.removeEventListener("pointerdown", this.ix, this.O), this.Je.remove());
    this.Je = null;
    this.ug && (this.ug.onclick = null, this.ug.remove());
    this.ug = null;
    this.ra && this.ra.remove();
    this.ra = null;
    this.Jc && this.Jc.U();
    this.kf = this.Jc = null;
  }
}
;function SO(a) {
  a.g = Date.now();
  a.j = a.g;
  a.i = !1;
}
function TO(a) {
  a.i || (a.i || (a.g = Date.now()), a.i = !0);
}
function UO(a) {
  a.i || (a.g = Date.now());
  var b = (a.g - a.j) / 1000;
  a = Math.floor(b / 60).toString();
  b = Math.round(b % 60).toString();
  return (1 < a.length ? a : "0" + a.charAt(0)) + ":" + (1 < b.length ? b : "0" + b.charAt(0));
}
class VO {
}
;const WO = {Pi:0, Gk:1, JB:2};
Object.freeze(WO);
function XO(a) {
  return a.l == Og.sj ? a.s.LE : a.l == Og.zl ? a.s.QI : a.s.LE;
}
function YO(a, b) {
  a.i = 0;
  a.startTime = 0;
  a.sp = WO.Pi;
  clearInterval(a.Jd);
  a.Jd = null;
  window.removeEventListener("resize", a.u, a.O);
  a.el.removeEventListener("pointerdown", a.m, a.O);
  a.message.el.removeEventListener("pointerdown", a.m, a.O);
  a.g.el.removeEventListener("pointerdown", a.m, a.O);
  a.ja();
  b || a.dispatchEvent(new CustomEvent(ZO.g));
  a.l == Og.sj && (a = a.j, a.ja(), jM(a.g));
}
function $O(a) {
  if (0 < a.i && (a.sp = WO.Gk, rj(a.message, a.s.RI), clearInterval(a.Jd), a.Jd = null, a.l == Og.sj)) {
    var b = a.j;
    a = a.tE;
    b.pb();
    b.ga((window.innerWidth - b.width) / 2, 100);
    lM(b.g, a);
  }
}
function aP(a) {
  a.g.vf(700 < window.innerWidth && 700 < window.innerHeight ? 180 : 500 < window.innerWidth && 500 < window.innerHeight ? 150 : 400 < window.innerWidth && 400 < window.innerHeight ? 100 : 60);
  a.g.ga((window.innerWidth - a.g.el.offsetWidth) / 2, (window.innerHeight - a.g.el.offsetHeight) / 2);
  a = a.j;
  a.ga((window.innerWidth - a.width) / 2, 100);
}
class ZO extends Nj {
  static get g() {
    return "EVT_COUNTDOWN_END";
  }
  static get i() {
    return "EVT_COUNTDOWN_STARTED";
  }
  constructor() {
    super(null);
    this.s = {LI:'<div style="display:inline-block;font-size:20px; line-height:1.2em;">Your recording will start in</div></br><div style="display:inline-block;">~<span style="font-size: 16px;">secs</span></div>', RI:"Tap/ click anywhere to resume", QI:"Click to pause countdown and check camera and microphone settings", LE:"Click to pause countdown and check microphone settings"};
    this.O = {capture:!0, passive:!1};
    this.sp = WO.Pi;
    this.Jd = null;
    this.i = this.startTime = 0;
    this.o = "";
    this.j = this.g = this.message = null;
    this.bn();
    this.u = this.M.bind(this);
    this.C = this.ba.bind(this);
    this.m = this.N.bind(this);
    this.l = Og.te;
    this.tE = null;
  }
  bn() {
    this.he("AnnotatePluginCountdownOverlay");
    R(this, "AnnotatePluginCountdownOverlay");
    this.ja();
    this.message = new Nj(null);
    R(this.message, "AnnotatePluginCountdownMessage");
    this.Z(this.message);
    this.g = new Nj(null);
    R(this.g, "AnnotatePluginCountdownLabel");
    Cj(this.g, "inline-block");
    this.Z(this.g);
    document.body.appendChild(this.el);
    this.j = new oM();
  }
  ba() {
    null != this.Jd && (--this.i, rj(this.g, this.o.replace("~", this.i.toString())), 0 >= this.i && YO(this, !1));
  }
  N(a) {
    a.stopPropagation();
    a.preventDefault();
    this.sp == WO.Gk ? 0 < this.i && (this.sp = WO.JB, rj(this.message, XO(this)), this.Jd = setInterval(this.C, 1000), this.l == Og.sj && (a = this.j, a.ja(), jM(a.g))) : $O(this);
  }
  M() {
    aP(this);
  }
  Zb() {
    return "CountdownWidget";
  }
  U() {
    this.sp != WO.Pi && YO(this, !0);
    this.j && this.j.U();
    super.U();
  }
}
;function mM(a, b, c) {
  console.log("connecting volume node");
  try {
    a.volume = a.j.createMediaStreamSource(b), a.volume.connect(a.g), a.Jd && clearInterval(a.Jd), a.Jd = setInterval(() => {
      a.g.getFloatTimeDomainData(a.i);
      let d = 0.0;
      for (const e of a.i) {
        d += e * e;
      }
      a.dispatchEvent(new CustomEvent(kM.g, {detail:{micVolume:Math.sqrt(d / a.i.length)}}));
    }, 250), "undefined" !== typeof c && c(null);
  } catch (d) {
    console.error(d), "undefined" !== typeof c && c(d);
  }
}
class kM extends EventTarget {
  static get g() {
    return "SoundMeter_EVT_UPDATE_VOLUME_BAR";
  }
  constructor(a) {
    super();
    this.j = a;
    this.g = a.createAnalyser();
    this.i = new Float32Array(this.g.fftSize);
    this.Jd = 0;
  }
  stop() {
    console.log("SoundMeter stopping");
    this.Jd && (clearInterval(this.Jd), this.Jd = 0);
    this.volume && this.volume.disconnect();
    this.g.disconnect();
  }
}
;function bP(a) {
  a.hb.srcObject && (a.hb.srcObject = null, a.hb.load(), a.g.kn(), jM(a.g));
}
function cP(a, b) {
  a.ra.style.visibility = b ? "visible" : "hidden";
}
class dP extends EventTarget {
  static get g() {
    return "EVT_MEDIA_STREAM_PLAYER_UPDATE";
  }
  constructor() {
    super();
    this.width = Pr.ui;
    this.height = Pr.Jj;
    this.Up = 9;
    this.g = this.Je = this.ne = this.hb = this.ra = null;
    this.vB();
    this.O = {capture:!0, passive:!1};
    this.Ib = this.Eb = this.j = this.i = 0;
    this.qo = this.FB.bind(this);
    this.ax = this.RC.bind(this);
    this.xn = this.qz.bind(this);
    this.GC();
    this.zc = this.lc = 0;
    this.ix = this.$C.bind(this);
    this.bx = this.SC.bind(this);
    this.rm = this.TC.bind(this);
    this.HC();
  }
  vB() {
    this.hb = document.createElement("video");
    this.hb.setAttribute("preload", "metadata");
    this.hb.setAttribute("webkit-playsinline", "true");
    this.hb.setAttribute("playsinline", "true");
    this.hb.setAttribute("autoplay", "true");
    this.hb.volume = 0;
    this.hb.setAttribute("width", this.width + "");
    this.hb.setAttribute("height", this.height + "");
    this.hb.className = "AnnotatePluginVideoElement";
    this.ne = document.createElement("div");
    this.ne.className = "extension_reset_css AnnotatePluginMediaContainerOverlay";
    this.ne.setAttribute("title", "Drag to move");
    this.ne.style.cursor = "move";
    this.ne.style.height = this.height + "px";
    this.ne.style.width = this.width + "px";
    this.Je = document.createElement("div");
    this.Je.setAttribute("title", "Resize");
    this.Je.style.top = parseInt(this.height - this.Up) + "px";
    this.Je.style.left = parseInt(this.width - this.Up) + "px";
    this.Je.className = "extension_reset_css AnnotatePluginVideoContainerResizeHandleLShape";
    this.g = new nM();
    this.g.ra.title = "Stream audio";
    this.g.ra.style.cursor = "default";
    this.ra = document.createElement("div");
    this.ra.style.display = "none";
    this.ra.style.top = "0px";
    this.ra.style.left = "0px";
    this.ra.style.width = this.width + "px";
    this.ra.style.height = this.height + "px";
    this.ra.className = "extension_reset_css AnnotatePluginMediaStreamPlayerContainer";
    this.ra.appendChild(this.hb);
    this.ra.appendChild(this.ne);
    this.ra.appendChild(this.Je);
    this.ra.appendChild(this.g.ra);
    document.body.appendChild(this.ra);
    ik(this.ra);
  }
  show() {
    this.ra.style.display = "block";
  }
  kn() {
    this.ra.style.display = "none";
  }
  Fo(a, b, c, d) {
    this.ra.style.left = a + "px";
    this.ra.style.top = b + "px";
    this.width = c;
    this.height = d;
    this.wt();
  }
  GC() {
    this.ne.addEventListener("pointerdown", this.qo, this.O);
  }
  FB(a) {
    a.preventDefault();
    this.i = a.clientX - parseInt(this.ra.style.left);
    this.j = a.clientY - parseInt(this.ra.style.top);
    window.addEventListener("pointerup", this.xn, this.O);
    window.addEventListener("pointercancel", this.xn, this.O);
    window.addEventListener("pointermove", this.ax, this.O);
    this.dispatchEvent(new CustomEvent(dP.g));
  }
  RC(a) {
    a.preventDefault();
    this.ra.style.top = a.clientY - this.j > window.innerHeight - this.height - 10 ? window.innerHeight - this.height - 10 + "px" : 10 > a.clientY - this.j ? "10px" : a.clientY - this.j + "px";
    this.ra.style.left = a.clientX - this.i + this.width + 28 > window.innerWidth ? window.innerWidth - this.width - 28 + "px" : 10 > a.clientX - this.i ? "10px" : a.clientX - this.i + "px";
  }
  qz(a) {
    a.preventDefault();
    window.removeEventListener("pointerup", this.xn, this.O);
    window.removeEventListener("pointercancel", this.xn, this.O);
    window.removeEventListener("pointermove", this.ax, this.O);
  }
  HC() {
    this.Je.addEventListener("pointerdown", this.ix, this.O);
  }
  $C(a) {
    a.preventDefault();
    this.Eb = a.clientX;
    this.Ib = a.clientY;
    this.lc = parseFloat(this.ra.offsetWidth);
    this.zc = parseFloat(this.ra.offsetHeight);
    window.addEventListener("pointerup", this.rm, this.O);
    window.addEventListener("pointercancel", this.rm, this.O);
    window.addEventListener("pointermove", this.bx, this.O);
    this.dispatchEvent(new CustomEvent(dP.g));
  }
  TC(a) {
    a.preventDefault();
    window.removeEventListener("pointerup", this.rm, this.O);
    window.removeEventListener("pointercancel", this.rm, this.O);
    window.removeEventListener("pointermove", this.bx, this.O);
  }
  SC(a) {
    a.preventDefault();
    var b = a.clientX - this.Eb;
    a = a.clientY - this.Ib;
    a = Math.max((this.lc + b) / this.lc, (this.zc + a) / this.zc);
    b = this.lc * a - this.lc;
    a = this.zc * a - this.zc;
    b = this.lc + b;
    a = this.zc + a;
    140 > a || 250 > b || 360 < a || 640 < b || (this.width = parseInt(b), this.height = parseInt(9 * b / 16), this.wt());
  }
  wt() {
    this.ra.style.width = this.width + "px";
    this.ra.style.height = this.height + "px";
    this.hb.setAttribute("width", this.width);
    this.hb.setAttribute("height", this.height);
    this.Je.style.top = parseInt(this.height - this.Up) + "px";
    this.Je.style.left = parseInt(this.width - this.Up) + "px";
    this.ne.style.width = this.width + "px";
    this.ne.style.height = this.height + "px";
    var a = this.g, b = this.width - this.g.width - 4;
    a.ra.style.top = "4px";
    a.ra.style.left = b + "px";
  }
  Zy() {
    return this.ra && "none" != this.ra.style.display ? this.ra.getBoundingClientRect() : null;
  }
  gb() {
    this.hb && (this.hb.paused || this.hb.pause(), this.hb.remove());
    this.hb = null;
    this.ne && (this.ne.removeEventListener("pointerdown", this.qo, this.O), this.ne.remove());
    this.ne = null;
    this.Je && (this.Je.removeEventListener("pointerdown", this.ix, this.O), this.Je.remove());
    this.Je = null;
    this.g && this.g.gb();
    this.ra && this.ra.remove();
    this.ra = null;
  }
}
;function eP(a) {
  return a.j == Pg.yl || a.j == Pg.Gk;
}
function fP(a, b) {
  !a.i || a.g != Og.Hk && a.g != Og.zl || (a.i.kn(), bP(a.i));
  let c = !1;
  if (b == Qg.TF) {
    gP(a, b);
  } else if (a.j == Pg.Gk || a.j == Pg.yl) {
    a.ea = !1;
    a.B = b;
    console.log("RC: >> Aborting recording on error!!", a.B);
    hP(a, Pg.Pi);
    a.m.i = !1;
    VL(a.s);
    a.l.i = !1;
    PL(a.o);
    iP(a);
    let d = !1;
    switch(a.g) {
      case Og.em:
        d = a.Va && a.m.g;
        break;
      case Og.Hk:
        d = a.Va && a.m.g;
        break;
      case Og.sj:
        d = a.ib && a.l.g;
        break;
      case Og.zl:
        d = a.ib && a.l.g;
    }
    !d || a.B != Qg.KB && a.B != Qg.UF ? (console.log("RC: >> Save whatever uploaded till now"), jP(a), kP(a), lP(a)) : (console.log("RC: >> Uploader conn alive and uploading! waiting for upload to complete..."), a.ea = !0, TO(a.v), a.dispatchEvent(new CustomEvent(mP.j)), c = !0);
  } else if (a.j == Pg.Ew || a.j == Pg.te) {
    a.M && (Sn(), a.M = !1), gP(a, b);
  }
  a.ea && a.j == Pg.Pi && !c && (a.ea = !1, a.B = b, console.log("RC: >> Aborting pending upload of stopped rec on error!!", a.B), console.log("RC: >> Save whatever uploaded till now"), jP(a), kP(a), lP(a));
}
function nP(a) {
  if (a.J) {
    return a.J;
  }
  if (a.G) {
    return a.G;
  }
}
function oP(a, b) {
  return new Promise((c, d) => {
    let e = new MediaStream();
    b == Og.em ? $L(a.C, !1).then(f => {
      0 < f.getAudioTracks().length && e.addTrack(f.getAudioTracks()[0]);
      c({screenStream:null, userStream:e});
    }).catch(f => d(f)) : b == Og.Hk ? $L(a.C, !0).then(f => {
      0 < f.getAudioTracks().length && e.addTrack(f.getAudioTracks()[0]);
      0 < f.getVideoTracks().length && e.addTrack(f.getVideoTracks()[0]);
      c({screenStream:null, userStream:e});
    }).catch(f => d(f)) : b == Og.sj ? XL(a.ia).then(f => {
      $L(a.C, !1).then(k => {
        f.active ? (0 < k.getAudioTracks().length && e.addTrack(k.getAudioTracks()[0]), 0 < f.getVideoTracks().length && e.addTrack(f.getVideoTracks()[0]), c({screenStream:e, userStream:null})) : d("stream not active");
      }).catch(k => d(k));
    }).catch(f => d(f)) : XL(a.ia).then(f => {
      $L(a.C, !0).then(k => {
        f.active ? (0 < k.getAudioTracks().length && e.addTrack(k.getAudioTracks()[0]), 0 < f.getVideoTracks().length && e.addTrack(f.getVideoTracks()[0]), c({screenStream:e, userStream:null})) : d("stream not active");
      }).catch(k => d(k));
    }).catch(f => d(f));
  });
}
function pP(a) {
  null != a.J && null == a.G ? ML(a.o, a.J).then(() => {
    qP(a, !0, !1);
  }).catch(b => {
    console.log("RC: initRecorders Error", b);
    rP(a);
  }) : null == a.J && null != a.G ? RL(a.s, a.G).then(() => {
    qP(a, !1, !0);
  }).catch(b => {
    console.log("RC: initRecorders Error", b);
    rP(a);
  }) : ML(a.o, a.J).then(() => RL(a.s, a.G)).then(() => {
    qP(a, !0, !0);
  }).catch(b => {
    console.log("RC: initRecorders Error", b);
    rP(a);
  });
}
function sP(a, b, c, d) {
  if (a.Ha) {
    console.log("!!! initRecording: pending stream fetching in progress... returned");
  } else {
    if (a.j == Pg.Ew) {
      console.log("!!! initRecording: preparing for recording start... returned");
    } else {
      a.Ha = !0;
      a.B = Qg.te;
      a.j = Pg.te;
      a.g = Og.te;
      a.ea = !1;
      if (!b || d || c) {
        if (b && c && !d) {
          a.g = Og.Hk;
        } else if (b && d && !c) {
          a.g = Og.sj;
        } else if (b && c && d) {
          a.g = Og.zl;
        } else {
          console.log("Invalid case!");
          a.Ha = !1;
          return;
        }
      } else {
        a.g = Og.em;
      }
      console.log("initRecording with UA UV SV", b, c, d, a.g);
      Vn("Fetching stream...", null);
      a.M = !0;
      oP(a, a.g).then(e => {
        a.M && (Sn(), a.M = !1);
        a.J = e.screenStream;
        a.G = e.userStream;
        console.log("RC: got streamToRecord", e);
        a.Ha = !1;
        pP(a);
      }, e => {
        a.M && (Sn(), a.M = !1);
        a.Ha = !1;
        console.log("RC: fetchStreamsToRecord: Error name:", e.name, " message:", e.message);
        let f;
        f = a.g != Og.sj || null != a.ia.g ? "NotFoundError" == e.name || "DevicesNotFoundError" == e.name ? "Could not connect to media devices." : lL ? a.g != Og.Hk || mL ? "Could not connect to media devices." : "Please enable permission to access your camera in the browser and refresh this page to record." : "Please enable permission to access your microphone in the browser and refresh this page to record." : "Screen sharing cancelled";
        null != a.C.g || null != a.ia.g ? iP(a) : console.log("Ignore: no need to dispose stream on >> ", e);
        a.dispatchEvent(new CustomEvent(mP.m, {detail:{error:f}}));
        (e = L.Zf().ci()) && e.Ce() && vw(e);
      });
    }
  }
}
function iP(a) {
  console.log("RC: dispose all streams");
  null != a.C.g || null != a.ia.g ? (aM(a.C), YL(a.ia)) : console.log("RC: streams already disposed");
  a.J = null;
  a.G = null;
  a.ya = !1;
  a.pa = !1;
}
function qP(a, b, c) {
  Vn("Connecting to media devices...", null);
  a.M = !0;
  a.j = Pg.Ew;
  a.ya = !1;
  a.pa = !1;
  a.ba = "";
  a.N = "";
  if (b) {
    a.o.addEventListener(NL.i, a.eg);
    a.o.addEventListener(NL.g, a.Pe);
    a.o.addEventListener(NL.j, a.pf);
    a.l.addEventListener(FL.j, a.Cf);
    a.l.addEventListener(FL.l, a.oi);
    a.l.addEventListener(FL.i, a.ze);
    a.l.addEventListener(FL.g, a.gf);
    a.ba = "SRM_" + tP() + "_" + (new Date()).getTime();
    a.ba += ".webm";
    b = a.l;
    var d = a.ba;
    b.m = !1;
    b.j.connect(d, !1);
  }
  c && (a.s.addEventListener(SL.i, a.ed), a.s.addEventListener(SL.g, a.Lc), a.m.addEventListener(FL.j, a.ic), a.m.addEventListener(FL.l, a.ld), a.m.addEventListener(FL.i, a.Jb), a.m.addEventListener(FL.g, a.Gb), a.N = "URM_" + tP() + "_" + (new Date()).getTime(), a.N += ".webm", c = a.m, a = a.N, c.m = !1, c.j.connect(a, !1));
}
function rP(a) {
  VL(a.s);
  PL(a.o);
  iP(a);
}
function tP() {
  var a = (new Date()).getTime();
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(b) {
    var c = (a + 16 * Math.random()) % 16 | 0;
    a = Math.floor(a / 16);
    return ("x" == b ? c : c & 3 | 8).toString(16);
  }).toUpperCase();
}
function uP(a) {
  a.o.removeEventListener(NL.i, a.eg);
  a.o.removeEventListener(NL.g, a.Pe);
  a.o.removeEventListener(NL.j, a.pf);
}
function vP(a) {
  var b = !1;
  switch(a.g) {
    case Og.em:
      b = a.pa;
      break;
    case Og.Hk:
      b = a.pa;
      break;
    case Og.sj:
      b = a.ya;
      break;
    case Og.zl:
      b = a.ya;
  }
  if (b) {
    if (a.M && (Sn(), a.M = !1), a.g == Og.em) {
      wP(a);
    } else {
      if (a.u || (a.u = new ZO(), a.u.addEventListener(ZO.g, a.Db)), a.u.tE = nP(a), a.i || (a.i = new dP(), a.i.addEventListener(dP.g, a.Dd)), b = a.u, b.l = a.g, b.sp != WO.Pi ? console.log("Countdown is already active - state", b.sp) : (b.sp = WO.JB, b.startTime = 3, b.i = b.startTime, b.o = "" === b.o ? b.s.LI : b.o, rj(b.g, b.o.replace("~", b.i.toString())), rj(b.message, XO(b)), window.addEventListener("resize", b.u, b.O), b.el.addEventListener("pointerdown", b.m, b.O), b.message.el.addEventListener("pointerdown", 
      b.m, b.O), b.g.el.addEventListener("pointerdown", b.m, b.O), b.pb(), aP(b), b.Jd = setInterval(b.C, 1000), b.dispatchEvent(new CustomEvent(ZO.i))), (a.g == Og.Hk || a.g == Og.zl) && null != bM(a.C)) {
        b = a.i;
        var c = bM(a.C);
        let d = new MediaStream();
        d.addTrack(c.getVideoTracks()[0]);
        b.hb.srcObject = d;
        b.hb.load();
        b.width = Pr.ui;
        b.height = Pr.Jj;
        b.g.show();
        lM(b.g, c);
        b.wt();
        a.i.show();
        a.i.Fo(10, 10, a.i.width, a.i.height);
      }
    }
  }
}
function kP(a) {
  a.ib = !1;
  HL(a.l);
}
function jP(a) {
  a.Va = !1;
  HL(a.m);
}
function xP(a) {
  let b = !1;
  switch(a.g) {
    case Og.em:
      b = a.lb;
      break;
    case Og.Hk:
      b = a.lb;
      break;
    case Og.sj:
      b = a.Wb;
      break;
    case Og.zl:
      b = a.Wb;
  }
  b && (a.ea = !1, lP(a));
}
function yP(a) {
  a.l.removeEventListener(FL.j, a.Cf);
  a.l.removeEventListener(FL.l, a.oi);
  a.l.removeEventListener(FL.i, a.ze);
  a.l.removeEventListener(FL.g, a.gf);
}
function zP(a) {
  a.s.removeEventListener(SL.i, a.ed);
  a.s.removeEventListener(SL.g, a.Lc);
}
function AP(a) {
  a.m.removeEventListener(FL.j, a.ic);
  a.m.removeEventListener(FL.l, a.ld);
  a.m.removeEventListener(FL.i, a.Jb);
  a.m.removeEventListener(FL.g, a.Gb);
}
function wP(a) {
  console.log("RC: >> All set! Start recording");
  SO(a.v);
  hP(a, Pg.yl);
  if (null != a.J) {
    var b = a.o;
    console.log("start screen Recorder");
    if (null != b.g) {
      try {
        b.g.start(1000);
      } catch (c) {
        console.log("ScreenRecorder: exception", c), b.dispatchEvent(new CustomEvent(NL.g));
      }
    }
    b = a.l;
    b.i = !0;
    IL(b);
  }
  null != a.G && (TL(a.s), b = a.m, b.i = !0, IL(b));
  a.dispatchEvent(new CustomEvent(mP.i));
}
function gP(a, b) {
  a.B = b;
  a.ea = !1;
  hP(a, Pg.Pi);
  zP(a);
  uP(a);
  AP(a);
  yP(a);
  a.m.i = !1;
  jP(a);
  VL(a.s);
  a.l.i = !1;
  kP(a);
  PL(a.o);
  iP(a);
  a.u && YO(a.u, !0);
  a.mc(mP.l, {abortReason:a.B});
}
function hP(a, b) {
  var c = a.j;
  a.j = b;
  let d = L.Zf().ci();
  if (d && !d.Ce()) {
    if (a = !1, b != Pg.yl || c != Pg.te && c != Pg.Ew && c != Pg.Pi || (a = !0), si()) {
      L.kd({type:"ANNOTATE_PDF_EXTENSION_RECORDING_STATE_CHANGED", bExtensionRecordingActive:a,});
    } else {
      for (b = d.jq.v.gq(), c = a, b.G = c, a = 0; a < b.g.length; a++) {
        wF(b.g[a], !c);
      }
    }
  }
}
function lP(a) {
  zP(a);
  uP(a);
  AP(a);
  yP(a);
  TO(a.v);
  var b = "";
  let c = "";
  0 < a.ba.length && (b = a.ba.split(".")[0], c = "." + a.ba.split(".")[1]);
  var d = "", e = "";
  0 < a.N.length && (d = a.N.split(".")[0], e = "." + a.N.split(".")[1]);
  let f = [];
  if (0 < a.ba.length) {
    let k = {};
    k.strURL = b;
    k.strExtension = c;
    k.nMediaType = dM.PF;
    k.nContentType = eM.XF;
    f.push(k);
  }
  0 < a.N.length && (b = {}, b.strURL = d, b.strExtension = e, b.nMediaType = a.g == Og.em ? dM.Eu : dM.PF, b.nContentType = eM.aL, f.push(b));
  d = {};
  e = a.B != Qg.te;
  d.arrMedia = f;
  d.bAborted = e;
  d.abortReason = a.B;
  console.log(">>>> RECORDING_COMPLETED", d);
  a.dispatchEvent(new CustomEvent(mP.g, {detail:{arrMedia:f, bAborted:e, abortReason:a.B}}));
}
function BP(a) {
  a.j == Pg.Pi ? console.log("!!! stopRecording: rec already stopped") : (!a.i || a.g != Og.Hk && a.g != Og.zl || (a.i.kn(), bP(a.i)), TO(a.v), a.dispatchEvent(new CustomEvent(mP.j)), console.log("RC: >> Stopping recording, waiting for upload to complete..."), a.ea = !0, hP(a, Pg.Pi), a.m.i = !1, VL(a.s), a.l.i = !1, PL(a.o), iP(a));
}
class mP extends ph {
  static get m() {
    return "ExtensionRecordingController_EVT_STREAM_FETCH_ERROR";
  }
  static get g() {
    return "ExtensionRecordingController_EVT_REC_COMPLETED";
  }
  static get i() {
    return "ExtensionRecordingController_EVT_REC_STARTED";
  }
  static get j() {
    return "ExtensionRecordingController_EVT_WAITING_FOR_UPLOAD_TO_FINISH";
  }
  static get l() {
    return "ExtensionRecordingController_EVT_ABORT_RECORDING";
  }
  constructor() {
    super();
    this.M = !1;
    this.N = this.ba = "";
    this.v = new VO();
    this.G = this.J = null;
    this.g = Og.te;
    this.j = Pg.te;
    this.ia = new ZL(this);
    this.C = new cM(this);
    this.o = new NL();
    this.l = new FL();
    this.ya = !1;
    this.s = new SL();
    this.m = new FL();
    this.ea = this.lb = this.Wb = this.Va = this.ib = this.pa = !1;
    this.B = Qg.te;
    this.Ha = !1;
    this.Cf = this.Mz.bind(this);
    this.oi = this.Oz.bind(this);
    this.ze = this.qv.bind(this);
    this.gf = this.Lz.bind(this);
    this.ic = this.qm.bind(this);
    this.ld = this.Bj.bind(this);
    this.Jb = this.Xi.bind(this);
    this.Gb = this.Qk.bind(this);
    this.eg = this.st.bind(this);
    this.Pe = this.Tp.bind(this);
    this.pf = this.An.bind(this);
    this.ed = this.Nl.bind(this);
    this.Lc = this.Wi.bind(this);
    this.Db = this.Th.bind(this);
    this.Dd = this.Rp.bind(this);
  }
  Rp() {
    this.u && this.u.sp == WO.JB && $O(this.u);
  }
  zH() {
    console.log("RC: screen stream terminated");
    fP(this, Qg.KB);
  }
  VG() {
    console.log("RC: user media stream terminated");
    fP(this, Qg.UF);
  }
  st(a) {
    JL(this.l, a.detail.data);
  }
  Tp() {
    console.log("RC: screen recorder error");
    fP(this, Qg.IB);
  }
  An() {
    if ((this.j == Pg.yl || this.j == Pg.Gk) && this.g == Og.sj) {
      var a = this.l;
      a.o = !0;
      a.l = [];
    }
  }
  Mz() {
    this.ib ? console.log("!? screen uploader already connected") : (console.log("RC: screen uploader connected"), this.ya = this.ib = !0, vP(this));
  }
  Oz() {
    console.log("RC: screen uploader disconnected");
    this.ya = !1;
    kP(this);
    jP(this);
    fP(this, Qg.Vy);
  }
  qv() {
    console.log("RC: screen upload completed!");
    kP(this);
    this.Wb = !0;
    xP(this);
  }
  Lz() {
    console.log("RC: screen upload failed!");
    kP(this);
    jP(this);
    fP(this, Qg.MB);
  }
  Nl(a) {
    JL(this.m, a.detail.data);
  }
  Wi() {
    console.log("RC: media recorder error");
    fP(this, Qg.IB);
  }
  qm() {
    this.Va ? console.log("!? user media uploader already connected") : (console.log("RC: user media uploader connected"), this.pa = this.Va = !0, vP(this));
  }
  Bj() {
    console.log("RC: user media uploader disconnected");
    this.pa = !1;
    kP(this);
    jP(this);
    fP(this, Qg.Vy);
  }
  Xi() {
    console.log("RC: user media upload completed!");
    jP(this);
    this.lb = !0;
    xP(this);
  }
  Qk() {
    console.log("RC: user media upload failed!");
    kP(this);
    jP(this);
    fP(this, Qg.MB);
  }
  Th() {
    if (this.i && (this.g == Og.Hk || this.g == Og.zl)) {
      var a = this.i;
      a.g.kn();
      jM(a.g);
    }
    wP(this);
  }
  gb() {
    this.j != Pg.Gk && this.j != Pg.yl || BP(this);
    this.i && (this.i.removeEventListener(dP.g, this.Dd), this.i.gb());
    this.u && (this.u.removeEventListener(ZO.g, this.Db), this.u.U());
    iP(this);
  }
}
;function Vw(a) {
  a.Ji ? (console.log("notify edit mode: stop rec clicked"), -1 != window.location.href.indexOf("docs.google.com/presentation/d/") && window != window.top && (L.sa({type:"StopRecClickedInPresentation"}, null), Vn("Uploading and saving recording to content library...", null))) : a.Xj && a.cg && a.dispatchEvent(new CustomEvent(CP.m));
}
function cE(a, b, c) {
  if ((a.Xj || L.Zf().Ce()) && !a.cg) {
    a.dispatchEvent(new CustomEvent(CP.l, {detail:{bScreen:b, bAudio:!0, bVideo:c}}));
    var d = document.getElementById("annotate-highlight-plugin-recording-webcam"), e = document.getElementById("annotate-highlight-plugin-recording-toolbar");
    b && c ? (a.pw = !0, a.Gq = !0, d.style.display = "block", e.style.width = a.yB + 32 + "px") : (a.pw = !1, a.Gq = !1, d.style.display = "none", e.style.width = a.yB + "px");
    DP(a, a.Gq);
  }
}
function EP(a, b) {
  a = !a.Xj || a.Xj && a.cg;
  b.style.color = "#FF0000";
  a && (b.style.color = "#FFA0A0");
}
function FP(a, b) {
  a.Eq = !1;
  GP(!1);
  b && !a.Ji && HP();
}
function HP(a) {
  setTimeout(() => {
    -1 != window.location.href.indexOf("docs.google.com/presentation/d/") && window == window.top && L.sa({type:"UpdateRecordingUIStateInPresentation", recordingUIState:IP(), bWaitingForUpload:a ? !0 : !1}, null);
  }, 100);
}
function JP(a, b) {
  a.cg = !1;
  EP(a, document.getElementById("annotate-highlight-plugin-start-recording"));
  FP(a, !1);
  document.getElementById("annotate-highlight-plugin-recording-toolbar").style.display = "none";
  b && !a.Ji && HP();
}
function DP(a, b) {
  var c = document.getElementById("annotate-highlight-plugin-recording-webcam");
  c.className = b ? "extension_icon extension_icon-webcam_on" : "extension_icon extension_icon-webcam_off";
  c.title = b ? "Hide" : "Show";
  a.dispatchEvent(new CustomEvent(CP.o));
}
function KP(a, b) {
  a.cg = !0;
  a.qp = !1;
  EP(a, document.getElementById("annotate-highlight-plugin-start-recording"));
  LP(a.qp);
  a.dispatchEvent(new CustomEvent(CP.g));
  b && !a.Ji && HP();
  FP(a, !1);
  DP(a, a.Gq);
  document.getElementById("annotate-highlight-plugin-recording-toolbar").style.display = "block";
  b && !a.Ji && HP();
}
function GP(a) {
  var b = document.getElementById("annotate-highlight-plugin-pause-recording");
  a ? (b.classList.add("AnnotateBlinkAnimation"), b.title = "Resume recording") : (b.classList.remove("AnnotateBlinkAnimation"), b.title = "Pause recording");
}
function MP(a, b) {
  a.Eq = !0;
  GP(!0);
  b && !a.Ji && HP();
}
function LP(a) {
  var b = document.getElementById("annotate-highlight-plugin-recording-mic");
  b.className = a ? "extension_icon extension_icon-mute" : "extension_icon extension_icon-mic";
  b.title = a ? "Unmute" : "Mute";
  if (b = document.getElementById("annotate-highlight-plugin-recording-mic-volume-bar")) {
    b.style.visibility = a ? "hidden" : "visible";
  }
}
function NP(a, b) {
  if (document.getElementById("annotate-highlight-plugin-recording-toolbar")) {
    if (a.Ji = !0, b.bRecordingOn) {
      KP(a, !1);
      b.bRecordingPaused && MP(a, !1);
      SO(a.g);
      a.g.j = b.startTimestamp;
      a.g.g = b.timestamp;
      b.bPaused && (a.g.i = !0);
      let c = document.getElementById("annotate-highlight-plugin-recording-duration");
      c.innerHTML = UO(a.g);
      a.u = setInterval(() => {
        c ? c.innerHTML = UO(a.g) : clearInterval(a.u);
      }, 1000);
      LP(b.bMuted);
      let d = document.getElementById("annotate-highlight-plugin-recording-mic-volume-bar"), e = document.getElementById("annotate-highlight-plugin-recording-mic");
      a.i = setInterval(() => {
        var f = window.localStorage.getItem("mic-volume-level");
        if (f) {
          var k = (20 + 10 * Math.log(parseFloat(f)) / Math.log(10)) / 20;
          d && e ? (f = parseInt(e.style.top) + e.offsetHeight, k = Math.floor(24 * k), d.style.height = k + "px", d.style.top = f - k + "px") : clearInterval(a.i);
        }
      }, 500);
    } else {
      JP(a, !1), clearInterval(a.u), clearInterval(a.i);
    }
  }
}
class CP extends EventTarget {
  static get l() {
    return "RecordingUIManager_EVT_START_REC_CLICKED";
  }
  static get m() {
    return "RecordingUIManager_EVT_STOP_REC_CLICKED";
  }
  static get i() {
    return "RecordingUIManager_EVT_PAUSE_REC_CLICKED";
  }
  static get j() {
    return "RecordingUIManager_EVT_RESUME_REC_CLICKED";
  }
  static get g() {
    return "RecordingUIManager_EVT_MIC_MUTE_UNMUTE";
  }
  static get o() {
    return "RecordingUIManager_EVT_WEBCAM_ON_OFF";
  }
  constructor() {
    super();
    this.Xj = !0;
    this.Gq = this.pw = this.qp = this.Eq = this.cg = !1;
    this.yB = 0;
    this.Ji = !1;
    this.g = new VO();
  }
}
;class OP {
  constructor(a, b, c, d) {
    this.i = a;
    this.g = b;
    this.l = c;
    this.j = d;
  }
}
function ew() {
  var a = Jv.g.v;
  a = a.g - a.j;
  return 0 < a ? a : 0;
}
function iw(a) {
  console.log(">> Cleared recorded media from Recording controller");
  a.i = null;
  let b = L.Ye();
  b && b.ae() && b.ae().Ae && b.ae().Ae.Xr(a.i);
}
function IP() {
  var a = Jv;
  return {bRecordingOn:a.Pc.cg, bRecordingPaused:a.Pc.Eq, startTimestamp:a.g.v.j, timestamp:a.g.v.g, bPaused:a.g.v.i, bMuted:a.Pc.qp};
}
function PP() {
  var a = Jv.g;
  return eP(a) && a.g == Og.sj;
}
function QP() {
  var a = Jv;
  return eP(a.g) || a.g.j == Pg.Ew;
}
function RP(a) {
  a.v && (a.v.stop(), a.v.removeEventListener(kM.g, a.M), console.log("SoundMeter stopped"));
}
function SP(a) {
  a.u && clearInterval(a.u);
  a.u = null;
}
function TP(a) {
  let b = null;
  a == Qg.IB || a == Qg.MB ? b = "Could not record media." : a == Qg.Vy && (b = "Poor internet connection. Recording Stopped<br>Some data may be lost");
  return b;
}
function UP(a) {
  console.log("SoundMeter audio stream got");
  a.v.addEventListener(kM.g, a.M);
  mM(a.v, nP(a.g), b => {
    b ? (console.log("Error while starting SoundMeter!", b), RP(a)) : console.log("SoundMeter started");
  });
}
function VP(a, b, c) {
  a.l ? a.m = b : (a.i = b, (b = L.Ye()) && b.ae() && b.ae().Ae && b.ae().Ae.Xr(a.i));
  c && a.s.i();
}
function WP() {
  var a = Jv;
  console.log(">> Cleared clip media from Recording controller");
  a.m = null;
}
class XP extends ph {
  constructor(a) {
    super();
    this.G = Xg();
    this.s = a;
    this.Pc = new CP();
    this.g = new mP();
    this.j = this.s.j().ci();
    this.Va = this.ed.bind(this);
    this.ib = this.J.bind(this);
    this.ea = this.Gb.bind(this);
    this.Ha = this.Lc.bind(this);
    this.ba = this.Jb.bind(this);
    this.C = this.C.bind(this);
    this.Pc.addEventListener(CP.l, this.Va);
    this.Pc.addEventListener(CP.m, this.ib);
    this.Pc.addEventListener(CP.i, this.ea);
    this.Pc.addEventListener(CP.j, this.Ha);
    this.Pc.addEventListener(CP.g, this.ba);
    this.Pc.addEventListener(CP.o, this.C);
    this.pa = this.ld.bind(this);
    this.ya = this.Dd.bind(this);
    this.ia = this.ic.bind(this);
    this.lb = this.Pe.bind(this);
    this.N = this.Db.bind(this);
    this.g.addEventListener(mP.i, this.pa);
    this.g.addEventListener(mP.j, this.lb);
    this.g.addEventListener(mP.m, this.ya);
    this.g.addEventListener(mP.g, this.ia);
    this.g.addEventListener(mP.l, this.N);
    this.i = null;
    this.B = [];
    this.v = this.o = this.u = null;
    this.M = this.Wb.bind(this);
    this.l = !1;
    this.m = null;
  }
  ed(a) {
    this.l = !1;
    if (null == this.o) {
      try {
        this.o = new (window.AudioContext || window.webkitAudioContext)();
      } catch (b) {
        console.log("Web Audio API not supported!!!");
      }
      this.o && (this.v = new kM(this.o));
    }
    a = a.detail;
    sP(this.g, a.bAudio, a.bVideo, a.bScreen);
  }
  J() {
    BP(this.g);
  }
  Gb() {
    var a = this.g;
    if (a.j == Pg.Gk) {
      console.log("!!! pauseRecording: rec already paused");
    } else {
      if (a.j == Pg.Pi) {
        console.log("!!! pauseRecording: rec already stopped, may be waiting for upload to finish");
      } else {
        TO(a.v);
        console.log("RC: >> Pausing recording");
        a.j = Pg.Gk;
        if (null != a.J) {
          var b = a.o;
          console.log("pause Screen Recorder");
          if (null != b.g) {
            try {
              b.g.pause();
            } catch (c) {
              console.log("ScreenRecorder: exception", c), b.dispatchEvent(new CustomEvent(NL.g));
            }
          }
        }
        if (null != a.G && (a = a.s, console.log("pause media Recorder"), null != a.g)) {
          try {
            a.g.pause();
          } catch (c) {
            console.log("WebRTCMediaRecorder: exception", c), a.dispatchEvent(new CustomEvent(SL.g));
          }
        }
      }
    }
  }
  Lc() {
    var a = this.g;
    if (a.j == Pg.yl) {
      console.log("!!! resumeRecording: rec already resumed");
    } else {
      var b = a.v;
      if (b.i) {
        b.i = !1;
        let c = Date.now();
        b.j = b.j + c - b.g;
        b.g = c;
      }
      console.log("RC: >> Resuming recording");
      a.j = Pg.yl;
      if (null != a.J && (b = a.o, console.log("resume Screen Recorder"), null != b.g)) {
        try {
          b.g.resume();
        } catch (c) {
          b.dispatchEvent(new CustomEvent(NL.g));
        }
      }
      if (null != a.G && (a = a.s, console.log("resume media Recorder"), null != a.g)) {
        try {
          a.g.resume();
        } catch (c) {
          a.dispatchEvent(new CustomEvent(SL.g));
        }
      }
    }
  }
  Jb() {
    var a = this.g;
    if (null != a.C.g || null != a.ia.g) {
      a = a.C, a.j = this.Pc.qp, bM(a) && a.g.getAudioTracks() && 0 < a.g.getAudioTracks().length && (a.g.getAudioTracks()[0].enabled = !a.j, console.log("Updated mute state of audio track, bMuted", !a.g.getAudioTracks()[0].enabled));
    }
  }
  C() {
    var a = this.g;
    a.i && "block" == a.i.ra.style.display ? a.g == Og.zl ? cP(a.i, this.Pc.pw && this.Pc.Gq) : cP(a.i, !0) : a.i && cP(a.i, !0);
  }
  Db(a) {
    this.o && RP(this);
    SP(this);
    JP(this.Pc, !1);
    a = a.detail;
    let b = a.abortReason, c = TP(b);
    b == Qg.Vy && (c = "Recording stopped, poor internet connection.");
    b == Qg.KB && (c = "Screen recording has been aborted");
    c && this.s.g(c, null);
    this.j && this.j.Ce() && vw(this.j);
    this.mc(this.G, a);
  }
  Dd(a) {
    this.s.g(a.detail.error, null);
  }
  ld() {
    this.o && UP(this);
    SP(this);
    let a = document.getElementById("annotate-highlight-plugin-recording-duration");
    a.innerHTML = "00:00";
    this.u = setInterval(() => {
      let b = UO(this.g.v);
      a.innerHTML = b;
      this.j && this.j.pq(b);
    }, 1000);
    KP(this.Pc, !0);
    this.j && gE(this.j);
    this.dispatchEvent(new CustomEvent(mP.i));
  }
  Pe() {
    Pw() || Vn("Uploading recorded media...", null);
    this.s.l();
  }
  ic(a) {
    this.o && RP(this);
    SP(this);
    JP(this.Pc, !0);
    a = a.detail;
    let b = a.arrMedia, c = a.abortReason, d = null;
    a.bAborted && (d = TP(c));
    this.j && this.j.Ce() ? d ? this.s.g(d, () => {
      eE(this.j, d, b);
    }) : eE(this.j, d, b) : d ? (VP(this, b, !1), this.s.g(d, () => {
      this.s.i();
    })) : VP(this, b, !0);
    this.dispatchEvent(new CustomEvent(mP.g));
  }
  Wb(a) {
    a = a.detail.micVolume;
    0.01 > a && (a = 0.01);
    1 < a && (a = 1);
    var b = (20 + 10 * Math.log(a) / Math.log(10)) / 20, c = document.getElementById("annotate-highlight-plugin-recording-mic-volume-bar"), d = document.getElementById("annotate-highlight-plugin-recording-mic");
    if (c && d && (d = parseInt(d.style.top) + d.offsetHeight, b = Math.floor(24 * b), c.style.height = b + "px", c.style.top = d - b + "px", this.j && (d = this.j, c = b, d.Ce()))) {
      if (si()) {
        d.m.kd({type:"ANNOTATE_PDF_UPDATE_VOLUME_BAR_HEIGHT", height:c});
      } else {
        if (b = d.i ? d.i : d.j) {
          if (b = b.lh()) {
            d = b.j.rd() + b.j.wb(), b.o.Mb(c), b.o.Ee(d - c);
          }
        }
      }
    }
    window.localStorage.setItem("mic-volume-level", a);
  }
  nj() {
    this.i = null;
    this.B = [];
  }
  gb() {
    SP(this);
    this.v && RP(this);
    this.Pc.removeEventListener(CP.l, this.Va);
    this.Pc.removeEventListener(CP.m, this.ib);
    this.Pc.removeEventListener(CP.i, this.ea);
    this.Pc.removeEventListener(CP.j, this.Ha);
    this.Pc.removeEventListener(CP.g, this.ba);
    this.Pc.removeEventListener(CP.o, this.C);
    this.g.removeEventListener(mP.j, this.lb);
    this.g.removeEventListener(mP.i, this.pa);
    this.g.removeEventListener(mP.m, this.ya);
    this.g.removeEventListener(mP.g, this.ia);
    this.g.removeEventListener(mP.l, this.N);
    this.g.gb();
    this.o = this.v = null;
  }
}
;function UH(a, b, c) {
  let d = !1;
  a.g && (a = a.g.Df) && (b = a.indexOf(b), c = a.indexOf(c), c == b - 1 && 0 <= c || c == b + 1 && c < a.length) && (d = !0);
  return d;
}
function OH(a, b) {
  if (a.g && !(0 >= a.i.length)) {
    var c = a.g.Af, d = a.i[0].slideId;
    b && c != d && !UH(a, c, d) ? (a = a.g, QH(a, a.Df.indexOf(d))) : a.g.dm && (d = a.g, d.ue && d.ue({type:"annotateSlideChangeSyncEvent", evtData:a.i, frameId:d.gh[d.Zc]}, null), a.i = []);
  }
}
class TH {
  constructor(a) {
    this.l = null;
    this.m = !1;
    this.g = a;
    this.i = [];
    this.j = null;
  }
  U() {
    this.l = null;
    this.m = !1;
    this.i = [];
  }
}
;function YP(a, b) {
  b && (a.j.push(...b), -1 == a.l && (a.l = setInterval(a.o.bind(a), 10)));
}
function ZP(a) {
  -1 != a.l && (clearInterval(a.l), a.l = -1);
}
function $P(a, b) {
  let c = -1;
  a.Df && (c = a.Df.indexOf(b));
  return c;
}
function aQ(a, b, c) {
  let d = !1;
  a.Df && (c = a.Df.indexOf(c), c > a.Df.indexOf(b) && c < a.Df.length && (d = !0));
  return d;
}
function bQ(a, b, c) {
  let d = !1;
  a.Df && (c = a.Df.indexOf(c), c < a.Df.indexOf(b) && 0 <= c && (d = !0));
  return d;
}
function cQ() {
  if (document) {
    var a = new KeyboardEvent("keydown", {shiftKey:!1, ctrlKey:!1, metaKey:!1, key:"ArrowRight", keyCode:39, code:"ArrowRight",});
    a.bRemoteEvt = !0;
    document.dispatchEvent(a);
  }
}
function dQ() {
  if (document) {
    var a = new KeyboardEvent("keydown", {shiftKey:!1, ctrlKey:!1, metaKey:!1, key:"ArrowLeft", keyCode:37, code:"ArrowLeft",});
    a.bRemoteEvt = !0;
    document.dispatchEvent(a);
  }
}
function eQ(a) {
  a.g && (a.g.bIgnorePrevSlide = !0);
}
function fQ(a) {
  return a.g && "bAnimationChanged" in a.g ? a.g.bAnimationChanged : !1;
}
function gQ(a, b) {
  let c = !1;
  0 < a.j.length && b == a.j[0].slideId && (c = !0);
  return c;
}
function hQ(a) {
  a.g && (a.g.bIgnoreAnimations = !0);
}
class iQ {
  constructor(a) {
    this.Df = a;
    this.g = null;
    this.j = [];
    this.l = -1;
    this.i = 0;
    this.Af = nk();
    this.direction = jQ;
    this.m = 0;
  }
  o() {
    if (null == this.g && 0 >= this.j.length) {
      ZP(this);
    } else {
      if (!this.g && 0 < this.j.length && (this.g = this.j.shift()), this.g) {
        var a = this.g.slideId, b = this.g.prevSlideId;
        let d = this.g.direction, e = this.g.animationIdx;
        var c = nk();
        "" == c && (c = location.href, c = c.substring(c.lastIndexOf("slide=")).substring(9));
        0 != $P(this, a) || d != jQ || 0 != e || c == a && 0 == this.i && this.direction == d || (this.g.animationIdx = -25, this.g.direction = kQ, this.g.bChangeDirectionToForward = !0, d = this.g.direction, e = this.g.animationIdx);
        b && (d != jQ || aQ(this, b, a) || (b = null), d != kQ || bQ(this, b, a) || (b = null));
        this.Af != c && (this.i = 0);
        this.Af = c;
        console.log("Animation apply - curSlideId", c, "slideId", a, "direction", d, "animationIdx", e, b, this.direction);
        if (!b && (d != this.direction && c == a || d == jQ && bQ(this, c, a) || d == kQ && aQ(this, c, a))) {
          b = $P(this, a);
          if (-1 == b) {
            this.i = 0;
            this.g = null;
            this.direction = jQ;
            return;
          }
          d == jQ ? 0 < b ? b = this.Df[b - 1] : (b = a, this.g && (this.g.forceToFirstAnim = !0)) : b = this.Df[b + 1];
          this.g.prevSlideId = b;
        }
        if (b && !(this.g && "bIgnorePrevSlide" in this.g && this.g.bIgnorePrevSlide)) {
          if (c != b) {
            aQ(this, c, b) ? cQ() : bQ(this, c, b) && dQ();
            return;
          }
          if (this.g && "forceToFirstAnim" in this.g && this.g.forceToFirstAnim) {
            -10 < this.i ? (dQ(), this.i--) : (this.i = 0, eQ(this));
            return;
          }
        }
        eQ(this);
        c == a ? this.g && "bIgnoreAnimations" in this.g && this.g.bIgnoreAnimations ? (this.i = this.m, this.m = 0, this.g = null) : (this.g && (this.g.bAnimationChanged = !0), this.i < e ? (cQ(), this.i++) : this.i > e ? (dQ(), this.i--) : (this.g && this.g.bChangeDirectionToForward && (this.i = 0, this.direction = jQ), this.g = null)) : aQ(this, c, a) ? (a = !0, fQ(this) && (gQ(this, c) ? a = !1 : (this.m = this.i + 1, hQ(this))), a ? cQ() : this.g = null, this.i = 0, this.direction = jQ) : d == 
        kQ ? (a = !0, fQ(this) && (gQ(this, c) ? a = !1 : (this.m = this.i - 1, hQ(this))), a ? (dQ(), this.i = 0, this.direction = kQ) : (this.g = null, this.i = 0, this.direction = jQ)) : (this.g = null, this.i = 0, this.direction = jQ);
      }
    }
  }
  U() {
    this.g = null;
    this.j = [];
    ZP(this);
    this.m = this.i = 0;
  }
}
;function lQ() {
  var a = mQ;
  a.g || (a.g = new nQ(a.j), a.g && a.g.addEventListener(nQ.g, a.i));
  a = a.g;
  a.M || (a.M = !0, oQ(a, !0), a.m || (a.m = new MutationObserver(a.Ha.bind(a))), a.v || (a.v = ok()), a.v && a.m.observe(a.v, {childList:!0, subtree:!0, attributes:!0, attributeFilter:["style"], attributeOldValue:!0,}));
}
function pQ(a, b) {
  a.g ? (a = a.g, console.log("Slide update animation bSendEvents", b), a.N = b) : console.log("Warning!!! Slide presentationAnimationListener not set");
}
function qQ(a) {
  var b = mQ;
  b.g && (b.g.Af = a);
}
function rQ(a) {
  var b = mQ;
  b.g && (b.g.ea = a, b.g.s = jQ);
}
function sQ() {
  var a = mQ;
  return a.g ? a.g.Af : null;
}
class tQ extends ph {
  static get g() {
    return "PRESENTATION_ANIMATION_EVENT";
  }
  constructor() {
    super();
    this.j = L.Jx();
    this.g = null;
    this.i = this.i.bind(this);
  }
  i(a) {
    this.dispatchEvent(new CustomEvent(tQ.g, {detail:a.detail}));
  }
  U() {
  }
}
;var jQ = 1, kQ = 2;
function uQ(a, b) {
  let c = {curPage:a.Af, curAnimation:a.j, direction:a.s};
  console.log("Animation State page", c.curPage, "index", c.curAnimation, "direction", a.s == jQ ? "forward" : "backward");
  b && (c.prevPage = a.ea);
  return c;
}
function oQ(a, b) {
  window && (b ? (window.addEventListener("pointerdown", a.J, {capture:!0, passive:!0}), window.addEventListener("pointerup", a.G, {capture:!0, passive:!0}), window.addEventListener("wheel", a.C, {capture:!0, passive:!0})) : (window.removeEventListener("pointerdown", a.J, {capture:!0}), window.removeEventListener("pointerup", a.G, {capture:!0}), window.removeEventListener("wheel", a.C, {capture:!0})));
  b ? (document.addEventListener("keydown", a.u, {capture:!0, passive:!1}), document.addEventListener("keyup", a.B, {capture:!0, passive:!1})) : (document.removeEventListener("keydown", a.u, {capture:!0}), document.removeEventListener("keyup", a.B, {capture:!0}));
}
function vQ(a, b) {
  wQ(a, null, null);
  b && (a.i = !1);
}
function xQ(a) {
  null != a.g && (3 == a.g ? a.ba = 3 : 1 == a.g ? (a.ba = jQ, a.j++) : (a.ba = kQ, a.j--), vQ(a, !1), a.l = 0, yQ(a));
}
function zQ(a, b) {
  a.i ? vQ(a, !0) : wQ(a, 1, b);
}
function AQ(a, b) {
  a.i ? vQ(a, !0) : wQ(a, 2, b);
}
function wQ(a, b, c) {
  a.g && (a.pa = a.g);
  a.o && (a.ia = a.o);
  a.g = b;
  a.o = c;
}
function yQ(a) {
  if (a.N) {
    let b = uQ(a, !1);
    console.log("Slide event", b);
    a.dispatchEvent(new CustomEvent(nQ.g, {detail:b}));
  }
}
class nQ extends ph {
  static get g() {
    return "EVT_SLIDE_ANIMATION";
  }
  constructor(a) {
    super();
    this.J = this.J.bind(this);
    this.G = this.G.bind(this);
    this.C = this.C.bind(this);
    this.u = this.u.bind(this);
    this.B = this.B.bind(this);
    this.ya = a;
    this.M = this.N = !1;
    this.ea = this.Af = null;
    this.j = 0;
    this.pa = this.g = this.v = this.m = null;
    this.ba = this.s = jQ;
    this.ia = this.o = null;
    this.i = !1;
    this.l = 0;
  }
  Ha(a) {
    if (a) {
      let b = !1, c = !1, d, e = a.length;
      for (let f = 0; f < e; f++) {
        if (d = a[f], "childList" == d.type) {
          b = !0;
          break;
        } else {
          "attributes" == d.type && (c = !0);
        }
      }
      b ? (this.i = !1, null == this.g ? 2 == this.pa && 3 == this.ia && (this.i = !1) : 2 == this.o && (this.i = !0), this.s = 2 == this.g ? kQ : jQ, a = location.href, a = a.substring(a.lastIndexOf("slide=")).substring(9), null == this.g && 0 > this.j && 3 != this.ba && (this.s = kQ), vQ(this, !1), this.l = 0, a && (this.ea = this.Af, this.Af = a, this.j = 0, yQ(this))) : c && (1 == this.g ? 0 <= this.l ? xQ(this) : this.l++ : 2 == this.g && xQ(this));
    }
  }
  J(a) {
    a: {
      a = a.target;
      let c = document.getElementsByClassName("punch-viewer-navbar-menu-content");
      if (a) {
        for (var b = 0; b < c.length; ++b) {
          let d = c[b].querySelectorAll('.goog-menuitem.goog-option[role="menuitemradio"]');
          for (let e = 0; e < d.length; ++e) {
            if ("true" !== d[e].getAttribute("aria-checked") && (d[e] === a || d[e].contains(a))) {
              a = !0;
              break a;
            }
          }
        }
      }
      a = !1;
    }
    a && (console.log("Handle Jump"), this.i ? vQ(this, !0) : wQ(this, 3, 0));
  }
  G(a) {
    let b = 1;
    if (qk(a.target)) {
      ki && 1 == ki.g && zQ(this, b);
    } else {
      b = 3;
      a: {
        var c = a.target;
        var d = document.getElementsByClassName("punch-viewer-navbar-prev");
        if (d && d.length && (d = d[0]) && (d == c || d.contains(c))) {
          c = !0;
          break a;
        }
        c = !1;
      }
      if (c) {
        AQ(this, b);
      } else {
        a: {
          a = a.target;
          if ((c = document.getElementsByClassName("punch-viewer-navbar-next")) && c.length && (c = c[0]) && (c == a || c.contains(a))) {
            a = !0;
            break a;
          }
          a = !1;
        }
        a && zQ(this, b);
      }
    }
  }
  C(a) {
    if (!ki || 1 == ki.g) {
      var b;
      (b = qk(a.target)) || (b = (b = a.target) && lh(b, "punch-viewer-svgpage") ? !0 : !1);
      b && (0 > a.deltaY ? AQ(this, 2) : 0 < a.deltaY && zQ(this, 2));
    }
  }
  u(a) {
    if (!(this.ya.B() || a.ctrlKey || a.shiftKey || a.altKey)) {
      var b = a.keyCode;
      78 == b || 32 == b || 39 == b || 40 == b || 34 == b || 13 == b ? zQ(this, 3) : (a = a.keyCode, 80 != a && 37 != a && 38 != a && 33 != a || AQ(this, 3));
    }
  }
  B() {
  }
  U() {
    this.M && (this.M = !1, oQ(this, !1), this.m && this.m.disconnect(), vQ(this, !0), this.l = 0);
    this.N = !1;
    this.ea = this.Af = null;
    this.j = 0;
    this.v = this.m = this.ia = this.o = null;
    vQ(this, !0);
    this.l = 0;
  }
}
;var jt = 3, YM = 10;
function lC(a) {
  return a.g && "visible" == a.g.style.visibility ? !0 : !1;
}
function BQ(a) {
  return a.g ? !0 : !1;
}
function CQ(a, b) {
  if (a.g) {
    var c = {type:"iframeRequestFromExtension", actionData:b};
    (a = a.g ? a.g.contentWindow : null) && a.postMessage(c, M.ba);
    console.log("###Send Request >>> ", b);
  }
}
function DQ(a, b) {
  a.g && (b ? (a.g.style.visibility = "visible", a.g.style.opacity = "1") : (a.g.style.visibility = "hidden", a.g.style.opacity = "0"));
}
function EQ(a) {
  a.g || (a.g = document.createElement("iframe"), a.g.id = "AnnotateExtensionIframe", a.g.classList.add("AnnotateExtensionIframe"), a.g.allow = "camera; fullscreen", ik(a.g), DQ(a, !1), document.body.appendChild(a.g), window.addEventListener("resize", a.o, a.O));
}
function FQ(a) {
  a.g && (a.m ? console.log("annotate iframe: loading already in progress...(ignore load)") : (a.g.setAttribute("src", M.ba), console.log("annotate iframe: loading..."), a.j || (a.m = !0, a.l && (clearTimeout(a.l), a.l = null), a.l = setTimeout(() => {
    a.m = !1;
    console.log("annotate iframe: loading failed... timeout");
  }, 3E4))));
}
function GQ(a) {
  var b = mC;
  a && a.chromeExtensionCommand && (console.log("###process request >>> ", a), parseInt(a.chromeExtensionCommand) == Kg.up && (b.j = !0, b.l && (clearTimeout(b.l), b.l = null), b.m = !1, console.log("annotate iframe: loaded...")), b.dispatchEvent(new CustomEvent(HQ.g, {detail:a})));
}
function IQ(a) {
  a.g.style.top = window.innerHeight - a.g.offsetHeight - 48 + "px";
  a.g.style.left = -1 < a.s && 0 < a.v ? a.s + (a.v - a.g.offsetWidth) / 2 + "px" : (window.innerWidth - a.g.offsetWidth) / 2 + "px";
  JQ(a);
}
function KQ(a) {
  if (BQ(a) && 2 == a.i) {
    var b = 700;
    700 > window.visualViewport.width && (b = window.visualViewport.width);
    LQ(a, b + "px", "100%");
    NQ(a);
  }
}
function OQ(a) {
  BQ(a) && (LQ(a, "500px", "281.25px"), NQ(a));
}
function PQ(a) {
  let b = 1200, c = 700;
  c > window.visualViewport.height && (c = window.visualViewport.height);
  b > window.visualViewport.width && (b = window.visualViewport.width);
  LQ(a, b + "px", c + "px");
  NQ(a);
}
function QQ(a) {
  BQ(a) && 4 == a.i && (LQ(a, "420px", "494px"), NQ(a));
}
function RQ(a) {
  if (BQ(a) && 9 == a.i) {
    var b = 420;
    420 > window.visualViewport.width && (b = window.visualViewport.width);
    LQ(a, b + "px", "260px");
    NQ(a);
  }
}
function NQ(a) {
  a.g.style.top = (window.visualViewport.height - a.g.offsetHeight) / 2 + "px";
  a.g.style.left = (window.visualViewport.width - a.g.offsetWidth) / 2 + "px";
  JQ(a);
}
function LQ(a, b, c) {
  a.g && (a.g.style.width = b, a.g.style.height = c);
}
function SQ(a) {
  if (a.g && a.i == YM) {
    var b = 420;
    700 > window.visualViewport.width && (b = window.visualViewport.width);
    LQ(a, b + "px", "550px");
    NQ(a);
  }
}
function JQ(a) {
  let b = {};
  b.top = parseFloat(a.g.style.top);
  b.left = parseFloat(a.g.style.left);
  a.dispatchEvent(new CustomEvent(HQ.i, {detail:b}));
}
class HQ extends ph {
  static get g() {
    return "EVT_PROCESS_IFRAME_REQUEST";
  }
  static get i() {
    return "EVT_REPOSITION_IFRAME";
  }
  constructor() {
    super();
    this.g = null;
    this.j = !1;
    this.i = 1;
    this.O = {capture:!0, passive:!1};
    this.o = this.o.bind(this);
    this.s = -1;
    this.v = 0;
    M.addEventListener(Gh.g, this.u.bind(this));
    M.addEventListener(Gh.i, this.B.bind(this));
    this.m = !1;
    this.l = null;
  }
  B(a) {
    a = (a = a.detail) && "bCCLConnected" in a ? a.bCCLConnected : !1;
    BQ(this) && this.j && CQ(this, {bCCLConnected:a});
  }
  u(a) {
    a = (a = a.detail) && "bLoggedInUserAccountChange" in a ? a.bLoggedInUserAccountChange : !1;
    Jh() && !a || !lC(this) || DQ(this, !1);
  }
  o(a) {
    lC(this) && a.target == window && (5 == this.i ? IQ(this) : 2 == this.i ? KQ(this) : this.i == jt ? OQ(this) : 6 == this.i || 7 == this.i || 8 == this.i ? PQ(this) : 4 == this.i ? QQ(this) : 9 == this.i ? RQ(this) : NQ(this));
  }
  U() {
    this.m = this.j = !1;
    window.removeEventListener("resize", this.o, this.O);
    this.g && (this.g.remove(), this.g = null);
  }
}
;class HM extends vN {
}
;function TQ(a) {
  a.J && clearInterval(a.J);
}
function UQ(a) {
  a.Ha = !1;
  var b = S.i;
  if (b) {
    a.j = 1;
    let d = b.ma, e = S.j;
    b = b.sk();
    a.m && (d = a.m.baseAnnotationGuid, e = a.m.uClassId, b = a.m.baseAnnotationOwnerGuid);
    let f = !1;
    var c;
    if (c = 2 == M.j) {
      if (c = Bh() == b) {
        c = Js(S, 1), c = !Yg(A(c) ? null : c.l);
      }
      c = c || Ks(1);
    }
    c && (f = !0);
    M.g && (f = !1);
    c = Bh();
    if (3 == M.j || 4 == M.j || 2 == M.j && null != b && c != b) {
      c = b;
    }
    a.g.B({docGuid:d, strOwnerGuid:c, uClassId:e, bPublisher:f, uLivefeedType:a.l, strUserName:M.oi + (M.g ? " (Chrome Client)" : ""), bCCLAllowed:f ? a.m && "bCCL" in a.m ? a.m.bCCL : !1 : null});
  }
}
function VQ(a) {
  0 != a.j && (a.Va = !1, a.j = 0, a = a.g, a.i && (wM(a.i), SN(a)));
}
function WQ(a, b) {
  0 == a.j && (a.Va = !0, a.l = b, !a.s() || W.G || W.v ? a.Ha = !0 : UQ(a));
}
function XQ(a, b, c) {
  a = a.i;
  a.i && a.i.ge() && tN(a.i, b.data, c);
}
function YQ(a, b, c) {
  a = a.i;
  a.i && a.i.ge() && uN(a.i, b.data, c);
}
class ZQ extends WN {
  static get g() {
    return "EVT_LIVEFEED_ENDED";
  }
  static get j() {
    return "EVT_LIVEFEED_SUBSCRIBER_STATUS";
  }
  static get i() {
    return "EVT_LIVEFEED_PUBLISHER_STATUS";
  }
  constructor(a, b, c) {
    super(b);
    this.N = a;
    this.ea = c;
    this.i = new FN(this.ea);
    this.j = 0;
    this.l = Ym;
    this.m = null;
    this.Ha = this.Va = !1;
    this.M = !0;
  }
  u() {
    console.log("Livefeed : Packet controller connected!");
    !(this.Va && 3 == this.j || this.Ha) || W.G || W.v || UQ(this);
  }
  B() {
    console.log("Livefeed : Packet controller disconnected!");
    0 != this.j && (this.j = 3);
  }
  C(a) {
    if (M.g || Qh() || Ph()) {
      let c = S.i;
      if (c) {
        let d = c.ma, e = S.j, f = c.sk();
        setTimeout(() => {
          let k = this.g.g(d);
          k && k.ge() && L.sa({type:"NotifyJoinedPresentationRoom", livefeedId:f + "_" + (e ? e : -1) + "_" + d, bCCL:M.g, uLivefeedActivityId:V.G}, null);
        }, 5000);
      }
    }
    this.j = 2;
    let b = a.detail;
    if (b) {
      let c = b.g(), d = b.l();
      if (jN(b)) {
        OI(b, c, d), wN(this.i, b);
      } else {
        if (Os()) {
          if (this.M) {
            if (a = this.i.o(c, -1, d)) {
              Vn("Syncing...", null), lN(b, c, d, a), console.log("SYNC: Request sent");
            }
          } else {
            console.log("SYNC: (vconn connected - docsLoaded) donot send sync.. publisher disconnected");
          }
        } else {
          this.J && clearInterval(this.J);
          let e = this;
          console.log("SYNC: on timer");
          this.J = setInterval(() => {
            var f = Os() && this.M && !W.u && !W.G && !W.v;
            console.log("SYNC: can send request?", f, "docLoaded", Os(), "publisherConn", this.M);
            f && (clearInterval(e.J), (f = e.i.o(c, null, d)) && b && (Vn("Syncing...", null), console.log("SYNC: Request sent on documents loaded"), lN(b, c, d, f)));
          }, 1000);
        }
      }
    }
  }
  G() {
    0 != this.j && Qh() ? this.dispatchEvent(new CustomEvent(ZQ.g, {detail:{bLogoutOpenUser:!0}})) : this.dispatchEvent(new CustomEvent(ZQ.g, {detail:null}));
    VQ(this);
  }
  o(a) {
    var b = super.o(a);
    if (b) {
      return !0;
    }
    a = a.detail;
    if (!a) {
      return !1;
    }
    if (a = a.packetData) {
      switch(a.type) {
        case "PKT_LIVEFEED_ENDED":
          a && 0 != this.j && (SN(this.g), 0 != this.j && Qh() ? this.dispatchEvent(new CustomEvent(ZQ.g, {detail:{bLogoutOpenUser:!0}})) : this.dispatchEvent(new CustomEvent(ZQ.g, {detail:null})), VQ(this));
          b = !0;
          break;
        case "PKT_LIVEFEED_PUBLISHER_STATUS":
          this.M = b = a.status.status;
          this.dispatchEvent(new CustomEvent(ZQ.i, {detail:{bConnected:b}}));
          b = !0;
          break;
        case "PKT_LIVEFEED_SUBSCRIBER_STATUS":
          this.dispatchEvent(new CustomEvent(ZQ.j, {detail:{bSync:a.bAll, arrStatus:a.arrStatus}})), b = !0;
      }
    }
    return b;
  }
  pa(a, b) {
    var c = a.docGuid;
    let d = a.strOwnerGuid;
    var e = a.versionTree;
    if (a = this.g.g(c)) {
      if (e = this.i.v(c, d, b, e, null)) {
        kN(a, c, d, e, b), c = this.N.ea(null), XQ(this, c, b), c = this.N.ia(), YQ(this, c, b);
      }
    }
  }
  ya(a) {
    var b = a.docGuid;
    let c = a.strOwnerGuid;
    a = a.data;
    let d = this.g.g(b);
    d && (this.ea.u(), d.J = !0, this.i.u(b, c, a, null), b = this.N, $Q(b, !0), aR(b), console.log("SYNC: got sync res (synced)"));
  }
  ia(a) {
    let b = a.docGuid;
    a = a.strOwnerGuid;
    let c = this.g.g(b);
    if (c && !jN(c)) {
      let d = this.i.o(b, a, a);
      d && (this.ea.C("Syncing...", null), lN(c, b, a, d), console.log("SYNC: Request sent (on init sync received)"));
    }
  }
  s() {
    return 2 == this.g.l.g.g;
  }
  U() {
    VQ(this);
  }
}
;function bR(a, b, c, d, e) {
  if (!(b in a.g)) {
    let f = 100;
    1 == b && (f = 50);
    a.g[b] = new cR(f);
  }
  if (a = a.g[b]) {
    a.g && c && e ? a.g = e(a.g, c) : a.g = c, -1 != a.i || dR(a, d);
  }
}
class eR {
  constructor() {
    this.g = {};
  }
  U() {
    let a;
    for (let b of Object.keys(this.g)) {
      (a = this.g[b]) && a.U();
    }
  }
}
function dR(a, b) {
  fR(a);
  a.j = b;
  gR(a, b);
  a.i = setInterval(function() {
    a.g ? gR(a, b) : fR(a);
  }, a.l);
}
function hR(a, b) {
  b && a.j && gR(a, a.j);
  fR(a);
  a.g = null;
  a.j = null;
}
function fR(a) {
  -1 != a.i && (clearInterval(a.i), a.i = -1);
}
function gR(a, b) {
  a.g && (b(a.g), a.g = null);
}
class cR {
  constructor(a) {
    this.g = null;
    this.i = -1;
    this.l = a;
    this.j = null;
  }
  U() {
    hR(this, !1);
  }
}
;var Ym = -1, ZA = 1;
class iR {
  constructor() {
    this.name = this.i = "";
    this.Gi = !1;
    this.g = -1;
  }
  parse(a) {
    this.i = a.strUserGuid;
    this.name = a.name;
    this.Gi = a.status;
    this.g = a.userType;
  }
  Yb() {
    return {strUserGuid:this.i, name:this.name, status:this.Gi, userType:this.g};
  }
}
function jR(a) {
  var b = [], c;
  for (c in a.g) {
    a.g.hasOwnProperty(c) && b.push(a.g[c]);
  }
  b.sort(function(d, e) {
    return d.Gi && !e.Gi ? -1 : !d.Gi && e.Gi ? 1 : d.name.localeCompare(e.name);
  });
  a = b.filter(d => d.Gi);
  b = b.filter(d => !d.Gi);
  return [a, b];
}
function kR(a) {
  console.log("cleared attandees status data");
  a.g = {};
}
class lR {
  constructor() {
    this.g = {};
    this.l = ZA;
  }
  ap(a) {
    let b = new iR();
    b.parse(a);
    0 == this.l ? b.Gi ? this.g[b.i] = b : this.g[b.i] && delete this.g[b.i] : this.g[b.i] = b;
    console.log("Updated student status:", a, this.g);
  }
}
class mR {
  constructor(a, b, c, d, e, f, k, l, n, p) {
    var t = Vn, x = Sn;
    this.j = a;
    this.ue = b;
    this.s = c;
    this.g = d;
    this.o = e;
    this.B = f;
    this.l = k;
    this.i = l;
    this.v = n;
    this.m = p;
    this.C = t;
    this.u = x;
  }
}
function YA(a) {
  return a.g && a.g.uPin ? a.g.uPin : -1;
}
function $A(a) {
  return a.g && "bAllowTakeNotes" in a.g ? a.g.bAllowTakeNotes : !1;
}
function tC() {
  var a = V;
  a.J && gq(a.J);
}
function dN(a) {
  var b = V;
  b.o && b.o.j && nR(b, a);
}
function SM() {
  var a = V;
  if (a.m == BN && window != window.top) {
    a = a.Gb;
  } else {
    if (a.j && oR(a)) {
      a = a.j.i;
      let b = !1;
      a.i && (b = jN(a.i));
      a = b;
    } else {
      a = !1;
    }
  }
  return a;
}
function $Q(a, b) {
  a.ya = !1;
  a.Lc = 0;
  b && (a = M.N, console.log("[feature] ended type 26"), b = a.g.indexOf(26), -1 != b && a.g.splice(b, 1), 0 == a.g.length && (a.j = !1, Zg(a.i) && a.i.stop(), a.l = 0));
}
function pR(a, b) {
  26 == b && (console.log(`[feature] access ended type ${b}`), qR(a), $Q(a, !0), a = "Daily Livestream quota exceeded. Ask your instructor to upgrade your account to experience unlimited Livestream and other premium features.", M.Pe || (a = "Daily Livestream quota exceeded. Please upgrade your account to experience unlimited Livestream and other premium features."), rR(a));
}
function sR(a, b) {
  26 == b && (console.log(`[feature] Server Conn Timeout type ${b}`), qR(a), $Q(a, !0), rR("Unable to authenticate this session. Please check your internet connection. Livestream has been temporarily stopped."));
}
function tR(a, b) {
  a.l = b;
  a.C.l = b;
  a.l == Ym && (a.B && a.B.ob() && gq(a.B), a.s && a.s.ob() && gq(a.s));
  a.mc(a.Ha, {uLivefeedType:a.l});
}
function oR(a) {
  return a.j ? 0 != a.j.j ? !0 : !1 : !1;
}
function uR(a) {
  if (oR(a)) {
    if (a.C) {
      var b = a.C;
      let d = [];
      for (var c in b.g) {
        b.g.hasOwnProperty(c) && d.push(b.g[c].Yb());
      }
      b = d;
    } else {
      b = [];
    }
    a.pa({type:"ANNOTATE_SLIDE_SEND_PRESENATION_ATTANDEES", arrStatus:b});
  }
}
function vR(a) {
  if (a.s && a.s.ob()) {
    let [c, d] = a.C ? jR(a.C) : [[], []];
    a = a.s;
    var b = d;
    a.v = c ? c : [];
    a.m = b ? b : [];
    wR(a);
  }
}
function nR(a, b) {
  4 == a.o.i && CQ(a.o, b);
}
function xR(a) {
  var b = Oo(S);
  A(b) || (b = {uPanelType:4, uReqType:0, oAnnotationData:{strPageUrl:si() ? P.G : Ul(), uClassId:S.j, strAnnotationGuid:b.ma, strAnnotationName:pt(), uAnnotationVersionNo:b.bg, strAnnotationPath:b.Sx, strAssessmentFileGuid:Ws(), bNotesEnabled:!0, bOwnedFile:ot() ? !0 : b.Fm(), strOwnerGuid:ot() ? Bh() : b.sk()},}, Vn("Initializing...", null), nR(a, b), nR(a, {bCCLConnected:M.ya}));
}
function yR(a) {
  Vn("Loading...", null);
  a.i = setTimeout(() => {
    Sn();
    clearTimeout(a.i);
    a.i = -1;
    zR();
  }, 3E4);
}
function AR(a) {
  a.o.i = 4;
  BQ(a.o) ? a.o.j ? xR(a) : (FQ(a.o), yR(a)) : (EQ(a.o), FQ(a.o), yR(a));
  QQ(a.o);
}
function BR(a, b) {
  BQ(a.o) && (b && Sn(), RA(b), DQ(a.o, b), b && NQ(a.o));
  clearTimeout(a.i);
  a.i = -1;
}
function CR(a, b) {
  if (b) {
    a.Jb = !0;
    a.u.j(!0);
    if (a.m != BN || window != window.top) {
      var c = S.i;
      c && (b.baseAnnotationGuid = c.ma, b.baseAnnotationOwnerGuid = c.sk());
    }
    a.g = b;
    if (a.m == zN && window == window.top || a.m == BN && window != window.top) {
      c = pw, c.g && (c = c.g, c.u = c.s, console.log("SaveStudentNotesAllowed - bNotesAllowed:", c.s, "bCacheStudentNotesAllowed", c.u)), DR($A(a));
    }
    c = b.uClassId;
    var d = c != S.j;
    S.j = c;
    1 == b.bOpenLivefeed ? (tR(a, 0), Lk() || ER(a)) : tR(a, ZA);
    d && FR(W);
    L.mb().Pg.bG("");
    a.m == BN && window != window.top ? (GR(a, !0), HR(a, {type:"ANNOTATE_SLIDE_START_PRESENTATION_ROOM", livefeedData:b,}), a.Gb = !0, IR()) : (JR(a, !0), a.j && (UN(a.j, a.m), b = a.j, b.m = a.g, b.m && (b.i.s = b.m.baseAnnotationGuid), WQ(a.j, a.l)), IR(), null != a.g && a.g.uRoomId && a.g.strUserGuid && a.g.uPin && (b = {type:"ANNOTATE_PRESENTATION_STATE_CHANGED_IN_TAB", strUserGuid:a.g.strUserGuid, uRoomId:a.g.uRoomId, strTeacherKey:a.g.uPin, bStarted:!0, bOpenLivefeed:0 == a.l}, 0 == a.l && 
    a.g.baseAnnotationOwnerGuid && a.g.baseAnnotationGuid && (b.strOpenRoomId = a.g.baseAnnotationOwnerGuid + "_-1_" + a.g.baseAnnotationGuid), L.sa(b, null)), vv(!0));
  }
}
function KR(a) {
  Kh() && 0 == a.l && gw("Presentation ended", !1);
  a.Jb = !1;
  a.u.j(!1);
  tR(a, Ym);
  a.o && (a.o.i = 1);
  Sn();
  if (a.m == zN && window == window.top || a.m == BN && window != window.top) {
    var b = pw;
    if (b.g) {
      var c = b.g;
      null != c.u && (iI(c, c.u), c.u = null, console.log("RestoreStudentNotesAllowed - bNotesAllowed:", c.s, "bCacheStudentNotesAllowed", c.u));
    }
    b.J = null;
  }
  a.m == BN && window != window.top ? (GR(a, !1), HR(a, {type:"ANNOTATE_SLIDE_CLOSE_PRESENTATION_ROOM",}), a.Gb = !1) : (a.j && (qR(a), a.C && kR(a.C)), vv(!1), L.sa({type:"ANNOTATE_PRESENTATION_STATE_CHANGED_IN_TAB"}, null));
}
function LR() {
  Kn("", "Error closing presentation.", "", "CLOSE", function() {
  }, function() {
  });
}
function zR() {
  Kn("", "Error loading stream.", "", "CLOSE", function() {
  }, function() {
  });
}
function ER(a) {
  a.B || (a.B = new MR());
  a.B.setData(a.Zb(), YA(a), M.J + "/course/" + YA(a));
  a.B.C();
}
function GR(a, b) {
  a.N && (b ? a.N.addEventListener(tQ.g, a.lb) : a.N.removeEventListener(tQ.g, a.lb), pQ(a.N, b));
}
function HR(a, b) {
  a.u.ue && a.u.ue({type:"annotateSlideFromPresentationEvent", msgData:b});
}
function JR(a, b) {
  a.j || (a.j = new ZQ(a, pw.l, a.u), a.j.addEventListener(ZQ.g, a.Wb), Kh() && !M.g && b ? a.j.addEventListener(ZQ.j, a.Db) : a.j.addEventListener(ZQ.i, a.Va));
}
function NR(a) {
  Kn("", "Error initializing stream.", "", "CLOSE", function() {
  }, function() {
    BR(a, !1);
  });
}
function aR(a) {
  0 != a.l && Ph() && !a.ya && (a.ya = !0, L.sa({type:"REQ_START_FEATURES_REQUEST", arrFeature:[26], uOffset:(new Date()).getTimezoneOffset()}, a.gf.bind(a)));
}
function OR(a) {
  a.ya = !1;
  a.Lc++;
  a.Lc > th.g ? (a.Lc = 0, sR(a, 26)) : aR(a);
}
function rR(a) {
  Kn("", a, "OK", null, () => {
    bC();
  });
}
function qR(a) {
  a.j && VQ(a.j);
}
function PR(a) {
  let b = {uPanelType:4, uReqType:1, oAnnotationData:{uClassId:S.j, strAnnotationGuid:An(),},};
  Vn("Closing presentation...", null);
  nR(a, b);
}
function QR(a) {
  a.l == ZA ? (a.o.i = 4, a.o.j && PR(a)) : 0 == a.l && KR(a);
}
function RR(a) {
  var b = V;
  if (!b.g) {
    return !1;
  }
  if (0 == b.l) {
    return KR(b), !1;
  }
  b.u.ue({type:"annotateClosePresentationRequest", strUserGuid:b.g.strUserGuid, uRoomId:b.g.uRoomId, bShowLoader:a,}, c => {
    c.bSuccessful && KR(b);
    c.bLoaderVisible && setTimeout(() => {
      Sn();
      b.u.m();
    }, 1000);
  });
  a && Vn("Closing presentation...", null);
  return !0;
}
function SR() {
  var a = V;
  a.s || (a.s = new TR(), a.s.ea.textContent = "Active users in this Livestream", oq(a.s, "CLOSE", null, null, null, null));
  let [b, c] = a.C ? jR(a.C) : [[], []];
  var d = a.s;
  d.v = b ? b : [];
  d.m = c ? c : [];
  wR(d);
  a.s.C();
}
function UR(a) {
  a.Jb = !1;
  a.u.j(!1);
  a.s && a.s.ob() && gq(a.s);
  a.B && a.B.ob() && gq(a.B);
  a.C && kR(a.C);
}
function VR(a, b) {
  Sn();
  null == a.J && (a.J = new nq());
  oq(a.J, "OK", () => {
    if (b) {
      var c = window.location.origin + "/ORIndex.php";
      bt();
      L.sa({type:"annotateJumpToTabOrRedirect", strTargetTabUrl:c}, null);
    } else {
      Kk(P) ? window.parent.postMessage({type:"annotatePresentationEndedCloseClicked"}) : (KR(a), bC());
    }
  }, null, null, null);
  a.J.g.innerHTML = "Presentation ended.";
  a.J.C();
  a.J.l();
}
function WR(a) {
  var b = V;
  !a || "pen" != a.cb() && "highlighter" != a.cb() || (b.M = 0, a = b.ba, 1 in a.g && (a = a.g[1]) && hR(a, !0));
}
function YR(a, b, c) {
  b = gl(a.D, b, c);
  c = a.D.uq;
  let d = ox(a.D, c);
  b.x -= Ez(a.D, c);
  b.y -= d;
  a = a.D.scale;
  0 < a && (b.x /= a, b.y /= a);
  return b;
}
function ZR(a, b) {
  bR(a.ba, 2, b, a.ib, a.pf.bind(a));
}
function $R(a, b) {
  b = {type:b};
  a && (b.eX = a.x, b.eY = a.y);
  return {arrPts:[b],};
}
function aS(a, b, c) {
  c = {type:c};
  if (null != a && null != b) {
    let d = L.yp();
    c.eX = a - d.x;
    c.eY = b - d.y;
    c.width = d.width;
  }
  return {arrPts:[c],};
}
function bS() {
  var a = V;
  a.m == zN ? a.D && ZR(a, $R(null, 2)) : a.m == BN && window != window.top && ZR(a, aS(null, null, 2));
}
function cS(a, b, c, d, e) {
  a.g && a.u.ue && (b = {type:"annotateUpdatePresentationExtraDataRequest", strExtraData:JSON.stringify({uLiveFeedMode:0, bAllowTakeNotes:b ? 1 : 0, strSharedNotesDocGUID:c, strSharedFeedbackDocGUID:d, strSharedStudentGUID:e}), uRoomId:a.g.uRoomId,}, a.u.ue(b, () => {
  }));
}
function dS(a) {
  return a.g && "strSharedNotesDocGUID" in a.g ? a.g.strSharedNotesDocGUID : null;
}
function eS(a) {
  return a.g && "strSharedFeedbackDocGUID" in a.g ? a.g.strSharedFeedbackDocGUID : null;
}
function fS(a) {
  return a.g && "strSharedStudentGUID" in a.g ? a.g.strSharedStudentGUID : null;
}
function gS(a, b) {
  window.top != window && a.m == BN ? hS(a, b, null) : (b = a.ea(b), a.v(b));
}
function hS(a, b, c) {
  b = a.ea(b);
  HR(a, {type:"ANNOTATE_SLIDE_NOTES_IN_LIVEFEED_STATUS_PKT_DATA", data:b, receiverInfo:c});
}
function iS(a, b, c, d, e) {
  b = a.ia(b, c, d);
  HR(a, {type:"ANNOTATE_SLIDE_SHARE_NOTES_FEEDBACK_IN_LIVEFEED_CHANGE_PKT_DATA", data:b, receiverInfo:e});
}
class jS extends ph {
  constructor() {
    var a = mC, b = mQ;
    super();
    this.N = b;
    this.Ha = Xg();
    this.Wb = this.Wb.bind(this);
    this.Va = this.Va.bind(this);
    this.Db = this.Db.bind(this);
    this.lb = this.lb.bind(this);
    this.ib = this.ib.bind(this);
    this.ld = this.ld.bind(this);
    this.ic = this.ic.bind(this);
    this.ea = this.ea.bind(this);
    this.pa = this.pa.bind(this);
    this.ia = this.ia.bind(this);
    this.u = L.Jx();
    this.o = a;
    this.Dd = this.Dd.bind(this);
    this.o && this.o.addEventListener(HQ.g, this.Dd);
    this.i = -1;
    this.j = null;
    this.ba = new eR();
    this.D = this.u.g();
    this.g = null;
    this.l = Ym;
    this.G = -1;
    this.m = zN;
    this.Gb = !1;
    this.M = 0;
    this.C = new lR();
    this.B = this.s = null;
    $Q(this, !1);
    M.addEventListener(Gh.g, this.Pe.bind(this));
    M.addEventListener(M.ic, c => {
      pR(this, c.detail ? c.detail.yr : -1);
    });
    M.addEventListener(M.ld, c => {
      sR(this, c.detail ? c.detail.yr : -1);
    });
    this.J = null;
  }
  Dd(a) {
    a = a.detail;
    let b = !1;
    a && 4 == this.o.i && (b = "uPanelType" in a ? 4 == a.uPanelType : !0);
    if (b && a && a.chromeExtensionCommand) {
      switch(parseInt(a.chromeExtensionCommand)) {
        case Kg.Mq:
          Sn();
          BR(this, !0);
          break;
        case Kg.Lq:
          BR(this, !1);
          break;
        case Kg.up:
          xR(this);
          break;
        case Kg.UK:
          BR(this, !1);
          CR(this, a.liveFeedData);
          break;
        case Kg.TK:
          switch(parseInt(a.errorType)) {
            case 0:
              NR(this);
          }break;
        case Kg.SK:
          KR(this);
          break;
        case Kg.RK:
          LR();
          this.mc(this.Ha, {bErrorWhileClosing:!0});
          break;
        default:
          BR(this, !1);
      }
    }
  }
  Zb() {
    let a = "Open Enrollment";
    this.l == ZA && this.g.strClassName && (a = this.g.strClassName);
    return a;
  }
  gf(a) {
    if (this.ya) {
      if (this.ya = !1, a.bSuccessful) {
        if ((a = a.arrFeature) && a.length) {
          var b = !1;
          for (let c = 0; c < a.length; c++) {
            let d = parseInt(a[c].uFeatureId), e = M.N.Rs.get(d);
            e && (e.nv = parseInt(a[c].uFeatureAccess), 0 == e.nv && 26 == d && (b = !0));
          }
          console.log(`[feature] Start Livefeed Feature Response ${b}`);
          b ? pR(this, 26) : (a = M.N, console.log("[feature] stated type 26"), -1 == a.g.indexOf(26) && (a.g.push(26), (b = a.Rs.get(26)) && 2 == b.nv ? uh(a, 60000) : 1 == a.g.length && uh(a, 900000)));
        } else {
          OR(this);
        }
      } else {
        OR(this);
      }
    }
  }
  Va(a) {
    (a = a.detail.bConnected) ? Sn() : Vn("Awaiting stream...", null);
    console.log("Publisher conn status changed:", a);
  }
  Db(a) {
    var b = a.detail;
    if (b.bSync) {
      a = this.C;
      b = b.arrStatus ? b.arrStatus : [];
      if (0 == a.l) {
        a.g = {};
      } else {
        for (var c in a.g) {
          a.g.hasOwnProperty(c) && (a.g[c].Gi = !1);
        }
      }
      for (c = 0; c < b.length; c++) {
        let d = new iR();
        d.parse(b[c]);
        a.g[d.i] = d;
      }
      console.log("Synced all connected students:", a.g);
    } else {
      this.C.ap(b.arrStatus[0]);
    }
    vR(this);
    uR(this);
  }
  Wb(a) {
    W.u = !0;
    this.j && TQ(this.j);
    var b = !1;
    a && a.detail && (b = a.detail, b = b.bLogoutOpenUser ? b.bLogoutOpenUser : !1);
    $Q(this, !0);
    UR(this);
    W && (Ph() || M.g) && YN(!1, null);
    Lk() ? (a = kS()) && a.forEach(c => {
      c.contentWindow.postMessage({type:"annotateLivestreamEnded"}, "*");
    }) : VR(this, b);
    b ? L.sa({type:"refreshORActiveLivefeed"}, null) : W.ba = !0;
    M.g && L.sa({type:"refreshCCLActiveLivefeed"}, null);
  }
  Pe(a) {
    a = (a = a.detail) && "bLoggedInUserAccountChange" in a ? a.bLoggedInUserAccountChange : !1;
    if (!Jh() || a) {
      this.s && this.s.ob() && gq(this.s), this.B && this.B.ob() && gq(this.B), Nn(), this.Lj() && (W.u = !0, W.ba = !0, Kn("", "This Livestream is no longer available.", "", "OK", () => {
      }, () => {
        bC();
      }), KR(this));
    }
  }
  Lj() {
    return window != window.top && this.m == BN ? this.Gb : oR(this);
  }
  v(a) {
    this.j && this.j.v(a);
  }
  pa(a) {
    this.u.ue && this.u.ue({type:"annotateSlideToPresentationEvent", msgData:a});
  }
  ze(a) {
    this.v({type:"ANNOTATE_PDF_VIEW_UPDATED", data:a,});
  }
  ed(a) {
    this.m == BN && window != window.top ? (a = {type:"ANNOTATE_POLYLINE_ADDING", data:{slideId:nk(), eleData:a,},}, HR(this, a)) : this.v({type:"ANNOTATE_POLYLINE_ADDING", data:a,});
  }
  eg(a, b) {
    if (!a || !b) {
      return b;
    }
    a = a.arrDrawingPts;
    let c = b.arrDrawingPts;
    a && c && (a.push(...c), b.arrDrawingPts = a);
    return b;
  }
  ib(a) {
    this.m == BN && window != window.top ? (a = {type:"ANNOTATE_LASER_MOVING", data:{slideId:nk(), eleData:a,},}, HR(this, a)) : this.v({type:"ANNOTATE_LASER_MOVING", data:a,});
  }
  pf(a, b) {
    if (!a || !b) {
      return b;
    }
    a = a.arrPts;
    let c = b.arrPts;
    a && c && (a.push(...c), b.arrPts = a);
    return b;
  }
  lb(a) {
    this.l != Ym && HR(this, {type:"ANNOTATE_SLIDES_VIEW_UPDATED", data:a.detail,});
  }
  eA(a) {
    this.l == ZA && this.g && (this.g && (this.g.bAllowTakeNotes = a), cS(this, a, dS(this), eS(this), fS(this)), gS(this, a));
  }
  ea(a) {
    if (null == a || void 0 == a) {
      a = $A(this);
    }
    return {type:"ANNOTATE_NOTES_MODE_CHANGED", data:{bNotesAllowed:a,},};
  }
  ld(a) {
    if (a) {
      switch(a.type) {
        case "ANNOTATE_SLIDE_SEND_PRESENTATION_STATE":
          lS() && (a.bStarted ? XA() : AR(this));
          break;
        case "ANNOTATE_SLIDE_SEND_PRESENATION_ATTANDEES":
          if (lS() && a.arrStatus) {
            if (this.C) {
              var b = this.C;
              a = a.arrStatus;
              b.g = {};
              if (a && 0 < a.length) {
                for (var c = 0; c < a.length; c++) {
                  let d = new iR();
                  d.parse(a[c]);
                  b.g[d.i] = d;
                }
              }
            }
            vR(this);
          }
          break;
        case "ANNOTATE_SLIDE_CLOSE_PRESENTATION_ON_TAB_CLOSE_CANCEL":
          this.m = BN;
          QR(this);
          break;
        case "ANNOTATE_GET_DOCUMENT_SYNC_DATA":
          a.docGuid == Un() && (b = fO(a, null)) && (b.type = b.mainType, b && (a = b.syncData)) && (a.docSyncData = this.u.o(), (c = this.u.l()) && (a.curEleSyncData = c), HR(this, b));
          break;
        case "ANNOTATE_SLIDE_INIT_SEND_NOTES_STATUS_IN_LIVEFEED":
          this.g && (hS(this, null, a.senderInfo), iS(this, null, null, null, a.senderInfo));
      }
    }
  }
  ic(a) {
    if (a) {
      switch(a.type) {
        case "ANNOTATE_SLIDE_GET_PRESENTATION_STATE":
          this.pa({type:"ANNOTATE_SLIDE_SEND_PRESENTATION_STATE", bStarted:oR(this)});
          break;
        case "ANNOTATE_SLIDE_GET_PRESENATION_ATTANDEES":
          uR(this);
          break;
        case "ANNOTATE_JOIN_PRESENTATION_ROOM_BY_COT":
          S && gt();
          break;
        case "ANNOTATE_SLIDE_START_PRESENTATION_ROOM":
          a = a.livefeedData;
          this.m = BN;
          CR(this, a);
          break;
        case "ANNOTATE_SLIDE_CLOSE_PRESENTATION_ROOM":
          KR(this);
          break;
        case "ANNOTATE_SLIDE_NOTES_IN_LIVEFEED_STATUS_PKT_DATA":
          a.receiverInfo ? XQ(this.j, a.data, a.receiverInfo) : this.v(a.data);
          break;
        case "ANNOTATE_SLIDE_SHARE_NOTES_FEEDBACK_IN_LIVEFEED_CHANGE_PKT_DATA":
          a.receiverInfo ? YQ(this.j, a.data, a.receiverInfo) : this.v(a.data);
          break;
        case "ANNOTATE_SLIDES_VIEW_UPDATED":
          this.v(a);
          break;
        case "ANNOTATE_SEND_DOCUMENT_SYNC_DATA":
          if (this.j) {
            var b = this.j, c = a.docGuid, d = a.syncData, e = a.senderInfo;
            let f = b.g.g(c);
            f && d && (kN(f, c, a.strOwnerGuid, d, e), window.top == window && b.ba == BN && b.N.pa({type:"ANNOTATE_SLIDE_INIT_SEND_NOTES_STATUS_IN_LIVEFEED", senderInfo:e}));
          }
          break;
        case "ANNOTATE_POLYLINE_ADDING":
          this.ed(a.data);
          break;
        case "ANNOTATE_LASER_MOVING":
          this.ib(a.data);
      }
    }
  }
  ia(a, b, c) {
    if (null == a || void 0 == a) {
      a = dS(this);
    }
    if (null == b || void 0 == b) {
      b = eS(this);
    }
    if (null == c || void 0 == c) {
      c = fS(this);
    }
    return {type:"ANNOTATE_SHARE_NOTES_FEEDBACK_CHANGED", data:{strSharedNotesDocGUID:a, strSharedFeedbackDocGUID:b, strSharedStudentGUID:c},};
  }
  U() {
    this.l == ZA && null != this.g && this.g.uRoomId && this.g.strUserGuid && this.u.ue && (this.u.ue({type:"annotateClosePresentationOnTabClose", strUserGuid:this.g.strUserGuid, uRoomId:this.g.uRoomId, bOnDispose:!0}), console.log("On dispose tab: auto-terminate closed presentation sent to bg"));
    clearTimeout(this.i);
    this.i = -1;
    RA(!1);
    tR(this, Ym);
    this.g = null;
    this.j && (this.j.removeEventListener(ZQ.g, this.Wb), this.j.removeEventListener(ZQ.j, this.Db), this.j.removeEventListener(ZQ.i, this.Va), this.j.U(), this.j = null);
    this.s && (this.s.gb(), this.s = null);
    this.B && (this.B.gb(), this.B = null);
    this.ba && this.ba.U();
    this.N && this.N.U();
  }
}
;function mS(a, b) {
  Kh() && !a.yi() && (b && a.sE() && a.aq(), a.cx = a.Aq ? 2 : 1, at(!0));
}
function nS(a, b, c) {
  var d = document.getElementById("AnnotateScreenShotCaptureCanvas");
  if (!d) {
    return "";
  }
  let e = P.D, f = Em(b);
  d.width = Math.floor(window.visualViewport.width) / f;
  d.height = Math.floor(window.visualViewport.height) / f;
  let k = d.getContext("2d");
  k.clearRect(0, 0, d.width, d.height);
  k.scale(1 / window.devicePixelRatio / f, 1 / window.devicePixelRatio / f);
  k.imageSmoothingQuality = "high";
  k.drawImage(a, 0, 0);
  a = Math.ceil(b.width + 1);
  let l = Math.ceil(b.height + 1);
  b = k.getImageData(Math.floor((c.x / window.devicePixelRatio + (b.offsetLeft - e.scrollX)) / f + 1), Math.floor((c.y / window.devicePixelRatio + (b.offsetTop - e.scrollY)) / f + 1), a, l);
  k.clearRect(0, 0, d.width, d.height);
  d.width = a;
  d.height = l;
  k.putImageData(b, 0, 0);
  return d.toDataURL();
}
function oS(a) {
  let b = Math.round(a.height);
  return `<image ext=".png" width="${15 * Math.round(a.width)}" height="${Math.round(15 * b)}" baseline="${Math.round(15 * b)}" scale="${a.Jp}">${0}</image>`;
}
function pS(a) {
  a && a.length && (a = a.replace("&", "&amp;"), a = a.replace("<", "&lt;"), a = a.replace(">", "&gt;"));
  return a;
}
function qS(a) {
  return `<text><![CDATA[${pS(a)}]]></text>`;
}
function rS(a, b) {
  console.log("[Assessment] ANNOTATE_ASSESSMENT_QUESTION_CAPTURE_DATA");
  a.se = [];
  L.kd({type:"ANNOTATE_ASSESSMENT_QUESTION_CAPTURE_DATA", strQuestionUUID:a.nk, pageIndex:a.qc.S, lstRect:b});
}
function sS(a, b) {
  a.dd = b.imageBase64;
  let c = 1;
  "imageScale" in b && (c = b.imageScale);
  a.qc.Jp = c;
}
function tS(a) {
  a.Aq = !1;
  a.cx = 1;
  a.nk = oh();
}
class Kz extends Wm {
  static get Rz() {
    return 14;
  }
  static get To() {
    return 2;
  }
  static get $b() {
    return 1;
  }
  constructor() {
    super();
    this.Wf = 5;
    this.Dz = "";
    this.os = null;
    this.to = 4;
    this.ux = 1;
    this.rk = 0;
    this.se = [];
    this.al = this.Zd = 1;
    this.qc = new Wm();
    this.Ez = "";
    this.Oy = 240;
    this.ut = -1;
    this.rp = "data:image/png;base64,";
  }
  Mo() {
    return 22;
  }
  ke() {
    return 2 == this.al;
  }
  Dt() {
    return this.al;
  }
  Ba(a) {
    return this.qc.Ba(a);
  }
  aq() {
    this.qc.s && this.qc.s.Vo(!0);
    let a = P.D;
    -1 != this.ut && clearTimeout(this.ut);
    this.ut = -1;
    this.ut = setTimeout(() => {
      -1 != this.ut && clearTimeout(this.ut);
      this.ut = -1;
      L.sa({type:"annotateScreenShotCopy", bForSave:!1, x:a.Ea.offsetLeft * window.devicePixelRatio, y:a.Ea.offsetTop * window.devicePixelRatio, width:a.Ea.offsetWidth * window.devicePixelRatio, height:a.Ea.offsetHeight * window.devicePixelRatio}, this.Gm.bind(this));
    }, 200);
  }
  Gm() {
    this.qc.s && this.qc.s.Vo(!1);
  }
  sE() {
    return 1 == this.al;
  }
  Wo() {
    this.qc.Wo();
    super.Wo();
  }
  Am() {
    return {strQuestionUUID:this.nk, uQuestionType:this.Wf,};
  }
  Wl(a) {
    a ? (this.qc.Jg(a), this.ke() && this.qc.Mb(this.Mo())) : (this.qc.Mb(this.Mo()), this.qc.Qc(this.Oy), this.qc.offsetLeft = window.scrollX + (window.innerWidth - this.Oy) / 2, this.qc.offsetTop = window.scrollY + (window.innerHeight - this.Mo()) / 2, el(this.qc));
  }
  JE() {
    return !1;
  }
  Dv(a) {
    (a = a.lstRect) && 1 == a.length && (sS(this, a[0]), this.se.push({strKey:"Q", strDataURI:this.dd}));
    console.log(this.se);
  }
  yi() {
    return this.Aq && this.os ? this.os.yi() : !1;
  }
  lj() {
    return this.Aq && this.os ? this.os.lj() : !1;
  }
  Fa(a) {
    A(a) || (super.Fa(a), a.uQuestionType && (this.Wf = parseInt(a.uQuestionType)), a.strQuestion && (this.Dz = a.strQuestion), a.strQuestionUUID && (this.nk = a.strQuestionUUID), a.questionModelData && this.qc.Jg(a.questionModelData), a.uLayoutType && (this.Zd = a.uLayoutType), a.uPoints && (this.ux = a.uPoints), a.uQuestionEditMode && (this.al = a.uQuestionEditMode), a.strQuestionTextData && (this.Ez = a.strQuestionTextData));
  }
  Fb(a) {
    a.uQuestionType = this.Wf;
    a.strQuestion = this.Dz;
    a.strQuestionUUID = this.nk;
    a.questionModelData = this.qc.rf();
    a.strQuestionTextData = this.Ez;
    a.uLayoutType = this.Zd;
    a.uQuestionEditMode = this.al;
    a.uPoints = this.ux;
    a.type = this.cb();
  }
  $f(a) {
    let b = super.$f(a);
    b.questionModelData = this.qc.$f(a);
    b.uLayoutType = this.Zd;
    b.uQuestionEditMode = this.al;
    b.uPoints = this.ux;
    return b;
  }
  Na() {
    let a = super.Na();
    this.Fb(a);
    return a;
  }
  vi() {
    return this.Wf;
  }
  Qn() {
    return 0 == this.Wf || 5 == this.Wf;
  }
  cb() {
    return "AssessmentQuestion";
  }
}
class uS extends Nz {
  constructor() {
    super(null);
    this.So();
  }
  So() {
    this.j = yz(this);
    this.j.ja();
    this.Te = 0;
    this.Hi = !1;
    this.lg = this.lg.bind(this);
    this.Oj = this.Oj.bind(this);
    this.Nj = this.Nj.bind(this);
    this.Pj = this.Pj.bind(this);
    this.Fh = this.Fh.bind(this);
    this.tf = this.tf.bind(this);
  }
  Bd() {
    super.Bd();
    this.j.Bd();
  }
  hc(a) {
    return super.hc(a) || this.j.hc(a) ? !0 : !1;
  }
  Zo(a) {
    this.i(a);
  }
  ef(a) {
    super.ef(a);
    this.j.ef(a);
  }
  jb(a) {
    super.jb(a);
    this.j.jb(a);
  }
  i(a) {
    this.Hi = a;
    this.j.Sa(a);
    a ? (this.j.el.addEventListener("pointerdown", this.lg, {capture:!0, passive:!1}), this.j.el.addEventListener("touchstart", this.il, {capture:!0, passive:!1})) : (this.j.el.removeEventListener("pointerdown", this.lg, {capture:!0}), this.j.el.removeEventListener("touchstart", this.il, {capture:!0}));
  }
  tf() {
    this.Sn(!1);
    if (this.top != this.tg || this.left != this.sg) {
      Bz(this), this.mc(this.bl, {op:!0});
    }
  }
  lg(a) {
    a.target != this.j.Sb.el && (a.preventDefault(), this.tg = this.top, this.sg = this.left, this.Te = a.clientY, this.pe = a.clientX, this.Sn(!0));
  }
  Fh(a) {
    if (!kh(a)) {
      return this.tf(), !1;
    }
    a.preventDefault();
    if (this.Hi) {
      let b = this.left + (a.clientX - this.pe), c = this.top + (a.clientY - this.Te), d = this.height;
      d *= this.scale;
      let e = this.width;
      e *= this.scale;
      let f = Dz(this);
      b >= f.pageLeft && b <= f.pageLeft + f.Kl - e && (this.Hf(b), this.pe = a.clientX);
      c >= f.pageTop && c <= f.pageTop + f.Jl - d && (this.fc(c), this.Te = a.clientY);
    }
    return !0;
  }
  Oj(a) {
    a.preventDefault();
    this.tf();
  }
  Nj(a) {
    a.preventDefault();
    this.Sn(!1);
  }
  Pj(a) {
    a.preventDefault();
  }
  Sn(a) {
    Mj(a, this.Fh, this.Oj, this.Nj, this.Pj);
  }
  Nd(a) {
    super.Nd(a);
    a = 7 * this.scale;
    this.j.Nd(this.left - (this.j.Ra() * this.j.scale + a));
  }
  Ee(a) {
    super.Ee(a);
    let b = (this.height * this.scale - this.j.wb() * this.j.scale) / 2;
    this.j.Ee(a + b);
  }
  Kd(a) {
    a.contains(this.j.el) || a.appendChild(this.j.el);
    super.Kd(a);
  }
  U() {
    super.U();
    this.j.U();
  }
}
function vS(a, b) {
  let c;
  if (a.selection && a.selection.getRangeAt && a.selection.rangeCount) {
    c = a.selection.getRangeAt(0);
    c.deleteContents();
    let d = document.createElement("div");
    d.appendChild(b);
    b = document.createDocumentFragment();
    let e, f;
    for (; e = d.firstChild;) {
      f = b.appendChild(e);
    }
    c.insertNode(b);
    f && (c = c.cloneRange(), c.setStartAfter(f), c.collapse(!0), a.selection.removeAllRanges(), a.selection.addRange(c));
    a.selection = window.getSelection();
  }
}
function wS(a) {
  let b = document.createElement("text");
  b.textContent = a;
  return b;
}
function xS(a) {
  let b = "", c = d => {
    (3 == d.nodeType || 1 == d.nodeType && "TEXT" == d.nodeName) && d.textContent && d.textContent.length ? b += d.textContent : "BR" == d.nodeName && (b += "\n");
  };
  a.el.childNodes.forEach(d => {
    1 == d.nodeType && d.childNodes.length ? d.childNodes.forEach(e => c(e)) : c(d);
  });
  return b;
}
class yS extends vA {
  constructor() {
    super("div");
    this.lb = Xg();
    this.j = this.selection = null;
    this.Cy = !1;
    this.nl();
    this.el.onkeydown = a => {
      this.selection = window.getSelection();
      if (a && a.target == this.el) {
        switch(a.key) {
          case "Enter":
            a.preventDefault(), document.execCommand("insertLineBreak");
        }
      }
    };
  }
  Gb() {
    R(this, "AnnotateContentEditable");
    lj(this, "autocomplete", "off");
    lj(this, "autocorrect", "off");
    this.g = this.el;
    this.g.spellcheck = !1;
  }
  Lo(a) {
    this.Jf || (a.preventDefault(), a.stopPropagation());
  }
  Nt(a) {
    (this.ko = a) ? this.el.setAttribute("readonly", "") : this.el.removeAttribute("readonly");
  }
  sd(a) {
    this.Jf != a && (this.Jf = a, lj(this, "contenteditable", a ? "true" : "false"), this.Nt(!this.Jf), this.l(a));
  }
  l(a) {
    super.l(a);
    a ? (this.el.onpaste = this.Cf.bind(this), this.j = new MutationObserver(this.gf.bind(this)), this.j.observe(this.el, {subtree:!0, childList:!0})) : (this.j && (this.j.disconnect(), this.j = null), pj(this, "annotate-plugin-clickable-element"));
  }
  gf() {
    this.cs("");
    this.dispatchEvent(new CustomEvent(this.lb, {detail:{}}));
  }
  Cf(a) {
    a.preventDefault();
    let b = "";
    null != a.clipboardData && (null != a.clipboardData.getData("text") && 0 < a.clipboardData.getData("text").length ? b = a.clipboardData.getData("text") : null != a.clipboardData.getData("text/plain") && 0 < a.clipboardData.getData("text/plain").length ? (b = a.clipboardData.getData("text/plain"), b = b.replace(String.fromCharCode(10), "\r\n")) : null != a.clipboardData.getData("text/html") && 0 < a.clipboardData.getData("text/html").length && (b = a.clipboardData.getData("text/html")));
    b && b.length && vS(this, wS(b));
    console.log(`${this.Zb()} OnPaste ->${b}`);
  }
  cs(a) {
    this.xt && this.xt(a);
  }
  Lc(a) {
    a && a.length && (a = (new DOMParser()).parseFromString(a, "text/xml")) && a.firstChild && a.firstChild.childNodes.forEach(b => {
      "text" == b.nodeName && ("\n" == b.textContent ? this.el.appendChild(document.createElement("br")) : this.el.appendChild(wS(b.textContent)));
    });
  }
  oq(a) {
    this.Jf && (this.fh = !0, null == a && this.el.focus(), console.log(this.Zb(), "onselction"), window.getSelection && (this.selection = window.getSelection()), this.u && this.u());
  }
  wk(a) {
    this.fh = !1;
    a || this.el.blur();
    this.o && this.o();
  }
  Wr(a) {
    this.placeholder = a;
  }
  Bi(a) {
    this.value = a;
  }
  U() {
    this.j && (this.j.disconnect(), this.j = null);
    super.U();
  }
  Zb() {
    return "AnnotateContentEditable";
  }
}
class zS extends vA {
  constructor() {
    super(null);
    qj(this).g = "break-word";
    qj(this).whiteSpace = "pre-line";
    qj(this).overflow = "hidden";
    uj(this, "auto");
    this.i = null;
  }
  Lo(a) {
    this.Jf || (a.preventDefault(), a.stopPropagation());
  }
  sd(a) {
    this.Jf != a && (this.Jf = a, !this.Jf && this.wk(!1), this.Nt(!this.Jf), this.l(this.Jf));
  }
  Zb() {
    return "AssessmentPlaceholderTextArea";
  }
}
class AS extends zS {
  constructor() {
    super();
    R(this, "AnnotateCoveredWidget");
    this.v(Kz.To + "px");
    this.vf(Kz.Rz);
  }
  No(a, b) {
    a = sA(this, a, this.fontSize, this.el.clientWidth) + 2 * Kz.To;
    return b > a ? b : a;
  }
  Dm() {
    qj(this).overflowY = this.el.scrollHeight > this.el.clientHeight + 2 * Kz.To ? "auto" : "hidden";
  }
}
function BS(a) {
  a.jo = !a.C;
  sj(a.Sb, a.C ? "ew-resize" : "nw-resize");
  let b = a.wb() - a.Sb.wb() / 2;
  a.jo || (b = (a.wb() - a.Sb.wb()) / 2);
  a.Sb.ga(a.Ra() - a.Sb.Ra() / 2, b);
}
function CS(a, b) {
  b && a.ed ? a.ig.pb() : a.ig.ja();
}
function DS(a, b) {
  (a.lB = b) ? a.ig.el.addEventListener("pointerdown", a.Fv, {capture:!0, passive:!1}) : a.ig.el.removeEventListener("pointerdown", a.Fv, {capture:!0});
  CS(a, a.lB);
}
class ES extends Nz {
  constructor(a, b) {
    super(null);
    this.Aa = b;
    this.ul = !0;
    this.Uc = a;
    this.v((8).toString());
    uj(this, "auto");
    yj(this, "1px solid rgba(0,0,0,1)");
    this.Fv = this.pA.bind(this);
    this.Gv = this.Yo.bind(this);
    this.mj = this.qA.bind(this);
    this.Ev = this.oA.bind(this);
    this.ed = !0;
    this.ig = new Nj(null);
    R(this.ig, "annotateclickable");
    this.ig.uc("Resize");
    this.ig.jb((8).toString());
    this.ig.ja();
    zj(this.ig, "red");
    sj(this.ig, "nw-resize");
    this.ig.V(8, 8);
    this.ig.ga(-(this.ig.Ra() / 2), -(this.ig.wb() / 2));
    this.Z(this.ig);
    this.C = !1;
    this.Gb();
    ki.addEventListener(qi.g, this.Ig.bind(this));
    this.Ig(null);
  }
  Gb() {
    this.Va = this.gl.bind(this);
    this.ia = !1;
    this.eb = new AS();
    this.eb.jb((4).toString());
    this.eb.uc("");
    sj(this.eb, "text");
    this.eb.Sa(!1);
    var a = this.eb;
    a.Cy = !1;
    a.nl();
    this.eb.Wr("Add your text here");
    this.eb.sd(this.ia);
    this.Z(this.eb);
    this.eb.xt = this.Va;
  }
  Ha() {
    return this.eb;
  }
  ib() {
    return this.eb.fh;
  }
  gl(a) {
    this.$o(a);
  }
  $o() {
  }
  xk(a) {
    this.C = a;
    this.eb.Sa(a);
    BS(this);
    this.ed = !a;
    CS(this, this.lB);
  }
  Nv(a) {
    this.ia = (a = a && this.Jf && this.Aa.ke() && Kh()) && Kh();
    this.eb.sd(this.ia);
  }
  mg(a) {
    super.mg(a);
    Fz(this);
    mS(this.Aa, !0);
  }
  sd(a) {
    super.sd(a);
    this.Nv(a);
  }
  ec(a) {
    super.ec(a);
    this.oj(!1);
  }
  oj(a) {
    Kh() && this.ul ? a ? yj(this, "1px solid rgba(0,0,0,0)") : yj(this, this.ac ? "1px solid rgba(0,0,0,1)" : "1px solid rgba(0,0,0,0.25)") : yj(this, "");
  }
  Ig() {
    uj(this, 15 == ki.g ? "auto" : "none");
  }
  M() {
    super.M();
    zj(this.Sb, "red");
    xj(this.Sb, -Kz.$b);
    this.Sb.V(8, 8);
    BS(this);
  }
  We() {
    return this.C ? 22 : 14;
  }
  Ke() {
    return 48;
  }
  hl(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      var b = this.lc + (a.clientX - this.Eb) / this.scale;
      a = this.zc + (a.clientY - this.Ib) / this.scale;
      var c = Dz(this), d = this.left + b * this.scale, e = !1;
      b >= this.Ke() && d <= c.Se && (this.width = b, e = !0);
      a >= this.We() && this.jo && (this.height = a, e = !0);
      e && (this.V(this.width, this.height), this.De(this.left, this.top));
    } else {
      this.Ai(a);
    }
  }
  fl(a) {
    return this.ig.hc(a) ? !1 : super.fl(a);
  }
  J(a) {
    this.fl(a) && !this.eb.hc(a) && super.J(a);
  }
  oh(a) {
    super.oh(a);
    this.ig && CS(this, this.qg && a);
  }
  yk() {
  }
  pA(a) {
    this.ig.hc(a) && (a.preventDefault(), a.stopPropagation(), this.Eb = a.clientX, this.Ib = a.clientY, this.lc = this.width, this.zc = this.height, this.sg = this.left, this.tg = this.top, Mj(!0, this.Gv, this.mj, this.mj, this.Ev), this.yk(!1));
  }
  Yo() {
  }
  qA(a) {
    a.preventDefault();
    Mj(!1, this.Gv, this.mj, this.mj, this.Ev);
    this.yk(this.ac);
    this.lc == this.width && this.zc == this.height || this.mc(this.bl, {op:!0});
  }
  oA(a) {
    a.preventDefault();
    this.yk(this.ac);
  }
  V(a, b) {
    super.V(a, b);
    this.jy();
  }
  jy() {
    if (this.Sb) {
      let a = this.wb() - this.Sb.wb() / 2;
      this.jo || (a = (this.wb() - this.Sb.wb()) / 2);
      this.Sb.ga(this.Ra() - this.Sb.Ra() / 2, a);
    }
    this.ig && this.ig.ga(-(this.ig.Ra() / 2), -(this.ig.wb() / 2));
  }
  U() {
    this.eb.U();
    super.U();
  }
  Zb() {
    return "AssessmentQuestionPlaceHolder";
  }
}
function FS(a, b) {
  Mj(b, a.Fh, a.Oj, a.Nj, a.Pj);
}
function GS(a, b, c) {
  c -= a.top;
  b = b - a.left - a.ab() / 2;
  a.Uo(b, c, null, !0);
  a.ec(!0);
  a.sg = a.left;
  a.tg = a.top;
  b = a.left;
  c = a.top;
  let d = P.D, e = d.Ea.getBoundingClientRect();
  b -= -e.left + d.scrollX;
  c -= -e.top + d.scrollY;
  a.pe = b + a.ab() / 2;
  a.Te = c + a.Ka() / 2;
  console.log(b, c);
  a.Lc = !0;
  a.nh(!0);
  FS(a, !0);
  a.yk(!1);
  gw("Click/ Tap to position control on page.", !1);
}
class HS extends ES {
  constructor(a, b) {
    super(a, b);
    this.s = new IS(this);
    this.u = this.u.bind(this);
    this.ya = !1;
    this.xi();
    this.Bd();
    this.Cd(b.qc);
    this.o();
    this.eb.Wr("Add question statement");
    Kj(this.eb, this.u);
    Kj(this, this.u);
  }
  gl(a) {
    super.gl(a);
    var b = this.Aa;
    a = !A(a) && 0 < a.length ? a.trim() : "";
    b.Ez = a;
    mS(b, !1);
  }
  u() {
    this.m && !this.ac && JS(this.Uc, this);
  }
  Cd(a) {
    this.xk(this.ke());
    this.eb.Bi(this.Aa.Ez);
    super.Cd(a);
  }
  Ta() {
    return this.Ca;
  }
  xi() {
    this.So();
  }
  yk(a) {
    a = a && !this.ya;
    KS(this.Uc, a, this);
  }
  Bd() {
    this.j.Bd();
    super.Bd();
  }
  ba(a) {
    super.ba(a);
    this.o();
  }
  o() {
    this.m = !1;
    Kh() && (this.m = !this.Aa.yi(), this.ac && !this.m && this.ec(!1));
  }
  Sa(a) {
    super.Sa(a);
    this.ec(!1);
  }
  jb(a) {
    super.jb(a);
    this.j.jb(a);
  }
  Tj(a) {
    super.Tj(a);
    DS(this, a);
  }
  sd(a) {
    super.sd(a);
    this.Tj(a);
    this.Zo(a);
  }
  ec(a) {
    super.ec(a);
    this.sd(a);
    this.jb(a ? "20" : "19");
    this.Jm();
    this.yk(a);
  }
  Jm() {
    let a = this.ac ? "all-scroll" : "default";
    !this.ac && ui() ? (a = "pointer", this.eb && sj(this.eb, "pointer")) : this.eb && sj(this.eb, "text");
    sj(this, a);
    this.uc("all-scroll" == a ? "Drag to move" : "");
  }
  Ig(a) {
    super.Ig(a);
    this.Jm();
  }
  Vo(a) {
    this.oh(!a);
    this.oj(a);
  }
  Ot() {
  }
  So() {
    this.j = yz(this);
    zj(this.j, "rgba(255, 255, 255, 0.65)");
    this.Te = this.pe = 0;
    this.Hi = !1;
    this.lg = this.lg.bind(this);
    this.Oj = this.Oj.bind(this);
    this.Nj = this.Nj.bind(this);
    this.Pj = this.Pj.bind(this);
    this.Fh = this.Fh.bind(this);
    this.tf = this.tf.bind(this);
  }
  Lo(a) {
    this.ac || (a.preventDefault(), a.stopPropagation());
  }
  tf() {
    FS(this, !1);
    this.Lc = !1;
    this.yk(this.ac);
    this.nh(!1);
    if (this.top != this.tg || this.left != this.sg) {
      Bz(this), this.mc(this.bl, {op:!0});
    }
  }
  lg(a) {
    this.fl(a) && (this.eb.hc(a) || a.preventDefault(), this.sg = this.left, this.tg = this.top, this.pe = a.clientX, this.Te = a.clientY, this.nh(!0), FS(this, !0), this.yk(!1));
  }
  Fh(a) {
    if (!kh(a) && !this.Lc) {
      return this.tf(), !1;
    }
    a.preventDefault();
    this.Hi && this.Uo(a.clientX - this.pe, a.clientY - this.Te, a, !1);
    return !0;
  }
  Oj(a) {
    a.preventDefault();
    this.tf();
    this.yk(this.ac);
  }
  Nj(a) {
    a.preventDefault();
    FS(this, !1);
    this.nh(!1);
  }
  Pj(a) {
    a.preventDefault();
  }
  Zo(a) {
    this.Hi = a;
    this.j.Sa(a);
    a ? (this.el.addEventListener("pointerdown", this.lg, {capture:!0, passive:!1}), this.el.addEventListener("touchstart", this.il, {capture:!0, passive:!1}), this.j.el.addEventListener("pointerdown", this.lg, {capture:!0, passive:!1}), this.j.el.addEventListener("touchstart", this.il, {capture:!0, passive:!1})) : (this.el.removeEventListener("pointerdown", this.lg, {capture:!0}), this.el.removeEventListener("touchstart", this.il, {capture:!0}), this.j.el.removeEventListener("pointerdown", this.lg, 
    {capture:!0}), this.j.el.removeEventListener("touchstart", this.il, {capture:!0}));
  }
  Db(a) {
    this.yk(!1);
    super.Db(a);
  }
  zi(a) {
    super.zi(a);
    this.yk(this.ac);
  }
  ef(a) {
    super.ef(a);
    this.j.ef(a);
  }
  Nd(a) {
    super.Nd(a);
    this.j.Nd(this.left - (this.j.ab() + this.Ba(8)));
  }
  Ee(a) {
    super.Ee(a);
    let b = (this.Ka() - this.j.Ka()) / 2;
    this.j.Ee(a + b);
  }
  Mb(a) {
    super.Mb(a);
    a = (this.Ka() - this.j.Ka()) / 2;
    this.j.Ee(this.top + a);
  }
  pa(a) {
    let b = !1;
    8 == a.Id && (console.log("[Assessment] points ", a.uPoints), this.Aa.ux = a.uPoints, mS(this.Aa, !1), b = !0);
    LS(this.s);
    return b;
  }
  Uo() {
  }
  Mz(a, b, c) {
    this.Ca && -1 != this.Ca.S && this.Ca.S == a && (this.left + this.ab() > b || this.top + this.Ka() > c) && this.Uo(0, 0, null, !0);
  }
  Lz() {
    Bz(this);
  }
  vi() {
    return this.Aa.vi();
  }
  jd() {
    return this.Aa.Zd;
  }
  Dt() {
    return this.Aa.Dt();
  }
  ke() {
    return this.Aa.ke();
  }
  hc(a) {
    return super.hc(a) || a && a.target && (this.j.el == a.target || this.j.el.contains(a.target)) ? !0 : !1;
  }
  Kd(a) {
    this.j.Kd(a);
    super.Kd(a);
  }
  U() {
    super.U();
    this.j.U();
  }
}
function LS(a) {
  a.dispatchEvent(new CustomEvent(a.j, {detail:null}));
}
class IS extends EventTarget {
  constructor(a) {
    super();
    this.j = Xg();
    this.i = a;
    this.Wf = 5;
    this.m = this.g = !1;
    this.l = !0;
  }
  Qn() {
    return 5 == this.Wf || 0 == this.Wf;
  }
}
function MS(a) {
  a.g && (a.g.removeEventListener(a.g.j, a.Gb), a.g = null);
}
function NS(a, b) {
  MS(a);
  a.g = b;
  a.g.addEventListener(a.g.j, a.Gb);
  if (a.g) {
    a.Gb();
    var c = 4;
    b = (d, e) => {
      d.ob() && (d.ga(c, 4), c += d.Ra() + 2, e.ga(c, 4), c += 2);
    };
    b(a.s, a.Wx);
    b(a.o, a.Ux);
    b(a.u, a.Vx);
    b(a.ze, a.Tx);
    b(a.ed, a.Bj);
    b(a.Wa, a.ib);
    a.tb.ga(c, 4);
    c += 30;
    a.Qc(c);
  }
}
function OS(a, b) {
  PS(a, 9 == b && !a.l.ob());
  QS(a, 8 == b && !a.i.ob());
  RS(a, 3 == b && !a.j.ob());
}
function SS(a) {
  a.l = new Nz(null);
  a.l.Le("QuestionEditOptionPopup");
  R(a.l, "AnnotateNet_select");
  a.l.ja();
  var b = (c, d) => {
    d = new uG(c, d, !1);
    R(d, "annotateclickable");
    R(d, "AnnotateNet_element");
    d.Le("Option");
    d.uc(c);
    d.V(96, 36);
    vj(d, "left");
    d.v("0px");
    return d;
  };
  a.Lc = b("Capture", "extension_icon-capture_tab");
  Kj(a.Lc, () => {
    a.dispatchEvent(new CustomEvent(a.Ff, {detail:{Id:9, uQuestionEditMode:1}}));
    PS(a, !1);
  });
  a.l.Z(a.Lc);
  a.gf = b("Input", "extension_icon-text");
  Kj(a.gf, () => {
    a.dispatchEvent(new CustomEvent(a.Ff, {detail:{Id:9, uQuestionEditMode:2}}));
    PS(a, !1);
  });
  a.l.Z(a.gf);
  b = 2;
  a.Lc.ga(2, b);
  b += a.Lc.wb() + 2;
  a.gf.ga(2, b);
  b += a.gf.wb() + 2;
  a.l.V(a.Lc.Ra() + 4, b);
}
function TS(a) {
  a.j = new Nz(null);
  a.j.Le("LayoutOptionPopup");
  nj(a.j, "AnnotateNet_select");
  a.j.ja();
  a.ia = Lz("", Hg[1], Jg[4], () => {
    a.mc(a.Ff, {Id:3, selection:1});
  });
  R(a.ia, "AnnotateNet_element");
  a.j.Z(a.ia);
  a.Ha = Lz("", Hg[4], Jg[4], () => {
    a.mc(a.Ff, {Id:3, selection:4});
  });
  R(a.Ha, "AnnotateNet_element");
  a.Ha.Sa(!1);
  a.j.Z(a.Ha);
  a.pa = Lz("", Hg[2], Jg[2], () => {
    a.mc(a.Ff, {Id:3, selection:2});
  });
  R(a.pa, "AnnotateNet_element");
  a.j.Z(a.pa);
  a.Va = Lz("", Hg[5], Jg[5], () => {
    a.mc(a.Ff, {Id:3, selection:5});
  });
  R(a.Va, "AnnotateNet_element");
  a.Va.Sa(!1);
  a.j.Z(a.Va);
  a.N = Lz("", Hg[3], Jg[3], () => {
    a.mc(a.Ff, {Id:3, selection:3});
  });
  R(a.N, "AnnotateNet_element");
  a.j.Z(a.N);
  a.N.ja();
  a.lb = Lz("", Hg[6], Jg[6], () => {
    a.mc(a.Ff, {Id:3, selection:6});
  });
  R(a.lb, "AnnotateNet_element");
  a.j.Z(a.lb);
  a.lb.ja();
}
function US(a) {
  a.i = new Nz(null);
  R(a.i, "AnnotateNet_select");
  a.i.vf(14);
  a.i.Le("QuestionPointsPopup");
  a.i.el.style.overflow = "hidden scroll";
  Hz(a.i);
  R(a.i, "annotate_scrollable_widget");
  a.i.ja();
  let b = 0;
  for (let c = 1; 10 >= c; c++) {
    let d = new Nz(null);
    R(d, "annotateclickable");
    let e = 1 == c ? '1 <font style="font-style: italic">point</font>' : `${c} <font style=\"font-style: italic\">points</font>`;
    d.uc(1 == c ? "1 point" : `${c} points`);
    rj(d, e);
    vj(d, "center");
    R(d, "AnnotateNet_element");
    d.v("0px");
    d.V(72, 36);
    wj(d, 36);
    d.xe("#000000");
    d.ga(0, b);
    b += d.wb();
    Kj(d, () => {
      a.i.$m && (a.dispatchEvent(new CustomEvent(a.Ff, {detail:{Id:8, uPoints:c}})), QS(a, !1));
    });
    a.i.Z(d);
  }
  a.i.V(72, 144);
}
function PS(a, b) {
  if (b) {
    let c = a.left + a.s.vd() + (a.s.Ra() - a.l.Ra()) / 2;
    c < a.left && (c = a.left);
    a.l.ga(c, a.top + a.wb() + 2);
  }
  a.l.Sa(b);
}
function QS(a, b) {
  b && (a.i.el.scrollTop = 0, a.i.ga(a.left + a.u.vd() + (a.u.Ra() - a.i.Ra()) / 2, a.top + a.wb() + 2));
  a.i.Sa(b);
}
function VS(a) {
  a.j.ga(a.left + a.o.vd() + (a.o.Ra() - a.j.Ra()) / 2, a.top + a.wb() + 2);
}
function RS(a, b) {
  if (b) {
    let c = 3 == a.g.Wf;
    a.Ha.Sa(!a.g.Qn());
    a.Va.Sa(!a.g.Qn());
    a.N.Sa(!a.g.Qn());
    let d = 2, e = f => {
      f.ob() && (f.ga(2, d), d += f.wb() + 2);
    };
    e(a.ia);
    e(a.Ha);
    e(a.pa);
    e(a.Va);
    e(a.N);
    e(a.lb);
    a.j.V(a.ia.Ra() + 8 + 2, d);
    VS(a);
    pj(a.ia, a.ia.ur);
    pj(a.pa, a.pa.ur);
    pj(a.N, a.N.ur);
    pj(a.Ha, a.ia.ur);
    pj(a.Va, a.pa.ur);
    pj(a.lb, a.N.ur);
    nj(a.ia, c ? Ig[1] : Hg[1]);
    a.g.Qn() ? nj(a.pa, Hg[4]) : (nj(a.pa, c ? Ig[2] : Hg[2]), nj(a.N, c ? Ig[3] : Hg[3]), nj(a.Ha, c ? Ig[4] : Hg[4]), nj(a.Va, c ? Ig[5] : Hg[5]), nj(a.lb, c ? Ig[6] : Hg[6]));
  }
  a.j.Sa(b);
}
class WS extends Nz {
  constructor() {
    super(null);
    this.Ff = Xg();
    this.xi();
    this.Gb = this.Gb.bind(this);
    this.g = null;
  }
  xi() {
    this.he("annotate-assessment-layout-edit-toolbar");
    zj(this, "rgb(255,255,255)");
    yj(this, "1px solid #c0c0c0");
    R(this, "annotate-plugin-box-sizing-content");
    R(this, "annotate-no-print");
    this.Mb(34);
    this.vf(14);
    this.s = new Nz(null);
    R(this.s, "annotateclickable");
    Kj(this.s, () => OS(this, 9));
    this.m = new uG("Capture", "extension_icon-capture_tab");
    this.m.xe("#000000");
    this.Cf = Lz("", "extension_icon-chevron_down", "", null);
    this.m.V(80, 26);
    wj(this.m, 26);
    this.m.ga(0, 0);
    this.Cf.ga(this.m.Ra(), 0);
    this.s.V(this.m.Ra() + this.Cf.Ra(), 26);
    this.s.Z(this.m);
    this.s.Z(this.Cf);
    this.Z(this.s);
    this.Wx = Mz();
    this.Z(this.Wx);
    this.ed = Lz("", "extension_icon-duplicate", "Clone", () => {
      this.dispatchEvent(new CustomEvent(this.Ff, {detail:{Id:1}}));
    });
    this.ed.ja();
    this.Z(this.ed);
    this.Bj = Mz();
    this.Z(this.Bj);
    this.ze = Lz("", "extension_icon-plus", "Add option", () => {
      this.dispatchEvent(new CustomEvent(this.Ff, {detail:{Id:2}}));
    });
    this.Z(this.ze);
    this.Tx = Mz();
    this.Z(this.Tx);
    this.o = new Nz(null);
    R(this.o, "annotateclickable");
    Kj(this.o, () => OS(this, 3));
    this.ya = Lz("", Hg[1], "", null);
    this.Nl = Lz("", "extension_icon-chevron_down", "", null);
    this.ya.ga(0, 0);
    this.Nl.ga(this.ya.Ra(), 0);
    this.o.V(52, 26);
    this.o.Z(this.ya);
    this.o.Z(this.Nl);
    this.Z(this.o);
    this.Ux = Mz();
    this.Z(this.Ux);
    this.u = new Nz(null);
    R(this.u, "annotateclickable");
    this.u.uc("Points");
    Kj(this.u, () => OS(this, 8));
    this.C = new Nz(null);
    vj(this.C, "center");
    this.C.xe("#000000");
    this.An = Lz("", "extension_icon-chevron_down", "", null);
    this.C.V(32, 26);
    wj(this.C, 26);
    this.C.ga(0, 0);
    this.u.Z(this.C);
    this.An.ga(this.C.Ra(), 0);
    this.u.Z(this.An);
    this.u.V(this.C.Ra() + this.An.Ra(), 26);
    this.Z(this.u);
    this.Vx = Mz();
    this.Z(this.Vx);
    this.Wa = Lz("", "extension_icon-delete", "Delete", () => {
      this.dispatchEvent(new CustomEvent(this.Ff, {detail:{Id:4}}));
    });
    this.Z(this.Wa);
    this.ib = Mz();
    this.Z(this.ib);
    this.tb = Lz("", "extension_icon-close", "Close", () => {
      this.dispatchEvent(new CustomEvent(this.Ff, {detail:{Id:5}}));
    });
    this.Z(this.tb);
    SS(this);
    TS(this);
    US(this);
  }
  Gb() {
    this.ed.Sa(!0);
    this.Bj.Sa(!0);
    var a = this.g.m;
    pj(this.ya, this.ya.ur);
    var b = this.g.i.jd();
    let c = Jg[b], d = 3 == this.g.Wf ? Ig[b] : Hg[b];
    this.g.Qn() && 2 == b && (d = Hg[4]);
    nj(this.ya, d);
    this.o.uc(c);
    this.o.zm(a);
    this.Nl.zm(a);
    this.ya.zm(a);
    rj(this.C, `${this.g.i.Aa.ux} <font style=\"font-style: italic\">pt</font>`);
    a = this.g.i.Dt();
    b = this.m;
    b.Vf = 1 == a ? "Capture" : "Input";
    b.i.el.innerText = b.Vf;
    tG(this.m, 1 == a ? "extension_icon-capture_tab" : "extension_icon-text");
    this.s.uc(1 == a ? "Capture" : "Input");
    a = !this.g.i.Aa.Aq;
    this.s.zm(a);
    this.m.sf = a ? !0 : !1;
    bm(this.m.el, a, !0, !0);
    this.Cf.zm(a);
    this.ze.uc(14 == this.g.Wf ? "Insert blank" : "Add option");
    this.ze.zm(this.g.g && this.g.l);
  }
  ja() {
    super.ja();
    RS(this, !1);
    QS(this, !1);
    PS(this, !1);
    MS(this);
  }
  jb(a) {
    super.jb(a);
    this.j.jb(a);
    this.i.jb(a);
    this.l.jb(a);
  }
  Bd() {
    this.l.Bd();
    this.j.Bd();
    this.i.Bd();
    super.Bd();
  }
  hc(a) {
    return super.hc(a) || this.j.hc(a) || this.i.hc(a) || this.l.hc(a) ? !0 : !1;
  }
  Kd(a) {
    this.l.Kd(a);
    this.j.Kd(a);
    this.i.Kd(a);
    super.Kd(a);
  }
  Zb() {
    return "QuestionLayoutEditToolbar";
  }
  U() {
    MS(this);
    this.j.U();
    this.i.U();
    this.l.U();
    super.U();
  }
}
;function XS(a, b) {
  a.hh.offsetTop = b;
  b += (a.hh.Ka() - a.Ka()) / 2;
  a.offsetTop = b;
}
class YS extends Wm {
  constructor(a) {
    super();
    this.Sp = a;
    this.hh = new Wm();
    this.Qc(14);
    this.Mb(14);
    this.kk = this.columnNumber = 1;
    this.Ho = "";
  }
  Jg(a) {
    super.Jg(a);
    "placeholderElement" in a && this.hh.Jg(a.placeholderElement);
    "columnNumber" in a && (this.columnNumber = a.columnNumber);
    "rowNumber" in a && (this.kk = a.rowNumber);
    "strOptionTextData" in a && (this.Ho = a.strOptionTextData);
  }
  rf() {
    let a = super.rf();
    a.placeholderElement = this.hh.rf();
    a.columnNumber = this.columnNumber;
    a.rowNumber = this.kk;
    a.strOptionTextData = this.Ho;
    return a;
  }
  $f(a) {
    let b = super.$f(a);
    b.placeholderElement = this.hh.$f(a);
    b.rowNumber = this.kk;
    return b;
  }
  kl(a) {
    super.kl(a);
    this.hh.kl(a);
  }
}
class ZS extends Kz {
  constructor(a) {
    super();
    this.Wf = a;
    this.to = 4;
    this.g = [];
    this.rk = 2 == this.Wf ? 0 : 1;
  }
  Bt() {
    return 2 == this.Wf ? Ng.Fw : Ng.GB;
  }
  Px() {
    return !0;
  }
  aq() {
    let a = [];
    a.push(Fm(this.qc));
    for (let b = 0; b < this.g.length; b++) {
      a.push(Fm(this.g[b].hh));
    }
    rS(this, a);
  }
  Dv(a) {
    if (this.Qn()) {
      super.Dv(a);
    } else {
      a = a.lstRect;
      var b = this.g.length + 1;
      if (a && a.length == b) {
        b = 0;
        sS(this, a[b]);
        this.se.push({strKey:"Q", strDataURI:this.dd});
        b++;
        for (let c = 0; c < this.g.length; c++) {
          let d = this.g[c], e = a[b];
          b++;
          d.dd = e.imageBase64;
          let f = 1;
          "imageScale" in e && (f = e.imageScale);
          d.hh.Jp = f;
          this.se.push({strKey:"O" + c, strDataURI:d.dd});
        }
      }
      console.log(this.se);
    }
  }
  Gm(a) {
    super.Gm(a);
    let b = new Image();
    b.onload = () => {
      this.se = [];
      "" == this.dd && (this.dd = nS(b, this.qc, a).replace(this.rp, ""), this.Jp = 1);
      this.se.push({strKey:"Q", strDataURI:this.dd});
      if (2 == this.Wf || 3 == this.Wf) {
        for (let c = 0; c < this.g.length; c++) {
          "" == this.g[c].dd && (this.g[c].dd = nS(b, this.g[c].hh, a).replace(this.rp, ""), this.g[c].Jp = 1), this.se.push({strKey:"O" + c, strDataURI:this.g[c].dd});
        }
      }
      console.log(this.se);
    };
    b.src = a.data;
  }
  Am() {
    let a = super.Am();
    a.uCorrectIndex = this.rk;
    return a;
  }
  i() {
    return this.Oy;
  }
  JE(a) {
    if (a && 1 < a.options.length) {
      this.se = [];
      var b = a.rc;
      let k = a.options;
      this.Zd = a.layoutType;
      if (si()) {
        var c = P.D, d = parseInt(a.pageIndex);
        if (-1 != d) {
          let l = ox(c, d), n = Ez(c, d), p = c.scale, t = ll(c, d);
          var e = hl(c, c.uq, new il(c.scrollX, c.scrollY));
          let x = {x:-e.$a + c.scrollX, y:-e.Ua + c.scrollY, width:jl(c, d), height:kl(c, d), scale:p};
          c = (D, G) => {
            var I = D.rc;
            let Q = G.hh;
            Q.Uh = 4;
            G.kl(t);
            G.wf(Object.assign({}, x));
            Q.wf(Object.assign({}, x));
            let X = n + (I.left - G.Ra() - Q.Uh) * p;
            G.offsetLeft = X;
            Q.Mb(Math.max(14, parseInt(I.height)));
            Q.Qc(I.width);
            X = I.left;
            Q.offsetLeft = n + X * p;
            XS(G, l + I.top * p);
            G.dd = D.imageBase64;
            I = 1;
            "imageScale" in D && (I = D.imageScale);
            Q.Jp = I;
            console.log(`[Assessment] option ${D.strOption} layout 
                            ${this.Zd} ${G.kk}x${G.columnNumber}`);
          };
          this.qc.kl(t);
          this.qc.wf(Object.assign({}, x));
          this.qc.Mb(b.height);
          this.qc.Qc(b.width);
          this.qc.offsetLeft = n + b.left * p;
          this.qc.offsetTop = l + b.top * p;
          this.dd = a.imageBase64;
          b = 1;
          "imageScale" in a && (b = a.imageScale);
          this.qc.Jp = b;
          this.se.push({strKey:"Q", strDataURI:this.dd});
          a = 4 <= this.Zd;
          d = (b = 3 == this.Zd || 6 == this.Zd) ? 3 : 2;
          for (e = 0; e < k.length; e++) {
            let D = new YS(this);
            var f = e + 1;
            1 != this.Zd && 4 != this.Zd && (2 == f || b && 3 == f ? a ? D.kk = f : D.columnNumber = b && 3 == f ? 3 : 2 : 1 < f && (f = this.g[this.g.length - d]) && (D.kk = f.kk, D.columnNumber = f.columnNumber));
            c(k[e], D);
            this.g.push(D);
            this.se.push({strKey:"O" + e, strDataURI:this.g[e].dd});
          }
          console.log(this.se);
          return !0;
        }
      }
    }
    return !1;
  }
  Wl(a) {
    super.Wl(a);
    if (1 == this.Zd || 4 == this.Zd) {
      for (a = 0; a < this.to; a++) {
        var b = void 0, c = new YS(this), d = c.hh;
        if (this.g.length) {
          b = this.g[this.g.length - 1];
          var e = b.hh;
          c.Jg(b.rf());
          4 == this.Zd ? (b = e.ab() + this.Ba(8) + this.Ba(Az.Zg) + this.Ba(8), c.offsetLeft = e.offsetLeft + b, b = c.ab() + d.Uh, d.offsetLeft = c.offsetLeft + b) : (d = d.Ka() + this.Ba(4), XS(c, e.offsetTop + d));
        } else {
          e = this.qc;
          b = Em(e);
          c.wf(Object.assign({}, e.A));
          d.wf(Object.assign({}, e.A));
          c.kl(e.S);
          this.ke() && !this.Qn() && (d.Uh = 8 + 12 * b);
          var f = (c.width + 1) * b + d.Uh;
          d.Mb(this.Mo());
          d.Qc(4 == this.Zd ? (this.i() - f) / 2 : this.i() - f);
          d.offsetLeft = e.offsetLeft + f;
          f = 1 * b;
          c.offsetLeft = e.offsetLeft + f;
          d = e.Ka() + this.Ba(8);
          XS(c, e.offsetTop + d);
        }
        this.g.push(c);
      }
    } else {
      for (a = 1; a <= this.to; a++) {
        e = 4 <= this.Zd;
        c = new YS(this);
        d = c.hh;
        if (this.g.length) {
          if (f = (b = 3 == this.Zd || 6 == this.Zd) ? 3 : 2, 2 == a || b && 3 == a) {
            f = this.g[this.g.length - 1];
            let k = f.hh;
            c.Jg(f.rf());
            e ? (c.kk = a, d = d.Ka() + this.Ba(4), XS(c, f.hh.offsetTop + d)) : (c.columnNumber = b && 3 == a ? 3 : 2, e = k.ab() + this.Ba(8) + this.Ba(Az.Zg) + this.Ba(8), c.offsetLeft = k.offsetLeft + e, e = c.ab() + d.Uh, d.offsetLeft = c.offsetLeft + e);
          } else {
            1 < a && (b = this.g[this.g.length - f], c.Jg(b.rf()), e ? (e = b.hh, b = e.ab() + this.Ba(8) + this.Ba(Az.Zg) + this.Ba(8), c.offsetLeft = e.offsetLeft + b, b = c.ab() + d.Uh, d.offsetLeft = c.offsetLeft + b) : (e = d.Ka() + this.Ba(4), XS(c, b.hh.offsetTop + e), c.offsetLeft = b.offsetLeft, d.offsetLeft = b.hh.offsetLeft));
          }
        } else {
          e = this.qc, b = Em(e), c.wf(Object.assign({}, e.A)), d.wf(Object.assign({}, e.A)), c.kl(e.S), c.columnNumber = 1, this.ke() && !this.Qn() && (d.Uh = 8 + 12 * b), f = (c.width + 1) * b + d.Uh, d.Mb(this.Mo()), d.Qc((this.i() - f) / 2), d.offsetLeft = e.offsetLeft + f, f = 1 * b, c.offsetLeft = e.offsetLeft + f, b = e.Ka() + this.Ba(8), d.offsetTop = e.offsetTop + b, XS(c, e.offsetTop + b);
        }
        this.g.push(c);
      }
    }
  }
  cA(a, b, c) {
    let d = new YS(this);
    var e = d.hh;
    let f, k = 3 < this.Zd;
    var l = this.g[a];
    a = l.hh;
    f = Em(l);
    d.Jg(l.rf());
    e.Mb(this.Mo());
    l = (d.width + 1) * f + e.Uh;
    l = 1 == this.Zd ? this.i() - l : (this.i() - l) / 2;
    e.offsetLeft + l * f > b && (l -= (e.offsetLeft + l * f - b) / f);
    l < c && (l = c);
    e.Qc(l);
    k ? (b = a.ab() + this.Ba(8) + this.Ba(Az.Zg) + this.Ba(8), d.offsetLeft = a.offsetLeft + b, b = d.ab() + e.Uh, e.offsetLeft = d.offsetLeft + b) : (e = a.Ka() + this.Ba(4), XS(d, a.offsetTop + e));
    this.g.push(d);
    return d;
  }
  Fa(a) {
    if (!A(a) && (super.Fa(a), a.nOptions && (this.to = a.nOptions), "uCorrectIndex" in a && (this.rk = parseInt(a.uCorrectIndex)), a.lstQuestionOptionData)) {
      a = a.lstQuestionOptionData;
      for (let b = 0; b < a.length; b++) {
        let c = new YS(this);
        c.Jg(a[b]);
        this.g.push(c);
      }
    }
  }
  Fb(a) {
    super.Fb(a);
    let b = [];
    for (let c = 0; c < this.g.length; c++) {
      b.push(this.g[c].rf());
    }
    a.lstQuestionOptionData = b;
    a.uCorrectIndex = this.rk;
    a.nOptions = this.to;
  }
  $f(a) {
    var b = super.$f(a);
    let c = [];
    for (let d = 0; d < this.g.length; d++) {
      c.push(this.g[d].$f(a));
    }
    b.lstQuestionOptionData = c;
    return b;
  }
  Lt(a) {
    a = this.g.indexOf(a);
    -1 != a && this.g.splice(a, 1);
  }
}
class $S extends ES {
  constructor(a, b, c) {
    super(a, b);
    this.H = c;
    this.g = new Nz(null);
    a = String.fromCharCode(97 + this.H.Qb);
    this.Aa.ke() || (a = `Option (${a})`);
    Ej(this.g, a);
    vj(this.g, "center");
    this.g.xe("#000000");
    zj(this.g, "rgba(255, 255, 255, 0.65)");
    this.g.vf(12);
    this.Aa.ke() ? (this.g.V(12, 14), wj(this.g, 14), xj(this.g, 4 - Kz.$b)) : (R(this.g, "annotateellipsis"), R(this.g, "AnnotateCoveredWidget"));
    this.g.Sa(!1);
    this.Z(this.g);
    this.eb.Wr("Add a distractor");
  }
  gl(a) {
    super.gl(a);
    var b = this.H.Ta();
    a = !A(a) && 0 < a.length ? a.trim() : "";
    b.Ho = a;
    mS(b.Sp, !1);
  }
  xk(a) {
    super.xk(a);
    this.Aa.ke() && this.g.Sa(a);
  }
  i(a) {
    this.g.Sa(a);
  }
  oh(a) {
    super.oh(a);
    !this.Aa.ke() && this.i(a);
  }
  mg(a) {
    this.H.$d();
    super.mg(a);
  }
  We() {
    return this.C ? 22 : 14;
  }
  Ke() {
    return this.C ? 20 : 14;
  }
  hl(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      var b = this.lc + (a.clientX - this.Eb) / this.scale;
      a = this.zc + (a.clientY - this.Ib) / this.scale;
      var c = Dz(this), d = this.Ba(b);
      this.H.Wa.ob() && (d += this.Ca.Ba(4) + this.H.Wa.ab());
      var e = !1;
      b >= this.Ke() && this.left + d <= c.Se && (this.width = b, e = !0);
      b = this.top + this.Ba(a);
      this.jo && (d = this.H.rd() + this.H.Ka(), b >= d && b <= c.yd ? (this.height = a, e = !0) : b < d && (c = d - b, this.H.rd() - c >= this.top && (this.H.fc(this.H.top - c), this.height = a, e = !0)));
      e && (this.V(this.width, this.height), this.De(this.left, this.top));
    } else {
      this.Ai(a);
    }
  }
  zi(a) {
    var b = this.width;
    let c = this.height;
    if (this.lc != b || this.zc != c) {
      var d = 4 <= this.H.jd(), e = !1, f = Dz(this), k = this.H.ab() + this.Ca.Uh + this.ab() + this.Ca.Ba(4);
      this.H.Wa.ob() && (k += this.H.Wa.ab());
      if (d) {
        d = this.left + this.ab() + this.Ca.Ba(4);
        this.H.Wa.ob() && (d += this.H.Wa.ab());
        var l = aT(this.H.H, this.H.Qb);
        l && l.left < d && bT(l, d, f.Se) && (b = (l.left - (d - this.ab())) / this.scale, e = !0);
        4 < this.H.jd() && (f = cT(this.H, this.top + this.Ka(), f.yd), f.vF || (c = (f.yH - this.top) / this.scale, e = !0));
      } else {
        b = this.H;
        e = this.H.Ta().columnNumber;
        var n = this.H.left;
        l = f.Se;
        var p = b.ha.width, t = dT(b.H, e, l);
        e < b.Gg.Zd && n + k > t && (t = l, 3 == b.Gg.Zd && 1 == e && (t = b.H.g[e + 1].left), n += k, k = eT(b.H, e + 1), n + k <= t ? fT(b.H, e, n) : 3 == b.Gg.Zd && 1 == e ? (t = n + k, p = eT(b.H, e + 2), t + p <= l ? (fT(b.H, e + 1, t), fT(b.H, e, n)) : (fT(b.H, e + 1, l - p), t = dT(b.H, e + 1, l), fT(b.H, e, t - k))) : fT(b.H, e, t - k), k = b.ha.left + b.Ca.Ba(4), b.Wa.ob() && (k += b.H.ab()), t = dT(b.H, e, l), p = (t - k) / b.scale);
        b = p;
        e = b != this.width;
        (l = aT(this.H.H, this.H.Qb)) && l.ha.top < this.top + this.Ka() + this.Ba(Kz.$b) && l.Rn(this.top + this.Ka(), f.yd, d) && (c = (l.ha.top - (this.top + this.Ba(Kz.$b))) / this.scale, e = !0);
      }
      e && this.V(b, c);
    }
    super.zi(a);
  }
  $o(a) {
    a = this.eb.No(a, this.We());
    let b = !0, c = Dz(this);
    if (4 <= this.H.jd()) {
      b = gT(this.H, 0, this.top + (a + 1) * this.scale, c.yd, !1);
    } else {
      let d = aT(this.H.H, this.H.Qb);
      d && (b = d.Rr(this.top, a, c.yd));
    }
    b ? this.V(this.width, a) : this.eb.Dm();
  }
  Qc(a) {
    super.Qc(a);
    this.j();
  }
  Mb(a) {
    super.Mb(a);
    this.l();
    this.Aa.ke() || wj(this.g, a);
  }
  Ee(a) {
    super.Ee(a);
    this.l();
  }
  Nd(a) {
    if (this.H.Ca) {
      let b = (this.H.Ra() + Az.DE) * this.H.scale;
      this.H.left + b > a && (a = this.H.left + b);
    }
    super.Nd(a);
    this.Aa.ke() && this.g.Nd(-(this.g.Ra() + 8));
    this.j();
  }
  l() {
    if (this.H.Gg.Px()) {
      let a = (this.Ka() - this.H.Wa.Ka()) / 2;
      this.H.Wa.Ee(this.top + a);
    }
  }
  j() {
    if (this.H.Gg.Px()) {
      let a = this.ab() + this.Ba(4);
      this.H.Wa.Nd(this.left + a);
    }
  }
  Ig() {
    uj(this, 15 == ki.g ? "auto" : "none");
    this.Jm();
  }
  ec(a) {
    super.ec(a);
    this.sd(a);
    !this.Aa.ke() && this.i(a);
    this.Jm();
  }
  Jm() {
    let a = this.ac ? "all-scroll" : "default";
    !this.ac && ui() ? (a = "pointer", this.eb && sj(this.eb, "pointer")) : this.eb && sj(this.eb, "text");
    sj(this, a);
    this.uc("all-scroll" == a ? "Drag to move" : "");
  }
  Lo(a) {
    this.ac || (a.preventDefault(), a.stopPropagation());
  }
  Zb() {
    return "MCQOptionPlaceHolder";
  }
}
function bT(a, b, c) {
  let d = !1, e = a.Qo();
  if (b > a.left) {
    let f = aT(a.H, a.Qb);
    f ? (d = bT(f, b + e, c)) ? hT(a, f.left - e) : hT(a, b) : b + e > c ? (d = !0, hT(a, c - e)) : hT(a, b);
  }
  return d;
}
function cT(a, b, c) {
  let d = a.Ta().kk, e = !0, f = a.H.Lr(d + 1, 0, c) - a.Ba(Kz.$b);
  if (b > f && 1 == d) {
    let k = b - f;
    if (d < a.Gg.Zd - 3) {
      for (let l = d; l < a.H.g.length; l += a.H.jd() - 3) {
        let n = a.H.g[l];
        n && n.ha.top - a.Ba(Kz.$b) < b && (n.ha.top + k + n.ha.Ka() <= c ? iT(n, k) : (jT(n, c - n.ha.Ka()), e = !1));
      }
      e || (f = a.H.Lr(d + 1, 0, c) - a.Ba(Kz.$b));
    }
  }
  return {yH:f, vF:e};
}
function gT(a, b, c, d, e) {
  let f = !0, k = a.Ta().kk, l = a.H.Lr(k + 1, 0, d) - a.Ba(Kz.$b);
  c <= l || (e || (b = c - l), c = null, k < a.Gg.Zd - 3 && (c = a.H.g[k]), c ? f = gT(c, b, c.kg(b), d, !0) : f = !1);
  f && e && kT(a.H, b, k);
  return f;
}
function lT(a, b) {
  a.Pu = a.el;
  a.Pu.type = a.Gg.Bt() == Ng.Fw ? "radio" : "checkbox";
  a.Pu.checked = b;
  a.Le(a.Zb() + "_RadioButton");
  a.Pu.onchange = () => {
    a.dispatchEvent(new CustomEvent(a.Vz, {detail:{}}));
  };
  R(a, "annotateclickable");
  a.jk = new Nz(null);
  uj(a.jk, "auto");
  sj(a.jk, "pointer");
  a.jk.jb((4).toString());
  a.jk.ga(0, 0);
  a.jk.Sa(!1);
  Kj(a.jk, () => a.H.u(null));
}
function mT(a, b) {
  Mj(b, a.Fh, a.Oj, a.Nj, a.Pj);
}
function hT(a, b) {
  a.Hf(b);
  b = a.ab() + a.ha.Ca.Uh;
  a.ha.Hf(a.left + b);
  a.$d();
}
function iT(a, b) {
  a.fc(b + a.top);
  a.ha.fc(b + a.ha.top);
  a.$d();
}
function jT(a, b) {
  let c = a.top - a.ha.top;
  a.ha.fc(b);
  a.fc(b + c);
  a.$d();
}
function nT(a, b, c, d) {
  let e = !0;
  var f = a.left + b >= a.Kx(c);
  f && (f = a.left + b + a.Qo() <= a.dA(d), f || ((f = aT(a.H, a.Qb)) ? e = nT(f, b, c, d) : e = !1), e && hT(a, a.left + b));
  return e;
}
function oT(a, b, c, d) {
  let e = !0;
  if (!(a.vd() + b > a.Kx(c))) {
    let f = pT(a.H, a.Qb);
    f ? e = oT(f, b, c, d) : e = !1;
  }
  e && hT(a, a.vd() + b);
  return e;
}
function qT(a, b, c, d) {
  let e = !0, f = a.Ta().kk;
  var k = rT(a.H, d ? c : 0, f, b);
  let l = a.H.Lr(f + 1, 0, c);
  k > l && (d || (b = k - l), k = null, f < a.Gg.Zd - 3 && (k = a.H.g[f]), k ? e = qT(k, b, c, !0) : e = !1);
  e && d && kT(a.H, b, f);
  return e;
}
function sT(a, b, c, d, e) {
  let f = !1;
  var k = dT(a.H, b, e);
  c + d <= k ? f = !0 : b < a.Gg.Zd && c + d > k && (k = e, 3 == a.Gg.Zd && 1 == b && (k = a.H.g[b + 1].left - a.Ba(4)), c = c + d + a.Ba(4), d = eT(a.H, b + 1), c + d <= k ? (fT(a.H, b, c), f = !0) : 3 == a.Gg.Zd && 1 == b && (k = c + d + a.Ba(4), d = eT(a.H, b + 2), k + d <= e && (fT(a.H, b + 1, k), fT(a.H, b, c), f = !0)));
  return f;
}
function tT(a, b) {
  (b = b || a.H.N) ? pj(a, "annotateEventBlocker") : R(a, "annotateEventBlocker");
  a.jk.Sa(!b && a.H.m);
}
function uT(a, b, c) {
  a.Pu.name = b;
  a.Pu.value = c;
}
class Az extends Nz {
  static get DE() {
    return 4;
  }
  static get Zg() {
    return 18;
  }
  constructor(a, b, c, d, e) {
    super("input");
    this.Qb = a;
    this.Vz = Xg();
    this.Gg = c;
    this.Uc = b;
    this.H = d;
    this.So();
    lT(this, e);
    this.zv();
    this.hA();
  }
  Ta() {
    return this.Ca;
  }
  $d() {
    this.Ta().$d();
  }
  mg(a) {
    super.mg(a);
    Fz(this);
    this.$d();
    mS(this.Gg, !0);
  }
  So() {
    this.Hi = !1;
    this.Te = this.pe = 0;
    this.lg = this.lg.bind(this);
    this.Oj = this.Oj.bind(this);
    this.Nj = this.Nj.bind(this);
    this.Pj = this.Pj.bind(this);
    this.Fh = this.Fh.bind(this);
    this.tf = this.tf.bind(this);
  }
  tf() {
    mT(this, !1);
    this.top == this.tg && this.left == this.sg ? this.H.u(null) : (Bz(this), this.mc(this.bl, {op:!0}));
  }
  lg(a) {
    this.ha.fl(a) && (this.ha.eb.hc(a) || a.preventDefault(), this.sg = this.left, this.tg = this.top, this.pe = a.clientX, this.Te = a.clientY, mT(this, !0));
  }
  Lr(a, b) {
    return this.H.Lr(this.Ta().kk, a, b);
  }
  dA(a) {
    return this.H.dA(this.Qb, a);
  }
  Kx(a) {
    return this.H.Kx(this.Qb, a);
  }
  jd() {
    return this.Gg.Zd;
  }
  Fh(a) {
    if (!kh(a)) {
      return this.tf(), !1;
    }
    a.preventDefault();
    if (this.Hi) {
      var b = a.clientX - this.pe;
      let p = a.clientY - this.Te, t = this.left + b;
      var c = this.top + p, d = Dz(this), e = this.Gg.Zd, f = d.pageLeft + d.Kl, k = 0 > this.Qb - e;
      if (4 <= e) {
        if (c = this.Ta().kk, e -= 3, k = 0 > this.Qb - e) {
          if (t >= d.pageLeft && vT(this.H, b, f) <= f) {
            for (k = this.Qb; k < this.H.g.length; k += e) {
              f = this.H.g[k], hT(f, f.vd() + b);
            }
            this.pe = a.clientX;
          }
          e = this.H.Ka() + this.Ba(Kz.$b) + this.H.rd();
          e = rT(this.H, e, c - 1, 0);
          this.H.Lr(c, p, this.ha.top + p) >= e && qT(this, p, d.yd, !1) && (kT(this.H, p, c), this.Te = a.clientY);
        } else {
          nT(this, b, d.pageLeft, d.Se) && (this.pe = a.clientX);
        }
      } else {
        var l = 1 == e;
        b = this.Ta().columnNumber;
        if (k) {
          if (l) {
            t >= d.pageLeft && t <= f - eT(this.H, b) && (this.H.g.forEach(D => hT(D, t)), this.pe = a.clientX);
          } else {
            if (l = !1, t >= this.H.lb(b) && (l = eT(this.H, b), l = sT(this, b, t, l, f)), l) {
              for (f = this.Qb; f < this.H.g.length; f += e) {
                hT(this.H.g[f], t);
              }
              this.pe = a.clientX;
            }
          }
        }
        var n = e - 1;
        f = !1;
        l = this.ha.top + p;
        let x = this.H.Ka() + this.Ba(Kz.$b) + this.H.rd();
        !k && this.Qb > n && (n = this.H.g[this.Qb - e], x = n.ha.Ka() + this.Ba(Kz.$b) + n.ha.rd());
        l >= x && (f = !0);
        d = d.pageTop + d.Jl;
        if (k && (b = wT(this.H, this.Qb, b)) && b.kg(p) > d) {
          return;
        }
        if (0 <= c && f) {
          b = !0;
          k || (f = aT(this.H, this.Qb)) && (b = f.Jt(this.kg(p), d));
          if (!b) {
            return;
          }
          this.ha.fc(this.ha.top + p);
          this.fc(c);
          if (k) {
            for (k = this.Qb + e; k < this.H.g.length; k += e) {
              d = this.H.g[k], d.fc(d.top + p), d.ha.fc(d.ha.top + p), d.$d();
            }
          }
          this.Te = a.clientY;
        }
      }
    }
    return !0;
  }
  Jt(a, b) {
    let c = !0, d = a - this.ha.top;
    if (0 < d) {
      if (a = this.kg(d), a <= b) {
        let e = aT(this.H, this.Qb);
        e && (c = e.Jt(a, b));
        c && (this.fc(this.top + d), this.ha.fc(this.ha.top + d), this.$d());
      } else {
        c = !1;
      }
    }
    return c;
  }
  kg(a) {
    return this.ha.top + a + this.ha.Ka() + this.Ba(Kz.$b);
  }
  Oj(a) {
    a.preventDefault();
    this.tf();
  }
  Nj(a) {
    a.preventDefault();
    mT(this, !1);
  }
  Pj(a) {
    a.preventDefault();
  }
  yt(a) {
    this.Pu.checked = a;
  }
  iE() {
    return new $S(this.Uc, this.Gg, this);
  }
  hA() {
    this.ha = this.iE();
    this.ha.el.addEventListener("pointerdown", this.lg, {capture:!0, passive:!1});
    this.ha.el.addEventListener("touchstart", this.il, {capture:!0, passive:!1});
    Kj(this.ha.eb, () => this.H.u(null));
    this.Fv = this.pA.bind(this);
    this.Gv = this.Yo.bind(this);
    this.mj = this.qA.bind(this);
    this.Ev = this.oA.bind(this);
  }
  zv() {
    this.Wa = new zz();
    zj(this.Wa, "rgba(255, 255, 255, 0.65)");
    this.Wa.jb((4).toString());
    R(this.Wa, "extension_icon-delete");
    this.Wa.uc("Delete");
    this.Wa.Le(this.Zb() + "_DeleteButton");
    this.Wa.V(Az.Zg, Az.Zg);
    Kj(this.Wa, () => this.H.Lt(this));
    this.Wa.Sa(!1);
  }
  Ir() {
    return this.Wa.ob() ? this.Wa.left + this.Wa.ab() : this.ha.vd() + this.ha.ab();
  }
  VD(a) {
    a ? this.ha.ig.el.addEventListener("pointerdown", this.Fv, {capture:!0, passive:!1}) : this.ha.ig.el.removeEventListener("pointerdown", this.Fv, {capture:!0});
    this.ha.lB = a;
    CS(this.ha, a);
  }
  Rr(a, b, c) {
    let d = !0;
    a = a + this.Ba(b + Kz.$b) - this.ha.top;
    0 < a && (this.kg(a) <= c ? ((b = aT(this.H, this.Qb)) && (d = b.Rr(this.ha.top + a, this.ha.height, c)), d && (this.fc(this.top + a), this.ha.fc(this.ha.top + a), this.$d())) : d = !1);
    return d;
  }
  Yx(a) {
    let b = !0;
    a = this.H.top + this.Ba(a) + this.Ba(Kz.$b);
    if (a > this.ha.top) {
      var c = a - this.ha.top;
      let d = Dz(this);
      4 <= this.jd() ? b = gT(this, 0, this.kg(c), d.yd, !1) : (c = aT(this.H, this.Qb)) && (b = c.Rr(a, this.ha.height, d.yd));
      b && (c = this.top - this.ha.top, this.fc(a + c), this.ha.fc(a));
    }
    return b;
  }
  Rn(a, b, c) {
    let d = !1;
    var e = this.Ba(this.ha.height + Kz.$b);
    let f = this.top - this.ha.top;
    var k = this.ha.top;
    let l = aT(this.H, this.Qb);
    4 <= this.jd() || !l ? this.ha.top - this.Ba(Kz.$b) < a && (a + e > b ? (k = b - e, d = !0) : k = a + this.Ba(Kz.$b)) : (d = l.Rn(a + e, b, c)) ? k = l.ha.top - e : k = a + this.Ba(Kz.$b);
    if (c) {
      a = this.H;
      e = this.Ta().kk;
      c = 0;
      if (0 < e) {
        for (--e; e < a.g.length; e += a.jd() - 3) {
          a.g[e].ha.Ka() > c && (c = a.g[e].ha.Ka());
        }
      }
      a = c;
      b = cT(this, k + a, b);
      b.vF || (k = b.yH - a, d = !0);
      b = this.H;
      a = this.Ta().kk;
      if (0 < a) {
        for (--a; a < b.g.length; a += b.jd() - 3) {
          jT(b.g[a], k);
        }
      }
    } else {
      this.ha.fc(k), this.fc(this.ha.top + f), this.$d();
    }
    return d;
  }
  pA(a) {
    a.target == this.ha.ig.el && (a.preventDefault(), a.stopPropagation(), this.ha.Eb = a.clientX, this.ha.Ib = a.clientY, this.ha.lc = this.ha.width, this.ha.zc = this.ha.height, this.ha.sg = this.ha.left, this.ha.tg = this.ha.top, Mj(!0, this.Gv, this.mj, this.mj, this.Ev));
  }
  Yo(a) {
    if (kh(a)) {
      a.preventDefault();
      var b = this.Ra() + Az.DE;
      b *= this.scale;
      var c = this.ha.lc - (a.clientX - this.ha.Eb) / this.scale;
      a = this.ha.zc - (a.clientY - this.ha.Ib) / this.scale;
      var d = this.ha.left + this.ha.ab() - c * this.ha.scale, e = this.ha.top + this.ha.Ka() - a * this.ha.scale;
      c >= this.ha.Ke() && d >= this.vd() + b && (this.ha.Qc(c), this.ha.Hf(d), this.ha.Ca.Uh = d - (this.vd() + this.ab()));
      b = !1;
      0 <= this.Qb - this.Gg.Zd && 4 != this.Gg.Zd ? (c = this.H.g[this.Qb - this.Gg.Zd], a * this.scale >= this.Ka() && e >= c.ha.rd() + c.ha.Ka() + this.Ba(Kz.$b) && (b = !0)) : a * this.scale >= this.Ka() && e >= this.H.rd() + this.H.Ka() + this.Ba(Kz.$b) && (b = !0);
      b && e > this.top && (b = !1, e + this.Ba(a) >= this.top + (e - this.top) + this.Ka() && (this.fc(this.top + (e - this.top)), b = !0));
      b && (this.ha.Mb(a), this.ha.fc(e));
      this.ha.jy();
    } else {
      this.mj(a);
    }
  }
  We() {
    return this.Ka() + this.Gg.qc.Ba(2);
  }
  qA(a) {
    a && a.preventDefault();
    Mj(!1, this.Gv, this.mj, this.mj, this.Ev);
    this.ha.lc == this.ha.width && this.ha.zc == this.ha.height || this.mc(this.bl, {op:!0});
  }
  oA(a) {
    a.preventDefault();
  }
  jb(a) {
    super.jb(a);
    this.jk.jb(a);
    this.ha.jb(a);
    this.Wa.jb(a);
  }
  ef(a) {
    super.ef(a);
    this.jk.ef(a);
    this.Wa.ef(a);
  }
  Zo(a) {
    this.Hi = this.Ey = a;
    this.VD(a);
  }
  Tj(a) {
    this.ha.Tj(a);
  }
  Kd(a) {
    super.Kd(a);
    this.ha && this.ha.Kd(a);
    this.Wa && this.Wa.Kd(a);
    this.jk && this.jk.Kd(a);
  }
  Cd(a) {
    this.ha.xk(this.H.C);
    this.ha.eb.Bi(a.Ho);
    this.ha.Cd(a.hh);
    super.Cd(a);
    vz(this);
    vz(this.ha);
  }
  Bd() {
    super.Bd();
    this.ha.Bd();
    this.Wa.Bd();
    this.jk.Bd();
  }
  Sa(a) {
    super.Sa(a);
    this.ha.Sa(a);
  }
  sd(a) {
    super.sd(a);
    this.Tj(a);
    this.Zo(a);
    tT(this, a);
  }
  ec(a) {
    super.ec(a);
    this.ha.ec(a);
    this.jb(a ? "20" : "19");
  }
  hc(a) {
    return super.hc(a) || this.ha.hc(a) || this.Wa.hc(a) ? !0 : !1;
  }
  Nd(a) {
    super.Nd(a);
    this.jk.Nd(a);
  }
  Ee(a) {
    super.Ee(a);
    this.jk.Ee(a);
  }
  Qo() {
    let a = this.ab() + this.ha.Ca.Uh + this.ha.ab() + this.Ca.Ba(4);
    this.Wa.ob() && (a += this.Wa.ab());
    return a;
  }
  V(a, b) {
    super.V(a, b);
    this.jk.V(a, b);
  }
  U() {
    super.U();
    this.ha.U();
    this.Wa.U();
  }
  Zb() {
    return "AssessmentMcqQuestionOption";
  }
}
function aT(a, b) {
  let c = a.jd(), d = b + a.jd();
  4 <= c && (d = b + (c - 3));
  return a.g[d];
}
function pT(a, b) {
  let c = b - a.jd();
  4 <= a.jd() && (c = b - (a.jd() - 3));
  return a.g[c];
}
function rT(a, b, c, d) {
  if (0 < c && c < a.jd() - 3) {
    for (--c; c < a.g.length; c += a.jd() - 3) {
      let e = a.g[c].kg(d);
      e > b && (b = e);
    }
  }
  return b;
}
function kT(a, b, c) {
  if (0 < c) {
    for (--c; c < a.g.length; c += a.jd() - 3) {
      iT(a.g[c], b);
    }
  }
}
function vT(a, b, c) {
  return (a = a.g[a.g.length - 1]) ? a.Ir() + b : c;
}
function eT(a, b) {
  let c = 0;
  for (--b; b < a.g.length; b += a.jd()) {
    let d = a.g[b].Qo();
    d > c && (c = d);
  }
  return c;
}
function wT(a, b, c) {
  let d = a.g.length - 1;
  2 == a.jd() ? d = 0 == b % 2 ? 0 != d % 2 ? d - 1 : d : 0 == d % 2 ? d - 1 : d : 3 == a.jd() && (b = d - b, 0 < b - c && (d -= b - c));
  return a.g[d];
}
function dT(a, b, c) {
  0 < a.jd() - b && (a = a.g[b].left - a.Ba(4), a < c && (c = a));
  return c;
}
function fT(a, b, c) {
  for (; b < a.g.length; b += a.jd()) {
    hT(a.g[b], c);
  }
}
function xT(a) {
  if (a.Aa.Px()) {
    for (var b = 0; b < a.g.length; b++) {
      a.g[b].Wa.Sa(!1);
    }
    b = a.jd();
    a.g.length > (3 == b || 6 == b ? 3 : 2) && a.g[a.g.length - 1].Wa.Sa(a.Jf);
  }
}
function yT(a) {
  let b = a.left - a.j.ab();
  var c = a.jd(), d = 3 < c;
  var e = d ? 0 : c - 1;
  let f = d ? c - 3 : a.g.length;
  c = d ? 1 : c;
  for (d = e; d < f; d += c) {
    (e = a.g[d]) && e.left < b && (b = a.g[d].left);
  }
  return b;
}
function zT(a, b) {
  var c = a.jd();
  if (1 == c) {
    return wT(a, 0, 1).kg(b);
  }
  if (2 == c) {
    return Math.max(wT(a, 0, 1).kg(b), wT(a, 1, 2).kg(b));
  }
  if (3 == c) {
    return Math.max(wT(a, 0, 1).kg(b), wT(a, 1, 2).kg(b), wT(a, 2, 3).kg(b));
  }
  let d = a.g[0].kg(b);
  c = 1 + (c - 4);
  for (let e = 1; e < a.g.length; e += c) {
    let f = a.g[e].kg(b);
    f > d && (d = f);
  }
  return d;
}
class AT extends HS {
  constructor(a, b) {
    super(a, b);
    this.s.g = !0;
    this.s.m = !0;
    this.Aa = this.Aa;
    this.s.Wf = this.Aa.vi();
    for (a = 0; a < b.g.length; a++) {
      this.l(b.g[a]);
    }
    xT(this);
  }
  Cd(a) {
    this.g = [];
    this.ze = "Assessment_MCQ_Option_" + this.Aa.nk;
    super.Cd(a);
  }
  mg(a) {
    this.Aa.$d();
    this.g.forEach(b => b.$d());
    super.mg(a);
  }
  o() {
    super.o();
    this.N = this.i = !1;
    Kh() ? this.i = !0 : Ph() && (this.N = this.Aa.lj(), this.g.forEach(a => tT(a, this.N)));
  }
  xk(a) {
    super.xk(a);
    this.g && this.g.forEach(b => b.ha.xk(a));
  }
  l(a) {
    var b = !1;
    let c = this.g.length;
    this.i && (b = c == this.Aa.rk, this.Aa.Bt() == Ng.GB && (b = 0 < (this.Aa.rk & Math.pow(2, c))));
    b = new Az(c, this.Uc, this.Aa, this, b);
    b.addEventListener(b.Vz, d => {
      if (d.target) {
        this.Aa.rk = 0;
        for (d = 0; d < this.g.length; d++) {
          if (this.g[d].el.checked) {
            if (this.Aa.Bt() == Ng.Fw) {
              this.Aa.rk = d;
              break;
            }
            this.Aa.rk += Math.pow(2, d);
          }
        }
        mS(this.Aa, !1);
      }
    });
    this.g.push(b);
    uT(b, this.ze, this.g.length.toString());
    b.Bd();
    b.Cd(a);
    return b;
  }
  pa(a) {
    if (2 == a.Id) {
      a = this.jd();
      var b = this.g.length - a, c = 3 < a;
      c && (b = 4 == a ? this.g.length - 1 : this.g.length - (5 == a ? 2 : 3));
      var d = this.g[b];
      a = Dz(this);
      c = c ? a.Se : dT(this, d.Ta().columnNumber, a.Se);
      c -= d.Wa.ab() + this.Ca.Ba(8);
      b = this.Aa.cA(b, c, d.ha.Ke());
      b = d = this.l(b);
      c = a.pageLeft;
      a = a.Se;
      let e = !0, f = b.left + b.Qo();
      f > a && (e = oT(b, a - f, c, a));
      e ? this.ec(this.ac) : this.Lt(d);
      xT(this);
      return !0;
    }
    return super.pa(a);
  }
  Ot(a) {
    for (let b = 0; b < this.g.length; b++) {
      if (a && this.i) {
        let c = b == this.Aa.rk;
        this.Aa.Bt() == Ng.GB && (c = 0 < (this.Aa.rk & Math.pow(2, b)));
        this.g[b].yt(c);
      } else {
        this.g[b].yt(!1);
      }
    }
  }
  Lt(a) {
    let b = this.g.indexOf(a);
    -1 != b && (this.Aa.Lt(a.Ca), a.U(), this.g.splice(b, 1));
    xT(this);
  }
  Sa(a) {
    super.Sa(a);
    for (let b = 0; b < this.g.length; b++) {
      this.g[b].Sa(a);
    }
  }
  sd(a) {
    super.sd(a);
    for (let b = 0; b < this.g.length; b++) {
      this.g[b].sd(a);
    }
    xT(this);
  }
  ec(a) {
    super.ec(a);
    for (let b = 0; b < this.g.length; b++) {
      this.g[b].ec(a);
    }
  }
  hc(a) {
    let b = super.hc(a);
    if (b) {
      return b;
    }
    for (let c = 0; c < this.g.length; c++) {
      if (this.g[c].hc(a)) {
        b = !0;
        break;
      }
    }
    return b;
  }
  Vo(a) {
    if (this.ac) {
      "" == this.Aa.dd && (this.oh(!a), this.oj(a));
      for (let b = 0; b < this.g.length; b++) {
        let c = this.g[b];
        "" == c.Ta().dd && (c.ha.oh(!a), c.ha.oj(a));
      }
    }
  }
  lb(a) {
    let b = this.Ba(4);
    if (1 < a) {
      for (a -= 2; a < this.g.length; a += this.jd()) {
        let c = this.g[a].Ir() + this.Ba(4);
        c > b && (b = c);
      }
    }
    return b;
  }
  Kx(a, b) {
    return (a = pT(this, a)) ? a.Ir() + this.Ba(4) : b;
  }
  dA(a, b) {
    return (a = aT(this, a)) ? a.left - this.Ba(4) : b;
  }
  Lr(a, b, c) {
    if (a <= this.jd() - 3) {
      for (--a; a < this.g.length; a += this.jd() - 3) {
        let d = this.g[a].ha.top + b;
        d < c && (c = d);
      }
    }
    return c;
  }
  Yo(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      var b = a.clientX - this.Eb, c = this.lc - b / this.scale;
      a = this.zc - (a.clientY - this.Ib) / this.scale;
      var d = this.left + this.ab() - c * this.scale, e = this.top + this.Ka() - a * this.scale, f = !1;
      c >= this.Ke() && yT(this) + b * this.scale >= (this.j.Ra() + 4) * this.scale && (this.width = c, this.left = d, f = !0);
      a >= this.We() && 60 <= e && (this.height = a, this.top = e, f = !0);
      f && (this.V(this.width, this.height), this.De(this.left, this.top));
    } else {
      this.mj(a);
    }
  }
  Uo(a, b, c, d) {
    let e = Dz(this);
    var f = yT(this) + a, k = this.left + this.ab(), l = this.jd();
    if (3 < l) {
      for (var n = 1; n < l / 2; n++) {
        let p = this.g[this.g.length - n].Ir();
        p > k && (k = p);
      }
    } else {
      for (l = this.jd() - 1; l < this.g.length; l += this.jd()) {
        n = this.g[l].Ir(), n > k && (k = n);
      }
    }
    k += a;
    l = f >= e.pageLeft && k <= e.Se;
    !l && d && (a = f < e.pageLeft ? a + (e.pageLeft - f) : a - (k - e.Se), l = !0);
    if (l) {
      this.Hf(this.left + a);
      for (f = 0; f < this.g.length; f++) {
        k = this.g[f], k.Hf(k.left + a), k.ha.Hf(k.ha.left + a);
      }
      c && (this.pe = c.clientX);
    }
    if (60 < this.top + b && (a = zT(this, b), f = this.top + b > e.pageTop && a <= e.yd, !f && d && (b = this.top + b < e.pageTop ? b + (e.pageTop - this.top + b) : b - (a - e.yd), f = !0), f)) {
      this.fc(this.top + b);
      for (d = 0; d < this.g.length; d++) {
        iT(this.g[d], b);
      }
      c && (this.Te = c.clientY);
    }
  }
  hl(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      var b = this.lc + (a.clientX - this.Eb) / this.scale;
      a = this.zc + (a.clientY - this.Ib) / this.scale;
      var c = Dz(this), d = !1;
      b >= this.Ke() && this.left + b * this.scale <= c.Se && (this.width = b, d = !0);
      a >= this.We() && a <= c.yd && this.jo && (this.height = a, d = !0);
      d && (this.V(this.width, this.height), this.De(this.left, this.top));
    } else {
      this.Ai(a);
    }
  }
  zi(a) {
    let b = this.width, c = this.height;
    if (this.lc != b || this.zc != c) {
      let d = !1, e = Dz(this), f = 4 <= this.jd(), k = f ? this.g.length : this.jd(), l = 1;
      f && 4 < this.jd() && (l = 6 == this.jd() ? 3 : 2);
      for (let n = 0; n < k; n += l) {
        let p = this.g[n];
        p.ha.top >= this.top + this.Ka() + this.Ba(Kz.$b) || (d = d || p.Rn(this.top + this.Ka(), e.yd, f)) && (c = Math.min(c, (p.ha.top - (this.top + this.Ba(Kz.$b))) / this.scale));
      }
      d && this.V(b, c);
    }
    super.zi(a);
  }
  We() {
    return this.C ? 22 : 14;
  }
  $o(a) {
    a = this.eb.No(a, this.We());
    let b = !0;
    var c = 4 <= this.jd();
    let d = c ? this.g.length : this.jd(), e = 1;
    c && 4 < this.jd() && (e = 6 == this.jd() ? 3 : 2);
    for (c = 0; c < d; c += e) {
      b = this.g[c].Yx(a);
    }
    b ? this.V(this.width, a) : this.eb.Dm();
  }
  U() {
    super.U();
    this.g.forEach(a => a.U());
    this.g = [];
  }
  Zb() {
    return "McqQuestionLayout";
  }
}
;class BT extends ZS {
  constructor(a) {
    super(a);
    this.to = 2;
  }
  i() {
    return 2 == this.Zd ? 120 : 60;
  }
  aq() {
    rS(this, [Fm(this.qc)]);
  }
  Px() {
    return !1;
  }
  Bt() {
    return Ng.Fw;
  }
}
class CT extends $S {
  We() {
    return 16;
  }
  Ke() {
    return 48;
  }
  Mb(a) {
    super.Mb(a);
    wj(this, a);
  }
  l() {
  }
  j() {
  }
  xk() {
  }
  i() {
  }
  Nv() {
  }
}
class DT extends Az {
  constructor(a, b, c, d, e, f) {
    super(a, b, c, d, f);
    Ej(this.ha, e);
  }
  iE() {
    return new CT(this.Uc, this.Gg, this);
  }
  hA() {
    super.hA();
    this.ha.ul = !1;
    this.ha.vf(16);
    this.ha.xe("rgb(0,0,0)");
  }
  VD() {
  }
  Tj() {
  }
  Ir() {
    return this.ha.left + this.ha.ab();
  }
  Qo() {
    return this.ab() + this.ha.Ca.Uh + this.ha.ab();
  }
  Fh(a) {
    if (!kh(a)) {
      return this.tf(), !1;
    }
    a.preventDefault();
    if (this.Hi) {
      let d = a.clientX - this.pe, e = a.clientY - this.Te, f = this.H.g[0], k = this.H.g[1];
      var b = this.left + d;
      let l = this.top + e, n = Dz(this), p = 1 == this.Gg.Zd;
      if ((() => !Iz(f.ha, this.H, f.ha.left + d, Kz.$b) && !Iz(f, this.H, f.left + d, Kz.$b) && !Iz(k.ha, this.H, k.ha.left + d, Kz.$b) && !Iz(k, this.H, k.left + d, Kz.$b))() && b >= this.Ba(4)) {
        var c = n.pageLeft + n.Kl;
        if (0 == this.Qb && p && b <= c - f.Qo()) {
          hT(f, b), hT(k, b), this.pe = a.clientX;
        } else if (!p) {
          let t = this.Ta().columnNumber;
          if (0 == this.Qb) {
            let x = k.left + d;
            x + k.Qo() <= c && hT(k, x);
            c = dT(this.H, t, c);
            b + this.Qo() <= c && (hT(f, b), this.pe = a.clientX);
          } else {
            1 == this.Qb && b + this.Qo() <= c && (b >= f.Ir() + this.Ba(4) ? (hT(k, b), this.pe = a.clientX) : f.left + d >= this.Ba(4) && (hT(f, f.left + d), hT(k, b), this.pe = a.clientX));
          }
        }
      }
      b = p ? k : f;
      if (!(() => !Jz(f, this.H, f.top + e) && f.ha.top + e >= this.H.top && !Jz(f.ha, this.H, f.ha.top + e) && !Jz(k, this.H, k.top + e) && !Jz(k.ha, this.H, k.ha.top + e))() || b.ha.top + e > n.yd - b.ha.Ka()) {
        return;
      }
      0 <= l && (0 == this.Qb || p && 1 == this.Qb && this.ha.top + e >= f.ha.rd() + f.ha.Ka() + this.Ba(Kz.$b)) && (this.ha.fc(this.ha.top + e), this.fc(l), 0 == this.Qb && (k.fc(k.top + e), k.ha.fc(k.ha.top + e)), this.Te = a.clientY);
    }
    return !0;
  }
  Rn(a, b, c) {
    c = 1 != this.Gg.Zd;
    let d = !1, e = this.Ba(this.ha.height + Kz.$b), f = this.top - this.ha.top, k = aT(this.H, this.Qb);
    4 <= this.jd() || !k ? this.ha.top - this.Ba(Kz.$b) < a && (a + e > b ? (this.ha.fc(b - e), d = !0) : this.ha.fc(a + this.Ba(Kz.$b))) : (d = k.Rn(a + e, b, c)) ? this.ha.fc(k.ha.top - e) : this.ha.fc(a + this.Ba(Kz.$b));
    this.fc(this.ha.top + f);
    c && (a = this.H.g[0], b = this.H.g[1], b.ha.fc(a.ha.top), b.fc(a.top));
    return d;
  }
}
class ET extends AT {
  constructor(a, b) {
    super(a, b);
    this.s.g = !1;
  }
  l(a) {
    var b = !1;
    let c = this.g.length;
    this.i && (b = c == this.Aa.rk);
    let d = 0 == c ? "True" : "False";
    5 == this.Aa.vi() && (d = 0 == c ? "Yes" : "No");
    b = new DT(c, this.Uc, this.Aa, this, d, b);
    b.addEventListener(b.Vz, e => {
      if (e.target) {
        this.Aa.rk = 0;
        for (e = 0; e < this.g.length; e++) {
          if (this.g[e].el.checked && this.Aa.Bt() == Ng.Fw) {
            this.Aa.rk = e;
            break;
          }
        }
        mS(this.Aa, !1);
      }
    });
    this.g.push(b);
    uT(b, this.ze, this.g.length.toString());
    b.Bd();
    b.Cd(a);
    return b;
  }
  lb() {
    return this.g[0].ha.left + this.g[0].ha.ab();
  }
}
;class FT extends Kz {
  constructor() {
    super();
    this.Wf = 9;
    this.gv = new Wm();
    this.g = this.Fz = "";
  }
  Wl(a) {
    super.Wl(a);
    a = this.qc.Ka() + this.Ba(8);
    this.gv.offsetTop = this.qc.offsetTop + a;
    this.gv.Mb(48);
  }
  Gm(a) {
    super.Gm(a);
    let b = new Image();
    b.onload = () => {
      this.se = [];
      this.se.push({strKey:"Q", strDataURI:nS(b, this.qc, a).replace(this.rp, "")});
    };
    b.src = a.data;
  }
  aq() {
    rS(this, [Fm(this.qc)]);
  }
  Fa(a) {
    A(a) || (super.Fa(a), a.responseWidData && this.gv.Jg(a.responseWidData), "strSampleResponse" in a && (this.Fz = a.strSampleResponse));
  }
  Fb(a) {
    super.Fb(a);
    a.responseWidData = this.gv.rf();
    a.strSampleResponse = this.Fz;
  }
  $f(a) {
    var b = super.$f(a);
    b.responseWidData = this.gv.$f(a);
    return b;
  }
  Am() {
    let a = super.Am();
    a.strStudentRes = pS(this.g);
    return a;
  }
}
class GT extends zS {
  constructor() {
    super();
    qj(this).width = "100%";
    this.uc("");
    sj(this, "text");
    this.vf(Kz.Rz);
  }
  No(a, b) {
    a = sA(this, a, this.fontSize, this.el.clientWidth);
    return b > a ? b : a;
  }
  Dm() {
    qj(this).overflowY = this.el.scrollHeight > this.el.clientHeight ? "auto" : "hidden";
  }
}
function HT(a) {
  a.title = new Nz("p");
  R(a.title, "TextInputElementLabel");
  tj(a.title, "static");
  Ej(a.title, Kh() ? "Response area:" : "Answer:");
  qj(a.title).width = "100%";
  a.title.Mb(18);
  a.g.Z(a.title);
  a.eb = new GT();
  tj(a.eb, "static");
  qj(a.eb).height = ` calc(100% - ${a.title.wb()}px)`;
  a.eb.Wr(Kh() ? "Click to add a sample response" : "Type your response here");
  a.g.Z(a.eb);
  Kj(a.eb, () => a.H.u(null));
  a.eb.xt = a.l.bind(a);
  tA(a.eb, () => R(a.title, "TextInputElementLabelFocus"));
  uA(a.eb, () => pj(a.title, "TextInputElementLabelFocus"));
}
function IT(a) {
  sj(a.Sb, "ew-resize");
  let b = (a.wb() - a.Sb.wb()) / 2;
  a.Sb.ga(a.width - a.Sb.Ra() / 2, b);
}
class JT extends uS {
  constructor(a) {
    super();
    uj(this, "auto");
    this.g = new Nj(null);
    R(this.g, "AnnotateCoveredWidget");
    this.g.v(Kz.To + "px");
    this.Z(this.g);
    this.H = a;
    HT(this);
  }
  l(a) {
    this.H.i(a);
    let b = !0;
    if (this.H.m) {
      a = this.title.wb() + 2 * Kz.To + this.eb.No(a, this.We());
      let c = Dz(this);
      this.top + a * this.scale <= c.yd && (this.V(this.width, a), b = !1);
    }
    b && this.eb.Dm();
  }
  So() {
    super.So();
    this.el.addEventListener("pointerdown", this.lg, {capture:!0, passive:!1});
    this.el.addEventListener("touchstart", this.il, {capture:!0, passive:!1});
  }
  Bi(a) {
    this.eb.Bi(a);
  }
  M() {
    super.M();
    zj(this.Sb, "red");
    xj(this.Sb, -Kz.$b);
    this.Sb.V(8, 8);
    IT(this);
  }
  We() {
    return 22;
  }
  Ke() {
    return 72;
  }
  hl(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      a = this.lc + (a.clientX - this.Eb) / this.scale;
      var b = Dz(this), c = !1;
      a >= this.Ke() && this.left + a * this.scale <= b.Se && (this.width = a, c = !0);
      c && (this.V(this.width, this.height), this.De(this.left, this.top));
    } else {
      this.Ai();
    }
  }
  Fh(a) {
    if (!kh(a)) {
      return this.tf(), !1;
    }
    a.preventDefault();
    if (this.Hi) {
      let b = this.left + (a.clientX - this.pe), c = this.top + (a.clientY - this.Te), d = Dz(this);
      !Iz(this, this.H, b, Kz.$b) && b >= this.Ba(4) && b <= d.Se - this.ab() && (this.Hf(b), this.pe = a.clientX);
      !Jz(this, this.H, c) && c >= this.H.rd() && c <= d.yd - this.Ka() && (this.fc(c), this.Te = a.clientY);
    }
    return !0;
  }
  tf() {
    super.tf();
    this.Sn(!1);
    this.top == this.tg && this.left == this.sg && this.H.u(null);
  }
  V(a, b) {
    super.V(a, b);
    IT(this);
  }
  sd(a) {
    super.sd(a);
    this.Tj(a);
    this.Zo(a);
  }
  i(a) {
    this.Hi = a;
  }
  lg(a) {
    this.eb.hc(a) || this.Sb.hc(a) || (a.preventDefault(), this.tg = this.top, this.sg = this.left, this.Te = a.clientY, this.pe = a.clientX, this.Sn(!0));
  }
  ec(a) {
    super.ec(a);
    this.sd(a);
    this.oj(!1);
    this.Jm();
  }
  Jm() {
    let a = this.ac ? "all-scroll" : "default";
    this.ac || 15 != ki.g ? sj(this.eb, "text") : (a = "pointer", sj(this.eb, "pointer"));
    sj(this, a);
    this.uc("all-scroll" == a ? "Drag to move" : "");
  }
  oj(a) {
    let b = "1px solid rgba(0,0,0,0.25)";
    a ? b = "1px solid rgba(0,0,0,0)" : this.ac && (b = "1px solid rgba(0,0,0,1)");
    yj(this, b);
  }
  Nv(a) {
    this.ia = a;
    !this.ia && pj(this.title, "TextInputElementLabelFocus");
    this.eb.sd(this.ia);
    Kh() && (this.eb.Wr(a ? "Click to add a sample response" : ""), a ? this.eb.nl() : this.eb.Qj(""));
  }
  Zb() {
    return "ShortAnswerResponseWid";
  }
}
function KT(a) {
  if (a.g) {
    let b;
    b = Kh() ? !a.Aa.yi() && a.ac : a.Aa.lj();
    a.l && a.g.Bi(a.Aa.Fz);
    a.g.Nv(b);
  }
}
class LT extends HS {
  constructor(a, b) {
    super(a, b);
    this.Aa = this.Aa;
    this.s.Wf = this.Aa.vi();
    this.i = this.i.bind(this);
    this.g = new JT(this);
    this.g.Bd();
    this.g.Cd(this.Aa.gv);
    vz(this.g);
    this.o();
  }
  Ig(a) {
    super.Ig(a);
    this.g && (uj(this.g, ui() ? "auto" : "none"), this.g.Jm());
  }
  o() {
    super.o();
    Kh() && (this.l = !0);
    KT(this);
  }
  Ot(a) {
    this.g.Sa(a && this.ob());
  }
  Sa(a) {
    super.Sa(a);
    this.g && this.g.Sa(a);
  }
  i(a) {
    if (!A(a) && 0 < a.length) {
      console.log(a.trim());
      var b = this.Aa;
      a = a.trim();
      Kh() ? (b.Fz = a, mS(b, !1)) : b.g = a;
      mS(this.Aa, !1);
    }
  }
  ec(a) {
    super.ec(a);
    this.g.ec(a);
    KT(this);
  }
  hc(a) {
    return super.hc(a) || this.g.hc(a) ? !0 : !1;
  }
  jb(a) {
    super.jb(a);
    this.g.jb(a);
  }
  Yo(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      var b = this.lc - (a.clientX - this.Eb) / this.scale;
      a = this.zc - (a.clientY - this.Ib) / this.scale;
      var c = this.left + this.ab() - b * this.scale, d = this.top + this.Ka() - a * this.scale, e = !1;
      b >= this.Ke() && c >= this.j.ab() + this.Ca.Ba(4) && (this.width = b, this.left = c, e = !0);
      a >= this.We() && 60 <= d && (this.height = a, this.top = d, e = !0);
      e && (this.V(this.width, this.height), this.De(this.left, this.top));
    } else {
      this.mj(a);
    }
  }
  hl(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      var b = this.lc + (a.clientX - this.Eb) / this.scale;
      a = this.zc + (a.clientY - this.Ib) / this.scale;
      var c = Dz(this), d = this.left + b * this.scale, e = !1, f = !1;
      b >= this.Ke() && d <= c.Se && (this.width = b, e = !0);
      this.jo && a >= this.We() && (f = !0);
      if (e || f) {
        this.V(this.width, f ? a : this.height), this.De(this.left, this.top);
      }
    } else {
      this.Ai(a);
    }
  }
  zi(a) {
    if (this.lc != this.width || this.zc != this.height) {
      let b = Dz(this), c = this.top + this.Ba(this.height + Kz.$b);
      c > this.g.top && (c + this.g.Ka() <= b.yd ? this.g.De(this.g.left, c) : (this.g.De(this.g.left, b.yd - this.g.Ka()), this.V(this.width, (this.g.rd() - (this.top + this.Ba(Kz.$b))) / this.scale)));
    }
    super.zi(a);
  }
  Uo(a, b, c, d) {
    let e = Math.min(this.left + a, this.g.left + a), f = Math.max(this.left + a + this.ab(), this.g.left + a + this.g.ab()), k = Math.max(this.top + b + this.Ka(), this.g.top + b + this.g.Ka()), l = Dz(this), n = e >= l.pageLeft && f <= l.Se;
    !n && d && (a = e < l.pageLeft ? a + (l.pageLeft - e) : a - (f - l.Se), n = !0);
    n && (this.Hf(this.left + a), this.g.Hf(this.g.left + a), c && (this.pe = c.clientX));
    60 <= this.top + b && this.top + b >= l.pageTop && k <= l.pageTop + l.Jl && (a = this.top + b >= l.pageTop && k <= l.yd, !a && d && (b = this.top + b < l.pageTop ? b + (l.pageTop - this.top + b) : b - (k - l.yd), a = !0), a && (this.fc(this.top + b), this.g.fc(this.g.top + b), c && (this.Te = c.clientY)));
  }
  $o(a) {
    a = this.eb.No(a, this.We());
    let b = !1, c = Dz(this), d = this.top + this.Ba(a + 4);
    d < this.g.top ? b = !0 : d + this.g.Ka() <= c.yd && (this.g.De(this.g.left, d), b = !0);
    b ? this.V(this.width, a) : this.eb.Dm();
  }
  U() {
    this.g.U();
    super.U();
  }
}
;function MT(a, b) {
  let c = a.Pk.indexOf(b);
  -1 != c && a.Pk.splice(c, 1);
  console.log(`RemoveBlankModel->${b}`);
}
function DV(a) {
  return a && "DIV" == a.nodeName && a.classList && a.classList.contains("BlankElementParent");
}
function EV(a, b) {
  let c = "<p>";
  if (a.ke()) {
    let d = 0;
    if (a.qc.s) {
      let e = a.qc.s.eb, f = k => {
        (3 == k.nodeType || 1 == k.nodeType && "TEXT" == k.nodeName) && k.textContent && k.textContent.length ? c += qS(k.textContent) : "BR" == k.nodeName ? c += "<text><![CDATA[\n]]\x3e</text>" : DV(k) && (k = a.Pk[d], c += b ? k.Et() : k.cy(), d++);
      };
      console.log("main ", e.el.childNodes);
      e.el.childNodes.forEach(k => {
        !DV(k) && 1 == k.nodeType && k.childNodes.length ? (console.log("div ", k.childNodes), k.childNodes.forEach(l => f(l))) : f(k);
      });
    }
  } else {
    c += oS(a.qc), a.Pk.forEach(d => {
      c += "<text><![CDATA[\n]]\x3e</text>";
      c += b ? d.Et() : d.cy();
    });
  }
  return c += "</p>";
}
class FV extends Kz {
  constructor() {
    super();
    this.Wf = 14;
    this.Pk = [];
    this.g = "";
  }
  Mo() {
    return this.ke() ? 24 : 32;
  }
  Gm(a) {
    super.Gm(a);
    let b = new Image();
    b.onload = () => {
      this.se = [];
      "" == this.dd && (this.dd = nS(b, this.qc, a).replace(this.rp, ""));
      this.se.push({strKey:"Q", strDataURI:this.dd});
      console.log(this.se);
    };
    b.src = a.data;
  }
  aq() {
    rS(this, [Fm(this.qc)]);
  }
  Wl(a) {
    a ? (this.qc.Jg(a), this.qc.Qc(this.Oy), this.qc.Mb(this.Mo())) : super.Wl(a);
    this.sv();
  }
  sv() {
    var a = this.Pk.length ? this.Pk[this.Pk.length - 1] : this.qc;
    let b = new GV(this);
    b.Jg(a.rf());
    b.Qc(b.JF.width);
    b.Mb(b.JF.height);
    this.Pk.length ? (a = a.offsetLeft + a.ab() + 2 * Em(b), b.offsetLeft = a) : (b.offsetTop += 2 * Em(b), b.offsetLeft += 48);
    this.Pk.push(b);
    return b;
  }
  Et() {
    return EV(this, !0);
  }
  Fa(a) {
    A(a) || (super.Fa(a), "strXmlData" in a && (this.g = a.strXmlData), "lstBlankModelData" in a && a.lstBlankModelData.forEach(b => {
      let c = new GV(this);
      c.Fa(b);
      this.Pk.push(c);
    }));
  }
  Fb(a) {
    super.Fb(a);
    let b = [];
    this.Pk.forEach(c => b.push(c.rf()));
    a.lstBlankModelData = b;
    a.strXmlData = EV(this, !1);
  }
  $f(a) {
    var b = super.$f(a);
    let c = [];
    this.Pk.forEach(d => c.push(d.$f(a)));
    b.lstBlankModelData = c;
    b.strXmlData = EV(this, !1);
    return b;
  }
  Am() {
    let a = super.Am();
    a.strStudentRes = this.Et();
    return a;
  }
}
function HV(a, b) {
  a.Ko = '<answer content_type="xml" scored="1">';
  b.forEach(c => a.Ko += c);
  a.Ko += "</answer>";
}
function IV(a) {
  return Kh() ? a.RB.ke() ? a.vr : a.rt : a.ND;
}
class GV extends Wm {
  constructor(a) {
    super();
    this.RB = a;
    this.JF = {width:60, height:14};
    this.rt = this.Ko = this.ND = this.vr = this.qt = "";
  }
  Qx() {
    return !A(this.rt) && 0 < this.rt.length && !A(this.Ko) && 0 < this.Ko.length ? !0 : !1;
  }
  Mt(a) {
    this.qt = a;
  }
  cy() {
    let a = "<expression><p><blank_document><p>" + qS(this.rt) + "</p></blank_document></p></expression>";
    return this.RB.ke() ? a : qS(this.qt) + a;
  }
  Et() {
    let a = "<expression><p><blank_document><p>" + qS(this.ND) + "</p><status>0</status></blank_document></p></expression>";
    return this.RB.ke() ? a : qS(this.qt) + a;
  }
  Kt(a) {
    "strTextToShow" in a && (this.rt = a.strTextToShow);
    "listConstraint" in a && HV(this, a.listConstraint);
    "strValue" in a && (this.vr = a.strValue);
  }
  Bi(a) {
    console.log(`blank value ->${a}`);
    Kh() ? this.Kt({strValue:a, strTextToShow:a && 15 < a.length ? a.substring(0, 13) + "..." : a, listConstraint:[`<grading_constraint type=\"text\"><p>${qS(a)}</p><list/><match_percentage value=\"100\"/></grading_constraint>`]}) : this.ND = a;
  }
  rf() {
    let a = super.rf();
    a.strXmlAnswer = this.Ko;
    a.strTextToShow = this.rt;
    a.strBlankPrefix = this.qt;
    a.strValue = this.vr;
    return a;
  }
  $f(a) {
    a = super.$f(a);
    a.strValue = this.vr;
    return a;
  }
  Fa(a) {
    A(a) || (super.Fa(a), "strTextToShow" in a && (this.rt = a.strTextToShow), "strXmlAnswer" in a && (this.Ko = a.strXmlAnswer), "strBlankPrefix" in a && (this.qt = a.strBlankPrefix), "strValue" in a && (this.vr = a.strValue), this.Jg(a));
  }
}
function JV(a, b, c) {
  let d = !0, e = a.left;
  e - a.ah() < c.left ? (e = c.left + a.ah(), e + a.ab() + a.ah() > c.Oo() && (d = !1)) : a.Oo() + a.ah() > c.Oo() && (e = c.Oo() - (a.ab() + a.ah()), e - a.ah() < c.left && (d = !1));
  if (d && (a.rw = new tz(e, a.top, a.ab(), a.Ka()), d = !KV(a.bd, a, a.rw, !1))) {
    let f = a.bd.g[b + 1];
    f && (d = JV(f, b + 1, c));
    a.De(e, a.top);
  }
  return d;
}
function LV(a, b, c) {
  let d = !0, e = a.top;
  a.top - a.ah() < c.top ? (e = c.top + a.ah(), e + a.Ka() + a.ah() > c.fq() && (d = !1)) : a.fq() + a.ah() > c.fq() && (e = c.fq() - (a.Ka() + a.ah()), e - a.ah() < c.top && (d = !1));
  if (d && (a.rw = new tz(a.left, e, a.ab(), a.Ka()), d = !KV(a.bd, a, a.rw, !1))) {
    let f = a.bd.g[b + 1];
    f && (d = LV(f, b + 1, c));
    a.De(a.left, e);
  }
  return d;
}
class MV extends vA {
  constructor(a) {
    super("input");
    R(this, "BlankWordControlWid");
    qj(this).minWidth = this.Ke() + "px";
    this.bd = a;
    this.Od = new Nz(null);
    Cj(this.Od, "flex");
    R(this.Od, "BlankLabel");
    zj(this.Od, "rgba(255,255,255,0.65");
    uj(this.Od, "none");
    this.Od.Sa(!1);
    Kh() && (this.ow = !0, Gz(this, () => {
      !this.bd.ac && this.bd.m && JS(this.bd.Uc, this.bd);
      Oz(this);
      this.mc(this.Ff, {Id:6});
    }), tA(this, () => {
      this.oE();
      this.Un(!1);
    }), uA(this, () => {
      this.Un(!1);
    }));
    this.addEventListener(this.Ff, b => {
      b && b.detail && 6 == b.detail.Id && this.oq(null);
    });
    this.rw = new tz(this.left, this.top, this.ab(), this.Ka());
    this.Ig(null);
  }
  ef(a) {
    super.ef(a);
    this.Od.ef(a);
  }
  iA() {
    this.In.stop();
    this.Mp = null;
    !this.bd.ac && this.bd.m && JS(this.bd.Uc, this.bd);
    this.fh || Oz(this);
  }
  mA(a) {
    super.mA(a);
    if (a.target == this.el || this.el.contains(a.target)) {
      let b = {};
      b.currentTarget = this.el;
      b.offsetX = a.offsetX;
      b.offsetY = a.offsetY;
      this.eB && Zg(this.In) && null != this.Mp ? (this.Mp = null, this.In.stop(), console.log("#selection box double clicked"), this.mc(this.Ff, {Id:6})) : (this.Mp = b, this.In.start());
    }
  }
  oE() {
    this.Md.Sa(!1);
    this.jj.Sa(!1);
  }
  oq() {
    super.oq(null);
    this.Jf && this.el.select();
    this.Zr();
    this.$r();
    this.hq();
  }
  Ig() {
    this.Zr();
  }
  wk(a) {
    super.wk(a);
    this.Zr();
    Kh() && (this.$r(), this.hq());
  }
  $r() {
    this.Wa.zm(1 < this.bd.g.length && !this.fh);
  }
  ey(a) {
    this.bd.yk(this.bd.ac && !a);
    if (a) {
      let b = this.Md.vd(), c = this.Md.rd();
      Vz(this);
      let d = this.Md.ab();
      c = c - this.va.height - this.Yg;
      0 > c && (c = this.Md.rd() + this.Md.Ka() + this.Yg);
      b < b + (d - this.va.width) / 2 && (b += (d - this.va.width) / 2);
      this.va.ga(b, c);
    }
    this.va.Sa(a);
    this.nl();
  }
  nl() {
    Kh() && this.va.ob() || Ph() && this.fh ? R(this, "ActiveBlank") : pj(this, "ActiveBlank");
  }
  Lo(a) {
    this.fh || (a.preventDefault(), a.stopPropagation());
  }
  vA() {
    Ej(this.Od, `${this.Ta().qt.toLowerCase()}`);
  }
  Bd() {
    super.Bd();
    this.Od.Bd();
  }
  Kd(a) {
    super.Kd(a);
    this.Od.Kd(a);
  }
  jb(a) {
    super.jb(a);
    this.Od.jb(a);
  }
  mg(a) {
    super.mg(a);
    Fz(this);
    this.bd.mg(a);
  }
  cs(a) {
    this.Ta().Bi(a);
  }
  Kt(a) {
    this.Ta().Kt(a);
    this.Un(!1);
    mS(this.bd.Aa, !1);
  }
  Ta() {
    return this.Ca;
  }
  ec(a) {
    a = a && this.bd.ac;
    super.ec(a);
  }
  aE() {
    this.Md.V(this.width, this.height + this.Yg);
    this.Md.ga(this.left, this.top);
  }
  ml(a) {
    super.ml(a);
    a && (a = this.bd, a.l = this, a.Aa.ke() && a.eb.wk(!1));
  }
  Mt(a) {
    this.Ta().Mt(a);
    this.vA();
  }
  Un(a) {
    this.fh || this.ml(this.ac && !a);
    let b = IV(this.Ta());
    a ? b = "" : Kh() && this.fh && this.Ta().vr && 0 < this.Ta().vr.length && (b = this.Ta().vr);
    this.Bi(b);
  }
  Sa(a) {
    super.Sa(a);
    this.hq();
  }
  $x(a) {
    let b = !1, c = this.left + (a.clientX - this.Eb), d = this.top + (a.clientY - this.Ib), e = new tz(this.left, this.top, this.ab(), this.Ka());
    c >= this.bd.vd() + this.ah() && c + this.ab() + this.ah() <= this.bd.vd() + this.bd.ab() && (e.left = c, KV(this.bd, this, e, !0) || (this.Hf(c), this.Eb = a.clientX, b = !0));
    d >= this.bd.rd() + this.ah() && d + this.Ka() + this.ah() <= this.bd.rd() + this.bd.Ka() && (e.top = d, KV(this.bd, this, e, !0) || (this.fc(d), this.Ib = a.clientY, b = !0));
    return b;
  }
  Hv(a) {
    if (kh(a)) {
      a.preventDefault();
      a = this.lc + (a.clientX - this.Eb);
      var b = new tz(this.left, this.top, a * this.scale, this.height * this.scale);
      a >= this.Ke() && !KV(this.bd, this, b, !0) && this.left + a * this.scale + this.ah() <= this.bd.vd() + this.bd.ab() && this.V(a, this.height);
    } else {
      Uz(this);
    }
  }
  Ke() {
    return 28;
  }
  Oo() {
    return this.left + this.ab();
  }
  fq() {
    return this.top + this.Ka();
  }
  ah() {
    return this.Ba(2);
  }
  sd(a) {
    super.sd(a);
    this.Zr();
    this.hq();
  }
  hq() {
    Kh() && this.Od.Sa(this.bd.ac && !this.fh && this.ob());
  }
  Zr() {
    let a = "default";
    if (this.fh || Ph() && this.Jf) {
      a = "text";
    } else if (this.bd.ac || !this.bd.ac && ui()) {
      a = "pointer";
    }
    sj(this, a);
  }
  Qc(a) {
    super.Qc(a);
    this.Od.Qc(a);
  }
  Mb(a) {
    super.Mb(a);
    this.Od.Mb(a - 1);
  }
  Nd(a) {
    super.Nd(a);
    this.Od.Nd(a);
  }
  Ee(a) {
    super.Ee(a);
    this.Od.Ee(a);
  }
  U() {
    this.Od.U();
    super.U();
  }
  Zb() {
    return "BlankWordControlWid";
  }
}
var NV = null;
function OV(a, b) {
  console.log("[Assessment] bForcefully-> ", b);
  a.m = !1;
  PV(a);
  if (BQ(a.i)) {
    if (!b && Lo.o) {
      a.m = !0;
      Vn("Loading...", null);
      a.l = setTimeout(() => {
        OV(a, !0);
      }, 1E4);
      return;
    }
    a.i.j ? QV(a, a.g) : (FQ(a.i), Vn("Loading...", null));
  } else {
    EQ(a.i), RV(a, !1), FQ(a.i), Vn("Loading...", null);
  }
  RV(a, !1);
  PQ(a.i);
  a.l = setTimeout(() => {
    Sn();
    PV(a);
    a.pu = !1;
  }, 3E4);
}
function SV(a) {
  var b = TV.g;
  b.pu = !0;
  b.j = a;
  b.g = {uPanelType:7, strXmlAnswer:b.j.l.Ta().Ko};
  b.i.i = 7;
  OV(b, !1);
}
function PV(a) {
  -1 != a.l && clearTimeout(a.l);
  a.l = -1;
}
function QV(a, b) {
  7 == a.i.i && (CQ(a.i, b), a.g = null);
}
function RV(a, b) {
  BQ(a.i) && (b && Sn(), RA(b), DQ(a.i, b), b && NQ(a.i));
  PV(a);
}
class TV extends EventTarget {
  static get g() {
    A(NV) && (NV = new TV());
    return NV;
  }
  constructor() {
    super();
    this.i = mC;
    this.o = this.o.bind(this);
    this.i && this.i.addEventListener(HQ.g, this.o);
    this.l = -1;
    this.j = null;
    this.m = this.pu = !1;
    Lo.addEventListener(Lo.C, () => {
      this.m && OV(this, !0);
    });
  }
  o(a) {
    var b = a.detail;
    let c = !1;
    b && 7 == this.i.i && (c = "uPanelType" in b ? 7 == b.uPanelType : !0);
    if (c) {
      switch(parseInt(a.detail.chromeExtensionCommand)) {
        case Kg.Mq:
          RV(this, !0);
          break;
        case Kg.Lq:
          RV(this, !1);
          this.pu = !1;
          break;
        case Kg.PK:
          A(this.j) || (!this.j.ac && this.j.ec(!0), this.j.l.Kt(a.detail));
          RV(this, !1);
          this.pu = !1;
          break;
        case Kg.up:
          null != this.g && QV(this, this.g);
          break;
        default:
          RV(this, !1), this.pu = !1;
      }
    }
  }
}
class UV extends Nj {
  constructor(a) {
    super(null);
    R(this, "BlankElementParent");
    Cj(this, "inline-block");
    lj(this, "contenteditable", "false");
    this.i = new VV(a);
    this.Z(this.i);
    this.g = new Nz(null);
    Cj(this.g, "flex");
    this.g.Sa(!1);
    uj(this.g, "none");
    zj(this.g, "rgba(255,255,255,0.65");
    this.g.ga(0, 0);
    R(this.g, "BlankLabel");
    this.Z(this.g);
  }
  U() {
    this.i.U();
    super.U();
  }
}
class VV extends yS {
  constructor(a) {
    super();
    this.H = a;
    R(this, "BlankWordControlWid");
    R(this, "BlankElement");
    this.uc("");
    this.iB = !1;
    this.Cy = !0;
    this.nl();
    lj(this, "contenteditable", this.Jf ? "true" : "false");
    this.Nt(!this.Jf);
    this.va.jb("21");
    this.va.Bd();
    this.oF = !1;
    Kh() && (this.ow = !0, Gz(this, () => {
      Oz(this);
      this.dispatchEvent(new CustomEvent(this.Ff, {detail:{Id:6}}));
    }));
    this.xt = this.H.Va;
    this.addEventListener(this.Ff, b => {
      if (b && b.detail) {
        if (6 == b.detail.Id) {
          if (this.Un(!1), this.sd(!0), this.oq(null), this.selection = window.getSelection()) {
            b = this.el;
            let c = document.createRange();
            c.selectNodeContents(b);
            c.collapse(!1);
            this.selection.removeAllRanges();
            this.selection.addRange(c);
          }
        } else {
          7 == b.detail.Id ? SV(this.H) : 5 == b.detail.Id ? this.wk(!1) : 4 == b.detail.Id && (this.U(), WV(this.H));
        }
      }
    });
    this.Ig(null);
  }
  Mt(a) {
    this.Ta().Mt(a);
    this.vA();
  }
  vA() {
    Ej(this.parent.g, `${this.Ta().qt.toLowerCase()}`);
  }
  Nt(a) {
    this.ko = a;
  }
  Lo() {
  }
  iA() {
    this.In.stop();
    this.Mp = null;
    Oz(this);
  }
  ec(a) {
    this.ac = a;
    this.ey(a);
    a && (a = this.H, a.l = this, a.Aa.ke() && a.eb.wk(!1));
  }
  $r() {
    this.Wa.zm(1 < this.H.i.length && !this.fh);
  }
  nl() {
    Kh() && this.va.ob() || Ph() && this.fh ? R(this, "ActiveBlank") : pj(this, "ActiveBlank");
  }
  ey(a) {
    this.H.yk(this.H.ac && !a);
    if (a) {
      let b = this.H.vd(), c = this.H.rd();
      Vz(this);
      let d = this.H.ab();
      c = c - this.va.height - this.Yg;
      0 > c && (c = this.H.rd() + this.H.Ka() + this.Yg);
      b < b + (d - this.va.width) / 2 && (b += (d - this.va.width) / 2);
      this.va.ga(b, c);
      this.$r();
    }
    this.va.Sa(a);
    this.nl();
  }
  Kt(a) {
    console.log(a);
    this.Ta().Kt(a);
    this.Un(!1);
    mS(this.H.Aa, !1);
  }
  Un(a) {
    a ? this.Sa(!1) : (!this.ob() && this.Sa(!0), Ej(this, IV(this.Ta())));
  }
  cs(a) {
    super.cs(a);
    this.Ta().Bi(xS(this));
  }
  Cd(a) {
    this.Ca = a;
    this.tN = oh();
    this.he(this.tN);
    this.Un(!1);
  }
  Ta() {
    return this.Ca;
  }
  sd(a) {
    super.sd(a);
    Kh() && (this.H.Nv(!a), this.hq());
    this.Zr();
  }
  hq() {
    Kh() && this.parent.g.Sa(this.H.ac && !this.fh);
  }
  wk(a) {
    super.wk(a);
    this.nl();
    Kh() && (this.sd(!1), this.Un(!1), this.ac && this.ec(!1), this.$r(), this.hq());
  }
  oq(a) {
    super.oq(a);
    this.Jf && (this.selection && this.selection.focusNode && this.selection.collapseToEnd(), this.nl());
    Kh() && (this.$r(), this.hq());
  }
  Zr() {
    let a = "default";
    if (this.fh || Ph() && this.Jf) {
      a = "text";
    } else if (this.H.ac || !this.H.ac && ui()) {
      a = "pointer";
    }
    sj(this, a);
  }
  Ig() {
    this.Zr();
  }
  Zb() {
    return "BlankElement";
  }
}
class XV extends yS {
  constructor(a) {
    super();
    this.H = a;
    R(this, "FIBContentEditableWidget");
    this.v(Kz.To + "px");
    this.vf(Kz.Rz);
    this.Wr("Add your text here");
  }
  Wb(a, b) {
    if (a) {
      let c = a.target;
      if (c && (DV(c) || DV(c.parentElement))) {
        this.H.ya = !0;
        this.H.m && !this.ac && JS(this.H.Uc, this.H);
        this.H.ya = !1;
        return;
      }
    }
    super.Wb(a, b);
  }
  Lo(a) {
    this.H.l && !this.H.l.hc(a) && this.H.l.wk(!1);
  }
  Lc(a) {
    let b = 0;
    a && a.length ? (a = (new DOMParser()).parseFromString(a, "text/xml")) && a.firstChild && a.firstChild.childNodes.forEach(c => {
      "text" == c.nodeName ? "\n" == c.textContent ? this.el.appendChild(document.createElement("br")) : this.el.appendChild(wS(c.textContent)) : "expression" == c.nodeName && (c = YV(this.H, b), this.el.appendChild(c.el), b++);
    }) : (a = YV(this.H, b), this.el.appendChild(a.el));
  }
  Nt(a) {
    this.ko = a;
  }
  Zb() {
    return "FIBContentEditableWidget";
  }
}
function KV(a, b, c, d) {
  let e = b.ah();
  for (let k = 0; k < a.g.length; k++) {
    if (b != a.g[k]) {
      var f = a.g[k];
      f = d ? new tz(f.left, f.top, f.ab(), f.Ka()) : f.rw;
      if (!(c.rd() - e >= f.fq() || c.Oo() + e <= f.vd() || c.fq() + e <= f.rd() || c.vd() - e >= f.Oo())) {
        return !0;
      }
    } else {
      d || (d = !0);
    }
  }
  return !1;
}
function WV(a) {
  let b = [];
  for (let c = 0; c < a.i.length; c++) {
    let d = a.i[c];
    d.el.parentElement && d.el.parentElement.parentElement ? b.push(d) : (MT(a.Aa, d.Ca), d.parent.U());
  }
  a.i = b;
  ZV(a);
}
function YV(a, b) {
  if (b = a.Aa.Pk[b]) {
    let c = new UV(a);
    c.i.sd(a.N);
    c.i.Cd(b);
    a.i.push(c.i);
    return c;
  }
  return null;
}
function $V(a, b) {
  let c = new MV(a);
  c.Cd(b);
  c.Bd();
  vz(c);
  a.g.push(c);
  c.sd(a.N);
  a.lb && c.Un(!1);
  c.addEventListener(c.Ff, d => {
    if (d && d.detail) {
      if (4 == d.detail.Id) {
        d = d.target;
        let e = a.g.indexOf(d);
        -1 != e && (MT(a.Aa, d.Ca), a.g.splice(e, 1), d.U());
        ZV(a);
      } else {
        7 == d.detail.Id && SV(a);
      }
    }
  });
  return c;
}
function ZV(a) {
  let b = 65;
  if (a.Aa.ke()) {
    for (var c = 0; c < a.i.length; c++) {
      a.i[c].Mt(String.fromCharCode(b)), b++;
    }
  } else {
    for (c = 0; c < a.g.length; c++) {
      let d = a.g[c];
      d.$r();
      d.Mt(String.fromCharCode(b));
      b++;
    }
  }
  aW(a);
  a.Aa.ke() && a.gl("");
}
function aW(a) {
  a.s.l = 10 >= a.g.length && 10 >= a.i.length && (!a.ke() || a.eb.fh);
  LS(a.s);
}
function bW(a) {
  a.lb = Kh();
  a.N = !1;
  Kh() && a.ac ? a.N = !a.Aa.yi() : Ph() && (a.N = a.Aa.lj());
  !A(a.g) && a.g.forEach(b => b.sd(a.N));
  !A(a.i) && a.i.forEach(b => b.sd(a.N));
}
class cW extends HS {
  constructor(a, b) {
    super(a, b);
    this.s.g = !0;
    this.Aa = this.Aa;
    this.s.Wf = this.Aa.vi();
    this.i = [];
    this.g = [];
    this.Aa.ke() || this.Aa.Pk.forEach(c => $V(this, c));
    this.l = null;
    this.Ha().Lc(this.Aa.g);
    this.Aa.ke() && this.gl("");
    ZV(this);
  }
  fl(a) {
    return a && a.target && (DV(a.target) || DV(a.target.parentElement)) ? !1 : super.fl(a);
  }
  J(a) {
    if (this.fl(a)) {
      if (this.eb.hc(a)) {
        if (this.Jf && this.i && Kh()) {
          for (a = 0; a < this.i.length; a++) {
            this.i[a].sd(!1);
          }
        }
      } else {
        super.J(a);
      }
    }
  }
  Cd(a) {
    super.Cd(a);
    this.Aa.ke() && this.gl("");
  }
  Gb() {
    this.Va = this.gl.bind(this);
    this.eb = new XV(this);
    this.eb.jb((4).toString());
    this.eb.Sa(!1);
    this.Z(this.eb);
    this.eb.xt = this.Va;
    this.eb.addEventListener(this.Ha().lb, () => WV(this));
    tA(this.eb, () => aW(this));
    uA(this.eb, () => aW(this));
    qj(this.eb).maxHeight = `${this.height - Kz.To}px`;
  }
  Ha() {
    return this.eb;
  }
  Mb(a) {
    super.Mb(a);
    this.eb && (qj(this.eb).maxHeight = `${a - Kz.To}px`);
  }
  gl() {
    this.eb && this.$o(this.eb.el.innerHTML);
  }
  $o() {
    let a = !0;
    if (this.m) {
      let c = this.eb.el.scrollHeight + Kz.To;
      var b = this.Aa.Mo();
      c < b && (c = b);
      b = Dz(this);
      this.top + this.Ba(c) <= b.pageTop + b.Jl && (this.V(this.width, c), a = !1);
    }
    a && this.eb.Dm();
  }
  nh(a) {
    super.nh(a);
    a && this.l && Pz.Tn(this.l);
    this.g.forEach(b => b.nh(a));
  }
  o() {
    super.o();
    bW(this);
  }
  ib() {
    if (!this.l || !this.l.fh) {
      return super.ib();
    }
  }
  sv() {
    let a = this.Aa.sv(), b = $V(this, a);
    var c = new tz(this.left, this.top, this.ab(), this.Ka());
    b.left - b.ah() >= c.left && b.Oo() + b.ah() <= c.left + c.width || (this.V(this.width, this.height + b.height), c = this.left + 48, c + a.ab() > this.left + this.ab() && (c = this.left + this.ab() - (a.ab() + this.Aa.Ba(4))), b.De(c, this.top + this.Ka() - b.Ka()));
    ZV(this);
    this.jb(this.ac ? "20" : "19");
  }
  pa(a) {
    if (2 == a.Id) {
      if (this.Aa.ke()) {
        a = this.Aa.sv();
        let b = new UV(this);
        b.i.sd(this.N);
        b.i.Cd(a);
        vS(this.Ha(), b.el);
        this.i.push(b.i);
        ZV(this);
      } else {
        this.sv();
      }
      return !0;
    }
    return super.pa(a);
  }
  Vo(a) {
    super.Vo(a);
    this.g.forEach(b => b.Un(a));
  }
  Ot(a) {
    this.g.forEach(b => b.Sa(a && this.ob()));
    this.i.forEach(b => b.Sa(a && this.ob()));
  }
  Sa(a) {
    super.Sa(a);
    this.g && this.g.forEach(b => b.Sa(a));
  }
  jb(a) {
    super.jb(a);
    this.g.forEach(b => b.jb(parseInt(a).toString()));
  }
  ec(a) {
    super.ec(a);
    bW(this);
    if (!a && Kh()) {
      for (a = 0; a < this.i.length; a++) {
        this.i[a].wk(!1);
      }
    }
  }
  Wb(a, b) {
    if (a) {
      let c = a.target;
      if (c && (DV(c) || DV(c.parentElement))) {
        this.ya = !0;
        this.m && !this.ac && JS(this.Uc, this);
        this.ya = !1;
        return;
      }
    }
    super.Wb(a, b);
  }
  hc(a) {
    let b = Fj(this, a) || this.j.hc(a) || TV.g.pu || this.l && this.l.va.hc(a);
    if (b) {
      return b;
    }
    for (let c = 0; c < this.g.length; c++) {
      if (this.g[c].hc(a)) {
        return !0;
      }
    }
    return b;
  }
  Ke() {
    return this.g.length ? this.g[0].Ke() : super.Ke();
  }
  Yo(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      var b = this.lc - (a.clientX - this.Eb) / this.scale;
      a = this.zc - (a.clientY - this.Ib) / this.scale;
      var c = this.left + this.ab() - b * this.scale, d = this.top + this.Ka() - a * this.scale, e = new tz(c, d, b * this.scale, a * this.scale), f = b >= this.Ke() && c >= this.Ba(this.j.Ra() + 8), k = 60 <= d;
      f && this.width > b && 0 < this.g.length && (f = JV(this.g[0], 0, e));
      k && this.height > a && 0 < this.g.length && (k = LV(this.g[0], 0, e));
      f && (this.left = c, this.width = b);
      k && (this.top = d, this.height = a);
      this.V(this.width, this.height);
      this.De(this.left, this.top);
    } else {
      this.mj(a);
    }
  }
  Uo(a, b, c, d) {
    let e = Dz(this);
    var f = this.left + a >= e.pageLeft && this.left + a + this.ab() <= e.Se;
    !f && d && (a = this.left + a < e.pageLeft ? a + (e.pageLeft - (this.left + a)) : a - (this.left + a + this.ab() - e.Se), f = !0);
    f && (this.Hf(this.left + a), this.g.forEach(k => k.Hf(k.left + a)), c && (this.pe = c.clientX));
    if (60 < this.top + b && (f = this.top + b > e.pageTop && this.top + b + this.Ka() <= e.yd, !f && d && (b = this.top + b < e.pageTop ? b + (e.pageTop - this.top + b) : b - (this.top + b + this.Ka() - e.yd), f = !0), f)) {
      this.fc(this.top + b);
      for (d = 0; d < this.g.length; d++) {
        this.g[d].fc(this.g[d].top + b);
      }
      c && (this.Te = c.clientY);
    }
  }
  hl(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      var b = a.clientY - this.Ib;
      a = this.lc + (a.clientX - this.Eb) / this.scale;
      var c = this.Aa.ke(), d = c ? this.zc : this.zc + b / this.scale, e = Dz(this), f = a >= this.Ke() && this.left + a * this.scale <= e.Se;
      b = d >= this.We() && this.top + b + this.Ba(d) <= e.yd;
      c || (c = new tz(this.left, this.top, a * this.scale, d * this.scale), f && this.width > a && 0 < this.g.length && (f = JV(this.g[0], 0, c)), b && this.height > d && 0 < this.g.length && (b = LV(this.g[0], 0, c)));
      this.V(f ? a : this.width, b ? d : this.height);
      this.Aa.ke() && this.gl("");
    } else {
      this.Ai(a);
    }
  }
  mg(a) {
    this.Aa.$d();
    super.mg(a);
  }
  Zb() {
    return "FIBLayout";
  }
  U() {
    super.U();
    for (let a = 0; a < this.g.length; a++) {
      this.g[a].U();
    }
    this.g = [];
  }
}
;class dW extends Wm {
  constructor(a) {
    super();
    this.Sp = a;
    this.PD = this.Vu = -1;
    this.nx = "";
  }
  KE(a) {
    this.nx = a;
    mS(this.Sp, !1);
  }
  Qx() {
    return this.Sp.ke() && "" == this.nx ? !1 : -1 != this.Vu;
  }
  rf() {
    let a = super.rf();
    a.matchingIndex = this.Vu;
    a.strStatementTextData = this.nx;
    return a;
  }
  Fa(a) {
    A(a) || (super.Fa(a), "matchingIndex" in a && (this.Vu = a.matchingIndex), a.strStatementTextData && (this.nx = a.strStatementTextData), this.Jg(a));
  }
}
class eW extends Wm {
  constructor(a) {
    super();
    this.Sp = a;
    this.Ho = "";
  }
  Qx() {
    return this.Sp.ke() && "" == this.Ho ? !1 : !0;
  }
  KE(a) {
    this.Ho = a;
    mS(this.Sp, !1);
  }
  rf() {
    let a = super.rf();
    a.strOptionTextData = this.Ho;
    return a;
  }
  Fa(a) {
    A(a) || (super.Fa(a), a.strOptionTextData && (this.Ho = a.strOptionTextData), this.Jg(a));
  }
}
function fW(a, b) {
  if (a && b) {
    a.dd = b.imageBase64;
    let c = 1;
    "imageScale" in b && (c = b.imageScale);
    a.Jp = c;
  }
}
class gW extends Kz {
  constructor() {
    super();
    this.Wf = 8;
    this.to = 2;
    this.i = [];
    this.g = [];
  }
  Fa(a) {
    if (!A(a)) {
      super.Fa(a);
      if (a.lstOptionData) {
        var b = a.lstOptionData;
        for (var c = 0; c < b.length; c++) {
          let d = new eW(this);
          d.Fa(b[c]);
          this.i.push(d);
        }
      }
      if (a.lstStatementData) {
        for (a = a.lstStatementData, b = 0; b < a.length; b++) {
          c = new dW(this), c.Fa(a[b]), this.g.push(c);
        }
      }
    }
  }
  Fb(a) {
    super.Fb(a);
    let b = [];
    this.i.forEach(d => b.push(d.rf()));
    a.lstOptionData = b;
    let c = [];
    this.g.forEach(d => c.push(d.rf()));
    a.lstStatementData = c;
  }
  $f(a) {
    let b = super.$f(a), c = [];
    this.i.forEach(e => c.push(e.$f(a)));
    b.lstOptionData = c;
    let d = [];
    this.g.forEach(e => d.push(e.$f(a)));
    b.lstStatementData = d;
    return b;
  }
  Et() {
    let a = "<answers>";
    for (let b = 0; b < this.g.length; b++) {
      a += `<answer>${this.g[b].PD}</answer>`;
    }
    return a + "</answers>";
  }
  Am() {
    let a = super.Am();
    a.strStudentRes = this.Et();
    return a;
  }
  Wl(a) {
    super.Wl(a);
    a = this.qc;
    let b = e => 0 == e ? this.Ba(8) : this.Ba(4);
    for (var c = 0; 2 > c; c++) {
      var d = new dW(this);
      d.Jg(a.rf());
      Cm(d, a.offsetTop + a.Ka() + b(c));
      0 == c && d.Qc(a.width / 2);
      this.g.push(d);
      a = d;
    }
    a = this.qc;
    for (c = 0; c < this.to; c++) {
      d = new eW(this);
      d.Jg(a.rf());
      Cm(d, a.offsetTop + a.Ka() + b(c));
      if (0 == c) {
        let e = this.g[0];
        e && (d.offsetLeft = e.offsetLeft + (e.width + 64) * Em(e));
        d.Qc(a.width / 2);
      }
      this.i.push(d);
      a = d;
    }
  }
  cA() {
    let a = new eW(this);
    var b = this.i[this.i.length - 1];
    a.Jg(b.rf());
    b = b.offsetTop + b.Ka() + b.Ba(4);
    a.offsetTop = b;
    this.i.push(a);
    return a;
  }
  Lt(a) {
    a = this.i.indexOf(a);
    -1 != a && this.i.splice(a, 1);
  }
  Gm(a) {
    super.Gm(a);
    let b = new Image();
    b.onload = () => {
      this.se = [];
      "" == this.dd && (this.dd = nS(b, this.qc, a).replace(this.rp, ""));
      this.se.push({strKey:"Q", strDataURI:this.dd});
      for (var c = 0; c < this.g.length; c++) {
        "" == this.g[c].dd && (this.g[c].dd = nS(b, this.g[c], a).replace(this.rp, "")), this.se.push({strKey:"S" + c, strDataURI:this.g[c].dd});
      }
      for (c = 0; c < this.i.length; c++) {
        "" == this.i[c].dd && (this.i[c].dd = nS(b, this.i[c], a).replace(this.rp, "")), this.se.push({strKey:"O" + c, strDataURI:this.i[c].dd});
      }
      console.log(this.se);
    };
    b.src = a.data;
  }
  aq() {
    let a = [];
    a.push(Fm(this.qc));
    for (var b = 0; b < this.g.length; b++) {
      a.push(Fm(this.g[b]));
    }
    for (b = 0; b < this.i.length; b++) {
      a.push(Fm(this.i[b]));
    }
    rS(this, a);
  }
  Dv(a) {
    a = a.lstRect;
    var b = this.g.length + this.i.length + 1;
    if (a && a.length == b) {
      b = 0;
      sS(this, a[b]);
      this.se.push({strKey:"Q", strDataURI:this.dd});
      b++;
      for (var c = 0; c < this.g.length; c++) {
        var d = this.g[c], e = a[b];
        b++;
        fW(d, e);
        this.se.push({strKey:"S" + c, strDataURI:d.dd});
      }
      for (c = 0; c < this.i.length; c++) {
        d = this.i[c], e = a[b], b++, fW(d, e), this.se.push({strKey:"O" + c, strDataURI:d.dd});
      }
    }
    console.log(this.se);
  }
}
function hW(a, b) {
  a.uF = b && !a.Aa.ke() && "" != a.Vf;
  a.label.Sa(a.uF);
  a.uF ? a.Od.pb() : a.Od.ja();
}
function iW(a, b, c) {
  let d = a.Uw.indexOf(b);
  -1 == d && c ? a.Uw.push(b) : -1 == d || c || a.Uw.splice(d, 1);
  a.hy(!1);
}
function jW(a, b) {
  let c = a.width;
  var d = a.Wa.ob() ? a.Wa.ab() + a.Ba(4) : 0;
  d = a.left + a.ab() + d + a.Ba(4);
  let e = a.H.g[0].left;
  if (d > e) {
    let f = kW(a.H);
    d + f < b ? e = d : (e = b - f, c = (e - (d - a.ab())) / a.scale);
    a.H.g.forEach(k => {
      k.Hf(e);
      k.Ta().$d();
    });
  }
  return c;
}
function lW(a) {
  let b = a.ab() + a.Ba(4);
  a.Wa.Nd(a.left + b);
  b = (a.Ka() - a.Wa.Ka()) / 2;
  a.Wa.Ee(a.top + b);
}
class mW extends ES {
  constructor(a, b, c, d, e) {
    super(b, c);
    this.Qb = a;
    this.H = d;
    this.lu = e;
    this.Yj = !0;
    this.Fi = !1;
    this.Od = new Nj(null);
    R(this.Od, "AnnotateCoveredWidget");
    zj(this.Od, "rgb(255, 255, 255)");
    Aj(this.Od, 0.5);
    this.Z(this.Od);
    this.label = new Nz(null);
    R(this.label, "annotateellipsis");
    R(this.label, "AnnotateCoveredWidget");
    vj(this.label, "center");
    this.label.xe("rgba(0,0,0)");
    qj(this.label).fontWeight = "500";
    this.Cu = 10;
    this.label.vf(this.Cu);
    this.Z(this.label);
    wj(this.label, this.height);
    hW(this, !1);
    this.Uw = [];
    this.gA();
    this.So();
    this.zv();
    Kj(this.eb, () => this.H.u(null));
  }
  gl(a) {
    super.gl(a);
    this.Ta().KE(!A(a) && 0 < a.length ? a.trim() : "");
  }
  gA() {
    this.Ki = new Nz(null);
    this.Ki.V(8, 8);
    zj(this.Ki, "rgb(33, 150, 243)");
    qj(this.Ki).borderRadius = "50%";
    this.Z(this.Ki);
    this.Ki.Sa(!1);
  }
  mg(a) {
    this.Ta().$d();
    super.mg(a);
  }
  hy(a) {
    this.Ki.Sa(0 < this.Uw.length && !a);
  }
  ym(a) {
    this.Fi = a;
    this.oj(!1);
    this.Vf = "";
    a && -1 != this.Uw.indexOf(this.H.l) ? this.Vf = "Click to deselect match" : a && (this.Vf = "Click to confirm match");
    this.label && "" != this.Vf ? (Ej(this.label, this.Vf), this.label.vf(this.Ct()), hW(this, !0)) : hW(this, !1);
    this.Pt();
  }
  Pt() {
    let a = this.ac ? "all-scroll" : "default";
    !this.ac && ui() ? (a = "pointer", this.eb && sj(this.eb, "pointer")) : this.eb && sj(this.eb, "text");
    this.Fi && (a = "pointer");
    sj(this, a);
    this.uc("all-scroll" == a ? "Drag to move" : "");
  }
  Ig() {
    let a = "auto";
    Kh() && !ui() && (a = "none");
    uj(this, a);
    this.Pt();
  }
  Ct() {
    let a = document.createElement("canvas").getContext("2d"), b = 60;
    for (a.font = b + "px Roboto"; (a.measureText(this.Vf).width > this.width - 16 || a.measureText(this.Vf).actualBoundingBoxAscent + a.measureText(this.Vf).actualBoundingBoxDescent > this.height - 4) && !(b < this.Cu);) {
      b--, a.font = b + "px Roboto";
    }
    return b;
  }
  zv() {
    this.Wa = new Nz(null);
    zj(this.Wa, "rgba(255, 255, 255, 0.65)");
    this.Wa.jb((4).toString());
    R(this.Wa, "extension_icon");
    R(this.Wa, this.lu ? "extension_icon-plus" : "extension_icon-delete");
    R(this.Wa, "annotateclickable");
    this.Wa.uc(this.lu ? "Add option" : "Delete");
    this.Wa.Le(this.Zb() + "_Button");
    this.Wa.xe("#000000");
    this.Wa.V(Az.Zg, Az.Zg);
    Kj(this.Wa, this.jA.bind(this));
    this.Wa.Sa(!1);
  }
  jA() {
    var a = this.H;
    if (this.Yj) {
      if (this.lu) {
        var b = a.Aa.cA();
        nW(a, b);
      } else {
        b = a.g.indexOf(this), -1 != b && (a.Aa.Lt(this.Ta()), this.U(), a.g.splice(b, 1));
      }
    } else {
      if (this.lu) {
        b = a.Aa;
        var c = new dW(b), d = b.g[b.g.length - 1];
        c.Jg(d.rf());
        d = d.offsetTop + d.Ka() + d.Ba(4);
        c.offsetTop = d;
        b.g.push(c);
        oW(a, c);
      } else {
        c = a.i.indexOf(this), -1 != c && (b = a.Aa, d = b.g.indexOf(this.Ca), -1 != d && b.g.splice(d, 1), this.U(), a.i.splice(c, 1));
      }
    }
    this.lu && a.ec(a.ac);
    pW(a);
    qW(a);
  }
  Bd() {
    this.Wa.Bd();
    super.Bd();
  }
  jb(a) {
    super.jb(a);
    this.Ki.jb("5");
    this.Wa.jb(a);
  }
  ME() {
    this.Ki && this.Ki.ga(-((this.Ki.Ra() + this.Ba(1)) / 2), (this.wb() - this.Ki.wb()) / 2);
  }
  jy() {
    super.jy();
    this.ME();
  }
  Tj(a) {
    super.Tj(a);
    DS(this, a);
  }
  Zo(a) {
    this.Hi = a;
  }
  sd(a) {
    super.sd(a);
    this.Tj(a);
    this.Zo(a);
  }
  ec(a) {
    this.ac = a;
    this.oj(!1);
    this.sd(a);
    !a && this.ym(!1);
    this.jb(a ? "20" : "19");
    this.Pt();
  }
  oj(a) {
    let b = "1px solid rgba(0,0,0,0.25)";
    a ? b = "1px solid rgba(0,0,0,0)" : this.Fi ? b = "1px solid rgb(33, 150, 243)" : this.ac && (b = "1px solid rgba(0,0,0,1)");
    yj(this, b);
  }
  So() {
    this.Te = this.pe = 0;
    this.Hi = !1;
    this.lg = this.lg.bind(this);
    this.Oj = this.Oj.bind(this);
    this.Nj = this.Nj.bind(this);
    this.Pj = this.Pj.bind(this);
    this.Fh = this.Fh.bind(this);
    this.tf = this.tf.bind(this);
    this.el.addEventListener("pointerdown", this.lg, {capture:!0, passive:!1});
    this.el.addEventListener("touchstart", this.il, {capture:!0, passive:!1});
  }
  tf() {
    this.Sn(!1);
    this.yk(this.ac);
    this.nh(!1);
    this.top == this.tg && this.left == this.sg ? this.H.m && !this.H.ac ? JS(this.Uc, this.H) : (this.H.ac || Ph()) && this.H.lb && rW(this.H, this) : (Bz(this), this.mc(this.bl, {op:!0}));
  }
  lg(a) {
    this.fl(a) && (this.eb.hc(a) || a.preventDefault(), this.sg = this.left, this.tg = this.top, this.pe = a.clientX, this.Te = a.clientY, this.nh(!0), this.Sn(!0));
  }
  Oj(a) {
    a.preventDefault();
    this.tf();
  }
  Nj(a) {
    a.preventDefault();
    this.Sn(!1);
    this.nh(!1);
  }
  Pj(a) {
    a.preventDefault();
  }
  Sn(a) {
    Mj(a, this.Fh, this.Oj, this.Nj, this.Pj);
  }
  Ta() {
    return super.Ta();
  }
  kA() {
    0 == this.Qb ? this.fc(this.H.top + this.H.Ka() + this.Ba(Kz.$b)) : Jz(this, this.H.g[this.Qb - 1], this.top) && this.fc(this.H.g[this.Qb - 1].top + this.H.g[this.Qb - 1].Ka() + Kz.$b);
    this.Ta().$d();
  }
  kE() {
    let a = this.H.top + this.H.Ka() + this.Ba(Kz.$b);
    0 < this.Qb && (a = this.H.g[this.Qb - 1].top + this.H.g[this.Qb - 1].Ka() + Kz.$b);
    return a;
  }
  Yo(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      a = this.zc - (a.clientY - this.Ib) / this.scale;
      var b = this.top + this.Ka() - a * this.scale;
      a < this.We() || b < this.kE() || (this.V(this.width, a), this.ga(this.left, b));
    } else {
      this.mj(a);
    }
  }
  hl(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      var b = this.lc + (a.clientX - this.Eb) / this.scale;
      a = this.zc + (a.clientY - this.Ib) / this.scale;
      var c = Dz(this), d = c.yd - a * this.scale;
      c = c.Se - b * this.scale;
      var e = !1;
      b >= this.Ke() && this.left + this.Wa.ab() + this.Ca.Ba(4) <= c && (this.width = b, e = !0);
      this.jo && a >= this.We() && this.top <= d && (this.height = a, e = !0);
      e && this.V(this.width, this.height);
    } else {
      this.Ai();
    }
  }
  zi(a) {
    let b = this.width, c = this.height;
    if (this.lc != b || this.zc != c) {
      let d = !1, e = Dz(this);
      this.Yj || (b = jW(this, e.Se), d = b != this.width);
      let f = sW(this.H, this.Qb, this.Yj);
      f && f.Rn(this.top + this.Ka(), e.yd) && (c = (f.top - (this.top + this.Ba(Kz.$b))) / this.scale, d = !0);
      d && this.V(b, c);
    }
    super.zi(a);
  }
  Rn(a, b) {
    let c = !1, d = this.Ba(this.height + Kz.$b), e = sW(this.H, this.Qb, this.Yj);
    e ? ((c = e.Rn(a + d, b)) ? this.fc(e.top - d) : this.fc(a + this.Ba(Kz.$b)), this.Ta().$d()) : this.top - this.Ba(Kz.$b) < a && (a + d > b ? (this.fc(b - d), this.Ta().$d(), c = !0) : (this.fc(a + this.Ba(Kz.$b)), this.Ta().$d()));
    return c;
  }
  Yx(a) {
    let b = !0;
    a = this.H.top + this.H.Ba(a) + this.Ba(Kz.$b);
    if (a > this.top) {
      let c = Dz(this), d = sW(this.H, this.Qb, this.Yj);
      d && (b = d.Rr(a, this.height, c.yd, !1));
    }
    return b;
  }
  $o(a) {
    a = this.eb.No(a, this.We());
    let b = !0, c = Dz(this), d = sW(this.H, this.Qb, this.Yj);
    d && (b = d.Rr(this.top, a, c.yd, !0));
    b ? this.V(this.width, a) : this.eb.Dm();
  }
  Rr(a, b, c, d) {
    let e = !0;
    a = a + this.Ba(b + Kz.$b) - this.top;
    0 < a && (this.kg(a) <= c ? ((b = sW(this.H, this.Qb, this.Yj)) && (e = b.Rr(this.top + a, this.height, c, d)), e && d && (this.fc(this.top + a), this.Ta().$d())) : e = !1);
    return e;
  }
  Jt(a, b) {
    let c = !0, d = a - this.top;
    if (0 < d) {
      if (a = this.kg(d), a <= b) {
        let e = sW(this.H, this.Qb, this.Yj);
        e && (c = e.Jt(a, b));
        c && (this.fc(this.top + d), this.Ta().$d());
      } else {
        c = !1;
      }
    }
    return c;
  }
  Fh(a) {
    if (!kh(a)) {
      return this.tf(), !1;
    }
    a.preventDefault();
    if (this.Hi && !this.H.l) {
      let d = a.clientY - this.Te, e = this.left + (a.clientX - this.pe);
      var b = this.top + d;
      let f = Dz(this);
      0 == this.Qb && e - this.Ba(4) >= tW(this.H) && e <= f.Se - kW(this.H) && (this.H.g.forEach(k => {
        k.Hf(e);
        k.Ta().$d();
      }), this.pe = a.clientX);
      var c = this.H.rd() + this.H.Ka() + this.Ba(Kz.$b);
      0 < this.Qb && (c = this.H.g[this.Qb - 1].rd() + this.H.g[this.Qb - 1].Ka() + this.Ba(Kz.$b));
      if (b < c || 0 == this.Qb && (c = uW(this.H, this.Yj)) && c.kg(d) > f.yd) {
        return;
      }
      if (b + this.Ka() <= f.yd) {
        c = !0;
        if (0 != this.Qb) {
          let k = sW(this.H, this.Qb, this.Yj);
          k && (c = k.Jt(this.kg(d), f.yd));
        }
        if (!c) {
          return;
        }
        this.fc(b);
        if (0 == this.Qb) {
          for (b = 1; b < this.H.g.length; b++) {
            this.H.g[b].fc(this.H.g[b].top + d), this.H.g[b].Ta().$d();
          }
        }
        this.Te = a.clientY;
      }
    }
    return !0;
  }
  ef(a) {
    super.ef(a);
    this.Wa.ef(a);
  }
  V(a, b) {
    super.V(a, b);
    lW(this);
    qW(this.H);
    this.label && this.label.vf(this.Ct());
  }
  Nd(a) {
    super.Nd(a);
    lW(this);
    qW(this.H);
  }
  Ee(a) {
    super.Ee(a);
    lW(this);
    qW(this.H);
  }
  Mb(a) {
    super.Mb(a);
    this.label && wj(this.label, a);
  }
  hc(a) {
    return super.hc(a) || this.Wa.hc(a) ? !0 : !1;
  }
  U() {
    super.U();
    this.Wa.U();
  }
}
class vW extends Nz {
  constructor() {
    super(null);
    this.zj = new BA();
    this.el.appendChild(this.zj.el);
  }
  V(a, b) {
    super.V(a, b);
    this.zj.V(a, b);
  }
}
function wW(a, b) {
  a.line.style.display = b ? "block" : "none";
}
function xW(a) {
  var b = a.Ca;
  a.pm = a.H.g[Kh() ? b.Vu : b.PD];
  if (a.pm) {
    iW(a.pm, a, !0);
    b = a.el.getBoundingClientRect();
    var c = a.zj.el.getBoundingClientRect();
    let d = a.pm.el.getBoundingClientRect();
    a.rb.yx = b.right - (c.left + Kz.$b);
    a.rb.Ax = b.top - c.top + a.Ka() / 2 + Kz.$b + a.Ba(1);
    a.rb.zx = c.width;
    a.rb.Bx = d.top - c.top + a.pm.Ka() / 2 + Kz.$b + a.Ba(1);
    b = a.rb.yx;
    c = a.rb.Ax;
    a.rb.yx = b;
    a.rb.Ax = c;
    a.line.setAttributeNS(null, "x1", b.toString());
    a.line.setAttributeNS(null, "y1", c.toString());
    b = a.rb.zx;
    c = a.rb.Bx;
    a.rb.zx = b;
    a.rb.Bx = c;
    a.line.setAttributeNS(null, "x2", b.toString());
    a.line.setAttributeNS(null, "y2", c.toString());
    wW(a, !0);
  } else {
    wW(a, !1);
  }
  a.hy(!1);
}
function yW(a, b) {
  var c = a.H.g[b];
  a.pm == c ? (b = -1, iW(a.pm, a, !1)) : c && a.pm && iW(a.pm, a, !1);
  c = a.Ca;
  Kh() ? c.Vu = b : c.PD = b;
  xW(a);
}
class zW extends mW {
  constructor(a, b, c, d, e, f) {
    super(a, b, c, d, e);
    this.Yj = !1;
    this.zj = f;
    this.line = document.createElementNS("http://www.w3.org/2000/svg", "line");
    this.line.style.stroke = "rgb(33, 150, 243)";
    this.line.style.strokeWidth = "2";
    this.rb = {yx:0, Ax:0, zx:0, Bx:0};
    this.zj.zj.Z(this.line);
    wW(this, !1);
    this.pm = null;
    this.H.addEventListener(this.H.N, () => this.Pt());
  }
  gA() {
    super.gA();
    xj(this.Ki, -Kz.$b);
  }
  hy(a) {
    this.Ki.Sa(!A(this.pm) && !a);
  }
  zv() {
    super.zv();
    this.Wa.uc(this.lu ? "Add statement" : "Delete");
  }
  ym(a) {
    this.Fi = a;
    this.oj(!1);
    this.Vf = "";
    !this.ac || this.Fi || this.H.g[this.Ca.Vu] || (this.Vf = "Click to select option");
    this.label && "" != this.Vf ? (Ej(this.label, this.Vf), this.label.vf(this.Ct()), hW(this, !0)) : hW(this, !1);
    this.Pt();
  }
  Pt() {
    let a = this.ac ? "all-scroll" : "default";
    if (this.Fi || this.H && this.H.l && this.H.l != this) {
      a = "pointer";
    }
    this.ac || 15 != ki.g ? this.eb && sj(this.eb, "text") : (a = "pointer", this.eb && sj(this.eb, "pointer"));
    sj(this, a);
    this.uc("all-scroll" == a ? "Drag to move" : "");
  }
  ec(a) {
    super.ec(a);
    this.ym(this.Fi);
  }
  ME() {
    this.Ki && this.Ki.ga(this.width - this.Ki.Ra() / 2, (this.wb() - this.Ki.wb()) / 2);
  }
  kA() {
    0 == this.Qb ? this.fc(this.H.top + this.H.Ka() + this.Ba(Kz.$b)) : Jz(this, this.H.i[this.Qb - 1], this.top) && this.fc(this.H.i[this.Qb - 1].top + this.H.i[this.Qb - 1].Ka() + this.Ba(Kz.$b));
    this.Ta().$d();
  }
  kE() {
    let a = this.H.top + this.H.Ka() + this.Ba(Kz.$b);
    0 < this.Qb && (a = this.H.i[this.Qb - 1].top + this.H.g[this.Qb - 1].Ka() + this.Ba(Kz.$b));
    return a;
  }
  hl(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      var b = this.lc + (a.clientX - this.Eb) / this.scale;
      a = this.zc + (a.clientY - this.Ib) / this.scale;
      var c = Dz(this), d = c.yd - a * this.scale;
      c = c.Se - b * this.scale;
      var e = this.Wa.ob() ? this.Wa.ab() + this.Ba(4) : 0, f = !1;
      b >= this.Ke() && this.left + e + this.Ba(8) <= c && (this.width = b, f = !0);
      this.jo && a >= this.We() && this.top <= d && (this.height = a, f = !0);
      f && this.V(this.width, this.height);
    } else {
      this.Ai();
    }
  }
  Fh(a) {
    if (!kh(a)) {
      return this.tf(), !1;
    }
    a.preventDefault();
    if (this.Hi && !this.H.l) {
      let e = a.clientX - this.pe, f = a.clientY - this.Te, k = this.left + e;
      var b = this.top + f, c = Dz(this);
      if (0 == this.Qb && 0 <= k - this.Ba(4)) {
        var d = !1;
        k <= AW(this.H, c.Se) - BW(this.H) ? d = !0 : this.H.g[0].left + e <= c.Se - kW(this.H) && (this.H.g.forEach(l => {
          l.Hf(l.left + e);
          l.Ta().$d();
        }), d = !0);
        d && (this.H.i.forEach(l => {
          l.Hf(k);
          l.Ta().$d();
        }), this.pe = a.clientX);
      }
      d = this.H.rd() + this.H.Ka() + this.Ba(Kz.$b);
      0 < this.Qb && (d = this.H.i[this.Qb - 1].rd() + this.H.i[this.Qb - 1].Ka() + this.Ba(Kz.$b));
      if (b < d) {
        return;
      }
      c = c.yd;
      if (0 == this.Qb && (d = uW(this.H, this.Yj)) && d.kg(f) > c) {
        return;
      }
      if (b + this.Ka() <= c) {
        d = !0;
        if (0 != this.Qb) {
          let l = sW(this.H, this.Qb, this.Yj);
          l && (d = l.Jt(this.kg(f), c));
        }
        if (!d) {
          return;
        }
        this.fc(b);
        if (0 == this.Qb) {
          for (b = 1; b < this.H.i.length; b++) {
            this.H.i[b].fc(this.H.i[b].top + f), this.H.i[b].Ta().$d();
          }
        }
        this.Te = a.clientY;
      }
    }
    return !0;
  }
  U() {
    this.line.remove();
    this.pm && iW(this.pm, this, !1);
    super.U();
  }
}
function rW(a, b) {
  a.m && !a.ac ? JS(a.Uc, a) : (b.Yj && a.l ? (yW(a.l, a.g.indexOf(b)), a.l.ym(!1), a.g.forEach(c => c.ym(!1)), CW(a, null), mS(a.Aa, !0)) : b.Yj || a.l == b ? a.l && (a.g.forEach(c => c.ym(!1)), a.l.ym(!1), CW(a, null)) : (a.l && a.l.ym(!1), CW(a, b), a.l.ym(!0), a.g.forEach(c => c.ym(!0))), a.oh(!a.l && a.ac));
}
function sW(a, b, c) {
  return c ? a.g[b + 1] : a.i[b + 1];
}
function kW(a) {
  let b = 0;
  for (let c = 0; c < a.g.length; c++) {
    let d = a.g[c], e = d.ab() + a.Ba(4);
    d.Wa.ob() && (e += d.Wa.ab());
    b < e && (b = e);
  }
  return b;
}
function tW(a) {
  let b = 0;
  for (let c = 0; c < a.i.length; c++) {
    let d = a.i[c], e = d.Wa.left + d.Wa.ab();
    d.Wa.ob() || (e = d.left + d.ab());
    b < e && (b = e);
  }
  return b;
}
function uW(a, b) {
  return b ? a.g[a.g.length - 1] : a.i[a.i.length - 1];
}
function qW(a) {
  let b = window.visualViewport.width, c = 0;
  var d = a.i[a.i.length - 1];
  let e = a.g[a.g.length - 1];
  var f = a.i[0];
  let k = a.g[0];
  k && f && e && d && (f = Math.min(f.top, k.top), d = Math.max(d.top + d.Ka(), e.top + e.Ka()), a.i.forEach(l => {
    b > l.left + l.ab() && (b = l.left + l.ab());
  }), a.g.forEach(l => {
    c < l.left && (c = l.left);
  }), a.zj.V(c - b, d - f), a.zj.ga(b, f), a.i.forEach(l => xW(l)));
}
function AW(a, b) {
  a.g.forEach(c => {
    b > c.left - a.Ba(4) && (b = c.left - a.Ba(4));
  });
  return b;
}
function BW(a) {
  let b = 0;
  for (let c = 0; c < a.i.length; c++) {
    let d = a.i[c], e = d.ab() + a.Ba(4);
    d.Wa.ob() && (e += d.Wa.ab());
    b < e && (b = e);
  }
  return b;
}
function oW(a, b) {
  var c = a.i.length;
  c = new zW(c, a.Uc, a.Aa, a, !c, a.zj);
  a.i.push(c);
  c.xk(a.C);
  c.eb.Bi(b.nx);
  c.Cd(b);
  c.Bd();
  vz(c);
  c.ym(!1);
}
function nW(a, b) {
  var c = a.g.length;
  c = new mW(c, a.Uc, a.Aa, a, !c);
  a.g.push(c);
  c.xk(a.C);
  c.eb.Bi(b.Ho);
  c.Cd(b);
  c.Bd();
  vz(c);
}
function pW(a) {
  for (var b = 0; b < a.i.length; b++) {
    var c = 0 == b || 1 < a.i.length && b == a.i.length - 1;
    a.i[b].Wa.Sa(a.ac && c);
  }
  for (b = 0; b < a.g.length; b++) {
    c = 0 == b || 2 < a.g.length && b == a.g.length - 1, a.g[b].Wa.Sa(a.ac && c);
  }
}
function CW(a, b) {
  a.l = b;
  a.dispatchEvent(new CustomEvent(a.N, {detail:{}}));
}
function DW(a, b) {
  let c = a.left + b;
  for (let d = 0; d < a.i.length; d++) {
    c > a.i[d].left + b && (c = a.i[d].left + b);
  }
  return c;
}
function EW(a, b) {
  let c = a.left + b + a.ab();
  for (let d = 0; d < a.i.length; d++) {
    let e = a.i[d], f = e.Wa.left + b + e.Wa.ab();
    e.Wa.ob() || (f = e.left + b + e.ab());
    c < f && (c = f);
  }
  return c;
}
class FW extends HS {
  constructor(a, b) {
    super(a, b);
    this.N = Xg();
    this.Aa = this.Aa;
    this.s.Wf = this.Aa.vi();
    this.Aa.g.forEach(c => oW(this, c));
    this.Aa.i.forEach(c => nW(this, c));
    pW(this);
    qW(this);
    this.l = null;
  }
  xi() {
    super.xi();
    this.i = [];
    this.g = [];
    this.zj = new vW();
    uj(this.zj, "none");
  }
  o() {
    super.o();
    this.lb = Kh() && !this.Aa.yi() || Ph() && this.Aa.lj();
  }
  Bd() {
    super.Bd();
    this.zj.Bd();
  }
  xk(a) {
    super.xk(a);
    this.g && this.g.forEach(b => b.xk(a));
    this.i && this.i.forEach(b => b.xk(a));
  }
  Ot(a) {
    super.Ot(a);
    a = a && this.ob();
    this.i.forEach(b => wW(b, a));
  }
  Vo(a) {
    let b = !a && !this.l;
    "" == this.Aa.dd && (super.oh(b), this.oj(a));
    let c = d => {
      "" == d.Ta().dd && (d.oh(b), hW(d, !a), d.oj(a), d.hy(a));
    };
    this.g.forEach(c);
    this.i.forEach(c);
  }
  oh(a) {
    super.oh(a);
    this.g.forEach(b => b.oh(a));
    this.i.forEach(b => b.oh(a));
  }
  ec(a) {
    super.ec(a);
    for (var b = 0; b < this.i.length; b++) {
      this.i[b].ec(a);
    }
    for (b = 0; b < this.g.length; b++) {
      this.g[b].ec(a);
    }
    pW(this);
    a || (this.l = null);
  }
  mg(a) {
    this.Aa.$d();
    super.mg(a);
  }
  hc(a) {
    let b = super.hc(a);
    for (var c = 0; c < this.i.length; c++) {
      if (b || this.i[c].hc(a)) {
        b = !0;
        break;
      }
    }
    for (c = 0; c < this.g.length; c++) {
      if (b || this.g[c].hc(a)) {
        b = !0;
        break;
      }
    }
    return b;
  }
  jb(a) {
    super.jb(a);
    this.zj.jb(a);
  }
  Yo(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      var b = this.lc - (a.clientX - this.Eb) / this.scale;
      a = this.zc - (a.clientY - this.Ib) / this.scale;
      var c = this.left + this.ab() - b * this.scale, d = this.top + this.Ka() - a * this.scale, e = !1;
      b >= this.Ke() && c >= this.j.ab() + this.Ba(4) && (this.width = b, this.left = c, e = !0);
      a >= this.We() && 60 <= d && (this.height = a, this.top = d, e = !0);
      e && (this.V(this.width, this.height), this.De(this.left, this.top));
    } else {
      this.mj(a);
    }
  }
  hl(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      var b = this.lc + (a.clientX - this.Eb) / this.scale;
      a = this.zc + (a.clientY - this.Ib) / this.scale;
      var c = Dz(this), d = this.left + b * this.scale, e = !1;
      b >= this.Ke() && d <= c.Se && (this.width = b, e = !0);
      this.jo && a >= this.We() && (this.height = a, e = !0);
      e && (this.V(this.width, this.height), this.De(this.left, this.top));
    } else {
      this.Ai(a);
    }
  }
  zi(a) {
    if (this.lc != this.width || this.zc != this.height) {
      let b = !1, c = Dz(this);
      Jz(this.g[0], this, this.g[0].top) && (b = this.g[0].Rn(this.top + this.Ka(), c.yd));
      Jz(this.i[0], this, this.i[0].top) && (b = b || this.i[0].Rn(this.top + this.Ka(), c.yd));
      b && this.V(this.width, Math.min((this.g[0].top - (this.top + this.Ba(Kz.$b))) / this.scale, (this.i[0].top - (this.top + this.Ba(Kz.$b))) / this.scale));
    }
    super.zi(a);
  }
  $o(a) {
    a = this.eb.No(a, this.We());
    let b = this.i[0].Yx(a);
    if (b = b && this.g[0].Yx(a)) {
      this.V(this.width, a);
      if (Jz(this.g[0], this, this.g[0].top)) {
        for (a = 0; a < this.g.length; a++) {
          this.g[a].kA();
        }
      }
      if (Jz(this.i[0], this, this.i[0].top)) {
        for (a = 0; a < this.i.length; a++) {
          this.i[a].kA();
        }
      }
    } else {
      this.eb.Dm();
    }
  }
  Uo(a, b, c, d) {
    let e = Dz(this);
    var f = DW(this, a), k = EW(this, a);
    let l = f >= e.pageLeft && k <= e.Se;
    !l && d && (a = f < e.pageLeft ? a + (e.pageLeft - f) : a - (k - e.Se), l = !0);
    f = !1;
    60 < this.top + b && (k = Math.max(uW(this, !1).kg(b), uW(this, !1).kg(b)), f = this.top + b > e.pageTop && k <= e.yd, !f && d && (b = this.top + b < e.pageTop ? b + (e.pageTop - this.top + b) : b - (k - e.yd), f = !0));
    if (l || f) {
      l ? c && (this.pe = c.clientX) : a = 0, f ? c && (this.Te = c.clientY) : b = 0, this.De(this.left + a, this.top + b), this.i.forEach(n => {
        n.De(n.left + a, n.top + b);
        n.Ta().$d();
      }), this.g.forEach(n => {
        n.De(n.left + a, n.top + b);
        n.Ta().$d();
      });
    }
  }
  Sa(a) {
    super.Sa(a);
    this.zj && this.zj.Sa(a);
    if (this.i) {
      for (var b = 0; b < this.i.length; b++) {
        this.i[b].Sa(a);
      }
    }
    if (this.g) {
      for (b = 0; b < this.g.length; b++) {
        this.g[b].Sa(a);
      }
    }
    a && qW(this);
  }
  U() {
    for (var a = 0; a < this.i.length; a++) {
      this.i[a].U();
    }
    for (a = 0; a < this.g.length; a++) {
      this.g[a].U();
    }
    this.zj.U();
    super.U();
  }
}
;class GW extends Kz {
  constructor() {
    super();
    this.Wf = 19;
    this.Oi = new Wm();
    this.i = null;
    this.g = this.JD = "";
  }
  Am() {
    let a = super.Am();
    a.strDrawingData = this.i;
    return a;
  }
  lA(a) {
    "strDrawingData" in a && (this.i = a.strDrawingData);
    "strDrawingPreview" in a && (this.JD = a.strDrawingPreview);
  }
  Fa(a) {
    A(a) || (super.Fa(a), a.strBgImgFileName && (this.g = a.strBgImgFileName), a.drawingWidModel && this.Oi.Jg(a.drawingWidModel));
  }
  Fb(a) {
    super.Fb(a);
    a.drawingWidModel = this.Oi.rf();
    a.strBgImgFileName = this.g;
  }
  $f(a) {
    var b = super.$f(a);
    b.drawingWidModel = this.Oi.$f(a);
    return b;
  }
  Wl(a) {
    super.Wl(a);
    a = Em(this.qc);
    this.Oi.Jg(this.qc.rf());
    this.Oi.offsetTop = this.qc.offsetTop + (this.qc.height + 4) * a;
    this.Oi.Mb(60);
  }
  Gm(a) {
    super.Gm(a);
    let b = new Image();
    b.onload = () => {
      this.se = [];
      1 == this.al && ("" == this.dd && (this.dd = nS(b, this.qc, a).replace(this.rp, "")), this.se.push({strKey:"Q", strDataURI:this.dd}));
      "" == this.Oi.dd && (this.Oi.dd = nS(b, this.Oi, a).replace(this.rp, ""));
      this.se.push({strKey:"O0", strDataURI:this.Oi.dd});
    };
    b.src = a.data;
  }
  aq() {
    let a = [];
    1 == this.al && a.push(Fm(this.qc));
    a.push(Fm(this.Oi));
    rS(this, a);
  }
  Dv(a) {
    a = a.lstRect;
    var b = 1 == this.al ? 2 : 1;
    if (a && a.length == b) {
      b = 0;
      1 == this.al && (sS(this, a[b]), this.se.push({strKey:"Q", strDataURI:this.dd}), b++);
      this.Oi.dd = a[b].imageBase64;
      let c = 1;
      "imageScale" in a[b] && (c = a[b].imageScale);
      this.Oi.Jp = c;
      this.se.push({strKey:"O0", strDataURI:this.Oi.dd});
    }
    console.log(this.se);
  }
  sE() {
    return !0;
  }
}
function HW(a) {
  a.label = new Nz(null);
  R(a.label, "annotateellipsis");
  vj(a.label, "center");
  a.label.xe("rgba(0, 0, 0, 0.54)");
  qj(a.label).fontWeight = "500";
  a.Cu = 36;
  a.label.vf(a.Cu);
  a.Z(a.label);
  a.label.ga(0, 0);
  IW(a);
  a.label.Sa(!0);
  Ph() && (sj(a.label, "pointer"), a.label.jb((4).toString()), Kj(a.label, () => {
    if (a.bd.i) {
      var b = a.bd;
      a.bd.Aa.qc.s = b;
      var c = JW.g;
      c.m = b;
      b = c.m.Aa;
      var d = S.i;
      d ? (d = d.Bk, d = `AnnotateDataRequest.php?src=userfile/${d.j}/${d.i}/${b.g}`) : d = null;
      b = {strDrawingData:b.i, strBgImage:d, width:b.Oi.Ra(), height:b.Oi.wb()};
      c.g = {uPanelType:8, drawingpadData:b};
      c.i.i = 8;
      c.l(!1);
    }
  }));
}
function IW(a) {
  a.Vf = "";
  if (Kh()) {
    if (!a.ac) {
      a.label.ja();
      a.Od.ja();
      return;
    }
    a.Vf = "Drawing area";
  } else {
    Ph() && a.bd.i ? (sj(a.label, "pointer"), a.Vf = "Click to draw") : sj(a.label, "default");
  }
  a.label.vf(a.Ct());
  Ej(a.label, a.Vf);
  !a.label.ob() && a.label.pb();
  !a.Od.ob() && a.Od.pb();
}
class KW extends uS {
  constructor(a) {
    super();
    this.bd = a;
    yj(this, "1px solid rgba(0,0,0,0.25)");
    uj(this, "auto");
    Kh() && Kj(this, () => {
      ui() && this.bd.m && !this.bd.ac && JS(this.bd.Uc, this.bd);
    });
    this.Od = new Nj(null);
    zj(this.Od, "rgb(255, 255, 255)");
    Aj(this.Od, 0.5);
    this.Od.ga(0, 0);
    qj(this.Od).backgroundRepeat = "no-repeat";
    this.Z(this.Od);
    HW(this);
  }
  Im(a) {
    a && a.length && this.Od.Im(a);
  }
  Ct() {
    var a = ih(this.Vf, this.Cu);
    a = this.Cu / (a + 72 / a * 72) * this.width;
    60 < a ? a = 60 : 10 > a && (a = 10);
    return a;
  }
  mg(a) {
    super.mg(a);
    Fz(this);
    this.Ta().$d();
    mS(this.bd.Aa, !0);
  }
  Vo(a) {
    "" == this.Ta().dd && (this.oj(a), this.oh(!a), this.label.Sa(!a), a ? this.Od.ja() : this.Od.pb());
  }
  M() {
    super.M();
    zj(this.Sb, "red");
    sj(this.Sb, "nw-resize");
    xj(this.Sb, -Kz.$b);
    this.Sb.V(8, 8);
    this.Sb.ga(this.width - this.Sb.Ra() / 2, this.wb() - this.Sb.wb() / 2);
  }
  We() {
    return 72;
  }
  Ke() {
    return 72;
  }
  hl(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      var b = this.lc + (a.clientX - this.Eb) / this.scale;
      a = this.zc + (a.clientY - this.Ib) / this.scale;
      var c = Dz(this), d = !1;
      b >= this.Ke() && this.left + b * this.scale <= c.pageLeft + c.Kl && (this.width = b, d = !0);
      a >= this.We() && this.top + a * this.scale <= c.pageTop + c.Jl && (this.height = a, d = !0);
      d && (this.V(this.width, this.height), this.De(this.left, this.top));
    } else {
      this.Ai();
    }
  }
  i(a) {
    (this.Hi = a) ? (this.el.addEventListener("pointerdown", this.lg, {capture:!0, passive:!1}), this.el.addEventListener("touchstart", this.il, {capture:!0, passive:!1})) : (this.el.removeEventListener("pointerdown", this.lg, {capture:!0}), this.el.removeEventListener("touchstart", this.il, {capture:!0}));
  }
  lg(a) {
    this.Sb.hc(a) || (a.preventDefault(), this.tg = this.top, this.sg = this.left, this.Te = a.clientY, this.pe = a.clientX, this.Sn(!0));
  }
  Fh(a) {
    if (!kh(a)) {
      return this.tf(), !1;
    }
    a.preventDefault();
    if (this.Hi) {
      let b = this.left + (a.clientX - this.pe), c = this.top + (a.clientY - this.Te), d = Dz(this);
      !Iz(this, this.bd, b, 4) && b >= d.pageLeft && b <= d.pageLeft + d.Kl - this.ab() && (this.Hf(b), this.pe = a.clientX);
      !Jz(this, this.bd, c) && c >= this.bd.rd() && c <= d.pageTop + d.Jl - this.Ka() && (this.fc(c), this.Te = a.clientY);
    }
    return !0;
  }
  Qc(a) {
    super.Qc(a);
    this.Od.Qc(a);
    Gj(this.Od, `${a}px ${this.height}px`);
    this.Sb && this.Sb.Nd(this.width - this.Sb.Ra() / 2);
    this.label.Qc(a);
    this.label.vf(this.Ct());
  }
  Mb(a) {
    super.Mb(a);
    this.Od.Mb(a);
    Gj(this.Od, `${this.width}px ${a}px`);
    this.Sb && this.Sb.Ee(this.height - this.Sb.wb() / 2);
    this.label.Mb(this.height);
    wj(this.label, this.height);
  }
  sd(a) {
    super.sd(a);
    this.Tj(a);
    this.Zo(a);
  }
  ec(a) {
    super.ec(a);
    this.sd(a);
    this.oj(!1);
    this.Jm();
    IW(this);
  }
  Jm() {
    let a = this.ac ? "all-scroll" : "default";
    this.ac || (a = ui() ? "pointer" : "default");
    sj(this, a);
    this.uc("all-scroll" == a ? "Drag to move" : "");
  }
  oj(a) {
    let b = "1px solid rgba(0,0,0,0.25)";
    a ? b = "1px solid rgba(0,0,0,0)" : this.ac && (b = "1px solid rgba(0,0,0,1)");
    yj(this, b);
  }
  Zb() {
    return "DrawingQuestionContainerWid";
  }
}
var LW = null;
function MW(a) {
  -1 != a.j && clearTimeout(a.j);
  a.j = -1;
}
function NW(a, b) {
  BQ(a.i) && (b && Sn(), RA(b), DQ(a.i, b), b && NQ(a.i));
  MW(a);
}
class JW extends EventTarget {
  static get g() {
    A(LW) && (LW = new JW());
    return LW;
  }
  constructor() {
    super();
    this.i = mC;
    this.s = this.s.bind(this);
    this.l = this.l.bind(this);
    this.i && this.i.addEventListener(HQ.g, this.s);
    this.j = -1;
    this.m = null;
    this.o = !1;
    Lo.addEventListener(Lo.C, () => {
      this.o && this.l(!0);
    });
  }
  l(a) {
    console.log("[Assessment] bForcefully-> ", a);
    this.o = !1;
    MW(this);
    if (BQ(this.i)) {
      if (!a && Lo.o) {
        this.o = !0;
        Vn("Loading...", null);
        this.j = setTimeout(() => {
          this.l(!0);
        }, 1E4);
        return;
      }
      this.i.j ? 8 == this.i.i && (CQ(this.i, this.g), this.g = null) : (FQ(this.i), Vn("Loading...", null));
    } else {
      EQ(this.i), NW(this, !1), FQ(this.i), Vn("Loading...", null);
    }
    NW(this, !1);
    PQ(this.i);
    this.j = setTimeout(() => {
      Sn();
      MW(this);
    }, 3E4);
  }
  s(a) {
    var b = a.detail;
    let c = !1;
    b && 8 == this.i.i && (c = "uPanelType" in b ? 8 == b.uPanelType : !0);
    if (c) {
      switch(parseInt(a.detail.chromeExtensionCommand)) {
        case Kg.Mq:
          NW(this, !0);
          break;
        case Kg.Lq:
          NW(this, !1);
          break;
        case Kg.OK:
          A(this.m) || this.m.lA(a.detail);
          NW(this, !1);
          break;
        case Kg.up:
          null != this.g && 8 == this.i.i && (CQ(this.i, this.g), this.g = null);
          break;
        default:
          NW(this, !1);
      }
    }
  }
}
function OW(a) {
  a.g = new KW(a);
  uj(a.g, "auto");
  a.g.Bd();
  a.g.Cd(a.Aa.Oi);
  vz(a.g);
  Kh() && Kj(a.g, () => {
    ui() && a.m && !a.ac && JS(a.Uc, a);
  });
}
class PW extends HS {
  constructor(a, b) {
    super(a, b);
    this.Aa = this.Aa;
    this.s.Wf = this.Aa.vi();
    OW(this);
  }
  mg(a) {
    this.Aa.$d();
    super.mg(a);
  }
  o() {
    super.o();
    this.i = Ph() && this.Aa.lj();
    this.g && IW(this.g);
  }
  Ig(a) {
    super.Ig(a);
    this.g && this.g.Jm();
  }
  ec(a) {
    super.ec(a);
    this.g.ec(a);
  }
  jb(a) {
    super.jb(a);
    this.g.jb(a);
  }
  Yo(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      var b = this.lc - (a.clientX - this.Eb) / this.scale;
      a = this.zc - (a.clientY - this.Ib) / this.scale;
      var c = this.left + this.ab() - b * this.scale, d = this.top + this.Ka() - a * this.scale, e = !1;
      b >= this.Ke() && c >= (this.j.Ra() + 4) * this.scale && (this.width = b, this.left = c, e = !0);
      a >= this.We() && 60 <= d && (this.height = a, this.top = d, e = !0);
      e && (this.V(this.width, this.height), this.De(this.left, this.top));
    } else {
      this.mj(a);
    }
  }
  Uo(a, b, c, d) {
    let e = Math.min(this.left + a, this.g.left + a), f = Math.max(this.left + a + this.ab(), this.g.left + a + this.g.ab()), k = Math.max(this.top + b + this.Ka(), this.g.top + b + this.g.Ka()), l = Dz(this), n = e >= l.pageLeft && f <= l.Se;
    !n && d && (a = e < l.pageLeft ? a + (l.pageLeft - e) : a - (f - l.Se), n = !0);
    n && (this.Hf(this.left + a), this.g.Hf(this.g.left + a), this.g.Ta().$d(), c && (this.pe = c.clientX));
    60 < this.top + b && (a = this.top + b >= l.pageTop && k <= l.yd, !a && d && (b = this.top + b < l.pageTop ? b + (l.pageTop - this.top + b) : b - (k - l.yd), a = !0), a && (this.fc(this.top + b), this.g.fc(this.g.top + b), this.g.Ta().$d(), c && (this.Te = c.clientY)));
  }
  hl(a) {
    if (kh(a) && this.qg) {
      a.preventDefault();
      var b = this.lc + (a.clientX - this.Eb) / this.scale;
      a = this.zc + (a.clientY - this.Ib) / this.scale;
      var c = Dz(this), d = !1, e = !1;
      b >= this.Ke() && this.left + b * this.scale <= c.pageLeft + c.Kl && (this.width = b, d = !0);
      a >= this.We() && this.jo && (e = !0);
      if (d || e) {
        this.V(this.width, e ? a : this.height), this.De(this.left, this.top);
      }
    } else {
      this.Ai(a);
    }
  }
  zi(a) {
    if (this.lc != this.width || this.zc != this.height) {
      let b = Dz(this), c = this.top + this.Ba(this.height + Kz.$b);
      c > this.g.top && (c + this.g.Ka() <= b.yd ? this.g.De(this.g.left, c) : (this.g.De(this.g.left, b.yd - this.g.Ka()), this.V(this.width, (this.g.rd() - (this.top + this.Ba(Kz.$b))) / this.scale)), this.g.Ta().$d());
    }
    super.zi(a);
  }
  $o(a) {
    a = this.eb.No(a, this.We());
    let b = !1, c = Dz(this), d = this.top + this.Ba(a + 4);
    d < this.g.top ? b = !0 : d + this.g.Ka() <= c.yd && (this.g.De(this.g.left, d), b = !0);
    b ? this.V(this.width, a) : this.eb.Dm();
  }
  hc(a) {
    return super.hc(a) || this.g.hc(a) ? !0 : !1;
  }
  Vo(a) {
    this.ac && (this.Aa.ke() || "" != this.Aa.dd || (this.oh(!a), this.oj(a)), this.g.Vo(a));
  }
  Zb() {
    return "DrawingQuestionWid";
  }
  Sa(a) {
    super.Sa(a);
    this.g && this.g.Sa(a);
  }
  U() {
    this.g.U();
    super.U();
  }
  lA(a) {
    this.Aa.lA(a);
    "" != this.Aa.JD && this.g.Im(this.Aa.JD);
  }
}
;function QW(a, b) {
  a.status = b;
  -1 != S.j && null != S.i && S.i.Bk.ap(S.j, a.g, a.status);
  a.Wo();
  (a = Up.g) && am(a);
}
function RW(a) {
  a.$l && Ph() && (a.lj() && a.i.length ? (null == a.j && (a.j = new Nz(""), R(a.j, "AnnotateAssessmentSubmitButton"), R(a.j, "annotateclickable"), a.j.el.innerText = "SUBMIT", a.j.jb((parseInt(Yj) - 1).toString()), a.j.ja(), document.body.appendChild(a.j.el), Kj(a.j, a.v.bind(a))), a.j.pb()) : a.j && a.j.ja());
}
function SW(a, b) {
  a.i = [];
  for (let f = 0; f < b.length; f++) {
    var c = b[f];
    if (c && c.strQuestionUUID) {
      var d = Lo.Uc.j.get(c.strQuestionUUID);
      if (d) {
        c = d[0], c.os = a, d = c, d.Aq = !0, d.cx = -1, a.i.push(c);
      } else {
        d = c.uQuestionType;
        var e = null;
        2 == d || 3 == d ? e = new ZS(d) : 5 == d || 0 == d ? e = new BT(d) : 9 == d ? e = new FT() : 14 == d ? e = new FV() : 8 == d ? e = new gW() : 19 == d ? e = new GW() : e = new Kz();
        d = e;
        d.os = a;
        e = d;
        e.Aq = !0;
        e.cx = -1;
        d.Fa(c);
        if ((c = c.strElementData) && c.length && (c = JSON.parse(c), d.Fa(c), Kh() || Ph() && a.yi()) && (c = d, e = Lo.Uc, !e.j.has(c.nk))) {
          let k = TW(e, c);
          vz(k);
          e.j.set(c.nk, [c, k]);
        }
        a.i.push(d);
      }
    }
  }
}
function UW(a, b) {
  a.i = [];
  for (let c = 0; c < b.length; c++) {
    let d = new Kz();
    d.os = a;
    d.Fa(b[c]);
    a.i.push(d);
  }
}
function VW(a, b) {
  let c = a.i.findIndex(d => d.nk = b);
  -1 != c && (console.log("[Assessment] delete question at index ", c), a.i.splice(c, 1));
}
class cs extends Wm {
  static get i() {
    return "EVT_MODIFIED_ASSESSMENT_DATA";
  }
  static get g() {
    return 64;
  }
  constructor() {
    super();
    this.g = null;
    this.o = "";
    this.status = 1;
    this.m = null;
    this.i = [];
    this.l = null;
    this.gi = this.$l = !1;
    this.j = null;
  }
  v() {
    let a = {};
    a.strAssessmentId = this.g;
    let b = [];
    this.i.forEach(c => {
      b.push(c.Am());
    });
    a.lstQuestionRes = b;
    WW(a, this.g, this.B.bind(this));
  }
  B(a) {
    Sn();
    let b = !0;
    a && ("bSuccess" in a && (b = a.bSuccess), b && QW(this, 4));
    return b;
  }
  yi() {
    return 1 != this.status ? !0 : null != S.i ? S.i.Bk.yi(S.j, this.g) : !1;
  }
  lj() {
    return 5 == this.status ? !0 : -1 != S.j && null != S.i ? S.i.Bk.lj(S.j, this.g) : !1;
  }
  Wo() {
    this.i.forEach(a => a.Wo());
    super.Wo();
    RW(this);
  }
  Fa(a) {
    A(a) || (super.Fa(a), a.strAssessmentId && (this.g = a.strAssessmentId), a.editUUID && nh(this, a.editUUID), a.assessmentUUID && (this.m = a.assessmentUUID), a.strTaskName && (this.o = a.strTaskName), "status" in a && QW(this, a.status), this.gi = "bMarkToBeDeleted" in a && 1 == a.bMarkToBeDeleted ? !0 : !1, "offsetLeft" in a && (this.offsetLeft = a.offsetLeft), "offsetTop" in a && (this.offsetTop = a.offsetTop), a.pageInfo && (this.A = JSON.parse(JSON.stringify(a.pageInfo))), a.slideId && (this.l = 
    a.slideId), "pageIndex" in a && (this.S = a.pageIndex), "bInDocumentAssessment" in a && (this.$l = 1 == a.bInDocumentAssessment ? !0 : !1), a.lstQuestion && (a = a.lstQuestion, a.length && (this.$l ? SW(this, a) : UW(this, a))), RW(this), console.log("[Assessment] this->AssessmentData parsesaveddata ", this.g), this.s && this.s.ba());
  }
  Ad(a) {
    super.Ad(a);
    this.Fa(a);
  }
  Fb(a) {
    a.strAssessmentId = this.g;
    a.editUUID = this.qe;
    a.assessmentUUID = this.m;
    a.strTaskName = this.o;
    a.bMarkToBeDeleted = this.gi ? 1 : 0;
    a.offsetLeft = this.offsetLeft;
    a.offsetTop = this.offsetTop;
    a.pageInfo = this.A ? JSON.parse(JSON.stringify(this.A)) : this.A;
    a.pageIndex = this.S;
    a.slideId = this.l;
    a.bInDocumentAssessment = this.$l ? 1 : 0;
  }
  G(a) {
    A(a) || (this.ce = !0, super.Fa(a), a.strAssessmentId && (this.g = a.strAssessmentId), a.editUUID && nh(this, a.editUUID), a.assessmentUUID && (this.m = a.assessmentUUID), a.strTaskName && (this.o = a.strTaskName), "status" in a && QW(this, a.status), a.lstQuestion && (a = a.lstQuestion, a.length && (this.$l ? SW(this, a) : UW(this, a))), console.log("[Assessment] this->AssessmentData parsesaveddata ", this.g), A(this.s) ? this.mc(cs.i, {strAssessmentId:this.g}) : this.s.ba());
  }
  xg() {
    return this.g;
  }
  Na() {
    var a = super.Na();
    this.Fb(a);
    return a;
  }
  cb() {
    return "Assessment";
  }
  Mr() {
    return this.l;
  }
}
class XW {
  constructor(a) {
    this.status = a;
  }
}
function ts(a, b) {
  let c = YW(a, b);
  if (!A(c)) {
    c.$l && ZW(a.Uc);
    var d = S.i;
    if (d) {
      let e = {arrAssessmentAttachments:[]}, f = d.i.indexOf(c);
      0 <= f && (0 <= f && f < d.i.length && d.i.splice(f, 1), e.arrAssessmentAttachments.push(c.ta));
      d.xb();
      d.dispatchEvent(new CustomEvent(Cp.g, {detail:e}));
    }
    a.g.delete(b);
    console.log("[Assessment] this->AssessmentDocument deleteAssessmentDataById ", b);
  }
  a.mc(a.l, {strAssessmentId:b});
}
function Zp(a) {
  let b = [];
  a.g.forEach(c => b.push(c.Na()));
  return b;
}
function $W(a, b) {
  if (!A(b) && (a.i.clear(), b = b.lstAssessmentData, !A(b) && b.length)) {
    for (let f = 0; f < b.length; f++) {
      let k = a.g.get(b[f].strAssessmentId);
      if (k) {
        var c = k, d = b[f];
        if (!A(d)) {
          var e = d.lstQuestion;
          !A(e) && e.length && (c.$l ? SW(c, e) : UW(c, e));
          "status" in d && QW(c, d.status);
          A(c.s) ? c.dispatchEvent(new CustomEvent(cs.i, {detail:{strAssessmentId:c.g}})) : (c = c.s, console.log("[Assessment] this->AssessmentItem onQuestionListUpdated"), aX(c), c.g && bX(c.g));
          console.log("[Assessment] this->AssessmentData ParseQuestionData ", e);
        }
        a.i.set(k.xg(), new XW(k.status));
      }
    }
  }
}
function cX(a, b) {
  a.g.forEach(c => {
    c.$l && VW(c, b);
  });
}
function ds(a, b) {
  b && b.addEventListener(cs.i, c => {
    a.dispatchEvent(new CustomEvent(cs.i, {detail:c.detail}));
  });
}
function YW(a, b) {
  return a.g.has(b) ? a.g.get(b) : null;
}
function dX(a, b) {
  console.log("[Assessment] all slideid ", b);
  a.g.forEach(c => {
    console.log("[Assessment] slideid match", c.l);
    c.gi = -1 == b.indexOf(c.l) ? !0 : !1;
  });
}
function eX(a) {
  let b = {};
  a.g.forEach(c => {
    var d = S;
    d = d.i ? d.i.Uf : "";
    Jk(P) && null != c.l && "" != d && (d = d + "assessmentThumbnail/" + c.l + ".png");
    "" == d || c.gi || (b[c.xg()] = d);
  });
  console.log("[Assessment] getAssessmentsContentThumbanil", b);
  return b;
}
function fX(a) {
  let b = [];
  a.g.forEach(c => {
    c.gi && b.push(c.xg());
  });
  return b;
}
class gX extends ph {
  constructor() {
    super();
    this.o = Xg();
    this.j = Xg();
    this.m = Xg();
    this.l = Xg();
    this.Uc = null;
    this.g = new Map();
    this.i = new Map();
  }
}
;class hX extends Nz {
  constructor(a) {
    super(null);
    this.Sp = a;
    R(this, "AnnotatePluginAssessmentCommon");
    R(this, "annotate-wrap-text");
    this.Mb(36);
    this.tt = new Nz(null);
    R(this.tt, "AnnotatePluginAssessmentItemTile");
    this.icon = new Nz(null);
    var b = a.vi();
    this.icon.el.className += " " + (A(b) ? "" : Tg[b]);
    this.icon.V(24, 24);
    this.zo = new Nz(null);
    R(this.zo, "AnnotatePluginAssessmentTileText");
    wj(this.zo, 22);
    Ej(this.zo, a.Dz);
    this.tt.Z(this.icon);
    this.tt.Z(this.zo);
    this.Z(this.tt);
  }
  ga(a, b) {
    super.ga(a, b);
    this.tt.ga(4, 0);
    a = 0;
    this.icon.ga(a, (this.tt.wb() - this.icon.wb()) / 2);
    a += this.icon.Ra() + 8;
    this.zo.ga(a, 0);
  }
  V(a, b) {
    this.zo.Qc(a - this.icon.Ra() - 8);
    ih(this.Sp.Dz, 16) + 4 >= this.zo.Ra() ? (wj(this.zo, 24), b = 48) : wj(this.zo, b);
    this.zo.Mb(b);
    this.tt.V(a, b);
    super.V(a, b + 8);
  }
}
function iX(a) {
  jX() ? (pj(a.g, "extension_icon-show_annotations"), R(a.g, "extension_icon-edit"), a.g.uc("EDIT")) : (pj(a.g, "extension_icon-edit"), R(a.g, "extension_icon-show_annotations"), a.g.uc("OPEN"));
}
function bX(a) {
  if (a.l) {
    let b = a.l.i.length;
    if (0 < b) {
      Ij(a);
      a.j.forEach(c => {
        c.U();
      });
      a.j = [];
      for (let c = 0; c < b; c++) {
        let d = new hX(a.l.i[c]);
        d.V(a.width - 8, 36);
        a.j.push(d);
        a.Z(d);
      }
    } else {
      Hj(a), a.s();
    }
  }
  kX(a);
  a.ga(a.vd(), a.rd());
  lX(a);
}
function lX(a) {
  0 < a.j.length ? (R(a.g, "annotateclickable"), pj(a.g, "AnnotateMsgDialogBtnDisabled"), a.g.sf = !0) : (pj(a.g, "annotateclickable"), R(a.g, "AnnotateMsgDialogBtnDisabled"), a.g.sf = !1);
}
function kX(a) {
  let b = 0;
  if (a.j.length) {
    for (let c = 0; c < a.j.length; c++) {
      b += a.j[c].wb();
    }
    b += 16;
  } else {
    b = 44;
  }
  a.Mb(420 < b ? 420 : b);
  a.g.ga(a.Ra() - 32 - 4, 4);
}
function mX(a, b, c, d) {
  a.i && (b ? (pj(a.i, "AnnotatepluginAssessmentRightPointer"), R(a.i, "AnnotatepluginAssessmentLeftPointer"), a.m = !1) : (pj(a.i, "AnnotatepluginAssessmentLeftPointer"), R(a.i, "AnnotatepluginAssessmentRightPointer"), a.m = !0), a.i.ga(d, c));
}
class nX extends Nz {
  constructor(a, b, c) {
    super(null);
    this.Qc(400);
    this.l = a;
    this.u = b;
    this.s = c;
    this.C = this.o.bind(this);
    this.i = this.g = null;
    this.j = [];
    R(this, "AnnotatePluginAssessmentCommon");
    R(this, "AnnotatePluginAssessmentViewContainer");
    this.g = new Nz(null);
    R(this.g, "AnnotatePluginCircularIconBtn");
    R(this.g, "extension_icon");
    iX(this);
    R(this.g, "annotateclickable");
    this.g.Le(this.Zb() + "_Btn");
    this.g.el.style.right = "0px";
    this.g.V(32, 32);
    this.g.ga(this.Ra() - 32 - 4, 4);
    Kj(this.g, this.C);
    this.Z(this.g);
    Kh() && !cl(2) || -1 != S.j ? bX(this) : lX(this);
  }
  Zb() {
    return "AssessmentViewContainer";
  }
  o() {
    this.g.sf && this.u();
  }
  pb() {
    super.pb();
    this.i.pb();
  }
  ja() {
    super.ja();
    this.i.ja();
  }
  jb(a) {
    super.jb(a);
    this.i && this.i.jb(a);
  }
  ga(a, b) {
    super.ga(a, b);
    if (0 < this.j.length) {
      for (a = 8, b = 0; b < this.j.length; b++) {
        let c = this.j[b];
        c.ga(4, a);
        a += c.wb();
      }
    }
  }
  Kd(a) {
    super.Kd(a);
    this.i && this.i.Kd(a);
  }
  U() {
    this.i && (this.i.U(), this.i = null);
    super.U();
  }
}
function oX(a) {
  R(a, "AnnotatePluginAssessmentCommon");
  R(a, "AnnotatePluginAssessmentItem");
  R(a, "annotate-plugin-clickable-element");
  a.i = tk("extension_icon-add_assessment");
  R(a.i, "AnnotatePluginAssessmentCommon");
  R(a.i, "AnnotatePluginAssessmentIcon");
  a.i.jb("1");
  a.o = tk("extension_icon-rect_background");
  R(a.o, "AnnotatePluginAssessmentCommon");
  R(a.o, "AnnotatePluginAssessmentIconBackground");
  a.o.xe("white");
  a.j = new Nz(null);
  R(a.j, "AnnotatePluginAssessmentCommon");
  R(a.j, "AnnotatePluginAssessmentStatusLabel");
  Ej(a.j, "");
  a.Z(a.o);
  a.Z(a.i);
  a.Z(a.j);
  a.parentElement.appendChild(a.el);
  pX(a, !0);
  aX(a);
  a.Va = a.gf.bind(a);
  a.ib = a.Cf.bind(a);
  qX(a, !0);
  Gz(a, () => {
    a.Ta().i.length && a.ya();
  });
}
function pX(a, b) {
  b ? a.i.el.addEventListener("pointerdown", a.Ha, a.O) : a.i.el.removeEventListener("pointerdown", a.Ha, a.O);
}
function aX(a) {
  switch(a.Ta().status) {
    case 5:
      Ej(a.j, "Active");
      a.j.pb();
      a.j.xe("#2196f3");
      a.i.xe("#2196f3");
      sj(a.i, "pointer");
      break;
    case 3:
      Ej(a.j, "Submitted");
      a.j.pb();
      a.j.xe("#4dae7c");
      a.i.xe("#4dae7c");
      sj(a.i, "pointer");
      break;
    case 4:
      Ej(a.j, "Closed");
      a.j.pb();
      a.j.xe("rgba(0, 0, 0, 0.54)");
      a.i.xe("rgb(0, 0, 0)");
      sj(a.i, "pointer");
      break;
    default:
      Ej(a.j, ""), a.j.ja(), a.i.xe("rgb(0, 0, 0)"), Kh() && !cl(2) || sj(a.i, "default");
  }
  rX(a);
}
function qX(a, b) {
  sX(a);
  a.C = !1;
  b ? (a.i.el.addEventListener("pointerenter", a.Va), a.i.el.addEventListener("pointerleave", a.ib)) : (a.i.el.removeEventListener("pointerenter", a.Va), a.i.el.removeEventListener("pointerleave", a.ib));
}
function sX(a) {
  clearTimeout(a.ia);
  a.ia = -1;
}
function tX(a, b) {
  b = b && (Kh() && !cl(2) || Kh() && cl(2) && -1 != S.j || Ph() && 1 != a.Ta().status);
  if (A(a.g) && b) {
    a.g = new nX(a.Ta(), a.Bj, a.Nl);
    a.parentElement.appendChild(a.g.el);
    var c = a.g, d = a.parentElement;
    c.i = new Nz(null);
    R(c.i, "AnnotatePluginAssessmentCommon");
    c.i.jb("2147483643");
    d.appendChild(c.i.el);
    kX(a.g);
    a.g.jb((parseInt(a.N) + 1).toString());
  }
  A(a.g) || a.g.Sa(b);
  b && a.g && (a.g.Kd(a.parentElement), a.g.ef(a.scale), b = a.vd() + a.i.vd(), c = a.i.Yf() * a.scale, c += a.g.ab() + 10, d = a.rd() + 8, b + c >= window.visualViewport.width ? (b -= 10, mX(a.g, !1, d, b), b -= a.g.ab()) : (b += a.i.Yf() * a.scale, mX(a.g, !0, d, b), b += 10), a.g.ga(b, d));
}
function rX(a) {
  a.V(48 < a.j.Yf() ? a.j.Yf() : 48, a.i.$g() + a.j.$g());
  if (Sm(a.Ca)) {
    let b = Um(a.Ca);
    a.ga(a.Ca.offsetLeft + b.x, a.Ca.offsetTop + b.y);
  }
}
function uX(a, b) {
  b = b && !a.Ta().gi;
  a.Sa(b);
}
function vX(a, b) {
  a.Ta().gi = !1;
  b && uX(a, !0);
}
class wX extends Nz {
  constructor(a, b, c) {
    super(null);
    this.Hr = Xg();
    this.pa = Xg();
    this.Cd(b);
    this.Ta().s = this;
    this.u = this.u.bind(this);
    this.m = c;
    this.m.addEventListener(this.m.g, this.u);
    this.parentElement = a;
    this.Hn = "Assessment: " + b.o;
    this.qx = "";
    this.O = {capture:!0, passive:!1};
    this.Ha = this.ze.bind(this);
    this.s = this.s.bind(this);
    this.l = this.l.bind(this);
    this.ed = this.J.bind(this);
    window.addEventListener("pointerdown", this.ed, this.O);
    this.Bj = this.ya.bind(this);
    this.Nl = this.Lc.bind(this);
    this.g = this.j = this.i = null;
    this.ce = !1;
    this.ia = -1;
    this.C = !1;
    this.Ib = this.Eb = this.left = this.top = 0;
    this.N = "2147483643";
    oX(this);
  }
  u() {
    this.g && iX(this.g);
  }
  Cd(a) {
    if (this.Ca = a) {
      this.Ca.addEventListener(this.Ca.Va, this.ba.bind(this)), this.lb = this.Ca.offsetLeft, this.Gb = this.Ca.offsetTop;
    }
  }
  Ta() {
    return this.Ca;
  }
  Zb() {
    return "AssessmentItem";
  }
  gf() {
    console.log("[Assessment] onpointerenter");
    this.ia = setTimeout(() => {
      this.g && this.g.ob() || (tX(this, !0), this.C = !0);
      sX(this);
    }, 1000);
  }
  Cf(a) {
    console.log("[Assessment] onpointerleave");
    sX(this);
    this.C && (this.C = !1, A(this.g) || ((b, c) => {
      if (this.g.m) {
        if (c > this.top && c < this.top + this.height && b < this.left && b > this.g.left + this.g.width) {
          return !0;
        }
      } else {
        if (c > this.top && c < this.top + this.height && b > this.left && b < this.g.left + this.g.width) {
          return !0;
        }
      }
      return !1;
    })(a.pageX, a.pageY) || tX(this, !1));
  }
  Kd(a) {
    super.Kd(a);
    this.parentElement = a;
    this.g && this.g.Kd(a);
  }
  J(a) {
    !this.g || Fj(this.g, a) || Fj(this, a) || tX(this, !1);
  }
  jb(a) {
    this.N = a;
    super.jb(a);
    this.g && this.g.jb((parseInt(this.N) + 1).toString());
  }
  ya() {
    tX(this, !1);
    this.mc(this.Hr, {strAssessmentId:this.xg()});
  }
  Lc() {
    this.mc(this.pa);
  }
  ef(a) {
    super.ef(a);
    this.g && (this.g.Sa(!1), this.g.ef(a));
  }
  ja() {
    super.ja();
    this.g && this.g.ob() && this.g.ja();
  }
  Cv() {
    if (S) {
      var a = S.i;
      if (a) {
        var b = this.Ta();
        if (-1 != a.i.indexOf(b)) {
          b && b.xb();
          a.xb();
          let c = {};
          c.arrAssessmentAttachments = [b];
          a.dispatchEvent(new CustomEvent(Cp.i, {detail:c}));
        }
      }
    }
    this.ce = !0;
  }
  ze(a) {
    this.hc(a) && (qX(this, !1), super.J(a), a.stopPropagation(), a.preventDefault(), window.addEventListener("touchmove", this.Qr, this.O), window.addEventListener("pointermove", this.s, this.O), window.addEventListener("pointerup", this.l, this.O), window.addEventListener("pointercancel", this.l, this.O), document.addEventListener("pointerup", this.l, this.O), document.addEventListener("scroll", this.l, this.O), this.lb = this.Ta().offsetLeft, this.Gb = this.Ta().offsetTop, this.Eb = a.clientX, 
    this.Ib = a.clientY);
  }
  Qr(a) {
    a.preventDefault();
  }
  s(a) {
    if (Kh() && !cl(2) && 3 != S.g) {
      tX(this, !1);
      a.preventDefault();
      var b = this.vd() + (a.clientX - this.Eb), c = this.rd() + (a.clientY - this.Ib), d = this.Ka(), e = this.ab(), f = Dz(this);
      24 <= b && b >= f.pageLeft && b <= f.Se - e && (this.Hf(b), this.Eb = a.clientX);
      24 <= c && c >= f.pageTop && c <= f.yd - d && (this.fc(c), this.Ib = a.clientY);
    }
  }
  l() {
    window.removeEventListener("touchmove", this.Qr, this.O);
    window.removeEventListener("pointermove", this.s, this.O);
    window.removeEventListener("pointerup", this.l, this.O);
    document.removeEventListener("scroll", this.l, this.O);
    document.removeEventListener("pointerup", this.l, this.O);
    qX(this, !0);
    if (this.lb != this.left || this.Gb != this.top) {
      var a = this.Ta(), b = P;
      let e = a.S;
      if (-1 != e && b.D && b.D.Ea) {
        e = yo(b.D, e);
        var c = Object.assign({}, a.A), d = fl(b.D, a.offsetTop - c.y + ox(b.D, e)).S;
        d != e && (c = hl(b.D, d, new il(b.D.scrollX, b.D.scrollY)), c = {x:-c.$a + b.D.scrollX, y:-c.Ua + b.D.scrollY, width:jl(b.D, d), height:kl(b.D, d), scale:b.D.scale}, a.S = ll(b.D, d), a.A = c, console.log(`${a.cb()} update pdf page `, e, d));
      }
      this.Cv();
      this.mc(this.bl, {op:!0});
    } else {
      tX(this, !(this.g && this.g.ob()));
    }
  }
  ba() {
    console.log("[Assessment] this->AssessmentItem on data loaded");
    this.Hn = "Assessment: " + this.Ta().o;
    rX(this);
    aX(this);
    this.g && (this.g.U(), this.g = null);
    this.Cv();
  }
  ga(a, b) {
    super.ga(a, b);
    this.i.Nd((this.Ra() - this.i.Yf()) / 2);
    this.o.Nd(this.i.vd() + 1);
    this.j.Nd((this.Ra() - this.j.Yf()) / 2);
    this.j.Ee(this.i.$g() - 4);
  }
  xg() {
    return this.Ta().xg();
  }
  uk() {
    this.Ta().gi = !0;
    uX(this, !1);
  }
  U() {
    sX(this);
    pX(this, !1);
    this.g && (this.g.U(), this.g = null);
    this.m && this.m.removeEventListener(this.m.g, this.u);
    super.U();
  }
}
;function rG(a, b) {
  var c = Lo.Uc;
  c.i.forEach(d => {
    let e = d.Ta();
    if (!A(e)) {
      let f = e.offsetTop + cs.g;
      e.offsetLeft + cs.g > a || f > b ? d.uk() : vX(d, c.Mc);
    }
  });
}
function JS(a, b) {
  ui() && (a.g && a.g != b && a.g.ec(!1), a.g = b, a.g.ec(!0));
}
function KS(a, b, c) {
  if (!c || !a.g || b || a.g == c) {
    if (null == a.va && b && (a.va = new WS(), a.va.jb("21"), a.va.ja(), a.va.Bd(), a.va.addEventListener(a.va.Ff, a.ia.bind(a))), a.va) {
      if (b && a.g) {
        b = a.g.vd();
        c = a.g.rd();
        let e = a.g.Ra();
        var d = window.visualViewport.width;
        a.g.Ca && a.g.Ca.A && (d = fl(P.D, gl(P.D, a.g.Ca.offsetLeft, a.g.Ca.offsetTop).y).S, e *= a.g.Ca.A.scale, d = jl(P.D, d));
        NS(a.va, a.g.s);
        0 < c - (a.va.wb() + 15) ? (c -= a.va.wb() + 15, b += (e - a.va.Ra()) / 2) : b = a.va.Ra() + b + e + 15 >= d ? b - (a.va.Ra() + 15) : b + (e + 15);
        a.va.ga(b, c);
        a.va.pb();
      } else {
        a.va.ob() && a.va.ja();
      }
    }
  }
}
function xX(a) {
  let b = [];
  a.j.forEach(c => {
    3 == c[0].cx && b.push(c[0].nk);
  });
  console.log("[Assessment] Clear Marked Deleted InDocAssessment Question", b);
  b.forEach(c => a.j.delete(c));
}
function ZW(a) {
  let b = [];
  a.j.forEach(c => {
    c[0].Aq && b.push(c[0].nk);
  });
  b.forEach(c => {
    let d = a.j.get(c);
    d && (d[1].U(), a.j.delete(c));
  });
}
function yX(a) {
  a.g && (a.g.ec(!1), a.g = null);
}
function TW(a, b) {
  let c = null;
  2 == b.vi() || 3 == b.vi() ? c = new AT(a, b) : b.Qn() ? c = new ET(a, b) : 9 == b.vi() ? c = new LT(a, b) : 14 == b.vi() ? c = new cW(a, b) : 8 == b.vi() ? c = new FW(a, b) : 19 == b.vi() ? c = new PW(a, b) : c = new HS(a, b);
  return c;
}
function zX(a) {
  let b = null;
  2 == a || 3 == a ? b = new ZS(a) : 5 == a || 0 == a ? b = new BT(a) : 9 == a ? b = new FT() : 14 == a ? b = new FV() : 8 == a ? b = new gW() : 19 == a ? b = new GW() : b = new Kz();
  return b;
}
function AX(a, b) {
  b && b.forEach(c => {
    console.log("Assessment Question Selection Data ", c);
    if (!A(c)) {
      var d = Up.g.i();
      d = zX(d);
      tS(d);
      d.al = 1;
      d.JE(c) ? (a.g = TW(a, d), vz(a.g), a.j.set(d.nk, [d, a.g]), a.g.ec(!1), at(!0)) : gw("Unable to validate question selection.", !1);
    }
  });
}
function BX(a) {
  var b = Lo.Uc;
  "ANNOTATE_ASSESSMENT_QUESTION_SELECTION_DATA" == a.type ? AX(b, a.lstSelectionData) : "ANNOTATE_ASSESSMENT_QUESTION_CAPTURE_DATA_RESPONSE" == a.type && a && "strQuestionUUID" in a && (console.log("[Assessment] ANNOTATE_ASSESSMENT_QUESTION_CAPTURE_DATA_RESPONSE ", a), (b = b.j.get(a.strQuestionUUID)) && b[0] && b[0].Dv(a));
}
function CX(a) {
  if (a.g) {
    var b = a.g;
    if (b) {
      let c = b.Aa.nk;
      b.Aa.Aq ? (b.Aa.cx = 3, cX(a.be, c), at(!0)) : a.j.delete(c);
      b.U();
    }
    a.g = null;
  }
}
function DX(a, b) {
  return a.i.has(b) ? a.i.get(b) : null;
}
function EX(a) {
  let b = [];
  Lo.Uc.i.forEach(c => {
    let d = c.Ta();
    A(d) || -1 == d.S || d.S != a || (c.uk(), b.push(d.xg()));
  });
  return b;
}
function FX(a, b, c) {
  var d = Lo.Uc;
  let e = [];
  d.i.forEach(f => {
    let k = f.Ta();
    if (!A(k) && -1 != k.S && k.S == a) {
      let l = k.A.scale, n = k.offsetLeft - k.A.x, p = k.offsetTop - k.A.y;
      n = n / l + 11;
      p = p / l + 11;
      n > b || p > c ? (f.uk(), e.push(k.xg())) : vX(f, d.Mc);
    }
  });
  return e;
}
function GX(a) {
  let b = !1;
  Lo.Uc.i.forEach(c => {
    Fj(c, a) && (b = !0);
  });
  return b;
}
function HX(a) {
  var b = Lo.Uc;
  b.o = a;
  b.i.forEach(c => {
    c.jb(a);
  });
}
function IX(a) {
  a.be && (a.be.g.forEach(b => {
    a.i.has(b.xg()) || (Jk(P) ? Uk() == b.Mr() && JX(a, b) : JX(a, b));
  }), a.dispatchEvent(new CustomEvent(a.m, {detail:{}})));
}
function JX(a, b) {
  if (b && (Kh() || Ph() && b.yi()) && !b.$l) {
    var c = document.body;
    Vk(P) && (c = P.D.Bb);
    if (b.Cb) {
      var d = Dk(b.Cb);
      d && L.kq(d);
    }
    d = new wX(c, b, a.s);
    d.jb(a.o);
    if (c = d) {
      c.addEventListener(c.Hr, a.N), c.addEventListener(c.pa, a.u);
    }
    a.i.set(b.xg(), d);
    uX(d, a.Mc && (!si() || Vk(P)));
    vz(d);
  }
}
function KX(a) {
  var b = Lo.Uc;
  b.Mc = 1 == S.g ? a : Yx(1) ? !0 : !1;
  console.log("[Assessment] " + (a ? "show" : "hide") + " all AssessmentItems");
  if (!si() || Vk(P)) {
    b.i.forEach(c => uX(c, b.Mc)), b.j.forEach(c => c[1].Sa(b.Mc));
  }
}
function LX(a) {
  var b = Lo.Uc;
  Kh() && b.j.forEach(c => c[1].Ot(a));
}
function MX() {
  var a = Lo.Uc;
  IX(a);
  a.i.forEach(b => {
    rX(b);
    vz(b);
  });
}
function NX(a) {
  let b = !1;
  a.i.forEach(c => {
    c.ce && (b = !0);
  });
  return b;
}
function ap(a) {
  a.g = null;
  KS(a, !1, null);
  a.i.forEach(b => b.U());
  a.j.forEach(b => b[1].U());
  a.i.clear();
  a.j.clear();
  console.log("[Assessment] this->AssessmentContent disposeAssementUI");
}
class OX extends ph {
  constructor(a, b) {
    super();
    this.m = Xg();
    this.s = a;
    this.be = b;
    this.i = new Map();
    this.G = this.J.bind(this);
    this.ea = this.ba.bind(this);
    this.C = this.B.bind(this);
    this.N = this.M.bind(this);
    this.u = this.v.bind(this);
    this.l = this.l.bind(this);
    this.be && (this.be.addEventListener(this.be.m, this.G), this.be.addEventListener(this.be.j, this.ea), this.be.addEventListener(this.be.l, this.C), this.be.addEventListener(cs.i, this.l));
    this.Mc = !0;
    this.D = this.A = null;
    this.o = "2147483639";
    this.g = null;
    this.j = new Map();
    this.va = null;
    ki.addEventListener(qi.g, this.Ig.bind(this));
  }
  Ig() {
    ui() || yX(this);
  }
  ia(a) {
    if (a && a.detail && this.g) {
      if (!this.g.pa(a.detail)) {
        switch(a.detail.Id) {
          case 1:
            this.g.ec(!1);
            var b = zX(this.g.Aa.vi());
            tS(b);
            b.Fa(this.g.Aa.$f(16));
            this.g = TW(this, b);
            vz(this.g);
            this.j.set(b.nk, [b, this.g]);
            GS(this.g, this.va.vd() + this.va.ed.vd(), this.va.rd());
            at(!0);
            break;
          case 3:
          case 9:
            b = this.g.jd();
            let e = this.g.Dt(), f = !1;
            var c = !1;
            if (3 == a.detail.Id) {
              b = a.detail.selection, f = b != this.g.jd();
            } else {
              if (e = a.detail.uQuestionEditMode, c = e != this.g.Dt(), a = Up.g) {
                a.al = e;
              }
            }
            if (f || c) {
              c = this.g.Aa.qc.rf();
              var d = this.g.Aa.vi();
              a = this.g.Aa.to;
              CX(this);
              d = zX(d);
              tS(d);
              d.Zd = b;
              d.to = a;
              d.al = e;
              d.Wl(c);
              this.g = TW(this, d);
              vz(this.g);
              this.j.set(d.nk, [d, this.g]);
              f && this.g.Uo(0, 0, null, !0);
              this.g.ec(!0);
              !d.ke() && d.aq();
            }
            break;
          case 4:
            CX(this);
            KS(this, !1, null);
            break;
          case 5:
            yX(this);
        }
      }
    } else {
      this.g || this.va.Sa(!1);
    }
  }
  l(a) {
    if (a.detail) {
      let b = YW(this.be, a.detail.strAssessmentId);
      a = DX(this, a.detail.strAssessmentId);
      b && a && (console.log("[Assessment] this->AssessmentContent onAssessmentDataModifed "), a.Cd(b), a.ba());
    }
  }
  Kv(a) {
    if (a && 0 < a.length) {
      for (let b = 0; b < a.length; b++) {
        let c = DX(this, a[b]);
        A(c) || vX(c, this.Mc);
      }
    }
  }
  J() {
    IX(this);
  }
  ba(a) {
    if (a.detail) {
      let d = YW(this.be, a.detail.strAssessmentId);
      if (d) {
        if (!Sm(d)) {
          if (0 < Up.l.x && 0 < Up.l.y && PX(Up.l.x, Up.l.y, !0)) {
            var b = Up.l.x;
            var c = Up.l.y;
            if (Jk(P) && this.A) {
              let e = parseInt(this.A.width), f = parseInt(this.A.height), k = parseInt(this.A.y), l = parseInt(this.A.x);
              b < l ? b = l : b > l + e && (b = l + e - cs.g);
              c < k ? c = k : c > k + f && (c = c + f - cs.g);
            }
            b = {x:b, y:c};
          } else {
            b = this.i.size % 3 * 32, b = {x:window.scrollX + (window.visualViewport.width - cs.g) / 2 + b, y:window.scrollY + (window.visualViewport.height - cs.g) / 2 + b};
          }
          (c = Ck(b.x, b.y)) && Tl() && (L.kq(c), c = Fk(c), d.Cb = c, b = Ek(b.x, b.y, d.Cb));
          d.offsetLeft = b.x;
          d.offsetTop = b.y;
        }
        el(d);
        Jk(P) ? Uk() == d.Mr() && JX(this, d) : JX(this, d);
      }
      console.log("[Assessment] this->AssessmentContent onNewAssessmentAdded ", a.detail.strAssessmentId);
    }
  }
  B(a) {
    a.detail && (a = a.detail.strAssessmentId, this.i.has(a) && (this.i.get(a).U(), this.i.delete(a), console.log("[Assessment] this->AssessmentContent deleteAssessmentItemById ", a)));
  }
  M(a) {
    a.detail && QX(Lo, a.detail.strAssessmentId);
  }
  v() {
    RX(Lo);
  }
  dl() {
    this.i.forEach(a => {
      rX(a);
    });
  }
}
;function jX() {
  return 1 == S.g && Kh() && (S.Fm(1) || Ks(1)) ? !0 : !1;
}
class SX extends ph {
  constructor(a, b) {
    super();
    this.g = Xg();
    this.i = a;
    this.j = b;
  }
}
function zp() {
  var a = Lo;
  ap(a.Uc);
  a.be.g.clear();
  a.be.i.clear();
  if (a = S.i) {
    let b = {arrAssessmentAttachments:[]}, c = null;
    for (c of a.i) {
      b.arrAssessmentAttachments.push(c.ta);
    }
    a.i = [];
    a.xb();
    a.dispatchEvent(new CustomEvent(Cp.g, {detail:b}));
  }
  lv([]);
}
function Sv(a) {
  if (Lk()) {
    let c = document.getElementsByClassName("punch-filmstrip-thumbnail"), d = c.length, e = [];
    for (let f = 0; f < d; ++f) {
      var b = c[f].getElementsByTagName("svg");
      if (b.length) {
        b = b[0].getElementsByTagName("g");
        for (let k = 0; k < b.length; ++k) {
          if (b[k].id) {
            let l = "filmstrip-slide-" + f + "-";
            if (0 == b[k].id.indexOf(l)) {
              e.push(b[k].id.replace(l, ""));
              break;
            }
          }
        }
      }
    }
    dX(a.be, e);
  }
}
function WW(a, b, c) {
  var d = Lo;
  TX(d);
  d.v = -1;
  d.ea = a;
  d.J = c;
  d.i = 8;
  d.l = 3;
  d.u = b;
  UX(d);
}
function QX(a, b) {
  TX(a);
  a.i = 1;
  a.l = 3;
  a.u = b;
  jX() && "" != b ? (a.l = 2, VX(a)) : UX(a);
}
function RX(a) {
  a.o || (TX(a), a.o = !0, a.i = 3, a.l = 3, UX(a), console.log("[Assessment] send Request To iframe For AssessmentData "));
}
function WX(a) {
  6 == a.g.i && (XX(a, !1), a.g.i = 1);
}
function YX() {
  var a = Lo;
  return NX(a.Uc) ? !0 : a.ba;
}
function TX(a) {
  a.u = "";
  a.N = "";
  a.G = -1;
  a.$l = !1;
  a.Ha = [];
  a.ea = null;
  a.J = null;
}
function UX(a) {
  if (pl()) {
    var b = !1;
  } else {
    1 != a.l && null == Ws() ? (console.log("[Assessment] file not found"), ZX(a, "Oops! Assessment file not found."), b = !1) : b = !0;
  }
  b && (DQ(a.g, !1), a.g.i = 6, BQ(a.g) ? a.g.j ? $X(a) : (FQ(a.g), aY(a)) : (EQ(a.g), FQ(a.g), aY(a)), PQ(a.g));
}
function VX(a) {
  console.log("[Assessment] sendCurrentPageThumbnailRequest");
  a.m.i(!1);
  bY(a);
  a.s = setTimeout(() => {
    a.B = !0;
    bY(a);
    a.s = setTimeout(() => {
      a.m.i(!0);
      a.B = !1;
      bY(a);
      UX(a);
    }, 3E3);
    L.sa({type:"annotateScreenShotCopy", bForAssessment:!0,}, a.m.j);
  }, 200);
}
function XX(a, b) {
  BQ(a.g) && (b && Sn(), RA(b), DQ(a.g, b), b && NQ(a.g));
  bY(a);
}
function ZX(a, b) {
  XX(a, !1);
  Kn("", b, "", "CLOSE", () => {
  }, () => {
  });
}
function $X(a) {
  Sv(a);
  L.sa({type:"webAnnotationAssessmentStatus", strAssessmentFileGuid:Ws(), bOpenedAssessmentFile:1,}, null);
  var b = a.i;
  var c = Js(S, 1);
  c = A(c) ? null : c.sk();
  let d = {};
  d.uUserType = M.j;
  d.strOwnerGuid = Yg(c) ? c : Bh();
  d.strAssessmentFileGuid = Ws();
  d.uClassId = S.j;
  d.curAnnotationMode = ql();
  d.assessmentId = a.u;
  d.openAssessmentPanelAs = a.l;
  d.dicAssessmentThumb = eX(a.be);
  d.bGoogleSlidePresentation = Fh(P);
  2 == M.j ? (d.strAnnotationGuid = An(), d.bDeleteAssessment = 0 == a.be.g.size, d.lstRemovedAssessmentId = fX(a.be), d.pageThumbnail = a.N, d.bInDocumentAssessment = a.$l, d.listQuestionData = a.Ha, d.uQtype = a.G) : (d.uClassTaskId = a.v, d.submissionData = a.ea);
  b = {uPanelType:6, uReqType:b, oAssessmentData:d,};
  console.log("[Assessment] processData ", b);
  c = "Initializing...";
  7 == a.i ? c = "Parsing assessment data..." : 8 == a.i ? c = "Submitting Assessment..." : 3 == a.i && (c = "Fetching assessment data...");
  Vn(c, null);
  cY(a, b);
  a.l = 3;
}
function aY(a) {
  let b = "Loading...";
  7 == a.i && (b = "Parsing assessment data...");
  8 == a.i ? b = "Submitting Assessment..." : 3 == a.i && (b = "Fetching assessment data...");
  Vn(b, null);
  bY(a);
  a.s = setTimeout(() => {
    Sn();
    bY(a);
    dY(a);
    cY(a, {uPanelType:6, uReqType:2,});
    3 == a.i ? ZX(a, "Failed to fetch assessment data") : ZX(a, "Error while loading.");
  }, 3E4);
}
function eY(a, b) {
  let c = !1;
  b && 6 == a.g.i && (c = "uPanelType" in b ? 6 == b.uPanelType : !0);
  return c;
}
function dY(a) {
  a.o = !1;
  a.dispatchEvent(new CustomEvent(a.C, {detail:null}));
}
function fY(a, b) {
  XX(a, !1);
  7 != a.i && 3 != a.i || Sn();
  console.log("[Assessment] on panel close ", b);
  if (2 == M.j && 1 == S.g) {
    if ("bDeleteNotebook" in b && 1 == b.bDeleteNotebook) {
      a = b.strAssessmentFileGuid == Ws(), gY(b.strAssessmentFileGuid), a && hY(!1);
    } else if ("bDocModified" in b && 1 == b.bDocModified) {
      if ("oAssessmentData" in b) {
        Vs(b.strAssessmentFileGuid);
        var c = a.be;
        b = b.oAssessmentData;
        if (!A(b)) {
          var d = b.lstAssessmentData;
          if (!A(d) && d.length) {
            for (let k = 0; k < d.length; k++) {
              var e = d[k].strAssessmentId;
              if (c.g.has(e)) {
                e = c.g.get(e), A(d[k].assessmentUUID) || A(e.m) || d[k].assessmentUUID == e.m || (e.G(d[k]), c.i.set(e.xg(), new XW(e.status)), console.log("[Assessment] this->AssessmentDocument update ", e.xg()));
              } else {
                e = c;
                var f = d[k];
                if (!A(f)) {
                  let l = new cs();
                  ds(e, l);
                  l.Fa(f);
                  l.xb();
                  e.i.set(l.xg(), new XW(l.status));
                  e.g.has(l.xg()) || (Jk(P) && (l.l = Uk()), e.g.set(l.xg(), l), e.mc(e.j, {strAssessmentId:l.xg()}), es(l));
                  console.log("[Assessment] this->AssessmentDocument addNewAssessment ", l.xg());
                }
              }
            }
          }
          d = b.lstDeletedAssessemtId;
          if (!A(d) && d.length) {
            for (console.log("[Assessment] this->AssessmentDocument lstDeletedAssessemtId ", b.lstDeletedAssessemtId), b = 0; b < d.length; b++) {
              ts(c, d[b]);
            }
          }
          xX(c.Uc);
          Jk(P) && lv(Zp(c));
        }
        a.j = !0;
        a.ba = !0;
        hY(!0);
      }
    } else {
      "oAssessmentData" in b && 0 === a.be.i.size && $W(a.be, b.oAssessmentData);
    }
  }
}
function iY(a, b) {
  b = parseInt(b);
  if (!A(b)) {
    switch(b) {
      case 0:
        ZX(a, "Error while initializing.");
        break;
      case 1:
        ZX(a, "Assessment could not be opened.");
        break;
      case 2:
        ZX(a, "Failed to save In-document assessment.");
        break;
      case 3:
        ZX(a, "Your assessment could not be submitted on the server due to a faulty internet connection.");
        break;
      case 4:
        ZX(a, "Failed to submit assessment.");
    }
  }
}
function jY(a, b) {
  console.log("[Assessment] processReceivedAssessmentData ", b);
  "oAssessmentData" in b && $W(a.be, b.oAssessmentData);
  bY(a);
  7 != a.i && 3 != a.i || Sn();
  dY(a);
}
function gY(a) {
  null != a && (L.sa({type:"SendRequestToDeleteAssessmentNotebook", strGuid:a}, null), Vs(null));
}
function hY(a) {
  let b = An();
  Yg(b) && !ot() ? Us(b) || Ks(1) ? (lw.g(), mw(L.mb(), !1, !1)) : (lw.g(), rC()) : a && (lw.g(), L.Xn(), nw.innerHTML = 'Save questions<br><span style="font-size: 12px;">We need to save your work in your account.</span>', pB.innerText = "DISCARD");
}
function bY(a) {
  clearTimeout(a.s);
  a.s = -1;
}
function cY(a, b) {
  6 == a.g.i && (b.strUserGuid = Bh(), b.sessionId = M.G, CQ(a.g, b));
}
class kY extends ph {
  constructor(a) {
    var b = mC;
    super();
    this.C = Xg();
    this.s = -1;
    this.m = a;
    this.g = b;
    this.M = this.M.bind(this);
    this.g && this.g.addEventListener(HQ.g, this.M);
    this.l = 3;
    this.G = -1;
    this.u = "";
    this.v = -1;
    this.j = this.ba = !1;
    this.i = 1;
    this.o = !1;
    this.N = "";
    this.B = !1;
    this.ya = this.pa.bind(this);
    this.be = new gX();
    this.be.addEventListener(this.be.o, this.ya);
    this.Uc = new OX(this.m, this.be);
    this.Uc.addEventListener(this.Uc.m, () => {
      var c = S.j;
      let d = S.l;
      !A(d) && "bLaunchAssessment" in d && 1 == d.bLaunchAssessment && -1 != c && (this.v = d.uClassTaskId, c = S.i.Bk.xg(c, this.v), $s(), (c = this.be.g.get(c)) && c.$l ? console.log("[Assessment] in-doc assessment launch denaid") : QX(this, ""));
    });
    this.be.Uc = this.Uc;
  }
  pa() {
    null != Ws() && RX(this);
  }
  M(a) {
    a = a.detail;
    if (!eY(this, a)) {
      dY(this);
    } else {
      if (a && a.chromeExtensionCommand) {
        switch(parseInt(a.chromeExtensionCommand)) {
          case Kg.Mq:
            Sn();
            XX(this, !0);
            break;
          case Kg.Lq:
            XX(this, !1);
            break;
          case Kg.up:
            $X(this);
            break;
          case Kg.FK:
            dY(this);
            fY(this, a);
            break;
          case Kg.KK:
            let b = !0;
            this.J && (b = this.J(a));
            b || iY(this, a.errorType);
            break;
          case Kg.GK:
            dY(this);
            3 == this.i ? ZX(this, "Failed to fetch assessment data") : iY(this, a.errorType);
            break;
          case Kg.EK:
            jY(this, a);
            break;
          case Kg.HK:
            L.sa({type:"webAnnotationAssessmentStatus", bTaskSubmitted:1, strAssessmentFileGuid:Ws(), taskStatusData:a.taskStatusData,}, () => {
            });
            break;
          default:
            XX(this, !1);
        }
      }
    }
  }
  ia() {
    return 6 == this.g.i && lC(this.g) ? !0 : !1;
  }
  dl() {
    this.Uc && this.Uc.dl();
  }
  U() {
    this.Uc && ap(this.Uc);
    this.be && (this.be.g.clear(), this.be.i.clear());
    bY(this);
  }
}
;function yJ(a) {
  var b = NB;
  if (Nk()) {
    var c = !1;
  } else {
    c = new lY(document.documentElement, null), mY(c), c = nY(c);
  }
  Lp();
  Ip();
  b.i || (b.i = new oY(a), b.i.ea.textContent = "Export as PDF", oq(b.i, "Download", null, "CANCEL", null, null));
  b.i.C();
  b.i.m.el.checked = !0;
  a = b.i;
  c ? (a.v.pb(), a.B.pb()) : (a.v.ja(), a.B.ja());
  b.i.l();
}
function JM(a) {
  var b = NB;
  b.l || (b.l = new nq(), oq(b.l, "OK", () => {
    bC();
  }, null, null, null));
  b.l.g.innerHTML = a;
  b.l.C();
  b.l.l();
}
function pY(a) {
  var b = NB;
  a = b.g.indexOf(a);
  -1 != a && b.g.splice(a, 1);
}
function qY() {
  var a = NB;
  for (let b = 0; b < a.g.length; b++) {
    let c = a.g[b];
    null == c || !c.ob() || c.oi() || c.Wi() || gq(c);
  }
}
function rY() {
  var a = NB;
  a.l && (a.l.gb(), a.l = null);
  a.i && (a.i.gb(), a.i = null);
  a.j && (a.j.gb(), a.j = null);
  a.m && (a.m.gb(), a.m = null);
  for (let b = 0; b < a.g.length; b++) {
    a.g[b].gb();
  }
  a.g = [];
}
class sY {
  constructor() {
    this.g = [];
    this.j = this.m = this.i = this.l = null;
  }
  o() {
    1 == hi.N ? In.o() : 2 == hi.N ? In.m() : (Lp(), Ip(), this.m || (this.m = new tY(), this.m.ea.textContent = "Delete annotations", oq(this.m, "DELETE ALL", null, "CANCEL", null, "CLEAR INK")), this.m.C(), this.m.l());
  }
}
var NB = new sY();
function gq(a) {
  a.i && (a.i.style.display = "none", RA(!1));
}
function oq(a, b, c, d, e, f) {
  a.s && (a.j.removeChild(a.s), a.s = null);
  a.ya && (a.j.removeChild(a.ya), a.ya = null);
  a.Ha && (a.j.removeChild(a.Ha), a.Ha = null);
  a.gf = c;
  a.eg = e;
  a.ze = null;
  Yg(b) && (a.s = document.createElement("div"), a.s.className = "annotate-modal-footer-btn", a.s.textContent = b, a.s.onclick = k => {
    k.preventDefault();
    a.ib();
  }, a.j.appendChild(a.s), Yg(f) && (a.Ha = document.createElement("div"), a.Ha.className = "annotate-modal-footer-btn", a.Ha.textContent = f, a.Ha.onclick = k => {
    k.preventDefault();
    a.Th();
  }, a.j.appendChild(a.Ha)), Yg(d) && (a.ya = document.createElement("div"), a.ya.className = "annotate-modal-footer-btn", a.ya.textContent = d, a.ya.onclick = k => {
    k.preventDefault();
    a.Gb();
  }, a.j.appendChild(a.ya)));
}
function uY(a, b) {
  b ? window.addEventListener("resize", a.ic, a.O) : window.removeEventListener("resize", a.ic, a.O);
}
class vY extends ph {
  constructor() {
    super();
    this.Ha = this.s = this.ya = this.j = this.g = this.$c = this.i = null;
    this.Cf();
    this.O = {capture:!0, passive:!1};
    this.ic = this.ic.bind(this);
    uY(this, !0);
    NB && NB.g.push(this);
  }
  Cf() {
    this.i = document.createElement("div");
    this.i.className = "extension_reset_css annotate-modal";
    this.i.style.display = "none";
    this.$c = document.createElement("div");
    this.$c.className = "annotate-modal-header";
    this.ea = document.createElement("div");
    this.ea.className = "annotate-modal-header-text";
    this.g = document.createElement("div");
    this.g.className = "annotate-modal-content";
    this.j = document.createElement("div");
    this.j.className = "annotate-modal-footer";
    this.$c.appendChild(this.ea);
    this.i.appendChild(this.$c);
    this.i.appendChild(this.g);
    this.i.appendChild(this.j);
    document.body.appendChild(this.i);
    this.J();
    gq(this);
  }
  C() {
    Lp();
    this.i && (this.i.style.display = "block", RA(!0));
    this.o();
  }
  ob() {
    return this.i ? "none" != this.i.style.display : !1;
  }
  oi() {
    return !1;
  }
  Wi() {
    return !1;
  }
  getType() {
    return 0;
  }
  J() {
    this.i && this.i.removeAttribute("visibility");
  }
  ic() {
    this.i && this.o();
  }
  l(a, b) {
    this.i && (this.i.style.width = a + "px", this.i.style.height = b + "px");
  }
  o() {
    this.i && (this.i.style.top = (Math.floor(window.visualViewport.height) - this.i.offsetHeight) / 2 + "px", this.i.style.left = (Math.floor(window.visualViewport.width) - this.i.offsetWidth) / 2 + "px");
  }
  gb() {
    uY(this, !1);
    NB && pY(this);
    this.i && this.i.remove();
  }
  ib() {
    this.gf ? this.gf() : gq(this);
  }
  Gb() {
    this.eg ? this.eg() : gq(this);
  }
  Th() {
    this.ze ? this.ze() : gq(this);
  }
}
function wR(a) {
  var b = a.g.children.length;
  for (--b; 0 <= b; b--) {
    a.g.removeChild(a.g.children[b]);
  }
  if (0 == a.v.length) {
    a.g.appendChild(wY("No active users in livestream"));
  } else {
    for (1 == a.v.length && xY(a.v[0]) ? a.g.appendChild(wY("No active users in livestream")) : a.g.appendChild(wY("online")), b = 0; b < a.v.length; b++) {
      if (!xY(a.v[b])) {
        var c = yY(a.v[b], b == a.v.length - 1);
        a.g.appendChild(c);
      }
    }
  }
  if (0 < a.m.length) {
    for (1 == a.m.length && xY(a.m[0]) || a.g.appendChild(wY("offline")), b = 0; b < a.m.length; b++) {
      xY(a.m[b]) || (c = yY(a.m[b], b == a.m.length - 1), a.g.appendChild(c));
    }
  }
}
function xY(a) {
  return -1 != a.name.indexOf("(Chrome Client)");
}
function wY(a) {
  let b = document.createElement("div");
  b.className = "attandee-status-row attandee-section-label no-border-bottom";
  b.textContent = a;
  return b;
}
function yY(a, b) {
  let c = document.createElement("div");
  b = `attandee-status-row ${a.Gi ? "" : "secondary-text-color"} ${b ? "no-border-bottom" : ""}`;
  b = b.trim();
  c.className = b;
  b = a.name;
  2 == a.g && a.i != Bh() && (b += " (co-teacher)");
  c.textContent = b;
  return c;
}
class TR extends vY {
  constructor() {
    super();
    this.v = [];
    this.m = [];
  }
  ib() {
    gq(this);
  }
}
function zY(a) {
  let b = document.createElement("div");
  b.className = "annotate-contentLabel";
  b.textContent = a;
  return b;
}
function AY() {
  let a = document.createElement("div");
  a.style.userSelect = "none";
  a.style.height = "36px";
  a.style.lineHeight = "36px";
  return a;
}
function BY() {
  let a = document.createElement("div");
  a.style.height = "4px";
  a.style.width = "1px";
  return a;
}
class MR extends vY {
  constructor() {
    super();
    this.ia = null;
    this.ea.textContent = "Course Access Information";
    oq(this, "CLOSE", null, null, null, null);
    this.B = zY("Course");
    this.v = AY();
    this.v.textContent = "Open Enrollment";
    this.G = zY("Course pin");
    this.u = AY();
    this.M = zY("Using a browser? Here's the URL");
    this.m = document.createElement("div");
    this.m.style.width = "372px";
    this.m.style.height = "auto";
    this.m.className = "annotate-wrap-text";
    this.m.style.userSelect = "text";
    this.N = BY();
    this.ba = BY();
    this.g.appendChild(this.B);
    this.g.appendChild(this.v);
    this.g.appendChild(this.N);
    this.g.appendChild(this.G);
    this.g.appendChild(this.u);
    this.g.appendChild(this.ba);
    this.g.appendChild(this.M);
    this.g.appendChild(this.m);
    this.l(420, 320);
    this.o();
  }
  setData(a, b, c) {
    this.v.textContent = a;
    this.u.textContent = b;
    this.m.textContent = c;
  }
  C() {
    super.C();
    this.l(420, 320);
    this.o();
  }
  ib() {
    gq(this);
  }
}
function $B(a) {
  gq(a);
  a.ea.textContent = "";
  sk(a.$c, !1);
}
class CY extends vY {
  constructor() {
    super();
    this.m = document.createElement("div");
    this.m.classList.add("extension_reset_css");
    this.m.classList.add("AnnotateDivElement");
    this.m.classList.add("AnnotateLoading");
    this.m.style.height = "36px";
    this.m.style.width = "36px";
    this.v = document.createElement("div");
    this.v.classList.add("extension_reset_css");
    this.v.classList.add("AnnotateDivElement");
    this.v.classList.add("annotate-wrap-text");
    this.v.style.height = "auto";
    this.v.textContent = "Loading...";
    this.g.appendChild(this.m);
    this.g.appendChild(this.v);
    sk(this.$c, !1);
    sk(this.j, !1);
    this.l(420, 110);
    this.o();
  }
  u(a, b) {
    b && (this.ea.textContent = b, sk(this.$c, !0), this.$c.style.borderBottom = "none");
    this.v.textContent = a;
    super.C();
    b ? this.l(420, 136) : this.l(420, 110);
    this.o();
  }
  oi() {
    return !0;
  }
  J() {
    super.J();
    this.g && (this.g.classList.remove("annotate-modal-content"), this.g.classList.add("extension_reset_css"), this.g.classList.add("annotate-loader-modal-content"));
  }
  l(a, b) {
    super.l(a, b);
    this.v.style.width = a - this.m.offsetWidth - 16 - 48 + "px";
    this.g.style.height = b + "px";
  }
  o() {
    super.o();
    let a = (this.g.offsetHeight - this.m.offsetHeight) / 2;
    this.$c && "" != this.$c.textContent && (a = this.$c.offsetHeight + 8);
    this.m.style.left = "24px";
    this.m.style.top = a + "px";
    this.v.style.left = this.m.offsetWidth + 16 + 24 + "px";
    this.v.style.top = a + (this.m.offsetHeight - this.v.offsetHeight) / 2 + "px";
  }
}
var ZB = null;
function Vn(a, b) {
  ZB || ZB || (ZB = new CY());
  bs && (A(WB) || XB(!1));
  Nn();
  ZB.u(a, b);
}
function Sn() {
  ZB && $B(ZB);
  aC && $B(aC);
}
class DY extends CY {
  constructor() {
    super();
    this.v.classList.add("classroom-loader-message");
  }
}
var aC = null;
function Pn(a, b) {
  aC || (aC = new DY());
  bs && (A(WB) || XB(!1));
  aC.u(a, b);
}
function EY(a) {
  a.v.addEventListener(Zz.g, a.Xi);
  a.u.addEventListener(Zz.g, a.qm);
  a.m.addEventListener(Zz.g, a.Bj);
  a.G.addEventListener(Zz.g, a.Qk);
  a.B.onchange = () => {
    a.Va = "Stopwatch" == a.B.value ? !0 : !1;
    a.Va != a.Pe && (a.Pe ? bD(a) : aD(a));
  };
  pk(a.pa, () => {
    a.dispatchEvent(new CustomEvent(PC.g, {detail:{}}));
    gq(a);
  });
  pk(a.M, () => {
    if (-1 == a.M.className.search("AnnotateMsgDialogBtnDisabled")) {
      let c = {};
      var b = 0;
      if (!a.Va) {
        b = parseInt(a.v.im());
        let d = parseInt(a.u.im()), e = parseInt(a.m.im());
        b = 3600 * b + 60 * d + e;
      }
      c.time = b;
      c.bToggleState = a.Va;
      c.message = a.G.im();
      a.dispatchEvent(new CustomEvent(PC.i, {detail:c}));
    }
  });
}
function bD(a) {
  a.Pe = !1;
  a.lb || (a.v.Hj(a.ld), a.u.Hj(a.Dd), a.m.Hj(a.ed), a.G.Hj(a.Lc));
  bA(a.v, !0);
  bA(a.u, !0);
  bA(a.m, !0);
  bA(a.G, !0);
  FY(a);
}
function aD(a) {
  a.Pe = !0;
  bA(a.v, !1);
  bA(a.u, !1);
  bA(a.m, !1);
  bA(a.G, !1);
  FY(a);
}
function FY(a) {
  var b;
  (b = a.ld != a.v.im() || a.Dd != a.u.im() || a.ed != a.m.im()) || (b = (0 < parseInt(a.v.im()) || 0 < parseInt(a.u.im()) || 0 < parseInt(a.m.im())) && a.Lc != a.G.im() ? !0 : !1);
  b ? a.lb = !0 : a.lb = !1;
  a.Wb && a.Db && a.Jb && a.lb || a.Va || a.pf ? $C(a, !0) : $C(a, !1);
}
function $C(a, b) {
  b ? a.M.classList.remove("AnnotateMsgDialogBtnDisabled") : a.M.classList.add("AnnotateMsgDialogBtnDisabled");
}
class PC extends vY {
  static get i() {
    return "EVT_SAVE_CLICKED";
  }
  static get g() {
    return "EVT_CANCEL_CLICKED";
  }
  constructor(a, b) {
    super();
    this.width = a;
    this.height = b;
    this.pf = this.Pe = this.Va = this.lb = this.Jb = this.Db = this.Wb = !1;
    this.ld = this.Dd = this.ed = "0";
    this.Lc = "";
    this.M = this.pa = this.ba = this.ia = this.G = this.B = this.m = this.u = this.v = null;
    this.ia = document.createElement("div");
    this.ia.classList.add("extension_reset_css");
    this.ia.classList.add("AnnotateDivElement");
    this.ia.style.width = "250px";
    this.ia.style.height = "24px";
    this.ia.style.textAlign = "left";
    this.ia.innerText = "Timer/Stopwatch Settings";
    this.$c.appendChild(this.ia);
    this.ba = document.createElement("div");
    this.ba.classList.add("extension_reset_css");
    this.ba.classList.add("AnnotateDivElement");
    this.ba.style.width = "100px";
    this.ba.style.height = "auto";
    this.ba.style.verticalAlign = "middle";
    this.ba.innerText = "Style";
    this.g.appendChild(this.ba);
    a = ["Timer", "Stopwatch"];
    this.B = document.createElement("select");
    this.B.classList.add("extension_reset_css");
    this.B.classList.add("AnnotateDropDown");
    this.B.style.width = "130px";
    this.B.style.height = "48px";
    this.B.id = "clockTypeSelector";
    for (var c of a) {
      a = document.createElement("option"), a.classList.add("extension_reset_css"), a.value = c, a.text = c, this.B.appendChild(a);
    }
    this.g.appendChild(this.B);
    this.v = new Zz(this.g, "Hours");
    cA(this.v, Ng.cn);
    dA(this.v, 99);
    this.u = new Zz(this.g, "Minutes");
    cA(this.u, Ng.cn);
    dA(this.u, 59);
    this.m = new Zz(this.g, "Seconds");
    cA(this.m, Ng.cn);
    dA(this.m, 59);
    this.G = new Zz(this.g, "Message");
    cA(this.G, Ng.Text);
    c = this.G;
    c.g && (c.g.placeholder = "Message");
    this.pa = document.createElement("div");
    this.pa.id = "DialogBtn1";
    this.pa.className = "extension_reset_css AnnotateMsgDialogBtn";
    this.pa.style.height = "16px";
    this.pa.innerText = "CANCEL";
    this.N.appendChild(this.pa);
    this.M = document.createElement("div");
    this.M.id = "DialogBtn2";
    this.M.className = "extension_reset_css AnnotateMsgDialogBtn";
    this.M.style.height = "16px";
    this.M.innerText = "SAVE";
    this.N.appendChild(this.M);
    this.O = {capture:!0, passive:!1};
    this.Xi = this.Rp.bind(this);
    this.qm = this.Tp.bind(this);
    this.Bj = this.An.bind(this);
    this.Qk = this.Nl.bind(this);
    EY(this);
  }
  Cf() {
    this.i = document.createElement("div");
    this.i.id = "AnnotateTimerSettingDialog";
    this.i.classList.add("extension_reset_css");
    this.i.classList.add("AnnotateTimerSettingDialog");
    this.$c = document.createElement("div");
    this.$c.id = "AnnotateTimerSettingDialogHeader";
    this.$c.classList.add("extension_reset_css");
    this.$c.classList.add("AnnotateTimerSettingDialogHeader");
    this.g = document.createElement("div");
    this.g.id = "AnnotateTimerSettingDialogContent";
    this.g.classList.add("extension_reset_css");
    this.g.classList.add("AnnotateTimerSettingDialogContent");
    this.N = document.createElement("div");
    this.N.id = "AnnotateTimerSettingDialogFooter";
    this.N.classList.add("extension_reset_css");
    this.N.classList.add("AnnotateTimerSettingDialogFooter");
    this.i.appendChild(this.$c);
    this.i.appendChild(this.g);
    this.i.appendChild(this.N);
    ik(this.i);
    document.body.appendChild(this.i);
    this.J();
    gq(this);
  }
  Rp(a) {
    a = a.detail.value;
    "" == a ? ($z(this.v, !0), this.Wb = !1) : (this.Wb = !0, $z(this.v, !1), a = parseInt(a), a = 0 > a ? 0 : a, a = 99 < a ? 99 : a, this.v.Hj(a));
    FY(this);
  }
  Tp(a) {
    a = a.detail.value;
    "" == a ? ($z(this.u, !0), this.Db = !1) : (this.Db = !0, $z(this.u, !1), a = parseInt(a), a = 0 > a ? 0 : a, a = 59 < a ? 59 : a, this.u.Hj(a));
    FY(this);
  }
  An(a) {
    a = a.detail.value;
    "" == a ? ($z(this.m, !0), this.Jb = !1) : (this.Jb = !0, $z(this.m, !1), a = parseInt(a), a = 0 > a ? 0 : a, a = 59 < a ? 59 : a, this.m.Hj(a));
    FY(this);
  }
  Nl() {
    FY(this);
  }
  o() {
    super.o();
    this.i.style.width = this.width + "px";
    this.$c.style.width = "100%";
    this.$c.style.height = "60px";
    this.$c.style.top = "0px";
    this.$c.style.left = "0px";
    this.N.style.width = "100%";
    this.N.style.height = "52px";
    this.g.style.width = "100%";
    this.g.style.top = this.$c.offsetHeight + "px";
    this.g.style.left = "0px";
    let a = 24, b = 0;
    this.ia.style.left = "24px";
    this.ia.style.top = (60 - this.ia.offsetHeight) / 2 + "px";
    this.B.style.top = b + "px";
    this.B.style.right = "24px";
    this.ba.style.top = (this.B.offsetHeight - this.ba.offsetHeight) / 2 + "px";
    this.ba.style.left = "24px";
    b += this.B.offsetHeight + 4;
    aA(this.v, 108, b, a);
    a += 132;
    aA(this.u, 108, b, a);
    aA(this.m, 108, b, a + 132);
    b += this.m.offsetHeight() + 4;
    aA(this.G, this.width - 48, b, 24);
    b += this.G.offsetHeight();
    this.g.style.height = b + 4 + "px";
    this.N.style.top = this.g.offsetHeight + this.$c.offsetHeight + "px";
    this.N.style.left = "0px";
    this.height = this.$c.offsetHeight + this.N.offsetHeight + this.g.offsetHeight;
    this.i.style.height = this.height + "px";
    this.M.style.top = "8px";
    this.M.style.right = "14px";
    this.pa.style.top = "8px";
    this.pa.style.right = this.M.offsetWidth + 48 - 10 + "px";
  }
  gb() {
    this.v.removeEventListener(Zz.g, this.Xi);
    this.u.removeEventListener(Zz.g, this.qm);
    this.m.removeEventListener(Zz.g, this.Bj);
    this.G.removeEventListener(Zz.g, this.Qk);
    super.gb();
    RA(!1);
    this.N = this.g = this.$c = this.i = null;
    NB && pY(this);
  }
}
class ZC extends vY {
  constructor() {
    super();
    this.width = 420;
  }
  J() {
    super.J();
    this.i && (this.i.style.zIndex = "2147483647");
    this.$c && (this.$c.style.border = "none");
    this.g && (this.g.style.overflowY = "hidden");
    this.j && (this.j.style.border = "none");
  }
  l() {
    this.i && (this.i.style.width = this.width + "px", this.i.style.height = this.$c.offsetHeight + this.g.offsetHeight + this.j.offsetHeight + "px", this.g.style.overflowY = 200 < this.g.offsetHeight ? "auto" : "hidden");
    this.o();
  }
  gb() {
    this.i && (gq(this), super.gb(), RA(!1), NB && pY(this), this.i = null);
  }
}
class GY extends vY {
  constructor() {
    super();
    this.width = 420;
    this.g.classList.add("annotate-modal-input-option");
    this.m = new Nj("input");
    lj(this.m, "type", "radio");
    this.m.he("AnnotateBlankPageOption1");
    this.m.el.name = "blankPageOption";
    R(this.m, "blankPageOption");
    this.m.Bi("blankWebPage");
    this.m.el.checked = !0;
    this.u = new Nj("label");
    this.u.el.htmlFor = "AnnotateBlankPageOption1";
    R(this.u, "blankPageOptionLabel");
    Ej(this.u, "Web page (Infinite canvas)");
    mj(this.u);
    this.v = new Nj("input");
    lj(this.v, "type", "radio");
    this.v.he("AnnotateBlankPageOption2");
    this.v.el.name = "blankPageOption";
    R(this.v, "blankPageOption");
    this.v.Bi("blankPdf");
    this.B = new Nj("label");
    this.B.el.htmlFor = "AnnotateBlankPageOption2";
    R(this.B, "blankPageOptionLabel");
    Ej(this.B, "PDF");
    mj(this.B);
    this.g.appendChild(this.m.el);
    this.g.appendChild(this.u.el);
    this.g.appendChild(this.v.el);
    this.g.appendChild(this.B.el);
  }
  J() {
    super.J();
    this.i && (this.i.style.zIndex = "2147483647");
    this.$c && (this.$c.style.border = "none");
    this.g && (this.g.style.overflowY = "hidden");
    this.j && (this.j.style.border = "none");
  }
  l() {
    if (this.i) {
      var a = 4;
      this.m.V(13, 13);
      this.u.Mb(16);
      this.m.ga(32, a);
      this.u.ga(48, a);
      a += this.m.wb() + 24;
      this.v.V(13, 13);
      this.B.Mb(16);
      this.v.ga(32, a);
      this.B.ga(48, a);
      a += this.v.wb() + 4;
      this.g.style.height = a + "px";
      a = this.$c.offsetHeight + a + this.j.offsetHeight;
      this.i.style.width = this.width + "px";
      this.i.style.height = a + "px";
    }
    this.o();
  }
  ib() {
    "blankWebPage" == Bk("blankPageOption") ? (ii("10.16.10.2"), window.open(M.J + "/whiteboard/index.php", "_blank")) : (ii("10.16.10.1"), L.sa({type:"OpenAnnotatePDFViewer", url:M.J + "/docs/resources/files/Annotate.pdf"}, null));
    gq(this);
  }
  Gb() {
    gq(this);
  }
}
class tY extends vY {
  constructor() {
    super();
    this.width = 420;
    this.g.classList.add("annotate-modal-input-option");
  }
  J() {
    super.J();
    this.i && (this.i.style.zIndex = "2147483647");
    this.$c && (this.$c.style.border = "none");
    this.g && (this.g.style.overflowY = "hidden");
    this.j && (this.j.style.border = "none");
  }
  l() {
    if (this.i) {
      this.$c.style.width = "100%";
      this.$c.style.height = "60px";
      this.$c.style.top = "0px";
      this.$c.style.left = "0px";
      this.j.style.width = "100%";
      this.j.style.height = "52px";
      this.g.style.height = "4px";
      let a = this.$c.offsetHeight + 4 + this.j.offsetHeight;
      this.i.style.width = this.width + "px";
      this.i.style.height = a + "px";
    }
    this.o();
  }
  ib() {
    In.o();
    gq(this);
  }
  Th() {
    In.m();
    gq(this);
  }
  Gb() {
    gq(this);
  }
}
function HY(a) {
  let b = document.getElementById("ReturnDbSelectionInfo"), c = 0;
  for (var d of a.v) {
    var e = a.u[d];
    e && (e = e.pc(), e.draftGrade == e.assignedGrade && (c += 1));
  }
  d = "";
  0 < c && (d = " (" + c + " without draft mark)", 1 < c && (d = " (" + c + " without draft marks)"));
  b && (0 == a.m ? b.style.display = "none" : (b.innerHTML = 1 == a.m ? a.m + " student selected" + d : a.m + " students selected" + d, b.style.display = "block"));
}
function IY(a) {
  a.v = [];
  a.m = 0;
  for (let b in a.B) {
    a.B[b].checked = !1;
  }
  a.G.checked = !1;
  HY(a);
  0 < a.m ? a.s.classList.remove("GClassReturnMultipleDialogBtnDisabled") : a.s.classList.add("GClassReturnMultipleDialogBtnDisabled");
  console.log(a.v);
}
function JY(a) {
  a.v = [];
  a.m = 0;
  for (let b in a.u) {
    a.v.push(b), a.m += 1;
  }
  for (let b in a.B) {
    a.B[b].checked = !0;
  }
  a.G.checked = !0;
  HY(a);
  0 < a.m ? a.s.classList.remove("GClassReturnMultipleDialogBtnDisabled") : a.s.classList.add("GClassReturnMultipleDialogBtnDisabled");
  console.log(a.v);
}
function KY(a, b, c) {
  var d = new kA();
  d.Cd(b);
  d.V(232, 32);
  let e = document.createElement("div");
  e.id = "AnnotateMsgDialogCheckboxContainer" + c;
  e.className = "extension_reset_css AnnotateReturnDialogCheckboxContainer";
  a.g.appendChild(e);
  let f = document.createElement("input");
  f.type = "checkbox";
  f.id = "AnnotateMsgDialogCheckbox" + c;
  f.value = c;
  f.className = "extension_reset_css AnnotateReturnDialogCheckbox";
  a.B[c] = f;
  let k = document.createElement("div");
  k.className = "extension_reset_css CheckboxLabel";
  k.style.width = "200px";
  k.style.height = "32px";
  k.appendChild(d.el);
  e.appendChild(f);
  e.appendChild(k);
  d = document.createElement("div");
  d.id = "AnnotateTurnInInfoDiv" + c;
  b.pc().state && (d.innerText = "Handed in", d.style.marginLeft = "auto", d.style.color = "#188038", d.style.fontWeight = "500", b.pc().draftGrade && (d.innerText = b.pc().draftGrade + "/" + b.m.uPoints, d.style.color = "rgba(0,0,0,.87)", d.style.fontWeight = "400", b.pc().draftGrade != b.pc().assignedGrade && (d.style.color = "#188038", d.style.fontWeight = "500")), e.appendChild(d));
  e.addEventListener("click", l => {
    l.preventDefault();
    f.checked ? (f.checked = !1, a.v.splice(a.v.indexOf(c), 1), --a.m) : (f.checked = !0, a.v.push(c), a.m += 1);
    0 < a.m ? a.s.classList.remove("GClassReturnMultipleDialogBtnDisabled") : a.s.classList.add("GClassReturnMultipleDialogBtnDisabled");
    a.G.checked = a.m == a.M ? !0 : !1;
    HY(a);
    console.log(a.v);
  }, {capture:!0, passive:!1});
  return e;
}
function LY(a) {
  var b = [];
  for (let f in a.u) {
    a.B[f] && (a.B[f].checked = !1);
    var c = a.u[f], d = c.pc();
    if ("TURNED_IN" != d.state && d.draftGrade && d.draftGrade == d.assignedGrade) {
      (c = document.getElementById("AnnotateMsgDialogCheckboxContainer" + f)) && c.remove(), delete a.B[f], b.push(f), --a.M;
    } else if (d.draftGrade && d.draftGrade != d.assignedGrade) {
      let k = document.getElementById("AnnotateTurnInInfoDiv" + f);
      k ? k.innerText = d.draftGrade + "/" + c.m.uPoints : (d = document.getElementById("AnnotateReturnMulitpleStudentList")) && (c = KY(a, c, f)) && d.appendChild(c);
    }
  }
  for (let f of b) {
    delete a.u[f];
  }
  b = [];
  for (var e in a.B) {
    e in a.u || b.push(e);
  }
  for (let f of b) {
    (e = document.getElementById("AnnotateMsgDialogCheckboxContainer" + f)) && e.remove(), delete a.B[f];
  }
  a.G.checked = !1;
  a.v = [];
  a.m = 0;
  HY(a);
  console.log(a.u);
}
class MY extends vY {
  constructor(a) {
    super();
    this.width = 480;
    this.height = 300;
    this.ea.textContent = "Return multiple submissions";
    oq(this, "Return", null, "Cancel", null, null);
    this.l(this.width, this.height);
    this.$c.style.width = this.width + "px";
    this.g.style.width = this.width + "px";
    this.j.style.width = this.width + "px";
    this.g.style.height = "190px";
    this.g.style.paddingLeft = "16px";
    this.g.style.paddingRight = "16px";
    this.o();
    this.s.classList.add("GClassReturnMultipleDialogBtnDisabled");
    var b = document.createElement("div");
    b.style.fontSize = "14px";
    b.style.fontWeight = "400";
    b.style.marginBottom = "4px";
    b.style.padding = "0px 8px";
    b.innerHTML = "Select students that you want to return the submissions to";
    this.g.appendChild(b);
    this.u = a;
    this.v = [];
    this.M = this.m = 0;
    for (var c in this.u) {
      this.M += 1;
    }
    this.N = this.ba.bind(this);
    this.G = null;
    this.B = {};
    b = document.createElement("div");
    b.id = "AnnotateReturnDbMainCheckboxContainer";
    b.style.height = "36px";
    b.style.display = "flex";
    b.style.alignItems = "center";
    b.style.padding = "4px 8px";
    var d = document.createElement("input");
    d.type = "checkbox";
    d.id = "AnnotateReturnMultipleTopCheckbox";
    d.className = "extension_reset_css AnnotateReturnDialogCheckbox";
    this.G = d;
    c = document.createElement("div");
    c.className = "extension_reset_css ";
    c.style.width = "20px";
    c.style.height = "20px";
    c.style.cursor = "pointer";
    c.appendChild(d);
    c.addEventListener("click", this.pa.bind(this));
    d = document.createElement("div");
    d.id = "ReturnMultipleDropdownOptionsContainer";
    d.className = "extension_reset_css AnnotateReturnAllDropDownContainer";
    var e = document.createElement("div");
    e.className = "extension_reset_css gClassroomReturnDropUpOptions";
    e.id = "ReturnMultipleSelectAllOption";
    e.innerHTML = "Select all";
    var f = document.createElement("div");
    f.id = "ReturnMultipleGradeOnlyOption";
    f.className = "extension_reset_css gClassroomReturnDropUpOptions";
    f.innerHTML = "Select draft marks only";
    let k = document.createElement("div");
    k.id = "ReturnMultipleUnselectAllOption";
    k.className = "extension_reset_css gClassroomReturnDropUpOptions";
    k.innerHTML = "Unselect all";
    d.appendChild(e);
    d.appendChild(f);
    d.appendChild(k);
    f = document.createElement("div");
    f.id = "AnnotateReturnDbDropdown";
    f.className = "extension_reset_css extension_icon extension_icon-chevron_down";
    f.style.height = "20px";
    f.style.width = "20px";
    f.style.cursor = "pointer";
    f.style.lineHeight = "20px";
    f.style.textAlign = "center";
    f.style.zIndex = "2147483644";
    e = document.createElement("div");
    e.style.marginLeft = "16px";
    e.style.cursor = "pointer";
    e.appendChild(f);
    e.addEventListener("click", this.ia.bind(this), {capture:!0, passive:!1});
    e.appendChild(d);
    d = document.createElement("div");
    d.id = "ReturnDbSelectionInfo";
    d.style.textAlign = "center";
    d.style.marginLeft = "auto";
    d.style.color = "color: rgba(0,0,0,.87)";
    d.style.fontSize = "14px";
    HY(this);
    b.appendChild(c);
    b.appendChild(e);
    b.appendChild(d);
    this.g.appendChild(b);
    b = document.createElement("div");
    b.id = "AnnotateReturnMulitpleStudentList";
    for (let l in a) {
      c = a[l], c = KY(this, c, l), b.appendChild(c);
    }
    this.g.appendChild(b);
  }
  ia(a) {
    a.preventDefault();
    a = document.getElementById("ReturnMultipleDropdownOptionsContainer");
    "block" != a.style.display ? (a.style.display = "block", window.addEventListener("click", this.N, {capture:!0, passive:!1})) : a.style.display = "none";
  }
  pa() {
    this.G.checked ? (this.G.checked = !1, IY(this)) : (this.G.checked = !0, JY(this));
  }
  ba(a) {
    a.preventDefault();
    window.removeEventListener("click", this.N, {capture:!0});
    let b = document.getElementById("ReturnMultipleDropdownOptionsContainer");
    if ("ReturnMultipleSelectAllOption" == a.target.id) {
      console.log("ReturnMultipleSelectAllOption"), JY(this);
    } else if ("ReturnMultipleUnselectAllOption" == a.target.id) {
      console.log("ReturnMultipleUnselectAllOption"), IY(this);
    } else if ("ReturnMultipleGradeOnlyOption" == a.target.id) {
      console.log("ReturnMultipleGradeOnlyOption");
      this.v = [];
      this.m = 0;
      for (let c in this.u) {
        a = this.u[c].pc(), a.draftGrade != a.assignedGrade ? (this.v.push(c), this.m += 1, this.B[c].checked = !0) : this.B[c].checked = !1;
      }
      this.G.checked = this.m == this.M ? !0 : !1;
      HY(this);
      0 < this.m ? this.s.classList.remove("GClassReturnMultipleDialogBtnDisabled") : this.s.classList.add("GClassReturnMultipleDialogBtnDisabled");
      console.log(this.v);
    } else {
      "AnnotateReturnDbDropdown" != a.target.id && (b.style.display = "none");
    }
  }
  ib() {
    console.log(this.v);
    var a = L.Ye(), b = this.v;
    let c = [], d = [];
    for (let e = 0; e < b.length; e++) {
      let f = a.tc[b[e]].pc();
      f.draftGrade != f.assignedGrade ? c.push(f) : d.push(f);
    }
    a = {arrGradeReq:c, arrReturnReq:d};
    Vn("Returning selected assignments", null);
    Pv.j = !0;
    console.log(">>> Batch Return callback after iframe launch");
    AK({type:"slidesClassroomAuth", action:"returnMultipleClassroomAssignment", arrGoogleCourseWorkDetails:a});
    gq(this);
  }
  Gb() {
    gq(this);
  }
}
class oY extends vY {
  constructor(a) {
    super();
    this.width = 420;
    this.g.classList.add("annotate-modal-input-option");
    this.m = new Nj("input");
    lj(this.m, "type", "radio");
    this.m.he("AnnotateExportAsJPG");
    this.m.el.name = "exportAsOption";
    R(this.m, "radioOption");
    this.m.Bi("JPEG");
    this.m.el.checked = !0;
    this.G = new Nj("label");
    this.G.el.htmlFor = "AnnotateExportAsJPG";
    R(this.G, "radioOptionLabel");
    rj(this.G, "JPEG <i>(For image heavy pages)</i>");
    mj(this.G);
    this.u = new Nj("input");
    lj(this.u, "type", "radio");
    this.u.he("AnnotateExportAsPNG");
    this.u.el.name = "exportAsOption";
    R(this.u, "radioOption");
    this.u.Bi("PNG");
    this.M = new Nj("label");
    this.M.el.htmlFor = "AnnotateExportAsPNG";
    R(this.M, "radioOptionLabel");
    rj(this.M, "PNG <i>(For text heavy pages)</i>");
    mj(this.M);
    this.v = new Nj("input");
    lj(this.v, "type", "checkbox");
    R(this.v, "radioOption");
    this.v.he("AnnotateExportExpandInternalScroll");
    this.B = new Nj("label");
    this.B.el.htmlFor = "AnnotateExportExpandInternalScroll";
    R(this.B, "radioOptionLabel");
    rj(this.B, "Expand scrollable elements");
    mj(this.B);
    this.N = new Nj("div");
    Ej(this.N, "Capture format");
    this.g.appendChild(this.N.el);
    this.g.appendChild(this.m.el);
    this.g.appendChild(this.m.el);
    this.g.appendChild(this.G.el);
    this.g.appendChild(this.u.el);
    this.g.appendChild(this.M.el);
    this.g.appendChild(this.v.el);
    this.g.appendChild(this.B.el);
    this.ba = a;
  }
  J() {
    super.J();
    this.i && (this.i.style.zIndex = "2147483647");
    this.$c && (this.$c.style.border = "none");
    this.g && (this.g.style.overflowY = "hidden");
    this.j && (this.j.style.border = "none");
  }
  l() {
    if (this.i) {
      var a = 4;
      this.N.ga(32, a);
      this.N.Mb(16);
      a += this.N.wb() + 16;
      this.m.V(13, 13);
      this.G.Mb(16);
      this.m.ga(32, a);
      this.G.ga(48, a);
      a += this.m.wb() + 16;
      this.u.V(13, 13);
      this.M.Mb(16);
      this.u.ga(32, a);
      this.M.ga(48, a);
      a += this.u.wb() + 24;
      this.v.V(13, 13);
      this.B.Mb(16);
      this.v.ga(32, a);
      this.B.ga(48, a);
      a += this.v.wb() + 8;
      this.g.style.height = a + "px";
      a = this.$c.offsetHeight + a + this.j.offsetHeight;
      this.i.style.width = this.width + "px";
      this.i.style.height = a + "px";
    }
    this.o();
  }
  ib() {
    this.ba(Bk("exportAsOption"), this.v.ob() && this.v.el.checked);
    gq(this);
  }
  Gb() {
    gq(this);
  }
}
class nq extends ZC {
  constructor() {
    super();
    this.g.classList.add("annotate-blocking-modal-content");
    this.type = 0;
  }
  getType() {
    return this.type;
  }
  Wi() {
    return !0;
  }
  J() {
    super.J();
    this.i.style.zIndex = "2147483647";
    this.i && eh(this.$c, this.i) && this.i.removeChild(this.$c);
  }
  l() {
    this.J();
    this.i && (this.i.style.width = this.width + "px", this.i.style.height = this.g.offsetHeight + this.j.offsetHeight + "px", this.g.style.overflowY = 200 < this.g.offsetHeight ? "auto" : "hidden");
    this.o();
  }
  o() {
    super.o();
    this.g.style.top = "0px";
  }
}
;function ZM(a, b) {
  a.j.i == YM && (CQ(a.j, b), a.g = null);
}
function NY(a, b) {
  BQ(a.j) && a.j.i == YM && (b ? (Sn(), RA(!0), DQ(a.j, !0), NQ(a.j)) : (RA(!1), DQ(a.j, !1)));
  clearTimeout(a.i);
  a.i = -1;
}
function OY(a) {
  EQ(a.j);
  NY(a, !1);
}
function PY() {
  var a = XM;
  a.g = null;
  a.g = {};
  a.g.uPanelType = YM;
  a.g.userId = M.s;
  a.g.strUserGuid = Bh();
  a.g.sessionId = M.G;
  var b = An();
  b = {strPageUrl:si() ? P.G : Ul(), uClassId:S.j, strAnnotationGuid:b, strAnnotationName:Ts(b), strAssessmentFileGuid:Ws(), bOwnedFile:ot() ? !0 : Oo(S).Fm(), strOwnerGuid:ot() ? Bh() : Oo(S).sk()};
  a.g.oAnnotationData = b;
  a.j.i = YM;
  BQ(a.j) ? a.j.j ? (ZM(a, a.g), a.g = null) : FQ(a.j) : (OY(a), FQ(a.j));
  SQ(a.j);
  NY(a, !1);
  Vn("Loading...", null);
  a.i = setTimeout(() => {
    Sn();
    clearTimeout(a.i);
    a.i = -1;
  }, 2E4);
}
function QY() {
  Kn("", "Error loading data.", "", "CLOSE", null, () => {
    Nn();
  });
}
class RY extends ph {
  constructor() {
    var a = mC;
    super();
    this.j = a;
    this.l = this.l.bind(this);
    this.j && this.j.addEventListener(HQ.g, this.l);
    this.g = null;
    this.i = -1;
  }
  l(a) {
    a = a.detail;
    let b = !1;
    a && this.j.i == YM && (b = "uPanelType" in a ? a.uPanelType == YM : !0);
    if (b && a.chromeExtensionCommand) {
      switch(parseInt(a.chromeExtensionCommand)) {
        case Kg.Mq:
          console.log("show iframe msg received");
          NY(this, !0);
          break;
        case Kg.Lq:
          console.log("close iframe msg received");
          NY(this, !1);
          break;
        case Kg.up:
          console.log("iframe loaded msg received");
          null != this.g && ZM(this, this.g);
          break;
        case Kg.WK:
          NY(this, !1);
          QY();
          break;
        case Kg.XK:
          gw("Link copied", !0);
          break;
        default:
          console.log("default iframe msg received"), NY(this, !1);
      }
    }
  }
  U() {
    clearTimeout(this.i);
    this.i = -1;
    RA(!1);
  }
}
;function Lv(a) {
  return null == a.m ? null : a.m.Na();
}
function Zv() {
  let a = [];
  Kv.o.forEach(b => {
    a.push(b.Na());
  });
  return a;
}
function $v() {
  let a = [];
  Kv.s.forEach(b => {
    a.push(b.Na());
  });
  return a;
}
function bw(a) {
  var b = Kv;
  a && a.length && a.forEach(c => {
    let d = new Ur();
    d.Fa(c);
    b.o.push(d);
  });
}
function cw(a) {
  var b = Kv;
  a && a.length && a.forEach(c => {
    let d = new Zr();
    d.Fa(c);
    b.s.push(d);
  });
}
function BO(a) {
  var b = Kv;
  WB && XB(!1);
  SY(b, a);
  b.B = !0;
  b.g = null;
  b.g = {};
  b.g.uPanelType = jt;
  b.g.videoId = a.kb.Xg;
  b.j.i = jt;
  BQ(b.j) ? b.j.j ? (TY(b, b.g), b.g = null) : FQ(b.j) : (UY(b), FQ(b.j));
  OQ(b.j);
  VY(b, !1);
  Vn("Loading...", null);
  b.i = setTimeout(() => {
    Sn();
    clearTimeout(b.i);
    b.i = -1;
  }, 3E4);
}
function VY(a, b) {
  !BQ(a.j) || 2 != a.j.i && a.j.i != jt || (b ? (Sn(), RA(!0), DQ(a.j, !0), NQ(a.j)) : (RA(!1), DQ(a.j, !1)));
  clearTimeout(a.i);
  a.i = -1;
}
function UY(a) {
  EQ(a.j);
  VY(a, !1);
}
function TY(a, b) {
  if (2 == a.j.i || a.j.i == jt) {
    CQ(a.j, b), a.g = null;
  }
}
function WY() {
  var a = Kv;
  a.B = !1;
  a.g = null;
  a.g = {};
  a.g.uPanelType = 2;
  a.g.bPresentation = Fh(P) || nl();
  a.g.userId = M.s;
  a.g.strUserGuid = Bh();
  a.g.sessionId = M.G;
  a.j.i = 2;
  BQ(a.j) ? a.j.j ? (TY(a, a.g), a.g = null) : FQ(a.j) : (UY(a), FQ(a.j));
  KQ(a.j);
  VY(a, !1);
  Vn("Loading...", null);
  a.i = setTimeout(() => {
    Sn();
    clearTimeout(a.i);
    a.i = -1;
  }, 3E4);
}
function SY(a, b) {
  a.v && a.v.removeEventListener(a.v.Uz, a.C);
  a.v = b;
  a.v && a.v.addEventListener(a.v.Uz, a.C);
}
function XY(a) {
  if (a.j.i == jt) {
    var b = a.j.g;
    a.B && b && "visible" == b.style.visibility && (VY(a, !1), b = {}, b.uPanelType = jt, b.bClosePlayer = !0, TY(a, b));
  }
}
function YY(a, b) {
  if (a.j.i != jt) {
    return !1;
  }
  var c = a.j.g;
  if (c && b.target.id != c.id) {
    return !1;
  }
  a = b.pageX;
  b = b.pageY;
  if (c) {
    var d = c.getBoundingClientRect();
    if (d) {
      c = d.width;
      let e = d.height, f = d.top;
      d = d.left;
      if (a > d && a < d + c && b > f && b < f + e) {
        return !0;
      }
    }
  }
  return !1;
}
class ZY extends ph {
  constructor() {
    var a = mC;
    super();
    this.j = a;
    this.G = this.G.bind(this);
    this.j && this.j.addEventListener(HQ.g, this.G);
    this.B = !1;
    this.m = this.l = null;
    this.o = [];
    this.s = [];
    this.g = null;
    this.C = this.C.bind(this);
    this.v = null;
    this.i = -1;
    this.u = this.u.bind(this);
    this.M = this.M.bind(this);
    this.N = this.N.bind(this);
    this.O = {capture:!0, passive:!1};
    this.J = this.J.bind(this);
    window.addEventListener("pointerdown", this.J, this.O);
  }
  C() {
    SY(this, null);
    XY(this);
  }
  G(a) {
    a = a.detail;
    let b = !1;
    !a || 2 != this.j.i && this.j.i != jt || (b = "uPanelType" in a ? 2 == a.uPanelType || a.uPanelType == jt : !0);
    if (b && a.chromeExtensionCommand) {
      switch(parseInt(a.chromeExtensionCommand)) {
        case Kg.Mq:
          VY(this, !0);
          break;
        case Kg.Lq:
          VY(this, !1);
          break;
        case Kg.CK:
          "strImageUrl" in a && (this.l = new Ur(), this.l.Gy = !1, this.l.zq(), Bm(this.l, {strFN:M.B, strLN:M.C, strOwnerGuid:Bh(),}), this.l.xb(), this.l.Fa(a), VY(this, !1), this.M());
          break;
        case Kg.DK:
          "strURL" in a && (this.m = new Zr(), this.m.zq(), Bm(this.m, {strFN:M.B, strLN:M.C, strOwnerGuid:Bh(),}), this.m.xb(), this.m.Fa(a), a = this.m, a.height = Pr.Jj, a.width = Pr.ui, VY(this, !1), this.N());
          break;
        case Kg.up:
          null != this.g && TY(this, this.g);
          break;
        default:
          VY(this, !1);
      }
    }
  }
  getImageData() {
    return null == this.l ? null : this.l.Na();
  }
  J(a) {
    YY(this, a) || XY(this);
  }
  u(a, b) {
    L.sa({type:"SendDiscardMediaRequestOnServer", oImage:a ? this.getImageData() : null, oVideo:b ? Lv(this) : null}, null);
  }
  M() {
    var a = L.Pb();
    let b = L.mb();
    $Y(a);
    let c = An();
    if (Yg(c) && !ot()) {
      Us(c) || Ks(1) ? (lw.g(), mw(b, !1, !1)) : (a.U(), $Y(a), lw.g(), rC());
    } else {
      if (!b.Gf()) {
        var d = !1;
        bl(1) && cl(1) && (d = !0);
        a = document.getElementById("office-editing-file-extension");
        null != a && "none" != a.style.display || P.M ? nC(() => {
          lw.g();
          b.Ja() || Ok(P) || d ? (L.Xn(), nw.innerHTML = 'Save annotations<br><span style="font-size: 12px;">We need to store this image in your account.</span>', pB.innerText = "DISCARD") : Ov(b, !0);
        }, () => {
          null != this.getImageData() && (jw(0, this.getImageData()), this.u(!0, !1), this.l = null);
          Ip();
          YB();
        }) : (lw.g(), b.Ja() || Ok(P) || d || ot() ? (L.Xn(), nw.innerHTML = 'Save annotations<br><span style="font-size: 12px;">We need to store this image in your account.</span>', pB.innerText = "DISCARD") : Ov(b, !0));
      }
    }
  }
  N() {
    var a = L.Pb();
    let b = L.mb();
    a.tv(Lv(Kv));
    let c = An();
    if (Yg(c) && !ot()) {
      Us(c) || Ks(1) ? (lw.g(), mw(b, !1, !1)) : (a.U(), a.tv(Lv(Kv)), lw.g(), rC());
    } else {
      if (!b.Gf()) {
        var d = !1;
        bl(1) && cl(1) && (d = !0);
        a = document.getElementById("office-editing-file-extension");
        null != a && "none" != a.style.display || P.M ? nC(() => {
          lw.g();
          b.Ja() || Ok(P) || d ? (L.Xn(), nw.innerHTML = 'Save annotations<br><span style="font-size: 12px;">We need to store this video in your account.</span>', pB.innerText = "DISCARD") : Ov(b, !0);
        }, () => {
          null != Lv(this) && (kw(0, Lv(this)), this.u(!1, !0), this.m = null);
          Ip();
          YB();
        }) : (lw.g(), b.Ja() || Ok(P) || d || ot() ? (L.Xn(), nw.innerHTML = 'Save annotations<br><span style="font-size: 12px;">We need to store this video in your account.</span>', pB.innerText = "DISCARD") : Ov(b, !0));
      }
    }
  }
  U() {
    this.B = !1;
    clearTimeout(this.i);
    this.i = -1;
    RA(!1);
  }
}
;function zn(a, b, c, d, e, f) {
  var k = M.s, l = Bh();
  console.log("> Reset S3 bucket path (to Logged In User)");
  a.v = !1;
  a.u = !1;
  a.qu = !1;
  aZ(a, b, c, d, e);
  bZ(a, 0 < f);
  a.B = k;
  a.s = l;
}
function Bn(a, b, c, d, e, f) {
  if (!a.qu) {
    var k = () => {
      let l = S.g;
      var n = Tu(l), p = cZ(a.g, l);
      for (var t = 0; t < p.length; t++) {
        n.length >= t + 1 && (IO(p[t], n[t].li(), dZ(a), eZ(a)), p[t].Wn(fZ(a, l)));
      }
      n = Mu(l);
      p = cZ(a.i, l);
      for (t = 0; t < p.length; t++) {
        n.length >= t + 1 && (KO(p[t], n[t], M.o + "/" + a.Rl + "video/", eZ(a)), p[t].Wn(fZ(a, l)));
      }
      n = Eu(l);
      p = cZ(a.j, l);
      for (t = 0; t < p.length; t++) {
        n.length >= t + 1 && (xA(p[t], n[t], M.v + a.Rl + "image/"), p[t].Wn(fZ(a, l)));
      }
    };
    Ch() ? a.$k != c && (b = L.mb().Fq, f != c && f == a.$k && (b = !0), console.log("[MAC] loaded annotation file", a.$k, "->", c, b), a.$k = c, a.Rl = d, b && k()) : a.m != b && (c = L.mb().Fq, e != b && e == a.m && (c = !0), console.log("[MAC] loaded annotation file", a.m, "->", b, c), a.m = b, a.Rl = d, c && k());
  }
}
function Dn(a, b, c, d, e, f, k, l, n, p, t) {
  console.log("> Set S3 bucket path (Co-Teacher - Publisher Teacher)");
  aZ(a, k, l, n, p);
  bZ(a, 0 < t);
  a.v = !0;
  a.MD = c;
  a.m = d;
  a.$k = e;
  a.Rl = f;
  a.B = b;
  a.s = c;
}
function En(a, b, c, d, e, f, k, l, n, p, t) {
  console.log("> Set S3 bucket path (Shared Link Opened By Student - Publisher Teacher)");
  aZ(a, k, l, n, p);
  bZ(a, 0 < t);
  a.u = !0;
  a.m = d;
  a.$k = e;
  a.B = b;
  a.s = c;
  a.Rl = f;
}
function So(a, b, c) {
  c || (a.Qf = null, Ru(), console.log("[MAC] cleared attachment model list"));
  for (var d = 0; d < b.length; d++) {
    let k = new Pr();
    k.Fa(b[d]);
    var e = !1, f = Js(S, c);
    if (f) {
      f = f.Ed;
      for (let l = 0; l < f.length; l++) {
        if (k.Ui(f[l])) {
          e = !0;
          break;
        }
      }
    }
    e || (e = c, !c && P.l && ("uDocType" in b[d] ? e = b[d].uDocType : e = 1), e ? Qr(k, e) : Rr(k));
  }
  console.log("[MAC] Parse new attachment list", b);
  console.log("[MAC] create UI elements for all parsed attachments");
  if (!c && P.l) {
    if (c = Uu().concat(Vu(), Wu())) {
      for (b = 0; b < c.length; b++) {
        Sr(a, c[b], c[b].je());
      }
    }
  } else {
    b = null;
    if (c) {
      switch(c) {
        case 1:
          b = Uu();
          break;
        case 2:
          b = Vu();
          break;
        case 3:
          b = Wu();
      }
    } else {
      b = Tu(ql());
    }
    if (b) {
      for (d = 0; d < b.length; d++) {
        Sr(a, b[d], c);
      }
    }
  }
}
function Uo(a, b, c) {
  a.Ef = null;
  Ku();
  console.log("[VAC] cleared video model list");
  console.log("[VAC] Attachment list | Force Deleted attachment", Mu(), a.Ef);
  for (var d = 0; d < b.length; d++) {
    let k = new Zr();
    k.Fa(b[d]);
    var e = !1, f = Js(S, c);
    if (f) {
      f = f.Gd;
      for (let l = 0; l < f.length; l++) {
        if (k.Ui(f[l])) {
          e = !0;
          break;
        }
      }
    }
    e || ((e = c) || !L.mb().Ja() || L.mb().Gf() || ("uDocType" in b[d] ? e = b[d].uDocType : e = 1), e ? $r(k, e) : S.tv(k));
  }
  console.log("[VAC] Parse new attachment list", b);
  console.log("[VAC] create UI elements for all parsed attachments");
  if (c || !L.mb().Ja() || L.mb().Gf()) {
    b = null;
    if (c) {
      switch(c) {
        case 1:
          b = Nu();
          break;
        case 2:
          b = Ou();
          break;
        case 3:
          b = Pu();
      }
    } else {
      b = Mu();
    }
    if (b) {
      for (d = 0; d < b.length; d++) {
        as(a, b[d], c);
      }
    }
  } else {
    if (c = Nu().concat(Ou(), Pu())) {
      for (b = 0; b < c.length; b++) {
        as(a, c[b], c[b].je());
      }
    }
  }
}
function To(a, b, c) {
  c || (a.Pf = null, Cu(), console.log("[IAC] cleared attachment model list"));
  console.log("[IAC] Attachment list | Force Deleted attachment", Eu(), a.Pf);
  for (var d = 0; d < b.length; d++) {
    let e = new Ur();
    e.Fa(b[d]);
    let f = c;
    c || !L.mb().Ja() || L.mb().Gf() || ("uDocType" in b[d] ? f = b[d].uDocType : f = 1);
    f ? Vr(e, f) : Wr(e);
  }
  console.log("[IAC] Parse new attachment list", b);
  console.log("[IAC] create UI elements for all parsed attachments");
  if (c || !L.mb().Ja() || L.mb().Gf()) {
    b = null;
    if (c) {
      switch(c) {
        case 1:
          b = Fu();
          break;
        case 2:
          b = Gu();
          break;
        case 3:
          b = Hu();
      }
    } else {
      b = Eu();
    }
    if (b) {
      for (d = 0; d < b.length; d++) {
        Xr(a, b[d], c);
      }
    }
  } else {
    if (c = Fu().concat(Gu(), Hu())) {
      for (b = 0; b < c.length; b++) {
        Xr(a, c[b], c[b].je());
      }
    }
  }
  Yr(a);
}
function Hp(a) {
  a.Qf && (console.log("Cant force save to existing doc, will save when save clicked"), a.Qf = null);
  a.Pf && (a.Pf = null);
  a.Ef && (a.Ef = null);
}
function Dr(a, b, c) {
  a = cZ(a.j, c);
  c = -1;
  for (let d = 0; d < a.length; d++) {
    if (a[d].Ta() == b) {
      c = d;
      break;
    }
  }
  -1 != c && (a[c].U(), a.splice(c, 1));
}
function Fr(a, b, c) {
  a = cZ(a.i, c);
  c = -1;
  for (let d = 0; d < a.length; d++) {
    if (a[d].kb == b) {
      c = d;
      break;
    }
  }
  -1 != c && (a[c].gb(), a.splice(c, 1));
}
function Br(a, b, c) {
  a = cZ(a.g, c);
  c = -1;
  for (let d = 0; d < a.length; d++) {
    if (a[d].kb == b) {
      c = d;
      break;
    }
  }
  -1 != c && (a[c].gb(), a.splice(c, 1));
}
function Tv(a) {
  a = cZ(a.g, S.g);
  if (0 < a.length) {
    for (let b = a.length - 1; 0 <= b; b--) {
      if (a[b].iq()) {
        let c = a[b].kb;
        c && Su(c);
        a[b].gb();
        a.splice(b, 1);
      }
    }
  }
}
function Uv(a) {
  a = cZ(a.j, S.g);
  if (0 < a.length) {
    for (let b = a.length - 1; 0 <= b; b--) {
      if (a[b].iq()) {
        let c = a[b].Ta();
        c && Du(c);
        a[b].U();
        a.splice(b, 1);
      }
    }
  }
}
function Vv(a) {
  a = cZ(a.i, S.g);
  if (0 < a.length) {
    for (let b = a.length - 1; 0 <= b; b--) {
      if (a[b].iq()) {
        let c = a[b].kb;
        c && Lu(c);
        a[b].gb();
        a.splice(b, 1);
      }
    }
  }
}
function hw() {
  var a = Jv.i;
  let b = new Pr();
  b.Fa({arrMedia:a});
  a = Tu(S.g);
  for (let c = 0; c < a.length; c++) {
    if (a[c].Ui(b)) {
      Su(a[c]);
      console.log("[MAC] Removed un-saved recorded media attachment from model(doc data)");
      break;
    }
  }
}
function jw(a, b) {
  a = new Ur();
  a.Fa(b);
  b = Eu();
  for (let c = 0; c < b.length; c++) {
    if (b[c].Ui(a)) {
      Du(b[c]);
      console.log("[IAC] Removed un-saved image from model(doc data)");
      break;
    }
  }
}
function kw(a, b) {
  a = new Zr();
  a.Fa(b);
  b = Mu();
  for (let c = 0; c < b.length; c++) {
    if (b[c].Ui(a)) {
      Lu(b[c]);
      console.log("[VAC] Removed un-saved image from model(doc data)");
      break;
    }
  }
}
function rw(a, b) {
  if (null != a.Qf) {
    if (!b && (console.log("[MAC] restore force deleted media attachment on save fail for force delete"), a.Qf)) {
      var c = new Pr();
      c.Fa(a.Qf);
      Xu(c, !0);
      var d = gZ(a, c, -1, null);
      if (d) {
        var e = Um(c);
        d.Fo(c.offsetLeft + e.x, c.offsetTop + e.y, c.width, c.height);
        console.log("[MAC] Restored deleted media on force save fail");
        si() ? Tr(a, a.D) : a.A && a.wf(a.A);
      }
    }
    console.log("[MAC] clear force deleted media attachment on save response", a.Qf);
    a.Qf = null;
    console.log("[MAC] cleared force delete media attachment", a.Qf);
    a.Xm = !0;
  } else {
    console.log("[MAC] !? no force deleted media attachment to clear on save !?", a.Qf);
  }
  if (null != a.Pf) {
    if (!b && (console.log("[IAC] restore force deleted image on save fail for force delete"), a.Pf)) {
      c = new Ur();
      c.Fa(a.Pf);
      Iu(c, !0);
      d = hZ(a, c, -1, null);
      var f = Um(c);
      e = c.offsetLeft + f.x;
      f = c.offsetTop + f.y;
      d.V(c.width, c.height);
      d.ga(e, f);
      Yr(a);
    }
    console.log("[IAC] clear force deleted image on save response", a.Pf);
    a.Pf = null;
    console.log("[IAC] cleared force delete image", a.Pf);
    a.Xm = !0;
  } else {
    console.log("[IAC] !? no force deleted image to clear on save !?", a.Pf);
  }
  null != a.Ef ? (!b && (console.log("[VAC] restore force deleted Video on save fail for force delete"), a.Ef && (b = new Zr(), b.Fa(a.Ef), Qu(b, !0), c = iZ(a, b, -1, null))) && (d = Um(b), c.Fo(b.offsetLeft + d.x, b.offsetTop + d.y, b.width, b.height), console.log("[VAC] Restored deleted media on force save fail"), si() ? Tr(a, a.D) : a.A && a.wf(a.A)), console.log("[VAC] clear force deleted Video on save response", a.Ef), a.Ef = null, console.log("[VAC] cleared force delete Video", a.Ef), a.Xm = 
  !0) : console.log("[VAC] !? no force deleted Video to clear on save !?", a.Ef);
}
function Aw(a, b) {
  console.log("[IAC] create UI for image on save success", b);
  var c = new Ur();
  c.Fa(b);
  b = Eu();
  for (let f = 0; f < b.length; f++) {
    if (b[f].Ui(c)) {
      let k = hZ(a, b[f], f, null);
      var d = Um(b[f]);
      c = k;
      var e = b[f].offsetLeft + d.x;
      d = b[f].offsetTop + d.y;
      c.V(b[f].width, b[f].height);
      c.ga(e, d);
      vz(k);
      Yr(a);
      b[f].Io == Cp.j && (S.Kj([b[f]], "arrImageAttachments"), b[f].Io = "");
      a.Xm = !0;
      break;
    }
  }
}
function Bw(a, b) {
  console.log("[VAC] create UI for uploaded media on save success", b);
  var c = new Zr();
  c.Fa(b);
  b = Mu();
  for (let d = 0; d < b.length; d++) {
    if (b[d].Ui(c)) {
      c = iZ(a, b[d], d, null);
      if (!c) {
        break;
      }
      let e = Um(b[d]);
      c.Fo(b[d].offsetLeft + e.x, b[d].offsetTop + e.y, b[d].width, b[d].height);
      si() ? Tr(a, a.D) : a.A && a.wf(a.A);
      a.Xm = !0;
      b[d].Io == Cp.j && (S.Kj([b[d]], "arrUploadedVideoAttachments"), b[d].Io = "");
      break;
    }
  }
}
function Cw(a) {
  var b = Jv.i;
  console.log("[MAC] create UI for recorded media on save success", b);
  var c = new Pr();
  c.Fa({arrMedia:b});
  b = Tu(S.g);
  for (let d = 0; d < b.length; d++) {
    if (b[d].Ui(c)) {
      c = gZ(a, b[d], d, null);
      if (!c) {
        break;
      }
      let e = Um(b[d]);
      c.Fo(b[d].offsetLeft + e.x, b[d].offsetTop + e.y, b[d].width, b[d].height);
      si() ? Tr(a, a.D) : a.A && a.wf(a.A);
      a.Xm = !0;
      b[d].Io == Cp.j && (S.Kj([b[d]], "arrMediaAttachments"), b[d].Io = "");
      break;
    }
  }
}
function UD(a, b) {
  b || (b = S.g);
  a = "";
  (b = Js(S, b)) && (a = b.Uf);
  return M.o + "/" + a + "record/";
}
function qG(a, b, c) {
  cZ(a.g, 1).forEach(d => {
    var e = d.kb;
    if (e) {
      let f = e.offsetLeft + e.Ra();
      e = e.offsetTop + e.wb();
      f > b || e > c ? d.uk() : d.Yn(jZ(a, 1));
    }
  });
  cZ(a.i, 1).forEach(d => {
    var e = d.kb;
    if (e) {
      let f = e.offsetLeft + e.Ra();
      e = e.offsetTop + e.wb();
      f > b || e > c ? d.uk() : d.Yn(jZ(a, 1));
    }
  });
  cZ(a.j, 1).forEach(d => {
    let e = d.vd() + d.Ra(), f = d.rd() + d.wb();
    e > b || f > c ? d.uk() : d.Yn(jZ(a, 1));
  });
}
function jJ(a, b) {
  let c = [], d = [], e = kZ(a, 1, 1);
  c = c.concat(e.arrAttachment);
  d = d.concat(e.arrAttachmentForThumbnail);
  e = kZ(a, 2, b ? 2 : 1);
  c = c.concat(e.arrAttachment);
  d = d.concat(e.arrAttachmentForThumbnail);
  e = kZ(a, 3, b ? 3 : 1);
  c = c.concat(e.arrAttachment);
  d = d.concat(e.arrAttachmentForThumbnail);
  return {arrAttachment:c, arrAttachmentForThumbnail:d};
}
function ZI(a, b) {
  b || (b = S.g);
  a = "";
  (b = Js(S, b)) && (a = b.Uf);
  return M.v + a + "image/";
}
function $I(a, b) {
  b || (b = S.g);
  a = "";
  (b = Js(S, b)) && (a = b.Uf);
  return M.v + a + "record/";
}
function aJ(a, b) {
  b || (b = S.g);
  a = "";
  (b = Js(S, b)) && (a = b.Uf);
  return M.o + "/" + a + "video/";
}
function bJ(a, b) {
  a = "";
  (b = Js(S, b)) && (a = b.Uf);
  return M.v + a + "video/";
}
function SJ(a, b) {
  var c = S.g, d = cZ(a.g, c), e = cZ(a.j, c);
  a = cZ(a.i, c);
  for (c = 0; c < d.length; c++) {
    let f = d[c];
    b ? (FO(f), uO(f) && f.Jc.Wa.pb()) : (DO(f), uO(f) && f.Jc.Wa.ja());
  }
  for (d = 0; d < e.length; d++) {
    e[d].Wa.zm(b);
  }
  for (e = 0; e < a.length; e++) {
    d = a[e], b ? FO(d) : DO(d);
  }
}
function RO(a, b, c) {
  c = c.kb ? c.kb.xs : null;
  let d = !0, e = a.gj, f = a.hj, k = a.Tl, l = a.$i;
  a = a.s;
  let n = "";
  b && (3 != b || L.mb().Ja() || (b = 1), b = lZ(b)) && (e = b.strPublisherFirstName, f = b.strPublisherLastName, k = b.strPublisherPicture, l = b.oPublisherPicturePosition, a = b.strPublisherGuid);
  !L.mb().Fq && c && a != c.zd && (d = !1, e = c.gj, f = c.hj, k = "", b = c.hj.length ? c.hj.substring(0, 1) : "", b = b.length ? c.gj.substring(0, 1) + b : c.gj.substring(0, 2), n = b.toUpperCase());
  return {gj:e, hj:f, Tl:k, $i:l, Hy:d, VH:n};
}
function hB(a, b) {
  a.l = b.kb;
  "arrMediaAttachments" == b.dn ? (b = "recording", a.l.Rx() && (b = "voice note"), mZ(a, "Delete " + b + "? This operation cannot be undone.")) : (b = "Delete video? This operation cannot be undone.", a.l.Rx() && (b = "Delete audio? This operation cannot be undone."), nZ(a, b));
}
function $Y(a) {
  var b = Kv.getImageData();
  let c = new Ur();
  c.Fa(b);
  c.Io = Cp.j;
  if (!Sm(c)) {
    if (b = Eu().length % 3 * 16, ml(P)) {
      c.offsetLeft = a.A.x + b, c.offsetTop = a.A.y + b;
    } else {
      a = window.scrollX + (window.innerWidth - 350) / 2 + b;
      b = window.scrollY + (window.innerHeight - 350) / 2 + b;
      var d = Ck(a, b);
      d && Tl() && (L.kq(d), d = Fk(d), c.Cb = d, b = Ek(a, b, c.Cb), a = b.x, b = b.y);
      c.offsetLeft = a;
      c.offsetTop = b;
    }
  }
  el(c);
  Iu(c, !1);
  console.log("[IAC] Added image data as new attachment before save", c.Na());
}
function dZ(a) {
  return M.o + "/" + a.Rl + "record/";
}
function eZ(a) {
  return Ch() ? M.ia + "?strGUID=" + a.$k : M.ia + "?annotationId=" + a.m;
}
function oZ(a, b) {
  b = Js(S, b);
  return M.ia + "?strGUID=" + (b ? b.ma : a.$k);
}
function bZ(a, b) {
  if (!a.v && !a.u) {
    a.gB = b;
    b = cZ(a.g, S.g);
    for (var c = 0; c < b.length; c++) {
      xO(b[c]);
    }
    b = cZ(a.g, 1);
    for (c = 0; c < b.length; c++) {
      xO(b[c]);
    }
    b = cZ(a.g, 2);
    for (c = 0; c < b.length; c++) {
      xO(b[c]);
    }
    b = cZ(a.g, 3);
    for (a = 0; a < b.length; a++) {
      xO(b[a]);
    }
  }
}
function aZ(a, b, c, d, e) {
  a.qu || a.v || a.u || (a.Tl = b, a.$i = c, a.gj = d, a.hj = e);
}
function pZ(a, b, c, d, e, f, k, l, n, p, t) {
  console.log("> Set S3 bucket path (Student - Publisher Teacher)");
  aZ(a, k, l, n, p);
  bZ(a, 0 < t);
  a.qu = !0;
  a.m = d;
  a.$k = e;
  a.Rl = f;
  a.B = b;
  a.s = c;
}
function qZ(a) {
  let b = S.g, c = cZ(a.j, b), d = cZ(a.i, b);
  cZ(a.g, b).forEach(e => e.Wn(fZ(a, b)));
  c.forEach(e => e.Wn(fZ(a, b)));
  d.forEach(e => e.Wn(fZ(a, b)));
}
function fZ(a, b) {
  let c = S.g;
  a = a.sk(b);
  return Jh() && c == b && !M.g && !fq(1) && (a == Bh() || L.mb().Fq || Ks(c)) && A(rl()) && AA() ? !1 : !0;
}
function rZ(a) {
  var b = Jh();
  a.J && b || (a.J = b, qZ(a));
  if (Jh() && cl(5)) {
    if (b = bl(1)) {
      Kh() && (!Ch() && b.uPublisherId == M.s || Ch() && b.strPublisherGuid == Bh()) ? (S.m = 1, a.qu = !1, a.v = !1, a.MD = null, a.u = !1) : Kh() ? S.m = 2 : Ph() ? S.m = 3 : Qh() && (S.m = 4);
    }
  } else {
    S.m = 5;
  }
}
function sZ(a, b, c, d) {
  if (b && b.A) {
    var e = 1;
    b.A.width && (e = a.A.width / b.A.width);
    c.length > d && b.Ui(c[d].kb) && (c[d].De((b.offsetLeft - b.A.x) * e + a.A.x, (b.offsetTop - b.A.y) * e + a.A.y), c[d].Fn(e * b.A.scale), b.A.x = a.A.x, b.A.y = a.A.y, b.A.width = a.A.width, b.A.height = a.A.height, b.A.scale *= e);
  }
}
function tZ(a, b, c, d) {
  if (b && b.A) {
    var e = 1;
    b.A.width && (e = a.A.width / b.A.width);
    c.length > d && (c[d].De((b.offsetLeft - b.A.x) * e + a.A.x, (b.offsetTop - b.A.y) * e + a.A.y), c[d].Fn(e * b.A.scale), b.A.x = a.A.x, b.A.y = a.A.y, b.A.width = a.A.width, b.A.height = a.A.height, b.A.scale *= e);
  }
}
function Yr(a) {
  if (si()) {
    if (Vk(P) && a.Mc) {
      if (a.Mc = !0, console.log("[MAC] show all attachments containers"), !si() || Vk(P)) {
        uZ(a, ql()), Yx(1) && uZ(a, 1), Yx(2) && uZ(a, 2), Yx(3) && uZ(a, 3);
      }
    } else {
      a.Mc = !1, console.log("[MAC] hide all attachment containers"), vZ(a, ql()), Yx(1) || vZ(a, 1), Yx(2) || vZ(a, 2), Yx(3) || vZ(a, 3);
    }
  }
}
function wZ(a, b, c) {
  let d = a.offsetLeft, e = a.offsetTop;
  c < b.length && (a = Um(a), OO(b[c], d + a.x, e + a.y));
}
function xZ(a, b, c) {
  let d = a.offsetLeft, e = a.offsetTop;
  c < b.length && (a.Cb && (a = Um(a), d += a.x, e += a.y), OO(b[c], d, e));
}
function yZ(a, b, c, d) {
  if (b) {
    var e = yo(a.D, b.S);
    -1 == e && wz(a.D, b.S) && (e = xz(a.D, b.S));
    if (-1 != e) {
      var f = hl(a.D, e, new il(a.D.scrollX, a.D.scrollY));
      e = {x:-f.$a + a.D.scrollX, y:-f.Ua + a.D.scrollY, width:jl(a.D, e), height:kl(a.D, e), scale:a.D.scale};
      f = e.scale / b.A.scale;
      if (c.length > d) {
        var k = b.offsetLeft, l = b.offsetTop;
        a.D && a.D.Ea && c[d].Kd(a.D.Bb);
        c[d].De((k - b.A.x) * f + e.x, (l - b.A.y) * f + e.y);
        c[d].Fn(e.scale);
        b.A.x = e.x;
        b.A.y = e.y;
        b.A.width = e.width;
        b.A.height = e.height;
        b.A.scale = e.scale;
        c[d].D = a.D;
      }
    }
  }
}
function zZ(a, b, c, d) {
  if (b) {
    var e = yo(a.D, b.S);
    -1 == e && wz(a.D, b.S) && (e = xz(a.D, b.S));
    if (-1 != e) {
      var f = hl(a.D, e, new il(a.D.scrollX, a.D.scrollY));
      e = {x:-f.$a + a.D.scrollX, y:-f.Ua + a.D.scrollY, width:jl(a.D, e), height:kl(a.D, e), scale:a.D.scale};
      f = e.scale / b.A.scale;
      if (c.length > d) {
        var k = b.offsetLeft, l = b.offsetTop;
        a.D && a.D.Ea && c[d].Kd(a.D.Bb);
        c[d].De((k - b.A.x) * f + e.x, (l - b.A.y) * f + e.y);
        c[d].Fn(e.scale);
        b.A.x = e.x;
        b.A.y = e.y;
        b.A.width = e.width;
        b.A.height = e.height;
        b.A.scale = e.scale;
        c[d].D = a.D;
      }
    }
  }
}
function Tr(a, b) {
  a.D = b;
  Yr(a);
  if (a.D.Ea) {
    b = Tu(S.g);
    var c = cZ(a.g, S.g);
    for (var d = 0; d < b.length; d++) {
      yZ(a, b[d], c, d);
    }
    if (2 == S.g) {
      b = Uu();
      c = cZ(a.g, 1);
      for (d = 0; d < b.length; d++) {
        yZ(a, b[d], c, d);
      }
      b = Wu();
      c = cZ(a.g, 3);
      for (d = 0; d < b.length; d++) {
        yZ(a, b[d], c, d);
      }
    } else if (3 == S.g) {
      b = Uu();
      c = cZ(a.g, 1);
      for (d = 0; d < b.length; d++) {
        yZ(a, b[d], c, d);
      }
      b = Vu();
      c = cZ(a.g, 2);
      for (d = 0; d < b.length; d++) {
        yZ(a, b[d], c, d);
      }
    }
    b = Mu();
    c = cZ(a.i, S.g);
    for (d = 0; d < b.length; d++) {
      zZ(a, b[d], c, d);
    }
    if (2 == S.g) {
      b = Nu();
      c = cZ(a.i, 1);
      for (d = 0; d < b.length; d++) {
        zZ(a, b[d], c, d);
      }
      b = Pu();
      c = cZ(a.i, 3);
      for (d = 0; d < b.length; d++) {
        zZ(a, b[d], c, d);
      }
    } else if (3 == S.g) {
      b = Nu();
      c = cZ(a.i, 1);
      for (d = 0; d < b.length; d++) {
        zZ(a, b[d], c, d);
      }
      b = Ou();
      c = cZ(a.i, 2);
      for (d = 0; d < b.length; d++) {
        zZ(a, b[d], c, d);
      }
    }
  }
}
function lZ(a) {
  if (a = Js(S, a)) {
    if (a = a.Yi) {
      return a;
    }
  }
  return null;
}
function jZ(a, b) {
  a = a.Mc;
  null != b && b != S.g && (a = Yx(b));
  return a && (!si() || Vk(P));
}
function gZ(a, b, c, d) {
  if (b.sn) {
    return null;
  }
  let e = document.body;
  a.D && a.D.Ea && (e = a.D.Bb);
  null == d && (1 == S.g ? d = 1 : 3 == S.g ? d = 3 : 2 == S.g && (d = 2));
  let f = dZ(a), k = eZ(a);
  d && (f = UD(0, d), k = oZ(a, d));
  b = new QO(a, fZ(a, d), e, d, b);
  LO(b, "arrMediaAttachments", f, k);
  jZ(a, d) ? b.show() : b.kn();
  b.ra && (b.ra.style.zIndex = a.o);
  b.Jc && b.Jc.jb(a.o);
  AZ(a.g, b, c, d);
  return b;
}
function BZ(a, b, c) {
  return c && a > c.left && a < c.left + c.width && b > c.top && b < c.top + c.height ? !0 : !1;
}
function CZ(a, b, c, d) {
  a = cZ(a.g, d);
  for (d = 0; d < a.length; d++) {
    if (!a[d].iq() && BZ(b, c, a[d].Zy())) {
      return !0;
    }
  }
  return !1;
}
function DZ(a, b, c, d) {
  a = cZ(a.i, d);
  for (d = 0; d < a.length; d++) {
    if (!a[d].iq() && BZ(b, c, a[d].Zy())) {
      return !0;
    }
  }
  return !1;
}
function EZ(a, b, c, d) {
  a = cZ(a.j, d);
  for (d = 0; d < a.length; d++) {
    var e;
    if (e = !a[d].iq()) {
      e = a[d], e = e.ob() ? e.el.getBoundingClientRect() : null, e = BZ(b, c, e);
    }
    if (e) {
      return !0;
    }
  }
  return !1;
}
function FZ(a, b, c, d) {
  var e = Jv.g;
  e = e.i ? e.i.Zy() : null;
  return BZ(b, c, e) ? !0 : a.Mc ? CZ(a, b, c, null) || CZ(a, b, c, 1) || CZ(a, b, c, 2) || CZ(a, b, c, 3) || DZ(a, b, c, null) || DZ(a, b, c, 1) || DZ(a, b, c, 2) || DZ(a, b, c, 3) || !d && (EZ(a, b, c, null) || EZ(a, b, c, 1) || EZ(a, b, c, 2) || EZ(a, b, c, 3)) ? !0 : !1 : !1;
}
function GZ(a) {
  let b = cZ(a.g, S.g);
  for (var c = 0; c < b.length; c++) {
    if (b[c].ou) {
      return !0;
    }
  }
  b = cZ(a.g, 1);
  for (c = 0; c < b.length; c++) {
    if (b[c].ou) {
      return !0;
    }
  }
  b = cZ(a.g, 2);
  for (c = 0; c < b.length; c++) {
    if (b[c].ou) {
      return !0;
    }
  }
  b = cZ(a.g, 3);
  for (a = 0; a < b.length; a++) {
    if (b[a].ou) {
      return !0;
    }
  }
  return !1;
}
function Sr(a, b, c) {
  b && (a = gZ(a, b, -1, c)) && (b.Cb && (c = Dk(b.Cb)) && L.kq(c), c = Um(b), a.Fo(b.offsetLeft + c.x, b.offsetTop + c.y, b.width, b.height));
}
function kZ(a, b, c) {
  let d;
  switch(b) {
    case 1:
      d = Uu();
      break;
    case 2:
      d = Vu();
      break;
    case 3:
      d = Wu();
      break;
    default:
      d = Tu(S.g);
  }
  let e = [], f = [];
  for (let n = 0; n < d.length; n++) {
    let p = d[n].lx();
    console.log("[MAC] serialize", p.strGUID);
    if (0 == p.arrMedia[0].bReencoded) {
      var k = UD(0, b) + p.arrMedia[0].strURL + ".mp4", l = {};
      l.mediatoPngPath = k.substring(k.indexOf("userfile")).replace(/\.[^/.]+$/, "");
      l.fileGUID = p.arrMedia[0].strURL;
      l.fileExtension = "webm";
      l.nId = p.nId;
      l.uDocType = c;
      f.push(l);
    }
    HZ(a.g, p.strGUID) ? console.log("[MAC] skip deleted", p.strGUID) : (k = UD(0, b), l = $I(0, b), null != p.serializedS3BasePath && null != p.serializedAnnotateResourceBasePath ? (k = p.serializedS3BasePath, l = p.serializedAnnotateResourceBasePath) : (p.serializedS3BasePath = k, p.serializedAnnotateResourceBasePath = l), p.posterUrl && (p.posterUrl = l + p.posterUrl), Ch() && !p.strAnnotationGuid && (p.strAnnotationGuid = a.$k), Ch() || -1 != p.annotationId || (p.annotationId = a.m), p.mediaUrl = 
    k + p.mediaUrl, p.uDocType = c ? c : 1, e.push(p));
  }
  return {arrAttachment:e, arrAttachmentForThumbnail:f};
}
function IZ(a) {
  var b = Jv.i;
  let c = new Pr();
  c.zq();
  Bm(c, {strFN:M.B, strLN:M.C, strOwnerGuid:Bh(),});
  c.xb();
  c.Fa({arrMedia:b});
  c.Io = Cp.j;
  if (!Sm(c)) {
    if (ml(P)) {
      c.offsetLeft = a.A.x, c.offsetTop = a.A.y;
    } else {
      a = window.scrollX + (window.innerWidth - 250) / 2;
      b = window.scrollY + (window.innerHeight - 140) / 2;
      var d = Ck(a, b);
      d && Tl() && (L.kq(d), d = Fk(d), c.Cb = d, b = Ek(a, b, c.Cb), a = b.x, b = b.y);
      c.offsetLeft = a;
      c.offsetTop = b;
    }
  }
  el(c);
  Xu(c, !1);
  console.log("[MAC] Added recorded media data as new attachment before save", c.Na());
}
function vZ(a, b) {
  var c = cZ(a.g, b);
  for (var d = 0; d < c.length; d++) {
    c[d].kn();
  }
  c = cZ(a.i, b);
  for (d = 0; d < c.length; d++) {
    c[d].kn();
  }
  a = cZ(a.j, b);
  for (b = 0; b < a.length; b++) {
    a[b].Sa(!1);
  }
}
function uZ(a, b) {
  var c = cZ(a.g, b);
  for (var d = 0; d < c.length; d++) {
    c[d].show();
  }
  c = cZ(a.i, b);
  for (d = 0; d < c.length; d++) {
    c[d].show();
  }
  a = cZ(a.j, b);
  for (b = 0; b < a.length; b++) {
    a[b].Sa(!0);
  }
}
function Ap(a, b) {
  var c = cZ(a.g, b);
  for (var d = 0; d < c.length; d++) {
    for (var e = 0; e < c.length; e++) {
      c[e].gb();
    }
    c.splice(0, c.length);
    console.log("[MAC] disposed all media attachment UI and clear item list", c);
  }
  c = cZ(a.i, b);
  for (d = 0; d < c.length; d++) {
    for (e = 0; e < c.length; e++) {
      c[e].gb();
    }
    c.splice(0, c.length);
    console.log("[MAC] disposed all media attachment UI and clear item list", c);
  }
  a = cZ(a.j, b);
  for (b = 0; b < a.length; b++) {
    for (c = 0; c < a.length; c++) {
      a[c].U();
    }
    a.splice(0, a.length);
    console.log("[IAC] disposed all image UI and clear item list", a);
  }
}
function JZ(a, b, c) {
  let d = [];
  a = cZ(a.g, c);
  for (c = 0; c < a.length; c++) {
    let e = a[c].kb;
    if (e) {
      let f = e.S;
      -1 != f && f == b && (a[c].uk(), d.push(e.Na()));
    }
  }
  return d;
}
function KZ(a, b, c, d, e) {
  let f = [];
  cZ(a.g, e).forEach(k => {
    let l = k.kb;
    if (l) {
      var n = l.S;
      if (-1 != n && n == b) {
        n = l.A.scale;
        let p = l.offsetLeft - l.A.x, t = l.offsetTop - l.A.y;
        p = p / n + 11;
        t = t / n + 11;
        p > c || t > d ? (k.uk(), f.push(l.Na())) : k.Yn(jZ(a, e));
      }
    }
  });
  return f;
}
function LZ(a, b) {
  if (b && a.l) {
    b = a.l;
    var c = (c = Oo(S)) ? c.Ed.indexOf(b) : -1;
    var d = cZ(a.g, S.g), e = null, f = -1;
    for (let k = 0; k < d.length; k++) {
      if (d[k].kb && b.Ui(d[k].kb)) {
        e = d[k];
        f = k;
        break;
      }
    }
    -1 != c && e && (a.Qf = b.Na(), a.Qf.annotationId = b.pg, e.gb(), d.splice(f, 1), Su(b), yw(L.mb()) && Jv.B.splice(c, 1), console.log("Deleted attachment at index", c));
  } else {
    a.l = null;
  }
}
function mZ(a, b) {
  Kn("", b, "CANCEL", "DELETE", function() {
    LZ(a, !1);
  }, function() {
    LZ(a, !0);
    if (yw(L.mb())) {
      lw.g(), Ov(L.mb(), !0);
    } else {
      let c = An(), d = a.Qf.strAnnotationGuid;
      !c || d && (c == d || !Us(c)) || d && c != d ? null == a.Qf || d ? rw(a, !0) : rw(a, !1) : (lw.g(), mw(L.mb(), !1, !1));
    }
  });
}
function nZ(a, b) {
  Kn("", b, "CANCEL", "DELETE", function() {
    MZ(a, !1);
  }, function() {
    MZ(a, !0);
    if (yw(L.mb())) {
      lw.g(), Ov(L.mb(), !0);
    } else {
      let c = An(), d = a.Ef.strAnnotationGuid;
      !c || d && (c == d || !Us(c)) || d && c != d ? null != a.Ef && A(d) ? rw(a, !1) : rw(a, !0) : (lw.g(), mw(L.mb(), !1, !1));
    }
  });
}
function NZ(a, b) {
  a = cZ(a.g, S.g);
  if (0 < a.length) {
    for (let c = a.length - 1; 0 <= c; c--) {
      if (-1 != b.indexOf(a[c].kb.ma)) {
        let d = a[c].kb;
        d && Su(d);
        a[c].gb();
        a.splice(c, 1);
      }
    }
  }
}
function OZ(a, b) {
  let c = cZ(a.g, S.g);
  for (let d = c.length - 1; 0 <= d; d--) {
    -1 != b.indexOf(c[d].kb.ma) && (c[d].kb.li().Dk = !0, IO(c[d], c[d].kb.li(), dZ(a), eZ(a)));
  }
}
function PZ(a) {
  var b = S.g, c = cZ(a.g, b);
  for (var d = 0; d < c.length; d++) {
    if (c[d].ce) {
      return !0;
    }
  }
  c = cZ(a.j, b);
  for (d = 0; d < c.length; d++) {
    if (c[d].ce) {
      return !0;
    }
  }
  b = cZ(a.i, b);
  for (c = 0; c < b.length; c++) {
    if (b[c].ce) {
      return !0;
    }
  }
  return a.Xm;
}
function Xr(a, b, c) {
  if (b) {
    a = hZ(a, b, -1, c);
    b.Cb && (c = Dk(b.Cb)) && L.kq(c);
    var d = Um(b);
    c = a;
    var e = b.offsetLeft + d.x;
    d = b.offsetTop + d.y;
    c.V(b.width, b.height);
    c.ga(e, d);
    vz(a);
  }
}
function hZ(a, b, c, d) {
  var e = document.body;
  a.D && a.D.Ea && (e = a.D.Bb);
  null == d && (1 == S.g ? d = 1 : 3 == S.g ? d = 3 : 2 == S.g && (d = 2));
  let f = M.v + a.Rl + "image/";
  d && (f = ZI(0, d));
  e = new yA(fZ(a, d), a.N, e);
  e.jb(a.C);
  xA(e, b, f);
  e.Sa(jZ(a, d));
  AZ(a.j, e, c, d);
  return e;
}
function hJ(a, b, c) {
  let d;
  switch(b) {
    case 1:
      d = Fu();
      break;
    case 2:
      d = Gu();
      break;
    case 3:
      d = Hu();
      break;
    default:
      d = Eu();
  }
  let e = [];
  for (let f = 0; f < d.length; f++) {
    let k = d[f].lx();
    console.log("[IAC] serialize", k.strGUID);
    if (HZ(a.j, k.strGUID)) {
      console.log("[IAC] skip deleted", k.strGUID);
      continue;
    }
    let l = ZI(0, b);
    k.serializedAnnotateResourceBasePath ? l = k.serializedAnnotateResourceBasePath : k.serializedAnnotateResourceBasePath = l;
    k.posterUrl = l + k.strImageName;
    Ch() && !k.strAnnotationGuid && (k.strAnnotationGuid = a.$k);
    Ch() || -1 != k.annotationId || (k.annotationId = a.m);
    k.uDocType = c ? c : 1;
    e.push(k);
  }
  return e;
}
function QZ(a) {
  Kn("", "Delete image? This operation cannot be undone.", "CANCEL", "DELETE", function() {
    RZ(a, !1);
  }, function() {
    RZ(a, !0);
    if (yw(L.mb())) {
      lw.g(), Ov(L.mb(), !0);
    } else {
      let b = An(), c = a.Pf.strAnnotationGuid;
      !b || c && (b == c || !Us(b)) || c && b != c ? null == a.Pf || c ? rw(a, !0) : rw(a, !1) : (lw.g(), mw(L.mb(), !1, !1));
    }
  });
}
function RZ(a, b) {
  if (b) {
    b = a.l;
    var c = (c = Oo(S)) ? c.Ld.indexOf(b) : -1;
    var d = cZ(a.j, S.g);
    -1 != c && null != d[c] && null != d[c].Ta() && d[c].Ta().Ui(b) && (a.Pf = b.Na(), d[c].U(), d.splice(c, 1), Du(b), console.log("[IAC] Deleted image attachment at index", c));
    if (yw(L.mb())) {
      a = Kv;
      for (c = 0; c < a.o.length && a.o[c].ta != b.ta;) {
        c++;
      }
      c < a.o.length && (console.log("remove image from unsaved array ", b.ta), a.o.splice(c, 1));
    }
  } else {
    a.l = null;
  }
}
function SZ(a, b) {
  a = cZ(a.j, S.g);
  if (0 < a.length) {
    for (let c = a.length - 1; 0 <= c; c--) {
      if (-1 != b.indexOf(a[c].aA())) {
        let d = a[c].Ta();
        d && Du(d);
        a[c].U();
        a.splice(c, 1);
      }
    }
  }
}
function TZ(a, b, c) {
  let d = [];
  a = cZ(a.j, c);
  for (c = 0; c < a.length; c++) {
    let e = a[c].Ta();
    if (e) {
      let f = e.S;
      -1 != f && f == b && (a[c].uk(), d.push(e.Na()));
    }
  }
  return d;
}
function UZ(a, b, c, d, e) {
  let f = Eu(e), k = [], l = cZ(a.j, e);
  for (let p = 0; p < l.length; p++) {
    var n = f[p].S;
    if (-1 != n && n == b) {
      n = f[p].A.scale;
      let t = f[p].offsetLeft - f[p].A.x, x = f[p].offsetTop - f[p].A.y;
      t = t / n + 11;
      x = x / n + 11;
      t > c || x > d ? (l[p].uk(), k.push(f[p].Na())) : l[p].Yn(jZ(a, e));
    }
  }
  return k;
}
function iZ(a, b, c, d) {
  if (b.sn) {
    return null;
  }
  let e = document.body;
  a.D && a.D.Ea && (e = a.D.Bb);
  null == d && (1 == S.g ? d = 1 : 3 == S.g ? d = 3 : 2 == S.g && (d = 2));
  let f = M.o + "/" + a.Rl + "video/", k = eZ(a);
  d && (f = aJ(0, d), k = oZ(a, d));
  b = new QO(a, fZ(a, d), e, d, b);
  LO(b, "arrUploadedVideoAttachments", f, k);
  jZ(a, d) ? b.show() : b.kn();
  b.ra && (b.ra.style.zIndex = a.o);
  AZ(a.i, b, c, d);
  return b;
}
function as(a, b, c) {
  b && (a = iZ(a, b, -1, c)) && (b.Cb && (c = Dk(b.Cb)) && L.kq(c), c = Um(b), a.Fo(b.offsetLeft + c.x, b.offsetTop + c.y, b.width, b.height));
}
function gJ(a, b, c) {
  let d;
  switch(b) {
    case 1:
      d = Nu();
      break;
    case 2:
      d = Ou();
      break;
    case 3:
      d = Pu();
      break;
    default:
      d = Mu();
  }
  let e = [];
  for (let f = 0; f < d.length; f++) {
    let k = d[f].lx();
    console.log("[VAC] serialize", k.strGUID);
    if (HZ(a.i, k.strGUID)) {
      console.log("[VAC] skip deleted", k.strGUID);
      continue;
    }
    let l = aJ(0, b), n = bJ(0, b);
    null != k.serializedS3BasePath && k.serializedAnnotateResourceBasePath ? (l = k.serializedS3BasePath, n = k.serializedAnnotateResourceBasePath) : (k.serializedS3BasePath = l, k.serializedAnnotateResourceBasePath = n);
    k.posterUrl = n + k.posterUrl;
    k.mediaUrl = k.mediaUrl && k.videoServerType == Rg.Ds ? it(k.strURL) : l + k.mediaUrl;
    Ch() && !k.strAnnotationGuid && (k.strAnnotationGuid = a.$k);
    Ch() || -1 != k.annotationId || (k.annotationId = a.m);
    k.uDocType = c ? c : 1;
    e.push(k);
  }
  return e;
}
function MZ(a, b) {
  if (b) {
    b = a.l;
    var c = (c = Oo(S)) ? c.Gd.indexOf(b) : -1;
    var d = cZ(a.i, S.g);
    -1 != c && null != d[c] && null != d[c].kb && d[c].kb.Ui(b) && (a.Ef = b.Na(), a.Ef.annotationId = b.pg, d[c].gb(), d.splice(c, 1), Lu(b), console.log("[VAC] Deleted video attachment at index", c));
    if (yw(L.mb())) {
      a = Kv;
      for (c = 0; c < a.s.length && a.s[c].ta != b.ta;) {
        c++;
      }
      c < a.s.length && (console.log("remove video from unsaved array ", b.ta), a.s.splice(c, 1));
    }
  } else {
    a.l = null;
  }
}
function VZ(a, b) {
  a = cZ(a.i, S.g);
  if (0 < a.length) {
    for (let c = a.length - 1; 0 <= c; c--) {
      if (-1 != b.indexOf(a[c].kb.ma)) {
        let d = a[c].kb;
        d && Lu(d);
        a[c].gb();
        a.splice(c, 1);
      }
    }
  }
}
function WZ(a, b, c) {
  let d = [];
  a = cZ(a.i, c);
  for (c = 0; c < a.length; c++) {
    let e = a[c].kb;
    if (e) {
      let f = e.S;
      -1 != f && f == b && (a[c].uk(), d.push(e.Na()));
    }
  }
  return d;
}
function XZ(a, b, c, d, e) {
  let f = Mu(e), k = [], l = cZ(a.i, e);
  for (let p = 0; p < l.length; p++) {
    var n = f[p].S;
    if (-1 != n && n == b) {
      n = f[p].A.scale;
      let t = f[p].offsetLeft - f[p].A.x, x = f[p].offsetTop - f[p].A.y;
      t = t / n + 11;
      x = x / n + 11;
      t > c || x > d ? (l[p].uk(), k.push(f[p].Na())) : l[p].Yn(jZ(a, e));
    }
  }
  return k;
}
function YZ(a, b, c) {
  a.C = b;
  null != c && (a.o = c);
  ZZ(a.j, a.C);
  ZZ(a.g, a.o);
  ZZ(a.i, a.o);
}
function $Z(a) {
  var b = L.Pb();
  if (S) {
    var c = cZ(b.i, a), d = cZ(b.j, a);
    cZ(b.g, a).forEach(e => {
      let f = e.kb;
      NO(e);
      let k = Um(f);
      e.Fo(f.offsetLeft + k.x, f.offsetTop + k.y, f.width, f.height);
    });
    c.forEach(e => {
      let f = e.kb;
      NO(e);
      let k = Um(f);
      e.Fo(f.offsetLeft + k.x, f.offsetTop + k.y, f.width, f.height);
    });
    d.forEach(e => {
      let f = e.Ta();
      var k = e.l.src;
      k && 0 < k.length && (0 == e.l.naturalHeight || 0 == e.l.naturalWidth) && (e.l.src = "", e.l.src = k);
      var l = Um(f);
      k = f.offsetLeft + l.x;
      l = f.offsetTop + l.y;
      e.V(f.width, f.height);
      e.ga(k, l);
      wA(e, !0);
      vz(e);
    });
    si() ? Tr(b, b.D) : b.A && b.wf(b.A);
  }
}
function a_(a) {
  if (a && Object.keys(a).length) {
    var b = S;
    if (b.i) {
      b = b.i;
      for (var c = 0; c < b.Ed.length; c++) {
        var d = b.Ed[c].eq();
        d in a && (b.Ed[c].Lv(a[d]), b.Ed[c].Mv(-1));
      }
      for (c = 0; c < b.Ld.length; c++) {
        d = b.Ld[c].eq(), d in a && (b.Ld[c].Lv(a[d]), b.Ld[c].Mv(-1));
      }
      for (c = 0; c < b.Gd.length; c++) {
        d = b.Gd[c].eq(), d in a && (b.Gd[c].Lv(a[d]), b.Gd[c].Mv(-1));
      }
    }
  }
}
class b_ extends ph {
  constructor() {
    super();
    this.m = -1;
    this.$k = null;
    this.Rl = "";
    this.B = -1;
    this.s = null;
    this.J = !1;
    this.Qf = null;
    this.g = new c_();
    this.Ef = null;
    this.i = new c_();
    this.Pf = null;
    this.j = new c_();
    this.Mc = !0;
    this.qu = !1;
    this.MD = null;
    this.u = this.v = !1;
    this.hj = this.gj = this.$i = this.Tl = null;
    this.N = this.G.bind(this);
    this.l = null;
    this.yE = this.M.bind(this);
    this.A = this.D = this.po = null;
    this.Xm = !1;
    this.gB = !0;
    this.C = "2147483635";
    this.o = "2147483640";
  }
  wf(a) {
    if (a && a.height && a.width && !(0 >= a.height && 0 >= a.width)) {
      this.A = a;
      a = Tu(S.g);
      var b = cZ(this.g, S.g);
      for (var c = 0; c < a.length; c++) {
        sZ(this, a[c], b, c);
      }
      if (2 == S.g) {
        a = Uu();
        b = cZ(this.g, 1);
        for (c = 0; c < a.length; c++) {
          sZ(this, a[c], b, c);
        }
        a = Wu();
        b = cZ(this.g, 3);
        for (c = 0; c < a.length; c++) {
          sZ(this, a[c], b, c);
        }
      } else if (3 == S.g) {
        a = Uu();
        b = cZ(this.g, 1);
        for (c = 0; c < a.length; c++) {
          sZ(this, a[c], b, c);
        }
        a = Vu();
        b = cZ(this.g, 2);
        for (c = 0; c < a.length; c++) {
          sZ(this, a[c], b, c);
        }
      }
      a = Mu();
      b = cZ(this.i, S.g);
      for (c = 0; c < a.length; c++) {
        tZ(this, a[c], b, c);
      }
      if (2 == S.g) {
        a = Nu();
        b = cZ(this.i, 1);
        for (c = 0; c < a.length; c++) {
          tZ(this, a[c], b, c);
        }
        a = Pu();
        b = cZ(this.i, 3);
        for (c = 0; c < a.length; c++) {
          tZ(this, a[c], b, c);
        }
      } else if (3 == S.g) {
        a = Nu();
        b = cZ(this.i, 1);
        for (c = 0; c < a.length; c++) {
          tZ(this, a[c], b, c);
        }
        a = Ou();
        b = cZ(this.i, 2);
        for (c = 0; c < a.length; c++) {
          tZ(this, a[c], b, c);
        }
      }
    }
  }
  dl() {
    var a = Tu(S.g), b = cZ(this.g, S.g);
    for (var c = 0; c < a.length; c++) {
      wZ(a[c], b, c);
    }
    if (2 == S.g) {
      a = Uu();
      b = cZ(this.g, 1);
      for (c = 0; c < a.length; c++) {
        wZ(a[c], b, c);
      }
      a = Wu();
      b = cZ(this.g, 3);
      for (c = 0; c < a.length; c++) {
        wZ(a[c], b, c);
      }
    } else if (3 == S.g) {
      a = Uu();
      b = cZ(this.g, 1);
      for (c = 0; c < a.length; c++) {
        wZ(a[c], b, c);
      }
      b = cZ(this.g, 2);
      a = Vu();
      for (c = 0; c < a.length; c++) {
        wZ(a[c], b, c);
      }
    }
    a = Mu();
    b = cZ(this.i, S.g);
    for (c = 0; c < a.length; c++) {
      xZ(a[c], b, c);
    }
    if (2 == S.g) {
      a = Nu();
      b = cZ(this.i, 1);
      for (c = 0; c < a.length; c++) {
        xZ(a[c], b, c);
      }
      a = Pu();
      b = cZ(this.i, 3);
      for (c = 0; c < a.length; c++) {
        xZ(a[c], b, c);
      }
    } else if (3 == S.g) {
      a = Nu();
      b = cZ(this.i, 1);
      for (c = 0; c < a.length; c++) {
        xZ(a[c], b, c);
      }
      a = Ou();
      b = cZ(this.i, 2);
      for (c = 0; c < a.length; c++) {
        xZ(a[c], b, c);
      }
    }
  }
  sk(a) {
    let b = this.s;
    a && (3 != a || L.mb().Ja() || (a = 1), (a = lZ(a)) && (b = a.strPublisherGuid));
    return b;
  }
  yg(a, b) {
    let c = Tu(b), d = cZ(this.g, b);
    for (let k = 0; k < c.length; k++) {
      var e = c[k], f = a;
      let l = !1;
      e.bj && !e.bj.Dk && 1 == f[fM(e.bj)] && (l = e.bj.Dk = !0);
      e.Ij && !e.Ij.Dk && 1 == f[fM(e.Ij)] && (l = e.Ij.Dk = !0);
      l && d.length >= k + 1 && (IO(d[k], c[k].li(), UD(0, b), eZ(this)), this.Xm = !0);
    }
  }
  Kv(a, b, c, d) {
    let e = jZ(this, d);
    if (a && 0 < a.length) {
      var f = cZ(this.g, d);
      for (var k = 0; k < a.length; k++) {
        var l = new Pr();
        l.Fa(a[k]);
        for (let n = 0; n < f.length; n++) {
          if (l.Ui(f[n].kb)) {
            f[n].Yn(e);
            break;
          }
        }
      }
    }
    a = cZ(this.i, d);
    if (c && 0 < c.length) {
      for (f = 0; f < c.length; f++) {
        for (k = new Zr(), k.Fa(c[f]), l = 0; l < a.length; l++) {
          if (k.Ui(a[l].kb)) {
            a[l].Yn(e);
            break;
          }
        }
      }
    }
    c = cZ(this.j, d);
    if (b && 0 < b.length) {
      for (d = 0; d < b.length; d++) {
        for (a = new Ur(), a.Fa(b[d]), f = 0; f < c.length; f++) {
          if (a.Ui(c[f].Ta())) {
            c[f].Yn(e);
            break;
          }
        }
      }
    }
  }
  M(a, b, c, d, e) {
    if (e) {
      this.po = a;
      eB = {bLink:d, bDownload:c, bDelete:b};
      null == GA && iB();
      a = document.getElementById("annotate-highlight-plugin-media-popup-link");
      eB && eB.bLink ? (a.style.removeProperty("opacity"), a.style.cursor = "pointer") : (a.style.opacity = "0.44", a.style.cursor = "default");
      a = document.getElementById("annotate-highlight-plugin-media-popup-download");
      eB && eB.bDownload ? (a.style.removeProperty("opacity"), a.style.cursor = "pointer") : (a.style.opacity = "0.44", a.style.cursor = "default");
      a = document.getElementById("annotate-highlight-plugin-media-popup-delete");
      eB && eB.bDelete ? (a.style.removeProperty("opacity"), a.style.cursor = "pointer") : (a.style.opacity = "0.44", a.style.cursor = "default");
      let f, k;
      a = L.Pb();
      A(a) || (a = a.po.ug.getBoundingClientRect(), a.left + HA + 2 < Math.floor(window.visualViewport.width) ? f = a.left : f = Math.floor(window.visualViewport.width) - HA - 2, a.top + IA < Math.floor(window.visualViewport.height) ? k = a.top : k = Math.floor(window.visualViewport.height) - IA, GA.style.left = f + "px", GA.style.top = k + "px", GA.style.width = HA + "px", GA.style.height = IA + "px", GA.style.display = "block", RA(!0, "transparent"));
    } else {
      null != this.po && this.po.kb.ma == a.kb.ma && dp();
    }
  }
  U() {
    Ap(this, ql());
    Ap(this, 1);
    Ap(this, 2);
    Ap(this, 3);
    Ru();
    var a = S;
    a.i && Bp(a.i);
    a = S;
    a.Ya && Bp(a.Ya);
    a = S;
    a.La && Bp(a.La);
    console.log("[MAC] cleared attachment model list");
    this.Qf = null;
    Cu();
    a = S;
    a.i && (a.i.Ld = []);
    a = S;
    a.Ya && (a.Ya.Ld = []);
    a = S;
    a.La && (a.La.Ld = []);
    console.log("[IAC] cleared attachment model list");
    this.Pf = null;
    Ku();
    a = S;
    a.i && Dp(a.i);
    a = S;
    a.Ya && Dp(a.Ya);
    a = S;
    a.La && Dp(a.La);
    console.log("[VAC] cleared video model list");
    this.Ef = null;
  }
  G(a) {
    this.l = a;
    QZ(this);
  }
  tv(a) {
    let b = new Zr();
    b.Fa(a);
    b.Io = Cp.j;
    if (!Sm(b)) {
      if (ml(P)) {
        b.offsetLeft = this.A.x, b.offsetTop = this.A.y;
      } else {
        a = window.scrollX + (window.innerWidth - 250) / 2;
        var c = window.scrollY + (window.innerHeight - 140) / 2, d = Ck(a, c);
        d && Tl() && (L.kq(d), d = Fk(d), b.Cb = d, c = Ek(a, c, b.Cb), a = c.x, c = c.y);
        b.offsetLeft = a;
        b.offsetTop = c;
      }
    }
    el(b);
    Qu(b, !1);
    console.log("[VAC] Added uploaded media data as new attachment before save", b.Na());
  }
}
function cZ(a, b) {
  let c = a.i;
  if (b) {
    switch(b) {
      case 1:
        c = a.g;
        break;
      case 2:
        c = a.l;
        break;
      case 3:
        c = a.j;
    }
  }
  return c;
}
function AZ(a, b, c, d) {
  d || (d = S.g);
  a = cZ(a, d);
  -1 == c ? a.push(b) : a.splice(c, 0, b);
}
function HZ(a, b) {
  a = cZ(a, S.g);
  for (let c = 0; c < a.length; c++) {
    if (a[c] && a[c].aA() == b && a[c].iq()) {
      return !0;
    }
  }
  return !1;
}
function ZZ(a, b) {
  let c = d => {
    d.jb ? d.jb(b) : d.ra && (d.ra.style.zIndex = b);
    d.Jc && d.Jc.jb(b);
  };
  a.i.forEach(d => c(d));
  a.g.forEach(d => c(d));
  a.l.forEach(d => c(d));
  a.j.forEach(d => c(d));
}
class c_ {
  constructor() {
    this.i = [];
    this.g = [];
    this.l = [];
    this.j = [];
  }
}
;function XB(a) {
  var b = WB, c = document.getElementById("annotate-highlight-plugin-keyboard");
  a ? (d_(b), e_(b, !0), c && (c.style.backgroundColor = "#C0C0C0")) : b.j && 5 == b.j.i && (DQ(b.j, !1), f_(b, !1), e_(b, !1), c && (c.style.backgroundColor = ""));
}
function g_(a) {
  a.l = new Nj(null);
  a.l.he("AnnotateExtensionKeyboardHandler");
  a.l.Mb(200);
  a.l.Qc(24);
  zj(a.l, "#eceff0");
  tj(a.l, "fixed");
  a.l.ga(0, 0);
  a.l.ja();
  a.l.jb("2147483647");
  a.o = new Nj(null);
  R(a.o, "extension_icon");
  R(a.o, "extension_icon-move");
  a.o.uc("Drag to move");
  a.o.V(24, 24);
  a.o.xe("#000000");
  sj(a.o, "pointer");
  a.o.ga(0, 88);
  a.o.el.addEventListener("pointerdown", b => {
    b.preventDefault();
    h_(a, !0);
    a.Eb = b.clientX;
    a.Ib = b.clientY;
    window.addEventListener("touchmove", a.ba, {capture:!0, passive:!1});
    window.addEventListener("pointermove", a.N, {capture:!0, passive:!1});
    window.addEventListener("pointerup", a.s, {capture:!0, passive:!1});
    window.addEventListener("pointercancel", a.s, {capture:!0, passive:!1});
  });
  a.l.Z(a.o);
}
function h_(a, b) {
  a.m && (b ? a.m.pb() : a.m.ja());
}
function e_(a, b) {
  b ? (window.addEventListener("pointerdown", a.J, {capture:!0, passive:!1}), window.addEventListener("pointerup", a.G, {capture:!0, passive:!1})) : (window.removeEventListener("pointerdown", a.J, {capture:!0}), window.removeEventListener("pointerup", a.G, {capture:!0}));
}
function f_(a, b) {
  if (a.l) {
    if (!document.getElementById("AnnotateExtensionKeyboardHandler")) {
      let c = document.getElementById("AnnotateExtensionIframe");
      c && c.insertAdjacentElement("afterend", a.l.el);
    }
    b ? a.l.pb() : a.l.ja();
  }
}
function i_(a, b) {
  if (BQ(a.j)) {
    if (b) {
      if (Sn(), DQ(a.j, !0), f_(a, !0), a.C) {
        if (a.C) {
          b = a.j;
          var c = a.l.rd(), d = a.l.vd() + 24;
          c = 0 > c ? 0 : c > window.innerHeight - b.g.offsetHeight ? window.innerHeight - b.g.offsetHeight : c;
          d = 0 > d ? 0 : d > window.innerWidth - b.g.offsetWidth ? window.innerWidth - b.g.offsetWidth : d;
          0 <= c && 0 <= d && c <= window.innerHeight - b.g.offsetHeight && d <= window.innerWidth - b.g.offsetWidth && (b.g.style.top = c + "px", b.g.style.left = d + "px", JQ(b));
        }
      } else {
        IQ(a.j);
      }
    } else {
      DQ(a.j, !1), f_(a, !1);
    }
  }
  clearTimeout(a.i);
  a.i = -1;
}
function j_(a) {
  EQ(a.j);
  i_(a, !1);
}
function k_(a, b) {
  5 == a.j.i && (CQ(a.j, b), a.g = null);
}
function d_(a) {
  a.B = !1;
  a.g = null;
  a.g = {};
  a.g.uPanelType = 5;
  a.j.i = 5;
  BQ(a.j) ? a.j.j ? (LQ(a.j, "700px", "200px"), k_(a, a.g), a.g = null) : (FQ(a.j), Vn("Loading...", null)) : (j_(a), FQ(a.j), Vn("Loading...", null));
  LQ(a.j, "700px", "200px");
  i_(a, !1);
  a.i = setTimeout(() => {
    Sn();
    clearTimeout(a.i);
    a.i = -1;
  }, 3E4);
}
class l_ extends EventTarget {
  constructor() {
    var a = mC;
    super();
    this.j = a;
    this.v = this.v.bind(this);
    this.u = this.u.bind(this);
    this.j && (this.j.addEventListener(HQ.g, this.v), this.j.addEventListener(HQ.i, this.u));
    g_(this);
    this.N = this.ya.bind(this);
    this.s = this.pa.bind(this);
    this.M = this.g = null;
    this.C = !1;
    this.J = this.ia.bind(this);
    this.G = this.ea.bind(this);
  }
  ia(a) {
    5 == this.j.i && a.target != this.j.g && a.target != this.o && h_(this, !0);
  }
  ea(a) {
    5 == this.j.i && a.target != this.j.g && a.target != this.o && h_(this, !1);
  }
  ba(a) {
    a.preventDefault();
  }
  ya(a) {
    if (kh(a)) {
      var b = parseFloat(this.l.vd().toString()) + (a.clientX - this.Eb), c = parseFloat(this.l.rd().toString()) + (a.clientY - this.Ib);
      b >= window.visualViewport.offsetLeft && b <= window.visualViewport.offsetLeft + window.visualViewport.width - this.j.g.offsetWidth - 24 && (this.l.Nd(b), this.Eb = a.clientX);
      c >= window.visualViewport.offsetTop && c <= window.visualViewport.offsetTop + window.visualViewport.height - this.j.g.offsetHeight && (this.l.Ee(c), this.Ib = a.clientY);
      this.j.g.style.left = this.l.vd() + 24 + "px";
      this.j.g.style.top = this.l.rd() + "px";
      this.m.Nd(this.l.vd() + 24);
      this.m.Ee(this.l.rd());
      a.preventDefault();
      this.C = !0;
    } else {
      this.s();
    }
  }
  pa() {
    h_(this, !1);
    window.removeEventListener("pointerup", this.s, {capture:!0});
    window.removeEventListener("pointercancel", this.s, {capture:!0});
    window.removeEventListener("touchmove", this.ba, {capture:!0});
    window.removeEventListener("pointermove", this.N, {capture:!0});
  }
  u(a) {
    5 == this.j.i && (!this.m && this.j.g && (this.m = new Nj(null), R(this.m, "AnnotateKeyboardOverlay"), this.m.Mb(this.j.g.offsetHeight), this.m.Qc(this.j.g.offsetWidth), this.m.ja(), document.body.appendChild(this.m.el)), (a = a.detail) && a.top && a.left && (this.l.Ee(parseFloat(a.top)), this.l.Nd(parseFloat(a.left) - 24), this.m && (this.m.Nd(parseFloat(a.left)), this.m.Ee(parseFloat(a.top)))));
  }
  v(a) {
    a = a.detail;
    var b = !1;
    a && 5 == this.j.i && (b = "uPanelType" in a ? 5 == a.uPanelType : !0);
    if (b && a.chromeExtensionCommand) {
      switch(parseInt(a.chromeExtensionCommand)) {
        case Kg.Mq:
          i_(this, !0);
          break;
        case Kg.Lq:
          i_(this, !1);
          break;
        case Kg.MK:
          var c = a.OriginalObject;
          let d = this.M.Jr();
          if (d && !d.ko) {
            b = !0;
            switch(a.KeyCode) {
              case 8:
                null == c && d.kz("Backspace");
                break;
              case 37:
              case 39:
                null == c && (d.kz(a.KeyIdentifier), b = !1);
                break;
              case 13:
                d.pI();
                b = !1;
                break;
              case 262145:
                c = a.KeyIdentifier;
                "asin" == c ? (c = "arcsin", a.KeyIdentifier = "arcsin") : "acos" == c ? (c = "arccos", a.KeyIdentifier = "arccos") : "atan" == c && (c = "arctan", a.KeyIdentifier = "arctan");
                "sin" == c || "cos" == c || "tan" == c || "sinh" == c || "cosh" == c || "tanh" == c || "arcsin" == c || "arccos" == c || "arctan" == c || "mean" == c || "median" == c || "abs" == c || "max" == c || "floor" == c || "ceil" == c || "min" == c || "ln" == c ? (d.write("\\"), d.write(a.KeyIdentifier), d.cmd("(")) : "log_10" == a.KeyIdentifier ? (d.cmd("log"), d.cmd("_"), d.cmd("10"), d.cmd("(")) : "log_" == a.KeyIdentifier ? (d.cmd("log"), d.cmd("_"), d.cmd("("), d.kz("Left"), d.kz("Down")) : 
                "x^2" == a.KeyIdentifier ? (d.cmd("^"), d.cmd("2")) : d.cmd(a.KeyIdentifier);
                break;
              default:
                d.cmd(a.KeyIdentifier);
            }
            b && d.hL();
          }
          break;
        case Kg.up:
          null != this.g && k_(this, this.g);
          break;
        default:
          i_(this, !1);
      }
    }
  }
  U() {
    clearTimeout(this.i);
    this.i = -1;
    this.l && this.l.U();
    this.m && this.m.U();
    this.m = this.l = this.o = null;
  }
}
;function Sw() {
  var a = m_;
  n_(a) && (a.j.i = 9, BQ(a.j) ? a.j.j ? (o_(a, a.g), a.g = null) : FQ(a.j) : (p_(a), FQ(a.j)), RQ(a.j), q_(a, !1), Vn("Loading...", null), a.i = setTimeout(() => {
    Sn();
    clearTimeout(a.i);
    a.i = -1;
  }, 3E4));
}
function q_(a, b) {
  BQ(a.j) && 9 == a.j.i && (b ? (Sn(), RA(!0), DQ(a.j, !0), NQ(a.j)) : (RA(!1), DQ(a.j, !1)));
  clearTimeout(a.i);
  a.i = -1;
}
function p_(a) {
  EQ(a.j);
  q_(a, !1);
}
function n_(a) {
  var b = Qs();
  if (null == b) {
    return Kn("", "File not found. Create new?", "CANCEL", "CREATE", null, function() {
      lt(-1, "");
      mt(null);
      Ql.v = !0;
      L.by(null);
    }), !1;
  }
  a.g = null;
  a.g = {};
  a.g.uPanelType = 9;
  a.g.userId = M.s;
  a.g.strUserGuid = Bh();
  a.g.sessionId = M.G;
  var c = {};
  c.strGUID = b.ma;
  c.uVersionNo = b.bi;
  c.uExportPDFStatus = b.Iz;
  c.strPDFDownloadLink = b.Cz;
  c.uExportedPDFVersionNo = b.Jz;
  c.uExportingStage = b.QD;
  a.g.annotationFileInfo = c;
  return !0;
}
function o_(a, b) {
  9 == a.j.i && (CQ(a.j, b), a.g = null);
}
function r_() {
  var a = m_;
  9 == a.j.i && lC(a.j) && null != An() && n_(a) && (a.g.bUpdateModel = !0, o_(a, a.g), a.g = null);
}
class s_ extends ph {
  constructor() {
    var a = mC;
    super();
    this.j = a;
    this.l = this.l.bind(this);
    this.j && this.j.addEventListener(HQ.g, this.l);
  }
  l(a) {
    a = a.detail;
    var b = !1;
    a && 9 == this.j.i && (b = "uPanelType" in a ? 9 == a.uPanelType : !0);
    if (b && a.chromeExtensionCommand) {
      switch(parseInt(a.chromeExtensionCommand)) {
        case Kg.Mq:
          q_(this, !0);
          break;
        case Kg.Lq:
          q_(this, !1);
          break;
        case Kg.up:
          null != this.g && o_(this, this.g);
          break;
        case Kg.dL:
          b = Qs();
          b.Iz = a.uFileExportStatus;
          b.QD = a.uExportingStage;
          b.Cz = a.strPDFDownloadLink;
          b.Jz = a.uExportedPDFVersionNo;
          a = {};
          a.strGUID = b.ma;
          a.uExportPDFStatus = b.Iz;
          a.strPDFDownloadLink = b.Cz;
          a.uExportedPDFVersionNo = b.Jz;
          L.sa({type:"annotateWebannotationExportStatusEvent", evtData:a,}, null);
          break;
        default:
          q_(this, !1);
      }
    }
  }
  U() {
    clearTimeout(this.i);
    this.i = -1;
    RA(!1);
  }
}
;class t_ {
  Po() {
    return 0;
  }
  j() {
    return 0;
  }
  cl() {
    return 0;
  }
  di() {
    return 0;
  }
  jl() {
  }
  Yf() {
    return 0;
  }
  $g() {
    return 0;
  }
  v() {
    return 0;
  }
  u() {
    return 0;
  }
}
class u_ extends t_ {
  constructor() {
    var a = document.getElementsByClassName("kix-appview-editor")[0];
    super();
    this.g = a;
  }
  Po() {
    return this.g.scrollTop;
  }
  j() {
    return this.g.scrollLeft;
  }
  cl() {
    return this.g.scrollWidth;
  }
  di() {
    return this.g.scrollHeight;
  }
  jl(a, b) {
    this.g.scrollTo(a, b);
  }
  Yf() {
    return this.g.clientWidth;
  }
  $g() {
    return this.g.clientHeight;
  }
  v() {
    return this.g.getBoundingClientRect().left;
  }
  u() {
    return this.g.getBoundingClientRect().top;
  }
}
class v_ extends t_ {
  Po() {
    return window.scrollY;
  }
  j() {
    return window.scrollX;
  }
  cl() {
    return document.documentElement.scrollWidth;
  }
  di() {
    return document.documentElement.scrollHeight;
  }
  jl(a, b) {
    window.scrollTo(a, b);
  }
  Yf() {
    return document.documentElement.clientWidth;
  }
  $g() {
    return document.documentElement.clientHeight;
  }
  v() {
    return 0;
  }
  u() {
    return 0;
  }
}
class w_ {
  constructor(a, b, c) {
    this.x = a;
    this.top = b;
    this.bottom = c;
  }
}
class x_ extends t_ {
  constructor(a) {
    super();
    this.parent = a;
    this.height = this.width = this.Ln = this.Kn = this.Ug = this.Cj = 0;
  }
  cl() {
    return this.width;
  }
  di() {
    return this.height;
  }
  Yf() {
    return this.width;
  }
  $g() {
    return this.height;
  }
  yv() {
    return 0;
  }
  xv() {
    return 0;
  }
  wv() {
    return new DOMRect(this.Cj, this.Ug, this.width, this.height);
  }
}
function mY(a) {
  a.i = [];
  y_(a, a.g);
}
function nY(a) {
  if (a.i.length) {
    for (let b = 0; b < a.i.length; b++) {
      let c = a.i[b];
      if (c.g.clientWidth < 0.9 * document.documentElement.clientWidth || c.g.clientHeight < 0.9 * document.documentElement.clientHeight || nY(c)) {
        return !0;
      }
    }
  } else {
    return !1;
  }
}
function y_(a, b) {
  for (b = b.firstElementChild; null != b;) {
    var c = window.getComputedStyle(b);
    "auto" != c.overflowY && "scroll" != c.overflowY || b.clientHeight == b.scrollHeight || null == b.offsetParent ? y_(a, b) : (c = new lY(b, a), mY(c), a.i.push(c));
    b = b.nextElementSibling;
  }
}
function z_(a) {
  a.s = a.g.scrollWidth;
  a.l = a.g.scrollHeight;
  for (var b = 0; b < a.i.length; ++b) {
    z_(a.i[b]);
  }
  b = A_(a);
  let c = B_(a);
  for (let n = 0; n < b.length - 1; ++n) {
    let p = b[n];
    var d = b[n + 1];
    let t = d - p;
    if (0 == t) {
      continue;
    }
    let x = [];
    x.push(0);
    for (var e = 0; e < c.length; ++e) {
      var f = c[e];
      f.top < d && p < f.bottom && x.push(f.x);
    }
    x.push(a.cl());
    for (f = 0; f < x.length - 1; f += 2) {
      var k = x[f + 1] - x[f];
      if (0 == k) {
        continue;
      }
      let D = new x_(a);
      d = D;
      e = p;
      var l = t;
      d.Cj = x[f];
      d.Ug = e;
      d.width = k;
      d.height = l;
      d.Kn = 0;
      d.Ln = 0;
      a.B.push(D);
    }
  }
  C_(a);
  D_(a);
}
function C_(a) {
  let b = a.B;
  b = b.concat(a.i);
  b.sort((f, k) => f.Cj - k.Cj);
  for (var c = 0; c < b.length; ++c) {
    var d = b[c], e = d.wv();
    for (let f = c + 1; f < b.length; ++f) {
      let k = b[f], l = k.wv();
      e.top < l.bottom && l.top < e.bottom && k.Kn < d.Kn + d.yv() && (k.Kn = d.Kn + d.yv());
    }
  }
  c = 0;
  for (d = 0; d < b.length; ++d) {
    e = b[d], c < e.Kn + e.yv() && (c = e.Kn + e.yv());
  }
  a.s = a.cl() + c;
}
function D_(a) {
  let b = a.B;
  b = b.concat(a.i);
  b.sort((f, k) => f.Ug - k.Ug);
  for (var c = 0; c < b.length; ++c) {
    var d = b[c], e = d.wv();
    for (let f = c + 1; f < b.length; ++f) {
      let k = b[f], l = k.wv();
      e.left < l.right && l.left < e.right && k.Ln < d.Ln + d.xv() && (k.Ln = d.Ln + d.xv());
    }
  }
  c = 0;
  for (d = 0; d < b.length; ++d) {
    e = b[d], c < e.Ln + e.xv() && (c = e.Ln + e.xv());
  }
  a.l = a.di() + c;
}
function sJ(a) {
  a.jl(0, 0);
  for (let b = 0; b < a.i.length; ++b) {
    sJ(a.i[b]);
  }
}
function A_(a) {
  let b = [];
  b.push(0);
  for (let c = 0; c < a.i.length; ++c) {
    let d = a.i[c];
    -1 == b.indexOf(d.Ug) && b.push(d.Ug);
    -1 == b.indexOf(d.Ug + d.g.getBoundingClientRect().height) && b.push(d.Ug + d.g.getBoundingClientRect().height);
  }
  b.push(a.di());
  b.sort((c, d) => c - d);
  return b;
}
function B_(a) {
  let b = [];
  for (let c = 0; c < a.i.length; ++c) {
    let d = a.i[c];
    b.push(new w_(d.Cj, d.Ug, d.Ug + d.g.getBoundingClientRect().height));
    b.push(new w_(d.Cj + d.g.getBoundingClientRect().width, d.Ug, d.Ug + d.g.getBoundingClientRect().height));
  }
  b.sort((c, d) => c.x - d.x);
  return b;
}
function E_(a) {
  let b = [];
  if (a.i.length) {
    for (let c = 0; c < a.i.length; c++) {
      let d = a.i[c];
      d.g.clientWidth < 0.9 * document.documentElement.clientWidth || d.g.clientHeight < 0.9 * document.documentElement.clientHeight || b.push(d);
    }
    a.i = b;
  }
}
class lY extends x_ {
  constructor(a, b) {
    super(b);
    this.parent = b;
    this.g = a;
    this.i = [];
    this.B = [];
    this.s = this.g.scrollWidth;
    this.l = this.g.scrollHeight;
    this.Ug = this.Cj = 0;
    this.o = this.Yf();
    this.m = this.$g();
    this.parent && (this.Cj = this.g.getBoundingClientRect().left - this.parent.g.getBoundingClientRect().left, this.Ug = this.g.getBoundingClientRect().top - this.parent.g.getBoundingClientRect().top, this.o > this.parent.o && (this.o = this.parent.o), this.m > this.parent.m && (this.m = this.parent.m));
  }
  Po() {
    return this.g.scrollTop;
  }
  j() {
    return this.g.scrollLeft;
  }
  cl() {
    return this.g.scrollWidth;
  }
  di() {
    return this.g.scrollHeight;
  }
  yv() {
    return this.s - this.Yf();
  }
  xv() {
    return this.l - this.$g();
  }
  jl(a, b) {
    this.g.scrollTo(a, b);
  }
  Yf() {
    return this.g.clientWidth;
  }
  $g() {
    return this.g.clientHeight;
  }
  v() {
    return this.g.getBoundingClientRect().left;
  }
  u() {
    return this.g.getBoundingClientRect().top;
  }
  wv() {
    return new DOMRect(this.Cj, this.Ug, this.Yf(), this.$g());
  }
}
function tJ(a) {
  a.g.remove();
  a.g = null;
}
class F_ {
  constructor() {
    this.g = document.createElement("div");
    this.g.id = "AnnotateBlockingDivForCapture";
    this.g.className = "extension_reset_css annotate-no-print ";
    this.g.style.display = "block";
    this.g.onclick = function(a) {
      a.preventDefault();
    };
    this.g.addEventListener("wheel", function(a) {
      a.preventDefault();
    }, {capture:!0, passive:!1});
    document.body.appendChild(this.g);
  }
}
class G_ {
  constructor(a, b, c, d, e, f, k, l) {
    this.pageX = 0;
    this.pageY = a;
    this.Kl = b;
    this.Jl = c;
    this.$q = d;
    this.o = f;
    this.m = e;
    this.l = k;
    this.s = l;
    this.i = document.createElement("canvas");
    this.g = window.devicePixelRatio;
    this.i.width = b * window.devicePixelRatio;
    this.i.height = c * window.devicePixelRatio;
    this.j = [];
  }
}
function H_(a) {
  let b = a.i - 10, c = a.j - 10 + a.Lu;
  0 > b && (b = 0);
  0 > c && (c = 0);
  a.g.jl(b, c);
  b = a.g.j();
  c = a.g.Po();
  a.o = a.width - (a.i - a.left);
  a.m = a.height - (a.j - a.top);
  a.i - b + a.o > a.g.Yf() && (a.o = a.g.Yf() - (a.i - b));
  a.j + a.Lu - c + a.m > a.g.$g() && (a.m = a.g.$g() - (a.j + a.Lu - c));
}
function rJ(a) {
  a.timeout && (clearTimeout(a.timeout), a.timeout = 0);
  a.G = !0;
}
function I_(a) {
  a.timeout = setTimeout(() => {
    a.N && a.M != a.g.di() ? (a.Lu = a.g.di() - a.M, a.N = !1, H_(a), I_(a)) : (a.B && a.B(), a.timeout = setTimeout(() => {
      let b = (new Date()).getTime() - a.$q;
      550 < b ? J_(a) : a.timeout = setTimeout(() => {
        J_(a);
      }, 550 - b);
    }, 50));
  }, 50);
}
function J_(a) {
  a.$q = (new Date()).getTime();
  L.sa({type:"annotateScreenShotCopy", bForExport:!0, windowId:P.ba, x:a.i, y:a.j}, b => {
    a.G || K_(a, b);
  });
}
function K_(a, b) {
  if (null == b) {
    a.u(!1);
  } else {
    var c = new Image();
    c.onload = () => {
      var d = a.v.getContext("2d"), e = a.g.u();
      let f = a.g.v();
      d.drawImage(c, (a.i - a.g.j() + f) * a.l, (a.j + a.Lu - a.g.Po() + e) * a.l, a.o * a.l, a.m * a.l, (a.i - a.left) * a.l, (a.j - a.top) * a.l, a.o * a.l, a.m * a.l);
      a: {
        a.i += a.o;
        if (Math.ceil(a.i) >= a.left + a.width || Math.ceil(a.i) >= a.g.cl()) {
          a.i = a.left;
          a.j += a.m;
          if (Math.ceil(a.j) >= a.top + a.height || Math.ceil(a.j) >= a.g.di()) {
            a.C.addImage(a.v, a.ba, 0, 0, a.s, a.s / a.width * a.height, null, "FAST", 0);
            for (d = 0; d < a.J.length; d++) {
              e = a.J[d], a.C.link(a.s / a.width * e.x, a.s / a.width * e.y, a.s / a.width * e.width, a.s / a.width * e.height, {url:e.url});
            }
            a.u(!0);
            break a;
          }
          a.j -= 2;
        } else {
          a.i -= 2;
        }
        H_(a);
        I_(a);
      }
    };
    c.src = b.data;
  }
}
class L_ {
  constructor(a, b, c, d, e, f, k, l, n, p, t, x, D, G) {
    this.g = a;
    this.v = document.createElement("canvas");
    this.l = window.devicePixelRatio;
    this.left = b;
    this.top = c;
    this.width = d;
    this.height = e;
    this.v.width = d * window.devicePixelRatio;
    this.v.height = e * window.devicePixelRatio;
    this.s = l;
    this.ba = k;
    this.C = f;
    this.u = n;
    this.B = p;
    this.i = this.left;
    this.j = this.top;
    this.o = this.width;
    this.m = this.height;
    this.M = this.g.di();
    this.$q = t;
    this.timeout = 0;
    this.G = !1;
    this.Lu = x;
    this.N = D;
    this.J = G;
    H_(this);
  }
}
class M_ {
  constructor(a, b, c) {
    this.j = [];
    this.j.push(a);
    this.g = b;
    this.i = null;
    console.log("Capture Page");
    this.o = c;
    this.s = this.l.bind(this);
    this.m = !1;
  }
  l(a) {
    if (!this.m) {
      if (a) {
        if (this.j.length) {
          a = this.j.shift(), this.j = this.j.concat(a.i), this.i = new N_(a, this.g, this.s), this.i.m(!0);
        } else {
          this.g.m.addImage(this.g.i, this.g.o, 0, 0, 792, 792 / this.g.Kl * this.g.Jl, null, "FAST", 0);
          for (a = 0; a < this.g.j.length; a++) {
            let b = this.g.j[a], c = 792 / this.g.Kl;
            this.g.m.link(c * b.x, c * b.y, c * b.width, c * b.height, {url:b.url});
          }
          this.o(!0);
        }
      } else {
        this.o(!1);
      }
    }
  }
  Cr() {
    this.m = !0;
    this.i && this.i.Cr();
  }
}
class N_ {
  constructor(a, b, c) {
    this.g = a;
    this.i = b;
    a = this.g.Cj + this.g.Kn;
    for (b = this.g.parent; null != b;) {
      a += b.Cj + b.Kn, b = b.parent;
    }
    this.v = a;
    a = this.g.Ug + this.g.Ln;
    for (b = this.g.parent; null != b;) {
      a += b.Ug + b.Ln, b = b.parent;
    }
    this.u = a;
    this.l = 0;
    this.o = !1;
    this.j = null;
    this.s = c;
    this.B = this.m.bind(this);
    console.log("Capture Scrollable");
    c = this.v - this.i.pageX;
    a = this.u - this.i.pageY;
    b = c + this.g.s;
    let d = a + this.g.l;
    0 > c && (c = 0);
    b > this.i.Kl && (b = this.i.Kl);
    0 > a && (a = 0);
    d > this.i.Jl && (d = this.i.Jl);
    if (c < b && a < d) {
      let f = this.i.i.getContext("2d");
      f.save();
      f.fillStyle = "#ffffff";
      f.fillRect(c * this.i.g, a * this.i.g, (b - c) * this.i.g, (d - a) * this.i.g);
      var e = this.g;
      let k = e.g;
      e.g == document.documentElement && (k = document.body);
      f.fillStyle = getComputedStyle(k).backgroundColor;
      f.fillRect(c * this.i.g, a * this.i.g, (b - c) * this.i.g, (d - a) * this.i.g);
      f.restore();
    }
  }
  Cr() {
    this.o = !0;
    this.j && this.j.Cr();
  }
  m(a) {
    this.o || (a ? this.l < this.g.B.length ? (a = this.l, this.l++, this.j = new O_(this.g.B[a], this.i, this.B), P_(this.j)) : this.s(!0) : this.s(!1));
  }
}
function P_(a) {
  if (a.s < a.g.pageY + a.g.Jl && a.g.pageY < a.s + a.region.di() && a.o < a.g.pageX + a.g.Kl && a.g.pageX < a.o + a.region.cl()) {
    console.log("static region", a.o, a.s, a.region.Yf(), a.region.$g());
    let b = a.g.pageX - a.o;
    0 > b && (b = 0);
    let c = a.g.pageX - a.o + a.g.Kl;
    c > a.region.cl() && (c = a.region.cl());
    let d = a.g.pageY - a.s;
    0 > d && (d = 0);
    let e = a.g.pageY - a.s + a.g.Jl;
    e > a.region.di() && (e = a.region.di());
    a.left = b;
    a.top = d;
    a.width = c - b;
    a.height = e - d;
    a.i = a.left;
    a.j = a.top;
    Q_(a);
  } else {
    a.timeout = setTimeout(() => {
      a.timeout = 0;
      a.u(!0);
    }, 0);
  }
}
function Q_(a) {
  a.m = a.width;
  a.l = a.height;
  a.m > a.region.parent.o && (a.m = a.region.parent.o);
  a.l > a.region.parent.m - 10 && (a.l = a.region.parent.m - 10);
  a.i + a.m > a.left + a.width && (a.m = a.left + a.width - a.i);
  a.j + a.l > a.top + a.height && (a.l = a.top + a.height - a.j);
  let b = a.region.parent;
  for (var c = a.i + a.region.Cj, d = a.j + a.region.Ug - 10; b;) {
    c > b.cl() - b.Yf() && (c = b.cl() - b.Yf()), d += 0, 0 > d && (d = 0), d > b.di() - b.$g() && (d = b.di() - b.$g()), console.log("ScrollTo", c, d), b.jl(c, d), c = b.Cj, d = b.Ug, b = b.parent;
  }
  R_(a);
}
function R_(a) {
  a.timeout = setTimeout(() => {
    a.g.l && a.g.l();
    a.timeout = setTimeout(() => {
      let b = (new Date()).getTime() - a.g.$q;
      550 < b ? S_(a) : a.timeout = setTimeout(() => {
        S_(a);
      }, 550 - b);
    }, 50);
  }, 50);
}
function S_(a) {
  a.g.$q = (new Date()).getTime();
  L.sa({type:"annotateScreenShotCopy", bForExport:!0, windowId:P.ba, x:a.i, y:a.j}, b => {
    a.v || T_(a, b);
  });
}
function T_(a, b) {
  if (null == b) {
    a.u(!1);
  } else {
    var c = new Image();
    c.onload = () => {
      var d = a.g.i.getContext("2d"), e = U_(a), f = a.i + e.x, k = a.j + e.y;
      console.log("Capture", a.g.pageX, a.g.pageY, "clientOffset", e.x, e.y, "static region", a.i, a.j, a.i + a.m, a.j + a.l, "src", f, k, "dest", a.i + a.o - a.g.pageX, a.j + a.s - a.g.pageY);
      e = a.g.g;
      d.drawImage(c, f * e, k * e, a.m * e, a.l * e, (a.i + a.o - a.g.pageX) * e, (a.j + a.s - a.g.pageY) * e, a.m * a.g.g, a.l * e);
      a: {
        if (!a.v) {
          a.i += a.m;
          if (Math.ceil(a.i) >= a.left + a.width) {
            a.i = a.left;
            a.j += a.l;
            if (Math.ceil(a.j) >= a.top + a.height) {
              d = U_(a);
              f = a.g.s(d.x + a.left, d.y + a.top, a.width, a.height);
              for (k = 0; k < f.length; ++k) {
                e = f[k], e.x = e.x - d.x + a.o - a.g.pageX, e.y = e.y - d.y + a.s - a.g.pageY, a.g.j.push(e);
              }
              a.u(!0);
              break a;
            }
            a.j -= 2;
          } else {
            a.i -= 2;
          }
          Q_(a);
        }
      }
    };
    c.src = b.data;
  }
}
function U_(a) {
  let b = a.region.parent.g.getBoundingClientRect();
  if (a.region.parent.g == document.documentElement || a.region.parent.g == document.body) {
    b = new DOMRect(0, 0, a.region.parent.Yf(), a.region.parent.$g());
  }
  return {x:b.left + a.region.Cj - a.region.parent.j(), y:b.top + a.region.Ug - a.region.parent.Po()};
}
class O_ {
  constructor(a, b, c) {
    this.region = a;
    this.g = b;
    this.u = c;
    a = this.region.Cj + this.region.Kn;
    for (b = this.region.parent; null != b;) {
      a += b.Cj + b.Kn, b = b.parent;
    }
    this.o = a;
    a = this.region.Ug + this.region.Ln;
    for (b = this.region.parent; null != b;) {
      a += b.Ug + b.Ln, b = b.parent;
    }
    this.s = a;
    this.v = !1;
    this.timeout = this.l = this.m = this.j = this.i = this.width = this.height = this.top = this.left = 0;
  }
  Cr() {
    this.v = !0;
    clearTimeout(this.timeout);
    this.timeout = 0;
  }
}
;function nJ(a) {
  a.m = !0;
  a.v = 0;
  a.scrollTop = 0;
  a.g.jl(0, a.scrollTop);
  V_();
  L.sa({type:"annotateLaunchExportProgressWindow", height:230, width:420, top:(window.innerHeight - 150) / 2, left:(window.innerWidth - 420) / 2}, b => {
    a.l = b.windowId;
  });
  a.timeout = setTimeout(() => {
    a.j = new F_();
    let b = W_(a).getBoundingClientRect();
    a.o = new window.jspdf.jsPDF({orientation:"p", format:[b.width, b.height], unit:"pt"});
    X_(a);
  }, 50);
}
function V_() {
  let a = document.getElementsByClassName("docs-explore-widget")[0];
  a && (a.style.visibility = "hidden");
  L.rr(!1);
}
function W_(a) {
  var b = document.getElementsByClassName("kix-appview-editor-container")[0];
  let c = null;
  if (b) {
    b = b.getElementsByClassName("kix-page-paginated");
    for (let d = 0; d < b.length; ++d) {
      let e = b[d];
      if (parseInt(e.style.zIndex) == a.v) {
        c = e;
        break;
      }
    }
  }
  return c;
}
function X_(a) {
  if (a.m) {
    var b = W_(a).getBoundingClientRect(), c = 0;
    a.i && (c = a.i.$q);
    a.i = new L_(a.g, a.g.j() + b.left - a.g.v(), a.g.Po() + b.top - a.g.u(), b.width, b.height, a.o, a.u, b.width, d => {
      Y_(a, d);
    }, null, c, 0, !1, []);
    I_(a.i);
  }
}
function Z_() {
  let a = document.getElementsByClassName("docs-explore-widget")[0];
  a && (a.style.visibility = "visible");
  L.rr(!0);
}
function Y_(a, b) {
  b ? (a.scrollTop += a.i.height, a.g.jl(0, a.scrollTop), a.v++, a.timeout = setTimeout(() => {
    var c = W_(a);
    null == c ? (a.o.save(document.title.replace(/[^a-z0-9]/gi, "_").toLowerCase() + ".pdf"), a.m = !1, Z_(), tJ(a.j), a.j = null, L.sa({type:"annotateCloseExportProgressWindow", windowId:a.l}, null), a.s(!0)) : (c = c.getBoundingClientRect(), a.o.addPage([c.width, c.height], "p"), X_(a));
  }, 50)) : $_(a);
}
function $_(a) {
  a.m = !1;
  Z_();
  tJ(a.j);
  a.j = null;
  L.sa({type:"annotateCloseExportProgressWindow", windowId:a.l}, null);
  a.s(!1);
}
class mJ {
  constructor(a, b) {
    this.j = null;
    this.g = new u_();
    this.s = a;
    this.u = b;
    this.o = this.i = null;
    this.timeout = 0;
    this.m = !1;
    this.l = -1;
  }
  Cr(a) {
    this.i && rJ(this.i);
    this.m = !1;
    Z_();
    tJ(this.j);
    this.j = null;
    L.sa({type:"annotateCloseExportProgressWindow", windowId:this.l}, null);
    a && Kn("", "Error exporting annotations.", "OK");
  }
}
;function pJ(a) {
  a.s = !0;
  L.sa({type:"annotateLaunchExportProgressWindow", height:230, width:420, top:(window.innerHeight - 230) / 2, left:(window.innerWidth - 420) / 2}, c => {
    a.l = c.windowId;
  });
  let b = new lY(document.documentElement, null);
  mY(b);
  a.pa || E_(b);
  b.i.length ? (sJ(b), a.j = b, setTimeout(() => {
    a0(a);
    a.m = new F_();
    z_(a.j);
    b0(a);
  }, 50)) : (a.g = new v_(), a.g.jl(0, 0), a.i = null, setTimeout(() => {
    a0(a);
    a.m = new F_();
    c0(a);
  }, 50));
}
function d0(a, b, c) {
  if (b && b.style) {
    var d = b.style.cssText;
    if (b) {
      var e = b.style.cssText + "; ", f;
      for (f in c) {
        e += f.replace(/([a-zA-Z])(?=[A-Z])/g, "$1-").toLowerCase() + ": " + c[f] + " !important; ";
      }
      b.style.cssText = e;
    }
    a.J.push({action:"css", R:b, before:d, after:b.style.cssText});
  }
}
function e0(a, b) {
  var c = f0(a), d = c.fixed, e = c.sticky;
  c = c.fixedHeader;
  for (var f = 0; f < d.length; f++) {
    var k = d[f];
    if ("AnnotateBlockingDivForCapture" != k.id) {
      var l = window.getComputedStyle(k), n = parseFloat(l.left), p = parseFloat(l.right), t = parseFloat(l.top), x = parseFloat(l.bottom), D = parseFloat(l.width), G = parseFloat(l.height), I = k.scrollHeight;
      l = l.overflowY;
      var Q = k.UJ ? k.UJ() : null, X = {};
      "left right top bottom width height".split(" ").forEach(function(aa) {
        X[aa] = Q && Q.get(aa).value;
      });
      d0(a, k, {position:"absolute", transition:"none"});
      var Fa = k.offsetParent;
      if (Fa) {
        var La = g0(a, Fa);
        n -= La.left;
        p -= a.B - (La.left + La.width + 1);
        t -= La.top;
        La = x - (a.u - (La.top + La.height + 1));
        var Aa = !1, Ha = {};
        !isNaN(n) && 0 >= n ? (Aa = !0, X.left || X.right ? (X.left && (Ha.left = n + "px"), X.right && (Ha.right = p + "px")) : Ha.left = n + "px") : X.right && !isNaN(p) && (Aa = !0, Ha.right = p + "px");
        if (!isNaN(t) && 0 >= t) {
          Aa = !0;
          n = G;
          if ("scroll" == l || "auto" == l) {
            n = Math.max(G, I);
          }
          Ha.height = n + "px";
          if (X.top || X.bottom) {
            X.top && X.bottom && delete Ha.height, X.top && (Ha.top = t + "px"), X.bottom && (Ha.bottom = La + "px", 0 == x && 0 != Fa.getBoundingClientRect().height ? Ha.bottom = "0px" : (Ha.top = t + "px", Ha.bottom = "auto"));
          }
        } else {
          X.bottom && !isNaN(La) && (Aa = !0, 0 == x && 0 != Fa.getBoundingClientRect().height ? Ha.bottom = "0px" : Ha.bottom = La + "px");
        }
        (Ha.left && !Ha.right || !Ha.left && Ha.right) && X.width && (Ha.width = D + "px");
        Aa && (Ha.width && (Ha.maxWidth = Ha.width), Ha.height && (Ha.maxHeight = Ha.height), d0(a, k, Ha));
      }
    }
  }
  d = [];
  for (f = 0; f < e.length; f++) {
    d0(a, e[f], {position:"relative", top:"auto", left:"auto", right:"auto", bottom:"auto"}), k = e[f].id ? e[f].id : h0(a), d.push(k);
  }
  e = d.map(function(aa) {
    return "#" + window.CSS.escape(aa);
  }).join(",") + " { position: relative !important; left: auto !important; right: auto !important; top: auto !important; bottom: auto !important; }";
  i0(a, e);
  if (!b) {
    for (f = 0; f < c.length; f++) {
      d0(a, c[f], {visibility:"hidden", overflow:"hidden"});
    }
  }
}
function a0(a) {
  d0(a, document.documentElement, {scrollBehavior:"auto"});
  var b = document.body;
  b && "scroll" == window.getComputedStyle(b).overflowY && d0(a, b, {overflowY:"visible"});
  (b = document.body) && window.getComputedStyle(b);
  if (document.body && (b = window.getComputedStyle(document.body), "absolute" != b.position)) {
    var c = {position:"relative"};
    "inline" == b.display && (c.display = "block");
    if (0 == parseInt(b.width) || 0 == parseInt(b.height)) {
      d0(a, document.body, {backgroundColor:"transparent", backgroundImage:"none"});
    } else {
      var d = !1;
      "none" == b.maxWidth && 0 == parseInt(b.minWidth) && 0 == parseInt(b.marginLeft) && (d = j0(b));
      "none" == b.maxHeight && 0 == parseInt(b.minHeight) && (d = d || j0(b));
      "0px" != b.marginTop && (c.paddingTop = parseInt(b.paddingTop) + parseInt(b.marginTop) + "px", c.marginTop = "0px", d = !0);
      "0px" != b.marginBottom && (c.paddingBottom = parseInt(b.paddingBottom) + parseInt(b.marginBottom) + "px", c.marginBottom = "0px", d = !0);
      d && (c.boxSizing = "border-box");
      d0(a, document.body, c);
    }
  }
  a.Ha = document.body && 0 == document.body.offsetHeight;
  a.Va = window.scrollX;
  a.ib = window.scrollY;
  a.ya = document.documentElement;
  a.body = document.body;
  a.g && (a.B = a.g.cl(), a.u = a.g.di());
  e0(a, !0);
}
function f0(a) {
  var b = [], c = [], d = [];
  if (!a.body) {
    return null;
  }
  for (var e = [a.body]; 0 < e.length;) {
    for (var f = e.pop(), k = k0(f.childNodes), l = 0; l < k.length; l++) {
      e.push(k[l]);
    }
    f != a.body && (k = window.getComputedStyle(f), "sticky" == k.position ? c.push(f) : "fixed" == k.position && (k = g0(a, f), l = window.innerHeight - k.top - 20, 20 > k.top && k.height < l ? d.push(f) : b.push(f)));
  }
  return {fixed:b, sticky:c, fixedBg:[], fixedHeader:d};
}
function g0(a, b) {
  var c = b.getBoundingClientRect(), d = c.width;
  c = c.height;
  for (var e = 0, f = 0; b;) {
    e += b.offsetLeft;
    f = b == a.body ? f + (b.getBoundingClientRect().top + window.scrollY) : f + b.offsetTop;
    if (window.DOMMatrix || window.WebKitCSSMatrix) {
      var k = window.getComputedStyle(b);
      k = k.transform || k.webkitTransform;
      k = window.DOMMatrix ? new window.DOMMatrix(k) : new window.WebKitCSSMatrix(k);
    } else {
      k = null;
    }
    k && (e += k.m41, f += k.m42);
    b = b.offsetParent;
  }
  return {left:e, top:f, width:d, height:c};
}
function h0(a) {
  a.ba++;
  return "AnnotateId_" + a.ba + "_" + (new Date()).getTime();
}
function i0(a, b) {
  var c = document.createElement("style");
  c.innerHTML = b;
  if (b = document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]) {
    b.appendChild(c), a.J.push({action:"new_elt", R:c});
  }
}
function k0(a) {
  a = Array.from(a);
  a = a.filter(function(b) {
    return b.nodeType == b.ELEMENT_NODE;
  });
  a = a.filter(function(b) {
    return -1 == ["SCRIPT", "HEAD", "STYLE", "LINK", "META"].indexOf(b.nodeName);
  });
  return a = a.filter(function(b) {
    b = window.getComputedStyle(b);
    return !("none" == b.display || "hidden" == b.visibility || 0 == parseInt(b.height) && "hidden" == b.overflowY && "static" != b.position || 0 == parseInt(b.width) && "hidden" == b.overflowX && "static" != b.position);
  });
}
function j0(a) {
  return ["paddingTop", "paddingBottom", "borderTopWidth", "borderBottomWidth"].some(function(b) {
    return a[b] && "0px" != a[b];
  }) && "content-box" == a.boxSizing;
}
function uJ(a) {
  for (; 0 < a.J.length;) {
    var b = a.J.pop();
    b && ("new_elt" == b.action ? b.R.parentNode.removeChild(b.R) : b.R.style.cssText = b.before);
  }
}
function b0(a) {
  a.Ah = 0;
  a.o = new window.jspdf.jsPDF({orientation:"l", format:[792, 612], unit:"pt"});
  L.rr(!1);
  setTimeout(() => {
    a.s && l0(a);
  }, 50);
}
function c0(a) {
  a.M = 0;
  a.N = 0;
  a.Ah = 0;
  a.o = new window.jspdf.jsPDF({orientation:"l", format:[792, 612], unit:"pt"});
  L.rr(!1);
  a.g.jl(a.M, a.N);
  setTimeout(() => {
    m0(a);
  }, 50);
}
function m0(a) {
  if (a.s) {
    var b = 0, c = 0;
    a.i && (b = a.i.$q, c = a.i.Lu);
    var d = 612 * a.B / 792, e = a.Ah * d;
    e + d > a.u && (d = a.u - e);
    var f = n0(e, a.B, d);
    a.i = new L_(a.g, 0, e, a.B, d, a.o, a.G, 792, k => {
      o0(a, k);
    }, () => {
      e0(a, 0 == a.g.Po());
    }, b, c, 0 == e, f);
    I_(a.i);
  }
}
function n0(a, b, c) {
  var d = [];
  let e = [];
  S && (d = Tu(null), e = Mu());
  let f = [];
  for (var k = 0; k < d.length; k++) {
    var l = d[k], n = Um(l);
    if (l.offsetTop + n.y - window.scrollY < a + c && l.offsetTop + n.y - window.scrollY + l.height > a && l.offsetLeft + n.x - window.scrollX < b && 0 < l.offsetLeft + n.x - window.scrollX + l.width) {
      let p = UD(L.Pb(), null);
      null != l.Bh && (p = l.Bh);
      let t = l.A ? l.A.scale : 1;
      f.push({x:l.offsetLeft + n.x, y:l.offsetTop + n.y - a, width:l.width * t, height:l.height * t, url:p + l.li().Xg + ".mp4"});
    }
  }
  for (k = 0; k < e.length; k++) {
    d = e[k], l = Um(d), d.offsetTop + l.y - window.scrollY < a + c && d.offsetTop + l.y - window.scrollY + d.height > a && d.offsetLeft + l.x - window.scrollX < b && 0 < d.offsetLeft + l.x - window.scrollX + d.width && (n = aJ(L.Pb(), null), null != d.Bh && (n = d.Bh), n = d.Ar == Rg.Ds ? it(d.Xg) : n + d.Xg + "." + d.mx, f.push({x:d.offsetLeft + l.x, y:d.offsetTop + l.y - a, width:d.width, height:d.height, url:n}));
  }
  return f;
}
function o0(a, b) {
  b && (a.Ah++, Math.ceil(a.i.top + a.i.height) >= a.u ? p0(a) : a.timeout = setTimeout(() => {
    a.o.addPage([792, 612], "l");
    m0(a);
  }, 50));
}
function p0(a) {
  a.o.save(document.title.replace(/[^a-z0-9]/gi, "_").toLowerCase() + ".pdf");
  a.g.jl(0, 0);
  tJ(a.m);
  a.m = null;
  a.s = !1;
  a.i = null;
  a.g = null;
  L.sa({type:"annotateCloseExportProgressWindow", windowId:a.l}, null);
  L.rr(!0);
  uJ(a);
}
function l0(a) {
  let b = 0;
  a.v && (b = a.v.$q);
  let c = 612 * a.j.s / 792, d = a.Ah * c;
  d + c > a.j.l && (c = a.j.l - d);
  a.v = new G_(d, a.j.s, c, b, a.o, a.G, () => {
    e0(a, 0 == a.j.Po());
  }, a.ea.bind(a));
  a.C = new M_(a.j, a.v, a.ia.bind(a));
  a.C.l(!0);
}
class oJ extends ph {
  constructor(a, b) {
    super();
    this.J = [];
    this.ba = 0;
    this.Ha;
    this.Va;
    this.ib;
    this.g;
    this.ya;
    this.body;
    this.m = null;
    this.Ah = this.N = this.M = 0;
    this.o = null;
    this.pa = b;
    this.G = a;
    this.u = this.B = 0;
    this.s = !1;
    this.l;
    this.v = this.C = this.j = null;
  }
  ia(a) {
    a ? (this.Ah++, Math.ceil(this.v.pageY + this.v.Jl) >= this.j.l ? (this.o.save(document.title.replace(/[^a-z0-9]/gi, "_").toLowerCase() + ".pdf"), sJ(this.j), this.j = this.C = null, tJ(this.m), this.m = null, this.s = !1, L.sa({type:"annotateCloseExportProgressWindow", windowId:this.l}, null), L.rr(!0), uJ(this)) : this.timeout = setTimeout(() => {
      this.o.addPage([792, 612], "l");
      l0(this);
    }, 50)) : (L.sa({type:"annotateCloseExportProgressWindow", windowId:this.l}, null), L.rr(!0), uJ(this));
  }
  ea(a, b, c, d) {
    var e = [];
    let f = [];
    S && (e = Tu(0), f = Mu(0));
    let k = [];
    for (var l = 0; l < e.length; l++) {
      var n = e[l], p = Um(n);
      if (n.offsetTop + p.y - window.scrollY < b + d && n.offsetTop + p.y - window.scrollY + n.height > b && n.offsetLeft + p.x - window.scrollX < a + c && n.offsetLeft + p.x - window.scrollX + n.width > a) {
        let t = UD(L.Pb(), null);
        null != n.Bh && (t = n.Bh);
        let x = n.A ? n.A.scale : 1;
        k.push({x:n.offsetLeft + p.x - window.scrollX, y:n.offsetTop + p.y - window.scrollY, width:n.width * x, height:n.height * x, url:t + n.li().Xg + ".mp4"});
      }
    }
    for (l = 0; l < f.length; l++) {
      e = f[l], n = Um(e), e.offsetTop + n.y - window.scrollY < b + d && e.offsetTop + n.y - window.scrollY + e.height > b && e.offsetLeft + n.x - window.scrollX < a + c && e.offsetLeft + n.x - window.scrollX + e.width > a && (p = aJ(L.Pb(), null), null != e.Bh && (p = e.Bh), p = e.Ar == Rg.Ds ? it(e.Xg) : p + e.Xg + "." + e.mx, k.push({x:e.offsetLeft + n.x - window.scrollX, y:e.offsetTop + n.y - window.scrollY, width:e.width, height:e.height, url:p}));
    }
    return k;
  }
  U() {
  }
}
;function fr(a, b) {
  for (var c in b) {
    var d = b[c];
    if (d.arrMediaAttachments) {
      d = d.arrMediaAttachments;
      for (let e = 0; e < d.length; e++) {
        let f = d[e].arrMedia;
        for (let k = 0; k < f.length; k++) {
          let l = f[k];
          for (let n = a.length - 1; 0 <= n; n--) {
            if (-1 != a[n].strMediaName.indexOf(l.strURL)) {
              l.bReencoded = a[n].bReencoded;
              break;
            }
          }
        }
      }
    }
  }
}
function XI() {
  var a = Sk(), b = No();
  mv(a, b);
  a = iv();
  for (let c in a) {
    (a = kv(c)) && (b = Oo(S)) && (b.cv[c] = a);
  }
}
function kS() {
  var a = Ul();
  let b = document.getElementsByTagName("iframe"), c = [];
  for (let d = 0; d < b.length; ++d) {
    mC && 2 == mC.i && b[d] == mC.g || -1 !== b[d].src.indexOf("GapiFrame/index.php") || -1 == a.indexOf("docs.google.com/presentation/d/") || null != b[d].src && -1 != b[d].src.indexOf("docs.google.com/sharing/") || c.push(b[d]);
  }
  return c;
}
function q0(a, b) {
  a.i != b && (a.i = b, 1 == S.g && (b = pw, b.g && II(b.g, a.i)));
}
function r0(a) {
  let b = iv();
  if (0 < Object.keys(b).length) {
    for (var c in b) {
      null == b[c].arrMediaAttachments && (b[c].arrMediaAttachments = []), null == b[c].arrUploadedVideoAttachments && (b[c].arrUploadedVideoAttachments = []), null == b[c].arrImageAttachments && (b[c].arrImageAttachments = []), a[c] ? (a[c].arrAnnotations = a[c].arrAnnotations.concat(b[c].arrAnnotations), a[c].arrTextHighlights = a[c].arrTextHighlights.concat(b[c].arrTextHighlights), a[c].arrTextElements = a[c].arrTextElements.concat(b[c].arrTextElements), null == a[c].arrMediaAttachments && (a[c].arrMediaAttachments = 
      []), a[c].arrMediaAttachments = a[c].arrMediaAttachments.concat(b[c].arrMediaAttachments), null == a[c].arrUploadedVideoAttachments && (a[c].arrUploadedVideoAttachments = []), a[c].arrUploadedVideoAttachments = a[c].arrUploadedVideoAttachments.concat(b[c].arrUploadedVideoAttachments), null == a[c].arrImageAttachments && (a[c].arrImageAttachments = []), a[c].arrImageAttachments = a[c].arrImageAttachments.concat(b[c].arrImageAttachments)) : a[c] = b[c];
    }
  }
}
function s0(a, b) {
  if (a) {
    let c = new Image();
    c.setAttribute("crossOrigin", "anonymous");
    c.onload = function() {
      var d = document.createElement("canvas");
      d.width = c.width / 2;
      d.height = c.height / 2;
      var e = d.getContext("2d");
      e.drawImage(c, 0, 0, d.width, d.height);
      d = e.getImageData(0, 0, d.width, d.height);
      b(d);
    };
    c.src = a;
  } else {
    b(null);
  }
}
function t0(a, b) {
  var c = lw;
  let d = An();
  if (d != b) {
    console.log("$$$ Show Clean Up Deleted Slides aborted $$$ reason: annotation Id miss match");
  } else {
    b = st();
    for (var e = S.o, f = 0; f < e.length; f++) {
      if (d == e[f].ma) {
        if (b != e[f].bi) {
          console.log("$$$ Show Clean Up Deleted Slides aborted $$$ reason: annotation version miss match");
          return;
        }
        break;
      }
    }
    Kn("Clean up this file?", "We noticed that a few slides from this presentation have been deleted. Clear annotations and media recorded on deleted slides to free up space in your Annotate account?", "CANCEL", "FREE UP SPACE", () => {
    }, () => {
      c.s(a);
    });
  }
}
function u0(a) {
  var b = !1;
  if (0 < Object.keys(a).length) {
    for (var c in a) {
      if (Mo(a[c])) {
        b = !0;
        break;
      }
    }
  }
  return b;
}
function v0(a, b, c) {
  for (var d in a) {
    if (null == a[d].arrMediaAttachments && (a[d].arrMediaAttachments = []), b[d]) {
      null == b[d].arrMediaAttachments && (b[d].arrMediaAttachments = []);
      var e = [], f = a[d].arrMediaAttachments, k = b[d].arrMediaAttachments;
      for (let n = 0; n < f.length; n++) {
        let p = new Pr();
        p.Fa(f[n]);
        for (let t = 0; t < k.length; t++) {
          let x = new Pr();
          x.Fa(k[t]);
          if (p.ma == x.ma && !p.li().Dk && x.li().Dk) {
            c == d && e.push(p.ma);
            p.li().Dk = !0;
            f[n] = p.Na();
            break;
          }
        }
      }
      0 < e.length && OZ(L.Pb(), e);
      e = b[d].arrMediaAttachments.map(n => n.ma);
      f = a[d].arrMediaAttachments.map(n => n.ma);
      let l = [];
      for (k = 0; k < f.length; k++) {
        -1 == e.indexOf(f[k]) && l.push(f[k]);
      }
      a[d].arrMediaAttachments = a[d].arrMediaAttachments.filter(n => -1 == l.indexOf(n.ma));
      c == d && 0 < l.length && NZ(L.Pb(), l);
      null == b[d].arrUploadedVideoAttachments && (b[d].arrUploadedVideoAttachments = []);
      e = b[d].arrUploadedVideoAttachments.map(n => n.ma);
      f = a[d].arrUploadedVideoAttachments.map(n => n.ma);
      l = [];
      for (k = 0; k < f.length; k++) {
        -1 == e.indexOf(f[k]) && l.push(f[k]);
      }
      a[d].arrUploadedVideoAttachments = a[d].arrUploadedVideoAttachments.filter(n => -1 == l.indexOf(n.ma));
      c == d && 0 < l.length && VZ(L.Pb(), l);
      null == b[d].arrImageAttachments && (b[d].arrImageAttachments = []);
      e = b[d].arrImageAttachments.map(n => n.ma);
      f = a[d].arrImageAttachments.map(n => n.ma);
      l = [];
      for (k = 0; k < f.length; k++) {
        -1 == e.indexOf(f[k]) && l.push(f[k]);
      }
      a[d].arrImageAttachments = a[d].arrImageAttachments.filter(n => -1 == l.indexOf(n.ma));
      c == d && 0 < l.length && SZ(L.Pb(), l);
    }
  }
  return a;
}
function w0(a, b) {
  if (P.i && window != window.top) {
    if (b) {
      var c = No();
      mv(b, c);
    }
    S.s = a;
    b = {};
    (c = S.i) && (c = c.Pa) && (b = c[a]);
    c = null;
    var d = S.Ya;
    d && (d = d.Pa) && (c = d[a]);
    d = null;
    var e = S.La;
    e && (e = e.Pa) && (d = e[a]);
    a = {};
    1 == S.g ? b && (a = b) : 2 == S.g ? (c && (a = c), a.baseAnnotationData = b, a.feedbackAnnotationData = d) : 3 == S.g && (d && (a = d), a.baseAnnotationData = b, a.notesAnnotationData = c);
    IR();
    b = !1;
    if (c = Oo(S)) {
      b = c.uh;
    }
    $o();
    L.Qz(a, !1);
    c && c.Rj(b);
    x0(!1);
    2 == S.g ? (W.Ek || W.ll(1, !1), W.am || W.ll(3, !1)) : 3 == S.g && (W.Ek || W.ll(1, !1), W.bm || W.ll(2, !1));
    if (W.i) {
      if (a = document.getElementById("annotate-highlight-plugin-show-hide")) {
        a.className = "extension_reset_css extension_icon extension_icon-show_annotations";
      }
    } else {
      y0(W);
    }
  }
}
function z0(a) {
  -1 != a.o && (clearInterval(a.o), a.o = -1);
}
function A0(a) {
  var b = lw;
  b.m = null;
  a.lstSlideId && (b.m = a.lstSlideId);
  let c = "curAnnotationMode" in a ? parseInt(a.curAnnotationMode) : 2;
  S.g = c;
  "strAssessmentFileGuid" in a && null != a.strAssessmentFileGuid && Vs(a.strAssessmentFileGuid);
  A(a.extraLoadedData) || Xs(a.extraLoadedData);
  "uClassId" in a && -1 != a.uClassId && (S.j = a.uClassId);
  "uDocAccessedAs" in a && (S.m = a.uDocAccessedAs);
  "uLivefeedType" in a && V && tR(V, parseInt(a.uLivefeedType));
  "uLivefeedType" in a && a.uLivefeedType != Ym ? (B0(Ao) || C0(Ao), P.ya = !0, cI()) : D0();
  rl() && cI();
  3 == c && "curOwnerGuid" in a && (S.zd = a.curOwnerGuid);
  if (a.annotationData) {
    var d = a.strGUID ? a.strGUID : null;
    cq(S.i, a.annotationId ? a.annotationId : -1, a.strAnnotationPath ? a.strAnnotationPath : "");
    S.i.ma = d;
    S.i.Pa = a.annotationData;
    a.documentOwnerInfo && jq(S.i, a.documentOwnerInfo);
  }
  ct(S, 2, null);
  ct(S, 3, null);
  if (a.notesAnnotationData) {
    var e = a.notesAnnotationData;
    d = Ls(2);
    cq(d, e.annotationId, e.strAnnotationPath);
    d.ma = e.strGUID;
    dq(d, e.versionNo);
    d.dh = e.nMaxElementId;
    nh(d, e.uuid);
    e.annotationData && (d.Pa = e.annotationData);
    e.documentOwnerInfo && (e = e.documentOwnerInfo, jq(d, e), 2 == c && (Yg(e.strPublisherGuid) && (S.zd = e.strPublisherGuid), pZ(L.Pb(), e.uPublisherId, e.strPublisherGuid, e.uPublishedAnnotationId, e.strPublishedAnnotationGuid, e.strPublishedAnnotationPath, e.strPublisherPicture, e.oPublisherPicturePosition, e.strPublisherFirstName, e.strPublisherLastName, e.uPublisherFeatureValue)));
  }
  a.feedbackAnnotationData && (e = a.feedbackAnnotationData, d = Ls(3), cq(d, e.annotationId, e.strAnnotationPath), d.ma = e.strGUID, dq(d, e.versionNo), d.dh = e.nMaxElementId, nh(d, e.uuid), e.annotationData && (d.Pa = e.annotationData), e.documentOwnerInfo && (e = e.documentOwnerInfo, jq(d, e), 3 == c && e.strPublisherGuid && (S.zd = e.strPublisherGuid)));
  z0(b);
  b.j = location.href;
  b.o = setInterval(() => {
    if (location.href != b.j) {
      var f = b.j.substring(b.j.lastIndexOf("slide=")).substring(9);
      b.j = location.href;
      var k = b.j.substring(b.j.lastIndexOf("slide=")).substring(9);
      L.sa({type:"AnnotationPreviewActiveSlideChanged", slideId:k, frameId:P.C}, null);
      if (b.m) {
        var l = b.m.indexOf(k);
        -1 != l && (L.sa({type:"annotatePreviewIndexChanged", index:l + 1, total:b.m.length, slideId:k}, null), w0(k, f));
      }
    }
  }, 100);
  L.fy(!1, !1);
  d = !0;
  "bAnnotationsAllowed" in a && (d = a.bAnnotationsAllowed);
  rl() && (d = !1);
  2 == c ? MM(W, d, !1) : E0(W, d);
  "bShowAnnotations" in a && W.i != a.bShowAnnotations && F0(W, a.bShowAnnotations);
  "bShowBaseAnnotations" in a && W.Ek != a.bShowBaseAnnotations && (W.Ek = a.bShowBaseAnnotations);
  "bShowNotesAnnotations" in a && W.bm != a.bShowNotesAnnotations && (W.bm = a.bShowNotesAnnotations);
  "bShowFeedbackAnnotations" in a && W.am != a.bShowFeedbackAnnotations && (W.am = a.bShowFeedbackAnnotations);
  w0(a.curSlideId, null);
}
class G0 extends ph {
  static get g() {
    return "EVT_SLIDE_URL_CHANGE";
  }
  constructor() {
    super();
    this.i = "";
    this.G = this.M = !1;
    this.m = this.C = this.J = this.B = null;
    this.o = -1;
    this.j = "";
    this.g = this.g.bind(this);
    this.s = this.s.bind(this);
    this.v = this.v.bind(this);
    this.l = this.l.bind(this);
    this.u = this.u.bind(this);
  }
  s(a) {
    var b = An();
    b = Yg(b) ? b : null;
    null != b && Ss(S, b) && Ch() && (this.g(a), P.u = !0, mw(L.mb(), !1, !1));
  }
  g(a) {
    var b = Ul();
    Gk(P) && (b = window.location.href);
    if (-1 != b.indexOf("docs.google.com/presentation/d/")) {
      if (window == window.top || Gk(P) || XI(), (window == window.top || Gk(P)) && (b = Rk(P)) && 0 != b.length) {
        var c = No();
        mv(b, c);
        if (a) {
          for (b = 0; b < a.length; b++) {
            c = a[b];
            var d = Oo(S);
            if (d && c in d.Pa) {
              d = console;
              var e = d.log, f = c;
              let k = Oo(S);
              k && delete k.Pa[c];
              e.call(d, "Edit Mode: Deleted data for", f, void 0);
            }
          }
        }
        S.ol();
      }
    } else {
      ml(P) && P.g && P.g.ol();
    }
  }
  v(a, b) {
    if (window == window.top && a != b && -1 != a.indexOf("docs.google.com/presentation/d/") && -1 != b.indexOf("docs.google.com/presentation/d/")) {
      b = this.i;
      q0(this, Rk(P));
      a = No();
      b.length && mv(b, a);
      a = !1;
      if (b = Oo(S)) {
        a = b.uh;
      }
      $o();
      b && b.Rj(a);
      a = kv(this.i);
      this.dispatchEvent(new CustomEvent(G0.g, {detail:{}}));
      a && (L.Qz(a, !1), x0(!1), W.i || y0(W));
    }
  }
  l(a) {
    if (this.i != a) {
      console.log(`Slide Changed to ${a}`);
      var b = No();
      let c = !1, d = Oo(S);
      d && (c = d.uh);
      mv(this.i, b);
      $o();
      d && d.Rj(c);
      if (b = kv(a)) {
        L.Qz(b, !1), x0(!1), W.i || y0(W);
      }
      q0(this, a);
    }
  }
  u() {
    if (!(P.i || P.m || Gk(P))) {
      var a = !yw(Ql) && "" != tw(), b = Xo ? Xo.Nk() : !1, c = A(Lo) ? !1 : YX(), d = Yo ? Yo.Nk() : !1;
      if (In.i || xG.Sw() || c || PZ(L.Pb()) || S.u || b || d || a) {
        S.u = !1;
        c = null;
        var e = bl(1);
        e && (c = Object.assign({}, e));
        e = window.parent;
        var f = e.postMessage, k = this.i;
        let l = No();
        mv(k, l);
        k = [];
        A(Lo) || (k = Zp(Lo.be));
        lv(k);
        k = {};
        k.pageAnnotations = iv();
        k.pageData = L.yp();
        k.bAppliedEditModeAnnotations = this.G;
        f.call(e, {type:"ANNOTATE_SEND_ANNOTATION_DATA_IFRAME_TO_PARENT", annotationData:k, bAnnotationDoneInPresentationMode:In.i || xG.Sw() || PZ(L.Pb()) || b || d, bLoadedSavedAnnotations:S.Jh || a, savedAnnotationGuid:An(), savedAnnotationPath:Cn(), savedAnnotationVersionNo:st(), bMediaContentModified:L.Pb().Xm, publisherCoTeacherInfo:c, arrDeletedSlideId:this.B, presentationRefAnnotationId:this.J, presentationRefAnnotationGuid:this.C, uDocAccessedAs:S.m, tempAnnotGUID:tw(), arrUnSavedMediaData:Yv(), 
        strAssessmentFileGuid:Ws(), oLivefeed:et(), bAssessmentContentModified:A(Lo) ? !1 : YX(),}, "*");
      } else {
        window.parent.postMessage({type:"AnnotateSlidePresentationExitNoAnnotationData", arrDeletedSlideId:this.B, presentationRefAnnotationId:this.J, presentationRefAnnotationGuid:this.C}, "*");
      }
    }
  }
}
var lw = new G0();
const ol = Object.freeze({Vr:0, Or:1, Iv:2, Jv:3, Rt:4, At:5, Zx:6});
var yk = "SlidesParent", wk = "CanvasContainerEdit", xk = "CanvasEdit", Ak = "BlueBorder";
class H0 {
  constructor(a, b, c, d, e, f, k, l, n) {
    this.i = a;
    this.l = b;
    this.g = c;
    this.o = d;
    this.s = e;
    this.j = f;
    this.v = k;
    this.u = l;
    this.m = n;
  }
}
function nD(a) {
  return a.g == ol.Iv || a.g == ol.Zx;
}
function oD(a, b) {
  let c = b.getBoundingClientRect();
  c.width = b.clientWidth;
  if (nD(a) || a.g == ol.Rt) {
    if (a = document.getElementsByClassName(nD(a) ? Ri("PresentationNavigation") : Ri("ViewNavigation"))[0]) {
      c.height = b.clientHeight - parseFloat(getComputedStyle(a).height.slice(0, -2));
    }
  } else if (I0(a)) {
    a = a.Gj ? a.Gj : a.s;
    let d = a.getBoundingClientRect();
    b = b.getBoundingClientRect();
    c = {};
    c.y = Math.max(b.y, d.y);
    c.top = c.y;
    c.bottom = Math.min(b.bottom, d.y + a.clientHeight);
    c.x = Math.max(b.x, d.x);
    c.left = c.x;
    c.right = Math.min(b.right, d.x + a.clientWidth);
    c.width = c.right - c.left;
    c.height = c.bottom - c.top;
  }
  return c;
}
function I0(a) {
  return a.g == ol.Vr || a.g == ol.Or;
}
function J0(a) {
  a.g == ol.Vr ? (a.Al = vk(), a.Gj = document.getElementsByClassName(Ri("WorkspaceEdit"))[0]) : a.g == ol.Or ? (a.Al = zk(), a.Gj = document.getElementsByClassName(Ri("WorkspaceEdit"))[0]) : nD(a) ? (a.Al = document.getElementsByClassName(Ri("WorkspacePresentorView"))[0], a.Al || (a.Al = document.getElementsByClassName(Ri("WorkspacePresentation"))[0])) : a.g == ol.Rt && (a.Al = document.getElementsByTagName(Ri("WorkspaceView"))[0]);
}
function K0(a) {
  if (a.g == ol.Vr) {
    var b = a.N;
    b = -1 != b.indexOf("docs.google.com/presentation/d/") ? rk() : -1 != b.indexOf("canva.com/design") ? document.getElementsByTagName("main")[0] : void 0;
  } else {
    b = nD(a) ? document.getElementsByClassName(Ri("CountDisplay"))[0] : a.g == ol.Or ? document.getElementsByTagName("main")[0] : null;
  }
  a.g == ol.Rt && -1 == a.l ? (clearInterval(a.l), a.l = setInterval(a.B.bind(a), 100)) : b && window == window.top && (a.v && a.v.disconnect(), clearInterval(a.l), a.v = new MutationObserver(a.B.bind(a)), a.v.observe(b, {subtree:!0, attributes:!0, characterData:nD(a)}), a.l = setInterval(a.B.bind(a), 100));
}
function L0(a) {
  let b = a.o;
  a.g == ol.Vr ? a.o = vk() : nD(a) ? a.o = document.getElementsByClassName(Ri("CanvasPresentation"))[0] : a.g == ol.Rt ? a.o = document.getElementsByClassName(Ri("CanvasView"))[0] : a.g == ol.Or && (a.o = zk());
  b && !b.isSameNode(a.o) && a.B();
  return a.o;
}
function M0(a) {
  let b = No();
  a = a.Mr();
  mv(a, b);
}
function N0(a, b) {
  b ? (a.J = !1, a.j.j(!0), O0(W), a.j.v()) : (a.j.u(), a.j.j(!1), y0(W));
}
function P0(a, b) {
  Kn("", "Keep annotations from Slideshow?", "DISCARD", "KEEP", function() {
    S.Jh = a.i.Jh;
    lt(a.i.pg, a.i.Uf);
    mt(a.i.fj);
    rt(a.i.bg);
    a.Fl.MO(a.i.pg, a.i.fj, a.i.Uf, a.i.pg, a.i.fj);
  }, function() {
    $o();
    yn(null);
    a.i = {pg:-1, fj:null, Uf:"", bg:-1, Pa:{}, Jh:!1};
    a.j.g({pageAnnotations:b});
  });
}
function Q0() {
  Kn("", "Slide wise annotations are not supported in this mode.", "", "OK", function() {
  }, function() {
  });
}
class R0 {
  constructor(a, b, c) {
    this.N = c;
    this.m = this.g = null;
    this.l = this.u = -1;
    this.J = !1;
    this.v = null;
    this.G = "-1";
    this.j = a;
    this.Fl = b;
    this.i = {pg:-1, fj:null, Uf:"", bg:-1, Pa:{}, Jh:!1};
    this.s = this.Gj = this.o = this.Al = null;
    document.addEventListener("focusout", function(d) {
      d.stopImmediatePropagation();
    }, {capture:!0});
  }
  C() {
    this.j.i();
  }
  M() {
    J0(this);
    this.C();
  }
  Mr() {
    if (this.g == ol.Vr) {
      var a = this.o;
      a ? a.hasAttribute("data-page-id") || (a = vk()) : a = vk();
      return (a ? a.getAttribute("data-page-id") : -1).toString();
    }
    if (nD(this)) {
      return a = document.getElementsByClassName(Ri("CountDisplay"))[0], (a ? parseInt(a.innerHTML.split("/")[0]) - 1 : -1).toString();
    }
    if (this.g == ol.Or) {
      return (a = this.o) ? a.hasAttribute("data-page-id") || (a = zk()) : a = zk(), (a ? a.getAttribute("data-page-id") : -1).toString();
    }
    if (this.g == ol.Rt) {
      return a = window.location.href, -1 == a.indexOf("#") ? "0" : (parseInt(a.substring(a.indexOf("#") + 1)) - 1).toString();
    }
  }
  ba() {
    var a = document.getElementsByClassName(Ri("CountDisplay"))[0], b = document.getElementsByClassName(Ri("Grid"))[0], c = this.g;
    -1 != this.N.indexOf("view") ? this.g = ol.Rt : a ? this.g = document.getElementsByClassName(Ri("SlideSelector"))[0] ? ol.Zx : ol.Iv : b ? this.g = ol.At : document.getElementsByClassName(Ri("SlideSelector"))[0] ? this.g = ol.Jv : (a = document.getElementsByClassName(Ri(yk))[0], b = document.getElementsByTagName("footer")[0], b && b.getElementsByTagName("nav")[0] || a || document.getElementsByClassName(Ri("WorkspacePresentation"))[0]) ? document.getElementsByClassName(Ri("WorkspacePresentation"))[0] || 
    (this.g = ol.Vr) : this.g = ol.Or;
    if (c != this.g) {
      if (this.m = c, console.log(`Canva Mode changed to ${this.g}`), this.j.m(), J0(this), I0(this) ? (this.s = document.getElementsByClassName(Ri(yk))[0]) ? this.s.addEventListener("touchmove", this.M.bind(this), {passive:!1}) : this.Gj && this.Gj.addEventListener("scroll", this.C.bind(this), {passive:!1}) : (this.Gj && this.Gj.removeEventListener("scroll", this.C.bind(this)), this.s && this.s.addEventListener("touchmove", this.M.bind(this))), window == window.top && this.m != ol.Jv && this.m != 
      ol.At && M0(this), this.g != ol.Jv && this.g != ol.At) {
        this.J && N0(this, !0);
        this.m != ol.Jv && this.m != ol.At || q0(lw, this.Mr());
        K0(this);
        c = JSON.parse(JSON.stringify(iv()));
        if (this.m != ol.Vr && this.m != ol.Or && this.m != ol.At || this.g != ol.Iv && this.g != ol.Zx) {
          !I0(this) || this.m != ol.Iv && this.m != ol.Zx || 0 == Object.keys(iv()).length || (a = JSON.parse(JSON.stringify(c)), this.j.o() && (c = this.Fl.Xm ? v0(this.i.Pa, iv(), this.G) : this.i.Pa, P0(this, a)));
        } else {
          this.j.s();
          this.Fl.Xm = !1;
          Jo.sA();
          Ko.sA();
          a = An();
          b = Cn();
          let d = st(), e = JSON.parse(JSON.stringify(iv()));
          this.i = {pg:-1, fj:a, Uf:b, bg:d, Pa:e, Jh:S.Jh};
        }
        this.j.i();
        this.j.l();
        $o();
        this.j.g({pageAnnotations:c});
      } else {
        clearInterval(this.l), this.l = -1, this.J = !0, Q0(), N0(this, !1);
      }
    }
    -1 == this.u && (this.u = setInterval(this.ba.bind(this), 100));
  }
  B() {
    if (!this.J) {
      var a = this.Mr();
      a != this.G && I0(this) && J0(this);
      "-1" != a && lw.l(a);
      this.G = a;
    }
  }
  ol() {
    M0(this);
    S.ol();
  }
  U() {
    -1 != this.u && (clearInterval(this.u), this.u = -1);
    -1 != this.l && (clearInterval(this.l), this.l = -1);
    this.v && (this.v.disconnect(), this.v = null);
    document.removeEventListener("focusout", function(a) {
      a.stopImmediatePropagation();
    }, {capture:!0});
    this.Gj && this.Gj.removeEventListener("scroll", this.C.bind(this));
    this.s && this.s.removeEventListener("touchmove", this.M.bind(this));
  }
}
;var Xo = null, Yo = null, Kv = null, mC = null, V = null, mQ = null, Lo = null, WB = null, Jv = null, fI = null, bs = null, eI = null, m_ = null, XM = null;
function AO(a, b) {
  let c = document.getElementsByTagName("video");
  if (c && 0 < c.length) {
    for (let d = 0; d < c.length; d++) {
      c[d].className.includes("AnnotatePluginVideoElement") && (c[d] != a || b) && c[d].pause();
    }
  }
}
class S0 {
  constructor(a, b) {
    Xo = new YC();
    Yo = new JD();
    mC = new HQ();
    Kv = new ZY();
    WB = new l_();
    Lo = new kY(a);
    Jv = new XP(b);
    m_ = new s_();
    XM = new RY();
    this.g = this.g.bind(this);
  }
  g(a) {
    (a = a.target) && a.className && a.className.includes("AnnotatePluginVideoElement") && AO(a, !1);
  }
  i(a) {
    a.preventDefault();
    TA && Jv && (WA(), cE(Jv.Pc, !1, !1));
  }
  m(a) {
    a.preventDefault();
    TA && VA && Jv && (WA(), cE(Jv.Pc, !1, !0));
  }
  j(a) {
    a.preventDefault();
    SA() && Jv && (WA(), cE(Jv.Pc, !0, !1));
  }
  l(a) {
    a.preventDefault();
    SA() && TA && VA && Jv.Pc && (WA(), cE(Jv.Pc, !0, !0));
  }
}
;function hp(a) {
  a.i = T0(a);
  a.i && (a.u = a.i.getContext("2d"), a.u.clearRect(0, 0, a.i.width, a.i.height));
}
function ip(a) {
  a.l = U0(a);
  a.l && (a.G = a.l.getContext("2d"), a.G.clearRect(0, 0, a.l.width, a.l.height));
}
function jp(a) {
  a.o = V0(a);
  a.o && (a.J = a.o.getContext("2d"), a.J.clearRect(0, 0, a.o.width, a.o.height));
}
function kp() {
  var a = Ao;
  a.j = Mx(a);
  a.j && (a.B = a.j.getContext("2d"), a.B.clearRect(0, 0, a.j.width, a.j.height));
}
function tp(a) {
  if (si() && (A(a.C) || !a.C.Lc())) {
    a = L;
    var b = a.kd;
    if (Yo) {
      var c = [];
      let f = hv();
      for (let k = 0; k < f.length; k++) {
        if (f[k].Mc) {
          var d = f[k], e = c;
          e.push({top:d.W.Nb.top, left:d.W.Nb.left, id:d.Nb.id});
          e.push({top:d.W.Kc.top, left:d.W.Kc.left, id:d.Kc.id});
          e.push({top:d.W.Gc.top, left:d.W.Gc.left, id:d.Gc.id});
          e.push({top:d.W.tb.top, left:d.W.tb.left, id:d.tb.id});
          e.push({top:d.W.dc.top, left:d.W.dc.left, id:d.dc.id});
          e.push({top:d.W.Oc.top, left:d.W.Oc.left, id:d.Oc.id});
          e.push({top:d.W.Ec.top, left:d.W.Ec.left, id:d.Ec.id});
          e.push({top:d.W.Dc.top, left:d.W.Dc.left, id:d.Dc.id});
        }
      }
    } else {
      c = [];
    }
    b.call(a, {type:"ANNOTATE_PDF_REPAINT", screenShadePosition:c});
  }
}
function lp(a) {
  a.m = B0(a);
  a.m && (a.s = a.m.getContext("2d"), a.s.clearRect(0, 0, a.m.width, a.m.height));
}
function Mx(a) {
  return document.getElementById(a.pa);
}
function HI(a) {
  if (a.G && W.bm && (2 != S.g || null != Ys(S))) {
    ip(a);
    for (var b = Et(), c = 0; c < b.length; c++) {
      W0(b[c], a.G);
    }
    b = wu();
    for (c = 0; c < b.length; c++) {
      Es(b[c]) ? Jo.uf(b[c], 2) : Fs(b[c]) && Ko.uf(b[c], 2);
    }
    b = mu();
    for (c = 0; c < b.length; c++) {
      Ro.mq(b[c]);
    }
    $Z(2);
    W.bm && tp(a);
  }
}
function hO(a) {
  var b = Ao;
  if (P.i) {
    var c = S.s;
    if (c) {
      var d = null;
      1 == a ? (qp(), d = S, d = d.i ? d.i.Pa[c] : null) : 2 == a ? (sp(), d = S, d = d.Ya ? d.Ya.Pa[c] : null) : 3 == a && (rp(), d = S, d = d.La ? d.La.Pa[c] : null);
      if (d) {
        if (d.arrAnnotations) {
          for (c = d.arrAnnotations, d = 0; d < c.length; d++) {
            var e = zo(c[d], !1);
            if (1 == a) {
              var f = S;
              f.i && f.i.F.push(e);
            } else {
              2 == a ? (f = S, f.Ya && f.Ya.F.push(e)) : 3 == a && (f = S, f.La && f.La.F.push(e));
            }
          }
        }
        GN(b, a, [], !0);
      }
    }
  }
}
function GN(a, b, c, d) {
  if (1 == b) {
    if (a.u && W.Ek && (Ph() || Qh() || M.g || !Ks(1))) {
      hp(a);
      a.s && lp(a);
      var e = Dt();
      for (b = 0; b < e.length; b++) {
        W0(e[b], a.u);
      }
      e = vu();
      for (b = 0; b < e.length; b++) {
        Es(e[b]) ? Jo.uf(e[b], 1) : Fs(e[b]) && Ko.uf(e[b], 1);
      }
      e = lu();
      for (b = 0; b < e.length; b++) {
        Ro.mq(e[b]);
      }
      $Z(1);
      A(Lo) || MX();
      A(Yo) || ED();
      (d || -1 != c.indexOf("arrCommentElement")) && L.Zf().lq(1);
      W.Ek && tp(a);
    }
  } else {
    if (2 == b) {
      HI(a);
    } else {
      if (3 == b && a.J && W.am && 3 != ql()) {
        jp(a);
        e = Ft();
        for (b = 0; b < e.length; b++) {
          W0(e[b], a.J);
        }
        e = xu();
        for (b = 0; b < e.length; b++) {
          Es(e[b]) ? Jo.uf(e[b], 3) : Fs(e[b]) && Ko.uf(e[b], 3);
        }
        e = nu();
        for (b = 0; b < e.length; b++) {
          Ro.mq(e[b]);
        }
        $Z(3);
        (d || -1 != c.indexOf("arrCommentElement")) && L.Zf().lq(3);
        W.am && tp(a);
      }
    }
  }
}
function PX(a, b, c) {
  var d = Ao;
  let e = L.uv();
  if (null != e) {
    if (a > e.x && a < e.x + e.width && b > e.y && b < e.y + e.height) {
      return !0;
    }
  } else if (c && d.i && a > d.i.offsetLeft && a < d.i.offsetLeft + d.i.offsetWidth && b > d.i.offsetTop && b < d.i.offsetTop + d.i.offsetHeight) {
    return !0;
  }
  return !1;
}
function x0(a) {
  var b = Ao;
  if (!W.Jb && (!si() || Vk(P))) {
    var c = document.documentElement.clientWidth < Math.floor(window.visualViewport.width) ? document.documentElement.clientWidth : Math.floor(window.visualViewport.width), d = document.documentElement.clientHeight < Math.floor(window.visualViewport.height) ? document.documentElement.clientHeight : Math.floor(window.visualViewport.height), e = c, f = d, k = window.scrollY, l = window.scrollX;
    "relative" == window.getComputedStyle(document.body).getPropertyValue("position") && (k -= parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-top")), l -= parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-left")));
    var n = L.uv();
    n && (k = n.y, l = n.x, c >= n.x + n.width && d >= n.y + n.height ? (e = n.width, f = n.height) : (c >= n.x + n.width ? e = n.width : e = c - l, d >= n.y + n.height ? f = n.height : f = d - k, 0 > e && (e = 1), 0 > f && (f = 1)));
    c = e;
    d = f;
    n = k;
    var p = l;
    b.i = T0(b);
    b.i && W.Ek && (b.i.style.width = c + "px", b.i.style.height = d + "px", b.i.width == c && a || (b.i.width = c), b.i.height == d && a || (b.i.height = d), b.i.style.top = n + "px", b.i.style.left = p + "px", b.i.style.display = "block", si() && (b.i.style.display = "none"), b.i.style.position = "absolute", b.u = b.i.getContext("2d"));
    c = e;
    d = f;
    n = k;
    p = l;
    b.j = Mx(b);
    b.j && (b.j.style.width = c + "px", b.j.style.height = d + "px", b.j.width == c && a || (b.j.width = c), b.j.height == d && a || (b.j.height = d), b.j.style.top = n + "px", b.j.style.left = p + "px", b.j.style.display = "block", b.j.style.position = "absolute", b.B = b.j.getContext("2d"));
    c = e;
    d = f;
    n = k;
    p = l;
    b.m = B0(b);
    b.m && (b.m.style.width = c + "px", b.m.style.height = d + "px", b.m.width == c && a || (b.m.width = c), b.m.height == d && a || (b.m.height = d), b.m.style.top = n + "px", b.m.style.left = p + "px", b.m.style.display = "block", b.m.style.position = "absolute", b.s = b.m.getContext("2d"));
    b.dispatchEvent(new CustomEvent(X0.g, {detail:{}}));
    a = e;
    c = f;
    d = k;
    n = l;
    b.l = U0(b);
    if (p = b.l) {
      p = W.bm;
    }
    p && (2 == ql() || 3 == ql() ? (b.l.style.width = a + "px", b.l.style.height = c + "px", b.l.width = a, b.l.height = c, b.l.style.top = d + "px", b.l.style.left = n + "px", b.l.style.display = "block", si() && (b.l.style.display = "none"), b.l.style.position = "absolute", b.G = b.l.getContext("2d")) : b.l.style.display = "none");
    b.o = V0(b);
    b.o && W.am && (2 == ql() || 3 == ql() ? (b.o.style.width = e + "px", b.o.style.height = f + "px", b.o.width = e, b.o.height = f, b.o.style.top = k + "px", b.o.style.left = l + "px", b.o.style.display = "block", si() && (b.o.style.display = "none"), b.o.style.position = "absolute", b.J = b.o.getContext("2d")) : b.o.style.display = "none");
    T0(b) && Mx(b) && L.rA();
  }
}
function B0(a) {
  return document.getElementById(a.N);
}
function C0(a) {
  a.m = document.createElement("canvas");
  a.m.id = a.N;
  a.m.style.display = "none";
  a.m.style.pointerEvents = "none";
  ik(a.m);
  document.body.appendChild(a.m);
}
function D0() {
  for (var a = Ao; document.getElementById(a.N);) {
    document.getElementById(a.N).remove();
  }
  a.m = null;
  a.s = null;
}
function Y0() {
  var a = Ao;
  a.C && a.C.Xf(a.B);
}
function T0(a) {
  return document.getElementById(a.ba);
}
function Z0(a, b) {
  a.i = T0(a);
  a.i && (a.i.style.pointerEvents = b);
}
function $0(a) {
  var b = Ao;
  b.i = T0(b);
  b.i && (b.i.style.zIndex = a);
}
function a1(a) {
  var b = Ao;
  b.i = T0(b);
  b.i && (b.i.style.display = a ? "block" : "none");
}
function b1(a, b) {
  a.j = Mx(a);
  a.j && (a.j.style.cursor = b);
}
function c1(a) {
  var b = Ao;
  b.j = Mx(b);
  b.j && (b.j.style.display = a ? "block" : "none");
}
function d1(a, b) {
  a.j = Mx(a);
  a.j && (a.j.style.pointerEvents = b);
}
function U0(a) {
  return document.getElementById(a.ia);
}
function e1(a) {
  var b = Ao;
  b.l = U0(b);
  b.l && (b.l.style.display = a ? "block" : "none");
}
function f1(a, b) {
  a.l = U0(a);
  a.l && (a.l.style.pointerEvents = b);
}
function V0(a) {
  return document.getElementById(a.ea);
}
function g1(a) {
  var b = Ao;
  b.o = V0(b);
  b.o && (b.o.style.display = a ? "block" : "none");
}
function h1(a, b) {
  a.o = V0(a);
  a.o && (a.o.style.pointerEvents = b);
}
function i1(a, b, c) {
  var d = Ao, e = Ao;
  sk(1 == b ? T0(e) : 2 == b ? U0(e) : 3 == b ? V0(e) : null, a);
  1 == b && c && sk(B0(d), a);
  a && GN(d, b, [], !0);
}
function j1(a, b, c, d, e) {
  if (b) {
    var f = b.width, k = b.height;
    si() ? (k = P.D, f = k.wc[c].width, k = k.wc[c].height) : P.m && (f = zH.RH, k = zH.QH);
    b.width != f && (b.width = f);
    b.height != k && (b.height = k);
    d = (d - 1) / f;
    var l = (e - 1) / k;
    e = b.getContext("2d");
    e.clearRect(0, 0, b.width, b.height);
    e.save();
    e.scale(d, l);
    if (a) {
      if (l = a.arrAnnotations) {
        for (d = 0; d < l.length; d++) {
          var n = zo(l[d], !0), p = n.Xe().width;
          Jk(P) && (p /= n.Nn());
          p = f / p;
          n.Vn({x:0, y:0, width:f, height:k});
          n.Km(p);
          p = e;
          if (si() && -1 != n.S) {
            let t = P.D, x = yo(t, n.S);
            x == c && (p.save(), p.beginPath(), p.rect(0, 0, Math.ceil(t.wc[x].width), Math.ceil(t.wc[x].height)), p.clip(), n.Xf(p), p.restore());
          } else {
            n.Xf(p);
          }
        }
      }
      if (a = a.arrTextElements) {
        f = {x:0, y:0, width:f, height:k}, Jo.Tz(a, b, c, si(), f), Ko.Tz(a, b, c, si(), f);
      }
    }
    e.restore();
  }
}
function k1(a, b, c, d) {
  c = 160 * c / d;
  d = document.createElement("canvas");
  j1(a, d, b, c, 160);
  return d.getContext("2d").getImageData(0, 0, c, 160);
}
function l1(a) {
  var b = Ao;
  b.j = Mx(b);
  b.j && (b.j.style.zIndex = a);
  b.l = U0(b);
  b.l && (b.l.style.zIndex = a);
  b.o = V0(b);
  b.o && (b.o.style.zIndex = a);
  b.m = B0(b);
  b.m && (b.m.style.zIndex = a);
}
function m1() {
  var a = Ao;
  Z0(a, "none");
  d1(a, "none");
  f1(a, "none");
  h1(a, "none");
}
function n1() {
  var a = Ao;
  1 == S.g ? Z0(a, "auto") : Z0(a, "none");
  2 == S.g ? f1(a, "auto") : f1(a, "none");
  3 == S.g ? h1(a, "auto") : h1(a, "none");
}
function W0(a, b) {
  if (!a.It || !a.It()) {
    if (si() && -1 != a.S) {
      let d = P.D, e = yo(d, a.S);
      if (-1 != e) {
        b.save();
        b.beginPath();
        var c = hl(d, e, new il(d.scrollX, d.scrollY));
        b.rect(-c.$a, -c.Ua, jl(d, e), kl(d, e));
        b.clip();
        a.Xf(b);
        b.restore();
      }
    } else {
      a.Xf(b);
    }
  }
}
function o1() {
  var a = Ao;
  a.v && a.s && (xo(a.v), a.v.Xf(a.s));
}
function p1(a) {
  a.type = "ANNOTATE_SEND_PAGE_THUMBNAIL_FOR_BG";
  si() ? window.postMessage(a, "*") : "bGoogleSlides" in a && s0(a.contentUrl, function(b) {
    b && (a.imgData = b, window.postMessage(a, "*"));
  });
}
function q1(a) {
  let b = a.uPageIndex;
  var c = a.strStudentGuid, d = a.uWidth;
  let e = a.uHeight;
  var f = {};
  f.pageIndex = b;
  f.strStudentGuid = c;
  let k = document.createElement("canvas");
  k.width = d;
  k.height = e;
  let l = k.getContext("2d"), n = !1;
  c = {bBaseThumbnail:!1, strStudentGuid:c};
  let p = document.createElement("canvas");
  if ("notesAnnotationData" in a) {
    var t = a.notesAnnotationData;
    j1(t, p, b, d, e);
    l.drawImage(p, 0, 0, d, e, 0, 0, d, e);
    let x = l.getImageData(0, 0, k.width, k.height);
    f.imgNotesData = x;
    c.notesAnnotationImgData = x;
    si() && t && "arrTextHighlights" in t && (t = t.arrTextHighlights) && 0 < t.length && (n = !0, c.arrNotesTextHighlights = t);
  }
  l.clearRect(0, 0, d, e);
  "feedbackAnnotationData" in a && (a = a.feedbackAnnotationData, j1(a, p, b, d, e), l.drawImage(p, 0, 0, d, e, 0, 0, d, e), d = l.getImageData(0, 0, k.width, k.height), f.imgFeedbackData = d, c.feedbackAnnotationImgData = d, si() && a && "arrTextHighlights" in a && (d = a.arrTextHighlights) && 0 < d.length && (n = !0, c.arrFeedbackTextHighlights = d));
  n ? (f = P.D, c.pageIndex = b, c.uPageWidth = f.wc[b].width, c.uPageHeight = f.wc[b].height, c.type = "ANNOTATE_PDF_GET_DRAWN_TEXT_HIGHLIGHTS", L.kd(c)) : (f.type = "ANNOTATE_SEND_STUDENT_PAGE_THUMBNAIL_FOR_BG", -1 != window.location.href.indexOf("https://annotate.net") && window.postMessage(f, "*"));
}
class X0 extends ph {
  static get g() {
    return "EVT_SET_SELECTION_MANAGER_ON_RESET_CANVAS";
  }
  constructor() {
    super();
    this.ba = "AnnotateAnnotationCaptureCanvas";
    this.pa = "AnnotateAnnotationSelectionCanvas";
    this.ia = "AnnotateNotesAnnotationCaptureCanvas";
    this.ea = "AnnotateFeedbackAnnotationCaptureCanvas";
    this.N = "AnnotateAnnotationRemoteSelectionCanvas";
    this.v = this.C = this.s = this.m = this.J = this.o = this.G = this.l = this.B = this.j = this.u = this.i = null;
  }
  get g() {
    return this.C;
  }
  set g(a) {
    this.C = a;
  }
  nj() {
    this.s = this.m = this.J = this.M = this.G = this.l = this.B = this.j = this.u = this.i = null;
  }
}
var Ao = new X0();
function r1(a) {
  return "annotateImportPdf" == a || "annotateOpenFile" == a ? !0 : !1;
}
function s1(a) {
  Kn("", '<div style="display: inline-flex;flex-wrap: wrap;">Document imported successfully. Click <span id="AnnotateRedirectButton" style="text-decoration: underline;padding-left: 4px;padding-right: 4px;color: blue;cursor: pointer;">here</span> to open.</div>', "", "CLOSE", () => {
  }, () => {
    ii("10.12.4");
  }, () => {
    ii("10.12.3");
    a.l();
  }, null, !1, () => {
    ii("10.12.4");
  });
}
function t1(a) {
  var b = u1;
  b.g = !1;
  if (a.bSuccessful) {
    s1(b);
  } else {
    b = !1;
    let c = "Unable to import document.";
    a.bInvalidRange && (c = "Page range not found. Unable to import document.", b = !0);
    gC(c, b);
  }
}
function v1() {
  var a = u1;
  a.v && a.m && a.m();
}
function w1(a) {
  Kn("", "Opening dashboard in new tab...", "", "", () => {
  }, () => {
  }, null, "CANCEL", !1, () => {
    a.v = !1;
    a.m = null;
  });
}
function x1(a, b) {
  Kn("", '<div style="display: inline-flex;flex-wrap: wrap;">Unable to locate account login. Click <span id="AnnotateRedirectButton" style="text-decoration: underline;color: blue;cursor: pointer;padding-left: 4px;padding-right: 4px;">here</span> to open your dashboard in a new tab.</div>', "", "CLOSE", () => {
  }, () => {
    ii("10.12.6");
  }, () => {
    ii("10.12.5");
    L.sa({type:"annotateOpenAnnotateTab"}, null);
    a.v = !0;
    a.m = b;
    w1(a);
  }, null, !1, () => {
    ii("10.12.6");
  });
}
function y1(a) {
  var b = u1;
  -1 != b.s && (clearTimeout(b.s), b.s = -1);
  a.bSuccessful ? (L.sa({type:"annotateSwitchToAnnotateTab"}, null), Nn()) : (b = "Could not open notebook.", a.bAnotherFileOpen && (b += " Another notebook/ clip is open."), fC(b));
}
function z1(a) {
  var b = u1;
  b.g && (-1 == b.j && !Ch() || null == b.i && Ch()) && (a.bSuccessful ? (b.j = a.uFileId, b.i = a.strGuid, b.u = a.uEstTime, Jn("Processing your document...", !1, !0, b.u, 26, 95)) : gC("Unable to import document.", !1));
}
function A1(a) {
  var b = u1;
  Jn("Uploading your document...", !1, !0, b.u, 1, 25);
  b.o = setTimeout(() => {
    b.g = !1;
    x1(b, a);
  }, 3000);
}
function B1() {
  var a = u1;
  -1 != a.o && (clearTimeout(a.o), a.o = -1);
}
class C1 extends EventTarget {
  constructor() {
    super();
    this.j = this.s = -1;
    this.i = null;
    this.g = !1;
    this.o = -1;
    this.u = 0;
    this.v = !1;
    this.m = null;
    this.l = this.l.bind(this);
  }
  l() {
    let a = this;
    Jn("Opening notebook...");
    L.sa({type:"annotateOpenFileId", fileid:this.j, strGuid:this.i}, null);
    this.s = setTimeout(() => {
      x1(a, a.l);
    }, 1000);
  }
}
var u1 = new C1();
function D1(a) {
  var b = window.visualViewport.width + "px", c = window.visualViewport.height + "px";
  a.g && (a.g.style.width = b, a.g.style.height = c);
}
function E1(a, b) {
  a.g && (b ? (a.g.style.visibility = "visible", a.g.style.opacity = "1") : (a.g.style.visibility = "hidden", a.g.style.opacity = "0"), a.i.Sa(b && !M.g));
}
function F1(a) {
  null == a.g && (a.g = document.createElement("iframe"), a.g.style.zIndex = (parseInt(Yj) + 1).toString(), a.g.classList.add("AnnotateLivefeedSharedContentIFrame"), D1(a), document.body.appendChild(a.g), window.addEventListener("resize", a.j, a.O), a.i = new zz(), a.i.jb((parseInt(Yj) + 2).toString()), R(a.i, "extension_icon-close"), a.i.el.style.position = "fixed", R(a.i, "AnnotateFabButton"), a.i.uc("Close"), a.i.V(48, 48), Kj(a.i, () => {
    G1(a);
    a.dispatchEvent(new CustomEvent(H1.g));
  }), document.body.appendChild(a.i.el), E1(a, !1));
}
function G1(a) {
  a.g && (window.removeEventListener("resize", a.j, a.O), a.g.remove(), a.g = null, document.body.removeChild(a.i.el), a.i = null);
}
function I1(a, b, c) {
  a.g ? (a.g.addEventListener("load", () => {
    console.log("Content sharing Iframe loaded");
    c && c(!0);
  }), a.g.setAttribute("src", b)) : c && c(!1);
}
function J1(a) {
  return a.g && "visible" == a.g.style.visibility ? !0 : !1;
}
class H1 extends EventTarget {
  static get g() {
    return "EVT_SHARED_CONTENT_IFRAME_CLOSE_CLICKED";
  }
  constructor() {
    super();
    this.O = {capture:!0, passive:!1};
    this.j = this.j.bind(this);
    this.i = this.g = null;
  }
  j(a) {
    J1(this) && a.target == window && D1(this);
  }
}
;function zh(a) {
  var b = W;
  console.log(`[event server] connected: ${a}`);
  if (Lk()) {
    IB && IB.ja();
    b = kS();
    for (let c = 0; c < b.length; c++) {
      console.log(`>> sent connected status to iframe ${a}`), b[c].contentWindow.postMessage({type:"ANNOTATE_FORWARD_PARENT_ANNOTATION_DATA_TO_IFRAME", uLivefeedType:V ? V.l : -1, bEventServerConnected:a});
    }
  } else {
    Jh() && V && -1 != V.l && !P.i ? a ? (b.j = !1, IB && IB.ja()) : b.j || (b.j = !0, IB || (a = new TB(), document.body.appendChild(a.el), IB = a), IB.Yr("Server unreachable", !0, !0)) : (b.j = !1, IB && IB.ja());
  }
}
function bm(a, b, c, d) {
  a && (b ? (a.style.removeProperty("opacity"), a.style.removeProperty("pointer-events"), a.style.cursor = "pointer") : (a.style.opacity = "0.44", d && (a.style.pointerEvents = "none"), c && (a.style.cursor = "default")));
}
function to() {
  var a = W;
  let b;
  b = Rl() && L.Ye() ? L.Ye().pc() : Jk(P) && L.Bm() ? L.Bm().pc() : Pv.pc();
  !b || a.j ? !b && !a.j && Rl() && Kh() && L.Ye() && L.Ye().hd().bNonAnnotateStudent && 1 == L.Ye().hd().bNonAnnotateStudent && (a.j = !0, gw("Student not in Annotate course. Your changes will not be saved.", !0)) : Kh() ? "RETURNED" == b.state ? (a.j = !0, gw("This assignment has not been turned in by the student. Your changes will not be saved.", !0)) : "CREATED" == b.state && (a.j = !0, gw("This assignment has not been turned in by the student. Your changes will not be saved.", !0)) : Ph() && 
  "TURNED_IN" == b.state && (a.j = !0, gw("This assignment has been turned in. Your changes will not be saved.", !0));
}
function iq(a, b, c) {
  if (S.g == b || Pl() && Fp() && 1 == b) {
    if (Lo) {
      var d = Lo;
      if (1 == b) {
        var e = d.m;
        e.mc(e.g, {});
        !c && d.ia && WX(d);
      }
    }
    Yo && (!c || yp()) && (d = BD(Yo)) && (pD(d, c), c && js(d), sD(d, c), d.cd && (c && d.Mc ? (d.cd.style.display = "block", d.cd.style.top = d.A.y + d.Ia + d.nb - 12 + "px", d.cd.style.left = d.A.x + d.Ga + d.fb - 12 + "px") : d.cd.style.display = "none"));
    (d = L.Zf()) && d.gy();
    if (pw && (d = pw, d.g && (d = d.g, !c && d.M))) {
      if (3 == d.N) {
        d.Xx(null);
        for (let k in d.tc) {
          var f = d.tc[k];
          dn(f, !1);
          e = d;
          if (f = f.j[5]) {
            for (let l = 0; l < f.length; l++) {
              if (f[l].g == e) {
                f.splice(l, 1);
                break;
              }
            }
          }
        }
        d.tc = {};
      } else {
        d.g.j = !1, MI(d.g), xI(d);
      }
    }
    c ? (K1(pw, !1), L1()) : UM(a, 1, b, null);
    FR(a);
    a = fq(1);
    si() ? L.kd({type:"ANNOTATE_FILE_CONTROL_CHANGED", bViewOnlyMode:a}) : P.o && P.Cm() && P.Cm().Wn(a);
  }
}
function Is(a) {
  let b = L.mb().Ja(), c = Ok(P);
  L.Ye();
  return (Kh() ? !b && !c || b && L.mb().Gf() ? !0 : !1 : !1) || M1(a);
}
function Pw() {
  return Mw.g == Uw || L.Bm() && 1 == L.Bm().Qq || Pv.g;
}
function Yx(a) {
  var b = W;
  return 1 == a ? b.Ek : 2 == a ? b.bm : 3 == a ? b.am : !0;
}
function AA() {
  var a = W;
  return 2 == S.g ? a.s : V && V.l != Ym && (!Kh() || fq(1)) || a.N ? !1 : !0;
}
function bB(a) {
  var b = document.getElementById("annotate-highlight-plugin-livefeed-popup-student-notes");
  b && (b = b.getElementsByClassName("annotate-highlight-plugin-popup-item-label")[0]) && (b.innerHTML = a ? "Disable notes" : "Enable notes");
}
function NF(a) {
  var b = document.getElementById("annotate-highlight-plugin-start-recording");
  if (!A(Jv) && !A(Jv.Pc) && b && document.getElementById("annotate-highlight-plugin-recording-toolbar")) {
    b = Jv.Pc;
    var c = N1(a);
    a = document.getElementById("annotate-highlight-plugin-start-recording");
    var d = document.getElementById("annotate-highlight-plugin-recording-toolbar");
    if (a && d) {
      if (b.Xj = c, b.Xj || b.Ji) {
        var e = L.Zf().ci();
        const f = e.Ce();
        (c = b.cg) && f && (e = e.vq, e == Og.em || e == Og.Hk) && (c = !1);
        a.style.cursor = "pointer";
        EP(b, a);
        d.style.display = b.cg && c ? "block" : "none";
      } else {
        EP(b, a), d.style.display = "none";
      }
    }
  }
}
function LI(a) {
  L.sa({type:"ANNOTATE_UPDATE_LAST_LOAD_ANNOTS_EXTRADATA", data:a}, null);
}
function UM(a, b, c, d) {
  mC && lC(mC) && (mC.i == jt ? XY(Kv) : 5 == mC.i ? XB(!1) : DQ(mC, !1));
  Sn();
  dL(P.s);
  O1(() => {
    P1(b, e => {
      mC && (mC.i = 1);
      if (1 == b) {
        FR(a);
        let f = Js(S, c);
        f && mq(f, f.su);
      }
      d && d(e);
    });
  });
}
function MM(a, b, c) {
  rl() && (b = !1);
  Ph() && (si() || P.i || Pl() ? (a.s != b && (E0(a, b), a.s || null == Oo(S) || (Jv.Pc.cg ? Vw(Jv.Pc) : c && (L.mb().ol(), mw(L.mb(), !1, !0)))), Qv(Ql, a.s)) : P.m && zH && (a = b, b = zH, b.Af && (b.np = a, L.sa({type:"annotateUpdateAnnotationsAllowed", bNotesAllowed:a, bSave:c, frameId:b.gh[b.Zc]}, null), console.log(`annotateUpdateAnnotationsAllowed forward to preview bNotesAllowed ${a}`))));
}
function YN(a, b) {
  var c = W;
  if (a != c.J) {
    c.J = a;
    var d = Q1();
    a ? (c.m = b, M.g ? c.J && null != c.l.g || R1(c) : (Fw(), d.Yr("New content shared by instructor", "SHOW", () => S1(c), !0, !0))) : (c.m = null, M.g ? G1(c.l) : (d.ja(), G1(c.l), gw("Content sharing has been disabled", !0)));
  }
}
function FR(a) {
  let b = !1;
  1 == S.g && (b = fq(1));
  let c = V && V.l != Ym || Vl();
  a.N = !1;
  if (3 == S.g && !L.mb().Ja() && !Ok(P) && !Yg(Tn()) || !a.s || cl(2) && 1 == S.g && c && !P.m && !SM() || b) {
    a.N = !0, L.Hm(1);
  }
  if (a.N) {
    a.ya = !1, T1(a, !1);
  } else {
    T1(a, !0);
    U1(a);
    NF(a);
    var d = document.getElementById("annotate-highlight-plugin-text-highlight");
    d && (V1(a), ml(P) || Jk(P) || Nk() || Qk()) && (d.style.cursor = "default", d.style.backgroundColor = "rgba(0, 0, 0, 0)", d.style.color = "#aaaaaa", a.Ha = !0);
    W1(a);
    X1(a);
    Y1();
    d = document.getElementById("annotate-highlight-plugin-popup-Assessment");
    var e = document.getElementById("annotate-highlight-plugin-popup-Assessment-icon");
    d && e && (Z1() ? (d.style.removeProperty("opacity"), d.style.cursor = "pointer", e.style.cursor = "pointer") : (d.style.opacity = "0.44", d.style.cursor = "default", e.style.cursor = "default"));
    $1();
    a2();
    d = document.getElementById("annotate-highlight-plugin-comment");
    e = document.getElementById("annotate-highlight-plugin-popup-comment");
    var f = document.getElementById("annotate-highlight-plugin-popup-comment-icon");
    d && e && f && (ml(P) || Jk(P) || Nk() || Qk()) && (d.style.cursor = "default", d.style.color = "#aaaaaa", e.style.cursor = "default", e.style.color = "#aaaaaa", a.ea = !0);
    d = document.getElementById("annotate-highlight-plugin-popup-share");
    e = document.getElementById("annotate-highlight-plugin-popup-share-icon");
    d && e && (!A(Oo(S)) && 1 == Oo(S).je() && Yg(An()) ? (bm(d, !0, Kh(), !1), e.style.color = "#000000", d.style.color = "#000000") : (bm(d, !1, Kh(), !0), e.style.color = "#aaaaaa", d.style.color = "#aaaaaa"));
  }
  d = Up;
  null == d.j && (d.j = new b2());
  d = d.j;
  c2(d, a.ya, 2);
  c2(d, b && !c, 3);
  if (e = a = Js(S, 1)) {
    a = a.o, f = e = !1, Yg(a.j) && a.j == a.l.ma && (e = !0, f = S.j, f = -1 != f && f == a.g), e = {kw:e, zJ:f};
  }
  a = e;
  b && !c && a && a.kw ? c2(d, a.zJ, 4) : c2(d, !1, 4);
  qZ(L.Pb());
}
function bC() {
  bt();
  L.sa({type:"annotateClosePresentationTab"}, null);
}
function lS() {
  return (si() && !(Ns() || L.rE()) || Kk(P)) && Kh() && !fq(1) && Yg(An()) && 1 == S.g;
}
function y0(a) {
  F0(a, !1);
  Ro.LL();
  Jo.lC();
  Ko.lC();
  var b = L.Pb();
  b.Mc = !1;
  console.log("[MAC] hide all attachment containers");
  vZ(b, ql());
  Xo && XC(!1);
  A(Lo) || KX(!1);
  yp() ? a1(!1) : Ep() ? e1(!1) : Fp() && g1(!1);
  c1(!1);
  if (b = document.getElementById("annotate-highlight-plugin-show-hide")) {
    b.className = "extension_reset_css extension_icon extension_icon-hide_annotations";
  }
  si() && L.kd({type:"ANNOTATE_PDF_HIDE_ANNOTATIONS"});
  d2(a);
}
function E0(a, b) {
  a.s = b;
  Lp(!0);
  FR(a);
  a.s || (5 == mC.i ? XB(!1) : mC.i != jt && DQ(mC, !1), Sn(), dL(P.s));
}
function F0(a, b) {
  a.i = b;
  1 == ql() ? a.Ek = b : 2 == ql() ? a.bm = b : 3 == ql() && (a.am = b);
}
function O0(a) {
  F0(a, !0);
  Ro.pN();
  Jo.FD();
  Ko.FD();
  var b = L.Pb();
  b.Mc = !0;
  console.log("[MAC] show all attachments containers");
  si() && !Vk(P) || uZ(b, ql());
  Xo && Xo.v && XC(!0);
  A(Lo) || KX(!0);
  yp() ? a1(!0) : Ep() ? e1(!0) : Fp() && g1(!0);
  si() && !Vk(P) || c1(!0);
  si() && (a1(!1), e1(!1), g1(!1));
  if (b = document.getElementById("annotate-highlight-plugin-show-hide")) {
    b.className = "extension_reset_css extension_icon extension_icon-show_annotations";
  }
  si() && L.kd({type:"ANNOTATE_PDF_SHOW_ANNOTATIONS"});
  d2(a);
  a.dispatchEvent(new CustomEvent(e2.i, {detail:{}}));
  x0(!1);
}
function f2(a) {
  let b = Q1();
  a.J && (Fw(), b.Yr("New content shared by instructor", "SHOW", () => S1(a), !0, !0));
}
function d2(a) {
  if (2 == S.g) {
    P.i && L.sa({type:"ANNOTATE_CURRENT_ANNOTATIONS_SHOW_HIDE_CHANGED", bShow:a.i}, null), si() && fI ? aO(fI, a.i) : fI && Pl() && aO(fI, a.i);
  } else if (3 == S.g) {
    let b = {type:"ANNOTATE_CURRENT_ANNOTATIONS_SHOW_HIDE_CHANGED", bShow:a.i};
    P.i ? L.sa(b, null) : si() ? window.postMessage(b, "*") : fI && Pl() && bO(fI, a.i);
  }
}
function g2(a, b) {
  "bBaseDoc" in b ? (b = b.bBaseDoc, a.Ek = b, 1 == S.g ? a.B(b) : a.ll(1, b)) : "bNotesDoc" in b ? (b = b.bNotesDoc, a.bm = b, 2 == S.g ? a.B(b) : a.ll(2, b)) : "bFeedbackDoc" in b && (b = b.bFeedbackDoc, a.am = b, 3 == S.g ? a.B(b) : a.ll(3, b));
}
function R1(a) {
  Ip();
  QA();
  L.Hm(1, !1);
  var b = null;
  if (si() && window.top == window) {
    b = new URLSearchParams(window.location.search);
    var c = b.get("pdfData");
    if (c) {
      try {
        var d = JSON.parse(atob(c));
        "uLivefeedType" in d && delete d.uLivefeedType;
        if (M.g || 2 == S.m) {
          d.published = !0;
        }
        b.set("pdfData", btoa(JSON.stringify(d)));
      } catch (e) {
      }
    }
    d = {};
    if (c = b.get("extraData")) {
      try {
        d = JSON.parse(atob(c));
      } catch (e) {
      }
    }
    d.SharedNotesFeedbackData = h2(a);
    b.set("extraData", btoa(JSON.stringify(d)));
    b.set("annotateSharedContentInLivefeed", "1");
    b = window.location.origin + window.location.pathname + "?" + b.toString();
  } else if (Jk(P)) {
    b = new URLSearchParams(window.location.search);
    b.delete("uLivefeedType");
    d = {};
    if (c = b.get("eData")) {
      try {
        d = JSON.parse(atob(c));
      } catch (e) {
      }
    }
    d.SharedNotesFeedbackData = h2(a);
    b.set("eData", btoa(JSON.stringify(d)));
    b.set("annotateSharedContentInLivefeed", "1");
    b = window.location.origin + window.location.pathname + "?" + b.toString();
  }
  b && (F1(a.l), E1(a.l, !1), Vn("Loading...", null), I1(a.l, b, e => {
    Sn();
    e && E1(a.l, !0);
  }));
}
function S1(a) {
  a.J && h2(a) && !J1(a.l) && R1(a);
}
function h2(a) {
  return a.m && a.m.strSharedStudentGUID && a.m.strSharedNotesDocGUID && a.m.strSharedFeedbackDocGUID ? a.m : null;
}
function aB(a, b) {
  a && (b ? (a.style.removeProperty("opacity"), a.style.cursor = "pointer") : (a.style.opacity = "0.44", a.style.cursor = "default"));
}
function M1(a) {
  if (!Ph()) {
    return !1;
  }
  let b = L.mb().Ja();
  if (2 == S.g) {
    if (!b) {
      return a.np;
    }
    if (L.mb().Gf()) {
      return !0;
    }
  } else if (1 == S.g && b && L.mb().Gf()) {
    return !0;
  }
  return !1;
}
function i2() {
  return (Kk(P) || si() && !(Ns() || L.rE())) && Kh() && !cl(2) && !Yg(An()) && 1 == S.g;
}
function j2() {
  return L.mb().Ja() ? L.mb().Gf() : !1;
}
function V1(a) {
  "" == Ul() && (P.j = window.location.href);
  a.dispatchEvent(new CustomEvent(e2.g, {detail:{}}));
}
function N1(a) {
  V1(a);
  a = Ul();
  return Kh() ? L.mb().Ja() ? L.mb().Gf() : Ok(P) ? !1 : window == window.top || -1 != a.indexOf("docs.google.com/presentation/d/") ? !0 : 3 == S.g ? !0 : !1 : Ph() && 2 == ql() && (Pl() || P.i && !Vl() || si() && !L.mb().Ja() && (null == V || !V.Lj()) || j2()) ? !0 : !1;
}
function k2(a) {
  V1(a);
  a = Ul();
  if (Kh()) {
    if (Ql.Ja()) {
      return j2();
    }
    if (window == window.top || -1 != a.indexOf("docs.google.com/presentation/d/") || 3 == S.g) {
      return !0;
    }
  } else if (Ph() && 2 == S.g && (P.i || Pl() || si() && !L.mb().Ja() || j2())) {
    return !0;
  }
  return !1;
}
function Vo() {
  return Kh() ? 3 == S.g || L.mb().Ja() ? !1 : !0 : !1;
}
function Z1() {
  return ml(P) || L.mb().Ja() ? !1 : Kh() && 1 == S.g ? !0 : !1;
}
function l2() {
  let a = Nl(P) || Pl();
  return Kh() && a && 1 == S.g ? !0 : !1;
}
function m2() {
  return l2() && 0 <= S.j && Ks(1) && !L.mb().Ja() ? !0 : !1;
}
function n2() {
  let a = Nl(P) && !L.mb().Ja() && !P.l || Pl();
  return Kh() && a && !fq(1) && 3 == S.g ? !0 : !1;
}
function U1(a) {
  let b = document.getElementById("annotate-highlight-plugin-save-annotations");
  if (b) {
    V1(a);
    var c = Ul();
    Is(a) && (window == window.top || -1 != c.indexOf("docs.google.com/presentation/d/") || -1 != c.indexOf("GoogleSlidesPresentation/preview.html") || Yg(c) && -1 != c.indexOf("/docs/viewer") || L.mb().Ja()) ? (b.style.cursor = "pointer", b.style.backgroundColor = "", b.style.color = "#000000") : (b.style.backgroundColor = "rgba(0, 0, 0, 0)", b.style.color = "#aaaaaa");
  }
}
function X1(a) {
  let b = document.getElementById("annotate-highlight-plugin-popup-media-icon");
  document.getElementById("annotate-highlight-plugin-popup-media") && b && (k2(a) ? (b.style.color = "#000000", b.style.cursor = "pointer") : b.style.color = "#aaaaaa");
}
function Y1() {
  let a = document.getElementById("annotate-highlight-plugin-popup-Timer"), b = document.getElementById("annotate-highlight-plugin-popup-Timer-icon");
  a && b && (bm(a, Vo(), Kh()), Vo() && Xo && Xo.v ? b.style.color = "#2196f3" : b.style.color = "#000000");
}
function $1() {
  var a = !1;
  if (lS() || i2()) {
    a = !0;
  }
  var b = document.getElementById("annotate-highlight-plugin-start-presentation");
  b && bm(b, a, !1, !1);
  b = window.location.href;
  b = window.top != window && -1 != b.indexOf("preview?") && -1 != b.indexOf("slide=");
  if (a && mC && (window.top == window || !b && Kk(P))) {
    if (BQ(mC)) {
      if (a = !mC.j) {
        a = !mC.m;
      }
      a && (console.log("annotate iframe - load in bg"), FQ(mC));
    } else {
      console.log("annotate iframe - create and load in bg"), EQ(mC), FQ(mC);
    }
  }
}
function a2() {
  let a = document.getElementById("annotate-highlight-plugin-popup-screen-shade"), b = document.getElementById("annotate-highlight-plugin-popup-screen-shade-icon");
  a && b && Yo && (bm(a, Yo.g(), Kh()), Yo.g() && ID() ? b.style.color = "#2196f3" : b.style.color = "#000000");
}
function o2(a) {
  let b = document.getElementById("annotate-highlight-plugin-popup-export"), c = document.getElementById("annotate-highlight-plugin-popup-export-seprator"), d = document.getElementById("annotate-highlight-plugin-popup-close"), e = OA;
  a || (e -= 49);
  a = e - 48;
  d && (d.style.top = a + "px");
  --a;
  c && (c.style.top = a + "px");
  b && (b.style.top = a - 48 + "px");
}
function W1(a) {
  if (!A(DA)) {
    var b = OA, c = document.getElementById("annotate-highlight-plugin-popup-student-notes"), d = document.getElementById("annotate-highlight-plugin-popup-export-seprator");
    a.ya = !1;
    c && (l2() || n2() ? ("block" != c.style.display && (c.style.display = "block", d.style.display = "block", o2(!0)), n2() ? c.childNodes.forEach(e => {
      e.style.color = "#2196f3";
    }) : (a.ya = m2(), c.childNodes.forEach(e => {
      e.style.color = "#000000";
    })), aB(c, m2() || n2())) : ("none" != c.style.display && (c.style.display = "none", d.style.display = "none", o2(!1)), b -= 49));
    if (a = document.getElementById("annotate-highlight-plugin-popup-undo")) {
      0 < iy.length ? (a.style.removeProperty("opacity"), a.style.cursor = "pointer") : (a.style.opacity = "0.44", a.style.cursor = "default");
    }
    if (a = document.getElementById("annotate-highlight-plugin-popup-redo")) {
      0 < jy.length ? (a.style.removeProperty("opacity"), a.style.cursor = "pointer") : (a.style.opacity = "0.44", a.style.cursor = "default");
    }
    aB(document.getElementById("annotate-highlight-plugin-popup-export"), Nl(P) || Gk(P) || Sl() && Kh() && !0);
    a = (c = document.getElementById("annotate-highlight-plugin-more-option").getBoundingClientRect()) && c.left + NA + 2 < Math.floor(window.visualViewport.width) ? c.left + window.visualViewport.offsetLeft : Math.floor(window.visualViewport.offsetLeft + window.visualViewport.width) - NA - 2;
    c = c && c.top + b < Math.floor(window.visualViewport.offsetTop + window.visualViewport.height) ? c.top + window.visualViewport.offsetTop : Math.floor(window.visualViewport.offsetTop + window.visualViewport.height) - b;
    DA.style.left = a + "px";
    DA.style.top = c + "px";
    DA.style.width = NA + "px";
    DA.style.height = b + "px";
  }
}
function T1(a, b) {
  for (let c = 0; c < a.ic.length; c++) {
    let d = document.getElementById(a.ic[c]);
    d && bm(d, b, !0, !0);
  }
}
function O1(a) {
  if (Jv && QP()) {
    let b = () => {
      Jv.removeEventListener(Jv.G, b);
      a();
    };
    Jv.addEventListener(Jv.G, b);
    fP(Jv.g, Qg.TF);
  } else {
    a();
  }
}
function P1(a, b) {
  if (V && SM()) {
    if (V.l == ZA) {
      let c = d => {
        d.detail.uLivefeedType == Ym && (V.removeEventListener(V.Ha, c), b(!0));
      };
      V.addEventListener(V.Ha, c);
      PR(V);
    } else {
      V && KR(V), b(!0);
    }
  } else {
    V && V.l != Ym && 2 == a ? (qR(V), b(!0)) : b(!1);
  }
}
function p2(a) {
  var b = W;
  Ph() && 2 == S.g && !L.mb().Ja() && (si() || P.m || Pl()) ? (MM(b, a, !1), fI || (fI = new rA(), fI.addEventListener(rA.g, function(c) {
    b.o({bBaseDoc:c.detail});
  }), fI.addEventListener(rA.j, function(c) {
    b.o({bNotesDoc:c.detail});
  }), fI.addEventListener(rA.i, function(c) {
    b.o({bFeedbackDoc:c.detail});
  })), fI.j(!0)) : !L.mb().Ja() && fI && 3 != S.g && fI.j(!1);
}
function q2(a) {
  if (a) {
    var b = document.getElementById("annotate-highlight-plugin-line");
    12 == a && (b.style.backgroundColor = "#C0C0C0");
    sk(b, 12 == a);
    b = document.getElementById("annotate-highlight-plugin-text");
    9 == a && (b.style.backgroundColor = "#C0C0C0");
    sk(b, 9 == a);
    b = document.getElementById("annotate-highlight-plugin-ellipse");
    11 == a && (b.style.backgroundColor = "#C0C0C0");
    sk(b, 11 == a);
    b = document.getElementById("annotate-highlight-plugin-rectangle");
    10 == a && (b.style.backgroundColor = "#C0C0C0");
    sk(b, 10 == a);
    b = document.getElementById("annotate-highlight-plugin-math-text");
    13 == a && (b.style.backgroundColor = "#C0C0C0");
    sk(b, 13 == a);
    b = document.getElementById("annotate-highlight-plugin-comment");
    14 == a && (b.style.backgroundColor = "#C0C0C0");
    sk(b, 14 == a);
    b = document.getElementById("annotate-highlight-plugin-Assessment");
    15 == a && (b.style.backgroundColor = "#C0C0C0");
    sk(b, 15 == a);
  }
}
function r2() {
  var a = W;
  Fw();
  a.j = !1;
}
function s2() {
  var a = new URLSearchParams(window.location.search);
  let b;
  if (a.has("pId") && a.has("sId")) {
    b = {}, b.pId = a.get("pId"), a.has("cId") && (b.cId = a.get("cId")), a.has("uLivefeedType") && (b.uLivefeedType = a.get("uLivefeedType"));
  } else if (a.has("pdfData")) {
    b = {};
    a = a.get("pdfData");
    try {
      let c = JSON.parse(atob(a));
      "guid" in c && (b.pId = c.guid);
      "uClassId" in c && (b.cId = c.uClassId);
      "uLivefeedType" in c && (b.uLivefeedType = c.uLivefeedType);
    } catch (c) {
    }
  }
  return b;
}
function t2(a) {
  if (a && !("selfDispatch" in a)) {
    let b = !1;
    "Escape" != a.code && 27 != a.keyCode || !Kk(P) || (V && SM() ? (b = !0, Kn("", "Leaving slideshow will end this Livestream.", "CANCEL", "CONTINUE", () => {
    }, () => {
      V && (V.m = BN, QR(V));
      a.selfDispatch = !0;
      document.dispatchEvent(a);
    })) : Jv.Pc.Ji && (b = !0, Kn("", "Leaving slideshow will end recording.", "CANCEL", "CONTINUE", () => {
    }, () => {
      Jv.Pc.Ji = !1;
      L.tA(null);
      a.selfDispatch = !0;
      document.dispatchEvent(a);
    })));
    b && (a.preventDefault(), a.stopPropagation());
  }
}
function u2(a, b) {
  let c = [];
  a -= window.scrollX;
  b -= window.scrollY;
  var d = "annotate-plugin-recording-option-popup annotate-plugin-more-option-popup annotate-plugin-livefeed-option-popup annotate-plugin-media-option-popup annotate-plugin-annotation-toolbar annotate-plugin-annotation-text-format-toolbar AnnotatePluginCountdownOverlay AnnotateErrorMsgOverlay annotate-plugin-fab annotate-student-feedback-list-toolbar annotate-student-notes-control-toolbar".split(" ");
  for (e of d) {
    d = document.getElementById(e), !A(d) && d.style.display && d.getBoundingClientRect() && c.push(d);
  }
  if (L.jE()) {
    var e = L.jE().el;
    null != e && e.style.display && e.getBoundingClientRect() && c.push(e);
  }
  Up.g && (e = Up.g.el, null != e && e.style.display && e.getBoundingClientRect() && c.push(e));
  e = mB;
  null != e && e.style.display && e.getBoundingClientRect() && c.push(e);
  for (d = 0; d < c.length; d++) {
    if ("none" != c[d].style.display && (e = c[d].getBoundingClientRect(), a > e.x && a < e.x + e.width && b > e.y && b < e.y + e.height)) {
      return !0;
    }
  }
  return null == L.uv() || PX(a, b, !1) ? !1 : !0;
}
class e2 extends EventTarget {
  static get g() {
    return "EVT_CHECK_AND_SET_CURRENT_PAGE_URL";
  }
  static get i() {
    return "EVT_SHOW_ANNOTATION";
  }
  constructor() {
    super();
    this.ic = "annotate-highlight-plugin-start-recording annotate-highlight-plugin-start-presentation annotate-highlight-plugin-capture-tab annotate-highlight-plugin-save-annotations annotate-highlight-plugin-clear-all annotate-highlight-plugin-more-option annotate-highlight-plugin-laser annotate-highlight-plugin-pen annotate-highlight-plugin-highlighter annotate-highlight-plugin-eraser annotate-highlight-plugin-text-highlight annotate-highlight-plugin-text annotate-highlight-plugin-math-text annotate-highlight-plugin-line annotate-highlight-plugin-ellipse annotate-highlight-plugin-rectangle annotate-highlight-plugin-comment".split(" ");
    this.am = this.bm = this.Ek = this.i = !0;
    this.g = !1;
    this.np = this.Db = !0;
    this.N = this.ea = this.Ha = !1;
    this.s = !0;
    this.J = this.Jb = !1;
    this.m = null;
    this.l = new H1();
    this.l.addEventListener(H1.g, () => f2(this));
    this.u = this.ba = this.ia = this.C = !1;
    this.startTime = 0;
    this.pa = this.v = this.G = this.j = !1;
    this.Gb = 0;
    this.ya = this.ld = !1;
    this.B = this.B.bind(this);
    this.o = this.o.bind(this);
    this.Va = this.Va.bind(this);
    this.Wb = this.Wb.bind(this);
    this.lb = this.lb.bind(this);
    this.ib = this.ib.bind(this);
    this.M = this.M.bind(this);
  }
  B() {
    Ip();
    ii("10.9");
    let a = this.i;
    L.Hm(1);
    a ? y0(this) : O0(this);
  }
  ll(a, b) {
    Ro.ll(a, b);
    Jo.ll(a, b);
    Ko.ll(a, b);
    var c = L.Pb();
    b ? uZ(c, a) : vZ(c, a);
    A(Lo) || KX(b);
    i1(b, a, !0);
    si() && (i1(!1, a, !1), L.kd({type:b ? "ANNOTATE_PDF_SHOW_DOC_ANNOTATIONS" : "ANNOTATE_PDF_HIDE_DOC_ANNOTATIONS", uDocType:a}));
  }
  o(a) {
    si() || Pl() ? g2(this, a) : P.m && (zH && ("bBaseDoc" in a ? zH.Ek = a.bBaseDoc : "bNotesDoc" in a ? zH.bm = a.bNotesDoc : "bFeedbackDoc" in a && (zH.am = a.bFeedbackDoc)), a.type = "annotateShowHideDocAnnotations", a.frameId = NH(zH), L.sa(a, null));
  }
  nA(a) {
    pw && fw() && fw().nA(a);
  }
  Va() {
    Ip();
    QA();
    k2(this) ? ot() && 0 == M.M ? em(!0) : (WB && XB(!1), ii("10.16.5"), WY()) : Kh() ? L.mb().Ja() ? Rl() && L.Ye() && !L.Ye().pc() ? eC("Unable to add media.") : eC("Assignment not turned in by student. Unable to add media.") : Ok(P) && eC("External document being graded. Unable to add media.") : Ph() && (L.mb().Ja() ? Rl() && L.Ye() && !L.Ye().pc() ? eC("Unable to add media.") : eC("Your submission is being graded by your instructor and is not available for editing.") : eC("Adding media is not supported in student accounts."));
  }
  Dd() {
    Ip();
    QA();
    PY();
  }
  Wb() {
    Vo() ? (Ip(), QA(), ii("10.16.6"), Xo && (Xo.v || L.Hm(1, !0), qs()), Y1()) : Ph() && (Ip(), QA(), eC("Timer is not supported in student accounts."));
  }
  lb() {
    if (Yo) {
      if (!Yo.g()) {
        Ph() && (Ip(), QA(), eC("Screen shade is not supported in student accounts."));
        return;
      }
      Ip();
      QA();
      ID() || L.Hm(1, !0);
      Jk(P) && Yo.xm(Object.assign({}, L.yp()));
      var a = Yo;
      let b = BD(a);
      null == b && (b = fs(a), b.xb(), ls(b));
      b.Mc = !b.Mc;
      if (b) {
        si() && DD(a, b);
        if (Jk(P) || ml(P)) {
          b.A.x = a.A.x, b.A.y = a.A.y, b.A.width = a.A.width, b.A.height = a.A.height;
        }
        b.kp = 1;
        a = b;
        a.R && (a.offsetLeft = 0, a.offsetTop = 0, a.width = a.A.width, a.height = a.A.height);
        hs(b);
        (Jk(P) || ml(P)) && mD(b);
        Vk(P) && qD(b);
        is(b);
        b.Ql(b.Mc);
      }
      b.Mc || (b.de = !1, ks(b, !1), b.hx());
      tD(b);
    }
    a2();
  }
  ib(a) {
    a.preventDefault && a.preventDefault();
    Z1() && (Ip(), QA(), Ql.Ja() && to(), L.Hm(0), q2(15), ii("10.16.9"), a = 2, Up.g && (a = Up.g.j()), ji(15, a), si() && (m1(), ri()));
  }
  Lc() {
    var a = NB;
    Lp();
    Ip();
    a.j || (a.j = new GY(), a.j.ea.textContent = "New drawing", oq(a.j, "CONTINUE", null, "CANCEL", null, null));
    a.j.C();
    a.j.m.el.checked = !0;
    a.j.l();
    ii("10.16.10");
  }
  M(a) {
    a && a.preventDefault();
    m2() && (Ip(), QA(), L.Hm(1, !1), M.ib ? v2(pw) : w2());
  }
}
var W = new e2();
function fw() {
  return pw.g;
}
function uC(a, b, c, d, e, f, k) {
  -1 != a.indexOf("docs.google.com/presentation/d/") ? x2(a, b, c, d, e, f, k) : y2(a, b, c, d, f, !1, k);
}
function TJ() {
  var a = pw;
  console.log("[notes] CheckAndLaunchNotesViewer, extraadata", S.l);
  if (S.l) {
    let b = S.l;
    console.log("[notes] CheckAndLaunchNotesViewer, launchviewer", b.bLaunchNotesViewer, "guid", b.strStudentGuid);
  }
  a.l && Kh() && S.l && S.l.bLaunchNotesViewer && (S.l.bLaunchNotesViewer = !1, si() && !Vk(P) ? L.kd({type:"ANNOTATE_PDF_LOADED_TO_LAUNCH_NOTES_VIEWER"}) : W.M(null));
}
function cN(a) {
  var b = pw;
  b.B.push(a);
  return S.Jh ? z2(b) : !1;
}
function CN(a) {
  var b = pw;
  a && !b.C && (b.C = new ZN());
  return b.C;
}
function DR(a) {
  var b = pw;
  b.g && iI(b.g, a);
  b.J = a;
}
function IR() {
  var a = pw;
  if (si() || P.i || Kk(P) || Pl() || window == window.top && Kh() && Rl()) {
    a.s || (a.s = new dO(), a.s.addEventListener(dO.g, a.M.bind(a)));
    var b = Oo(S);
    b && (a = a.s, a.g && (a.g && (a.g.removeEventListener(Cp.j, a.j), a.g.removeEventListener(Cp.g, a.m), a.g.removeEventListener(Cp.i, a.l), a.g.removeEventListener(Cp.l, a.i), a.g.removeEventListener(Cp.m, a.s), a.g.removeEventListener(Cp.o, a.o)), a.g = null), a.g = b, a.g && (a.g.addEventListener(Cp.j, a.j), a.g.addEventListener(Cp.g, a.m), a.g.addEventListener(Cp.i, a.l), a.g.addEventListener(Cp.l, a.i), a.g.addEventListener(Cp.m, a.s), a.g.addEventListener(Cp.o, a.o)));
  }
}
function K1(a, b) {
  !(b = b || Kk(P)) && (b = window == window.top && Jh()) && (!(b = si() || Jk(P)) && (b = M.g) && (b = (b = window.location.href) && b.includes("/ChromeClient")), b = b || Pl() && m2());
  if (b) {
    a.m || (a.m = new tM());
    a.l || (a.l = new IM(a.m));
    a = a.m;
    b = M.Wi;
    var c = M.Th, d = Bh(), e = M.G;
    0 == a.g && null != d && "" != d && null != e && "" != e && (console.log("Initiating connection!"), a.g = 1, a.i.connect(b, c, d, e));
  }
}
function L1() {
  var a = pw;
  return window == window.top && Jh() && a.m ? (a.j || (a.j = new gN(a.l)), eN(a.j), !0) : !1;
}
function v2(a) {
  if (1 == S.g) {
    if (Lk() || Kk(P)) {
      if (Kk(P) && XI(), Lk()) {
        var b = Rk(P), c = No();
        mv(b, c);
        S.ol();
      }
    }
    b = S.i;
    c = S.j;
    if (b && !(0 > c)) {
      null == a.g && (a.g = new UI(L.Jx(), a.l, a.v, !1, a.J));
      var d = No();
      d.pageData = P.v;
      d.pageAnnotations = jv();
      c = {};
      c.strGUID = b.ma;
      c.strAnnotationPath = b.Uf;
      c.versionNo = b.bg;
      c.strFilePath = b.Sx;
      c.annotationData = d;
      c.baseDocumentOwnerInfo = b.Yi;
      var e = In;
      d && e.g && (e = e.g, e.g && "annotationData" in e.g && (e.g.annotationData = d));
      d = Jk(P);
      var f = e = null, k = si() ? 1 : 3;
      d && (k = 2, e = Rk(P), f = Ul(), f = f.substring(f.indexOf("docs.google.com/presentation/d/") + 31, f.indexOf("/", f.indexOf("docs.google.com/presentation/d/") + 31)));
      a.g.ic = b.Vl();
      var l = a.g;
      l.N = k;
      l.ba.g = k;
      a.g.ld = f;
      a.g.C = e;
      hI(a.g) && JI(a.g) ? (a = a.g, JI(a) && (LI({bLaunchNotesViewer:!0}), a.i = c, si() ? window.postMessage({type:tI}, "*") : RI(a))) : (Kk(P) && L.sa({type:"UNLOAD_NOTES_REVIEW_PANEL_IN_SLIDES_EDIT_MODE"}, null), a.g.Va = b.ma, b = a.g, b.m = d, b.m && UN(b.g, BN), oI(a.g, c));
    }
  }
}
function w2() {
  Kn("New feature: Student Notes", "Students can take notes and annotate over your slides/ pages. You are able to review student work in real time and provide immediate feedback.", "", "CONTINUE", function() {
  }, function() {
    v2(this);
    M.ib = !0;
    L.sa({type:"annotateStudentNotesOpenedChanged"}, null);
  }.bind(pw), null, null, !1, null, !1, -1, -1, !1, null, '<a href="https://annotate.net/tutorials#SN" target="_blank">Learn More</a>');
}
function A2() {
  var a = pw;
  a.j && a.j.ge() && (a = a.j, a.g && (a.i = !1, a = a.g, a.g && wM(a.g)));
}
function B2() {
  var a = pw;
  return a.j ? a.j.ge() : !1;
}
function C2(a, b) {
  var c = pw;
  c.j && c.j.ge() && !b || bN(a);
}
function D2(a) {
  var b = pw;
  b.g && gI(b.g, a);
}
function E2() {
  var a = pw;
  mQ ? (mQ.addEventListener(tQ.g, a.u), pQ(mQ, !0)) : console.log("Warning!!! Slide presentationAnimationHandler not set");
}
function F2() {
  var a = mQ;
  if (a.g && (a = a.g, a.N)) {
    let b = uQ(a, !0);
    console.log("Slide event (on req)", b);
    a.dispatchEvent(new CustomEvent(nQ.g, {detail:b}));
  }
}
function z2(a) {
  let b = !1;
  if (Ph() && 2 == S.g) {
    for (let c of a.B) {
      qt() == c.strNotesAnnotationGuid && (L.sa({type:"annotateLoadStudentFeedbackDoc", strAnnotationGuid:c.strAnnotationGuid,}, a.o), b = !0);
    }
    a.B = [];
  }
  return b;
}
function G2() {
  var a = pw;
  a.g && (a = a.g, 2 == a.N && Lk() && a.M && Kh() && (console.log("Unloaded notes review panel in slides edit mode!!!"), a.g.j = !1, MI(a.g), xI(a)));
}
function y2(a, b, c, d, e, f, k) {
  let l = {};
  l.strPageUrl = a;
  l.strGUID = b;
  l.uLivefeedType = c;
  l.uClassId = d;
  l.bPublished = f;
  l.uLivefeedActivityId = k;
  e ? (l.bOpenInNewTab = !1, l.bChangeUrlInCurrentTab = !0) : (l.bOpenInNewTab = !0, l.bChangeUrlInCurrentTab = !1);
  l.type = "annotateOpenSaveAnnotations";
  L.sa(l, null);
}
function x2(a, b, c, d, e, f, k) {
  let l = a.lastIndexOf("slide=");
  -1 != l && (a = "GoogleSlidesPresentation/preview.html?pId=" + b + ("&sId=" + a.substr(l).substr(9)), a += "&cId=" + d, a += "&uLivefeedType=" + c, a += "&uLivefeedActivityId=" + k, a = e + "/" + a, f ? window.open(a, "_self") : window.open(a, "_blank"));
}
function H2(a, b, c, d, e, f, k) {
  -1 != a.indexOf("docs.google.com/presentation/d/") ? x2(a, b, c, d, e, f, k) : y2(a, b, c, d, f, !Qh(), k);
}
class I2 extends ph {
  constructor() {
    super();
    this.J = this.v = this.C = this.g = this.s = this.i = this.j = this.l = this.m = null;
    this.B = [];
    this.o = this.o.bind(this);
    this.u = this.u.bind(this);
    M.addEventListener(Gh.g, this.G.bind(this));
  }
  G(a) {
    a = (a = a.detail) && "bLoggedInUserAccountChange" in a ? a.bLoggedInUserAccountChange : !1;
    Jh() && !a || this.U();
  }
  M(a) {
    if (a = a.detail) {
      let b = S.g;
      a.strOwnerGuid = S.zd;
      if (P.i || Kk(P)) {
        if (Kk(P)) {
          let c = a.data;
          c && (c.slideId = nk());
        }
        a.mainType = "ANNOTATE_SLIDE_DOCUMENT_EDITED";
        L.sa({type:"annotateLiveNotesResponseEvent", msgData:a, updatedDocType:b}, null);
      } else if (si() || Pl() || Kh() && Rl()) {
        1 == S.g ? V && V.v(a) : 2 == S.g ? this.i && this.i.v(a) : 3 == S.g && (Pl() && this.g ? this.g.Gt(a) : Rl() && L.Ye() ? L.Ye().Gt(a) : window.postMessage({type:"ANNOTATE_FEEDBACK_DOCUMENT_EDITED", msgData:a}, "*"));
      }
    }
  }
  u(a) {
    a = a.detail;
    a.docGuid = Tn();
    L.sa({type:"annotateLiveNotesResponseEvent", msgData:{type:"ANNOTATE_SLIDES_VIEW_UPDATED", data:a, mainType:"ANNOTATE_SLIDE_DOCUMENT_EDITED",}, updatedDocType:S.g}, null);
  }
  o(a) {
    if ("annotateStudentFeedbackDocLoaded" == a.type && window == window.top && 2 == S.g) {
      let c = S.La;
      if (null == c && a.feedbackData) {
        a = a.feedbackData;
        var b = {strPublisherGuid:a.strPublisherGuid, strS3BucketFullPath:M.o, strPublishedAnnotationGuid:a.strGUID, strPublisherPicture:a.strPublisherPicture, oPublisherPicturePosition:a.oPublisherPicturePosition, strPublisherFirstName:a.strPublisherFirstName, strPublisherLastName:a.strPublisherLastName, uPublisherFeatureValue:a.uPublisherFeatureValue,};
        c = Ls(3);
        cq(c, -1, a.strAnnotationPath);
        c.ma = a.strGUID;
        dq(c, a.versionNo);
        jq(c, b);
        if (a = a.annotationData) {
          "nMaxElementId" in a && (c.dh = parseInt(a.nMaxElementId)), "uuid" in a && nh(c, a.uuid), a.pageAnnotations && (c.Pa = a.pageAnnotations);
        }
        P.m && (ZH = c, zH && (a = zH, a.La = ZH, "" != a.Af && a.ue && (b = {}, a.La && (b.strGUID = a.La.ma, b.strAnnotationPath = a.La.Uf, b.versionNo = a.La.bg, b.annotationData = a.La.Pa, b.nMaxElementId = Yp(a.La), b.uuid = a.La.qe, b.documentOwnerInfo = a.La.Yi), a.ue({type:"annotatePreviewSlidesFeedbackAnnotationData", feedbackAnnotationData:b, frameId:a.gh[a.Zc],}, null))));
        this.i && uI(this.i, [{docGuid:c.ma, strOwnerGuid:S.zd, bPublisher:!1,}]);
      }
    }
  }
  U() {
    this.g && (this.g.U(), this.g = null);
    this.i && (this.i.U(), this.i = null);
    this.j && (this.j.U(), this.j = null);
    this.l && (this.l.U(), this.l = null);
    this.m && (sM(this.m.i), this.m = null);
  }
}
var pw = new I2();
class J2 {
  constructor(a, b, c, d, e) {
    this.j = a;
    this.ue = b;
    this.l = c;
    this.g = d;
    this.i = e;
  }
}
function Nw(a, b) {
  b ? Kh() ? Pv.g && (Pv.g = !0, K2(!1) || FK(a.o)) : (Pv.g = !0, K2(!1) || EK(a.o)) : Kh() ? "TURNED_IN" == a.pc().state && Kn("Error", "Could not return the assignment.", "", "CLOSE", null, null) : Kn("Error", "Could not turn in the assignment.", "", "CLOSE", null, null);
}
function L2(a, b) {
  a.i && (b.strGUID = a.i.strGUID, b.strAnnotationPath = a.i.strAnnotationPath, b.versionNo = a.i.versionNo, b.annotationData = a.i.annotationData, b.bForScreenShot = !1, b.bApplyForceFully = !0, b.bSlidesPreview = !1, b.bPDFViewer = !1, b.uClassId = S.j, b.strAssessmentFileGuid = Ws(), a.i.baseDocumentOwnerInfo && (b.baseDocumentOwnerInfo = a.i.baseDocumentOwnerInfo));
  return b;
}
function M2(a, b, c) {
  if (b.length) {
    var d = 0;
    if (c) {
      for (let f = 0; f < b.length; f++) {
        if (b[f].strStudentGuid == c) {
          d = f;
          break;
        }
      }
    }
    c = b[d].strStudentGuid;
    a.tc = {};
    a.J = b;
    b = a.j;
    eI || (eI = new N2(), eI.addEventListener(rA.l, b.ba.bind(b)));
    for (var e of a.J) {
      b = a.tc[e.strStudentGuid], b || (b = new O2(e.strStudentGuid), jj(b, 5, a.Dd, a), jj(b, 7, a.eg, a), jj(b, 100, a.ze, a)), b.re(e), a.tc[b.ve] = b;
    }
    eI.j(!0);
    eI.Cd(a.tc, !0);
    eI.o(c);
    a.ia(a.tc[c]);
    Sn();
    DK(a.o);
    e = a.j;
    P2();
    b = Q2;
    c = R2(e, e.g.hd().uPoints);
    null == e.J && S2(e);
    b([c, e.J]);
    T2(a.j, 1);
    $N(eI);
  }
}
function U2(a, b) {
  Kn("", "Error loading annotations. Please try again.", "CLOSE", "RETRY", null, function() {
    Pn("Please wait while annotations for Google assignment are being loaded...");
    a.ea.ue({type:"COMM_GET_ALL_STUDENT_SUBMISSIONS_FOR_WEB", strCloneAnnotationMapGUID:b.strCloneAnnotationMapGUID, strBaseUrl:b.strBaseUrl}, null);
  });
}
function V2(a, b) {
  a.Jo = "";
  zv(S.g, !0);
  L.nj();
  Qv(Ql, !1);
  a.ia(a.tc[b]);
  W2(a);
  a.Qt();
  L.sa({type:"ANNOTATE_UPDATE_LAST_LOAD_ANNOTS_EXTRADATA", data:{strStudentGuid:b}}, null);
  clearTimeout(a.Pe);
  a.Pe = setTimeout(() => {
    var c = a.ae();
    if (!c.M && c.Il && c.pc() && "TURNED_IN" != c.pc().state) {
      var d = c.Il.ma;
      c = c.Il.bi;
      console.log(">> SEND VERSION REQ", a.ae().B, a.ae().C);
      a.tc[b].M = !0;
      L.sa({type:"COMM_CHECK_NOTES_VERSION", strAnnotationGuid:d, uVersionNo:c}, a.Cf.bind(a, b));
    }
  }, 200);
}
function W2(a) {
  if (a = a.ib(a.ae())) {
    L.Pz(a), L.fy(!0, !1);
  }
}
function X2(a) {
  let b = a.hd(), c = b ? parseInt(b.id) : -1;
  return "" != (b ? b.strGoogleCourseSubmissionId : "") && -1 != c && a.pc() && Jh() && !b.bNonAnnotateStudent ? Kh() && "TURNED_IN" == a.pc().state || Ph() && ("CREATED" == a.pc().state || "RECLAIMED_BY_STUDENT" == a.pc().state || "RETURNED" == a.pc().state) ? !0 : !1 : !1;
}
function Y2(a) {
  for (let b in a.tc) {
    let c = a.tc[b].pc();
    if (!c) {
      break;
    }
    if ("TURNED_IN" == c.state || c.draftGrade && c.draftGrade != c.assignedGrade) {
      return !0;
    }
  }
  return !1;
}
function K2(a) {
  return Ql.Gf() ? Jv.Pc.cg ? (Vw(Jv.Pc), !0) : S.Vl() ? (Qn(Ql, !1, a, !1, !1), !0) : !1 : !1;
}
function Z2(a, b) {
  let c = a.j.j.value;
  b ? (Pv.g = !0, K2(!1) || GK(a.o, c, b)) : !$2(a.ae(), c) || a3(a.ae()) && b3(a.ae()) ? aC && $B(aC) : (console.log(">>grading ", c), GK(a.o, c, b));
}
class c3 extends UI {
  constructor(a) {
    super(null, null, null, !0, null);
    this.ea = a;
    this.J = [];
    this.tc = {};
    this.o = null;
    this.B = [];
    this.j = new d3(this);
    this.Pe = -1;
    this.Wb = this.Db = !1;
    this.N = 4;
    this.ba.g = 4;
  }
  ae() {
    return this.v;
  }
  mb() {
    return this.ea.j();
  }
  ia(a) {
    super.ia(a);
    this.o = a.hd();
    console.log(this.o);
    this.Sj(a.pc());
  }
  ze(a, b) {
    console.log(">> grade input state", b);
    e3(this.j, b);
  }
  eg(a, b) {
    console.log(">>>feedback autosave response");
    console.log(a);
    b.bSuccessful && (iw(Jv), b.strStudentGuid != this.ae().ve && (iw(Jv), dn(this.tc[b.strStudentGuid], !1)));
  }
  Gt(a) {
    a.strStudentGuid = this.ae().On();
    yI(this, a);
  }
  Gb(a) {
    var b = this.tc[a];
    this.j.nj();
    if (this.v) {
      if (this.v.ve !== a) {
        r2();
        this.ea.g();
        this.ea.i();
        if ((b = BF(L.Zf().gq())) && b.Fi) {
          var c = b.ad;
          c && c.lh() && "" != lF(c.lh()) && c.lh().Xo();
          (b = b.lh()) && "" != lF(b) && b.Xo();
        }
        iF(L.Zf().gq(), null, !0);
        b = this.ae();
        if (c = b.pc()) {
          "TURNED_IN" == c.state && b.l && !b.o ? b.ea() : dn(b, !1), f3(this.tc[b.ve]);
        }
        V2(this, a);
      }
    } else {
      this.ia(b), W2(this);
    }
  }
  Cf(a, b) {
    this.tc[a].M = !1;
    b.bSuccessful && b.bVersionMismatch && (this.tc[a].re(b), this.ae().ve == a && (W2(this), gw("Student work updated", !0)));
  }
  ib(a) {
    a = super.ib(a);
    a.bGoogleAssignmentAutosaved = !0;
    return a;
  }
  hd() {
    return this.o;
  }
  Sj(a) {
    Kh() && this.j.v || Ph() ? Pv.Sj(a) : this.ae().Sj(a);
  }
  pc() {
    return Kh() && this.j.v || Ph() ? Pv.pc() : this.ae().pc();
  }
  Qt() {
    this.j.Qt();
  }
  Pr() {
    this.j.Pr();
  }
  vk(a, b, c) {
    if ("iframe_load" != a) {
      var d = this;
      if (b) {
        if (Kh()) {
          if ("auth" == a) {
            Pv.g || Pv.j || Sn();
          } else if ("LoadAllCourseWorkDetails" == a) {
            if (Sn(), c.gCourseWorkDetails.uTotalPoints, c.gCourseWorkDetails.studentSubmissions && c.gCourseWorkDetails.studentSubmissions.length) {
              a = !1;
              parseInt(this.o.uPoints) != parseInt(c.gCourseWorkDetails.uPoints) && (a = !0, gw("Updated total points", !0), this.ea.ue({type:"COMM_UPDATE_COURSE_WORK_POINTS", id:this.o.id, uPoints:parseInt(c.gCourseWorkDetails.uPoints)}, null), this.o.uPoints = c.gCourseWorkDetails.uPoints, g3(this.j, c.gCourseWorkDetails.uPoints));
              this.B = c.gCourseWorkDetails.studentSubmissions;
              var e = [];
              for (var f in this.tc) {
                b = !1;
                for (var k of this.B) {
                  let n = this.tc[f];
                  if (n.hd() && n.hd().strGoogleCourseSubmissionId == k.id) {
                    n.re({googleCourseWorkDetails:k});
                    a && (n.m.uPoints = c.gCourseWorkDetails.uPoints);
                    b = !0;
                    break;
                  }
                }
                b || this.ae().ve == f ? b || Kn("", "This student has been unenrolled from Google Classroom.", "", "OK", null, null) : e.push(f);
              }
              c = !1;
              for (var l of e) {
                delete this.tc[l], c = !0;
              }
              c && eI.Cd(this.tc, !1);
              this.Sj(this.ae().pc());
              console.log("fetch all coursework success", this.tc);
              this.Qt();
            } else {
              h3("", !1);
            }
          } else if ("returnMultiple" == a && Pv.j) {
            Pv.j = !1;
            Sn();
            f = l = 0;
            for (e in c) {
              for (200 == c[e].status ? l += 1 : f += 1, k = 0; k < this.B.length; k++) {
                this.B[k].id == e && 200 == c[e].status && (this.B[k].draftGrade != this.B[k].assignedGrade && (this.B[k].assignedGrade = this.B[k].draftGrade), "TURNED_IN" == this.B[k].state && (this.B[k].state = "RETURNED"));
              }
            }
            Kn("Selected assignments returned", l + " out of " + (f + l) + " selected assignments were successfully returned", "", "OK", null, null);
            this.Qt();
            LY(this.j.B);
          } else {
            "grade" == a ? (Sn(), i3(this.j, !1), j3(this.ae(), a, !0), k3(Y2(this))) : "draftgrade" == a ? (Sn(), j3(this.tc[c.strStudentGuid], a, !0), k3(Y2(this))) : "return" == a && Pv.g && (Sn(), iL(!1), Pv.g = !1, HK(!1, this.o));
          }
        } else {
          "auth" == a ? Pv.g || Sn() : "turnin" == a && Pv.g && (Sn(), dL(P.s), Pv.g = !1, HK(!0, this.o), Kn("", "Your assignment was submitted successfully.", "", "OK", null, null));
        }
      } else {
        (Sn(), Kh()) ? "auth" != a || Pv.g || Pv.j ? "auth" != a && "turnin" != a || !Pv.g ? "auth" != a && "returnMultiple" != a || !Pv.j ? "grade" == a ? (Sn(), Kn("Error", "Could not grade the assignment", "", "CLOSE", null, null)) : "draftgrade" == a && j3(this.tc[c.strStudentGuid], a, !1) : (Nn(), Pv.j = !1, Kn("Error", "Could not return the assignment.s", "", "CLOSE", null, null)) : (Pv.g = !1, Kn("Error", "Could not return the assignment.", "", "CLOSE", null, null)) : Kn("", "Error loading assignment status. Please try again.", 
        "CLOSE", "RETRY", null, function() {
          d.j.v ? CK(d.o) : DK(d.o);
        }) : "auth" != a || Pv.g ? "auth" != a && "turnin" != a || !Pv.g || (Pv.g = !1, Kn("Error", "Could not turn in the assignment.", "", "CLOSE", null, null)) : Kn("", "Error loading assignment status. Please try again.", "CLOSE", "RETRY", null, function() {
          CK(d.o);
        });
      }
    }
  }
}
function Ow(a) {
  let b = {};
  for (var c in a.g.tc) {
    let d = a.g.tc[c];
    d.pc() && "TURNED_IN" == d.pc().state ? b[c] = d : d.pc() && d.pc().draftGrade && d.pc().draftGrade != d.pc().assignedGrade && (b[c] = d);
  }
  if (null == a.B) {
    a.B = new MY(b);
  } else {
    c = a.B;
    c.u = b;
    c.M = 0;
    for (let d in c.u) {
      c.M += 1;
    }
    LY(a.B);
  }
  a.B.C();
}
function T2(a, b) {
  if (1 == b) {
    if (Kh()) {
      if (b = l3(a)) {
        b.style.backgroundColor = "#2b2b2b";
      }
      if (b = l3(a)) {
        b.innerText = "UPDATING...";
      }
      if (b = m3()) {
        b.style.backgroundColor = "#2b2b2b";
      }
      k3(!1);
      i3(a, !1);
      n3(a, !1);
    } else {
      Ph() && o3(a, !0, "UPDATING...", "#808080", "#FFFFFF");
    }
  } else if (Kh()) {
    if (b = l3(a)) {
      b.style.backgroundColor = "#0084ff";
    }
    if (b = m3()) {
      b.style.backgroundColor = "#0084ff";
    }
    if (b = l3(a)) {
      b.innerText = "RETURN";
    }
  }
  X1(W);
  NF(W);
  U1(W);
  SJ(a.g.ea.l(), X2(a.g));
}
function e3(a, b) {
  a.j && (a.j.style.borderBottom = b ? "1px solid #FFFFFF" : "1px solid #E74C3C");
}
function g3(a, b) {
  if (0 == parseInt(b)) {
    a.i && (a.i.remove(), a.i = null);
  } else {
    if (a.i) {
      if (a = a.i.getElementsByTagName("span")[0]) {
        a.innerText = `/${b}`;
      }
    } else {
      a.i = R2(a, b), (b = document.getElementById("annotate-student-notes-control-toolbar")) && b.insertBefore(a.i, a.J);
    }
  }
}
function h3(a, b) {
  b ? (b = "Students not found in Annotate course", a && (b = b + " - " + a), Kn("", b, "", "CLOSE", null, function() {
    bC();
  })) : b || Kn("", "Students not found in Google Classroom course", "", "OK", null, null);
}
function i3(a, b) {
  a.o && (b ? (a.o.style.pointerEvents = "auto", a.o.style.cursor = "pointer", a.o.style.opacity = "1") : (a.o.style.opacity = "0.44", a.o.style.pointerEvents = "none", a.o.style.cursor = "default"));
}
function k3(a) {
  let b = m3();
  b && (a ? (b.style.pointerEvents = "auto", b.style.cursor = "pointer", b.style.opacity = "1") : (b.style.opacity = "0.44", b.style.pointerEvents = "none", b.style.cursor = "default"));
}
function R2(a, b) {
  if (0 != parseInt(b)) {
    if (!a.i) {
      let c = document.createElement("div");
      c.id = "AnnotateClassroomGradeInputDiv";
      c.className = "extension_reset_css ";
      let d = document.createElement("input");
      d.type = "text";
      d.id = "AnnotateClassroomGradeInput";
      d.className = "extension_reset_css ";
      c.appendChild(d);
      let e = document.createElement("span");
      e.id = "AnnotateClassroomTotalPoints";
      e.innerText = `/${b}`;
      c.appendChild(e);
      d.addEventListener("input", a.G.bind(a));
      d.addEventListener("blur", a.pa.bind(a));
      a.j = d;
      a.i = c;
    }
    return a.i;
  }
}
function o3(a, b, c, d, e) {
  b ? (!a.m && document.body && (b = document.createElement("div"), b.id = "AnnotateSlidesClassroomStatusWidget", b.className = "extension_reset_css", b.style.height = "36px", b.style.width = "136px", b.style.position = "fixed", b.style.border = "1px solid #808080", b.style.right = "16px", b.style.bottom = "16px", b.style.lineHeight = "36px", b.style.backgroundColor = "#FFFFFF", b.style.color = "#808080", b.style.textAlign = "center", b.style.display = "none", b.style.fontSize = "14px", b.innerText = 
  "TURNED IN", b.style.zIndex = "2147483645", a.m = b, document.body.appendChild(b)), a.m && (a.m.innerText = c, a.m.style.backgroundColor = d, a.m.style.color = e, a.m.style.display = "block")) : a.m && (a.m.style.display = "none");
}
function p3(a, b, c) {
  c ? (!a.l && document.body && (c = document.createElement("div"), c.id = "AnnotateTurnInBtn", c.className = "extension_reset_css ", c.style.height = "36px", c.style.width = "85px", c.style.position = "fixed", c.style.cursor = "pointer", c.style.right = "16px", c.style.bottom = "16px", c.style.lineHeight = "36px", c.style.backgroundColor = "#0084ff", c.style.color = "#FFFFFF", c.innerText = "TURN IN", c.style.fontSize = "14px", c.style.textAlign = "center", c.style.display = "none", c.style.zIndex = 
  "2147483644", c.addEventListener("click", a.N.bind(a), {capture:!0, passive:!1}), a.l = c, document.body.appendChild(c)), a.l && (a.l.innerText = b, a.l.style.display = "block")) : a.l && (a.l.style.display = "none");
}
function n3(a, b) {
  a.i && (b ? (a.i.style.pointerEvents = "auto", a.i.style.opacity = "1") : (a.i.style.pointerEvents = "none", a.i.style.cursor = "default", a.i.style.opacity = "0.44"));
}
function S2(a) {
  var b = document.createElement("div");
  b.id = "AnnotateReturnBtn";
  b.className = "extension_reset_css ";
  b.innerText = "RETURN";
  b.addEventListener("click", a.M.bind(a), {capture:!0, passive:!1});
  a.o = b;
  let c = document.createElement("div");
  c.id = "AnnotateReturnBtnContainer";
  c.className = "extension_reset_css ";
  c.style.height = "32px";
  c.style.width = "132px";
  c.style.marginLeft = "8px";
  c.appendChild(b);
  b = document.createElement("div");
  b.id = "AnnotateReturnMultipleDropUpBtn";
  b.className = "extension_reset_css extension_icon extension_icon-chevron_up";
  b.addEventListener("click", a.ia.bind(a), {capture:!0, passive:!1});
  c.appendChild(b);
  a.J = c;
}
function m3() {
  return document.getElementById("AnnotateReturnMultipleDropUpBtn");
}
function l3(a) {
  a.o || S2(a);
  return a.o;
}
class d3 {
  constructor(a) {
    this.g = a;
    this.j = this.i = this.o = this.m = this.l = null;
    this.u = this.v = !1;
    this.B = this.J = this.s = null;
    this.C = this.ea.bind(this);
  }
  Pr() {
    Pv.g || Pn("Authorizing Google Classroom...", "Authorization Required");
  }
  Qt() {
    let a = this.g.pc();
    if (a && Ph() && Jh()) {
      "CREATED" == a.state || "RECLAIMED_BY_STUDENT" == a.state ? (o3(this, !1, "", "", ""), p3(this, "TURN IN", !0)) : "RETURNED" == a.state ? (o3(this, !1, "", "", ""), p3(this, "RESUBMIT", !0)) : "TURNED_IN" == a.state ? (p3(this, "", !1), o3(this, !0, "TURNED IN", "#FFFFFF", "#808080")) : p3(this, "", !1);
    } else {
      if (a && Kh() && Jh()) {
        let c = this.g.ae();
        if (c && !A(c.g)) {
          var b = c.g;
          this.j && (this.g.ae().g = b.toString(), this.j.value = b);
          n3(this, !0);
          b = "TURNED_IN" == a.state || $2(c, c.g) && (!a3(c) || !b3(c));
          i3(this, b);
          k3(Y2(this.g));
        }
        "TURNED_IN" != a.state && (Pv.g = !1);
      } else {
        p3(this, "", !1), n3(this, !1), i3(this, !1), k3(Y2(this.g));
      }
    }
    !this.v && Kh() ? (dn(this.g.ae(), X2(this.g)), this.g.B.length && T2(this, 2)) : (Qv(this.g.mb(), X2(this.g)), T2(this, 2));
  }
  ba(a) {
    this.g.Gb(a.detail.strStudentGuid);
  }
  ia(a) {
    a.preventDefault();
    if (null == this.s) {
      a = document.createElement("div");
      a.id = "AnnotateGCLassroomReturnAllOptionsContainer";
      a.className = "extension_reset_css ";
      let b = document.createElement("div");
      b.className = "extension_reset_css gClassroomReturnDropUpOptions";
      b.innerHTML = "Return multiple submissions";
      b.addEventListener("click", this.ya.bind(this), {capture:!0, passive:!1});
      a.appendChild(b);
      this.s = a;
      this.J.appendChild(this.s);
    }
    this.u ? (this.s.style.display = "none", this.u = !1, window.removeEventListener("click", this.C, {capture:!0})) : (this.s.style.display = "flex", this.u = !0, window.addEventListener("click", this.C, {capture:!0, passive:!1}));
  }
  ea(a) {
    a.preventDefault();
    window.removeEventListener("click", this.C, {capture:!0});
    a.target.parentElement != this.s && a.target != m3() && (this.s.style.display = "none", this.u = !1);
  }
  ya(a) {
    a.preventDefault();
    this.s.style.display = "none";
    this.u = !1;
    window.removeEventListener("click", this.C, {capture:!0});
    this.g.Wb = !0;
    K2(!0) || (this.g.Wb = !1, Ow(this));
  }
  G(a) {
    let b = this.g.pc().state;
    a = a.target.value.replace(/[^0-9.]/g, "");
    this.j.value = a;
    let c = this.g.ae();
    c.g = a.toString();
    $2(c, a) ? "TURNED_IN" != b && b3(c) ? i3(this, !1) : i3(this, !0) : i3(this, !1);
  }
  pa() {
    console.log(">> blured");
    setTimeout(() => {
      f3(this.g.tc[this.g.ae().ve]);
    }, 200);
  }
  N() {
    if (wv()) {
      Pn("Submitting the assignment...", "Turn In");
      var a = this.g;
      Pv.g = !0;
      K2(!1) || EK(a.o);
    } else {
      Kn("", "No annotations found. Unable to turn in the assignment.", "", "OK", null, null);
    }
  }
  M() {
    this.j && this.j.blur();
    var a = this.g.ae();
    "TURNED_IN" != this.g.pc().state ? (Pn("Updating Grade...", "Grade"), Z2(this.g, !1)) : (Pn("Returning the assignment...", "Return"), a3(a) && b3(a) ? (a = this.g, Pv.g = !0, K2(!1) || FK(a.o)) : Z2(this.g, !0));
    this.s && (this.s.style.display = "none", this.u = !1, window.removeEventListener("click", this.C, {capture:!0}));
  }
  nj() {
    this.j && (this.j.value = "", this.j.blur(), e3(this, !0));
  }
  U() {
    this.g.U();
    this.j && this.j.removeEventListener("input", this.G.bind(this));
    this.o && this.o.removeEventListener("click", this.M.bind(this));
    for (this.l && this.l.removeEventListener("click", this.N.bind(this)); document.getElementById("annotate-student-notes-control-toolbar");) {
      document.getElementById("annotate-student-notes-control-toolbar").remove();
    }
    for (; document.getElementById("StudentNotesFeedbackListToolbar");) {
      document.getElementById("StudentNotesFeedbackListToolbar").remove();
    }
    for (; document.getElementById("AnnotateClassroomGradeInputDiv");) {
      document.getElementById("AnnotateClassroomGradeInputDiv").remove();
    }
    for (; document.getElementById("AnnotateReturnBtn");) {
      document.getElementById("AnnotateReturnBtn").remove();
    }
    for (; document.getElementById("AnnotateSlidesClassroomStatusWidget");) {
      document.getElementById("AnnotateSlidesClassroomStatusWidget").remove();
    }
    for (; document.getElementById("AnnotateTurnInBtn");) {
      document.getElementById("AnnotateTurnInBtn").remove();
    }
  }
}
;function P2() {
  var a = ["annotate-student-notes-control-toolbar-close", "annotate-student-notes-control-toolbar-base", "annotate-student-notes-control-toolbar-notes", "annotate-student-notes-control-toolbar-feedback"];
  document.getElementById("annotate-student-notes-control-toolbar") && a.forEach(b => {
    (b = document.getElementById(b)) && b.remove();
  });
}
function Q2(a) {
  let b = document.getElementById("annotate-student-notes-control-toolbar");
  b && a.forEach(c => {
    c && b.appendChild(c);
  });
}
class N2 extends rA {
  j(a) {
    super.j(a);
  }
  Cd(a, b) {
    super.Cd(a, b);
  }
}
;function f3(a) {
  let b = a.g;
  $2(a, b) && !a3(a) && a.v != b && (a.v = b, console.log(">>> Grade ", a.ve, b), a = a.hd(), AK({type:"slidesClassroomAuth", action:"draftGradeClassroomAssignment", courseWorkDetails:a, grade:b, bAuto:!1}));
}
function $2(a, b) {
  if (2 < b.split(".").length || "." == b[b.length - 1] || b.length && parseFloat(b) > parseFloat(a.hd().uPoints)) {
    return a.mc(100, !1), !1;
  }
  a.mc(100, !0);
  return !0;
}
function a3(a) {
  if (!a.pc()) {
    return !0;
  }
  let b = a.g;
  a = (a = a.pc().draftGrade) ? a.toString() : "";
  return a.length && b.length ? parseFloat(a) == parseFloat(b) ? !0 : !1 : a.length || b.length ? !1 : !0;
}
function b3(a) {
  if (!a.pc()) {
    return !0;
  }
  let b = a.g;
  a = (a = a.pc().assignedGrade) ? a.toString() : "";
  return a.length && b.length ? parseFloat(a) == parseFloat(b) ? !0 : !1 : a.length || b.length ? !1 : !0;
}
function j3(a, b, c) {
  c ? "draftgrade" == b ? (a.v = "-1", "" == a.g ? delete a.i.draftGrade : a.i.draftGrade = a.g) : "grade" == b && ("" == a.g ? (delete a.i.draftGrade, delete a.i.assignedGrade) : a.i.draftGrade = a.g, a.i.assignedGrade = a.g) : (a.v = "-1", 3 != a.pa && (a.pa++, f3(a)));
}
class O2 extends hn {
  constructor(a) {
    super(a, !0);
    this.i = null;
    this.g = "";
    this.v = "-1";
    this.M = !1;
    this.pa = 0;
  }
  Sj(a) {
    this.i = a;
  }
  pc() {
    return this.i;
  }
  re(a) {
    super.re(a);
    if (a = a.googleCourseWorkDetails) {
      this.Sj(a), "draftGrade" in a && (this.g = a.draftGrade.toString());
    }
  }
}
;function c2(a, b, c) {
  b && 1 != c ? (a.g = c, c = "", 2 == a.g ? c = "Review notes" : 3 == a.g ? c = "TAKE CONTROL" : 4 == a.g && ((c = Oo(S)) && c.ji && c.ji.ob() && gq(c.ji), c = "JOIN STREAM"), Ej(a, c), a.uc(c), a.Sa(b)) : a.g == c && (a.g = 1, a.Sa(!1));
}
class b2 extends Nz {
  constructor() {
    super(null);
    this.g = 1;
    R(this, "AnnotateReviewNotesButton");
    this.he("annotate-plugin-fab");
    Kj(this, this.i.bind(this));
    this.jb((parseInt(Yj) - 1).toString());
    c2(this, !1, this.g);
    var a = this.el;
    a && document.body && document.body.appendChild(a);
  }
  i() {
    if (2 == this.g) {
      W.M(null);
    } else {
      if (3 == this.g) {
        let a = Js(S, 1);
        a && lq(a);
      } else {
        4 == this.g && (Fh(P) && V ? HR(V, {type:"ANNOTATE_JOIN_PRESENTATION_ROOM_BY_COT"}) : gt());
      }
    }
  }
}
function Q1() {
  var a = Up;
  q3(a);
  return a.m;
}
function q3(a) {
  null == a.m && (a.m = new PB(), document.body.appendChild(a.m.el), a.m.ja());
}
function r3(a, b) {
  b ? window.addEventListener("pointerdown", a.v, {capture:!0, passive:!1}) : window.removeEventListener("pointerdown", a.v, {capture:!0});
}
function s3() {
  var a = Up;
  a.g && a.g.ja();
}
class t3 extends EventTarget {
  constructor() {
    super();
    this.u = this.u.bind(this);
    this.Ig = this.Ig.bind(this);
    this.s = this.s.bind(this);
    this.v = this.v.bind(this);
    this.o = null;
    this.l = {x:0, y:0};
    this.m = this.i = this.j = this.g = null;
    ki.addEventListener(qi.g, this.Ig);
  }
  Ig() {
    15 == ki.g ? this.s() : null != this.g && this.g.ja();
    this.B && this.B();
  }
  s() {
    if (null != this.g && null != this.o) {
      let a = parseInt(this.o.style.left);
      a + this.g.Ra() + 2 > Math.floor(window.visualViewport.offsetLeft + window.visualViewport.width) && (a = a + this.o.offsetWidth - (this.g.Ra() + 2));
      this.g.ga(a, parseInt(this.o.style.top) + 66);
      this.g.pb();
      r3(this, !0);
    }
  }
  u(a) {
    a = a.detail.uQtype;
    if (this.g.m()) {
      if (!this.g.o()) {
        var b = this.g.Dt(), c = Lo.Uc;
        c.g && c.g.ec(!1);
        var d = zX(a);
        tS(d);
        d.al = b;
        d.Wl(null);
        c.g = TW(c, d);
        vz(c.g);
        c.j.set(d.nk, [d, c.g]);
        b = Up.g.l(a);
        d = P.D;
        let e = d.Ea.getBoundingClientRect();
        b.left += -e.left + d.scrollX;
        b.top += -e.top + d.scrollY;
        GS(c.g, b.left, b.top);
        at(!0);
      }
      ii("10.16.9.2" + `.${a}`);
    } else {
      Lo && (c = Lo, TX(c), c.G = a, c.i = 1, c.l = 1, VX(c), ii("10.16.9.1" + `.${a}`));
    }
  }
  v(a) {
    if (15 == ki.g) {
      var b = a.target, c = Ao;
      b != c.i && b != c.j || !PX(a.pageX, a.pageY, !0) || (this.l = {x:a.pageX, y:a.pageY}, console.log("[Assessment] update element default postion ", this.l));
      b = Lo.Uc;
      b.g && b.va && !b.g.hc(a) && !b.va.hc(a) && (b.g.ec(!1), b.g = null);
    }
  }
  jb(a) {
    this.g && this.g.jb(a);
    this.j && this.j.jb((parseInt(Yj) - 1).toString());
    this.i && this.i.jb(a);
  }
  U() {
    this.g && (this.g.removeEventListener(this.g.g, this.u), this.g.U(), this.g = null);
    this.j && (this.j.U(), this.j = null);
    this.m && (this.m.U(), this.m = null);
    this.i && this.i.U();
    this.i = null;
  }
}
var Up = new t3();
function u3(a) {
  if (a.j) {
    var b = a.l = !1;
    let c = a.m.get(a.i[a.i.length - 1]);
    a.ob() && (a.m.get(a.i[0]).vd() > a.el.scrollLeft ? b = !0 : c.vd() + c.Ra() <= Math.ceil(a.el.scrollLeft + a.el.clientWidth) && (a.l = !0));
    console.log(`left ${a.l} right ${b}`);
    a.j.Sa(a.l || b);
    a.j.uc(a.l ? "Move to left" : "Move to right");
    a.j.el.className = `extension_reset_css ${a.l ? "annotate-highlight-plugin-text-size-toolbar-leftArrow extension_icon extension_icon-back" : "annotate-highlight-plugin-text-size-toolbar-rightArrow extension_icon extension_icon-next"}`;
    v3(a);
    a.l && (b = c.vd(), b + c.Ra() > a.el.scrollLeft + a.el.clientWidth && (a.el.scrollLeft = b - a.el.clientWidth / 2 + c.Ra()));
  }
}
function w3(a, b) {
  let c = new Nz(null);
  tj(c, "absolute");
  c.V(26, 26);
  wj(c, 26);
  c.vf(16);
  vj(c, "center");
  c.el.className = `extension_reset_css ${b}`;
  c.xe("#000000");
  c.el.style.fontFamily = "Arial";
  sj(c, "pointer");
  rj(c, a);
  return c;
}
function x3(a, b) {
  a.o && a.o.Qj("0");
  (a.o = b) && b.Qj(a.g.v);
}
function v3(a) {
  let b = 4;
  a.m.forEach(c => {
    c.ob() && (c.ga(b, 4), b += c.Ra() + 4);
  });
}
function y3(a) {
  var b = Up.i;
  if (a = b.m.get(a)) {
    x3(b, a);
    let c = a.vd();
    if (c < b.el.scrollLeft || c + a.Ra() > b.el.scrollLeft + b.el.clientWidth) {
      b.el.scrollLeft = c - b.el.clientWidth / 2 + a.Ra(), u3(b);
    }
  }
}
class z3 extends Nz {
  constructor() {
    var a = Y;
    super(null);
    tj(this, "fixed");
    zj(this, "rgb(255,255,255)");
    this.jb(Yj);
    yj(this, "1px solid #c0c0c0");
    this.el.addEventListener("wheel", this.Xi.bind(this));
    this.pf = 0;
    this.$m = !0;
    this.Rp = 0;
    this.Th = this.Th.bind(this);
    this.Jb = this.Jb.bind(this);
    this.ea = this.ea.bind(this);
    this.el.addEventListener("pointerdown", this.Th, {capture:!0, passive:!1});
    qj(this).overflowX = "scroll";
    qj(this).boxSizing = "content-box";
    qj(this).fontWeight = "normal";
    this.V(300, 34);
    this.ja();
    this.g = a;
    this.i = "8 9 10 11 12 14 16 18 20 22 24 26 28 32 36 48 72 96".split(" ");
    this.o = this.j = null;
    this.he("annotate-highlight-plugin-text-size-toolbar");
    this.xi();
    document.body.appendChild(this.el);
  }
  Xi(a) {
    super.Xi(a);
    u3(this);
  }
  Jb(a) {
    if (kh(a)) {
      a.preventDefault();
      var b = Math.round(a.clientX - this.pf), c = this.el.scrollLeft, d = this.el.scrollWidth - this.el.clientWidth;
      if (0 < b && 0 < c || 0 > b && c < d) {
        this.el.scrollLeft += -1 * b, this.pf = a.clientX, u3(this);
      }
      2 < Math.abs(this.Rp - this.el.scrollLeft) && (this.$m = !1);
    } else {
      this.ea(a);
    }
  }
  ea(a) {
    super.ea(a);
    u3(this);
  }
  xi() {
    this.m = new Map();
    for (var a = 0; a < this.i.length; ++a) {
      let b = w3(this.i[a], "annotate-highlight-plugin-text-size-toolbar-button");
      Kj(b, () => {
        var c = b;
        Ip();
        this.$m && (ii("10.5.2.1"), x3(this, c), c = c.el.innerHTML, document.getElementById("annotate-highlight-plugin-font-size").innerHTML = c, 13 == ki.g ? (this.g.u = c, Ko.wh(this.g.i, this.g.j, this.g.l, this.g.B, this.g.C, this.g.u, this.g.g, this.g.m), Ko.Jr().Oh()) : (this.g.Rg = c, Jo.wh(this.g.i, this.g.j, this.g.l, this.g.s, this.g.o, this.g.Rg, this.g.g, this.g.m), Jo.Bn()));
      });
      "22" == this.i[a] && (this.j = w3("", "annotate-highlight-plugin-text-size-toolbar-leftArrow extension_icon extension_icon-back"), this.j.uc("Move to left"), Kj(this.j, () => {
        let c = this.m.get(this.i[this.l ? 0 : this.i.length - 1]);
        if (c && this.$m) {
          let d = c.vd();
          if (d < this.el.scrollLeft || d + c.Ra() > this.el.scrollLeft + this.Ra()) {
            this.el.scrollLeft = d - this.Ra() / 2 + c.Ra(), u3(this);
          }
        }
      }), this.j.ja(), this.Z(this.j), this.m.set("left", this.j));
      this.Z(b);
      this.m.set(this.i[a], b);
      this.i[a] == L.uI().Rg && x3(this, b);
    }
    v3(this);
  }
  Sa(a) {
    super.Sa(a);
    u3(this);
  }
  Zb() {
    return "FontSizeToolbar";
  }
}
class A3 extends ph {
  constructor() {
    super();
    this.v = "3px solid #2196f3";
    this.l = this.j = this.i = !1;
    this.s = hi.M[0];
    this.o = "";
    this.B = hi.M[0];
    this.C = "";
    this.u = this.Rg = "20";
    this.J = ["Arial", "Times", "Roboto", "Courier"];
    this.g = this.J[0];
    this.m = this.m.bind(this);
  }
  m(a, b, c, d, e, f, k, l) {
    if (!M.m) {
      13 == ki.g || l ? (this.B = d, this.C = e, this.u = f) : (this.s = d, this.o = e, this.Rg = f);
      this.i = a;
      this.j = b;
      this.l = c;
      this.g = k;
      document.getElementById("annotate-highlight-plugin-font-family").innerHTML = this.g;
      document.getElementById("annotate-highlight-plugin-font-family").style.fontFamily = this.g;
      document.getElementById("annotate-highlight-plugin-font-family").style.fontSize = "Verdana" == this.g ? "14px" : "16px";
      a = document.getElementsByClassName("annotate-highlight-plugin-font-family-toolbar-button");
      for (b = 0; b < a.length; b++) {
        a[b].style.borderBottom = "0", a[b].innerHTML == this.g && (a[b].style.borderBottom = this.v);
      }
      document.getElementById("annotate-highlight-plugin-font-size").innerHTML = f;
      Up.i && y3(f);
      document.getElementById("annotate-highlight-plugin-textcolor").style.borderBottom = "4px solid " + d;
      a = document.getElementsByClassName("annotate-highlight-plugin-text-color-toolbar-button");
      for (b = 0; b < a.length; b++) {
        a[b].style.borderBottom = "0", bh(a[b].style.color) == d && (a[b].style.borderBottom = this.v);
      }
      document.getElementById("annotate-highlight-plugin-fillcolor").style.borderBottom = "4px solid " + ("" == e ? "#ffffff" : e);
      a = document.getElementsByClassName("annotate-highlight-plugin-text-fill-color-toolbar-button");
      for (b = 0; b < a.length; b++) {
        a[b].style.borderBottom = "0", bh(a[b].style.color) == e && (a[b].style.borderBottom = this.v);
      }
      "" == e && (a[a.length - 1].style.borderBottom = this.v);
      document.getElementById("annotate-highlight-plugin-bold").style.backgroundColor = this.i ? "#C0C0C0" : "";
      document.getElementById("annotate-highlight-plugin-italic").style.backgroundColor = this.j ? "#C0C0C0" : "";
      document.getElementById("annotate-highlight-plugin-underline").style.backgroundColor = this.l ? "#C0C0C0" : "";
    }
  }
}
var Y = new A3();
class ms extends Wm {
  constructor(a) {
    super();
    this.he(a);
    this.g = [];
  }
  cb() {
    return "elementGroup";
  }
  Na() {
    let a = {};
    a.nId = this.ta;
    a.uuid = this.qe;
    a.arrElementId = this.g;
    return a;
  }
  C() {
    return this.Na();
  }
}
;Object.freeze({QN:1, vE:2, TN:3, JN:4, SI:5});
let B3 = null;
function Mp(a, b) {
  var c = S;
  b || (b = c.g);
  if (b = Js(c, b)) {
    {
      c = a.M;
      let d = zs(b, c);
      -1 != d && (a = b.Oe[d].g.indexOf(a.ta), -1 !== a && (b.Oe[d].g.splice(a, 1), b.Oe[d].xb(), 0 == b.Oe[d].g.length ? (b.Oe.splice(d, 1), a = {}, a.arrElementGroup = [c], b.dispatchEvent(new CustomEvent(Cp.g, {detail:a}))) : (a = {}, a.arrElementGroup = [b.Oe[d]], b.dispatchEvent(new CustomEvent(Cp.i, {detail:a})))));
    }
  }
}
function C3(a) {
  clearTimeout(a.j);
  a.g && (a.g.xb(), xv(a.g), a.g = null);
}
function D3(a) {
  var b = bq;
  "pen" !== a.cb() && "highlighter" !== a.cb() ? console.log("[anchor] >> feature not supported") : (b.g || (b.i += 1, b.g = new ms(b.i)), a.M = b.g.ta, b.g.g.push(a.ta), clearTimeout(b.j), b.j = setTimeout(() => {
    C3(b);
  }, 500));
}
function E3(a) {
  let b = a.ta;
  a = a.M;
  var c = null, d = S;
  c || (c = d.g);
  if (c = Js(d, c)) {
    if (d = zs(c, a), -1 != d) {
      c.Oe[d].g.push(b);
      let e = {};
      e.arrElementGroup = [c.Oe[d]];
      c.dispatchEvent(new CustomEvent(Cp.i, {detail:e}));
      c = c.Oe[d];
    } else {
      c = !1;
    }
  } else {
    c = !1;
  }
  c || (a = new ms(a), a.g.push(b), a.xb(), xv(a));
}
class F3 {
  constructor() {
    if (B3) {
      throw Error("ElementGroupHelper is already instantiated");
    }
    B3 = this;
    this.j = -1;
    this.g = null;
    this.i = -1;
    ki && ki.addEventListener(qi.g, this.l.bind(this));
  }
  l(a) {
    a.detail.wN != a.detail.IO && C3(bq);
  }
  Na() {
    var a = S;
    var b = null;
    b = a.g;
    a = (a = Js(a, b)) ? a.Oe : [];
    b = [];
    for (let c of a) {
      b.push(c.Na());
    }
    return b;
  }
}
var bq = new F3();
function G3(a) {
  let b = "ctx" in a ? a.ctx : Ao.B;
  switch(ki.g) {
    case 2:
      var c = "property" in a ? a.property : hi.m;
      return new Bo(b, c.qa, c.zb, c.Rb, 1, Object.assign({}, a.annotationPositionOffset));
    case 4:
      return new sz(b, Object.assign({}, a.annotationPositionOffset));
    case 3:
      return c = "property" in a ? a.property : hi.l, new Fo(b, c.qa, c.zb, c.Rb, 1, Object.assign({}, a.annotationPositionOffset));
    case 12:
      return c = "property" in a ? a.property : hi.i, new Eo(b, c.qa, c.Hd, c.zb, c.Rb, 1 == c.zw ? 0.7 : c.zw, c.Nf, c.Ng, c.ij, 1, Object.assign({}, a.annotationPositionOffset));
    case 11:
      return c = "property" in a ? a.property : hi.g, new Do(b, c.qa, c.Hd, c.zb, c.Rb, c.Rb, 1, Object.assign({}, a.annotationPositionOffset));
    case 10:
      return c = "property" in a ? a.property : hi.j, new Co(b, c.qa, c.Hd, c.zb, c.Rb, c.Rb, 1, Object.assign({}, a.annotationPositionOffset));
  }
}
;const yM = Object.freeze({YF:0, SF:1, HB:2, IK:3, WF:4, VF:5, QK:6, VK:7, ZK:8, JK:9, NK:10, LK:11, bL:12});
function H3(a) {
  switch(a.g) {
    case yM.YF:
      return "Livestream Started";
    case yM.bL:
      return "Waiting to Join";
    case yM.LK:
      return "Joined";
    case yM.SF:
      return "Connected";
    case yM.HB:
      return "Disconnected";
    case yM.IK:
      return "Livestream Ended";
    case yM.WF:
      return "On Task";
    case yM.VF:
      return "Off Task";
    case yM.QK:
      return "Pass Control";
    case yM.VK:
      return "Received Control";
    case yM.ZK:
      return "Take Control";
    case yM.JK:
      return "Lost Control";
    case yM.NK:
      return "Left Livestream";
  }
}
class I3 {
  constructor(a) {
    this.g = a;
  }
}
function xM(a) {
  var b = J3;
  Ph() && (a = new I3(a), console.log(`>> Livefeed event logger: ${H3(a)}`), b.g.push(a), K3(b));
}
function K3(a) {
  if (0 == a.i.length && 0 != a.g.length && V && -1 != V.G) {
    clearTimeout(a.j);
    a.j = -1;
    var b = {uLivefeedId:V.G}, c = [];
    for (let d of a.g) {
      c.push({uEvent:d.g});
    }
    b.arrEvents = c;
    a.i = a.g;
    a.g = [];
    L.sa({type:"annotateLivefeedUserEvents", data:b}, d => {
      d.bSuccess ? (a.i = [], K3(a)) : L3(a);
    });
  }
}
function L3(a) {
  for (let b of a.g) {
    a.i.push(b);
  }
  a.g = a.i;
  a.i = [];
  a.j = setTimeout(() => {
    K3(a);
  }, 2000);
}
class M3 {
  constructor() {
    this.g = [];
    this.i = [];
    this.j = -1;
  }
}
var J3 = new M3();
var L = function() {
  function a() {
    qY();
    VY(Kv, !1);
  }
  function b() {
    let h = "", m = !1;
    var q = new URLSearchParams(window.location.search);
    let v = q.get("state");
    v && (v = decodeURIComponent(v));
    let B = null;
    if (q = q.get("pdfData")) {
      try {
        let E = JSON.parse(atob(q));
        "pdfUrl" in E && (B = E.pdfUrl);
      } catch (E) {
      }
    }
    if (v) {
      try {
        let E = JSON.parse(v);
        E.ids ? h = E.ids[0] : E.exportIds && (h = E.exportIds[0], m = !0);
      } catch (E) {
      }
    }
    h.length && (B = JSON.stringify({isDriveFile:!0, googleFileId:h, isGoogleDocFile:m, googleUserId:""}));
    sl = B;
    P.G = B;
  }
  function c(h, m) {
    h ? (window.addEventListener("resize", By, m), window.visualViewport.addEventListener("resize", By, m)) : (window.removeEventListener("resize", By, m), window.visualViewport.removeEventListener("resize", By, m));
  }
  function d(h, m) {
    if (!A(h) && (window == window.top || document.getElementById("AnnotateScreenCaptureDiv"))) {
      if (h.pageAnnotations && (-1 != wa.indexOf("docs.google.com/presentation/d/") || ml(P) || Qk() || Gk(P))) {
        if (window == window.top || Gk(P) && !Qk()) {
          m = wa;
          if (Gk(P) || kc && kc.Ja()) {
            m = window.location.href;
          }
          if (-1 != m.indexOf("docs.google.com/presentation/d/")) {
            if (Lh || NT(), -1 != m.indexOf("docs.google.com/presentation/d/")) {
              c: {
                var q = document.querySelectorAll("#docs-editor #slides-view #pages svg");
                for (var v = 0; v < q.length; ++v) {
                  if ("block" == getComputedStyle(q[v]).display) {
                    var B = q[v].querySelectorAll("g");
                    for (var E = 0; E < B.length; E++) {
                      if (B[E].id.startsWith("editor-")) {
                        m = B[E].id.substr(7);
                        break c;
                      }
                    }
                  }
                }
                q = m.lastIndexOf("slide=");
                m = -1 != q ? m.substring(q).substring(9) : -1;
              }
            } else {
              m = void 0;
            }
          } else {
            -1 != m.indexOf("canva.com/design") && cd ? (-1 != cd.l && -1 != cd.u || OT(), m = cd.Mr()) : m = void 0;
          }
          h = h.pageAnnotations;
          if (q = Oo(S)) {
            q.Pa = h;
          }
          q = !1;
          v = {};
          0 < Object.keys(h).length && (v = h[m], A(v) || (q = !0));
          q && (d(v, !1), x0(!1));
        } else {
          Lh || PT();
          for (v in h.pageAnnotations) {
            m = h.pageAnnotations[v], mv(v, m), m.pageData || (m.pageData = {height:h.pageData.height, width:h.pageData.width});
          }
          IR();
          (h = nk()) && h.length && (h = kv(h)) && (d(h, !1), x0(!1));
        }
      } else {
        tl();
        uq();
        h && (h.baseAnnotationData && Qo(h.baseAnnotationData, 1, m), h.notesAnnotationData && Qo(h.notesAnnotationData, 2, m), h.feedbackAnnotationData && Qo(h.feedbackAnnotationData, 3, m), S.B = !0, P.i && window.top != window && L.sa({type:"iframewebannotationdocsloaded"}, null));
        Na && (h.pdfAnnotationPages ? (vq = h.pdfAnnotationPages, FG = h.maxPDFPageId, Z.Ea && MJ(Z, vq, FG, h.arrTextHighlights)) : (vq = null, Z.Ea && hd({type:"ANNOTATE_PDF_SET_ANNOTATION_DATA", pdfAnnotationPages:vq, textHighlights:[], maxPageId:-1})));
        "nMaxElementId" in h && (v = Oo(S)) && (v.dh = parseInt(h.nMaxElementId));
        "uuid" in h && (v = Oo(S)) && nh(v, h.uuid);
        if (h.elementGroupData) {
          B = h.elementGroupData;
          v = bq;
          v.i = -1;
          for (q of B) {
            B = new ms(q.nId);
            B.g = q.arrElementId;
            nh(B, q.uuid);
            E = void 0;
            var K = S;
            E || (E = K.g);
            if (E = Js(K, E)) {
              E.Oe.push(B), console.log(">> saved group added"), console.log(E.Oe);
            }
            v.i = Math.max(v.i, q.nId);
          }
        }
        if (h.arrAnnotations) {
          for (q = h.arrAnnotations, v = 0; v < q.length; v++) {
            B = zo(q[v], !1), Io(S, B), B.Cb && (B = Dk(B.Cb), Gt(B));
          }
        }
        h.arrTextElements && Jo.Dr(h.arrTextElements, S.g);
        h.arrTextElements && Ko.Dr(h.arrTextElements, S.g);
        h.arrTextHighlights && Ro.mF(h.arrTextHighlights, S.g);
        h.arrMediaAttachments && h.arrMediaAttachments.length && So(jb, h.arrMediaAttachments, S.g);
        h.arrImageAttachments && h.arrImageAttachments.length && To(jb, h.arrImageAttachments, S.g);
        h.arrUploadedVideoAttachments && h.arrUploadedVideoAttachments.length && Uo(jb, h.arrUploadedVideoAttachments, S.g);
        h.timerElementData && (Vo() || V && -1 != V.l) && Wo(Xo, h.timerElementData);
        !h.screenShadeElementData || A(Yo) || m || Zo(h.screenShadeElementData);
        h.arrComments && h.arrComments.length && (ac.zt(h.arrComments, S.g), si() || ac.Fx(h.arrComments, S.g), ac.Ex());
        Na ? Z.Ea && (Jo.wm(Z), Ko.wm(Z), Tr(jb, Z), Yk(), x0(!0)) : (h = Object.assign({}, Ab), Jo.xm(h), Ko.xm(h), P.wf(h), jb.wf(h), Yo && Yo.xm(h));
        h = bl(1);
        !Jh() && null != h && h.bSharedDoc && (x0(!1), c(!0, !1), window.addEventListener("scroll", wq, !1));
        Kp();
      }
    }
  }
  function e(h) {
    (3 != h.uCurrentMode || h.bScrollWhileInitialize) && window.scrollTo(0, 0);
    if (h.bWebPageClassroomAssignment && !h.bGoogleAssignmentAutosaved) {
      if (Ql.s = !0, aC && $B(aC), h.extraLoadedData.bNonAnnotateStudent) {
        Qv(Ql, !1), T2(Ta.j, 2), Ta && Ta.Sj(null);
      } else {
        Pn("Please wait while annotations for Google assignment are being loaded...");
        Ta && (Ta.i = h);
        return;
      }
    }
    Ql.Ja() && si() || $o();
    Jp();
    h.bGoogleAssignmentAutosaved && (h.bWebPageClassroomAssignment && Ta && (Sn(), T2(Ta.j, 1), Ta.o = h.courseWorkDetails, CK(h.courseWorkDetails)), nK(h.bWebPageClassroomAssignment));
    Kh() && 1 == h.uCurrentMode && h.annotationData && (h.annotationId && -1 != h.annotationId || Yg(h.strGUID)) && (Ch() && "" != h.strGUID ? Gv[h.strGUID] = JSON.parse(JSON.stringify(h.annotationData)) : JSON.parse(JSON.stringify(h.annotationData)));
    V1(W);
    S.Sl = h.strPageUrl ? h.strPageUrl : "";
    h.strAnnotateDataRequestUrl && 0 < h.strAnnotateDataRequestUrl.length && (M.v = h.strAnnotateDataRequestUrl);
    h.strS3BucketFullPath && (M.o = h.strS3BucketFullPath);
    "uCurrentMode" in h && (so(h.uCurrentMode), x0(!1));
    var m = S.g;
    h.uDocAccessedAs && (S.m = h.uDocAccessedAs);
    S.j = h.uClassId;
    var q = h.uLivefeedType;
    if (!A(q) && V && (tR(V, parseInt(h.uLivefeedType)), "uLivefeedActivityId" in h)) {
      var v = h.uLivefeedActivityId, B = V;
      console.log(`>> SetLivefeedActivityId ${v}`);
      B.G = A(v) ? -1 : v;
    }
    V && V.l != Ym ? B0(Ao) || C0(Ao) : D0();
    v = S;
    v.i && cq(v.i, h.annotationId, h.strAnnotationPath);
    v = S;
    v.i && (v.i.ma = h.strGUID);
    v = S;
    v.i && dq(v.i, h.versionNo);
    v = h.strAnnotationName;
    (B = Js(S, 1)) && Yg(v) && (B.Hn = v);
    S.Jh = !0;
    A(h.oLivefeed) || dt(h.oLivefeed, !1);
    var E = null;
    h.baseDocumentOwnerInfo && (E = h.baseDocumentOwnerInfo);
    Fn(S, E, 1);
    cl(1) && null != E && (!Ch() && E.uPublisherId == M.s || Ch() && E.strPublisherGuid == Bh()) ? zn(jb, Cy, Dy, Vi, Wi, !ud) : null != E && cl(2) ? Dn(jb, E.uPublisherId, E.strPublisherGuid, E.uPublishedAnnotationId, E.strPublishedAnnotationGuid, E.strPublishedAnnotationPath, E.strPublisherPicture, E.oPublisherPicturePosition, E.strPublisherFirstName, E.strPublisherLastName, E.uPublisherFeatureValue) : !h.bGoogleAssignmentAutosaved && null != E && 0 < Object.keys(E).length && En(jb, E.uPublisherId, 
    E.strPublisherGuid, E.uPublishedAnnotationId, E.strPublishedAnnotationGuid, E.strPublishedAnnotationPath, E.strPublisherPicture, E.oPublisherPicturePosition, E.strPublisherFirstName, E.strPublisherLastName, E.uPublisherFeatureValue);
    !Ph() || h.bPDFViewer || h.bSlidesPreview || h.bGoogleAssignmentAutosaved || Pl() || (S.g = 1, U1(W));
    1 == m ? (S.zd = E.strPublisherGuid, h.strFilePath && wt(h.strFilePath), fw() && !hI(fw()) && xI(fw())) : h.strStudentGuid && (S.zd = h.strStudentGuid);
    h.bPDFViewer && (Na = !0, P.B = !0, b());
    Na && h.strGUID ? al(h.strGUID) : P.o && (h.strGUID && Jw(ul, h.strGUID, m), 3 != m && Kw(ul, h.strAnnotationName));
    B = [];
    h.arrMediaReencodeStatus && (B = JSON.parse(JSON.stringify(h.arrMediaReencodeStatus)));
    v = h.annotationData;
    vo(v, B);
    var K = null, U = null;
    ct(S, 2, null);
    if (h.notesData) {
      var na = h.notesData;
      U = Ls(2);
      cq(U, na.annotationId, na.strAnnotationPath);
      U.ma = na.strGUID;
      dq(U, na.versionNo);
      jq(U, {strPublisherGuid:na.strPublisherGuid, uPublisherId:na.uPublisherId, strS3BucketFullPath:M.o, strAnnotateDataRequestUrl:M.v, uPublishedAnnotationId:na.annotationId, strPublishedAnnotationGuid:na.strGUID, strAnnotationPath:na.strAnnotationPath, strPublisherPicture:na.strPublisherPicture, oPublisherPicturePosition:na.oPublisherPicturePosition, strPublisherFirstName:na.strPublisherFirstName, strPublisherLastName:na.strPublisherLastName, uPublisherFeatureValue:na.uPublisherFeatureValue,});
      2 == m && (na.strPublisherGuid && (S.zd = na.strPublisherGuid), pZ(jb, na.uPublisherId, na.strPublisherGuid, na.annotationId, na.strPublishedAnnotationGuid, na.strAnnotationPath, na.strPublisherPicture, na.oPublisherPicturePosition, na.strPublisherFirstName, na.strPublisherLastName, na.uPublisherFeatureValue));
      if (K = na.annotationData) {
        2 == m && vp(K), "nMaxElementId" in K && (U.dh = parseInt(K.nMaxElementId)), "uuid" in K && nh(U, K.uuid), K.pageAnnotations && (U.Pa = K.pageAnnotations);
      }
      var ob = [];
      na.arrMediaReencodeStatus && (ob = JSON.parse(JSON.stringify(na.arrMediaReencodeStatus)));
      vo(K, ob);
      er(U, ob);
    }
    ob = na = null;
    ct(S, 3, null);
    if (h.feedbackData) {
      var Ca = h.feedbackData;
      ob = Ls(3);
      cq(ob, Ca.annotationId, Ca.strAnnotationPath);
      ob.ma = Ca.strGUID;
      dq(ob, Ca.versionNo);
      jq(ob, {strPublisherGuid:Ca.strPublisherGuid, uPublisherId:Ca.uPublisherId, strS3BucketFullPath:M.o, strAnnotateDataRequestUrl:M.v, strPublishedAnnotationGuid:Ca.strGUID, strAnnotationPath:Ca.strAnnotationPath, strPublisherPicture:Ca.strPublisherPicture, oPublisherPicturePosition:Ca.oPublisherPicturePosition, strPublisherFirstName:Ca.strPublisherFirstName, strPublisherLastName:Ca.strPublisherLastName, uPublisherFeatureValue:Ca.uPublisherFeatureValue,});
      3 == m && (Ca.strPublisherGuid && (S.zd = Ca.strPublisherGuid), pZ(jb, Ca.uPublisherId, Ca.strPublisherGuid, Ca.annotationId, Ca.strPublishedAnnotationGuid, Ca.strAnnotationPath, Ca.strPublisherPicture, Ca.oPublisherPicturePosition, Ca.strPublisherFirstName, Ca.strPublisherLastName, Ca.uPublisherFeatureValue));
      if (na = Ca.annotationData) {
        3 == m && vp(na), "nMaxElementId" in na && (ob.dh = parseInt(na.nMaxElementId)), "uuid" in na && nh(ob, na.uuid), na.pageAnnotations && (ob.Pa = na.pageAnnotations);
      }
      var qc = [];
      Ca.arrMediaReencodeStatus && (qc = JSON.parse(JSON.stringify(Ca.arrMediaReencodeStatus)));
      vo(na, qc);
      er(ob, qc);
      h.bGoogleAssignmentAutosaved && "bDirty" in h.feedbackData && S.La.Rj(h.feedbackData.bDirty);
    } else {
      Kh() && Rl() && h.bGoogleAssignmentAutosaved && (ob = Ls(3));
    }
    Ca = !0;
    Ph() && 1 == m && V && V.l != Ym && !jd && (Ca = !1);
    Ql.Ja() && (Ph() && 2 == m || Kh() && 3 == m) && (Ca = !0);
    Qh() && (Ca = !1);
    k(Ca);
    FR(W);
    ac.gy();
    A(h.strAssessmentFileGuid) || Vs(h.strAssessmentFileGuid);
    A(h.oAssessmentFileInfo) || (Ca = S, Ca.i && (qc = h.oAssessmentFileInfo, A(qc) || Ca.i.Bk.re(qc), console.log("[Assessment] Set Assessment FileInfo ", qc)));
    A(h.extraLoadedData) || Xs(h.extraLoadedData);
    if (h.bSlidesPreview && n()) {
      Ca = Ls(1);
      cq(Ca, h.annotationId, h.strAnnotationPath);
      Ca.ma = h.strGUID;
      jq(Ca, E);
      dq(Ca, h.versionNo);
      if (E = h.annotationData) {
        if (E = E.pageAnnotations) {
          fr(B, E), Ca.Pa = E;
        }
      }
      jd = P.m = !0;
      Zj();
      XH = v;
      YH = U;
      ZH = ob;
      zH && zH.dy(XH, YH, ZH);
      !Ey && rl() && c(!0, pb);
    }
    U = !1;
    "bNotesAllowed" in h && (U = h.bNotesAllowed);
    p2(U);
    l2() && (U = In, h && (U.g = new xn(), U.g.re(h)));
    U = null != q && -1 != q && !W.v;
    q = pw;
    !L.mb().Ja() && (window == window.top && (Ph() && Ep() || Qh() && yp() || U) && (si() || P.m || Pl()) || window != window.top && (si() || Jk(P)) && rl()) && (q.l && q.m && 2 == q.m.g || K1(q, !0), V && V.l != Ym && (P.m && (V.m = BN), U = V, JR(U, !1), U.j && (UN(U.j, U.m), WQ(U.j, U.l))), q.i || (q.i = new VI(null, L.Jx(), q.l)), P.m && UN(q.i, BN), q = q.i, q.s() && NI(q));
    z2(pw);
    FR(W);
    h.bSlidesPreview || (IR(), q = {}, h.bGoogleAssignmentAutosaved && 2 == m ? (q = K, q.baseAnnotationData = v, q.feedbackAnnotationData = na, void 0 == q.pageAnnotations && (q.pageAnnotations = {})) : 1 == m ? (q = v, vp(v)) : 2 == m ? (K && (q = K), q.baseAnnotationData = v, q.feedbackAnnotationData = na, void 0 == q.pageAnnotations && (q.pageAnnotations = {})) : 3 == m && (na && (q = na), q.baseAnnotationData = v, q.notesAnnotationData = K, void 0 == q.pageAnnotations && (q.pageAnnotations = 
    {})), 2 != m && 3 != m || !h.bPDFViewer || (Ql.Ja() ? (m = h.notesData, "pageData" in m.annotationData && (q.pageData = m.annotationData.pageData), "pdfAnnotationPages" in m.annotationData && (q.pdfAnnotationPages = m.annotationData.pdfAnnotationPages), "maxPDFPageId" in m.annotationData && (q.maxPDFPageId = m.annotationData.maxPDFPageId), "whiteboardData" in m.annotationData && (q.whiteboardData = m.annotationData.whiteboardData)) : ("pageData" in v && (q.pageData = v.pageData), "pdfAnnotationPages" in 
    v && (q.pdfAnnotationPages = v.pdfAnnotationPages), "maxPDFPageId" in v && (q.maxPDFPageId = v.maxPDFPageId), "whiteboardData" in v && (q.whiteboardData = v.whiteboardData))), Rl() && h.bGoogleAssignmentAutosaved && (K = h.annotationData, na = h.notesData, m = h.feedbackData, K = K && K.whiteboardData ? K.whiteboardData : {width:0, height:0}, na = na && na.annotationData && na.annotationData.whiteboardData ? na.annotationData.whiteboardData : {width:0, height:0}, m = m && m.annotationData && 
    m.annotationData.whiteboardData ? m.annotationData.whiteboardData : {width:0, height:0}, q.whiteboardData = {width:Math.max(K.width, na.width, m.width), height:Math.max(K.height, na.height, m.height),}), m = !1, pw && fw() && (m = 0 < Object.keys(fw().tc).length), !m && -1 == wa.indexOf("docs.google.com/presentation/d/") && -1 == wa.indexOf("canva.com/design") && -1 == wa.indexOf("docs.google.com/document/d/") && !Na && v.pageData && v.pageData.width && v.pageData.width != h.tabWidth / h.tabZoom && 
    2 < Math.abs(v.pageData.width - h.tabWidth / h.tabZoom) ? (B = !0, "winWidth" in h && h.winWidth <= v.pageData.width && (m = h.winWidth - h.tabWidth + v.pageData.width, m > h.winWidth && h.winWidth / m == h.tabZoom && (B = !1)), h.bWebPageClassroomAssignment && h.bGoogleAssignmentAutosaved || h.bWebPageClassroomAssignment && h.extraLoadedData.bNonAnnotateStudent ? (d(q, h.bForScreenShot), Yn = !1) : B ? (B = {type:"annotateResizeWindow", width:v.pageData.width, annotationData:v, bForScreenShot:h.bForScreenShot}, 
    h.bForScreenShot ? d(q, h.bForScreenShot) : W.v || sd(B, q)) : (d(q, h.bForScreenShot), Yn = !0)) : (wa && (-1 != wa.indexOf("docs.google.com/presentation/d/") || -1 != wa.indexOf("canva.com/design")) && v.pageAnnotations && 0 < Object.keys(v.pageAnnotations).length && 0 < B.length && fr(B, v.pageAnnotations), d(q, h.bForScreenShot), h.bGoogleAssignmentAutosaved || (Yn = !0)), Ql.Ja() && hd({type:"ANNOTATE_PDF_DOC_VERSION", savedNotesDocVersionNo:tt(), savedFeedbackDocVersionNo:ut()}), h.bGoogleAssignmentAutosaved && 
    Rl() ? h.feedbackData && "bDirty" in h.feedbackData || bt() : bt(), P.o && v.whiteboardData && nG(ul, v.whiteboardData), le());
  }
  function f() {
    let h = W.np;
    var m;
    (m = Qh() || M.g || cd && !(cd.g != ol.Jv && cd.g != ol.At)) || (m = P.Ha);
    m && (h = !1);
    return h;
  }
  function k(h) {
    W.np != h && (W.np = h, W.np ? (h = W, h.g = h.Db, W.Db || Zn(), xq(), ak(!0, !1)) : (h = W, h.Db = h.g, W.g = !1, vl(!0), Kb(!1)));
  }
  function l() {
    var h = document.getElementById("annotate-highlight-plugin-comment"), m = document.getElementById("annotate-highlight-plugin-popup-comment"), q = document.getElementById("annotate-highlight-plugin-popup-comment-icon");
    let v = GG();
    h && !W.ea && (14 != ki.g && (h.style.backgroundColor = ""), h.title = li ? "Show comments" : "Add a comment", Kh() && v || li || (h.title = "Hide comments", h.className = "extension_reset_css extension_icon extension_icon-comments"));
    m && !W.ea && (m.title = li ? h.title : "Add a comment", Kh() && v || li || (m.title = "Hide comments", q.className = "extension_reset_css extension_icon extension_icon-comments"));
  }
  function n() {
    return 1 == S.g && window == window.top || 2 == S.g && window == window.top || 3 == S.g && window != window.top || 2 == S.g && window != window.top && null != rl() ? !0 : !1;
  }
  function p(h) {
    if (HG) {
      HG = !1;
      var m = document.createElement("canvas");
      m.style.width = "360px";
      m.style.height = "270px";
      m.width = 360;
      m.height = 270;
      var q = m.getContext("2d");
      q.clearRect(0, 0, m.width, m.height);
      var v = new Image();
      v.onload = function() {
        var B = window.devicePixelRatio ? window.devicePixelRatio : 1;
        q.scale(B, B);
        if (Ab.width > Ab.height) {
          var E = Ab.width / Ab.height * 270;
          m.width = E;
          m.style.width = E + "px";
        } else {
          E = Ab.height / Ab.width * 360, m.height = E, m.style.height = E + "px";
        }
        E = Ab.x;
        var K = Ab.y;
        if (-1 != wa.indexOf("docs.google.com/document/d/")) {
          var U = document.getElementsByClassName("kix-appview-editor")[0];
          U && (K = Ab.y + U.scrollTop);
        }
        q.drawImage(v, E * B, K * B, Ab.width * B, Ab.height * B, 0, 0, m.width, m.height);
        B = m.toDataURL();
        m.remove();
        QT = B.replace("data:image/png;base64,", "");
      };
      v.src = h.data;
    }
  }
  function t() {
    var h = document.createElement("style");
    h.type = "text/css";
    h.textContent = "@font-face { font-family: Roboto; src: url('" + window.chrome.runtime.getURL("fonts/Roboto-Regular.ttf") + "'); }";
    document.head.appendChild(h);
    h = document.createElement("link");
    h.href = "https://fonts.googleapis.com/css?family=Roboto:500";
    h.type = "text/css";
    h.rel = "stylesheet";
    document.head.appendChild(h);
  }
  function x() {
    WB && (mC && lC(mC) ? XB(!1) : XB(!0));
  }
  function D(h) {
    h.preventDefault();
    kd.style.top = h.clientY - Ga > Math.floor(window.visualViewport.height) - kd.clientHeight ? Math.floor(window.visualViewport.height) - kd.clientHeight + "px" : 0 > h.clientY - Ga ? "0px" : h.clientY - Ga + "px";
    3 < Math.abs(h.clientY - Ga) && ($n = !1);
  }
  function G(h) {
    h.preventDefault();
    200 >= (new Date()).getTime() - RT && ($n = !0);
    window.removeEventListener("pointermove", D, {capture:!0});
    window.removeEventListener("pointerup", G, {capture:!0});
    window.removeEventListener("pointercancel", G, {capture:!0});
    if ("mouse" == h.pointerType) {
      $n && (kd.style.removeProperty("width"), Bd.style.removeProperty("width"), Bd.style.removeProperty("border-radius"));
    } else {
      if ($n) {
        if ($d) {
          kd.style.removeProperty("width"), Bd.style.removeProperty("width"), Bd.style.removeProperty("border-radius"), $d = !1;
        } else {
          $d = !0;
          kd.style.width = "212px";
          Bd.style.width = "200px";
          Bd.style.borderRadius = "5px";
          Ce = setTimeout(function() {
            kd.style.removeProperty("width");
            Bd.style.removeProperty("width");
            Bd.style.removeProperty("border-radius");
            $d = !1;
          }, 5E3);
          return;
        }
      }
      $d && (Ce = setTimeout(function() {
        kd.style.removeProperty("width");
        Bd.style.removeProperty("width");
        Bd.style.removeProperty("border-radius");
        $d = !1;
      }, 5E3));
    }
    $n && Q(h);
    ao();
  }
  function I(h) {
    h.preventDefault();
    Ip();
    h && "mouse" == h.pointerType && 1 != h.which || (window.addEventListener("pointermove", D, {capture:!0, passive:!1}), window.addEventListener("pointerup", G, {capture:!0, passive:!1}), window.addEventListener("pointercancel", G, {capture:!0, passive:!1}), Ga = h.clientY - parseInt(window.getComputedStyle(kd).getPropertyValue("top")), $n = !0, "mouse" == h.pointerType && (kd.style.width = "212px", Bd.style.width = "200px", Bd.style.borderRadius = "5px"), RT = (new Date()).getTime(), -1 != Ce && 
    clearTimeout(Ce));
  }
  function Q(h) {
    $n && (Bd.style.removeProperty("width"), Bd.style.removeProperty("width"), Bd.style.removeProperty("border-radius"), h.preventDefault(), ae && Pv.i && Pv.i.strBaseWebPageUrl || "AnnotateNewTabGradingModeBtnText" == h.target.id ? Mc && Mc.N() : (ae = !ae, Ph() ? (ae = !1, Kn("", "Grading is not supported for this account type.", "", "OK", null, null)) : (Fa(), Xa({type:"COMM_UPDATE_GRADE_WITH_ANNOTATE", bGradeWithAnnotate:ae}, null), ae && Xa({type:"annotateAnnotationModeGot", value:!0}, null))));
  }
  function X(h) {
    kd && (kd.style.display = h ? "block" : "none");
  }
  function Fa() {
    let h = Pv.i;
    var m = document.querySelector("#AnnotateGradingModeBtnText");
    m && (m.innerHTML = ae ? h && h.strBaseWebPageUrl ? "Grade in a new tab" : "Stop grading with Annotate" : h && h.strBaseWebPageUrl ? "Grade here in Classroom view" : "Grade with Annotate");
    Mc && (Mc.j = ae, iK(Mc, !1));
  }
  function La() {
    if (document.body && (!kd || !document.getElementById("AnnotateGradingModeDiv"))) {
      kd = document.createElement("div");
      kd.id = "AnnotateGradingModeDiv";
      kd.className = "extension_reset_css ";
      kd.style.display = "none";
      Bd = document.createElement("div");
      Bd.className = "extension_reset_css ";
      Bd.id = "AnnotateGradingModeBtnDiv";
      var h = document.createElement("div");
      h.className = "extension_reset_css ";
      h.style.display = "flex";
      h.style.width = "220px";
      h.style.margin = "0px";
      Bd.appendChild(h);
      var m = document.createElement("div");
      m.className = "extension_reset_css ";
      m.id = "AnnotateStartAnnotationModeBtnIcon";
      m.style.backgroundImage = "url(" + Ti() + ")";
      h.appendChild(m);
      var q = document.createElement("div");
      q.className = "extension_reset_css ";
      q.style.width = "193px";
      q.style.height = "60px";
      q.style.margin = "0px";
      q.style.display = "flex";
      q.style.flexDirection = "column";
      h.appendChild(q);
      var v = document.createElement("div");
      v.className = "extension_reset_css ";
      v.id = "AnnotateGradingModeBtnText";
      v.innerHTML = "Grade with Annotate";
      q.appendChild(v);
      var B = document.createElement("div");
      B.className = "extension_reset_css ";
      B.id = "AnnotateNewTabGradingModeBtnText";
      B.innerHTML = "Grade in a new tab";
      B.style.top = "30px";
      q.appendChild(B);
      kd.appendChild(Bd);
      document.body.appendChild(kd);
      ik(kd);
      h.addEventListener("pointerdown", I, {capture:!0, passive:!1});
      h.addEventListener("touchstart", ya, {capture:!0, passive:!1});
      kd.onmouseover = function() {
        kd.style.width = "215px";
        Bd.style.width = "205px";
        Bd.style.borderRadius = "5px";
        if (Pv.i && Pv.i.strBaseWebPageUrl) {
          let E = document.querySelector("#AnnotateGradingModeBtnText");
          E && !ae && (E.innerHTML = "Grade here in Classroom view", kd.style.width = "230px", Bd.style.width = "220px", Bd.style.height = "60px", v.style.marginLeft = "0px", B.style.marginLeft = "0px", v.style.width = "193px", B.style.width = "193px", h.style.justifyContent = "center", m.style.display = "none");
        }
      };
      kd.onmouseout = function() {
        kd.style.width = "42px";
        Bd.style.width = "30px";
        Bd.style.borderRadius = "50%";
        Pv.i && Pv.i.strBaseWebPageUrl && (Bd.style.height = "30px", v.style.removeProperty("margin-left"), B.style.removeProperty("margin-left"), h.style.removeProperty("justify-content"), v.style.removeProperty("width"), B.style.removeProperty("width"), m.style.display = "block");
      };
      bo();
    }
  }
  function Aa(h) {
    h.preventDefault();
    Ub.style.top = h.clientY - Ga > Math.floor(window.visualViewport.height) - Ub.clientHeight ? Math.floor(window.visualViewport.height) - Ub.clientHeight + "px" : 0 > h.clientY - Ga ? "0px" : h.clientY - Ga + "px";
    3 < Math.abs(h.clientY - Ga) && (co = !1);
  }
  function Ha(h) {
    h.preventDefault();
    200 >= (new Date()).getTime() - ST && (co = !0);
    window.removeEventListener("pointermove", Aa, {capture:!0});
    window.removeEventListener("pointerup", Ha, {capture:!0});
    window.removeEventListener("pointercancel", Ha, {capture:!0});
    if ("mouse" == h.pointerType) {
      co && (Ub.style.removeProperty("width"), be.style.removeProperty("width"), be.style.removeProperty("border-radius"));
    } else {
      if (co) {
        if ($d) {
          Ub.style.removeProperty("width"), be.style.removeProperty("width"), be.style.removeProperty("border-radius"), $d = !1;
        } else {
          $d = !0;
          Ub.style.width = "252px";
          be.style.width = "240px";
          be.style.borderRadius = "5px";
          Ce = setTimeout(function() {
            Ub.style.removeProperty("width");
            be.style.removeProperty("width");
            be.style.removeProperty("border-radius");
            $d = !1;
          }, 5E3);
          return;
        }
      }
      $d && (Ce = setTimeout(function() {
        Ub.style.removeProperty("width");
        be.style.removeProperty("width");
        be.style.removeProperty("border-radius");
        $d = !1;
      }, 5E3));
    }
    co && (yq ? Bc(h) : (Kb(!1), fc(h)));
    ao();
  }
  function aa(h) {
    h.preventDefault();
    Ip();
    h && "mouse" == h.pointerType && 1 != h.which || (window.addEventListener("pointermove", Aa, {capture:!0, passive:!1}), window.addEventListener("pointerup", Ha, {capture:!0, passive:!1}), window.addEventListener("pointercancel", Ha, {capture:!0, passive:!1}), yq = h && h.currentTarget && "StartAnnotationModeBtnCloseIcon" == h.currentTarget.id ? !1 : !0, Ga = h.clientY - parseInt(window.getComputedStyle(Ub).getPropertyValue("top")), co = !0, "mouse" == h.pointerType && (Ub.style.width = "252px", 
    be.style.width = "240px", be.style.borderRadius = "5px"), ST = (new Date()).getTime(), -1 != Ce && clearTimeout(Ce));
  }
  function ya(h) {
    h.preventDefault();
  }
  function fc(h) {
    h.preventDefault();
    eo = !1;
    W.ia = !0;
    Zj();
    Xa({type:"annotateAnnotationModeGot", value:!1}, null);
    wl || Xa({type:"AnnotateFloatingButtonClosed"}, null);
  }
  function ed(h) {
    h.preventDefault();
    ld = !1;
    Xa({type:"annotateAnnotationModeGot", value:!0}, null);
    ak(!0, !0);
  }
  function Bc(h) {
    co && (Ub.style.removeProperty("width"), be.style.removeProperty("width"), be.style.removeProperty("border-radius"), ed(h));
  }
  function Kb(h) {
    f() || (h = !1);
    Ub && (h ? (Ub.style.display = "block", ld = !0) : (Ub.style.display = "none", ld = !1));
  }
  function Cb() {
    if (document.body && (!Ub || !document.getElementById("AnnotateStartAnnotationModeBtn"))) {
      Ub = document.createElement("div");
      Ub.id = "AnnotateStartAnnotationModeBtn";
      Ub.className = "extension_reset_css";
      Ub.style.display = "none";
      be = document.createElement("div");
      be.className = "extension_reset_css ";
      be.id = "AnnotateStartAnnotationModeBtnDiv";
      var h = document.createElement("div");
      h.className = "extension_reset_css ";
      h.style.width = "170px";
      h.style.margin = "0px";
      be.appendChild(h);
      var m = document.createElement("div");
      m.className = "extension_reset_css ";
      m.id = "AnnotateStartAnnotationModeBtnIcon";
      m.style.backgroundImage = "url(" + Ti() + ")";
      h.appendChild(m);
      m = document.createElement("div");
      m.className = "extension_reset_css ";
      m.id = "AnnotateStartAnnotationModeBtnText";
      m.innerHTML = "Show annotation toolbar";
      h.appendChild(m);
      m = document.createElement("div");
      m.id = "StartAnnotationModeBtnCloseIcon";
      m.className = "extension_reset_css ShowToolbarIcon ShowToolbarCloseIcon";
      m.title = "Close";
      m.className += " extension_icon extension_icon-close";
      m.style.color = "#000000";
      be.appendChild(m);
      Ub.appendChild(be);
      document.body.appendChild(Ub);
      ik(Ub);
      h.addEventListener("pointerdown", aa, {capture:!0, passive:!1});
      h.addEventListener("touchstart", ya, {capture:!0, passive:!1});
      m.addEventListener("pointerdown", aa, {capture:!0, passive:!1});
      m.addEventListener("touchstart", ya, {capture:!0, passive:!1});
      Ub.onmouseover = function() {
        Ub.style.width = "252px";
        be.style.width = "240px";
        be.style.borderRadius = "5px";
      };
      Ub.onmouseout = function() {
        Ub.style.width = "42px";
        be.style.width = "30px";
        be.style.borderRadius = "50%";
      };
      bo();
    }
  }
  function Xe(h) {
    h.preventDefault();
    Va.style.top = h.clientY - Ga > Math.floor(window.visualViewport.offsetTop + window.visualViewport.height) - Va.clientHeight ? Math.floor(window.visualViewport.offsetTop + window.visualViewport.height) - Va.clientHeight + "px" : h.clientY - Ga < Math.floor(window.visualViewport.offsetTop) ? Math.floor(window.visualViewport.offsetTop) + "px" : h.clientY - Ga + "px";
    Ht = !0;
    h.preventDefault();
    3 < Math.abs(h.clientY - Ga) && (Gm = !1);
  }
  function yc(h) {
    h.preventDefault();
    200 >= (new Date()).getTime() - TT && (Gm = !0);
    window.removeEventListener("pointermove", Xe, {capture:!0});
    window.removeEventListener("pointerup", yc, {capture:!0});
    window.removeEventListener("pointercancel", yc, {capture:!0});
    if ("mouse" == h.pointerType) {
      Gm && !Xi && (Va.style.removeProperty("width"), lc.style.removeProperty("width"), lc.style.removeProperty("border-radius"));
    } else {
      if (Gm && !Xi) {
        if ($d) {
          Va.style.removeProperty("width"), lc.style.removeProperty("width"), lc.style.removeProperty("border-radius"), $d = !1;
        } else {
          $d = !0;
          W.g ? (Va.style.width = "172px", lc.style.width = "160px") : Xi ? (Va.style.width = "212px", lc.style.width = "200px") : (Va.style.width = "252px", lc.style.width = "240px");
          lc.style.borderRadius = "5px";
          Ce = setTimeout(function() {
            Va.style.removeProperty("width");
            lc.style.removeProperty("width");
            lc.style.removeProperty("border-radius");
            $d = !1;
          }, 5E3);
          return;
        }
      }
      $d && !Xi && (Ce = setTimeout(function() {
        Va.style.removeProperty("width");
        lc.style.removeProperty("width");
        lc.style.removeProperty("border-radius");
        $d = !1;
      }, 5E3));
    }
    Gm && (Fy ? (Va.style.display = "none", fc(h)) : yq ? xh(h) : mf(h));
    ao();
  }
  function wh(h) {
    h.preventDefault();
    Ip();
    h && "mouse" == h.pointerType && 1 != h.which || (window.addEventListener("pointermove", Xe, {capture:!0, passive:!1}), window.addEventListener("pointerup", yc, {capture:!0, passive:!1}), window.addEventListener("pointercancel", yc, {capture:!0, passive:!1}), c(!0, pb), Fy = h && h.currentTarget && "ImportPdfCloseIcon" == h.currentTarget.id ? !0 : !1, yq = h && h.currentTarget && "ImportPdfShowToolbarIcon" == h.currentTarget.id ? !0 : !1, Ga = h.clientY - parseInt(window.getComputedStyle(Va).getPropertyValue("top")), 
    Gm = !0, "mouse" == h.pointerType && (W.g ? (Va.style.width = "172px", lc.style.width = "160px") : Xi ? (Va.style.width = "212px", lc.style.width = "200px") : (Va.style.width = "252px", lc.style.width = "240px"), lc.style.borderRadius = "5px"), TT = (new Date()).getTime(), -1 != Ce && clearTimeout(Ce));
  }
  function wg(h) {
    h.preventDefault();
  }
  function Ue(h) {
    if (h.bSuccessful) {
      var m = h.files;
      m = m.filter(q => !q.shortcutDetails);
      0 == m.length ? Kn("", "Unable to access this file from your Google Drive account.", "CANCEL", "SWITCH ACCOUNT", function() {
      }, function() {
        We(h.bForImport, !0);
      }) : 1 == m.length ? h.bForImport ? (kg.value = zq.replace(/\.[^.$]+$/, ""), Dc(m[0].id)) : (Nn(), Xa({type:"AnnotateLaunchDrivePDFInPDFViewer", fileId:m[0].id}, null)) : $a(m, h.bForImport);
    } else {
      let q = "";
      h.bGetTokenError ? h.strFileId ? (q = "Unable to import this file from your Google Drive account.", m = function() {
        y(h.strFileId, !0);
      }) : (q = "Unable to access this file from your Google Drive account.", m = function() {
        We(h.bForImport, !0);
      }) : (q = "Unable to retrieve file. Access denied.", m = function() {
        We(h.bForImport, !0);
      });
      Kn("", q, "SWITCH ACCOUNT", "OK", m, function() {
      });
    }
  }
  function Uf(h, m) {
    var q = document.getElementById("drive-active-item-info");
    if (q) {
      q = q.textContent;
      try {
        q = q.replace(/"title": .*",/g, "");
        var v = JSON.parse(q);
        if (!(v.id && v.id.length || h)) {
          ai();
          return;
        }
        v = {bSuccessful:!0, bForImport:h, bLinkWithAnnotate:m, files:[v]};
        m ? Th(v) : Ue(v);
        return;
      } catch (B) {
      }
    }
    We(h);
  }
  function Th(h) {
    h = h.files;
    h = h.filter(m => !m.shortcutDetails);
    Xa({type:"annotateCheckPDFExistsOnDrive", url:wa, accessToken:M.l, bPDFViewerInGoogleDrive:!0, strFileId:h[0].id}, function(m) {
      "annotateCheckPDFExistsOnDrive" == m.type && (m.bSuccessful ? Kc() : Kn("", "Unable to get access token from your Google Drive account.", "CANCEL", "SWITCH ACCOUNT", function() {
      }, function() {
        ic(!0);
      }));
    });
  }
  function We(h, m) {
    function q() {
      Jn("Locating file, please wait...");
      Xa({type:"AnnotateGetDrivePDFInfoFromName", name:zq, bForImport:h, accessToken:M.l}, null);
      IG = !0;
    }
    m ? (M.l = "", ci(M, q)) : q();
  }
  function xh(h) {
    Gm && (Xi || (Va.style.removeProperty("width"), lc.style.removeProperty("width"), lc.style.removeProperty("border-radius")), ii("10.12"), h.preventDefault(), u1.j = -1, u1.i = null, u1.g = !1, xl ? Uf(!0) : (h = wa.split(/#|\?/)[0], h = h.substring(h.lastIndexOf("/") + 1).split(".")[0], kg.value = decodeURIComponent(h), Dc()));
  }
  function mf(h) {
    Gm && (Xi || (Va.style.removeProperty("width"), lc.style.removeProperty("width"), lc.style.removeProperty("border-radius")), ii("10.12"), h.preventDefault(), xl ? Ph() ? ai() : Uf(!1) : Xa({type:"OpenAnnotatePDFViewer", url:wa}, null));
  }
  function xg() {
    Va && lc && (-1 != Ce && clearTimeout(Ce), W.g ? (Va.style.width = "172px", lc.style.width = "160px") : Xi ? (Va.style.width = "212px", lc.style.width = "200px", Va.onmouseover = null, Va.onmouseout = null) : (Va.style.width = "252px", lc.style.width = "240px"), lc.style.borderRadius = "5px", Xi || (Ce = setTimeout(function() {
      Va.style.removeProperty("width");
      lc.style.removeProperty("width");
      lc.style.removeProperty("border-radius");
    }, 3E3)));
  }
  function wc() {
    if (document.body) {
      Va = document.createElement("div");
      Va.id = "AnnotateImportPdfBtn";
      Va.className = "extension_reset_css ";
      Va.style.display = "none";
      lc = document.createElement("div");
      lc.className = "extension_reset_css ";
      lc.id = "AnnotateImportPdfBtnDiv";
      var h = document.createElement("div");
      h.className = "extension_reset_css ";
      h.style.width = "195px";
      h.style.margin = "0px";
      lc.appendChild(h);
      var m = document.createElement("div");
      m.className = "extension_reset_css ";
      m.id = "AnnotateImportPdfBtnIcon";
      m.style.backgroundImage = "url(" + Ti() + ")";
      h.appendChild(m);
      m = document.createElement("div");
      m.className = "extension_reset_css ";
      m.id = "AnnotateImportPdfBtnText";
      m.innerHTML = "Open with Annotate";
      h.appendChild(m);
      m = document.createElement("div");
      m.id = "ImportPdfShowToolbarIcon";
      m.className = "extension_reset_css ShowToolbarIcon ShowToolbarIconImportPdf";
      m.title = "Import PDF into Content Library";
      m.className += " extension_icon extension_icon-import_pdf";
      m.style.color = "#000000";
      lc.appendChild(m);
      var q = document.createElement("div");
      q.id = "ImportPdfCloseIcon";
      q.className = "extension_reset_css ShowToolbarIcon ImportPdfCloseIcon";
      q.title = "Close";
      q.className += " extension_icon extension_icon-close";
      q.style.color = "#000000";
      lc.appendChild(q);
      Va.appendChild(lc);
      ik(Va);
      document.body.appendChild(Va);
      h.addEventListener("pointerdown", wh, {capture:!0, passive:!1});
      h.addEventListener("touchstart", wg, {capture:!0, passive:!1});
      m.addEventListener("pointerdown", wh, {capture:!0, passive:!1});
      m.addEventListener("touchstart", wg, {capture:!0, passive:!1});
      q.addEventListener("pointerdown", wh, {capture:!0, passive:!1});
      q.addEventListener("touchstart", wg, {capture:!0, passive:!1});
      Va.onmouseover = function() {
        W.g ? (Va.style.width = "172px", lc.style.width = "160px") : (Va.style.width = "252px", lc.style.width = "240px");
        lc.style.borderRadius = "5px";
        -1 != Ce && clearTimeout(Ce);
      };
      Va.onmouseout = function() {
        Va.style.width = "42px";
        lc.style.width = "30px";
        lc.style.borderRadius = "50%";
      };
      bo();
    }
  }
  function ia(h) {
    h.preventDefault();
    kb.style.top = h.clientY - Ga > Math.floor(window.visualViewport.offsetTop + window.visualViewport.height - kb.clientHeight) ? Math.floor(window.visualViewport.offsetTop + window.visualViewport.height - kb.clientHeight) + "px" : h.clientY - Ga < Math.floor(window.visualViewport.offsetTop) ? Math.floor(window.visualViewport.offsetTop) + "px" : h.clientY - Ga + "px";
    Ht = !0;
    h.preventDefault();
    3 < Math.abs(h.clientY - Ga) && (fo = !1);
  }
  function gb(h) {
    h.preventDefault();
    200 >= (new Date()).getTime() - UT && (fo = !0);
    window.removeEventListener("pointermove", ia, {capture:!0});
    window.removeEventListener("pointerup", gb, {capture:!0});
    window.removeEventListener("pointercancel", gb, {capture:!0});
    if ("mouse" == h.pointerType) {
      fo && (kb.style.removeProperty("width"), vd.style.removeProperty("width"), vd.style.removeProperty("border-radius"));
    } else {
      if (fo) {
        if ($d) {
          kb.style.removeProperty("width"), vd.style.removeProperty("width"), vd.style.removeProperty("border-radius"), $d = !1;
        } else {
          $d = !0;
          W.g ? (kb.style.width = "212px", vd.style.width = "200px") : (kb.style.width = "292px", vd.style.width = "280px");
          vd.style.borderRadius = "5px";
          Ce = setTimeout(function() {
            kb.style.removeProperty("width");
            vd.style.removeProperty("width");
            vd.style.removeProperty("border-radius");
            $d = !1;
          }, 5E3);
          return;
        }
      }
      $d && (Ce = setTimeout(function() {
        kb.style.removeProperty("width");
        vd.style.removeProperty("width");
        vd.style.removeProperty("border-radius");
        $d = !1;
      }, 5E3));
    }
    fo && (Fy ? (kb.style.display = "none", fc(h)) : yq ? ed(h) : qd(h));
    ao();
  }
  function xa(h) {
    h.preventDefault();
    Ip();
    h && "mouse" == h.pointerType && 1 != h.which || (window.addEventListener("pointermove", ia, {capture:!0, passive:!1}), window.addEventListener("pointerup", gb, {capture:!0, passive:!1}), window.addEventListener("pointercancel", gb, {capture:!0, passive:!1}), Fy = h && h.currentTarget && "LoadAnnotationsCloseIcon" == h.currentTarget.id ? !0 : !1, yq = h && h.currentTarget && "LoadAnnotationsShowToolbarIcon" == h.currentTarget.id ? !0 : !1, Ga = h.clientY - parseInt(window.getComputedStyle(kb).getPropertyValue("top")), 
    fo = !0, "mouse" == h.pointerType && (W.g ? (kb.style.width = "212px", vd.style.width = "200px") : (kb.style.width = "292px", vd.style.width = "280px"), vd.style.borderRadius = "5px"), UT = (new Date()).getTime(), -1 != Ce && clearTimeout(Ce));
  }
  function fd(h) {
    h.preventDefault();
  }
  function qd(h) {
    fo && (Zn(), kb.style.removeProperty("width"), vd.style.removeProperty("width"), vd.style.removeProperty("border-radius"), h.preventDefault(), ii("10.16"), ub());
  }
  function Ld() {
    if (document.body && (!kb || !document.getElementById("AnnotateLoadAnnotationsBtn"))) {
      kb = document.createElement("div");
      kb.id = "AnnotateLoadAnnotationsBtn";
      kb.className = "extension_reset_css annotate-no-print ";
      kb.style.display = "none";
      vd = document.createElement("div");
      vd.id = "AnnotateLoadAnnotationsBtnDiv";
      vd.className = "extension_reset_css";
      var h = document.createElement("div");
      h.className = "extension_reset_css";
      h.style.width = "205px";
      h.style.margin = "0px";
      vd.appendChild(h);
      var m = document.createElement("div");
      m.className = "extension_reset_css";
      m.id = "AnnotateLoadAnnotationsBtnIcon";
      m.style.backgroundImage = "url(" + Ti() + ")";
      h.appendChild(m);
      m = document.createElement("div");
      m.className = "extension_reset_css";
      m.id = "AnnotateLoadAnnotationsBtnText";
      m.innerHTML = "Load previous annotations";
      h.appendChild(m);
      m = document.createElement("div");
      m.id = "LoadAnnotationsShowToolbarIcon";
      m.className = "extension_reset_css ShowToolbarIcon ShowToolbarIconLoadAnnotations";
      m.title = "Show annotation toolbar";
      m.className += " extension_icon extension_icon-annotation_toolbar";
      m.style.color = "#000000";
      vd.appendChild(m);
      var q = document.createElement("div");
      q.id = "LoadAnnotationsCloseIcon";
      q.className = "extension_reset_css ShowToolbarIcon LoadAnnotationsCloseIcon";
      q.title = "Close";
      q.className += " extension_icon extension_icon-close";
      q.style.color = "#000000";
      vd.appendChild(q);
      kb.appendChild(vd);
      ik(kb);
      document.body.appendChild(kb);
      h.addEventListener("pointerdown", xa, {capture:!0, passive:!1});
      h.addEventListener("touchstart", fd, {capture:!0, passive:!1});
      m.addEventListener("pointerdown", xa, {capture:!0, passive:!1});
      m.addEventListener("touchstart", fd, {capture:!0, passive:!1});
      q.addEventListener("pointerdown", xa, {capture:!0, passive:!1});
      q.addEventListener("touchstart", fd, {capture:!0, passive:!1});
      kb.onmouseover = function() {
        W.g && !ld ? (kb.style.width = "212px", vd.style.width = "200px") : (kb.style.width = "292px", vd.style.width = "280px");
        vd.style.borderRadius = "5px";
      };
      kb.onmouseout = function() {
        kb.style.width = "42px";
        vd.style.width = "30px";
        vd.style.borderRadius = "50%";
      };
      bo();
    }
  }
  function fe() {
    if (document.body) {
      var h = document.createElement("canvas");
      h.id = "AnnotateScreenShotCaptureCanvas";
      h.className = "extension_reset_css ";
      h.style.display = "none";
      ik(h);
      document.body.appendChild(h);
      h = document.createElement("canvas");
      h.id = "AnnotateScreenShotCopyCanvas";
      h.className = "extension_reset_css ";
      h.style.display = "none";
      ik(h);
      document.body.appendChild(h);
      h = Ao;
      h.i = document.createElement("canvas");
      h.i.id = h.ba;
      h.i.className = "extension_reset_css annotate-no-print ";
      h.i.style.display = "none";
      ik(h.i);
      document.body.appendChild(h.i);
      h.l = document.createElement("canvas");
      h.l.id = h.ia;
      h.l.className = "extension_reset_css annotate-no-print ";
      h.l.style.display = "none";
      ik(h.l);
      document.body.appendChild(h.l);
      h.M = document.createElement("canvas");
      h.M.id = h.ea;
      h.M.className = "extension_reset_css annotate-no-print ";
      h.M.style.display = "none";
      ik(h.M);
      document.body.appendChild(h.M);
      h.j = document.createElement("canvas");
      h.j.id = h.pa;
      h.j.className = "extension_reset_css annotate-no-print ";
      h.j.style.display = "none";
      ik(h.j);
      document.body.appendChild(h.j);
      C0(h);
      h = document.createElement("div");
      h.id = "AnnotateScreenCaptureDiv";
      h.className = "extension_reset_css ";
      h.style.display = "none";
      ik(h);
      h.setAttribute("data-annotateExtensionVersionNo", chrome.runtime.getManifest().version);
      document.body.appendChild(h);
      lg = document.createElement("div");
      lg.id = "AnnotateScreenShotCapturelefthandle";
      lg.className = "extension_reset_css annotate-highlight-plugin-capture-tab-handle";
      lg.style.display = "none";
      ik(lg);
      document.body.appendChild(lg);
      If = document.createElement("div");
      If.id = "AnnotateScreenShotCapturetophandle";
      If.className = "extension_reset_css annotate-highlight-plugin-capture-tab-handle";
      If.style.display = "none";
      ik(If);
      document.body.appendChild(If);
      mg = document.createElement("div");
      mg.id = "AnnotateScreenShotCapturerighthandle";
      mg.className = "extension_reset_css annotate-highlight-plugin-capture-tab-handle";
      mg.style.display = "none";
      ik(mg);
      document.body.appendChild(mg);
      ng = document.createElement("div");
      ng.id = "AnnotateScreenShotCapturebottomhandle";
      ng.className = "extension_reset_css annotate-highlight-plugin-capture-tab-handle";
      ng.style.display = "none";
      ik(ng);
      document.body.appendChild(ng);
      og = document.createElement("div");
      og.id = "AnnotateScreenShotCaptureTopLefthandle";
      og.className = "extension_reset_css annotate-highlight-plugin-capture-tab-handle";
      og.style.display = "none";
      ik(og);
      document.body.appendChild(og);
      pg = document.createElement("div");
      pg.id = "AnnotateScreenShotCaptureBottomLefthandle";
      pg.className = "extension_reset_css annotate-highlight-plugin-capture-tab-handle";
      pg.style.display = "none";
      ik(pg);
      document.body.appendChild(pg);
      qg = document.createElement("div");
      qg.id = "AnnotateScreenShotCaptureBottomRighthandle";
      qg.className = "extension_reset_css annotate-highlight-plugin-capture-tab-handle";
      qg.style.display = "none";
      ik(qg);
      document.body.appendChild(qg);
      ef = document.createElement("div");
      ef.id = "AnnotateScreenCaptureBtnCancel";
      ef.style.display = "none";
      ef.title = "Cancel";
      ef.className = "extension_reset_css extension_icon extension_icon-close";
      ef.style.color = "#000000";
      ik(If);
      document.body.appendChild(ef);
      Me = document.createElement("div");
      Me.id = "AnnotateScreenCaptureBtnOk";
      Me.style.display = "none";
      Me.title = "Capture on current page";
      Me.className = "extension_reset_css extension_icon extension_icon-capture_tab";
      Me.style.color = "#000000";
      ik(Me);
      document.body.appendChild(Me);
      Ne = document.createElement("div");
      Ne.id = "AnnotateScreenCaptureBtnOkNewPage";
      Ne.style.display = "none";
      Ne.title = "Capture on new page";
      Ne.className = "extension_reset_css extension_icon extension_icon-capture_new_page";
      Ne.style.color = "#000000";
      ik(Ne);
      document.body.appendChild(Ne);
      Oe = document.createElement("div");
      Oe.id = "AnnotateScreenCaptureBtnCopy";
      Oe.style.display = "none";
      Oe.title = "Copy to clipboard";
      Oe.className = "extension_reset_css extension_icon extension_icon-copy_clipboard";
      Oe.style.color = "#000000";
      ik(Oe);
      document.body.appendChild(Oe);
      mi = document.createElement("div");
      mi.id = "AnnotateScreenShotCaptureMsg";
      mi.className = "extension_reset_css ";
      mi.style.display = "none";
      ik(mi);
      document.body.appendChild(mi);
      kB();
      Lg.g || (h = BG("AnnotateLaserElemeent", "", 32), ik(h), document.body.appendChild(h), Lg.g = h);
      mB = document.createElement("div");
      mB.className = "extension_reset_css annotate-no-print ";
      mB.id = "AnnotateMsgDialog";
      mB.style.display = "none";
      ik(mB);
      document.body.appendChild(mB);
      nB = document.createElement("div");
      nB.id = "AnnotateMsgDialogBtnClose";
      nB.className = "extension_reset_css extension_icon extension_icon-close_button_msg_dialog";
      nB.style.color = "#2196f3";
      mB.appendChild(nB);
      nw = document.createElement("div");
      nw.id = "AnnotateMsgDialogHeader";
      nw.className = "extension_reset_css";
      mB.appendChild(nw);
      oB = document.createElement("div");
      oB.className = "extension_reset_css";
      oB.id = "AnnotateMsgDialogMessage";
      mB.appendChild(oB);
      AB = document.createElement("div");
      AB.id = "AnnotateImportOptionContainer";
      AB.className = "extension_reset_css";
      mB.appendChild(AB);
      h = document.createElement("div");
      h.style.marginBottom = "10px";
      var m = document.createElement("div");
      m.id = "AnnotateImportFileNameLabel";
      m.className = "extension_reset_css";
      m.innerHTML = "Notebook name";
      var q = document.createElement("div");
      q.className = "extension_reset_css";
      q.style.display = "inline";
      kg = document.createElement("input");
      kg.type = "text";
      kg.id = "AnnotateFileName";
      q.appendChild(kg);
      Yi = document.createElement("div");
      Yi.className = "extension_reset_css";
      Yi.id = "AnnotateFileNameErr";
      h.appendChild(m);
      h.appendChild(q);
      h.appendChild(document.createElement("br"));
      h.appendChild(Yi);
      m = document.createElement("div");
      m.className = "extension_reset_css";
      m.style.marginBottom = "20px";
      bk = document.createElement("input");
      bk.type = "radio";
      bk.id = "AnnotateImportOption1";
      bk.name = "importOption";
      bk.className = "ImportOption";
      bk.value = "all";
      bk.checked = !0;
      q = document.createElement("label");
      q.htmlFor = "AnnotateImportOption1";
      q.className = "ImportOptionLabel";
      q.appendChild(document.createTextNode("Entire Document"));
      m.appendChild(bk);
      m.appendChild(q);
      q = document.createElement("div");
      yl = document.createElement("input");
      yl.type = "radio";
      yl.id = "AnnotateImportOption2";
      yl.name = "importOption";
      yl.className = "ImportOption";
      yl.value = "selected";
      var v = document.createElement("label");
      v.htmlFor = "AnnotateImportOption2";
      v.className = "extension_reset_css ImportOptionLabel";
      v.style.verticalAlign = "middle";
      v.appendChild(document.createTextNode("Selected Pages"));
      Aq = document.createElement("div");
      Aq.className = "extension_reset_css";
      Aq.style.display = "inline";
      rg = document.createElement("input");
      rg.type = "text";
      rg.id = "AnnotateImportRange";
      rg.disabled = !0;
      rg.placeholder = "e.g. 1-5, 8, 11-13";
      Aq.appendChild(rg);
      zl = document.createElement("div");
      zl.className = "extension_reset_css";
      zl.id = "AnnotateImportRangeErr";
      q.appendChild(yl);
      q.appendChild(v);
      q.appendChild(Aq);
      q.appendChild(document.createElement("br"));
      q.appendChild(zl);
      AB.appendChild(h);
      AB.appendChild(m);
      AB.appendChild(q);
      BB = document.createElement("div");
      BB.id = "AnnotateSaveOptionContainer";
      BB.className = "extension_reset_css";
      mB.appendChild(BB);
      ck = document.createElement("div");
      ck.className = "extension_reset_css";
      BB.appendChild(ck);
      h = document.createElement("div");
      h.className = "extension_reset_css";
      h.style.marginBottom = "8px";
      Al = document.createElement("div");
      Al.id = "AnnotateSaveAnnotationNameLabel";
      Al.className = "extension_reset_css TextInputElementLabel";
      Al.innerHTML = "Name";
      It = document.createElement("div");
      It.className = "extension_reset_css";
      It.style.display = "inline";
      Dv = document.createElement("input");
      Dv.type = "text";
      Dv.id = "AnnotateAnnotationName";
      Dv.className = "extension_reset_css TextInputElement";
      Dv.spellcheck = !1;
      It.appendChild(Dv);
      Hm = document.createElement("div");
      Hm.className = "extension_reset_css";
      Hm.id = "AnnotateAnnotationNameErr";
      h.appendChild(Al);
      h.appendChild(It);
      h.appendChild(document.createElement("br"));
      h.appendChild(Hm);
      m = document.createElement("div");
      m.className = "extension_reset_css";
      m.style.marginBottom = "5px";
      Bl = document.createElement("div");
      Bl.id = "AnnotateSaveAnnotationDescriptionLabel";
      Bl.className = "extension_reset_css TextInputElementLabel";
      Bl.innerHTML = "Description";
      q = document.createElement("div");
      q.className = "extension_reset_css";
      q.style.display = "inline";
      Ev = document.createElement("input");
      Ev.type = "text";
      Ev.id = "AnnotateAnnotationDescription";
      Ev.className = "extension_reset_css TextInputElement";
      Ev.spellcheck = !1;
      q.appendChild(Ev);
      m.appendChild(Bl);
      m.appendChild(q);
      ck.appendChild(h);
      ck.appendChild(m);
      dk = document.createElement("div");
      dk.className = "extension_reset_css";
      BB.appendChild(dk);
      h = document.createElement("div");
      h.className = "extension_reset_css";
      h.style.marginBottom = "20px";
      Cl = document.createElement("input");
      Cl.type = "radio";
      Cl.id = "AnnotateSaveOption1";
      Cl.name = "saveOption";
      Cl.className = "extension_reset_css SaveOption";
      Cl.value = "update";
      Cl.checked = !0;
      m = document.createElement("label");
      m.htmlFor = "AnnotateSaveOption1";
      m.className = "extension_reset_css saveOptionLabel";
      m.appendChild(document.createTextNode("Update existing"));
      h.appendChild(Cl);
      h.appendChild(m);
      m = document.createElement("div");
      m.className = "extension_reset_css";
      m.style.marginBottom = "5px";
      go = document.createElement("input");
      go.type = "radio";
      go.id = "AnnotateSaveOption2";
      go.name = "saveOption";
      go.className = "extension_reset_css SaveOption";
      go.value = "create";
      q = document.createElement("label");
      q.htmlFor = "AnnotateSaveOption2";
      q.className = "extension_reset_css saveOptionLabel";
      q.appendChild(document.createTextNode("Save new"));
      m.appendChild(go);
      m.appendChild(q);
      dk.appendChild(h);
      dk.appendChild(m);
      FB = document.createElement("div");
      FB.className = "extension_reset_css";
      mB.appendChild(FB);
      h = document.createElement("div");
      h.className = "extension_reset_css";
      h.style.marginBottom = "20px";
      h.style.paddingLeft = "10px";
      Dl = document.createElement("input");
      Dl.type = "radio";
      Dl.id = "AnnotateApplyAnnotationOption1";
      Dl.name = "applyAnnotationOption";
      Dl.className = "extension_reset_css SaveOption";
      Dl.value = "merge";
      Dl.checked = !0;
      m = document.createElement("label");
      m.htmlFor = "AnnotateApplyAnnotationOption1";
      m.className = "extension_reset_css saveOptionLabel";
      m.appendChild(document.createTextNode("Merge with previous"));
      h.appendChild(Dl);
      h.appendChild(m);
      m = document.createElement("div");
      m.className = "extension_reset_css";
      m.style.marginBottom = "5px";
      m.style.paddingLeft = "10px";
      ho = document.createElement("input");
      ho.type = "radio";
      ho.id = "AnnotateApplyAnnotationOption2";
      ho.name = "applyAnnotationOption";
      ho.className = "extension_reset_css SaveOption";
      ho.value = "overwrite";
      q = document.createElement("label");
      q.htmlFor = "AnnotateApplyAnnotationOption2";
      q.className = "extension_reset_css saveOptionLabel";
      q.appendChild(document.createTextNode("Overwrite previous"));
      m.appendChild(ho);
      m.appendChild(q);
      FB.appendChild(h);
      FB.appendChild(m);
      EB = document.createElement("div");
      EB.className = "extension_reset_css";
      EB.style.position = "relative";
      EB.style.width = "105%";
      EB.style.height = "5px";
      EB.style.zIndex = "1";
      EB.style.boxShadow = "0 4px 5px 0 rgba(0, 0, 0, 0.14)";
      mB.appendChild(EB);
      DB = document.createElement("div");
      DB.id = "AnnotateWebAnnotationItemsContainer";
      DB.className = "extension_reset_css";
      mB.appendChild(DB);
      zB = document.createElement("div");
      zB.className = "extension_reset_css";
      zB.id = "AnnotateRecordingOptionContainer";
      mB.appendChild(zB);
      h = document.createElement("div");
      h.className = "extension_reset_css";
      h.style.marginBottom = "20px";
      Im = document.createElement("input");
      Im.type = "radio";
      Im.id = "AnnotateRecordingOption1";
      Im.name = "recordingOption";
      Im.className = "extension_reset_css RecordingOption";
      Im.value = "a";
      Im.checked = !0;
      m = document.createElement("label");
      m.htmlFor = "AnnotateRecordingOption1";
      m.className = "extension_reset_css recordingOptionLabel";
      m.appendChild(document.createTextNode("Voice note"));
      h.appendChild(Im);
      h.appendChild(m);
      m = document.createElement("div");
      m.className = "extension_reset_css";
      m.style.marginBottom = "20px";
      Jm = document.createElement("input");
      Jm.type = "radio";
      Jm.id = "AnnotateRecordingOption2";
      Jm.name = "recordingOption";
      Jm.className = "extension_reset_css RecordingOption";
      Jm.value = "av";
      Jm.checked = !1;
      q = document.createElement("label");
      q.htmlFor = "AnnotateRecordingOption2";
      q.className = "extension_reset_css recordingOptionLabel";
      q.appendChild(document.createTextNode("Camera recording"));
      m.appendChild(Jm);
      m.appendChild(q);
      q = document.createElement("div");
      q.className = "extension_reset_css";
      q.style.marginBottom = "5px";
      Km = document.createElement("input");
      Km.type = "radio";
      Km.id = "AnnotateRecordingOption3";
      Km.name = "recordingOption";
      Km.className = "extension_reset_css RecordingOption";
      Km.value = "as";
      Km.checked = !1;
      v = document.createElement("label");
      v.htmlFor = "AnnotateRecordingOption3";
      v.className = "extension_reset_css recordingOptionLabel";
      v.appendChild(document.createTextNode("Screen recording"));
      q.appendChild(Km);
      q.appendChild(v);
      zB.appendChild(h);
      zB.appendChild(m);
      zB.appendChild(q);
      CB = document.createElement("div");
      CB.id = "AnnotateMsgDialogInputContainer";
      CB.className = "extension_reset_css";
      CB.style.marginBottom = "8px";
      El = document.createElement("div");
      El.id = "AnnotateMsgDialogInputLabel";
      El.className = "extension_reset_css TextInputElementLabel";
      El.innerHTML = "Name";
      h = document.createElement("div");
      h.className = "extension_reset_css";
      h.style.display = "inline";
      ff = document.createElement("input");
      ff.type = "text";
      ff.id = "AnnotateMsgDialogInput";
      ff.className = "extension_reset_css TextInputElement";
      ff.spellcheck = !1;
      h.appendChild(ff);
      Lm = document.createElement("div");
      Lm.className = "extension_reset_css";
      Lm.id = "AnnotateMsgDialogInputErr";
      Jt = document.createElement("div");
      Jt.className = "extension_reset_css";
      Jt.id = "AnnotateMsgDialogInputInfo";
      CB.appendChild(El);
      CB.appendChild(h);
      CB.appendChild(document.createElement("br"));
      CB.appendChild(Lm);
      CB.appendChild(Jt);
      mB.appendChild(CB);
      uB = document.createElement("div");
      uB.id = "AnnotateMsgDialogProgressBarContainer";
      uB.className = "extension_reset_css";
      mB.appendChild(uB);
      vB = document.createElement("div");
      vB.id = "AnnotateMsgDialogProgressBar";
      vB.className = "extension_reset_css";
      uB.appendChild(vB);
      xB = document.createElement("div");
      xB.id = "AnnotateMsgDialogCheckboxContainer";
      xB.className = "extension_reset_css";
      mB.appendChild(xB);
      wB = document.createElement("input");
      wB.type = "checkbox";
      wB.id = "AnnotateMsgDialogCheckbox";
      wB.className = "extension_reset_css";
      yB = document.createElement("label");
      yB.htmlFor = "AnnotateMsgDialogCheckbox";
      yB.className = "extension_reset_css CheckboxLabel";
      yB.appendChild(document.createTextNode("Do not remind again"));
      xB.appendChild(wB);
      xB.appendChild(yB);
      pB = document.createElement("div");
      pB.id = "AnnotateMsgDialogBtn1";
      pB.className = "extension_reset_css AnnotateMsgDialogBtn";
      mB.appendChild(pB);
      qB = document.createElement("div");
      qB.id = "AnnotateMsgDialogBtn2";
      qB.className = "extension_reset_css AnnotateMsgDialogBtn";
      mB.appendChild(qB);
      rB = document.createElement("div");
      rB.id = "AnnotateMsgDialogBtn3";
      rB.className = "extension_reset_css AnnotateMsgDialogBtn";
      mB.appendChild(rB);
      sB = document.createElement("div");
      sB.id = "AnnotateMsgDialogBtnDisabled";
      sB.className = "extension_reset_css AnnotateMsgDialogBtn AnnotateMsgDialogBtnDisabled";
      mB.appendChild(sB);
      tB = document.createElement("div");
      tB.id = "AnnotateMsgDialogTutorialDiv";
      tB.className = "extension_reset_css";
      mB.appendChild(tB);
      h = document.createElement("div");
      h.style.height = "37px";
      h.style.width = "1px";
      h.style.display = "block";
      mB.appendChild(h);
      wc();
      Ld();
      QB(RB);
      ZB || (ZB = new CY());
      Mc && mK(Mc);
    }
  }
  function gc(h) {
    if (!W.C && kb && !(window != window.top && null != h && 0 < h.length && -1 == h.indexOf("docs.google.com/presentation/d/"))) {
      if (W.ia || !f() || 2 == S.g || 3 == S.g || Ph() || cl(3) || cl(4) || M.g) {
        kb.style.display = "none";
      } else {
        var m = !1;
        if (0 < h.length) {
          let B = S.o;
          for (var q = 0; q < B.length; q++) {
            var v = !1;
            let E = B[q].Sl;
            -1 != E.indexOf("docs.google.com/presentation/d/") && -1 != wa.indexOf("docs.google.com/presentation/d/") ? wa.substring(wa.indexOf("docs.google.com/presentation/d/") + 31, wa.indexOf("/", wa.indexOf("docs.google.com/presentation/d/") + 31)) == E.substring(E.indexOf("docs.google.com/presentation/d/") + 31, E.indexOf("/", E.indexOf("docs.google.com/presentation/d/") + 31)) && (v = !0) : -1 != E.indexOf("canva.com/design") && -1 != h.indexOf("canva.com/design") && (-1 != h.indexOf("view") && 
            E.substring(0, E.indexOf("edit")) == h.substring(0, h.indexOf("view")) || -1 != E.indexOf("view") && h.substring(0, h.indexOf("edit")) == E.substring(0, E.indexOf("view"))) && (v = !0);
            Na && VT(sl, E) && (v = !0);
            if (3 != B[q].xr && (E == h || v)) {
              m = !0;
              break;
            }
          }
        }
        Vb.Xj && Vb.cg && (m = !1);
        V && (V.Jb || V.Lj()) && (m = !1);
        Mc && sK(Mc) && (m = !1);
        if (m) {
          if (kb.style.display = "block", !W.g || ld) {
            h = ld, Kb(!1), ld = h;
          }
        } else {
          kb.style.display = "none";
        }
      }
    }
  }
  function qe(h) {
    var m = document.getElementById("annotate-highlight-plugin-start-presentation");
    m && (m.style.color = h ? "#2196f3" : "#000000", m.title = h ? "Streaming options" : "Present to student devices");
    h ? gc("") : gc(wa);
    null != pw && (m = pw, m.v = {bPresenting:h}, m.g && AI(m.g, m.v));
  }
  function pc(h) {
    if (!W.C && Va) {
      if (W.ia) {
        Va.style.display = "none";
      } else {
        var m = !1;
        da(h) && Jh() && (m = !0);
        m ? (Va.style.display = "block", W.g || Kb(!1), gc("")) : Va.style.display = "none";
      }
    }
  }
  function da(h) {
    return xl && "" != zq || (-1 != h.indexOf("http://") || -1 != h.indexOf("https://") || -1 != h.indexOf("file://")) && "pdf" == h.split(/#|\?/)[0].split(".").pop().trim().toLowerCase() ? !0 : !1;
  }
  function Sb() {
    Oe.style.left = window.visualViewport.offsetLeft + sb - 132 - 8 + "px";
    Oe.style.top = window.visualViewport.offsetTop + Ga - 1 + 8 + "px";
    Oe.style.display = "block";
    Ne.style.left = window.visualViewport.offsetLeft + sb - 99 - 8 + "px";
    Ne.style.top = window.visualViewport.offsetTop + Ga - 1 + 8 + "px";
    Ne.style.display = "block";
    Me.style.left = window.visualViewport.offsetLeft + sb - 66 - 8 + "px";
    Me.style.top = window.visualViewport.offsetTop + Ga - 1 + 8 + "px";
    Me.style.display = "block";
    ef.style.left = window.visualViewport.offsetLeft + sb - 33 - 8 + "px";
    ef.style.top = window.visualViewport.offsetTop + Ga - 1 + 8 + "px";
    ef.style.display = "block";
  }
  function td() {
    qb = sb = Ga = cb = 0;
  }
  function F(h, m) {
    CA && (RA(!0), mi.innerText = h, mi.style.display = "inline-block", h = mi.clientWidth, mi.style.top = "10px", mi.style.left = (Math.floor(window.visualViewport.width) - h) / 2 + "px", -1 != Gy && (clearTimeout(Gy), Gy = -1), Gy = setTimeout(function() {
      mi.style.display = "none";
      RA(!1);
      Da && (Da.style.opacity = 1, te && (te.style.opacity = 1), ek(), W.C = !1, gc(wa), pc(wa));
    }, m));
  }
  function H(h) {
    h.preventDefault();
    var m = Math.round(h.clientY - Ga), q = DB.scrollTop, v = DB.scrollHeight - DB.clientHeight;
    if (0 < m && 0 < q || 0 > m && q < v) {
      DB.scrollTop += -1 * m, Ga = h.clientY;
    }
    2 < Math.abs(WT - DB.scrollTop) && (Hy = !1);
  }
  function O() {
    window.removeEventListener("pointermove", H, {capture:!0});
    window.removeEventListener("pointerup", O, {capture:!0});
  }
  function N(h) {
    Ip();
    window.addEventListener("pointermove", H, {capture:!0, passive:!1});
    window.addEventListener("pointerup", O, {capture:!0, passive:!1});
    Ga = h.clientY;
    Hy = !0;
    WT = DB.scrollTop;
  }
  function fa(h, m) {
    Ip();
    if (Hy) {
      for (m ? (kg.value = zq, Dc(h)) : (Nn(), Xa({type:"AnnotateLaunchDrivePDFInPDFViewer", fileId:h}, null)), h = 0; h < Kt.length; h++) {
        Kt[h].remove();
      }
    }
  }
  function Ua(h) {
    Ip();
    if (Hy) {
      for (ii("10.16.1"), Ln(h, -1, !0), h = 0; h < Lt.length; h++) {
        Lt[h].remove();
      }
    }
  }
  function $a(h, m) {
    VB();
    mB.style.display = "block";
    mB.style.paddingLeft = "0px";
    oB.style.display = "none";
    nw.style.display = "block";
    nw.style.marginLeft = "10px";
    nw.innerHTML = "Select a PDF to continue";
    qB.className = "extension_reset_css AnnotateMsgDialogBtn";
    qB.style.display = "inline-block";
    qB.innerText = "CLOSE";
    qB.style.right = "20px";
    qB.addEventListener("touchstart", function(U) {
      U.preventDefault();
      U.stopPropagation();
    }, {capture:!0, passive:!1});
    qB.addEventListener("pointerdown", function(U) {
      U.preventDefault();
      U.stopPropagation();
    }, {capture:!0, passive:!1});
    qB.addEventListener("pointerup", function(U) {
      U.preventDefault();
      U.stopPropagation();
      ii("10.16.2");
      Ip();
      YB();
      for (U = 0; U < Kt.length; U++) {
        Kt[U].remove();
      }
    }, {capture:!0, passive:!1});
    pB.style.display = "none";
    nB.style.display = "none";
    uB.style.display = "none";
    xB.style.display = "none";
    sB.style.display = "none";
    tB.style.display = "none";
    zB.style.display = "none";
    AB.style.display = "none";
    BB.style.display = "none";
    CB.style.display = "none";
    DB.style.display = "block";
    EB.style.display = "block";
    FB.style.display = "none";
    rB.style.display = "none";
    for (var q = 13, v = 13, B = 0, E = 0; E < h.length; E++) {
      var K = cK(new dK(h[E].filePath, h[E].viewedByMeTime, h[E].thumbnailLink, h[E].id, m, fa));
      DB.appendChild(K);
      K.style.left = q + "px";
      K.style.top = v + "px";
      B++;
      0 == B % 3 ? (q = 13, v += 180) : q += 170;
      Kt.push(K);
    }
    3 < B ? (DB.style.height = "260px", DB.style.overflowY = "scroll", EB.style.width = "544px", mB.style.width = "534px") : (DB.style.height = "188px", DB.style.overflowY = "hidden", EB.style.width = "528px", mB.style.width = "518px");
    DB.scrollTop = 0;
    DB.addEventListener("pointerdown", N, {capture:!0, passive:!1});
    DB.addEventListener("wheel", function(U) {
      DB.scrollHeight == DB.clientHeight && U.preventDefault();
    });
    mB.style.left = (Math.floor(window.visualViewport.width) - mB.offsetWidth) / 2 + "px";
    mB.style.top = (Math.floor(window.visualViewport.height) - mB.offsetHeight) / 2 + "px";
  }
  function ub() {
    VB();
    mB.style.display = "block";
    mB.style.paddingLeft = "0px";
    oB.style.display = "none";
    nw.style.display = "block";
    nw.style.marginLeft = "10px";
    nw.innerHTML = "Saved Annotations";
    var h = 20;
    qB.className = "extension_reset_css AnnotateMsgDialogBtn";
    qB.style.display = "inline-block";
    qB.innerText = "CLOSE";
    qB.style.right = h + "px";
    h += qB.clientWidth + 10;
    qB.addEventListener("touchstart", function(K) {
      K.preventDefault();
      K.stopPropagation();
    }, {capture:!0, passive:!1});
    qB.addEventListener("pointerdown", function(K) {
      K.preventDefault();
      K.stopPropagation();
    }, {capture:!0, passive:!1});
    qB.addEventListener("pointerup", function(K) {
      K.preventDefault();
      K.stopPropagation();
      ii("10.16.2");
      Ip();
      YB();
      for (K = 0; K < Lt.length; K++) {
        Lt[K].remove();
      }
    }, {capture:!0, passive:!1});
    pB.style.display = "none";
    nB.style.display = "none";
    uB.style.display = "none";
    xB.style.display = "none";
    sB.style.display = "none";
    tB.style.display = "none";
    zB.style.display = "none";
    AB.style.display = "none";
    BB.style.display = "none";
    CB.style.display = "none";
    DB.style.display = "block";
    EB.style.display = "block";
    FB.style.display = "none";
    rB.style.display = "none";
    var m = h = 13, q = 0;
    let v = S.o;
    for (var B = v.length - 1; 0 <= B; B--) {
      if (3 == v[B].xr || 2 == v[B].xr) {
        continue;
      }
      var E = !1;
      let K = v[B].Sl;
      -1 != K.indexOf("docs.google.com/presentation/d/") && -1 != wa.indexOf("docs.google.com/presentation/d/") && wa.substring(wa.indexOf("docs.google.com/presentation/d/") + 31, wa.indexOf("/", wa.indexOf("docs.google.com/presentation/d/") + 31)) == K.substring(K.indexOf("docs.google.com/presentation/d/") + 31, K.indexOf("/", K.indexOf("docs.google.com/presentation/d/") + 31)) && (E = !0);
      -1 != K.indexOf("canva.com/design") && -1 != wa.indexOf("canva.com/design") && (-1 != wa.indexOf("view") && K.substring(0, K.indexOf("edit")) == wa.substring(0, wa.indexOf("view")) || -1 != K.indexOf("view") && wa.substring(0, wa.indexOf("edit")) == K.substring(0, K.indexOf("view"))) && (E = !0);
      if (K == wa || E || Na && VT(sl, K)) {
        E = (new vH(v[B], Ua)).el, DB.appendChild(E), E.style.left = h + "px", E.style.top = m + "px", q++, 0 == q % 3 ? (h = 13, m += 180) : h += 170, Lt.push(E);
      }
    }
    3 < q ? (DB.style.height = "260px", DB.style.overflowY = "scroll", EB.style.width = "544px", mB.style.width = "534px") : (DB.style.height = "188px", DB.style.overflowY = "hidden", EB.style.width = "528px", mB.style.width = "518px");
    DB.scrollTop = 0;
    DB.addEventListener("pointerdown", N, {capture:!0, passive:!1});
    DB.addEventListener("wheel", function(K) {
      DB.scrollHeight == DB.clientHeight && K.preventDefault();
    });
    mB.style.left = (Math.floor(window.visualViewport.width) - mB.offsetWidth) / 2 + "px";
    mB.style.top = (Math.floor(window.visualViewport.height) - mB.offsetHeight) / 2 + "px";
  }
  function oc(h) {
    VB();
    mB.style.display = "block";
    mB.style.width = "400px";
    mB.style.paddingLeft = "10px";
    nw.style.display = "none";
    oB.style.display = "block";
    oB.innerHTML = "Your slides already have annotations. How would you like to process the new annotations?";
    var m = 20;
    qB.className = "extension_reset_css AnnotateMsgDialogBtn";
    qB.style.display = "inline-block";
    qB.innerText = "CONTINUE";
    qB.style.right = m + "px";
    m += qB.clientWidth + 10;
    qB.addEventListener("touchstart", function(q) {
      q.preventDefault();
      q.stopPropagation();
    }, {capture:!0, passive:!1});
    qB.addEventListener("pointerdown", function(q) {
      q.preventDefault();
      q.stopPropagation();
    }, {capture:!0, passive:!1});
    qB.addEventListener("pointerup", function(q) {
      q.preventDefault();
      Ip();
      YB();
      q = document.getElementsByName("applyAnnotationOption");
      for (var v, B = 0; B < q.length; B++) {
        if (q[B].checked) {
          v = q[B].value;
          break;
        }
      }
      if ("merge" == v) {
        r0(h);
      } else {
        if (v = iv(), 0 < Object.keys(v).length) {
          for (var E in v) {
            h[E] && Mo(h[E]) || (h[E] = v[E]);
          }
        }
      }
      $o();
      Jp();
      d({pageAnnotations:h});
      O0(W);
    }, {capture:!0, passive:!1});
    pB.style.display = "inline-block";
    pB.innerText = "CANCEL";
    pB.style.right = m + "px";
    pB.addEventListener("touchstart", function(q) {
      q.preventDefault();
      q.stopPropagation();
    }, {capture:!0, passive:!1});
    pB.addEventListener("pointerdown", function(q) {
      q.preventDefault();
      q.stopPropagation();
    }, {capture:!0, passive:!1});
    pB.addEventListener("pointerup", function(q) {
      q.preventDefault();
      q.stopPropagation();
      Ip();
      YB();
    }, {capture:!0, passive:!1});
    nB.style.display = "none";
    uB.style.display = "none";
    xB.style.display = "none";
    sB.style.display = "none";
    tB.style.display = "none";
    zB.style.display = "none";
    AB.style.display = "none";
    BB.style.display = "block";
    CB.style.display = "none";
    ck.style.display = "none";
    dk.style.display = "none";
    DB.style.display = "none";
    EB.style.display = "none";
    FB.style.display = "block";
    rB.style.display = "none";
    Dl.checked = !0;
    mB.style.left = (Math.floor(window.visualViewport.width) - mB.offsetWidth) / 2 + "px";
    mB.style.top = (Math.floor(window.visualViewport.height) - mB.offsetHeight) / 2 + "px";
  }
  function ib() {
    VB();
    mB.style.display = "block";
    mB.style.width = "400px";
    mB.style.paddingLeft = "10px";
    oB.style.display = "none";
    nw.style.display = "block";
    nw.style.marginLeft = "0px";
    nw.innerHTML = "Save Annotations";
    var h = 20;
    qB.className = "extension_reset_css AnnotateMsgDialogBtn";
    qB.style.display = "inline-block";
    qB.innerText = "CONTINUE";
    qB.style.right = h + "px";
    h += qB.clientWidth + 10;
    qB.addEventListener("touchstart", function(m) {
      m.preventDefault();
      m.stopPropagation();
    }, {capture:!0, passive:!1});
    qB.addEventListener("pointerdown", function(m) {
      m.preventDefault();
      m.stopPropagation();
    }, {capture:!0, passive:!1});
    qB.addEventListener("pointerup", function(m) {
      m.preventDefault();
      Ip();
      YB();
      "update" == Bk("saveOption") ? mw(Ql, !1, !1) : ge();
    }, {capture:!0, passive:!1});
    pB.style.display = "inline-block";
    pB.innerText = "CANCEL";
    pB.style.right = h + "px";
    pB.addEventListener("touchstart", function(m) {
      m.preventDefault();
      m.stopPropagation();
    }, {capture:!0, passive:!1});
    pB.addEventListener("pointerdown", function(m) {
      m.preventDefault();
      m.stopPropagation();
    }, {capture:!0, passive:!1});
    pB.addEventListener("pointerup", function(m) {
      m.preventDefault();
      m.stopPropagation();
      Ip();
      YB();
    }, {capture:!0, passive:!1});
    nB.style.display = "none";
    uB.style.display = "none";
    xB.style.display = "none";
    sB.style.display = "none";
    tB.style.display = "none";
    zB.style.display = "none";
    AB.style.display = "none";
    BB.style.display = "block";
    CB.style.display = "none";
    ck.style.display = "none";
    dk.style.display = "block";
    DB.style.display = "none";
    EB.style.display = "none";
    FB.style.display = "none";
    rB.style.display = "none";
    Cl.checked = !0;
    mB.style.left = (Math.floor(window.visualViewport.width) - mB.offsetWidth) / 2 + "px";
    mB.style.top = (Math.floor(window.visualViewport.height) - mB.offsetHeight) / 2 + "px";
  }
  function hc(h) {
    h && (Sn(), h.bSuccessful ? Kc() : ic(!0));
  }
  function Kc() {
    Kn("", "Please refresh/ reload this page to initialize the extension.", "CANCEL", "REFRESH NOW", function() {
    }, function() {
      location.reload();
    });
  }
  function ic(h) {
    Vn("Linking to Annotate...", null);
    h ? (M.l = "", ci(M, () => {
      Uf(!1, !0);
    })) : di((m, q) => {
      q ? ic(!0) : Uf(!1, !0);
    });
  }
  function gd(h) {
    if ("AnnotateMsgDialog" != h.target.id && "AnnotateMsgDialogBtn2" != h.target.id && !h.key || "AnnotateMsgDialog" != h.target.id && "AnnotateMsgDialogBtn2" != h.target.id && h.key && "Escape" == h.key) {
      Iy = !1, YB(), Gi(!1);
    }
  }
  function Gi(h) {
    h ? (window.addEventListener("pointerdown", gd, {capture:!0, passive:!1}), window.addEventListener("keydown", gd, {capture:!0, passive:!1})) : (window.removeEventListener("pointerdown", gd, {capture:!0}), window.removeEventListener("keydown", gd, {capture:!0}));
  }
  function ai() {
    if (Jy && "none" != Jy.style.display) {
      Jy.dispatchEvent(new PointerEvent("mousedown"));
      Iy = !0;
      mB.style.display = "block";
      mB.style.width = "350px";
      mB.style.paddingLeft = "10px";
      oB.style.display = "block";
      oB.innerHTML = "Please select Annotate from the &#34;Open with&#34; dropdown to mark-up this PDF. <br><br> Annotate not listed as an option? Click below.";
      nw.style.display = "none";
      var h = 20;
      qB.className = "extension_reset_css AnnotateMsgDialogBtn";
      qB.style.display = "inline-block";
      qB.innerText = "LINK WITH ANNOTATE";
      qB.style.right = h + "px";
      qB.style.padding = "10px";
      h += qB.clientWidth + 10;
      qB.addEventListener("touchstart", function(m) {
        m.preventDefault();
        m.stopPropagation();
      }, {capture:!0, passive:!1});
      qB.addEventListener("pointerdown", function(m) {
        m.preventDefault();
        m.stopPropagation();
      }, {capture:!0, passive:!1});
      qB.addEventListener("pointerup", function(m) {
        Gi(!1);
        m.preventDefault();
        m.stopPropagation();
        Ip();
        Iy = !1;
        YB();
        ic(!1);
      }, {capture:!0, passive:!1});
      nB.style.display = "none";
      pB.style.display = "none";
      uB.style.display = "none";
      xB.style.display = "none";
      sB.style.display = "none";
      tB.style.display = "none";
      zB.style.display = "none";
      AB.style.display = "none";
      BB.style.display = "none";
      CB.style.display = "none";
      ck.style.display = "none";
      dk.style.display = "none";
      DB.style.display = "none";
      EB.style.display = "none";
      FB.style.display = "none";
      rB.style.display = "none";
      8 < (Math.floor(window.visualViewport.width) - 96) / 2 - mB.offsetWidth - 16 ? (mB.style.left = (Math.floor(window.visualViewport.width) - 96) / 2 - mB.offsetWidth - 16 + "px", mB.style.top = "16px") : (mB.style.left = (Math.floor(window.visualViewport.width) - mB.offsetWidth) / 2 + "px", mB.style.top = (Math.floor(window.visualViewport.height) - mB.offsetHeight) / 2 + "px");
      Gi(!0);
    } else {
      Kn("", "Unable to open the file in Annotate", "", "OK");
    }
  }
  function Xd() {
    VB();
    mB.style.display = "block";
    mB.style.width = "400px";
    mB.style.paddingLeft = "10px";
    oB.style.display = "none";
    nw.style.display = "block";
    nw.style.marginLeft = "0px";
    nw.innerHTML = "Record Presentation";
    var h = 20;
    qB.className = "extension_reset_css AnnotateMsgDialogBtn";
    qB.style.display = "inline-block";
    qB.innerText = "RECORD";
    qB.style.right = h + "px";
    h += qB.clientWidth + 10;
    qB.addEventListener("touchstart", function(m) {
      m.preventDefault();
      m.stopPropagation();
    }, {capture:!0, passive:!1});
    qB.addEventListener("pointerdown", function(m) {
      m.preventDefault();
      m.stopPropagation();
    }, {capture:!0, passive:!1});
    qB.addEventListener("pointerup", function(m) {
      m.preventDefault();
      m.stopPropagation();
      Ip();
      -1 == qB.className.search("AnnotateMsgDialogBtnDisabled") && Ae(ff, Lm, "TextInputElementErr", !1) && (YB(), m = ff.value.trim(), console.log(">>> Got clip name from user", m), -1 != window.location.href.indexOf("docs.google.com/presentation/d/") && window != window.top && (Xa({type:"StartSlidesPresentationRecording", strClip:m, bTrim:JG}, null), Vn("Initializing presentation recording...", null)));
    }, {capture:!0, passive:!1});
    pB.style.display = "inline-block";
    pB.innerText = "CANCEL";
    pB.style.right = h + "px";
    pB.addEventListener("touchstart", function(m) {
      m.preventDefault();
      m.stopPropagation();
    }, {capture:!0, passive:!1});
    pB.addEventListener("pointerdown", function(m) {
      m.preventDefault();
      m.stopPropagation();
    }, {capture:!0, passive:!1});
    pB.addEventListener("pointerup", function(m) {
      m.preventDefault();
      m.stopPropagation();
      Ip();
      YB();
      Bq();
    }, {capture:!0, passive:!1});
    ff.oninput = function() {
      Ae(ff, Lm, "TextInputElementErr", !1) ? UB(!0) : UB(!1);
    };
    ff.onfocus = function() {
      ff.className += " TextInputElementFocus";
      El.className += " TextInputElementLabelFocus";
    };
    ff.onblur = function() {
      ff.className = ff.className.split("TextInputElementFocus").join("");
      El.className = El.className.split("TextInputElementLabelFocus").join("");
    };
    ff.value = "Presentation - " + P.J;
    Lm.innerHTML = "";
    ff.className = "extension_reset_css TextInputElement";
    Jt.innerHTML = "The recorded clip will be saved in your Content Library.";
    Ae(ff, Lm, "TextInputElementErr", !1) || UB(!1);
    nB.style.display = "none";
    uB.style.display = "none";
    xB.style.display = "none";
    sB.style.display = "none";
    tB.style.display = "none";
    zB.style.display = "none";
    AB.style.display = "none";
    BB.style.display = "none";
    CB.style.display = "block";
    ck.style.display = "none";
    dk.style.display = "none";
    DB.style.display = "none";
    EB.style.display = "none";
    FB.style.display = "none";
    rB.style.display = "none";
    mB.style.left = (Math.floor(window.visualViewport.width) - mB.offsetWidth) / 2 + "px";
    mB.style.top = (Math.floor(window.visualViewport.height) - mB.offsetHeight) / 2 + "px";
  }
  function Od(h) {
    Cv && (h = "Livestream - " + h);
    let m = h;
    if (Rs(m)) {
      P.o && (h = h.replace(/ \([0-9]+\)/, "").trim());
      for (var q = 2; 999 >= q && (m = h + " (" + q + ")", Rs(m)); q++) {
      }
    }
    return m;
  }
  function Yd() {
    if (Na) {
      var h = Z.J;
      h || (h = sl.split(/#|\?/)[0], h = h.substring(h.lastIndexOf("/") + 1).split(".")[0], h = decodeURIComponent(h));
      return Od(h);
    }
    P.J = document.title;
    return Od(P.J);
  }
  function ge() {
    if (0 == M.M) {
      em(!0);
    } else {
      VB();
      mB.style.display = "block";
      mB.style.width = "400px";
      mB.style.paddingLeft = "10px";
      oB.style.display = "none";
      nw.style.display = "block";
      nw.style.marginLeft = "0px";
      nw.innerHTML = "Save Annotations";
      var h = 20;
      qB.className = "extension_reset_css AnnotateMsgDialogBtn";
      qB.style.display = "inline-block";
      qB.innerText = "SAVE";
      qB.style.right = h + "px";
      h += qB.clientWidth + 10;
      qB.addEventListener("touchstart", function(m) {
        m.preventDefault();
        m.stopPropagation();
      }, {capture:!0, passive:!1});
      qB.addEventListener("pointerdown", function(m) {
        m.preventDefault();
        m.stopPropagation();
      }, {capture:!0, passive:!1});
      qB.addEventListener("pointerup", function(m) {
        m.preventDefault();
        m.stopPropagation();
        Ip();
        -1 == qB.className.search("AnnotateMsgDialogBtnDisabled") && Ae(Dv, Hm, "TextInputElementErr", !0) && (ii("10.15.1"), YB(), 1 == S.g && ot() ? mw(Ql, !1, !1) : mw(Ql, !0, !1));
      }, {capture:!0, passive:!1});
      pB.style.display = "inline-block";
      pB.innerText = "CANCEL";
      pB.style.right = h + "px";
      pB.addEventListener("touchstart", function(m) {
        m.preventDefault();
        m.stopPropagation();
      }, {capture:!0, passive:!1});
      pB.addEventListener("pointerdown", function(m) {
        m.preventDefault();
        m.stopPropagation();
      }, {capture:!0, passive:!1});
      pB.addEventListener("pointerup", function(m) {
        m.preventDefault();
        m.stopPropagation();
        null != Jv.i && (hw(), iw(Jv));
        null != Kv.getImageData() && (jw(0, Kv.getImageData()), Kv.u(!0, !1), Kv.l = null);
        null != Lv(Kv) && (kw(0, Lv(Kv)), Kv.u(!1, !0), Kv.m = null);
        !A(Lo) && Lo.j && (zp(), gY(Ws()));
        Cv = Ql.v = !1;
        Ip();
        ii("10.15.2");
        YB();
      }, {capture:!0, passive:!1});
      Dv.oninput = function() {
        Ae(Dv, Hm, "TextInputElementErr", !0) ? UB(!0) : UB(!1);
      };
      Dv.onfocus = function() {
        Dv.className += " TextInputElementFocus";
        Al.className += " TextInputElementLabelFocus";
      };
      Dv.onblur = function() {
        Dv.className = Dv.className.split("TextInputElementFocus").join("");
        Al.className = Al.className.split("TextInputElementLabelFocus").join("");
      };
      Ev.onfocus = function() {
        Ev.className += " TextInputElementFocus";
        Bl.className += " TextInputElementLabelFocus";
      };
      Ev.onblur = function() {
        Ev.className = Ev.className.split("TextInputElementFocus").join("");
        Bl.className = Bl.className.split("TextInputElementLabelFocus").join("");
      };
      Dv.value = Yd();
      Hm.innerHTML = "";
      Dv.className = "extension_reset_css TextInputElement";
      Dv.focus();
      Dv.select();
      Ev.value = "";
      Ae(Dv, Hm, "TextInputElementErr", !0) || UB(!1);
      nB.style.display = "none";
      uB.style.display = "none";
      xB.style.display = "none";
      sB.style.display = "none";
      tB.style.display = "none";
      zB.style.display = "none";
      AB.style.display = "none";
      BB.style.display = "block";
      CB.style.display = "none";
      ck.style.display = "block";
      dk.style.display = "none";
      DB.style.display = "none";
      EB.style.display = "none";
      FB.style.display = "none";
      rB.style.display = "none";
      mB.style.left = (Math.floor(window.visualViewport.width) - mB.offsetWidth) / 2 + "px";
      mB.style.top = (Math.floor(window.visualViewport.height) - mB.offsetHeight) / 2 + "px";
    }
  }
  function Wg() {
    for (var h = document.getElementsByName("importOption"), m, q = 0; q < h.length; q++) {
      if (h[q].checked) {
        m = h[q].value;
        break;
      }
    }
    return m;
  }
  function Ae(h, m, q, v) {
    var B = h.value.trim();
    if (3 > B.length) {
      return m.innerHTML = "Name must be atleast 3 characters long.", q && (h.className += " " + q), !1;
    }
    if (v && Rs(B)) {
      return m.innerHTML = "File name is already in use.", q && (h.className += " " + q), !1;
    }
    m.innerHTML = "";
    q && (h.className = h.className.split(q).join(""));
    return !0;
  }
  function Vg() {
    var h = RegExp("^([ ]*[0-9]{1,4}[ ]*(?:-[ ]*[0-9]{1,4}[ ]*)?(?:,[ ]*[0-9]{1,4}[ ]*(?:-[ ]*[0-9]{1,4}[ ]*)?)*)$", "gi"), m = rg.value.trim();
    if ("" == m) {
      return zl.innerHTML = "", !1;
    }
    if (h.test(m)) {
      return zl.innerHTML = "", !0;
    }
    zl.innerHTML = "Invalid input, use 1-5, 8, 11-13";
    return !1;
  }
  function Dj(h) {
    "all" == h.value ? (rg.disabled = !0, zl.innerHTML = "", Ae(kg, Yi) && UB(!0)) : (rg.disabled = !1, Vg() && Ae(kg, Yi) ? UB(!0) : UB(!1));
  }
  function Dc(h) {
    VB();
    mB.style.display = "block";
    mB.style.width = "400px";
    mB.style.paddingLeft = "10px";
    oB.style.display = "none";
    nw.style.display = "block";
    nw.style.marginLeft = "0px";
    nw.innerHTML = "Import Content";
    var m = 20;
    qB.className = "extension_reset_css AnnotateMsgDialogBtn";
    qB.style.display = "inline-block";
    qB.innerText = "CONTINUE";
    qB.style.right = m + "px";
    m += qB.clientWidth + 10;
    qB.addEventListener("touchstart", function(q) {
      q.preventDefault();
      q.stopPropagation();
    }, {capture:!0, passive:!1});
    qB.addEventListener("pointerdown", function(q) {
      q.preventDefault();
      q.stopPropagation();
    }, {capture:!0, passive:!1});
    qB.addEventListener("pointerup", function(q) {
      function v(B, E) {
        E ? Kn("", "Unable to import this file from your Google Drive account.", "SWITCH ACCOUNT", "OK", function() {
          We(!0, !0);
        }, function() {
        }) : y(h, !1);
      }
      q.preventDefault();
      q.stopPropagation();
      Ip();
      -1 == qB.className.search("AnnotateMsgDialogBtnDisabled") && ("selected" != Wg() || Vg()) && Ae(kg, Yi) && (ii("10.12.1"), YB(), (xl || Xi) && "" == M.l ? (Vn("Loading...", null), bi(M, v)) : y(h, !1));
    }, {capture:!0, passive:!1});
    pB.style.display = "inline-block";
    pB.innerText = "CANCEL";
    pB.style.right = m + "px";
    pB.addEventListener("touchstart", function(q) {
      q.preventDefault();
      q.stopPropagation();
    }, {capture:!0, passive:!1});
    pB.addEventListener("pointerdown", function(q) {
      q.preventDefault();
      q.stopPropagation();
    }, {capture:!0, passive:!1});
    pB.addEventListener("pointerup", function(q) {
      q.preventDefault();
      q.stopPropagation();
      Ip();
      ii("10.12.2");
      YB();
    }, {capture:!0, passive:!1});
    bk.onchange = function() {
      Ip();
      Dj(this);
    };
    yl.onchange = function() {
      Ip();
      Dj(this);
      rg.focus();
    };
    Aq.onclick = function(q) {
      q.preventDefault();
      Ip();
      yl.checked = !0;
      rg.disabled = !1;
      Vg() && Ae(kg, Yi) ? UB(!0) : UB(!1);
      rg.focus();
    };
    rg.oninput = function() {
      Vg() && Ae(kg, Yi) ? UB(!0) : UB(!1);
    };
    kg.oninput = function() {
      !Ae(kg, Yi) || "selected" == Wg() && !Vg() ? UB(!1) : UB(!0);
    };
    bk.checked = !0;
    rg.value = "";
    rg.disabled = !0;
    zl.innerHTML = "";
    Ae(kg, Yi) || UB(!1);
    nB.style.display = "none";
    uB.style.display = "none";
    xB.style.display = "none";
    sB.style.display = "none";
    tB.style.display = "none";
    AB.style.display = "block";
    zB.style.display = "none";
    BB.style.display = "none";
    CB.style.display = "none";
    DB.style.display = "none";
    EB.style.display = "none";
    FB.style.display = "none";
    rB.style.display = "none";
    mB.style.left = (Math.floor(window.visualViewport.width) - mB.offsetWidth) / 2 + "px";
    mB.style.top = (Math.floor(window.visualViewport.height) - mB.offsetHeight) / 2 + "px";
  }
  function $c(h, m, q, v, B, E, K, U, na, ob, Ca) {
    m ? ($o(), Jp(), lt(q, B), mt(v), rt(E), S.Jh = m, Bn(jb, q, v, B, q, v)) : Yg(An()) ? An() != v ? S.Jh = !0 : rt(E) : (lt(q, B), mt(v), rt(E));
    S.m = Ca;
    yn(U);
    KG(h) || na && 0 < na.length && t0(na);
  }
  function Dh(h, m, q, v, B, E, K, U, na, ob, Ca, qc, Cd, Ob, Nc, sg, gf) {
    Kn("", "Keep annotations from Slideshow?", "DISCARD", "KEEP", function() {
      var Dd = An(), ce = h.pageAnnotations;
      if (K && Yg(Dd) && Dd == v) {
        Dd = null;
        var De = iv();
        -1 != wa.indexOf("docs.google.com/presentation/d/") && window == window.top && De && 0 < Object.keys(De).length && (Dd = Rk(P));
        Dd && Dd.length && 0 < Object.keys(ce).length && v0(De, ce, Dd);
        Dd = Ws();
        if (sg && null != Nc && Dd == Nc) {
          De = null;
          Dd = iv();
          -1 != wa.indexOf("docs.google.com/presentation/d/") && window == window.top && Dd && 0 < Object.keys(Dd).length && (De = Rk(P));
          if (De && De.length && (ce = ce[De], !A(ce) && !A(ce.arrAssessmentData))) {
            for (var io in Dd) {
              A(Dd[io]) || (Dd[io].arrAssessmentData = ce.arrAssessmentData);
            }
            A(Lo) || ap(Lo.Uc);
          }
          Vs(Nc);
        }
      }
      na && 0 < na.length && t0(na, Ca);
    }, function() {
      m ? ($o(), Jp(), lt(q, B), mt(v), rt(E), S.Jh = m, sw(Ql, Cd), aw(Ob), Bn(jb, -1, v, B, -1, v)) : Yg(An()) ? An() != v ? S.Jh = !0 : rt(E) : (lt(-1, B), mt(v), rt(E));
      S.m = qc;
      Vs(Nc);
      A(gf) || dt(gf, !1);
      yn(U);
      KG(h) || na && 0 < na.length && t0(na, Ca);
    });
  }
  function Cg(h, m, q, v, B, E) {
    lt(q, B);
    mt(v);
    rt(E);
    S.Jh = m;
    m = h.tempAnnotGUID;
    E = Ql;
    m && (sw(E, m), E.ea = m);
    aw(h.arrUnSavedMediaData);
    Bn(jb, q, v, B, q, v);
    h.direct = !0;
    XT(h);
  }
  function sd(h, m) {
    W.pa = !0;
    Kn("Alert! Browser resize required", "This webpage has annotations that were created at a different resolution than your current browser resolution. Your browser resolution/ zoom needs to be adjusted so that the annotations render correctly.", "CANCEL", "CONTINUE", function() {
      W.pa = !1;
      var q = S;
      q.j = -1;
      q.Jh = !1;
      q.u = !1;
      q.B = !1;
      q.C = !1;
      q.i && Ds(q.i);
      q.Ya && Ds(q.Ya);
      q.La && Ds(q.La);
      W1(W);
      FR(W);
      S.l && S.l.bLaunchNotesViewer && (LI({bLaunchNotesViewer:!1, strStudentGuid:""}), S.l.bLaunchNotesViewer = !1);
      ii("10.16.4");
    }, function() {
      W.pa = !1;
      W.Jb = !0;
      Xa(h, null);
      d(m, !1);
      ii("10.16.3");
      pw && TJ();
    });
  }
  function Md() {
    Kn("Error!", "Insufficient space to create new clip.", "CANCEL", "UPGRADE", function() {
      ii("10.13.2");
      Bq();
    }, function() {
      ii("10.13.1");
      Bq();
      window.open(M.Wb, "_blank");
    });
  }
  function Ia() {
    Mt = setTimeout(function() {
      F("Unable to add image. No notebook open.", 3000);
    }, 500);
  }
  function y(h, m) {
    function q() {
      Jn("Uploading your document...", !1, !0);
      u1.g = !0;
      var v = "";
      "selected" == Wg() && (v = rg.value.trim());
      v = {type:"annotateImportPdfUrl", url:wa, filename:encodeURIComponent(kg.value.trim()), pageRange:v, accessToken:M.l};
      xl && (v.bPDFViewerInGoogleDrive = !0, v.strFileId = h, v.bSwitchAccount = m);
      Xa(v, B => {
        "annotateImportPDFFailed" == B.type ? (u1.g = !1, gC("Unable to import document.", !1)) : "annotateDrivePDFInfoFromDOM" == B.type && Ue(B);
      });
    }
    m ? (M.l = "", ci(M, q)) : q();
  }
  function r(h) {
    Ip();
    ii("10.8.1");
    h.preventDefault();
    Nt();
    setTimeout(function() {
      Xa({type:"annotateScreenShotCopy", bForSave:!1, x:cb * window.devicePixelRatio, y:Ga * window.devicePixelRatio, width:(sb - cb) * window.devicePixelRatio, height:(qb - Ga) * window.devicePixelRatio}, N3);
      Mm = !1;
      td();
      jo(ko);
      Jf();
      Ky = setTimeout(function() {
        F("Unable to copy image.", 3000);
      }, 500);
    }, 200);
  }
  function z(h) {
    YT(h, !0);
  }
  function C(h) {
    YT(h, !1);
  }
  function J(h) {
    Ip();
    ii("10.8.4");
    h && h.preventDefault();
    ZT();
  }
  function T(h) {
    h.preventDefault();
  }
  function ba(h) {
    h.preventDefault();
  }
  function ea() {
    Me.style.display = "none";
    Ne.style.display = "none";
    Oe.style.display = "none";
    ef.style.display = "none";
  }
  function ka(h) {
    kh(h) ? (h.preventDefault(), sb = h.clientX, qb = h.clientY, sb < window.visualViewport.offsetLeft && (sb = window.visualViewport.offsetLeft), sb > window.visualViewport.offsetLeft + Math.floor(window.visualViewport.width) && (sb = window.visualViewport.offsetLeft + Math.floor(window.visualViewport.width)), qb < window.visualViewport.offsetTop && (qb = window.visualViewport.offsetTop), qb > window.visualViewport.offsetTop + Math.floor(window.visualViewport.height) && (qb = window.visualViewport.offsetTop + 
    Math.floor(window.visualViewport.height)), $f(), ad()) : xc();
  }
  function oa(h) {
    kh(h) ? (h.preventDefault(), cb = h.clientX, cb < window.visualViewport.offsetLeft && (cb = window.visualViewport.offsetLeft), cb > window.visualViewport.offsetLeft + Math.floor(window.visualViewport.width) && (cb = window.visualViewport.offsetLeft + Math.floor(window.visualViewport.width)), qb = h.clientY, qb < window.visualViewport.offsetTop && (qb = window.visualViewport.offsetTop), qb > window.visualViewport.offsetTop + Math.floor(window.visualViewport.height) && (qb = window.visualViewport.offsetTop + 
    Math.floor(window.visualViewport.height)), $f(), ad()) : xc();
  }
  function bb(h) {
    kh(h) ? (h.preventDefault(), cb = h.clientX, Ga = h.clientY, cb < window.visualViewport.offsetLeft && (cb = window.visualViewport.offsetLeft), cb > window.visualViewport.offsetLeft + Math.floor(window.visualViewport.width) && (cb = window.visualViewport.offsetLeft + Math.floor(window.visualViewport.width)), Ga < window.visualViewport.offsetTop && (Ga = window.visualViewport.offsetTop), Ga > window.visualViewport.offsetTop + Math.floor(window.visualViewport.height) && (Ga = window.visualViewport.offsetTop + 
    Math.floor(window.visualViewport.height)), $f(), ad()) : xc();
  }
  function zb(h) {
    kh(h) ? (h.preventDefault(), qb = h.clientY, qb < window.visualViewport.offsetTop && (qb = window.visualViewport.offsetTop), qb > window.visualViewport.offsetTop + Math.floor(window.visualViewport.height) && (qb = window.visualViewport.offsetTop + Math.floor(window.visualViewport.height)), $f(), ad()) : xc();
  }
  function Za(h) {
    kh(h) ? (h.preventDefault(), sb = h.clientX, sb < window.visualViewport.offsetLeft && (sb = window.visualViewport.offsetLeft), sb > window.visualViewport.offsetLeft + Math.floor(window.visualViewport.width) && (sb = window.visualViewport.offsetLeft + Math.floor(window.visualViewport.width)), $f(), ad()) : xc();
  }
  function Xb(h) {
    kh(h) ? (h.preventDefault(), Ga = h.clientY, Ga < window.visualViewport.offsetTop && (Ga = window.visualViewport.offsetTop), Ga > window.visualViewport.offsetTop + Math.floor(window.visualViewport.height) && (Ga = window.visualViewport.offsetTop + Math.floor(window.visualViewport.height)), $f(), ad()) : xc();
  }
  function Uc(h) {
    kh(h) ? (h.preventDefault(), cb = h.clientX, cb < window.visualViewport.offsetLeft && (cb = window.visualViewport.offsetLeft), cb > window.visualViewport.offsetLeft + Math.floor(window.visualViewport.width) && (cb = window.visualViewport.offsetLeft + Math.floor(window.visualViewport.width)), $f(), ad()) : xc();
  }
  function ad() {
    lg.style.display = "block";
    lg.style.width = "10px";
    lg.style.height = "10px";
    lg.style.left = Math.floor(window.visualViewport.offsetLeft + cb - 5) + "px";
    lg.style.top = Math.floor(window.visualViewport.offsetTop + (qb + Ga - 10) / 2) + "px";
    If.style.display = "block";
    If.style.width = "10px";
    If.style.height = "10px";
    If.style.left = Math.floor(window.visualViewport.offsetLeft + (cb + sb - 10) / 2) + "px";
    If.style.top = Math.floor(window.visualViewport.offsetTop + Ga - 5) + "px";
    ik(If);
    document.body.appendChild(If);
    mg.style.display = "block";
    mg.style.width = "10px";
    mg.style.height = "10px";
    mg.style.left = Math.floor(window.visualViewport.offsetLeft + sb - 5) + "px";
    mg.style.top = Math.floor(window.visualViewport.offsetTop + (qb + Ga - 10) / 2) + "px";
    ik(mg);
    document.body.appendChild(mg);
    ng.style.display = "block";
    ng.style.width = "10px";
    ng.style.height = "10px";
    ng.style.left = Math.floor(window.visualViewport.offsetLeft + (cb + sb - 10) / 2) + "px";
    ng.style.top = Math.floor(window.visualViewport.offsetTop + qb - 5) + "px";
    ik(ng);
    document.body.appendChild(ng);
    og.style.display = "block";
    og.style.width = "10px";
    og.style.height = "10px";
    og.style.left = Math.floor(window.visualViewport.offsetLeft + cb - 5) + "px";
    og.style.top = Math.floor(window.visualViewport.offsetTop + Ga - 5) + "px";
    ik(og);
    document.body.appendChild(og);
    pg.style.display = "block";
    pg.style.width = "10px";
    pg.style.height = "10px";
    pg.style.left = Math.floor(window.visualViewport.offsetLeft + cb - 5) + "px";
    pg.style.top = Math.floor(window.visualViewport.offsetTop + qb - 5) + "px";
    ik(pg);
    document.body.appendChild(pg);
    qg.style.display = "block";
    qg.style.width = "10px";
    qg.style.height = "10px";
    qg.style.left = Math.floor(window.visualViewport.offsetLeft + sb - 5) + "px";
    qg.style.top = Math.floor(window.visualViewport.offsetTop + qb - 5) + "px";
    ik(qg);
    document.body.appendChild(qg);
  }
  function xc() {
    if (cb > sb) {
      var h = cb;
      cb = sb;
      sb = h;
    }
    Ga > qb && (h = Ga, Ga = qb, qb = h);
    5 > sb - cb && (sb = cb + 5);
    5 > qb - Ga && (qb = Ga + 5);
    $f();
    Sb();
    ad();
    window.removeEventListener("pointerup", xc, pb);
    window.removeEventListener("pointermove", Uc, pb);
    window.removeEventListener("pointermove", Xb, pb);
    window.removeEventListener("pointermove", Za, pb);
    window.removeEventListener("pointermove", zb, pb);
    window.removeEventListener("pointermove", bb, pb);
    window.removeEventListener("pointermove", oa, pb);
    window.removeEventListener("pointermove", ka, pb);
    window.removeEventListener("pointermove", tn, pb);
  }
  function tn(h) {
    kh(h) ? (h.preventDefault(), cb = Ot + (h.clientX - $T), Ga = Pt + (h.clientY - aU), sb = cb - Ot + Ly, qb = Ga - Pt + My, 0 > cb && (cb = 0, sb = cb - Ot + Ly), 0 > Ga && (Ga = 0, qb = Ga - Pt + My), sb > Math.floor(window.visualViewport.width) && (cb -= sb - Math.floor(window.visualViewport.width), sb = cb - Ot + Ly), qb > Math.floor(window.visualViewport.height) && (Ga -= qb - Math.floor(window.visualViewport.height), qb = Ga - Pt + My), $f(), ad()) : xc();
  }
  function mp(h) {
    Ip();
    h.preventDefault();
    hh(h.clientX, h.clientY, lg.getBoundingClientRect()) ? (ea(), window.addEventListener("pointermove", Uc, pb), window.addEventListener("pointerup", xc, pb)) : hh(h.clientX, h.clientY, If.getBoundingClientRect()) ? (ea(), window.addEventListener("pointermove", Xb, pb), window.addEventListener("pointerup", xc, pb)) : hh(h.clientX, h.clientY, mg.getBoundingClientRect()) ? (ea(), window.addEventListener("pointermove", Za, pb), window.addEventListener("pointerup", xc, pb)) : hh(h.clientX, h.clientY, 
    ng.getBoundingClientRect()) ? (ea(), window.addEventListener("pointermove", zb, pb), window.addEventListener("pointerup", xc, pb)) : hh(h.clientX, h.clientY, Me.getBoundingClientRect()) || hh(h.clientX, h.clientY, Ne.getBoundingClientRect()) || hh(h.clientX, h.clientY, Oe.getBoundingClientRect()) || hh(h.clientX, h.clientY, ef.getBoundingClientRect()) || (hh(h.clientX, h.clientY, og.getBoundingClientRect()) ? (ea(), window.addEventListener("pointermove", bb, pb), window.addEventListener("pointerup", 
    xc, pb)) : hh(h.clientX, h.clientY, pg.getBoundingClientRect()) ? (ea(), window.addEventListener("pointermove", oa, pb), window.addEventListener("pointerup", xc, pb)) : hh(h.clientX, h.clientY, qg.getBoundingClientRect()) ? (ea(), window.addEventListener("pointermove", ka, pb), window.addEventListener("pointerup", xc, pb)) : hh(h.clientX, h.clientY, new DOMRect(cb, Ga, sb - cb, qb - Ga)) && ($T = h.clientX, aU = h.clientY, Ot = cb, Pt = Ga, Ly = sb, My = qb, ea(), window.addEventListener("pointermove", 
    tn, pb), window.addEventListener("pointerup", xc, pb)));
  }
  function np(h) {
    hh(h.clientX, h.clientY, new DOMRect(cb, Ga, sb - cb, qb - Ga)) ? md.style.cursor = "all-scroll" : md.style.cursor = lo ? "default" : "crosshair";
  }
  function Tk(h) {
    h.preventDefault();
    window.removeEventListener("pointermove", op, pb);
    md.removeEventListener("pointerdown", pp, pb);
    md.removeEventListener("touchstart", T, pb);
    window.removeEventListener("pointerup", Tk, pb);
    window.removeEventListener("pointercancel", Tk, pb);
    cb = Zi;
    Ga = $i;
    sb = h.clientX;
    qb = h.clientY;
    cb > sb && (h = cb, cb = sb, sb = h);
    Ga > qb && (h = Ga, Ga = qb, qb = h);
    5 > sb - cb && (sb = cb + 5);
    5 > qb - Ga && (qb = Ga + 5);
    cb > Math.floor(window.visualViewport.width) && (cb = Math.floor(window.visualViewport.width));
    Ga > Math.floor(window.visualViewport.height) && (Ga = Math.floor(window.visualViewport.height));
    sb > Math.floor(window.visualViewport.width) && (sb = Math.floor(window.visualViewport.width));
    qb > Math.floor(window.visualViewport.height) && (qb = Math.floor(window.visualViewport.height));
    0 > cb && (cb = 0);
    0 > Ga && (Ga = 0);
    0 > sb && (sb = 0);
    0 > qb && (qb = 0);
    $f();
    Sb();
    ad();
  }
  function $f() {
    md.width = md.width;
    Mh.fillStyle = "rgba(0,0,0,0.3)";
    Mh.fillRect(0, 0, md.width, md.height);
    Mh.clearRect(cb, Ga, sb - cb, qb - Ga);
    Mh.setLineDash([4, 3]);
    Mh.strokeRect(cb, Ga, sb - cb, qb - Ga);
  }
  function op(h) {
    h.preventDefault();
    cb = Zi;
    Ga = $i;
    sb = h.clientX;
    qb = h.clientY;
    cb > sb && (h = cb, cb = sb, sb = h);
    Ga > qb && (h = Ga, Ga = qb, qb = h);
    cb > Math.floor(window.visualViewport.width) && (cb = Math.floor(window.visualViewport.width));
    Ga > Math.floor(window.visualViewport.height) && (Ga = Math.floor(window.visualViewport.height));
    sb > Math.floor(window.visualViewport.width) && (sb = Math.floor(window.visualViewport.width));
    qb > Math.floor(window.visualViewport.height) && (qb = Math.floor(window.visualViewport.height));
    0 > cb && (cb = 0);
    0 > Ga && (Ga = 0);
    0 > sb && (sb = 0);
    0 > qb && (qb = 0);
    $f();
  }
  function pp(h) {
    Ip();
    lo = !0;
    h.preventDefault();
    Zi = h.clientX;
    $i = h.clientY;
    window.addEventListener("pointermove", op, pb);
    window.addEventListener("pointerup", Tk, pb);
    window.addEventListener("pointercancel", Tk, pb);
  }
  function bU(h) {
    if (Jh() && (9 != ki.g && 13 != ki.g || !xG.LG())) {
      "Escape" == h.code && 7 == ki.g && J(h);
      "Escape" != h.code && 27 != h.keyCode || Lp();
      "ArrowDown" != h.code && "ArrowUp" != h.code && "PageDown" != h.code && "PageUp" != h.code || !Na || (dp(), ep && fp(ep, !1, null));
      if (!(!(Vl() || null != rl() || V && V.Lj() && M.g) || "bRemoteEvt" in h || h.ctrlKey || h.shiftKey || h.altKey)) {
        var m = h.keyCode;
        if (78 == m || 32 == m || 39 == m || 40 == m || 34 == m || 13 == m || 80 == m || 37 == m || 38 == m || 33 == m) {
          dI(h);
          return;
        }
      }
      if (7 != ki.g && !Qh() && !M.g) {
        if (h.shiftKey && (fk = !0, bp.ib = fk), h.ctrlKey && h.shiftKey) {
          if ((m = mB && "block" == mB.style.display) || (m = !(W.g || ld || !wl && mo) || ld && !mo || !W.g && !eo) || (m = W.N), !m) {
            var q = !1;
            if (m = Wh(String.fromCharCode(h.keyCode))) {
              Zi = sb;
              $i = qb;
              if (Ao.g) {
                q = Ao.g;
                if (Na) {
                  var v = hl(Z, yo(Z, q.S), gl(Z, Zi, $i)), B = Z.scale;
                  4 == ki.g && (B = 1);
                  "ellipse" == q.cb() || "rectangle" == q.cb() || "line" == q.cb() ? (q.Em(v.$a + q.Xe().x, v.Ua + q.Xe().y, fk, B), q.I.x == q.L.x && q.I.y == q.L.y && (Ao.g = null)) : q.Em(v.$a + q.Xe().x, v.Ua + q.Xe().y, B);
                } else {
                  "ellipse" == q.cb() || "rectangle" == q.cb() || "line" == q.cb() ? (q.Em(Zi, $i, fk, 1), q.I.x == q.L.x && q.I.y == q.L.y && (Ao.g = null)) : q.Em(Zi, $i, 1);
                }
                Ao.g && (q = Ao.g, "eraser" != q.cb() ? (Na && q.Km(Z.scale), V && SM() && WR(q), Bt(q), Px({action:Ux, ub:1, F:[q]}, !0)) : LG(), Ao.g = null, le());
                if (window != window.top && !me || cd && nD(cd)) {
                  In.i = !0;
                }
              }
              Na ? hd({type:"ANNOTATE_PDF_HIDE_ACTIVE_COMMENT"}) : 14 != ki.g && 1 != ki.g || !ac || iF(ac.gq(), null, !0);
              if (8 == ki.g) {
                CG(Lg, !1), V && SM() && bS();
              } else if (9 == ki.g || 13 == ki.g) {
                var E = document.getElementById("annotate-plugin-temp-text-element");
                q = parseFloat(E.style.left.slice(0, -2));
                v = parseFloat(E.style.top.slice(0, -2));
                B = parseFloat(E.style.width.slice(0, -2));
                var K = parseFloat(E.style.height.slice(0, -2));
                E.remove();
                13 == ki.g ? Ko.wh(Y.i, Y.j, Y.l, Y.B, Y.C, Y.u, Y.g, Y.m) : Jo.wh(Y.i, Y.j, Y.l, Y.s, Y.o, Y.Rg, Y.g, Y.m);
                E = Object.assign({}, Ab);
                E.scale = 1;
                var U = -1;
                if (Na) {
                  U = fl(Z, gl(Z, q, v).y).S;
                  E = hl(Z, U, new il(Z.scrollX, Z.scrollY));
                  var na = Z.Ea.getBoundingClientRect();
                  q = q - na.left + Z.scrollX;
                  v = v - na.top + Z.scrollY;
                  E = {x:-E.$a + Z.scrollX, y:-E.Ua + Z.scrollY, width:jl(Z, U), height:kl(Z, U), scale:Z.scale};
                  U = ll(Z, U);
                }
                na = null;
                if (!nd && !Na) {
                  let ob = Ck(q, v);
                  ob && (Gt(ob), na = Fk(ob));
                }
                9 == ki.g ? Jo.ew(q, v, B, K, null, U, E, !0, na) : Ko.ew(q, v, B, K, null, null, U, E, !0, na);
                if (window != window.top && !me || cd && nD(cd)) {
                  In.i = !0;
                }
              }
              switch(m.tool) {
                case "select":
                  Fl();
                  break;
                case "pen":
                  cU();
                  break;
                case "highlighter":
                  dU();
                  break;
                case "eraser":
                  eU();
                  break;
                case "laser":
                  fU();
                  break;
                case "show/hide annotations":
                  console.log(">>show_hide_annotations with hotkeys");
                  W.B();
                  break;
                case "delete annotations":
                  console.log(">>delete_all_annotations with hotkeys"), NB.o();
              }
              q = !0;
            }
            if (49 <= h.keyCode && 55 >= h.keyCode) {
              if (ud) {
                return;
              }
              if (1 == ki.g) {
                if (!bp) {
                  return;
                }
                m = bp.g;
                null != m && (q = h.keyCode - 49, "rectangle" === m.cb() && (hi.j.Za = q, hi.j.qa = hi.j.Xb[q]), "ellipse" === m.cb() && (hi.g.Za = q, hi.g.qa = hi.g.Xb[q]), "line" === m.cb() && (hi.i.Za = q, hi.i.qa = hi.i.Xb[q]), Dx(Qa, h.keyCode - 49), gU(), q = !0);
              }
              2 == ki.g && (Di(h.keyCode - 49, !0), q = !0);
              3 == ki.g && (m = h.keyCode - 49, q = hi, 0 > m || m >= q.v.length || (q.J = q.v[m], q.C = m, vi(q)), q = !0);
              m = ki;
              if (2 == m.g || 3 == m.g || 10 == m.g || 11 == m.g || 12 == m.g) {
                m = h.keyCode - 49, 2 == ki.g ? (hi.m.Za = m, hi.m.qa = hi.m.Xb[m]) : 3 == ki.g ? (hi.l.Za = m, hi.l.qa = hi.l.Xb[m]) : 10 == ki.g ? (hi.j.Za = m, hi.j.qa = hi.j.Xb[m]) : 11 == ki.g ? (hi.g.Za = m, hi.g.qa = hi.g.Xb[m]) : 12 == ki.g && (hi.i.Za = m, hi.i.qa = hi.i.Xb[m]), Dx(Qa, h.keyCode - 49), vi(hi), q = !0;
              }
            }
            if (49 <= h.keyCode && 56 >= h.keyCode && 14 == ki.g) {
              m = h.keyCode - 49;
              q = document.getElementsByClassName("annotate-highlight-plugin-comment-toolbar-button");
              for (v = 0; v < q.length; v++) {
                q[v].style.borderBottom = "0";
              }
              0 > m || m >= Cq.length || q.length != Cq.length || (q[m].style.borderBottom = Y.v, hi.o.Za = m, hi.o.qa = hi.o.Cc[m], vi(hi), Na ? Oi() : ac.J());
              q = !0;
            }
            49 <= h.keyCode && 56 >= h.keyCode && 5 == ki.g && (Ro && Ro.JJ(h.keyCode - 49, !0), q = !0);
            q && (h.preventDefault(), h.stopPropagation());
          }
        } else {
          90 == h.keyCode && h.ctrlKey && (1 != ki.g || Na || P.o) && (h.preventDefault(), h.stopPropagation(), ly()), 89 == h.keyCode && h.ctrlKey && (1 != ki.g || Na || P.o) && (h.preventDefault(), h.stopPropagation(), my()), ui() && "Delete" == h.code && (m = Lo.Uc, h && (q = !0, (v = h.target) && "TEXTAREA" == v.nodeName && (q = !1), q && m.g && !m.g.ib() && (CX(m), KS(m, !1, null)))), t2(h);
        }
      }
    }
  }
  function hU(h) {
    M.g || "Shift" != h.key || (fk = !1, bp && (bp.ib = fk));
  }
  function MG() {
    Ip();
    QA();
    ii("10.8");
    ud ? (em(!1), Jf()) : (ji(7, 1), md = document.getElementById("AnnotateScreenShotCaptureCanvas"), Mm || (Ro.Py(), lg.style.display = "none", If.style.display = "none", mg.style.display = "none", ng.style.display = "none", og.style.display = "none", pg.style.display = "none", qg.style.display = "none", md.style.width = Math.floor(window.visualViewport.width) + "px", md.style.height = Math.floor(window.visualViewport.height) + "px", md.width = Math.floor(window.visualViewport.width), md.height = 
    Math.floor(window.visualViewport.height), md.style.top = window.visualViewport.offsetTop + "px", md.style.left = window.visualViewport.offsetLeft + "px", md.style.display = "block", md.style.position = "fixed", Mm = !0, Mh = md.getContext("2d"), Mh.fillStyle = "rgba(0,0,0,0.3)", Mh.fillRect(0, 0, md.width, md.height), Mh.fillStyle = "#dddddd", Mh.fillRect(0, 0, 350, 40), Mh.font = "bold 20px arial", Mh.fillStyle = "#333333", Mh.fillText("Click and drag to take a screenshot", 10, 30), Da && (Da.style.opacity = 
    0, te && (te.style.opacity = 0), sf(), Dq(), fh(), Mg(), xG && (xG.Vi() && xG.$h(), xG.Zk(!1))), gc(""), pc(""), W.C = !0, md.addEventListener("pointerdown", pp, {passive:!1}), md.addEventListener("touchstart", T, {passive:!1}), window.addEventListener("touchstart", T, pb), window.addEventListener("pointerdown", mp, pb), window.addEventListener("pointermove", np, pb), Me.addEventListener("pointerup", C, {capture:!0, passive:!1}), Me.addEventListener("pointerdown", ba, {capture:!0, passive:!1}), 
    Me.addEventListener("touchstart", T, {capture:!0, passive:!1}), Ne.addEventListener("pointerup", z, {capture:!0, passive:!1}), Ne.addEventListener("pointerdown", ba, {capture:!0, passive:!1}), Ne.addEventListener("touchstart", T, {capture:!0, passive:!1}), Oe.addEventListener("pointerup", r, {capture:!0, passive:!1}), Oe.addEventListener("pointerdown", ba, {capture:!0, passive:!1}), Oe.addEventListener("touchstart", T, {capture:!0, passive:!1}), ef.addEventListener("pointerup", J, {capture:!0, 
    passive:!1}), ef.addEventListener("pointerdown", ba, {capture:!0, passive:!1}), ef.addEventListener("touchstart", T, {capture:!0, passive:!1}), td()));
  }
  function N3(h) {
    -1 != Ky && (clearTimeout(Ky), Ky = -1);
    if (navigator.clipboard) {
      var m = document.getElementById("AnnotateScreenShotCaptureCanvas");
      if (m) {
        m.style.width = Math.floor(window.visualViewport.width) * window.devicePixelRatio + "px";
        m.style.height = Math.floor(window.visualViewport.height) * window.devicePixelRatio + "px";
        m.width = Math.floor(window.visualViewport.width) * window.devicePixelRatio;
        m.height = Math.floor(window.visualViewport.height) * window.devicePixelRatio;
        m.style.top = window.visualViewport.offsetTop + "px";
        m.style.left = window.visualViewport.offsetLeft + "px";
        var q = m.getContext("2d");
        q.clearRect(0, 0, m.width, m.height);
        var v = new Image();
        v.onload = function() {
          q.drawImage(v, 0, 0);
          var B = q.getImageData(h.x, h.y, h.width, h.height);
          q.clearRect(0, 0, m.width, m.height);
          m.style.width = h.width + "px";
          m.style.height = h.height + "px";
          m.width = h.width;
          m.height = h.height;
          q.putImageData(B, 0, 0);
          try {
            m.toBlob(E => {
              navigator.clipboard.write([new ClipboardItem(Object.defineProperty({}, E.type, {value:E, enumerable:!0}))]);
              F("Image copied.", 3000);
            });
          } catch (E) {
            F("Unable to copy image.", 3000);
          }
        };
        v.src = h.data;
      }
    } else {
      F("Unable to copy image.", 3000);
    }
  }
  function Ny(h) {
    var m = [];
    let q = zt();
    for (var v = 0; v < q.length; v++) {
      if (h == q[v]) {
        m.push(q[v]);
        yt(q[v]);
        break;
      }
    }
    m = Ao.g;
    if (m == h) {
      h = m.cb();
      if ("rectangle" == h || "ellipse" == h || "line" == h) {
        cp(), m.nt(!1), Qa.ja();
      }
      Ao.g = null;
    }
    le();
  }
  function no() {
    Ao.g = null;
    bp && (cp(), Qa && Qa.ja(), T0(Ao) && le());
  }
  function O3() {
    var h = Ao;
    let m = null;
    !h.C || "pen" != h.C.cb() && "highlighter" != h.C.cb() || (h = h.C, -1 == h.ta && (m = h.bh()));
    return m;
  }
  function P3(h) {
    Lg && kH(Lg, h);
  }
  function LG() {
    var h = [];
    let m = zt();
    for (var q = 0; q < Eq.length; q++) {
      for (var v = 0; v < m.length; v++) {
        if (Eq[q] == m[v]) {
          h.push(m[v]);
          Mp(m[v], null);
          yt(m[v]);
          Eq.splice(q, 1);
          q--;
          break;
        }
      }
    }
    le();
    0 < h.length && Px({action:Qx, ub:1, F:h}, !0);
  }
  function gk(h) {
    Na || h.preventDefault();
    lo = !1;
    if (("pen" == h.pointerType || !KB || "mouse" == h.pointerType) && Nm == h.pointerId) {
      KB && Oy && (Oy = !1);
      Nm = -1;
      Na || (window.removeEventListener("pointermove", Qt, {capture:!0}), window.removeEventListener("pointerup", gk, {capture:!0}), window.removeEventListener("pointercancel", gk, {capture:!1}));
      if (Ao.g) {
        var m = Ao.g;
        if (Na) {
          var q = hl(Z, yo(Z, m.S), gl(Z, h.pageX, h.pageY)), v = Z.scale;
          if (4 == ki.g || "pen" == h.pointerType && h.buttons & 32 && "eraser" == m.cb()) {
            v = 1;
          }
          "ellipse" == m.cb() || "rectangle" == m.cb() || "line" == m.cb() ? (m.Em(q.$a + m.Xe().x, q.Ua + m.Xe().y, fk, v), m.I.x == m.L.x && m.I.y == m.L.y && (Ao.g = null)) : m.Em(q.$a + m.Xe().x, q.Ua + m.Xe().y, v);
        } else {
          "ellipse" == m.cb() || "rectangle" == m.cb() || "line" == m.cb() ? (m.Em(h.pageX, h.pageY, fk, 1), m.I.x == m.L.x && m.I.y == m.L.y && (Ao.g = null)) : m.Em(h.pageX, h.pageY, 1);
        }
        Ao.g && (h = Ao.g, "eraser" != h.cb() ? (Na && h.Km(Z.scale), V && SM() && WR(h), Bt(h), D3(h), Px({action:Ux, ub:1, F:[h]}, !0)) : LG(), Ao.g = null, le());
        if (window != window.top && !me || cd && nD(cd)) {
          In.i = !0;
        }
      }
      if (8 == ki.g) {
        CG(Lg, !1), V && SM() && bS();
      } else if (9 == ki.g || 13 == ki.g) {
        var B = document.getElementById("annotate-plugin-temp-text-element");
        if (B) {
          h = parseFloat(B.style.left.slice(0, -2));
          m = parseFloat(B.style.top.slice(0, -2));
          q = parseFloat(B.style.width.slice(0, -2));
          v = parseFloat(B.style.height.slice(0, -2));
          B.remove();
          13 == ki.g ? Ko.wh(Y.i, Y.j, Y.l, Y.B, Y.C, Y.u, Y.g, Y.m) : Jo.wh(Y.i, Y.j, Y.l, Y.s, Y.o, Y.Rg, Y.g, Y.m);
          B = Object.assign({}, Ab);
          B.scale = 1;
          var E = -1;
          if (Na) {
            E = fl(Z, gl(Z, h, m).y).S;
            B = hl(Z, E, new il(Z.scrollX, Z.scrollY));
            var K = Z.Ea.getBoundingClientRect();
            h = h - K.left + Z.scrollX;
            m = m - K.top + Z.scrollY;
            B = {x:-B.$a + Z.scrollX, y:-B.Ua + Z.scrollY, width:jl(Z, E), height:kl(Z, E), scale:Z.scale};
            E = ll(Z, E);
          }
          K = null;
          if (!nd && !Na) {
            let U = Ck(h, m);
            U && (Gt(U), K = Fk(U));
          }
          9 == ki.g ? Jo.ew(h, m, q, v, null, E, B, !0, K) : Ko.ew(h, m, q, v, null, null, E, B, !0, K);
          if (window != window.top && !me || cd && nD(cd)) {
            In.i = !0;
          }
        }
      }
    }
  }
  function Qt(h) {
    Na || h.preventDefault();
    if (!("pen" != h.pointerType && KB && "mouse" != h.pointerType || KB && !Oy || Nm != h.pointerId)) {
      var m = Ao.g;
      !m || "eraser" != m.cb() || 4 == ki.g || h.buttons & 32 || (LG(), Ao.g = null, le());
      if (Ao.g) {
        sb = h.pageX;
        qb = h.pageY;
        m = Ao.g;
        if (Na) {
          var q = hl(Z, yo(Z, m.S), gl(Z, h.pageX, h.pageY)), v = Z.scale;
          if (4 == ki.g || "pen" == h.pointerType && h.buttons & 32 && "eraser" == m.cb()) {
            v = 1;
          }
          "ellipse" == m.cb() || "rectangle" == m.cb() || "line" == m.cb() ? m.Ro(q.$a + m.Xe().x, q.Ua + m.Xe().y, fk, v) : m.Ro(q.$a + m.Xe().x, q.Ua + m.Xe().y, v);
        } else {
          "ellipse" == m.cb() || "rectangle" == m.cb() || "line" == m.cb() ? m.Ro(h.pageX, h.pageY, fk, 1) : m.Ro(h.pageX, h.pageY, 1);
        }
        if ("eraser" == m.cb()) {
          q = m;
          v = [];
          var B = q.wd.length;
          4 <= B && (v.push({Rc:q.wd[B - 4] + q.Ze.x, Xc:q.wd[B - 3] + q.Ze.y}), v.push({Rc:q.wd[B - 2] + q.Ze.x, Xc:q.wd[B - 1] + q.Ze.y}));
          if (v.length) {
            var E = B = -1;
            Na && (B = fl(Z, (v[0].Xc - q.Xe().y) * q.Nn() + q.Xe().y + Z.scrollY).S, E = fl(Z, (v[1].Xc - q.Xe().y) * q.Nn() + q.Xe().y + Z.scrollY).S);
            q.Dg();
            q.Dg();
            q.Dg();
            q.Dg();
            for (var K = 0; K < Gl.length; K++) {
              var U = Gl[K];
              if (U = "ellipse" != U.cb() && "rectangle" != U.cb() && "line" != U.cb()) {
                if (U = yo(Z, Gl[K].S) == B || yo(Z, Gl[K].S) == E) {
                  a: {
                    U = Gl[K];
                    var na = v[0];
                    var ob = v[1];
                    var Ca = (q.Dg() + U.lineWidth * U.j) / 2, qc = na.Rc;
                    na = na.Xc;
                    var Cd = ob.Rc, Ob = ob.Xc, Nc = qc, sg = na, gf = Cd, Dd = Ob;
                    qc > Cd && (Nc = Cd, gf = qc);
                    na > Ob && (sg = Ob, Dd = na);
                    var ce = Cd - qc, De = Ob - na, io = -De, Py = ce * ce + De * De;
                    if (2 === U.wd.length) {
                      var Hl = U.wd[0] * U.j + U.Ze.x;
                      var oo = U.wd[1] * U.j + U.Ze.y;
                      U = pz(Hl, oo, Hl + 0.5, oo + 0.5, ce, De, ce, De, io, ce, Py, qc, na, Cd, Ob, Ca);
                    } else {
                      for (var Fq = 2; Fq < U.wd.length; Fq += 2) {
                        Hl = U.wd[Fq - 2] * U.j + U.Ze.x;
                        oo = U.wd[Fq - 1] * U.j + U.Ze.y;
                        var Qy = U.wd[Fq] * U.j + U.Ze.x;
                        ob = U.wd[Fq + 1] * U.j + U.Ze.y;
                        var iU = Hl;
                        var jU = Qy;
                        var kU = oo;
                        var lU = ob;
                        Hl > Qy && (iU = Qy, jU = Hl);
                        oo > ob && (kU = ob, lU = oo);
                        if (!(iU > gf + Ca || jU < Nc - Ca || kU > Dd + Ca || lU < sg - Ca) && pz(Hl, oo, Qy, ob, ce, De, ce, De, io, ce, Py, qc, na, Cd, Ob, Ca)) {
                          U = !0;
                          break a;
                        }
                      }
                      U = !1;
                    }
                  }
                }
              }
              U && (Eq.push(Gl[K]), Gl.splice(K, 1), K--);
            }
          }
        }
        "eraser" != m.cb() && V && SM() && (q = V, !m || "pen" != m.cb() && "highlighter" != m.cb() || ((v = m.ib(q.M)) && m.J() >= m.lb() && (q.M = m.J(), m.N = q.M), null != v && ((B = Oo(S)) && B.$p(v), m.J() >= m.lb() && bR(q.ba, 1, v, q.ed.bind(q), q.eg.bind(q)))));
      }
      if (8 == ki.g) {
        m = NG(), q = OG(), DG(Lg.g, h.pageX - m - 16, h.pageY - q - 16), V && SM() && (m = h.pageX, q = h.pageY, h = V, h.m == zN ? h.D && (m = YR(h, m, q), ZR(h, $R(m, 1))) : h.m == BN && window != window.top && ZR(h, aS(m, q, 1)));
      } else if (9 == ki.g || 13 == ki.g) {
        m = document.getElementById("annotate-plugin-temp-text-element"), cb = Zi, Ga = $i, sb = h.pageX, qb = h.pageY, "relative" == window.getComputedStyle(document.body).getPropertyValue("position") && (sb -= parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-left")), qb -= parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-top"))), cb > sb && (h = cb, cb = sb, sb = h), Ga > qb && (h = Ga, Ga = qb, qb = h), m.style.left = cb + "px", m.style.top = Ga + 
        "px", m.style.width = Math.floor(sb - cb) + "px", m.style.height = Math.floor(qb - Ga) + "px";
      }
    }
  }
  function Rt(h) {
    if ("mouse" != h.pointerType || 3 != h.which && 2 != h.which) {
      if (Ip(), lo = !0, "pen" == h.pointerType && !JB) {
        pC(), JB = !0, Xa({type:"annotateStylusModeAsked"}, null);
      } else {
        if (KB && "pen" != h.pointerType && "mouse" != h.pointerType) {
          PG = !1;
        } else {
          if (-1 == Nm) {
            Oy = PG = !0;
            Nm = h.pointerId;
            15 == ki.g && (Nm = -1);
            4 == ki.g && (Gl = zt().slice(), Eq = []);
            Ao.g = G3({annotationPositionOffset:Ab});
            if ("pen" == h.pointerType && h.buttons & 32 && (2 == ki.g || 3 == ki.g)) {
              Na || h.preventDefault();
              var m = Ao.B;
              Gl = zt().slice();
              Eq = [];
              Ao.g = new sz(m, Object.assign({}, Ab));
            }
            if (Ao.g) {
              m = Ao.g;
              "eraser" != m.cb() && clearTimeout(bq.j);
              Ql.Ja() && to();
              m.xb();
              Qa && Qa.nr(!0);
              if (Na) {
                var q = gl(Z, h.pageX, h.pageY), v = fl(Z, q.y);
                if (0 > v.S) {
                  Ao.g = null;
                  return;
                }
                q = hl(Z, v.S, q);
                let B = hl(Z, v.S, new il(Z.scrollX, Z.scrollY)), E = Z.scale;
                if (4 == ki.g || "pen" == h.pointerType && h.buttons & 32 && "eraser" == m.cb()) {
                  E = 1;
                }
                m.kl(ll(Z, B.S));
                m.Vn({x:-B.$a, y:-B.Ua, width:jl(Z, v.S) / E, height:kl(Z, v.S) / E});
                m.Ft(q.$a - B.$a, q.Ua - B.Ua, E);
              } else {
                window.addEventListener("pointermove", Qt, {capture:!0, passive:!1});
                window.addEventListener("pointerup", gk, {capture:!0, passive:!1});
                window.addEventListener("pointercancel", gk, {capture:!1, passive:!1});
                if (nd) {
                  m.nq({x:nd.x, y:nd.y});
                } else {
                  if (v = Ck(h.pageX, h.pageY)) {
                    Gt(v), v = Fk(v), m.Cb = v;
                  }
                }
                m.Ft(h.pageX, h.pageY, 1);
              }
              "eraser" != m.cb() && V && SM() && (v = V, !m || "pen" != m.cb() && "highlighter" != m.cb() || (v.M = 0, m.N = v.M));
            }
            8 == ki.g && (Na || (window.addEventListener("pointermove", Qt, {capture:!0, passive:!1}), window.addEventListener("pointerup", gk, {capture:!0, passive:!1}), window.addEventListener("pointercancel", gk, {capture:!1, passive:!1})), m = NG(), v = OG(), DG(Lg.g, h.pageX - m - 16, h.pageY - v - 16), CG(Lg, !0), V && SM() && (v = h.pageX, q = h.pageY, m = V, m.m == zN ? m.D && (v = YR(m, v, q), ZR(m, $R(v, 0))) : m.m == BN && window != window.top && ZR(m, aS(v, q, 0))));
            if (9 == ki.g || 13 == ki.g) {
              Ql.Ja() && to(), sf(), fh(), Mg(), xG.Vi() ? (xG.$h(), Nm = -1) : (Zi = h.pageX, $i = h.pageY, Na || (window.addEventListener("pointermove", Qt, {capture:!0, passive:!1}), window.addEventListener("pointerup", gk, {capture:!0, passive:!1}), window.addEventListener("pointercancel", gk, {passive:!1})), "relative" == window.getComputedStyle(document.body).getPropertyValue("position") && (Zi -= parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-left")), $i -= parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-top"))), 
              h = document.createElement("div"), h.className = "extension_reset_css ", h.id = "annotate-plugin-temp-text-element", h.style.position = "absolute", h.style.top = $i + "px", h.style.left = Zi + "px", h.style.width = "0px", h.style.height = "0px", h.style.border = "2px solid black", h.style.zIndex = "2147483642", ik(h), document.body.appendChild(h)), Ry && (Fl(), Ry = !1);
            }
          }
        }
      }
    }
  }
  function Om(h) {
    if (f() && AA() && (!Na || Z.Ea)) {
      null == bp && (bp = new tH(Ny, no));
      var m;
      if (m = 1 == ki.g) {
        a: {
          m = h.target;
          var q = "annotate-selection-edit-toolbar annotate-timer-edit-toolbar annotate-mathtool-edit-toolbar annotate-texttool-edit-toolbar ExtensionWidgetEditToolbar annotate-element-toolbar".split(" ");
          for (var v = 0; v < q.length; v++) {
            var B = document.getElementById(q[v]);
            if (B && (B == m || B.contains(m))) {
              m = !0;
              break a;
            }
          }
          q = [];
          Na && Z.Ea && (q = [".pdfwidget.dialog", ".pdfwidget.pdfdialogeventblocker", ".pdfdialog"]);
          -1 == wa.indexOf("docs.google.com/presentation/d/") && -1 == wa.indexOf("docs.google.com/document/d/") || window != window.top || (q.push(".goog-menu"), q.push(".modal-dialog-bg"), q.push(".modal-dialog"));
          Pm() && (q.push(".punch-viewer-navbar"), q.push(".punch-viewer-navbar-menu"));
          for (v = 0; v < q.length; v++) {
            if (mh(q[v], m)) {
              m = !0;
              break a;
            }
          }
          m = !1;
        }
        m = !m;
      }
      if (m) {
        if (FZ(jb, h.pageX, h.pageY, !0)) {
          tf(), Fl();
        } else {
          if (WC(h)) {
            tf(), Fl();
          } else {
            LC(Xo);
            if (m = Yo) {
              a: {
                for (var E of hv()) {
                  if (E && h.target == E.la()) {
                    m = !0;
                    break a;
                  }
                  m = h.clientX;
                  q = h.clientY;
                  if (E && E.Mc) {
                    var K = E.la().getBoundingClientRect();
                    if (K) {
                      v = K.width;
                      B = K.height;
                      let U = K.top;
                      K = K.left;
                      if (m > K && m < K + v && q > U && q < U + B) {
                        m = !0;
                        break a;
                      }
                    }
                  }
                }
                m = !1;
              }
            }
            if (m) {
              tf(), Fl();
            } else {
              if (Kv && !YY(Kv, h) && XY(Kv), (E = bp.u) || (E = Pz, E.g && E.g.hc(h) ? E = !0 : (E.Tn(null), E = !1)), !(E || !A(Lo) && GX(h))) {
                if (bp.Xq(h.pageX, h.pageY)) {
                  Jo.Zk(!1), Ko.Zk(!1);
                } else {
                  if (!(Ko.Xq(h.pageX, h.pageY) || Jo.Xq(h.pageX, h.pageY) || u2(h.pageX, h.pageY))) {
                    if (E = null, W.i && (E = mU(h.pageX, h.pageY)), E) {
                      if (Ao.g == E) {
                        return rH(ud), bp.Db = nU, !0;
                      }
                      Qa.ja();
                      Ao.g = E;
                      le();
                      rH(ud);
                      bp.Db = nU;
                      le();
                      h.stopPropagation();
                      h.preventDefault();
                      Ko.$h();
                      Jo.$h();
                      Ko.Zk(!1);
                      Jo.Zk(!1);
                    } else {
                      Ko.oB(h) ? (Ko.Zk(!0), Ko.dD(h), Ao.g && (Ao.g = null, h.stopPropagation(), h.preventDefault(), le(), cp(), Pz.Tn(null), Qa && Qa.ja(), le())) : Ko.$h(), Jo.oB(h) ? (Jo.Zk(!0), Jo.dD(h), Ao.g && (Ao.g = null, h.stopPropagation(), h.preventDefault(), le(), cp(), Pz.Tn(null), Qa && Qa.ja(), le())) : Jo.$h(), Ao.g ? (Ao.g = null, h.stopPropagation(), h.preventDefault(), le(), cp(), Fl(), Qa && Qa.ja(), le()) : FZ(jb, h.pageX, h.pageY, !1) && (tf(), Fl());
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  function Sy(h) {
    if (f() && AA()) {
      null == bp && (bp = new tH(Ny, no));
      var m;
      if (m = 1 == ki.g) {
        a: {
          if (Na && Z.Ea) {
            m = [".pdfwidget.dialog", ".pdfwidget.pdfdialogeventblocker", ".pdfdialog"];
            for (var q = 0; q < m.length; q++) {
              if (mh(m[q], h.target)) {
                m = !0;
                break a;
              }
            }
          }
          m = !1;
        }
        m = !m;
      }
      if (m) {
        if (bp.u) {
          return !0;
        }
        if (!(m = u2(h.pageX, h.pageY) || bp.Xq(h.pageX, h.pageY) || Ko.Xq(h.pageX, h.pageY) || Jo.Xq(h.pageX, h.pageY)) && (m = Xo)) {
          a: {
            var v = Xo;
            if (v.g && v.v && v.j && v.G) {
              if (h.target && h.target.parentElement && h.target.parentElement.id == v.j.id) {
                m = !0;
                break a;
              }
              m = h.pageX;
              q = h.pageY;
              var B = v.j.getBoundingClientRect();
              if (B) {
                v = B.width;
                let E = B.height, K = B.top;
                B = B.left;
                if (m > B && m < B + v && q > K && q < K + E) {
                  m = !0;
                  break a;
                }
              }
            }
            m = !1;
          }
        }
        !m && mU(h.pageX, h.pageY) && (h.stopPropagation(), h.preventDefault());
      }
    }
  }
  function oU(h) {
    Ip();
    PG && h.preventDefault();
  }
  function NG() {
    return window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0;
  }
  function OG() {
    return window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
  }
  function mU(h, m) {
    let q = zt();
    if (Na) {
      for (var v = q.length - 1; 0 <= v; v--) {
        let E = q[v];
        if (0 > yo(Z, E.S)) {
          break;
        }
        let K = hl(Z, yo(Z, E.S), gl(Z, h, m));
        var B = q[v].cb();
        if (("rectangle" == B || "ellipse" == B || "line" == B) && E.Ha(K.$a + E.Xe().x, K.Ua + E.Xe().y)) {
          return E.wm(Z), E;
        }
      }
    } else {
      for (v = q.length - 1; 0 <= v; v--) {
        if (B = q[v].cb(), "rectangle" == B || "ellipse" == B || "line" == B) {
          if (B = q[v], B.Ha(h, m)) {
            return B;
          }
        }
      }
    }
    return null;
  }
  function le() {
    var h = T0(Ao), m = Mx(Ao), q = U0(Ao), v = V0(Ao);
    let B = B0(Ao);
    if (!jd && h && m) {
      var E = window.scrollY, K = window.scrollX;
      "relative" == window.getComputedStyle(document.body).getPropertyValue("position") && (E -= parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-top")), K -= parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-left")));
      nd && (E = nd.y, K = nd.x);
      var U = document.documentElement.clientWidth < Math.floor(window.visualViewport.width) ? document.documentElement.clientWidth : Math.floor(window.visualViewport.width);
      h.style.top = E + "px";
      m.style.top = E + "px";
      B && (B.style.top = E + "px");
      q.style.top = E + "px";
      v.style.top = E + "px";
      K + parseInt(m.style.width) <= window.scrollX + U && (h.style.left = K + "px", m.style.left = K + "px", B && (B.style.left = K + "px"), q.style.left = K + "px", v.style.left = K + "px");
      Na && m.width == h.width || (m.width = m.width);
      !B || Na && B.width == h.width || (B.width = B.width);
      h.width = h.width;
      h && Ao.u && hp(Ao);
      m && Ao.B && kp();
      Ao.s && lp(Ao);
      q.width = q.width;
      v.width = v.width;
      a: {
        if (q = Ao, q.u) {
          m = q.u;
          if (Ep()) {
            if (!q.G && !L.mb().Ja()) {
              break a;
            }
            m = q.G;
            v = Dt();
            for (h = 0; h < v.length; h++) {
              W0(v[h], q.u);
            }
            v = Ft();
            for (h = 0; h < v.length; h++) {
              W0(v[h], q.J);
            }
            q = vu();
            for (h = 0; h < q.length; h++) {
              Es(q[h]) ? Jo.uf(q[h], 1) : Fs(q[h]) && Ko.uf(q[h], 1);
            }
            q = xu();
            for (h = 0; h < q.length; h++) {
              Es(q[h]) ? Jo.uf(q[h], 3) : Fs(q[h]) && Ko.uf(q[h], 3);
            }
            q = lu();
            for (h = 0; h < q.length; h++) {
              Ro.mq(q[h]);
            }
            q = nu();
            for (h = 0; h < q.length; h++) {
              Ro.mq(q[h]);
            }
          } else if (Fp()) {
            if (!q.J) {
              break a;
            }
            m = q.J;
            v = Dt();
            for (h = 0; h < v.length; h++) {
              W0(v[h], q.u);
            }
            v = Et();
            for (h = 0; h < v.length; h++) {
              W0(v[h], q.G);
            }
            q = vu();
            for (h = 0; h < q.length; h++) {
              Es(q[h]) ? Jo.uf(q[h], 1) : Fs(q[h]) && Ko.uf(q[h], 1);
            }
            q = wu();
            for (h = 0; h < q.length; h++) {
              Es(q[h]) ? Jo.uf(q[h], 2) : Fs(q[h]) && Ko.uf(q[h], 2);
            }
            q = lu();
            for (h = 0; h < q.length; h++) {
              Ro.mq(q[h]);
            }
            q = mu();
            for (h = 0; h < q.length; h++) {
              Ro.mq(q[h]);
            }
          }
          q = zt();
          for (h = 0; h < q.length; h++) {
            W0(q[h], m);
          }
          m = tu();
          for (h = 0; h < m.length; h++) {
            Es(m[h]) ? Jo.uf(m[h], ql()) : Fs(m[h]) && Ko.uf(m[h], ql());
          }
          m = ju();
          for (h = 0; h < m.length; h++) {
            Ro.mq(m[h]);
          }
        }
      }
      Y0();
      o1();
      tp(Ao);
      Ty();
      QG();
    }
  }
  function Q3() {
    var h = T0(Ao), m = Mx(Ao), q = U0(Ao), v = V0(Ao);
    let B = B0(Ao);
    if (!jd && h && m) {
      var E = window.scrollY, K = window.scrollX;
      "relative" == window.getComputedStyle(document.body).getPropertyValue("position") && (E -= parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-top")), K -= parseInt(window.getComputedStyle(document.body).getPropertyValue("margin-left")));
      nd && (E = nd.y, K = nd.x);
      var U = document.documentElement.clientWidth < Math.floor(window.visualViewport.width) ? document.documentElement.clientWidth : Math.floor(window.visualViewport.width);
      h.style.top = E + "px";
      m.style.top = E + "px";
      B && (B.style.top = E + "px");
      q.style.top = E + "px";
      v.style.top = E + "px";
      K + parseInt(m.style.width) <= window.scrollX + U && (h.style.left = K + "px", m.style.left = K + "px", B && (B.style.left = K + "px"), q.style.left = K + "px", v.style.left = K + "px");
      Na && m.width == h.width || (m.width = m.width);
      !B || Na && B.width == h.width || (B.width = B.width);
      h.width = h.width;
      h && Ao.u && hp(Ao);
      m && Ao.B && kp();
      Ao.s && lp(Ao);
      q.width = q.width;
      v.width = v.width;
      a: {
        if (q = Ao, q.u) {
          m = q.u;
          if (2 == ql() || L.mb().Ja() && 2 == ql()) {
            if (!q.G && !L.mb().Ja()) {
              break a;
            }
            m = q.G;
            v = Dt();
            for (h = 0; h < v.length; h++) {
              W0(v[h], q.u);
            }
            v = Ft();
            for (h = 0; h < v.length; h++) {
              W0(v[h], q.J);
            }
            q = vu();
            for (h = 0; h < q.length; h++) {
              Es(q[h]) ? Jo.uf(q[h], 1) : Fs(q[h]) && Ko.uf(q[h], 1);
            }
            q = xu();
            for (h = 0; h < q.length; h++) {
              Es(q[h]) ? Jo.uf(q[h], 3) : Fs(q[h]) && Ko.uf(q[h], 3);
            }
          } else if (3 == ql()) {
            if (!q.J) {
              break a;
            }
            m = q.J;
            v = Dt();
            for (h = 0; h < v.length; h++) {
              W0(v[h], q.u);
            }
            v = Et();
            for (h = 0; h < v.length; h++) {
              W0(v[h], q.G);
            }
            q = vu();
            for (h = 0; h < q.length; h++) {
              Es(q[h]) ? Jo.uf(q[h], 1) : Fs(q[h]) && Ko.uf(q[h], 1);
            }
            q = wu();
            for (h = 0; h < q.length; h++) {
              Es(q[h]) ? Jo.uf(q[h], 2) : Fs(q[h]) && Ko.uf(q[h], 2);
            }
          }
          q = zt();
          for (h = 0; h < q.length; h++) {
            W0(q[h], m);
          }
          m = tu();
          for (h = 0; h < m.length; h++) {
            Es(m[h]) ? Jo.uf(m[h], ql()) : Fs(m[h]) && Ko.uf(m[h], ql());
          }
        }
      }
      Y0();
      o1();
      tp(Ao);
      Ty();
      QG();
    }
  }
  function pU(h) {
    if (V && !SM() && V.l != Ym) {
      h.preventDefault();
    } else {
      if (1 != ki.g || h.target && ("string" === typeof h.target.className || h.target.className instanceof String) && h.target.className.includes("AnnotateScreenshadeElement")) {
        let v = null;
        Nk() ? v = document.getElementsByClassName("kix-appview-editor")[0] : Lk() && (v = document.getElementById("workspace-container"));
        var m;
        if (m = v) {
          a: {
            m = h.clientX;
            let B = h.clientY;
            if (v) {
              var q = v.getBoundingClientRect();
              if (q) {
                let E = q.width, K = q.height, U = q.top;
                q = q.left;
                if (m > q && m < q + E && B > U && B < U + K) {
                  m = !0;
                  break a;
                }
              }
            }
            m = !1;
          }
        }
        m && v.scrollTo(h.deltaX + v.scrollLeft, h.deltaY + v.scrollTop);
      }
    }
  }
  function wq() {
    dp();
    ep && fp(ep, !1, null);
    bp && bp.dl();
    Jo && Jo.dl();
    Ko && Ko.dl();
    jb && jb.dl();
    P.dl();
    Lo && Lo.dl();
    Yo && HD();
    md && (md.style.top = window.visualViewport.offsetTop + "px", md.style.left = window.visualViewport.offsetLeft + "px", lg && null != lg.offsetParent && ($f(), ad()));
    Ty();
    QG();
    requestAnimationFrame(Q3);
  }
  function Uy(h) {
    return function() {
      console.log(">> window focus: ", h);
      V && V.Lj() && W.ld != h && ((W.ld = h) ? xM(yM.WF) : xM(yM.VF));
    };
  }
  function qU() {
    ud = !1;
    document.getElementById("annotate-highlight-plugin-pen") && (rU("#000000"), bZ(jb, !0), Qa && Qa.Kz(ud));
  }
  function sU(h) {
    ud = !0;
    if (hi.ia) {
      hi.ia = !1;
      var m = hi;
      m.m && (m.m.xd = [1, 2, 3, 5, 7, 10, 12, 16], m.m.zb = 3, m.m.qa = "#000000", m.m.Rb = 1, m.m.Xb = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" "), m.m.Za = 0, m.m.Cc = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" "), m.m.Cg = 3, m.m.Bg = 1);
      m.i && (m.i.Nf = 0, m.i.Ng = 0, m.i.ij = 0, m.i.xd = [1, 2, 3, 5, 7, 10, 12, 16], m.i.zb = 3, m.i.qa = "#000000", m.i.Rb = 1, m.i.Xb = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" "), m.i.Za = 0, m.i.Cc = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" "), m.i.Cg = 3, m.i.Bg = 1);
      m.j && (m.j.xd = [1, 2, 3, 5, 7, 10, 12, 16], m.j.zb = 3, m.j.qa = "#000000", m.j.Rb = 0.8, m.j.Xb = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" "), m.j.Za = 0, m.j.Hd = "", m.j.Ei = " #ffffff #000000 #f41489 #30f0bf #fdfd96 #21aeef".split(" "), m.j.Kf = 0, m.j.Ni = " #ffffff #000000 #f41489 #30f0bf #fdfd96 #21aeef".split(" "), m.j.Cc = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" "), m.j.Cg = 3, m.j.Bg = 1);
      m.g && (m.g.xd = [1, 2, 3, 5, 7, 10, 12, 16], m.g.zb = 3, m.g.qa = "#000000", m.g.Rb = 0.8, m.g.Xb = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" "), m.g.Za = 0, m.g.Hd = "", m.g.Ei = " #ffffff #000000 #f41489 #30f0bf #fdfd96 #21aeef".split(" "), m.g.Kf = 0, m.g.Ni = " #ffffff #000000 #f41489 #30f0bf #fdfd96 #21aeef".split(" "), m.g.Cc = "#000000 #ffba02 #ff3b30 #bf0808 #17a969 #007aff #ffffff".split(" "), m.g.Cg = 3, m.g.Bg = 1);
      m.l && (m.l.xd = [8, 10, 12, 14, 15, 18, 20, 22], m.l.zb = 14, m.l.qa = "#fdfd96", m.l.Rb = 0.5, m.l.Xb = "#f7ee00 #f41489 #30f0bf #fdfd96 #21aeef #bcff00 #9930f2".split(" "), m.l.Za = 0, m.l.Cc = "#f7ee00 #f41489 #30f0bf #fdfd96 #21aeef #bcff00 #9930f2".split(" "), m.l.Cg = 14, m.l.Bg = 0.5);
    }
    document.getElementById("annotate-highlight-plugin-pen") && ((!h || 1 >= ki.g) && Jf(), rU("#aaaaaa"), bZ(jb, !1), Qa && Qa.Kz(ud));
  }
  function rU(h) {
    "annotate-highlight-plugin-laser annotate-highlight-plugin-capture-tab annotate-highlight-plugin-popup-math-text-icon annotate-highlight-plugin-math-text annotate-highlight-plugin-font-family annotate-highlight-plugin-font-size annotate-highlight-plugin-bold annotate-highlight-plugin-italic annotate-highlight-plugin-underline annotate-highlight-plugin-textcolor annotate-highlight-plugin-fillcolor".split(" ").forEach(m => {
      if (m = document.getElementById(m)) {
        m.style.color = h;
      }
    });
  }
  function OT() {
    if (cd) {
      var h = cd;
      J0(h);
      h.ba();
      K0(h);
    }
  }
  function ak(h, m) {
    if (!Mc || !sK(Mc)) {
      if (!W.g || h) {
        eo = W.g = !0, W.ia = !1, Zn(), OT(), tl(), uq(), St(), NT(), PT(), da(wa) || window == window.top && Ok(P) ? (vl(!0), W.g = !1) : (f() ? xq(m) : (W.g = !1, vl(!0), Kb(!1)), Nt(), Mm = !1, td(), x0(!1), Vy(), document.addEventListener("visibilitychange", R3), Mx(Ao) && (Mx(Ao).addEventListener("pointerdown", Rt, {capture:!0, passive:!1}), Mx(Ao).addEventListener("touchstart", oU, {capture:!0, passive:!1})), Ey || (window.addEventListener("scroll", wq, pb), window.visualViewport.addEventListener("scroll", 
        wq, pb), c(!0, pb), window.addEventListener("focus", Uy(!0)), window.addEventListener("blur", Uy(!1)), document.addEventListener("keydown", bU, {capture:!0, passive:!1}), document.addEventListener("keyup", hU, {capture:!0, passive:!1}), document.addEventListener("wheel", pU, {capture:!0, passive:!1})), -1 != wa.indexOf("docs.google.com/presentation/d/") && window == window.top && (h = document.getElementById("workspace-container")) && h.addEventListener("scroll", tl, pb), -1 != wa.indexOf("docs.google.com/document/d/") && 
        window == window.top && (h = document.getElementsByClassName("kix-appview-editor")[0]) && h.addEventListener("scroll", uq, pb), Ey = !0, (!m || 1 >= ki.g) && Fl(), O0(W));
      }
    }
  }
  function Vy() {
    null == bp && Ao.B && (bp = new tH(Ny, no));
    -1 == wa.indexOf("docs.google.com/presentation/d/") && -1 == wa.indexOf("docs.google.com/document/d/") || window != window.top ? Na && (tU("25"), bp && pH(15, 18, 21), Xo && RC("23", "25"), Yo && GD("22"), kb && (kb.style.zIndex = "24"), Va && (Va.style.zIndex = "24"), lc && (lc.style.zIndex = "24")) : (tU("995"), bp && pH(985, 988, 991), Xo && RC("993", "995"), Yo && GD("992"), kb && (kb.style.zIndex = "994"), Va && (Va.style.zIndex = "994"), lc && (lc.style.zIndex = "994"));
  }
  function tU(h) {
    Yj = h;
    Da && (Da.style.zIndex = h);
    te && (te.style.zIndex = h);
    ne && (ne.style.zIndex = h);
    ni && (ni.style.zIndex = h);
    oi && (oi.style.zIndex = h);
    pi && (pi.style.zIndex = h);
    uf && (uf.style.zIndex = h);
    Kf && (Kf.style.zIndex = h);
    Qa && (Qa.el.style.zIndex = h);
    Up.jb(h);
  }
  function St() {
    T0(Ao) && Mx(Ao) && (ml(P) ? nD(cd) || window != window.top ? ($0("990"), l1("991"), Jo.ej("990", "991"), Ko.ej("990", "991"), YZ(jb, "989", "994"), Yo && GD("992")) : ($0("0"), l1("0"), Jo.ej("0", "0"), Ko.ej("0", "0"), YZ(jb, "0", "0")) : Mk() ? window == window.top ? ($0("986"), l1("987"), Jo.ej("986", "987", "991"), Ko.ej("986", "987", "991"), YZ(jb, "985", "990"), HX("989")) : ($0("3"), l1("3"), Jo.ej("2", "3", "11"), Ko.ej("2", "3", "11"), YZ(jb, "2", "10"), HX("9"), Yo && GD("12")) : si() && 
    ($0("16"), l1("17"), Jo.ej("16", "18", "21"), Ko.ej("16", "18", "21"), YZ(jb, "15", "20"), HX("19")));
  }
  function uq() {
    if (W.i && Wl() && (V1(W), -1 != wa.indexOf("docs.google.com/document/d/"))) {
      var h = null, m = null;
      window == window.top && (m = document.getElementsByClassName("kix-appview-editor")[0], (h = document.getElementsByClassName("kix-scrollareadocumentplugin")[0]) || (h = document.getElementsByClassName("kix-page-paginated")[0]));
      if (h) {
        m && (nd = m.getBoundingClientRect()) && (nd.width -= 16, m.scrollWidth != m.clientWidth && (nd.height -= 16));
        h = h.getBoundingClientRect();
        if (h.x != Ab.x || h.y != Ab.y || h.height != Ab.height || h.width != Ab.width) {
          Ab.x = h.x;
          Ab.y = h.y;
          Ab.height = h.height;
          Ab.width = h.width;
          let q = zt();
          for (m = 0; m < q.length; m++) {
            q[m].Km(h.width / q[m].Xe().width * q[m].Nn()), q[m].Vn(Object.assign({}, Ab)), nd && q[m].nq({x:nd.x, y:nd.y});
          }
          null != bp && sH();
          Jo.xm(Object.assign({}, Ab));
          Ko.xm(Object.assign({}, Ab));
          jb.wf(Object.assign({}, Ab));
          P.wf(Object.assign({}, Ab));
          x0(!1);
        }
        setTimeout(function() {
          uq();
        }, 200);
      }
    }
  }
  function tl() {
    if (Wl() || W.i) {
      V1(W);
      if (-1 != wa.indexOf("docs.google.com/presentation/d/") || me && window != window.top || Gk(P) || Qk()) {
        var h = null, m = null;
        window == window.top || Gk(P) ? (m = document.getElementById("workspace-container"), h = document.getElementById("canvas-container"), !h && 0 < document.getElementsByClassName("punch-viewer-page-wrapper-container").length && (h = document.getElementsByClassName("punch-viewer-page-wrapper-container")[0])) : h = document.getElementsByClassName("punch-viewer-page-wrapper-container")[0];
      } else if (cd) {
        m = cd.Al, h = L0(cd);
      } else if (!ml(P) && !Jk(P)) {
        return;
      }
      if (h && (m && (nd = m.getBoundingClientRect(), cd && (nd = oD(cd, m))), h = h.getBoundingClientRect(), h.x != Ab.x || h.y != Ab.y || h.height != Ab.height || h.width != Ab.width)) {
        Ab.x = h.x;
        Ab.y = h.y;
        Ab.height = h.height;
        Ab.width = h.width;
        function q(v) {
          for (var B = 0; B < v.length; B++) {
            wp(v[B]);
          }
        }
        h = zt();
        q(h);
        (h = Ao.v) && q([h]);
        2 == S.g ? (h = Dt(), q(h), h = Ft(), q(h)) : 3 == S.g && (h = Dt(), q(h), h = Et(), q(h));
        null != bp && sH();
        Jo.xm(Object.assign({}, Ab));
        Ko.xm(Object.assign({}, Ab));
        jb.wf(Object.assign({}, Ab));
        P.wf(Object.assign({}, Ab));
        Yo && Yo.xm(Object.assign({}, Ab));
        kc && XK(kc);
        x0(!1);
        me && window != window.top && 0 != Ab.height && 0 != Ab.width && Xa({type:"annotateAnnotationPositionOffsetForPreview", annotationPositionOffset:Ab}, null);
      }
      setTimeout(function() {
        tl();
      }, 200);
    }
  }
  function Zn() {
    document.body && Ik() && (document.getElementById("AnnotateScreenCaptureDiv") || (fe(), t()), document.getElementById("annotate-highlight-plugin-addhightlighttoolbar") || Ro.xi(), document.getElementById("annotate-texttool-edit-toolbar") || (Jo.xi(), Ko.xi()));
  }
  function S3() {
    Ip();
    ii("10.11");
    if (!wl && mo && eo) {
      vl(!1);
      Tt();
      gc(wa);
      var h = {type:"annotateAnnotationModeGot", value:!1};
    } else {
      Zj(), h = {type:"annotateAnnotationModeGot", value:!1};
    }
    Xa(h, null);
  }
  function Tt() {
    Cb();
    Ld();
    wl || Gk(P) && !ae ? Kb(!1) : Kb(!0);
    "" == wa && (wa = window.location.href);
    window != window.top && -1 != wa.indexOf("docs.google.com/presentation/d/") && gc(wa);
  }
  function Zj() {
    if (!Mc || !sK(Mc)) {
      if (kb) {
        W.g = !1;
        vl(!0);
        Jf();
        var h = Ml();
        !Jh() || !eo || window != window.top && !Qm && !aj || jd || h || window == window.top && Ok(P) ? (Kb(!1), gc(""), X(!1), NB && qY()) : (Tt(), V1(W));
        !jd && Mx(Ao) && (Mx(Ao).removeEventListener("pointerdown", Rt, {capture:!0}), Mx(Ao).removeEventListener("touchstart", oU, {capture:!0}), window.removeEventListener("pointerdown", Om, {capture:!0}), window.removeEventListener("pointercancel", Om, {}), window.removeEventListener("pointerup", Sy, {capture:!0}), Xo && null != Xo.g && EC(!1), V1(W), Ld(), gc(Ul()), pc(Ul()), ao());
      } else {
        window != window.top && Ol(P) && (pw && fw() ? fw().U() : Ta && Ta.j && !Pk() && (Ta.j.U(), Ta = null));
      }
    }
  }
  function ao() {
    if (window.top == window || Qm) {
      var h = null;
      Da && (h = {top:Da.style.top, left:Da.style.left});
      var m = null;
      Ub && (m = {top:Ub.style.top, right:Ub.style.right});
      Ut();
      var q = null;
      Va && (q = {top:Va.style.top, right:Va.style.right});
      var v = null;
      kb && (v = {top:kb.style.top, right:kb.style.right});
      Xa({type:"annotateToolbarPosition", position:{toolbarPosition:h, startAnnotationModeBtnPosition:m, importPdfBtnPosition:q, loadAnnotationsBtnPosition:v}}, null);
    }
  }
  function bo(h) {
    var m = document.documentElement.clientWidth - (window.visualViewport.offsetLeft + Math.floor(window.visualViewport.width));
    2 > m && (m = 2);
    m += "px";
    if (Ub) {
      Ub.style.removeProperty("left");
      Ub.style.right = m;
      var q = Da ? Da.style.top : "48px";
      Ub.style.top = q;
    }
    kd && (kd.style.removeProperty("left"), kd.style.right = m, q = Da ? Da.style.top : "48px", kd.style.top = q);
    Va && !h && (Va.style.removeProperty("left"), Va.style.right = m, Va.style.top = "48px", Da && (W.g && Da.offsetHeight ? (q = Da.getBoundingClientRect(), Va.style.top = q.bottom + 40 + "px") : Va.style.top = Da.style.top));
    kb && !h && (kb.style.removeProperty("left"), kb.style.right = m, kb.style.top = "48px", Da && (W.g && Da.offsetHeight ? (h = Da.getBoundingClientRect(), kb.style.top = h.bottom + 40 + "px") : kb.style.top = Da.style.top));
    Ut();
  }
  function QG() {
    var h = document.documentElement.clientWidth - (window.visualViewport.offsetLeft + Math.floor(window.visualViewport.width));
    2 > h && (h = 2);
    h += "px";
    Ub && (Ub.style.removeProperty("left"), Ub.style.right = h, Ub.style.top = Da ? Da.style.top : Math.floor(window.visualViewport.offsetTop + 48) + "px");
    Va && (Va.style.removeProperty("left"), Va.style.right = h, parseInt(Va.style.top) < Math.floor(window.visualViewport.offsetTop) && (Va.style.top = Math.floor(window.visualViewport.offsetTop) + "px"), parseInt(Va.style.top) > Math.floor(window.visualViewport.height + window.visualViewport.offsetTop - Va.clientHeight) && (Va.style.top = Math.floor(window.visualViewport.height + window.visualViewport.offsetTop - Va.clientHeight) + "px"));
    kb && (kb.style.removeProperty("left"), kb.style.right = h, parseInt(kb.style.top) < Math.floor(window.visualViewport.offsetTop) && (kb.style.top = Math.floor(window.visualViewport.offsetTop) + "px"), parseInt(Va.style.top) > Math.floor(window.visualViewport.height + window.visualViewport.offsetTop - kb.clientHeight) && (kb.style.top = Math.floor(window.visualViewport.height + window.visualViewport.offsetTop - kb.clientHeight) + "px"));
    Ut();
  }
  function Ty() {
    !Da || wa.indexOf("canva.com/design") && window != window.top || (0 > parseInt(Da.style.top) - window.visualViewport.offsetTop && (Da.style.top = Math.floor(window.visualViewport.offsetTop) + "px"), 0 > parseInt(Da.style.left) - window.visualViewport.offsetLeft && (Da.style.left = Math.floor(window.visualViewport.offsetLeft) + "px"), parseInt(Da.style.top) + parseInt(Da.getBoundingClientRect().height) > Math.floor(window.visualViewport.offsetTop + window.visualViewport.height - 144) && (Da.style.top = 
    Math.floor(window.visualViewport.offsetTop + window.visualViewport.height - 144 - parseInt(Da.getBoundingClientRect().height)) + "px"), parseInt(Da.style.left) + parseInt(Da.getBoundingClientRect().width) > Math.floor(window.visualViewport.offsetLeft + window.visualViewport.width) && (Da.style.left = Math.floor(window.visualViewport.offsetLeft + window.visualViewport.width - parseInt(Da.getBoundingClientRect().width)) + "px"));
  }
  function tg() {
    if (te && Da) {
      let h;
      h = null != uf && "none" != uf.style.display ? uf : null != Kf && "none" != Kf.style.display ? Kf : null != ne && "none" != ne.style.display ? ne : null != Qa && null != Qa.el && "none" != Qa.el.style.display ? Qa.el : null != Up.g && Up.g.ob() ? Up.g.el : Da;
      te.style.top = parseInt(h.style.top) + parseInt(h.offsetHeight) + "px";
      te.style.left = Da.style.left;
    }
  }
  function uU(h) {
    !Da || vU && !h || (vU = !0, Da.style.top = Math.floor(window.visualViewport.offsetTop + 48) + "px", Ub && "block" == Ub.style.display && (Da.style.top = Ub.style.top), Da.style.left = Math.floor(window.visualViewport.offsetLeft + (Math.floor(window.visualViewport.width) - 236 - 12)) + "px", Da.style.width = "236px", Da.style.height = "56px", null != Qa && null != Qa.el && "none" != Qa.el.style.display && Vt(), tg(), Ut(), ld || (po(), Wy(), Xy(), ek()), bo(!h && Ht));
  }
  function xq(h) {
    if (W.np && !M.g) {
      var m = !1;
      if (!Da || !document.getElementById("annotate-plugin-annotation-toolbar")) {
        m = !0;
        var q = [], v = 0;
        q.push({id:"annotate-highlight-plugin-move", title:"Drag to move", className:"extension_icon extension_icon-move", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", "touch-action":"none", position:"absolute", top:"19px", left:v + "px", color:"#000000"}, fv:T3});
        var B = "4px";
        v += 30;
        q.push({id:"annotate-highlight-plugin-start-recording", title:"Start recording", className:"extension_icon extension_icon-recording_start", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", color:"#FF0000"}, Qa:U3});
        v += 30;
        Kh() ? q.push({id:"annotate-highlight-plugin-start-presentation", title:"Present to student devices", className:"extension_icon extension_icon-start_presentation_j", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", color:"#000000"}, Qa:wU,}) : q.push({id:"annotate-highlight-plugin-capture-tab", title:"Capture", className:"extension_icon extension_icon-capture_tab", style:{height:"26px", width:"26px", marginLeft:"4px", 
        boxSizing:"border-box", position:"absolute", top:B, left:v + "px", color:"#000000"}, Qa:MG,});
        v += 30;
        q.push({id:"annotate-highlight-plugin-show-hide", title:Rh(M, "Show/Hide annotations"), className:"extension_icon extension_icon-show_annotations", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", color:"#000000"}, Qa:W.B,});
        v += 30;
        q.push({id:"annotate-highlight-plugin-save-annotations", title:"Save annotations", className:"extension_icon extension_icon-save_annotations", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", color:"#000000"}, Qa:xU,});
        v += 30;
        q.push({id:"annotate-highlight-plugin-clear-all", title:Rh(M, "Delete annotations"), className:"extension_icon extension_icon-delete", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", color:"#000000"}, Qa:NB.o,});
        v += 30;
        q.push({id:"annotate-highlight-plugin-close", title:"Minimize", className:"extension_icon extension_icon-minimize", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", color:"#000000"}, Qa:S3,});
        q.push({id:"annotate-highlight-plugin-more-option", title:"More", className:"extension_icon extension_icon-more_options", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + 30 + "px", color:"#000000"}, Qa:V3,});
        B = "34px";
        v = 30;
        q.push({id:"annotate-highlight-plugin-mouse", title:Rh(M, "Select"), className:"extension_icon extension_icon-mouse", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", color:"#000000"}, Qa:Fl,});
        v += 30;
        q.push({id:"annotate-highlight-plugin-laser", title:Rh(M, "Laser"), className:"extension_icon extension_icon-laser", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", color:"#000000"}, Qa:fU,});
        v += 30;
        q.push({id:"annotate-highlight-plugin-pen", title:Rh(M, "Pen"), className:"extension_icon extension_icon-pen", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", color:"#000000"}, Qa:cU,});
        v += 30;
        q.push({id:"annotate-highlight-plugin-highlighter", title:Rh(M, "Highlighter"), className:"extension_icon extension_icon-highlighter", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", color:"#000000"}, Qa:dU,});
        v += 30;
        q.push({id:"annotate-highlight-plugin-eraser", title:Rh(M, "Eraser"), className:"extension_icon extension_icon-eraser", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", color:"#000000"}, Qa:eU,});
        v += 30;
        q.push({id:"annotate-highlight-plugin-text-highlight", title:"Text highlighter", className:"extension_icon extension_icon-text_highlighter", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", color:"#000000"}, Qa:yU,});
        v += 30;
        q.push({id:"annotate-highlight-plugin-text", title:"Text", className:"extension_icon extension_icon-text", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", color:"#000000"}, Qa:zU,});
        q.push({id:"annotate-highlight-plugin-math-text", title:"Equation editor", className:"extension_icon extension_icon-math_text", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", display:"none", color:"#000000"}, Qa:AU,});
        q.push({id:"annotate-highlight-plugin-line", title:"Line", className:"extension_icon extension_icon-line", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", display:"none", color:"#000000"}, Qa:BU,});
        q.push({id:"annotate-highlight-plugin-ellipse", title:"Ellipse", className:"extension_icon extension_icon-ellipse", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", display:"none", color:"#000000"}, Qa:CU,});
        q.push({id:"annotate-highlight-plugin-rectangle", title:"Rectangle", className:"extension_icon extension_icon-rectangle", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", display:"none", color:"#000000"}, Qa:DU,});
        q.push({id:"annotate-highlight-plugin-comment", title:"Add a comment", className:"extension_icon extension_icon-comments", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", display:"none", color:"#000000"}, Qa:RG});
        q.push({id:"annotate-highlight-plugin-Assessment", title:"Add interactive questions", className:"extension_icon extension_icon-add_assessment", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:B, left:v + "px", display:"none", color:"#000000"}, Qa:W.ib});
        Da = hk({parent:document.body, id:"annotate-plugin-annotation-toolbar", className:"annotate-plugin-box-sizing-content annotate-no-print ", style:{position:"fixed", backgroundColor:"rgb(255,255,255)", zIndex:Yj, padding:"4px", border:"1px solid #c0c0c0", display:"none", boxShadow:"0 3px 4px 0 rgba(0, 0, 0, 0.14), 0 3px 3px -2px rgba(0, 0, 0, 0.2), 0 1px 8px 0 rgba(0, 0, 0, 0.12)", fontSize:0}, buttons:q});
        Up.o = Da;
        Up.B = tg;
        q = [];
        v = 4;
        q.push({id:"annotate-highlight-plugin-stop-recording", title:"Stop recording", className:"extension_icon extension_icon-recording_stop", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:"4px", left:v + "px", color:"#FF0000"}, Qa:Rm});
        v += 30;
        q.push({id:"annotate-highlight-plugin-pause-recording", title:"Pause recording", className:"extension_icon extension_icon-recording_pause", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:"4px", left:v + "px", color:"#FF0000"}, Qa:SG});
        v += 30;
        q.push({id:"annotate-highlight-plugin-recording-duration", title:"Recording duration", innerHTML:"00:00", style:{height:"26px", lineHeight:"26px", width:"65px", textAlign:"center", marginLeft:"4px", fontSize:"16px", boxSizing:"border-box", position:"absolute", top:"4px", left:v + "px", textOverflow:"ellipsis", overflow:"hidden", whiteSpace:"nowrap", color:"#000000", cursor:"default"}, Qa:null});
        v += 65;
        q.push({id:"annotate-highlight-plugin-recording-mic", title:"Mute", className:"extension_icon extension_icon-mic", style:{height:"26px", width:"26px", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:"4px", left:v + "px", color:"#000000"}, Qa:TG});
        v += 30;
        q.push({id:"annotate-highlight-plugin-recording-mic-volume-bar", title:"Mic volume", innerHTML:"", style:{height:"26px", width:"4px", backgroundColor:"#a4d26f", boxSizing:"border-box", position:"absolute", top:"4px", left:v + "px", cursor:"default"}, Qa:null});
        v += 4;
        B = v + "px";
        Vb.yB = v;
        q.push({id:"annotate-highlight-plugin-recording-webcam", title:"Hide", className:"extension_icon extension_icon-webcam_on", style:{height:"26px", width:"26px", display:"none", marginLeft:"4px", boxSizing:"border-box", position:"absolute", top:"4px", left:v + 4 + "px", color:"#000000"}, Qa:EU});
        te = hk({parent:document.body, id:"annotate-highlight-plugin-recording-toolbar", className:"annotate-plugin-box-sizing-content", style:{position:"fixed", backgroundColor:"rgb(255,255,255)", zIndex:Yj, height:"26px", width:B, padding:"4px", border:"1px solid #c0c0c0", display:"none", boxShadow:"0 3px 4px 0 rgba(0, 0, 0, 0.14), 0 3px 3px -2px rgba(0, 0, 0, 0.2), 0 1px 8px 0 rgba(0, 0, 0, 0.12)", boxSizing:"content-box", fontSize:0}, buttons:q});
        q = [];
        q.push({id:"annotate-highlight-plugin-font-family", title:"Font", innerHTML:Wt, style:{height:"26px", width:"80px", "float":"left", boxSizing:"border-box", fontSize:"16px", textAlign:"center", fontFamily:Wt, textOverflow:"ellipsis", overflow:"hidden", whiteSpace:"nowrap", lineHeight:"26px", color:"#000000",}, Qa:W3,});
        q.push({id:"annotate-highlight-plugin-font-size", title:"Font size", innerHTML:Y.Rg, style:{height:"26px", width:"26px", marginLeft:"4px", "float":"left", boxSizing:"border-box", fontSize:"16px", textAlign:"center", lineHeight:"26px", outline:"0px solid transparent", color:"#000000", fontFamily:"Arial",}, Qa:X3,});
        q.push({id:"annotate-highlight-plugin-bold", title:"Bold", className:"extension_icon extension_icon-bold", style:{height:"26px", width:"26px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", color:"#000000",}, Qa:Y3,});
        q.push({id:"annotate-highlight-plugin-italic", title:"Italic", className:"extension_icon extension_icon-italics", style:{height:"26px", width:"26px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", color:"#000000",}, Qa:Z3,});
        q.push({id:"annotate-highlight-plugin-underline", title:"Underline", className:"extension_icon extension_icon-underline", style:{height:"26px", width:"26px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", color:"#000000",}, Qa:$3,});
        q.push({id:"annotate-highlight-plugin-textcolor", title:"Text color", className:"extension_icon extension_icon-text_color", style:{height:"26px", width:"26px", "float":"left", marginLeft:"4px", boxSizing:"border-box", borderBottom:"4px solid " + Y.s, position:"relative", color:"#000000",}, Qa:a4,});
        q.push({id:"annotate-highlight-plugin-fillcolor", title:"Fill color", className:"extension_icon extension_icon-text_fill_color", style:{height:"26px", width:"26px", "float":"left", marginLeft:"4px", boxSizing:"border-box", borderBottom:"4px solid " + ("" == Y.o ? "#ffffff" : Y.o), position:"relative", color:"#000000",}, Qa:b4,});
        q.push({id:"annotate-highlight-plugin-keyboard", title:"Math Keyboard", className:"extension_icon extension_icon-new_keyboard", style:{height:"26px", width:"26px", "float":"left", marginLeft:"4px", boxSizing:"border-box", position:"relative", color:"#000000",}, Qa:x,});
        ne = hk({parent:document.body, id:"annotate-plugin-annotation-text-format-toolbar", style:{position:"fixed", backgroundColor:"rgb(255,255,255)", zIndex:Yj, padding:"4px", border:"1px solid #c0c0c0", display:"none", boxShadow:"0 3px 4px 0 rgba(0, 0, 0, 0.14), 0 3px 3px -2px rgba(0, 0, 0, 0.2), 0 1px 8px 0 rgba(0, 0, 0, 0.12)", boxSizing:"border-box", fontSize:0, fontWeight:"normal"}, buttons:q});
        c4();
        d4();
        q = Up;
        q.i || (q.i = new z3());
        null == q.j && (q.j = new b2());
        q3(q);
        q = MG;
        v = RG;
        NA = 196;
        OA = 0;
        B = [];
        var E = 0;
        B.push({id:"annotate-highlight-plugin-popup-undo", title:"Undo", icon:"extension_icon extension_icon-undo", label:"Undo (Ctrl + Z)", style:{height:"48px", width:NA + "px", boxSizing:"border-box", position:"absolute", top:E + "px", left:"0px", display:"block", color:"#000000"}, Qa:e4});
        OA += 48;
        E += 48;
        B.push({id:"annotate-highlight-plugin-popup-redo", title:"Redo", icon:"extension_icon extension_icon-redo", label:"Redo (Ctrl + Y)", style:{height:"48px", width:NA + "px", boxSizing:"border-box", position:"absolute", top:E + "px", left:"0px", display:"block", color:"#000000"}, Qa:f4});
        OA += 48;
        E += 48;
        B.push(PA(E + "px", "annotate-highlight-plugin-popup-undo-redo-seprator"));
        OA += 1;
        E += 1;
        B.push({id:"annotate-highlight-plugin-popup-tools-label", label:"More tools", style:{height:"48px", width:NA + "px", boxSizing:"border-box", position:"absolute", top:E + "px", left:"0px", display:"block", cursor:"default"},});
        OA += 48;
        E += 48;
        B.push({id:"annotate-highlight-plugin-popup-line", title:"Line", icon:"extension_icon extension_icon-line", style:{height:"48px", width:"48px", boxSizing:"border-box", position:"absolute", top:E + "px", left:"20px", display:"block", color:"#000000"}, Qa:BU});
        B.push({id:"annotate-highlight-plugin-popup-rectangle", title:"Rectangle", icon:"extension_icon extension_icon-rectangle", style:{height:"48px", width:"48px", boxSizing:"border-box", position:"absolute", top:E + "px", left:"68px", display:"block", color:"#000000"}, Qa:DU});
        B.push({id:"annotate-highlight-plugin-popup-ellipse", title:"Ellipse", icon:"extension_icon extension_icon-ellipse", style:{height:"48px", width:"48px", boxSizing:"border-box", position:"absolute", top:E + "px", left:"116px", display:"block", color:"#000000"}, Qa:CU});
        OA += 48;
        E += 48;
        B.push({id:"annotate-highlight-plugin-popup-text", title:"Text", icon:"extension_icon extension_icon-text", style:{height:"48px", width:"48px", boxSizing:"border-box", position:"absolute", top:E + "px", left:"20px", display:"block", color:"#000000"}, Qa:zU});
        B.push({id:"annotate-highlight-plugin-popup-math-text", title:"Equation editor", icon:"extension_icon extension_icon-math_text", style:{height:"48px", width:"48px", boxSizing:"border-box", position:"absolute", top:E + "px", left:"68px", display:"block", color:"#000000"}, Qa:AU});
        B.push({id:"annotate-highlight-plugin-popup-media", title:"Add media", icon:"extension_icon extension_icon-add_media", style:{height:"48px", width:"48px", boxSizing:"border-box", position:"absolute", top:E + "px", left:"116px", display:"block", color:"#000000"}, Qa:W.Va});
        OA += 48;
        E += 48;
        B.push({id:"annotate-highlight-plugin-popup-Timer", title:"Timer", icon:"extension_icon extension_icon-clock", style:{height:"48px", width:"48px", boxSizing:"border-box", position:"absolute", top:E + "px", left:"20px", display:"block", color:"#000000"}, Qa:W.Wb});
        let K = 20;
        Kh() && (K += 48, B.push({id:"annotate-highlight-plugin-capture-tab", title:"Capture", icon:"extension_icon extension_icon-capture_tab", style:{height:"48px", width:"48px", boxSizing:"border-box", position:"absolute", top:E + "px", left:K + "px", display:"block"}, Qa:q,}));
        K += 48;
        B.push({id:"annotate-highlight-plugin-popup-comment", title:"Add a comment", icon:"extension_icon extension_icon-comments", style:{height:"48px", width:"48px", boxSizing:"border-box", position:"absolute", top:E + "px", left:K + "px", display:"block", color:"#000000"}, Qa:v});
        68 < K ? (OA += 48, E += 48, K = 20) : K += 48;
        B.push({id:"annotate-highlight-plugin-popup-screen-shade", title:"Screen Shade", icon:"extension_icon extension_icon-screen_shade", style:{height:"48px", width:"48px", boxSizing:"border-box", position:"absolute", top:E + "px", left:K + "px", display:"block", color:"#000000"}, Qa:W.lb});
        OA += 48;
        Kh() && (68 < K ? (OA += 48, E += 48, K = 20) : K += 48, B.push({id:"annotate-highlight-plugin-popup-whiteboard", title:"New drawing", icon:"extension_icon extension_icon-page", style:{height:"48px", width:"48px", boxSizing:"border-box", position:"absolute", top:E + "px", left:K + "px", display:"block", color:"#000000"}, Qa:W.Lc}));
        E += 48;
        B.push(PA(E + "px", "annotate-highlight-plugin-popup-tools-seprator"));
        OA += 1;
        E += 1;
        B.push({id:"annotate-highlight-plugin-popup-student-notes", title:"Student notes", label:"Student notes", icon:"extension_icon extension_icon-student_notes", style:{height:"48px", width:NA + "px", boxSizing:"border-box", position:"absolute", top:E + "px", left:"0px", display:"block", color:"#000000"}, Qa:W.M});
        OA += 48;
        E += 48;
        B.push(PA(E + "px", "annotate-highlight-plugin-popup-student-notes-seprator"));
        OA += 1;
        E += 1;
        Kh() && (B.push({id:"annotate-highlight-plugin-popup-share", title:"Share annotations", label:"Share annotations", icon:"extension_icon extension_icon-shareable_link", style:{height:"48px", width:NA + "px", boxSizing:"border-box", position:"absolute", top:E + "px", left:"0px", display:"block", color:"#000000"}, Qa:W.Dd}), OA += 48, E += 48, B.push(PA(E + "px", "annotate-highlight-plugin-popup-student-notes-seprator")), OA += 1, E += 1);
        B.push({id:"annotate-highlight-plugin-popup-export", title:"Export annotations", label:"Export annotations", icon:"extension_icon extension_icon-export", style:{height:"48px", width:NA + "px", boxSizing:"border-box", position:"absolute", top:E + "px", left:"0px", display:"block", color:"#000000"}, Qa:Mw.m});
        OA += 48;
        E += 48;
        B.push(PA(E + "px", "annotate-highlight-plugin-popup-export-seprator"));
        OA += 1;
        B.push({id:"annotate-highlight-plugin-popup-close", title:"Hide toolbar", icon:"extension_icon extension_icon-close", label:"Hide toolbar", style:{height:"48px", width:NA + "px", boxSizing:"border-box", position:"absolute", top:E + 1 + "px", left:"0px", display:"block", color:"#000000"}, Qa:g4});
        OA += 48;
        DA = jk({parent:document.body, id:"annotate-plugin-more-option-popup", style:{position:"fixed", backgroundColor:"rgb(255,255,255)", zIndex:2147483647, border:"1px solid #c0c0c0", display:"none", boxSizing:"content-box", fontSize:"16px", fontWeight:"normal"}, buttons:B});
        JA = 236;
        KA = 0;
        q = [];
        v = 0;
        q.push({id:"annotate-highlight-plugin-recording-popup-audio-note", title:"Voice note", icon:null, label:"Voice note", style:{height:"48px", width:"204px", boxSizing:"border-box", position:"absolute", top:v + "px", left:"0px"}, Qa:bs.i});
        KA += 48;
        v += 48;
        q.push({id:"annotate-highlight-plugin-recording-popup-video-clip", title:"Camera recording", icon:null, label:"Camera recording", style:{height:"48px", width:"204px", boxSizing:"border-box", position:"absolute", top:v + "px", left:"0px"}, Qa:bs.m});
        KA += 48;
        v += 48;
        q.push({id:"annotate-highlight-plugin-recording-popup-record-screen", title:"Screen recording", icon:null, label:"Screen recording", style:{height:"48px", width:"204px", boxSizing:"border-box", position:"absolute", top:v + "px", left:"0px"}, Qa:bs.j});
        KA += 48;
        q.push({id:"annotate-highlight-plugin-recording-popup-record-screen-webcam", title:"Screen + Camera recording", icon:null, label:"Screen + Camera recording", style:{height:"48px", width:"204px", boxSizing:"border-box", position:"absolute", top:v + 48 + "px", left:"0px"}, Qa:bs.l});
        KA += 48;
        EA = jk({parent:document.body, id:"annotate-plugin-recording-option-popup", style:{position:"fixed", backgroundColor:"rgb(255,255,255)", width:JA + "px", zIndex:2147483647, border:"1px solid #c0c0c0", display:"none", boxSizing:"content-box", fontSize:"16px", fontWeight:"normal"}, buttons:q});
        iB();
        LA = 236;
        MA = 0;
        q = [];
        v = 0;
        q.push({id:"annotate-highlight-plugin-livefeed-popup-attandees", title:"Attendees", icon:null, label:"Attendees", style:{height:"48px", width:"236px", boxSizing:"border-box", position:"absolute", top:v + "px", left:"0px"}, Qa:h4});
        MA += 48;
        v += 48;
        q.push({id:"annotate-highlight-plugin-livefeed-popup-pin", title:"Livestream Pin", icon:null, label:"Pin:", style:{height:"48px", width:"236px", boxSizing:"border-box", position:"absolute", top:v + "px", left:"0px"}, Qa:i4});
        MA += 48;
        v += 48;
        q.push({id:"annotate-highlight-plugin-livefeed-popup-student-notes", title:"Enable notes", icon:null, label:"Enable notes", style:{height:"48px", width:"236px", boxSizing:"border-box", position:"absolute", top:v + "px", left:"0px"}, Qa:j4,});
        MA += 48;
        q.push({id:"annotate-highlight-plugin-livefeed-popup-stop", title:"End Livestream", icon:null, label:"End Livestream", style:{height:"48px", width:"236px", boxSizing:"border-box", position:"absolute", top:v + 48 + "px", left:"0px"}, Qa:k4});
        MA += 48;
        FA = jk({parent:document.body, id:"annotate-plugin-livefeed-option-popup", style:{position:"fixed", backgroundColor:"rgb(255,255,255)", width:LA + "px", zIndex:2147483647, border:"1px solid #c0c0c0", display:"none", boxSizing:"content-box", fontSize:"16px"}, buttons:q});
      }
      Na || !(!Pk() || Gk(P) || Qk() || Pk() && Ta && Ta.hd() && "" != Ta.hd().strBaseWebPageUrl) ? FU || (Da.style.display = "block", te && Vb && Vb.Xj && Vb.cg && (te.style.display = "block")) : (Da.style.display = "block", te && Vb && Vb.Xj && Vb.cg && (te.style.display = "block"));
      uU(m);
      bo(Ht);
      Kb(!1);
      Ty();
      (m = h && !(1 >= ki.g)) || (m = Ao, m.C ? (q = m.C.cb(), m = "rectangle" == q || "ellipse" == q || "line" == q ? m.C.It() : !1) : m = !1);
      m ? (po(), Wy(), Xy(), ek()) : Jf();
      ud ? sU(h) : qU();
      FR(W);
      gc(wa);
      pc(wa);
      UG();
    }
  }
  function vl(h) {
    Da && (Da.style.display = "none", Dq(), fh(), Mg(), sf(), Lp(!0), bo(Ht), UG(), Qa && Qa.ja(), s3(), h && ji(0, 1), sk(te, !1));
  }
  function yU() {
    Ip();
    W.Ha || (Ql.Ja() && to(), ii("10.7"), tf(), GU(), document.getElementById("annotate-highlight-plugin-text-highlight").style.backgroundColor = "#C0C0C0", Ro.eL(), m1(), ji(5, 1), Ro.rg(), O0(W), bj && -1 != wa.indexOf("docs.google.com/presentation/d/") && iC(), ri());
  }
  function fU() {
    Ip();
    ii("10.6");
    if (ud) {
      em(!1), Jf();
    } else {
      tf();
      var h = "-webkit-image-set( url(" + window.chrome.runtime.getURL("images/laser.png") + ") 1x, url(" + window.chrome.runtime.getURL("images/laser64.png") + ") 2x) 28 4, default";
      Lg.g && (Lg.g.style.cursor = h);
      b1(Ao, h);
      Na && Z.Ea && (Z.Ea.style.cursor = h);
      document.getElementById("annotate-highlight-plugin-laser").style.backgroundColor = "#C0C0C0";
      ji(8, 1);
      O0(W);
      bj && -1 != wa.indexOf("docs.google.com/presentation/d/") && iC();
      Na && (m1(), ri());
    }
  }
  function VG() {
    Jo && (Jo.Vi() && Jo.$h(), Jo.Zk(!1));
    Ko && (Ko.Vi() && Ko.$h(), Ko.Zk(!1));
  }
  function zU() {
    HU(!0, !0);
  }
  function HU(h, m) {
    Ip();
    xG = Jo;
    ii("10.5");
    h && tf();
    Ql.Ja() && to();
    Ry = !m;
    QA();
    q2(9);
    xG.Zk(!0);
    ji(9, 1);
    ud && (Y.s = hi.M[0], Y.o = "", Y.Rg = "20", Y.g = Y.J[0]);
    po();
    O0(W);
    bj && -1 != wa.indexOf("docs.google.com/presentation/d/") && iC();
    Na && (m1(), ri());
  }
  function IU(h) {
    "annotate-highlight-plugin-mouse annotate-highlight-plugin-pen annotate-highlight-plugin-highlighter annotate-highlight-plugin-eraser annotate-highlight-plugin-text annotate-highlight-plugin-math-text annotate-highlight-plugin-laser annotate-highlight-plugin-line annotate-highlight-plugin-ellipse annotate-highlight-plugin-rectangle annotate-highlight-plugin-Assessment".split(" ").forEach(q => {
      if (q = document.getElementById(q)) {
        q.style.backgroundColor = "";
      }
    });
    var m = document.getElementById("annotate-highlight-plugin-text-highlight");
    m && !W.Ha && (m.style.backgroundColor = "");
    n1();
    b1(Ao, "auto");
    d1(Ao, "auto");
    Vk(P) && (Z.Ea.style.cursor = null);
    Ro.Py();
    Jo && h && (Jo.Vi() && Jo.$h(), Jo.Zk(!1));
    Ko && !h && (Ko.Vi() && Ko.$h(), Ko.Zk(!1));
    no();
    window.removeEventListener("clickup", Sy, {capture:!0});
    window.removeEventListener("pointerdown", Om, {capture:!0});
    window.removeEventListener("pointercancel", Om, {});
    Xo && null != Xo.g && EC(!1);
    Dq();
    fh();
    Mg();
    sf();
    si() && hd({type:"ANNOTATE_PDF_DESELECT_ALL_TOOLS"});
  }
  function AU() {
    JU(!0, !0);
  }
  function JU(h, m) {
    Ip();
    QA();
    if (ud) {
      em(!1), Jf();
    } else {
      xG = Ko;
      if (WB) {
        var q = WB, v = xG;
        v && (q.M = v);
      }
      ii("10.5");
      h && tf();
      Ql.Ja() && to();
      Ry = !m;
      q2(13);
      xG.Zk(!0);
      ji(13, 1);
      ud && (Y.s = hi.M[0], Y.o = "", Y.Rg = "20", Y.g = WG[0]);
      po();
      O0(W);
      bj && -1 != wa.indexOf("docs.google.com/presentation/d/") && iC();
      Na && (m1(), ri());
    }
  }
  function RG(h) {
    if (!W.ea) {
      Ip();
      QA();
      tf();
      Ql.Ja() && to();
      var m = GG();
      m && q2(14);
      XG();
      var q = document.getElementById("annotate-highlight-plugin-comment"), v = document.getElementById("annotate-highlight-plugin-popup-comment"), B = document.getElementById("annotate-highlight-plugin-popup-comment-icon"), E = !0;
      q && v && B && (14 == ki.g && !li || !m && !li ? (E = !1, q.className = "extension_reset_css extension_icon extension_icon-hide_comments", q.title = "Show comments", B.className = "extension_reset_css extension_icon extension_icon-hide_comments", v.title = "Show comments", li = !0, sf(), Jf(), ac.ib(), gw("Comments hidden", !1)) : (li && gw("Comments visible", !1), q.className = "extension_reset_css extension_icon extension_icon-comments", q.title = "Hide comments", B.className = "extension_reset_css extension_icon extension_icon-comments", 
      v.title = "Hide comments", li = !1, ac.Wb(), Kh() && m || (E = !1, Jf())));
      m1();
      ii("10.16.8");
      ji(14, 1);
      E ? ac.N() : ac.s();
      Na && (m1(), hd({type:li ? "ANNOTATE_PDF_HIDE_COMMENTS" : "ANNOTATE_PDF_SHOW_COMMENTS", bMousePointer:h && "mouse" == h.pointerType}), Oi(), ri());
    }
  }
  function wU() {
    Ip();
    if (Ns() || KU()) {
      Kn("", "Livestream not supported for local PDF files.", "", "OK", null, null);
    } else {
      if (i2()) {
        Cv = !0, window != window.top && XI(), mw(Ql, !0, !1);
      } else {
        if (lS()) {
          if (Pm()) {
            var h = {type:"ANNOTATE_SLIDE_GET_PRESENTATION_STATE",};
            V && (HR(V, h), V.m = BN);
          } else {
            V && (oR(V) ? XA() : AR(V));
          }
        } else {
          Kh() ? (h = cl(2) ? "Livestream is not available for shared files." : Gq() ? "Livestream is supported only in Slideshow mode." : Ok(P) || Qk() || Ql.Ja() ? "Livestream is not available in Google classroom." : "Livestream is supported for Google Slides and PDFs only.", Kn("", h, "", "OK", null, null)) : Kn("", "Livestream is available for instructor accounts only.", "", "OK", null, null);
        }
      }
    }
  }
  function KU() {
    return sl && sl.length && sl.includes("file://") && ".pdf" == sl.substring(sl.lastIndexOf(".")) ? !0 : !1;
  }
  function k4(h) {
    h.preventDefault();
    cB();
    Pm() ? V && (V.m = BN, QR(V)) : V && oR(V) && QR(V);
  }
  function eU(h) {
    Ip();
    ii("10.4");
    tf();
    Ql.Ja() && to();
    b1(Ao, "-webkit-image-set( url(" + window.chrome.runtime.getURL("images/eraser.png") + ") 1x, url(" + window.chrome.runtime.getURL("images/eraser64.png") + ") 2x) 16 24, default");
    Na && Z.Ea && (Z.Ea.style.cursor = "-webkit-image-set( url(" + window.chrome.runtime.getURL("images/eraser.png") + ") 1x, url(" + window.chrome.runtime.getURL("images/eraser64.png") + ") 2x) 16 24, default");
    document.getElementById("annotate-highlight-plugin-eraser").style.backgroundColor = "#C0C0C0";
    ji(4, 1);
    O0(W);
    bj && -1 != wa.indexOf("docs.google.com/presentation/d/") && iC();
    Hq(h);
    Na && (m1(), ri());
  }
  function dU(h) {
    Ip();
    ii("10.3");
    tf();
    Ql.Ja() && to();
    b1(Ao, "-webkit-image-set( url(" + window.chrome.runtime.getURL("images/highlighter.png") + ") 1x, url(" + window.chrome.runtime.getURL("images/highlighter64.png") + ") 2x) 16 28, default");
    document.getElementById("annotate-highlight-plugin-highlighter").style.backgroundColor = "#C0C0C0";
    Na && Z.Ea && (Z.Ea.style.cursor = "-webkit-image-set( url(" + window.chrome.runtime.getURL("images/highlighter.png") + ") 1x, url(" + window.chrome.runtime.getURL("images/highlighter64.png") + ") 2x) 16 28, default");
    ji(3, 1);
    if (ud) {
      var m = hi;
      m.C = 0;
      m.J = m.Jb[m.C];
      m.ib = m.Wb[3];
      m.Va = m.ea[3];
    }
    ld || LU();
    O0(W);
    bj && -1 != wa.indexOf("docs.google.com/presentation/d/") && iC();
    Hq(h);
    Na && (m1(), ri());
  }
  function cU(h) {
    Ip();
    ii("10.2");
    tf();
    Ql.Ja() && to();
    b1(Ao, "-webkit-image-set( url(" + window.chrome.runtime.getURL("images/pen.png") + ") 1x, url(" + window.chrome.runtime.getURL("images/pen64.png") + ") 2x) 16 28, default");
    Na && Z.Ea && (Z.Ea.style.cursor = "-webkit-image-set( url(" + window.chrome.runtime.getURL("images/pen.png") + ") 1x, url(" + window.chrome.runtime.getURL("images/pen64.png") + ") 2x) 16 28, default");
    document.getElementById("annotate-highlight-plugin-pen").style.backgroundColor = "#C0C0C0";
    ji(2, 1);
    if (ud) {
      var m = hi;
      m.B = 0;
      m.G = m.Gb[m.B];
      m.lb = m.Db[2];
      m.zw = m.ea[8];
    }
    ld || MU();
    O0(W);
    bj && -1 != wa.indexOf("docs.google.com/presentation/d/") && iC();
    Hq(h);
    Na && (m1(), ri());
  }
  function Jf() {
    tf();
    window.addEventListener("pointerdown", Om, {capture:!0, passive:!1});
    window.addEventListener("pointercancel", Om, {passive:!1});
    window.addEventListener("pointerup", Sy, {capture:!0, passive:!1});
    Xo && null != Xo.g && EC(!0);
    var h = document.getElementById("annotate-highlight-plugin-mouse");
    h && (h.style.backgroundColor = "#C0C0C0");
    m1();
    ji(1, 1);
    ri();
  }
  function l4() {
    9 != ki.g && (IU(!1), HU(!1, !1));
    YG();
  }
  function nU() {
    var h = Ao.g;
    let m = h.cb();
    if ("rectangle" == m || "ellipse" == m || "line" == m) {
      h = h.Is(), Qa.setData(h), Qa.pb(), Vt(), h = document.getElementById("annotate-highlight-plugin-mouse"), "mouse" == m ? (sk(h, !0), h.style.backgroundColor = "#C0C0C0") : h.style.backgroundColor = "", h = document.getElementById("annotate-highlight-plugin-line"), "line" == m ? (sk(h, !0), h.style.backgroundColor = "#C0C0C0") : sk(h, !1), sk(document.getElementById("annotate-highlight-plugin-text"), !1), h = document.getElementById("annotate-highlight-plugin-ellipse"), "ellipse" == m ? (sk(h, 
      !0), h.style.backgroundColor = "#C0C0C0") : sk(h, !1), h = document.getElementById("annotate-highlight-plugin-rectangle"), "rectangle" == m ? (sk(h, !0), h.style.backgroundColor = "#C0C0C0") : sk(h, !1), sk(document.getElementById("annotate-highlight-plugin-math-text"), !1), sk(document.getElementById("annotate-highlight-plugin-Assessment"), !1), YG(), tg();
    }
  }
  function m4() {
    13 != ki.g && (IU(!0), JU(!1, !1));
    YG();
  }
  function Fl() {
    Ip();
    ii("10.1");
    Jf();
    Jo.$M(l4, Y.m);
    Ko.ZM(m4, Y.m);
  }
  function tf() {
    "annotate-highlight-plugin-mouse annotate-highlight-plugin-pen annotate-highlight-plugin-highlighter annotate-highlight-plugin-eraser annotate-highlight-plugin-text annotate-highlight-plugin-math-text annotate-highlight-plugin-laser annotate-highlight-plugin-line annotate-highlight-plugin-ellipse annotate-highlight-plugin-rectangle annotate-highlight-plugin-comment annotate-highlight-plugin-Assessment".split(" ").forEach(m => {
      if (m = document.getElementById(m)) {
        m.style.backgroundColor = "";
      }
    });
    var h = document.getElementById("annotate-highlight-plugin-text-highlight");
    h && !W.Ha && (h.style.backgroundColor = "");
    l();
    n1();
    d1(Ao, "auto");
    b1(Ao, "auto");
    Vk(P) && (Z.Ea.style.cursor = null);
    Ro.Py();
    ac.s();
    VG();
    Xo && LC(Xo);
    no();
    Pz.Tn(null);
    window.removeEventListener("clickup", Sy, {capture:!0});
    window.removeEventListener("pointerdown", Om, {capture:!0});
    window.removeEventListener("pointercancel", Om, {});
    r3(Up, !1);
    Xo && null != Xo.g && EC(!1);
    Dq();
    fh();
    Mg();
    sf();
    Na && hd({type:"ANNOTATE_PDF_DESELECT_ALL_TOOLS"});
  }
  function po() {
    if ((9 == ki.g || 13 == ki.g) && ne) {
      ne.style.display = "block";
      ne.style.top = parseInt(Da.style.top) + 66 + "px";
      ne.style.left = "0px";
      if (13 == ki.g) {
        var h = document.getElementById("annotate-highlight-plugin-bold"), m = document.getElementById("annotate-highlight-plugin-italic"), q = document.getElementById("annotate-highlight-plugin-underline"), v = document.getElementById("annotate-highlight-plugin-keyboard");
        document.getElementById("annotate-highlight-plugin-font-family").style.display = "none";
        h.style.display = "none";
        m.style.display = "none";
        q.style.display = "none";
        v.style.display = "block";
        Ko.wh(Y.i, Y.j, Y.l, Y.B, Y.C, Y.u, Wt, Y.m);
        Y.m(Y.i, Y.j, Y.l, Y.B, Y.C, Y.u, Wt, !0);
      } else {
        h = document.getElementById("annotate-highlight-plugin-bold"), m = document.getElementById("annotate-highlight-plugin-italic"), q = document.getElementById("annotate-highlight-plugin-underline"), v = document.getElementById("annotate-highlight-plugin-keyboard"), document.getElementById("annotate-highlight-plugin-font-family").style.display = "block", h.style.display = "block", m.style.display = "block", q.style.display = "block", v.style.display = "none", Jo.wh(Y.i, Y.j, Y.l, Y.s, Y.o, Y.Rg, 
        Y.g, Y.m), Y.m(Y.i, Y.j, Y.l, Y.s, Y.o, Y.Rg, Y.g, !1);
      }
      h = parseInt(Da.style.left);
      h + parseFloat(getComputedStyle(ne).width) + 10 > Math.floor(window.visualViewport.offsetLeft + window.visualViewport.width) && (h = window.visualViewport.offsetLeft + Math.floor(window.visualViewport.width - parseFloat(getComputedStyle(ne).width)));
      ne.style.left = h + "px";
      tg();
      Na && hd({type:"ANNOTATE_PDF_COLOR_TOOLBAR_ACTIVE", toolId:ki.g, colorToolbarRect:ne.getBoundingClientRect()});
    }
  }
  function NU() {
    let h = document.getElementById("annotate-highlight-plugin-font-size").innerHTML;
    if (2 < h.length) {
      h = h.substr(0, 2);
      document.getElementById("annotate-highlight-plugin-font-size").innerHTML = h;
      var m = document.createRange();
      m.selectNodeContents(document.getElementById("annotate-highlight-plugin-font-size"));
      m.collapse(!1);
      var q = window.getSelection();
      q.removeAllRanges();
      q.addRange(m);
    }
    Up.i && y3(h);
    13 == ki.g ? (Y.u = h, Ko.wh(Y.i, Y.j, Y.l, Y.B, Y.C, Y.u, Y.g, Y.m), Ko.Jr().Oh()) : (Y.Rg = h, Jo.wh(Y.i, Y.j, Y.l, Y.s, Y.o, Y.Rg, Y.g, Y.m), Jo.Bn());
  }
  function OU() {
  }
  function PU() {
    var h = document.createRange();
    h.selectNodeContents(document.getElementById("annotate-highlight-plugin-font-size"));
    var m = window.getSelection();
    m.removeAllRanges();
    m.addRange(h);
  }
  function Wy() {
    var h = Up.i;
    if (ZG && h) {
      var m = parseInt(ne.style.top) + 26 + 8, q = parseInt(Da.style.left);
      q + h.Ra() + 2 > Math.floor(window.visualViewport.width) && (q = Math.floor(window.visualViewport.width) - h.Ra() - 2);
      h.ga(q, m);
      h.Sa(!0);
      h = document.getElementById("annotate-highlight-plugin-font-size");
      h.style.backgroundColor = "#C0C0C0";
      h.style.cursor = "text";
      m = h.contentEditable;
      h.contentEditable = "true";
      h.focus();
      "false" == m && (m = document.createRange(), m.selectNodeContents(h), q = window.getSelection(), q.removeAllRanges(), q.addRange(m));
      h.addEventListener("input", NU);
      h.addEventListener("keypress", OU);
      h.addEventListener("dblclick", PU);
    }
  }
  function Xy() {
    if (Yy && ni) {
      ni.style.display = "block";
      ni.style.top = parseInt(ne.style.top) + 26 + 8 + "px";
      ni.style.left = "0px";
      var h = parseInt(Da.style.left);
      h + parseInt(ni.getBoundingClientRect().width) + 2 > Math.floor(window.visualViewport.width) && (h = Math.floor(window.visualViewport.width) - parseInt(ni.getBoundingClientRect().width) - 2);
      ni.style.left = h + "px";
      document.getElementById("annotate-highlight-plugin-font-family").style.backgroundColor = "#C0C0C0";
    }
  }
  function Vt() {
    Qa.ga(0, parseInt(Da.style.top) + 66);
    var h = parseInt(Da.style.left), m = parseInt(getComputedStyle(Da).width), q = parseInt(getComputedStyle(Qa.el).width), v = (q - m - 10) / 2, B = Math.floor(window.visualViewport.width) - q - 2 + v;
    h >= v && h < B && (h -= v);
    h >= B && (h -= q - m - 10);
    Qa.Nd(h);
  }
  function XG() {
    if (uf && !ld && GG() && Kh() && (!Na || !ac.C(Z.u))) {
      for (var h = document.getElementsByClassName("annotate-highlight-plugin-comment-toolbar-button"), m = 0; m < h.length; m++) {
        h[m].style.borderBottom = "0";
      }
      m = hi.o;
      if (-1 != m.Za) {
        if (0 > m.Za || m.Za >= m.Cc.length) {
          m.Za = 0, m.qa = m.Cc[m.Za];
        }
        h[m.Za].style.borderBottom = Y.v;
      }
      uf.style.display = "block";
      uf.style.top = parseInt(Da.style.top) + 66 + "px";
      uf.style.left = "0px";
      h = parseInt(Da.style.left);
      h + parseInt(getComputedStyle(uf).width) > Math.floor(window.visualViewport.width) && (h = Math.floor(window.visualViewport.width) - parseInt(getComputedStyle(uf).width));
      uf.style.left = h + "px";
      tg();
      Na && hd({type:"ANNOTATE_PDF_COLOR_TOOLBAR_ACTIVE", toolId:14, colorToolbarRect:uf.getBoundingClientRect()});
    }
  }
  function QU() {
    Qa && (Qa.setData(hi.j), Qa.pb(), Vt(), tg(), Na && hd({type:"ANNOTATE_PDF_COLOR_TOOLBAR_ACTIVE", toolId:10, colorToolbarRect:Qa.getBoundingClientRect()}));
  }
  function RU() {
    Qa && (Qa.setData(hi.g), Qa.pb(), Vt(), tg(), Na && hd({type:"ANNOTATE_PDF_COLOR_TOOLBAR_ACTIVE", toolId:11, colorToolbarRect:Qa.getBoundingClientRect()}));
  }
  function SU() {
    Qa && (Qa.setData(hi.i), Qa.pb(), Vt(), tg(), Na && hd({type:"ANNOTATE_PDF_COLOR_TOOLBAR_ACTIVE", toolId:12, colorToolbarRect:Qa.getBoundingClientRect()}));
  }
  function GU() {
    if (Kf && !ld) {
      for (var h = document.getElementsByClassName("annotate-highlight-plugin-texthighlight-toolbar-button"), m = 0; m < h.length; m++) {
        h[m].style.borderBottom = "0";
      }
      m = hi.s;
      if (-1 != m.Za) {
        if (0 > m.Za || m.Za >= m.Cc.length) {
          m.Za = 0, m.qa = m.Cc[m.Za];
        }
        h[m.Za].style.borderBottom = Y.v;
      }
      Kf.style.display = "block";
      Kf.style.top = parseInt(Da.style.top) + 66 + "px";
      Kf.style.left = "0px";
      h = parseInt(Da.style.left);
      h + parseInt(getComputedStyle(Kf).width) > Math.floor(window.visualViewport.width) && (h = Math.floor(window.visualViewport.width) - parseInt(getComputedStyle(Kf).width));
      Kf.style.left = h + "px";
      tg();
    }
  }
  function LU() {
    if (Qa) {
      Qa.setData(hi.l);
      Qa.pb();
      Qa.ga(0, parseInt(Da.style.top) + 66);
      var h = parseInt(Da.style.left), m = parseInt(getComputedStyle(Da).width), q = parseInt(getComputedStyle(Qa.el).width), v = (q - m - 10) / 2, B = Math.floor(window.visualViewport.width) - q - 2 + v;
      h >= v && h < B && (h -= v);
      h >= B && (h -= q - m - 10);
      Qa.Nd(h);
      tg();
      Na && hd({type:"ANNOTATE_PDF_COLOR_TOOLBAR_ACTIVE", toolId:3, colorToolbarRect:Qa.getBoundingClientRect()});
    }
  }
  function MU() {
    if (Qa) {
      Qa.setData(hi.m);
      Qa.pb();
      Qa.ga(0, parseInt(Da.style.top) + 66);
      var h = parseInt(Da.style.left), m = parseInt(getComputedStyle(Da).width), q = parseInt(getComputedStyle(Qa.el).width), v = (q - m - 10) / 2, B = Math.floor(window.visualViewport.width) - q - 2 + v;
      h >= v && h < B && (h -= v);
      h >= B && (h -= q - m - 10);
      Qa.Nd(h);
      tg();
      Na && hd({type:"ANNOTATE_PDF_COLOR_TOOLBAR_ACTIVE", toolId:2, colorToolbarRect:Qa.getBoundingClientRect()});
    }
  }
  function ek() {
    if (!ld) {
      if (2 == ki.g) {
        MU();
      } else {
        if (3 == ki.g) {
          LU();
        } else {
          if (5 == ki.g) {
            GU();
          } else {
            if (12 == ki.g) {
              SU();
            } else {
              if (11 == ki.g) {
                RU();
              } else {
                if (10 == ki.g) {
                  QU();
                } else {
                  if (14 == ki.g) {
                    XG();
                  } else {
                    if (9 == ki.g || 13 == ki.g) {
                      if (Xt) {
                        if (oi) {
                          oi.style.display = "block";
                          oi.style.top = parseInt(ne.style.top) + 26 + 8 + "px";
                          var h = parseInt(ne.style.left);
                          h + parseInt(getComputedStyle(oi).width) + 2 > Math.floor(window.visualViewport.width) && (h = Math.floor(window.visualViewport.width) - parseInt(getComputedStyle(oi).width) - 2);
                          oi.style.left = h + "px";
                          document.getElementById("annotate-highlight-plugin-textcolor").style.backgroundColor = "#C0C0C0";
                          pi && (document.getElementById("annotate-highlight-plugin-fillcolor").style.backgroundColor = "", pi.style.display = "none");
                        }
                      } else {
                        Yt && pi && (pi.style.display = "block", pi.style.top = parseInt(ne.style.top) + 26 + 8 + "px", h = parseInt(ne.style.left), h + parseInt(getComputedStyle(pi).width) + 2 > Math.floor(window.visualViewport.width) && (h = Math.floor(window.visualViewport.width) - parseInt(getComputedStyle(pi).width) - 2), pi.style.left = h + "px", document.getElementById("annotate-highlight-plugin-fillcolor").style.backgroundColor = "#C0C0C0", oi && (document.getElementById("annotate-highlight-plugin-textcolor").style.backgroundColor = 
                        "", oi.style.display = "none"));
                      }
                    } else {
                      15 == ki.g && Up.s();
                    }
                  }
                }
              }
            }
          }
        }
      }
      tg();
    }
  }
  function UG() {
    if (Da) {
      let h = Da.getBoundingClientRect();
      hd({type:"ANNOTATE_PDF_ANNOTATION_TOOLBAR_MOVED", rect:{left:h.left, top:h.top, width:h.width, height:h.height,}});
    }
  }
  function Zt() {
    window.removeEventListener("touchmove", TU, pb);
    window.removeEventListener("pointermove", UU, pb);
    window.removeEventListener("pointerup", Zt, pb);
    window.removeEventListener("pointercancel", Zt, pb);
    po();
    ek();
    UG();
    ao();
  }
  function UU(h) {
    kh(h) ? (Da.style.top = h.clientY - Zy > Math.floor(window.visualViewport.offsetTop + window.visualViewport.height - 56 - 144 - 10) ? Math.floor(window.visualViewport.offsetTop + window.visualViewport.height - 56 - 144 - 10) + "px" : h.clientY - Zy < Math.floor(window.visualViewport.offsetTop) ? Math.floor(window.visualViewport.offsetTop) + "px" : Math.floor(h.clientY - Zy) + "px", Da.style.left = h.clientX - $y > Math.floor(window.visualViewport.offsetLeft + window.visualViewport.width - 236 - 
    10) ? Math.floor(window.visualViewport.offsetLeft + window.visualViewport.width - 236 - 10) + "px" : h.clientX - $y < Math.floor(window.visualViewport.offsetLeft) ? Math.floor(window.visualViewport.offsetLeft) + "px" : Math.floor(h.clientX - $y) + "px", tg(), h.preventDefault()) : Zt(h);
  }
  function Dq() {
    ne && (ne.style.display = "none");
    WB && XB(!1);
    tg();
  }
  function fh() {
    Up.i && Up.i.Sa(!1);
    var h = document.getElementById("annotate-highlight-plugin-font-size");
    h && (h.style.backgroundColor = "", h.style.cursor = "pointer", h.contentEditable = "false", h.removeEventListener("input", NU), h.removeEventListener("keypress", OU), h.removeEventListener("dblclick", PU), 0 == h.innerHTML.trim().length || 0 == parseInt(h.innerHTML)) && (h.innerHTML = "20", Y.Rg = "20", xG.wh(Y.i, Y.j, Y.l, Y.s, Y.o, Y.Rg, Y.g, Y.m), Up.i && y3(Y.Rg));
    ZG = !1;
  }
  function Mg() {
    ni && (ni.style.display = "none");
    document.getElementById("annotate-highlight-plugin-font-family") && (document.getElementById("annotate-highlight-plugin-font-family").style.backgroundColor = "");
    Yy = !1;
  }
  function VU() {
    sk(oi, !1);
    sk(pi, !1);
    document.getElementById("annotate-highlight-plugin-textcolor") && (document.getElementById("annotate-highlight-plugin-textcolor").style.backgroundColor = "");
    document.getElementById("annotate-highlight-plugin-fillcolor") && (document.getElementById("annotate-highlight-plugin-fillcolor").style.backgroundColor = "");
    Yt = Xt = !1;
  }
  function sf() {
    Qa && Qa.ja();
    uf && (uf.style.display = "none");
    Kf && (Kf.style.display = "none");
    VU();
    tg();
  }
  function T3(h) {
    h.preventDefault();
    $y = h.clientX - parseInt(Da.style.left);
    Zy = h.clientY - parseInt(Da.style.top);
    window.addEventListener("touchmove", TU, pb);
    window.addEventListener("pointermove", UU, pb);
    window.addEventListener("pointerup", Zt, pb);
    window.addEventListener("pointercancel", Zt, pb);
    Dq();
    fh();
    Mg();
    sf();
    s3();
    Ip();
  }
  function XT(h) {
    if (h.bSuccessful || h.direct) {
      if (h.arrSlides && ($t = h.arrSlides), h.bForSave) {
        XI(), ge();
      } else {
        if (-1 == h.strGUID) {
          if (Nn(), window == window.top) {
            $t && (h.annotationData.googleSlideInfo = $t), KG(h.annotationData);
          } else {
            h.currAnnotationMode && (S.g = h.currAnnotationMode);
            "uDocAccessedAs" in h && (S.m = h.uDocAccessedAs);
            h.strDocOwnerGuid && (S.zd = h.strDocOwnerGuid);
            h.uClassId && (S.j = h.uClassId);
            h.strAssessmentFileGuid && Vs(h.strAssessmentFileGuid);
            A(h.oLivefeed) || dt(h.oLivefeed, !1);
            $1();
            lw.G = !0;
            if (h.publisherCoTeacherInfo) {
              var m = h.publisherCoTeacherInfo, q = m.uPublisherId, v = m.strPublisherGuid;
              let E = m.strS3BucketFullPath, K = m.uPublishedAnnotationId, U = m.strPublishedAnnotationGuid, na = m.strPublishedAnnotationPath, ob = m.strPublisherPicture, Ca = m.oPublisherPicturePosition, qc = m.strPublisherFirstName, Cd = m.strPublisherLastName, Ob = m.uPublisherFeatureValue, Nc = m.strAnnotateDataRequestUrl;
              Nc && (M.v = Nc);
              E && (M.o = E);
              cl(1) && (!Ch() && q == M.s || Ch() && v == Bh()) ? (zn(jb, Cy, Dy, Vi, Wi, !ud), Bn(jb, -1, An(), "" != Cn() ? Cn() : na, -1, An())) : cl(2) ? Dn(jb, q, v, K, U, na, ob, Ca, qc, Cd, Ob) : En(jb, q, v, K, U, na, ob, Ca, qc, Cd, Ob);
              Fn(S, Object.assign({}, m), 1);
            }
            if (au) {
              $G();
            } else {
              q = h.annotationData;
              m = [];
              if ($t && q.pageAnnotations && -1 != wa.indexOf("docs.google.com/presentation/d/")) {
                for (var B in q.pageAnnotations) {
                  -1 == $t.findIndex(E => E.objectId == B) && q.pageAnnotations[B] && q.pageAnnotations[B].arrMediaAttachments && 0 < q.pageAnnotations[B].arrMediaAttachments.length && m.push(B);
                }
              }
              if (0 < m.length) {
                for (console.log("$$$ Detected: few slides are deleted $$$", m), lw.B = m, lw.J = -1, lw.C = An(), q = 0; q < m.length; q++) {
                  v = m[q], console.log("Presentation: Deleted data for", v, delete h.annotationData.pageAnnotations[v]);
                }
              }
            }
            d(h.annotationData);
            FR(W);
          }
        } else {
          Ln(h.strGUID, S.j, !1);
        }
      }
    } else {
      function E() {
        Jn("Please wait...");
        Xa(h, null);
        aH = !0;
      }
      function K() {
        au && $G();
      }
      h.type = "AnnotateGetCurrentPresentationInfo";
      h.bSwitchAccount = !0;
      h.bGetTokenError ? Kn("", "Unable to access this file from your Google Drive account.", "CANCEL", "SWITCH ACCOUNT", K, E) : Kn("", "Unable to retrieve file. Access denied.", "CANCEL", "SWITCH ACCOUNT", K, E);
    }
  }
  function xU() {
    Cv = P.u = !1;
    Hp(jb);
    Ip();
    if (window == window.top || -1 != wa.indexOf("docs.google.com/presentation/d/") || me || 3 == S.g || Ql.Ja()) {
      if (!Is(W)) {
        if (Kh()) {
          Ql.Ja() ? Rl() && Ta && !Ta.pc() ? eC("Unable to save feedback.") : eC("Assignment not turned in by student. Unable to save feedback.") : P.l ? eC("External document being graded. Please use the UPDATE PDF floating action button to save your feedback.") : Gk(P) && eC("External document being graded. Please use the UPDATE SLIDES floating action button to save your feedback.");
          return;
        }
        if (Ph()) {
          Ql.Ja() ? Rl() && Ta && !Ta.pc() ? eC("Unable to save annotations.") : eC("Your submission is being graded by your instructor and is not available for editing.") : eC("Saving annotations is not supported in student accounts.");
          return;
        }
      }
      Ta && Kh() && Rl() && Ta.j && !Ta.j.v && Ta.ae() && f3(Ta.tc[Ta.ae().ve]);
      if (-1 != wa.indexOf("file://")) {
        eC("Saving of annotations is not allowed on local files.");
      } else {
        if (me) {
          if (window != window.top) {
            var h = S.s;
            if (h) {
              var m = No();
              mv(h, m);
            }
            for (h = 0; h < Iq.length; h++) {
              if (m = kv(Iq[h])) {
                let q = Oo(S);
                q && (q.cv[Iq[h]] = m);
              }
            }
          }
        } else {
          -1 != wa.indexOf("docs.google.com/presentation/d/") ? (window != window.top && XI(), window == window.top && (h = Rk(P), m = No(), mv(h, m), S.ol())) : ml(P) && cd.ol();
        }
        if (Ql.Ja()) {
          Hs(Ql, !0, !1);
        } else {
          if (Yg(An())) {
            1 == S.g ? Ss(S, An()) || Ks(1) ? ot() ? ge() : S.Jh && V && !V.Lj() ? ib() : mw(Ql, !1, !1) : rC() : mw(Ql, !1, !1);
          } else {
            if (Va && "block" == Va.style.display) {
              oC();
            } else {
              if (-1 != wa.indexOf("docs.google.com/presentation/d/")) {
                if (window == window.top) {
                  if (h = document.getElementById("office-editing-file-extension"), null != h && "none" != h.style.display) {
                    nC(null, null);
                    return;
                  }
                } else if (P.M) {
                  nC(null, null);
                  return;
                }
              }
              ge();
            }
          }
        }
      }
    }
  }
  function EU() {
    (Vb.Xj || Vb.Ji) && Vb.cg && Vb.pw && Vb.pw && (Vb.Gq = !Vb.Gq, DP(Vb, Vb.Gq));
  }
  function TG() {
    (Vb.Xj || Vb.Ji) && Vb.cg && (Vb.Ji ? (console.log("notify edit mode: mute/unmute mic clicked"), -1 != window.location.href.indexOf("docs.google.com/presentation/d/") && window != window.top && L.sa({type:"MuteUnmuteClickedInPresentation"}, null)) : (Vb.qp = !Vb.qp, LP(Vb.qp), Vb.dispatchEvent(new CustomEvent(CP.g)), !Vb.Ji && HP()));
  }
  function SG() {
    (Vb.Xj || Vb.Ji) && Vb.cg && (Vb.Ji ? (console.log("notify edit mode: pause(true)/resume(false) rec clicked", !Vb.Eq), -1 != window.location.href.indexOf("docs.google.com/presentation/d/") && window != window.top && L.sa({type:"PauseResumeRecClickedInPresentation", bPause:!Vb.Eq}, null)) : Vb.Xj && Vb.cg && (Vb.Eq ? (FP(Vb, !0), Vb.dispatchEvent(new CustomEvent(CP.j))) : (MP(Vb, !0), Vb.dispatchEvent(new CustomEvent(CP.i)))));
  }
  function Rm() {
    (Vb.Xj || Vb.Ji) && Vb.cg && Vw(Vb);
  }
  function U3() {
    VU();
    fh();
    Mg();
    Qa && Qa.nr(!0);
    if (!N1(W)) {
      if (Kh()) {
        Ql.Ja() ? Rl() && Ta && !Ta.pc() ? eC("Unable to start recording.") : eC("Assignment not turned in by student. Unable to start recording.") : Ok(P) && eC("External document being graded. Unable to start recording.");
        return;
      }
      if (Ph()) {
        Ql.Ja() ? Rl() && Ta && !Ta.pc() ? eC("Unable to start recording.") : eC("Your submission is being graded by your instructor and is not available for editing.") : Vl() || null != V && V.Lj() ? eC("Recording is not supported during Livestream.") : eC("Recording is not supported in student accounts.");
        return;
      }
    }
    if (-1 != wa.indexOf("file://")) {
      eC("Recording is not allowed on local files.");
    } else {
      if (-1 != wa.indexOf("docs.google.com/presentation/d/") && window != window.top && !me || Qk() || cd && nD(cd)) {
        Qk() || kc && kc.Ja() ? eC("Screen sharing is not supported in presentation mode.") : eC("To record your session please initiate screen recording before entering " + (-1 != wa.indexOf("docs.google.com/presentation/d/") ? "Google Slides" : "Canva") + " presentation mode.");
      } else {
        if (Vb.Xj) {
          if (ot() && 0 == M.M) {
            em(!0);
          } else {
            if (!Vb.cg) {
              null != Jv.i && (hw(), iw(Jv));
              UA(!0);
              let m;
              var h = document.getElementById("annotate-highlight-plugin-start-recording").getBoundingClientRect();
              m = h.left + JA + 2 < Math.floor(window.visualViewport.width) ? h.left : Math.floor(window.visualViewport.width) - JA - 2;
              h = h.top + KA < Math.floor(window.visualViewport.height) ? h.top : Math.floor(window.visualViewport.height) - KA;
              EA.style.left = m + "px";
              EA.style.top = h + "px";
              EA.style.width = JA + "px";
              EA.style.height = KA + "px";
              EA.style.display = "block";
              RA(!0, "transparent");
            }
          }
        }
      }
    }
  }
  function Hq(h) {
    h && "pen" == h.pointerType && !JB && (pC(), JB = !0, Xa({type:"annotateStylusModeAsked"}, null));
  }
  function DU(h) {
    h.preventDefault && h.preventDefault();
    QA();
    Ip();
    tf();
    Ql.Ja() && to();
    q2(10);
    b1(Ao, "-webkit-image-set( url(" + window.chrome.runtime.getURL("images/rectangle.png") + ") 1x, url(" + window.chrome.runtime.getURL("images/rectangle64.png") + ") 2x) 16 18, default");
    Na && Z.Ea && (Z.Ea.style.cursor = "-webkit-image-set( url(" + window.chrome.runtime.getURL("images/rectangle.png") + ") 1x, url(" + window.chrome.runtime.getURL("images/rectangle64.png") + ") 2x) 16 18, default");
    ji(10, 1);
    QU();
    O0(W);
    bj && -1 != wa.indexOf("docs.google.com/presentation/d/") && iC();
    Hq(h);
    Na && (m1(), ri());
  }
  function CU(h) {
    h.preventDefault && h.preventDefault();
    QA();
    Ip();
    tf();
    Ql.Ja() && to();
    q2(11);
    b1(Ao, "-webkit-image-set( url(" + window.chrome.runtime.getURL("images/ellipse.png") + ") 1x, url(" + window.chrome.runtime.getURL("images/ellipse64.png") + ") 2x) 16 18, default");
    Na && Z.Ea && (Z.Ea.style.cursor = "-webkit-image-set( url(" + window.chrome.runtime.getURL("images/ellipse.png") + ") 1x, url(" + window.chrome.runtime.getURL("images/ellipse64.png") + ") 2x) 16 18, default");
    ji(11, 1);
    RU();
    O0(W);
    bj && -1 != wa.indexOf("docs.google.com/presentation/d/") && iC();
    Hq(h);
    Na && (m1(), ri());
  }
  function BU(h) {
    h.preventDefault && h.preventDefault();
    QA();
    Ip();
    tf();
    Ql.Ja() && to();
    q2(12);
    b1(Ao, "-webkit-image-set( url(" + window.chrome.runtime.getURL("images/line.png") + ") 1x, url(" + window.chrome.runtime.getURL("images/line64.png") + ") 2x) 8 24, default");
    Na && Z.Ea && (Z.Ea.style.cursor = "-webkit-image-set( url(" + window.chrome.runtime.getURL("images/line.png") + ") 1x, url(" + window.chrome.runtime.getURL("images/line64.png") + ") 2x) 8 24, default");
    ji(12, 1);
    SU();
    O0(W);
    bj && -1 != wa.indexOf("docs.google.com/presentation/d/") && iC();
    Hq(h);
    Na && (m1(), ri());
  }
  function f4(h) {
    h.preventDefault();
    0 < jy.length && (QA(), my());
  }
  function e4(h) {
    h.preventDefault();
    0 < iy.length && (QA(), ly());
  }
  function V3() {
    FR(W);
    sk(DA, !0);
    RA(!0, "transparent");
  }
  function g4(h) {
    h.preventDefault();
    QA();
    Zj();
    gc("");
    pc("");
    Xa({type:"annotateAnnotationModeGot", value:!1}, null);
    fc(h);
  }
  function i4(h) {
    h.preventDefault();
    cB();
    V && ER(V);
  }
  function h4(h) {
    h.preventDefault();
    cB();
    Pm() ? (h = {type:"ANNOTATE_SLIDE_GET_PRESENATION_ATTANDEES"}, V && (HR(V, h), SR())) : V && oR(V) && SR();
  }
  function j4() {
    if (V) {
      var h = V;
      if (h.l == ZA && h.g) {
        var m = !$A(h);
        h.g && (h.g.bAllowTakeNotes = m);
        cS(h, m, dS(h), eS(h), fS(h));
        gS(h, m);
      }
      bB($A(V));
      pw && DR($A(V));
    }
  }
  function az(h, m, q, v, B, E, K, U, na, ob, Ca) {
    E = [];
    for (U = 0; U < m.length; ++U) {
      var qc;
      "" == m[U] ? qc = "url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAJElEQVQYV2O8dOnSfwYkoKenx4jMZ6SDAmT7QGx0K1EcRBsFAJfOHd3Le79RAAAAAElFTkSuQmCC) repeat" : qc = "";
      E.push({style:{height:v + "px", width:q + "px", "float":"left", background:qc, backgroundColor:m[U], border:"1px solid #c0c0c0", borderRadius:"50%", boxSizing:"border-box", marginLeft:"4px", marginRight:U == m.length - 1 ? "4px" : "0px", fontWeight:"normal",}, Qa:K, selected:m[U] == B, className:h + "-button"});
    }
    return hk({parent:document.body, id:h, style:{position:"fixed", backgroundColor:"rgb(255,255,255)", zIndex:Yj, padding:"4px", border:"1px solid #c0c0c0", boxSizing:"border-box", display:"none"}, buttons:E, BD:null, AF:null, xJ:!0, className:Ca});
  }
  function n4(h, m, q, v, B) {
    for (var E = [], K = 0; K < m.length; ++K) {
      E.push({innerHTML:m[K], style:{height:v + "px", width:q + "px", "float":"left", marginLeft:0 == K ? "0px" : "4px", marginRight:K == m.length - 1 ? "4px" : "0px", boxSizing:"border-box", fontSize:"Verdana" == m[K] ? "14px" : "16px", textAlign:"center", fontFamily:m[K], textOverflow:"ellipsis", overflow:"hidden", whiteSpace:"nowrap", lineHeight:v + "px", color:"#000000",}, selected:m[K] == Wt, Qa:B, className:h + "-button"});
    }
    return hk({parent:document.body, id:h, style:{position:"fixed", backgroundColor:"rgb(255,255,255)", zIndex:Yj, padding:"4px", border:"1px solid #c0c0c0", display:"none", fontWeight:"normal"}, buttons:E});
  }
  function c4() {
    ni = n4("annotate-highlight-plugin-font-family-toolbar", WG, 70, 26, function(h) {
      Ip();
      ii("10.5.1.1");
      for (var m = document.getElementsByClassName("annotate-highlight-plugin-font-family-toolbar-button"), q = 0; q < m.length; q++) {
        m[q].style.borderBottom = "0";
      }
      h.currentTarget.style.borderBottom = Y.v;
      Y.g = h.currentTarget.innerHTML;
      document.getElementById("annotate-highlight-plugin-font-family").innerHTML = Y.g;
      document.getElementById("annotate-highlight-plugin-font-family").style.fontFamily = Y.g;
      document.getElementById("annotate-highlight-plugin-font-family").style.fontSize = "Verdana" == Y.g ? "14px" : "16px";
      xG.Bn();
      xG.wh(Y.i, Y.j, Y.l, Y.s, Y.o, Y.Rg, Y.g, Y.m);
    });
  }
  function o4(h) {
    var m = h.detail;
    let q = h = 0, v = 0;
    null != m.lineStyle && (h = m.lineStyle);
    null != m.arrowHead && (q = m.arrowHead);
    null != m.waveSize && (v = m.waveSize);
    m = document.getElementById("annotate-highlight-plugin-popup-line-icon");
    var B = document.getElementById("annotate-highlight-plugin-line"), E = "", K = "";
    0 == h ? (0 == q ? (m.className = "extension_reset_css extension_icon extension_icon-line", B.className = "extension_reset_css extension_icon extension_icon-line") : 1 == q ? (m.className = "extension_reset_css extension_icon extension_icon-line_end_arrow", B.className = "extension_reset_css extension_icon extension_icon-line_end_arrow") : (m.className = "extension_reset_css extension_icon extension_icon-line_double_arrow", B.className = "extension_reset_css extension_icon extension_icon-line_double_arrow"), 
    E = "line", K = "line64") : 1 == h ? (m.className = "extension_reset_css extension_icon extension_icon-line_dashed", B.className = "extension_reset_css extension_icon extension_icon-line_dashed", E = "line", K = "line64") : 2 == h ? (m.className = "extension_reset_css extension_icon extension_icon-line_dotted", B.className = "extension_reset_css extension_icon extension_icon-line_dotted", E = "line", K = "line64") : 3 == h && (0 == v ? (m.className = "extension_reset_css extension_icon extension_icon-line_wave", 
    B.className = "extension_reset_css extension_icon extension_icon-line_wave", K = E = "wave64") : 1 == v ? (m.className = "extension_reset_css extension_icon extension_icon-line_wave_medium", B.className = "extension_reset_css extension_icon extension_icon-line_wave_medium", E = "wave_medium", K = "wave_medium64") : (m.className = "extension_reset_css extension_icon extension_icon-line_wave_large", B.className = "extension_reset_css extension_icon extension_icon-line_wave_large", E = "wave_large", 
    K = "wave_large64"));
    b1(Ao, "-webkit-image-set( url(" + window.chrome.runtime.getURL("images/" + E + ".png") + ") 1x, url(" + window.chrome.runtime.getURL("images/" + K + ".png") + ") 2x) 8 24, default");
    Na && Z.Ea && (Z.Ea.style.cursor = "-webkit-image-set( url(" + window.chrome.runtime.getURL("images/line.png") + ") 1x, url(" + window.chrome.runtime.getURL("images/line64.png") + ") 2x) 8 24, default");
  }
  function gU() {
    vi(hi);
    if (bp) {
      var h = bp.g;
      if (null != h) {
        var m = Oo(S);
        if (m && -1 != m.F.indexOf(h)) {
          h && h.xb();
          m.xb();
          let q = {};
          q.arrElement = [h];
          m.dispatchEvent(new CustomEvent(Cp.l, {detail:q}));
        }
        le();
        Fh(P) && (In.i = !0);
      }
    }
  }
  function d4() {
    Qa = new Ex(ud);
    Qa.addEventListener("linePropChange", o4);
    Qa.addEventListener("propUpdate", gU);
    Qa.ja();
    oi = az("annotate-highlight-plugin-text-color-toolbar", hi.M, 26, 26, Y.s, 9, function(q) {
      Ip();
      ii("10.5.6.1");
      for (var v = document.getElementsByClassName("annotate-highlight-plugin-text-color-toolbar-button"), B = 0; B < v.length; B++) {
        v[B].style.borderBottom = "0";
      }
      q.currentTarget.style.borderBottom = Y.v;
      q = bh(q.currentTarget.style.color);
      document.getElementById("annotate-highlight-plugin-textcolor").style.borderBottom = "4px solid " + q;
      13 == ki.g ? (Y.B = q, Ko.wh(Y.i, Y.j, Y.l, Y.B, Y.C, Y.u, Y.g, Y.m), Ko.Jr().Oh()) : (Y.s = q, Jo.wh(Y.i, Y.j, Y.l, Y.s, Y.o, Y.Rg, Y.g, Y.m), xG.Bn());
    });
    pi = az("annotate-highlight-plugin-text-fill-color-toolbar", hi.ic, 26, 26, Y.o, 5, function(q) {
      Ip();
      ii("10.5.7.1");
      for (var v = document.getElementsByClassName("annotate-highlight-plugin-text-fill-color-toolbar-button"), B = 0; B < v.length; B++) {
        v[B].style.borderBottom = "0";
      }
      q.currentTarget.style.borderBottom = Y.v;
      q = "" == q.currentTarget.style.color ? "" : bh(q.currentTarget.style.color);
      document.getElementById("annotate-highlight-plugin-fillcolor").style.borderBottom = "4px solid " + ("" == q ? "#ffffff" : q);
      13 == ki.g ? (Y.C = q, Ko.wh(Y.i, Y.j, Y.l, Y.B, Y.C, Y.u, Y.g, Y.m), Ko.Jr().Oh()) : (Y.o = q, Jo.wh(Y.i, Y.j, Y.l, Y.s, Y.o, Y.Rg, Y.g, Y.m), Jo.Bn());
    });
    uf = az("annotate-highlight-plugin-comment-toolbar", Cq, 26, 26, Cq[0], 14, function(q) {
      Ip();
      ii("10.16.8.1");
      for (var v = document.getElementsByClassName("annotate-highlight-plugin-comment-toolbar-button"), B = 0; B < v.length; B++) {
        v[B].style.borderBottom = "0";
      }
      q.currentTarget.style.borderBottom = Y.v;
      var E = 0;
      for (B = 0; B < v.length; B++) {
        if (v[B] == q.currentTarget) {
          E = B;
          break;
        }
      }
      hi.o.Za = E;
      hi.o.qa = hi.o.Cc[hi.o.Za];
      vi(hi);
      Na ? Oi() : ac.J();
    }, null, 0, 1, "comment_color_toolbar");
    Kf = az("annotate-highlight-plugin-texthighlight-toolbar", Cq, 26, 26, Cq[0], 5, function(q) {
      Ip();
      ii("10.7.1");
      for (var v = document.getElementsByClassName("annotate-highlight-plugin-texthighlight-toolbar-button"), B = 0; B < v.length; B++) {
        v[B].style.borderBottom = "0";
      }
      q.currentTarget.style.borderBottom = Y.v;
      var E = 0;
      for (B = 0; B < v.length; B++) {
        if (v[B] == q.currentTarget) {
          E = B;
          break;
        }
      }
      hi.s.Za = E;
      hi.s.qa = hi.s.Cc[hi.s.Za];
      vi(hi);
      Ro.HI();
    }, null, 0, 1, "texthighlight_color_toolbar");
    for (var h = document.getElementsByClassName("annotate-highlight-plugin-texthighlight-toolbar-button"), m = 0; m < h.length; m++) {
      h[m].style.marginBottom = "2px", 0 == m && (h[m].style.marginLeft = "0px"), m == h.length - 1 && (h[m].style.marginRight = "0px");
    }
    h = document.getElementsByClassName("annotate-highlight-plugin-comment-toolbar-button");
    for (m = 0; m < h.length; m++) {
      h[m].style.marginBottom = "2px", 0 == m && (h[m].style.marginLeft = "0px"), m == h.length - 1 && (h[m].style.marginRight = "0px");
    }
  }
  function b4() {
    Ip();
    if (ud) {
      em(!1);
    } else {
      Jo && Jo.Bn();
      var h = Ko.Jr();
      h && h.Oh();
      ii("10.5.7");
      fh();
      Mg();
      Xt = !1;
      (Yt = !Yt) ? ek() : sf();
    }
  }
  function a4() {
    Ip();
    if (ud) {
      em(!1);
    } else {
      Jo && Jo.Bn();
      var h = Ko.Jr();
      h && h.Oh();
      ii("10.5.6");
      fh();
      Mg();
      Yt = !1;
      (Xt = !Xt) ? ek() : sf();
    }
  }
  function X3() {
    Ip();
    ud ? em(!1) : (ii("10.5.2"), sf(), Mg(), ZG = !0, Wy());
  }
  function W3() {
    Ip();
    ud ? em(!1) : (ii("10.5.1"), sf(), fh(), xG && xG.Bn(), (Yy = !Yy) ? Xy() : Mg());
  }
  function $3() {
    Ip();
    ud ? em(!1) : (ii("10.5.5"), Y.l = !Y.l, document.getElementById("annotate-highlight-plugin-underline").style.backgroundColor = Y.l ? "#C0C0C0" : "", xG.wh(Y.i, Y.j, Y.l, Y.s, Y.o, Y.Rg, Y.g, Y.m), xG.Bn(), sf(), Mg(), fh());
  }
  function Z3() {
    Ip();
    ud ? em(!1) : (ii("10.5.4"), Y.j = !Y.j, document.getElementById("annotate-highlight-plugin-italic").style.backgroundColor = Y.j ? "#C0C0C0" : "", xG.wh(Y.i, Y.j, Y.l, Y.s, Y.o, Y.Rg, Y.g, Y.m), xG.Bn(), sf(), Mg(), fh());
  }
  function Y3() {
    Ip();
    ud ? em(!1) : (ii("10.5.3"), Y.i = !Y.i, document.getElementById("annotate-highlight-plugin-bold").style.backgroundColor = Y.i ? "#C0C0C0" : "", xG.wh(Y.i, Y.j, Y.l, Y.s, Y.o, Y.Rg, Y.g, Y.m), xG.Bn(), sf(), Mg(), fh());
  }
  function By() {
    tl();
    uq();
    td();
    Nt();
    Mm = !1;
    jo(ko);
    7 == ki.g && MG();
    Lp();
    x0(!1);
    if (P.v && P.v.width != window.innerWidth) {
      qJ(!0), uU(!0);
    } else {
      if (Da) {
        var h = parseInt(Da.style.top);
        h > Math.floor(window.visualViewport.height) - 144 - 10 && (h = Math.floor(window.visualViewport.height) - 144 - 10);
        Da.style.top = h + "px";
      }
      Ub && (h = parseInt(Ub.style.top), h > Math.floor(window.visualViewport.height) - Ub.clientHeight && (h = Math.floor(window.visualViewport.height) - Ub.clientHeight), Ub.style.top = h + "px");
      Va && (h = parseInt(Va.style.top), h > Math.floor(window.visualViewport.height) - Va.clientHeight && (h = Math.floor(window.visualViewport.height) - Va.clientHeight), Va.style.top = h + "px");
      kb && (h = parseInt(kb.style.top), h > Math.floor(window.visualViewport.height) - kb.clientHeight && (h = Math.floor(window.visualViewport.height) - kb.clientHeight), kb.style.top = h + "px");
    }
    ao();
    P.v && (P.v.width = window.innerWidth, P.v.height = window.innerHeight);
    if (-1 != wa.indexOf("docs.google.com/presentation/d/") || -1 != wa.indexOf("docs.google.com/document/d/") || Na || Gk(P)) {
      Yn = !1;
    }
    Yn && (document.webkitIsFullScreen || GZ(jb) ? console.log("PREVENTED Window resized dialog on media maximize/minimize, maximize?", document.webkitIsFullScreen) : (hC(), Yn = !1));
    mB && "block" == mB.style.display && (Iy && 8 < (Math.floor(window.visualViewport.width) - 96) / 2 - mB.offsetWidth - 16 ? (mB.style.left = (Math.floor(window.visualViewport.width) - 96) / 2 - mB.offsetWidth - 16 + "px", mB.style.top = "16px") : (mB.style.left = (Math.floor(window.visualViewport.width) - mB.offsetWidth) / 2 + "px", mB.style.top = (Math.floor(window.visualViewport.height) - mB.offsetHeight) / 2 + "px"));
    !Na && ac && ac.gq().V();
    Yo && HD();
    if (Xo && (h = Xo, h.g && (h.g.left + h.g.width / 2 > window.visualViewport.width || h.g.top + h.g.height / 2 > window.visualViewport.height))) {
      var m = h.g;
      m.R && (m.top = GC.j, m.left = (window.visualViewport.width - m.width) / 2, m.R.style.top = m.top + "px", m.R.style.left = m.left + "px");
      LC(h);
    }
    fI && $N(fI);
    RB && (h = RB, h.g && h.g.m());
    Ta && (h = Ta.j, h.l && (h.l.style.left = window.innerWidth - 121 - 8 + "px", h.l.style.top = window.innerHeight - 48 - 8 + "px"), h.m && (h.m.style.left = window.innerWidth - 160 - 8 + "px", h.m.style.top = window.innerHeight - 48 - 8 + "px"), eI && $N(eI));
    IB && IB.m();
  }
  function R3() {
    "visible" != document.visibilityState && Lp();
  }
  function Nt() {
    lo = !1;
    md && (md.style.display = "none", Me.style.display = "none", Ne.style.display = "none", Oe.style.display = "none", ef.style.display = "none", lg.style.display = "none", ng.style.display = "none", mg.style.display = "none", If.style.display = "none", og.style.display = "none", pg.style.display = "none", qg.style.display = "none", Me.removeEventListener("pointerup", C, {capture:!0, passive:!1}), Me.removeEventListener("pointerdown", ba, {capture:!0, passive:!1}), Me.removeEventListener("touchstart", 
    T, {capture:!0, passive:!1}), Ne.removeEventListener("pointerup", z, {capture:!0, passive:!1}), Ne.removeEventListener("pointerdown", ba, {capture:!0, passive:!1}), Ne.removeEventListener("touchstart", T, {capture:!0, passive:!1}), Oe.removeEventListener("pointerup", r, {capture:!0, passive:!1}), Oe.removeEventListener("pointerdown", ba, {capture:!0, passive:!1}), Oe.removeEventListener("touchstart", T, {capture:!0, passive:!1}), ef.removeEventListener("pointerup", J, {capture:!0, passive:!1}), 
    ef.removeEventListener("pointerdown", ba, {capture:!0, passive:!1}), ef.removeEventListener("touchstart", T, {capture:!0, passive:!1}), md.removeEventListener("pointerdown", pp, pb), md.removeEventListener("touchstart", T, pb), window.removeEventListener("pointerup", Tk, pb), window.removeEventListener("pointermove", op, pb), window.removeEventListener("pointerdown", mp, pb), window.removeEventListener("touchstart", T, pb), window.removeEventListener("pointerup", xc, pb), window.removeEventListener("pointermove", 
    Uc, pb), window.removeEventListener("pointermove", Xb, pb), window.removeEventListener("pointermove", Za, pb), window.removeEventListener("pointermove", zb, pb), window.removeEventListener("pointermove", tn, pb), window.removeEventListener("pointermove", np, pb));
  }
  function KG(h) {
    let m = !1;
    var q = h.pageAnnotations, v = !1;
    for (let B in q) {
      if (!h.bAppliedEditModeAnnotations && !v) {
        let E = kv(B);
        E && q[B] && Mo(E) && Mo(q[B]) && (v = !0);
      }
    }
    h.bAppliedEditModeAnnotations || !u0(iv()) ? ($o(), Jp(), d({pageAnnotations:q}), O0(W)) : v ? (oc(q), m = !0) : (r0(q), $o(), Jp(), d({pageAnnotations:q}), O0(W));
    return m;
  }
  function p4(h) {
    Xa({type:"chromeExtensionServerRequest", requestData:h}, m => {
      if (mC) {
        let q = mC.g ? mC.g.contentWindow : null;
        q && q.postMessage(m, M.ba);
      }
    });
  }
  function q4(h) {
    return "annotatePreviewKeyEvent" == h || "annotateClosePresentationTab" == h || "annotateNavigateSlideGo" == h || "annotateScreenShotGotResponse" == h || "annotateAccountUpgrade" == h || "annotateDashboardLaunched" == h || "annotateCCLHomeLaunched" == h || "annotateORHomeLaunched" == h || "annotateWebAnnotationsListUpdated" == h || "annotateOpenSaveAnnotations" == h || "annotateScreenGet" == h || "annotateScreenCancel" == h || "annotateImportPdfStatus" == h || "annotateOpenFileResponse" == h || 
    "annotateImportPdfResponse" == h || "annotateImportPdfFile" == h || "annotateKeyboardShortcutsChanged" == h || "annotateDeleteAllAnnotationsPreferenceChanged" == h || "annotateWebAnnotationAssessmentResponse" == h || "annotateCancelPdfImport" == h || "WebAssignmentDummyPageLoaded" == h || "annotateBringCCLLivefeedToView" == h || "annotateBringORLivefeedToView" == h || "annotateHideJoinLivefeedNotification" == h || "ANNOTATE_PDF_VIEWER_READY_ON_EXTENSION_INITIALIZED" == h || "ANNOTATE_PDF_VIEWER_READY" == 
    h ? !0 : !1;
  }
  function r4() {
    -1 == wa.indexOf("drive.google.com") && -1 == wa.indexOf("classroom.google.com") && -1 == wa.indexOf("mail.google.com") || window != window.top || -1 == bu && (bu = setInterval(function() {
      for (var h = !1, m = null, q = document.querySelectorAll('[aria-label="Showing viewer."]'), v = 0; v < q.length; v++) {
        if (!q[v].hasAttribute("aria-hidden")) {
          h = !0;
          m = q[v];
          break;
        }
      }
      if (h != xl) {
        xl = h;
        zq = "";
        if (xl && m) {
          if (h = q[v].querySelectorAll('[role="toolbar"]'), 0 < h.length && (h = h[0], m = h.querySelectorAll('[aria-label="PDF icon"]'), 0 < m.length)) {
            if (m = m[0], q = m.nextElementSibling, m && q) {
              zq = q.childNodes[0].hasAttribute("data-tooltip") ? q.childNodes[0].getAttribute("data-tooltip") : q.childNodes[0].innerHTML, WU = W.g, ak(!0, !1), (h = h.childNodes[0].childNodes[1]) && 0 <= h.childNodes[0].childNodes.length && (h = h.childNodes[0].childNodes[2]) && h.hasAttribute("data-tooltip") && "Open with" == h.getAttribute("data-tooltip") && (Jy = h);
            } else {
              xl = !1;
              return;
            }
          }
        } else {
          WU ? ak(!1, !1) : Zj();
        }
        -1 != wa.indexOf("classroom.google.com") && (Xi = !0, xg());
        pc("");
      }
    }, 200));
  }
  function jo(h) {
    if (!Mm && Ik()) {
      var m = !1;
      try {
        m = null != chrome.runtime.getManifest();
      } catch (E) {
        m = !1;
      }
      if (m) {
        ko = h;
        var q = Bh(), v = M.j;
        m = h.data;
        M.re(m);
        if (window.top == window || Fh(P) || Nl(P)) {
          M.ea = h.googleUserId, M.l = h.accessToken;
        }
        Ql.Gf() || 5 == ki.g || Ro.Py();
        Mc || (Mc = new zK(h.serverUrl));
        cj || (cj = new jL(new bL(XU, s4, t4)), P.s = cj);
        kc || (kc = new aL(new LK(XU, YU, u4)));
        Ta || Nl(P) || (Ta = new c3(new J2(bH, Xa, ZU, VG, no)));
        var B = !1;
        m ? (Jh() ? Bh() != q || M.j != v ? (B = !0, Ih(), console.log("Login change: User account switch!!")) : console.log("Login change: None(Logged in)!!") : (B = !0, Hh(!0), console.log("Login change: Fresh login!!")), Mc && (mK(Mc), fK(Mc))) : (Jh() ? (B = !0, Hh(!1), console.log("Login change: Logout!!")) : console.log("Login change: None(Logged out)!!"), Mc && Mc.U(), h.bShowNotLoggedInDialog && (cC(h.serverUrl + "/login.php"), -1 != Bv && (clearTimeout(Bv), Bv = -1)));
        V1(W);
        Mc && sK(Mc) && (m ? (B && (Ph() ? (ae = !1, Xa({type:"COMM_UPDATE_GRADE_WITH_ANNOTATE", bGradeWithAnnotate:ae}, null)) : null != h.bGradeWithAnnotate && (ae = h.bGradeWithAnnotate)), k(!1), La(), Fa(), X(!0)) : (uK(), Mc.U()));
        B && window != window.top && Pk() && (h.bGradeWithAnnotate && h.bAnnotationMode ? xq(!1) : vl(!0));
        window != window.top && Pk() && null != h.bGradeWithAnnotate && (ae = h.bGradeWithAnnotate);
        window != window.top && (Gk(P) || Qk()) && kc && (null != h.bGradeWithAnnotate && (ae = h.bGradeWithAnnotate, kc.J = ae), m ? JK(kc, !1) : $K(kc));
        h.PDFViewerUrl && -1 != wa.indexOf(h.PDFViewerUrl) && (Na = !0, P.B = !0);
        h.WhiteboardUrl && -1 != wa.indexOf(h.WhiteboardUrl) && (P.o = !0);
        m && null !== m.uFeatureValue && 0 < m.uFeatureValue ? qU() : sU(!0);
        m && !A(m.arrBetaFeature) && Sh(m.arrBetaFeature);
        h.serverUrl && Ah(h.serverUrl);
        Jh() && (K1(pw, !1), L1(), W.pa || TJ());
        h.bAnnotatePage ? h.bAnnotationMode && h.bShowError && F("Toolbar disabled on Annotate.net.", 1500) : (m && m.strUserPicture && (Cy = m.strUserPicture), m && m.oUserPicturePosition && (Dy = m.oUserPicturePosition), m && m.strFirstName && m.strLastName && (Vi = m.strFirstName, Wi = m.strLastName, SD(ac, Vi, Wi)), B && rZ(jb), aZ(jb, Cy, Dy, Vi, Wi), eo = h.bShowFloatingButtons ? !0 : !1, bj = h.bShowGoogleSlideFeatureUpdateDialog ? !0 : !1, Fv = h.bShowAnnotationSavedMsg ? !0 : !1, h.bStylusModeAsked && 
        (JB = h.bStylusModeAsked), KB = h.bStylusMode ? h.bStylusMode : !1, LB = m && m.bShowStylusModeChangeOptionMsg ? m.bShowStylusModeChangeOptionMsg : !1, M.Va = h.bShowDeleteAllWarning ? !0 : !1, M.ib = h.bStudentNotesOpen ? !0 : !1, A(mQ) && (mQ = new tQ()), A(V) && (V = new jS()), Pm() && (lQ(), console.log("Slide check and start animation listening... STARTED", window.location.href), sQ() || qQ(lw.i)), bz != cu.wE ? bz == cu.NONE && v4(function() {
          bz = cu.wE;
          jo(ko);
        }) : (cd || -1 == wa.indexOf("canva.com/design") || (cd = new R0(new H0(tl, St, d, w4, x4, k, ak, Zj, a), jb, wa), P.g = cd), window == window.top ? m && m.name && (h.bAnnotationMode && ld && h.bHideWhenMinimize != wl || !h.bHideWhenMinimize && (h.bAllowDrawingWhenMinimize || h.bAnnotationMode) && h.bShowFloatingButtons || h.bAnnotationMode && h.bHideWhenMinimize) && !jd ? (ak(h.bAnnotationMode && ld, ld), h.bAnnotationMode || (vl(!1), Tt(), gc(wa)), ld && !mo && Jf()) : Zj() : (q = !Gk(P) || 
        h.bGradeWithAnnotate, v = h.bAnnotationMode && q, cz = m && m.name && (v && ld && h.bHideWhenMinimize != wl || !h.bHideWhenMinimize && (h.bAllowDrawingWhenMinimize && q || v) && h.bShowFloatingButtons || v && h.bHideWhenMinimize) && !jd ? !0 : !1, dz(v)), wl = h.bHideWhenMinimize ? !0 : !1, mo = h.bAllowDrawingWhenMinimize ? !0 : !1, m && m.strKeyboardShortcuts && Vh(m.strKeyboardShortcuts), m && m.strTimerSetting && Xo && TC(m.strTimerSetting), m && m.strExtensionCustomProperties && !hi.ia && 
        !ud && Qi(hi, JSON.parse(m.strExtensionCustomProperties)), m && m.strExtensionCustomProperties && m.strExtensionCustomProperties && !ud && (q = JSON.parse(m.strExtensionCustomProperties), A(q.uDeleteAllAnnotationPreference) || (hi.N = parseInt(q.uDeleteAllAnnotationPreference))), FR(W), V && V.l != Ym || D0(), $1(), Na && B && hd({type:"ANNOTATE_PDF_USER_LOGIN_STATE_UPDATED", uType:M.j}), S.o = [], m && m.arrWebAnnotations && (Ps(m.arrWebAnnotations), m_ && r_()), gc(wa), pc(wa), h.arrCSSFiles && 
        (cH = h.arrCSSFiles), h.bAnnotationModeUpdate && h.bAnnotationMode && da(wa) && xg(), -1 == dj && (dj = setInterval(function() {
          var E = !1;
          try {
            E = null != chrome.runtime.getManifest();
          } catch (U) {
            E = !1;
          }
          if (!E) {
            -1 != dj && (clearInterval(dj), dj = -1);
          } else {
            if (document.body) {
              if (window.top != window && document.body && !$U) {
                $U = !0;
                for (E = 0; E < cH.length; E++) {
                  var K = document.createElement("link");
                  K.classList.add("extension_reset_css");
                  K.href = chrome.runtime.getURL(cH[E]);
                  K.type = "text/css";
                  K.rel = "stylesheet";
                  document.getElementsByTagName("head")[0].appendChild(K);
                }
                Xa({type:"AnnotateGetDocumentFullScreenState"}, null);
              }
              E = Ml();
              E = Jh() && eo && (window == window.top || Qm || aj) && !jd && !E && !(window == window.top && Ok(P));
              W.g && !document.getElementById("AnnotateScreenCaptureDiv") ? (Zn(), xq(), ak(!0, !1)) : W.g || !E || document.getElementById("AnnotateStartAnnotationModeBtn") || Zj();
            }
          }
        }, 1000)), document.body && Fh(P) && !lw.M && Xa({type:"AnnotateGetDocumentFullScreenState"}, null), r4(), m && kc && (ae || !Gk(P) && Ph()) && YK(kc)));
      } else {
        -1 != dj && (clearInterval(dj), dj = -1);
      }
    }
  }
  function aV() {
    gc(wa);
    if (1 == document.getElementsByClassName("punch-start-presentation-container").length) {
      let h = document.getElementsByClassName("punch-start-presentation-container")[0];
      h.removeEventListener("pointerdown", ez, !0);
      h.removeEventListener("touchstart", ez, !0);
    }
  }
  function ez(h) {
    if (eP(Jv.g) && !PP() || PP() && Gk(P) || kc && kc.Ja()) {
      h.preventDefault(), h.stopPropagation(), Kn("", "Recording needs to be stopped before entering into presenation mode", "CANCEL", "STOP", function() {
      }, function() {
        Rm(null);
      });
    }
  }
  function bV() {
    gc("");
    if (1 == document.getElementsByClassName("punch-start-presentation-container").length) {
      let h = document.getElementsByClassName("punch-start-presentation-container")[0];
      h.addEventListener("pointerdown", ez, !0);
      h.addEventListener("touchstart", ez, !0);
    }
  }
  function fz(h) {
    Da && (h ? (Da.style.opacity = 1, te && (te.style.opacity = 1), po(), ek(), W.C = !1, gc(wa), pc(wa)) : (Da.style.opacity = 0, te && (te.style.opacity = 0), sf(), s3(), Dq(), fh(), Mg(), gc(""), pc(""), W.C = !0), Lo && LX(h));
  }
  function cV(h) {
    if (dV || !Lo || Lo.B) {
      fz(!0);
      var m = document.createElement("canvas");
      m.style.width = "360px";
      m.style.height = "270px";
      m.width = 360;
      m.height = 270;
      var q = m.getContext("2d");
      q.clearRect(0, 0, m.width, m.height);
      var v = new Image();
      v.onload = function() {
        if (-1 != wa.indexOf("docs.google.com/presentation/d/") || -1 != wa.indexOf("docs.google.com/document/d/")) {
          var B = window.devicePixelRatio ? window.devicePixelRatio : 1;
          q.scale(B, B);
          if (Ab.width > Ab.height) {
            var E = Ab.width / Ab.height * 270;
            m.width = E;
            m.style.width = E + "px";
          } else {
            E = Ab.height / Ab.width * 360, m.height = E, m.style.height = E + "px";
          }
          var K = Ab.x, U = Ab.y;
          if (-1 != wa.indexOf("docs.google.com/document/d/")) {
            var na = document.getElementsByClassName("kix-appview-editor")[0];
            na && (U = Ab.y + na.scrollTop);
          }
          q.drawImage(v, K * B, U * B, Ab.width * B, Ab.height * B, 0, 0, m.width, m.height);
        } else if (Na) {
          B = window.devicePixelRatio ? window.devicePixelRatio : 1;
          q.scale(B, B);
          E = fl(Z, Z.scrollY).S;
          var ob = fl(Z, Z.scrollY).Ua, Ca = Ez(Z, E), qc = kl(Z, E), Cd = Z.clientHeight;
          K = nd.x;
          U = nd.width;
          na = nd.height;
          var Ob = nd.y;
          jl(Z, E) > Z.clientWidth ? 0 == Z.scrollX && (K += Ca, U -= Ca) : (K += Ca, U -= 2 * Ca);
          qc < Cd && (na = qc);
          0 == Z.scrollY ? Ob += Z.j : 0 <= ob - Z.scrollY && ob - Z.scrollY <= Z.j && (Ob += ob - Z.scrollY);
          U > na ? (E = U / na * 270, m.width = E, m.style.width = E + "px") : (E = na / U * 360, m.height = E, m.style.height = E + "px");
          q.drawImage(v, K * B, Ob * B, U * B, na * B, 0, 0, m.width, m.height);
        } else {
          v.width > v.height ? (E = v.width / v.height * 270, m.width = E, m.style.width = E + "px") : (E = v.height / v.width * 360, m.height = E, m.style.height = E + "px"), q.drawImage(v, 0, 0, v.width, v.height, 0, 0, m.width, m.height);
        }
        B = m.toDataURL();
        m.remove();
        h.bForSave ? (K = h.saveRequestData, K.thumbnail = B, Xa(K, null)) : h.bForAssessment && (K = Lo, K.m.i(!0), K.B = !1, bY(K), K.N = B, UX(K));
      };
      v.src = h.data;
    }
  }
  function eV() {
    if (mQ) {
      var h = mQ;
      h = h.g ? uQ(h.g, !0) : null;
    } else {
      h = null;
    }
    return h;
  }
  function y4() {
    return Z;
  }
  function z4() {
    return zH;
  }
  function A4() {
    return Jo && Jo.Vi() || Ko && Ko.Vi() ? !0 : !1;
  }
  function fV() {
    14 == ki.g || li ? ek() : RG();
    ac.va && FE(ac.va);
  }
  function Gq() {
    let h = window.location.href;
    return h && -1 != h.indexOf("docs.google.com/presentation/d/") && window == window.top;
  }
  function Pm() {
    let h = window.location.href;
    return h && -1 != h.indexOf("docs.google.com/presentation/d/") && window != window.top;
  }
  function GG() {
    let h = Z.l || Kh() && !fq(1);
    Na || (h = ac.lb());
    return h;
  }
  function gV() {
    for ("annotate-plugin-annotation-toolbar annotate-plugin-more-option-popup annotate-plugin-recording-option-popup annotate-plugin-annotation-text-format-toolbar annotate-highlight-assessment-qtype-toolbar annotate-highlight-plugin-text-size-toolbar annotate-highlight-plugin-font-family-toolbar annotate-highlight-plugin-pen-toolbar annotate-highlight-plugin-highlighter-toolbar annotate-highlight-plugin-text-color-toolbar annotate-highlight-plugin-text-fill-color-toolbar AnnotateLoadAnnotationsBtn AnnotateImportPdfBtn AnnotateStartAnnotationModeBtn AnnotateAnnotationCaptureCanvas AnnotateAnnotationSelectionCanvas AnnotateAnnotationRemoteSelectionCanvas AnnotateNotesAnnotationCaptureCanvas AnnotateFeedbackAnnotationCaptureCanvas AnnotateScreenShotCaptureCanvas AnnotateScreenShotCopyCanvas AnnotateScreenCaptureDiv AnnotateScreenShotCapturelefthandle AnnotateScreenShotCapturetophandle AnnotateScreenShotCapturerighthandle AnnotateScreenShotCapturebottomhandle AnnotateScreenShotCaptureTopLefthandle AnnotateScreenShotCaptureBottomLefthandle AnnotateScreenShotCaptureBottomRighthandle AnnotateScreenCaptureBtnCancel AnnotateScreenCaptureBtnCancel AnnotateScreenCaptureBtnOk AnnotateScreenCaptureBtnOkNewPage AnnotateScreenCaptureBtnCopy AnnotateScreenShotCaptureMsg AnnotateErrorMsgOverlay AnnotateMsgDialog annotate-highlight-plugin-addhightlighttoolbar annotate-highlight-plugin-toolbar annotate-texttool-edit-toolbar annotate-mathtool-edit-toolbar annotate-texttool-resize-width-handle annotate-mathtool-resize-width-handle annotate-texttool-resize-element-handle annotate-mathtool-resize-element-handle annotate-texttool-resize-element-box annotate-mathtool-resize-element-box AnnotateGradingModeDiv AnnotateUpdateSlidesBtn annotate-plugin-livefeed-option-popup annotate-plugin-media-option-popup AnnotatePluginTimerClock annotate-highlight-plugin-comment-toolbar annotate-student-notes-control-toolbar".split(" ").forEach(h => 
    {
      for (; document.getElementById(h);) {
        document.getElementById(h).remove();
      }
    }); document.getElementById("AnnotateSlidesPreviewBlockDiv");) {
      document.getElementById("AnnotateSlidesPreviewBlockDiv").remove();
    }
    wH = null;
    Qa && Qa.el && Qa.el.remove();
    uf && uf.remove();
    Kf && Kf.remove();
    bp && bp.gb();
    "annotate-color-popup AnnotatePluginMediaContainer AnnotatePluginAudioItemContainer AnnotatePluginImageContainer annotate-modal annotate-text-container annotate-mathtext-container AnnotatePluginAssessmentCommon AnnotateNet_widget".split(" ").forEach(h => {
      for (h = document.getElementsByClassName(h); 0 < h.length;) {
        h[h.length - 1].remove();
      }
    });
    RB && RB.U();
    pw.U();
    Lg && Lg.U();
    Up && Up.U();
    ne = GA = EA = DA = Da = null;
    Ao.nj();
    V && V.U();
    jb && jb.U();
    Jv && (Jv.removeEventListener(mP.i, bV), Jv.removeEventListener(mP.g, aV), Jv.gb());
    Xo && Xo.gb();
    Lo && Lo.U();
    Yo && Yo.gb();
    Kv && Kv.U();
    m_ && m_.U();
    V && V.U();
    mC && mC.U();
    du && du.U();
    WB && WB.U();
    ac && ac.U();
    Ro.gb();
    at(!1);
    Ls(1);
    ct(S, 2, null);
    ct(S, 3, null);
    for (NB && rY(); document.getElementById("annotate-highlight-plugin-recording-toolbar");) {
      document.getElementById("annotate-highlight-plugin-recording-toolbar").remove();
    }
    te = null;
    Mc && Mc.U();
    cj && cj.U();
    Lh && (Lh.disconnect(), Lh = null);
    cd && cd.U();
    z0(lw);
    -1 != bu && (clearInterval(bu), bu = -1);
    Mw.U();
    kc && kc.U();
    Ta && Ta.j && Ta.j.U();
  }
  function Xa(h, m) {
    Wl() && (B4(h.type) && !h.isParentIFrame && (h.isParentIFrame = hV), chrome.runtime.sendMessage(h, q => {
      chrome.runtime.lastError ? console.log(chrome.runtime.lastError) : m && m(q);
    }));
  }
  function B4(h) {
    return "annotatePreviewKeyEvent" == h || "annotateNavigateSlideGo" == h || "ANNOTATE_SLIDE_PREVIEW_DOC_DATA_RES_EVENT" == h || "annotatePreviewIndexJumped" == h || "annotatePreviewIndexChanged" == h || "AnnotationPreviewActiveSlideChanged" == h || "annotatePreviewSlideListUpdated" == h ? !0 : !1;
  }
  function s4(h, m) {
    gi(h, m);
  }
  function C4(h) {
    return chrome.runtime.sendMessage({type:"getLocalStorage", key:h}).then(m => m);
  }
  function Gt(h) {
    for (; null != h && h != document.documentElement;) {
      if (-1 == iV.lastIndexOf(h)) {
        for (iV.push(h), h.addEventListener("scroll", wq), h = h.parentElement; null != h && h != document.documentElement;) {
          let m = window.getComputedStyle(h);
          if ("scroll" == m.overflowY || "auto" == m.overflowY) {
            break;
          }
          h = h.parentElement;
        }
      } else {
        break;
      }
    }
  }
  function ZU() {
    return jb;
  }
  function jV() {
    return ac;
  }
  function dz(h) {
    if (!Ll()) {
      var m = window.location.href;
      -1 == wa.indexOf("docs.google.com/presentation/d/") || Ml() || window.innerWidth != kV || window.innerHeight != lV || (aj = !0);
      Yg(m) && -1 != m.indexOf("/docs/viewer") && (aj = !0);
      if (Gk(P) || Qk()) {
        aj = ae;
      }
      Ta && Ta.hd() && (aj = ae);
      if (cz && (Qm || aj || me)) {
        ak(h && ld, ld);
        if (!h || ld) {
          vl(!1), Tt(), gc(wa);
        }
        ld && !mo && Jf();
        Xa({type:"annotateGetToolbarPosition"}, function() {
        });
        -1 != wa.indexOf("docs.google.com/presentation/d/") && (aj = !0);
        (Gk(P) || Qk()) && kc && (PK(kc, !0), Qk() && QK(kc, !1));
      } else {
        -1 != wa.indexOf("docs.google.com/presentation/d/") && cz || Zj();
      }
      Qm && -1 != wa.indexOf("docs.google.com/presentation/d/") && (aj = !0);
    }
  }
  function NT() {
    if (-1 != wa.indexOf("docs.google.com/presentation/d/") && !me && !jd || Gk(P)) {
      var h = Rk(P), m = null;
      dH ? m = dH : m || (m = rk());
      m && (window == window.top || Gk(P)) && (Lh && Lh.disconnect(), dH = m, q0(lw, h.trim()), Lh = new MutationObserver(D4), Lh.observe(m, {childList:!0, attributes:!0, subtree:!0}));
    }
  }
  function PT() {
    if (!(-1 == wa.indexOf("docs.google.com/presentation/d/") && !Qk() || me || jd)) {
      var h = nk(), m = null;
      eH ? m = eH : m || (m = ok());
      m && window != window.top && (Lh && Lh.disconnect(), eH = m, q0(lw, h.trim()), mQ && qQ(lw.i), Lh = new MutationObserver(E4), Lh.observe(m, {childList:!0, attributes:!0, subtree:!0}));
    }
  }
  function E4() {
    var h = nk();
    lw.l(h);
  }
  function D4() {
    lw.l(Rk(P));
  }
  function gz() {
    var h = document.getElementsByTagName("iframe"), m = document.fullscreenElement && 1 >= document.fullscreenElement.getElementsByTagName("iframe").length;
    let q = wa;
    if (Gk(P) || kc.Ja()) {
      q = window.location.href;
    }
    V1(W);
    for (var v = null, B = 0; B < h.length; ++B) {
      if ((!mC || 2 != mC.i || h[B] != mC.g) && -1 === h[B].src.indexOf("GapiFrame/index.php")) {
        var E = m && eh(h[B], document.fullscreenElement);
        h[B].contentWindow.postMessage({type:"parentWindowFullScreenChanged", fullscreen:E, parentWidth:window.innerWidth, parentHeight:window.innerHeight, bToolbarInMinimizeMode:ld, bHideWhenMinimize:wl, bAnnotationMode:W.g}, "*");
        E && -1 != q.indexOf("docs.google.com/presentation/d/") && Xa({type:"CheckAndInsertScriptForFrame"}, null);
        if (-1 != q.indexOf("docs.google.com/presentation/d/") && (null == h[B].src || -1 == h[B].src.indexOf("docs.google.com/sharing/"))) {
          if (null == v) {
            v = L.Bm();
            E = null;
            var K = !1, U = !1;
            if (-1 != Ul().indexOf("docs.google.com/presentation/d/") && window.top == window || Gk(P)) {
              E = Rk(P);
              var na = No();
              mv(E, na);
              E = [];
              A(Lo) || (E = Zp(Lo.be));
              lv(E);
              E = {};
              E.pageAnnotations = iv();
              E.pageData = L.yp();
              K = PP();
              na = document.getElementById("office-editing-file-extension");
              U = null != na && "none" != na.style.display;
            }
            var ob = null, Ca = An();
            na = bl(1);
            null != na && 1 == ql() && (ob = Object.assign({}, na), cl(1) && (Ca = na.strPublishedAnnotationGuid));
            na = S.Jh;
            var qc = Cn(), Cd = st(), Ob = ql(), Nc = S.Sl, sg = S.zd, gf = S.j, Dd = Ws(), ce = S.m, De = v && (Rk(P) && v.Ja() || Gk(P)), io = v.Ja(), Py = v.pc(), Hl = v.hd();
            v = {type:"ANNOTATE_FORWARD_PARENT_ANNOTATION_DATA_TO_IFRAME", annotationData:E, bLoadedSavedAnnotations:na, savedAnnotationGuid:Ca, savedAnnotationPath:qc, savedAnnotationVersionNo:Cd, currAnnotationMode:Ob, strPageUrl:Nc, publisherCoTeacherInfo:ob, screenRecordingInProgress:K, strDocOwnerGuid:sg, uClassId:gf, strAssessmentFileGuid:Dd, uDocAccessedAs:ce, bPPTXFileInGoogleSlides:U, bClassroomSlidesPresentation:De, bClassroomSubmission:io, googleCourseWorkDetails:Py, courseWorkDetails:Hl, 
            changesSaveWidgetInClassroom:v.tk && "block" == v.tk.style.display, strCurrPageUrl:Ul(), bAnnotationMode:W.g, tempAnnotGUID:Ql.i, arrUnSavedMediaData:Yv(), oLivefeed:et(),};
          }
          h[B].contentWindow.postMessage(v, "*");
        }
      }
    }
  }
  function F4(h) {
    h = h.position;
    3 != S.g && (Da && h && h.toolbarPosition && (Da.style.top = h.toolbarPosition.top, Da.style.left = h.toolbarPosition.left, tg()), Ub && h.startAnnotationModeBtnPosition && (Ub.style.top = h.startAnnotationModeBtnPosition.top, Ub.style.right = h.startAnnotationModeBtnPosition.right), Va && h && h.importPdfBtnPosition && (Va.style.top = h.importPdfBtnPosition.top, Va.style.right = h.importPdfBtnPosition.right), kb && h && h.loadAnnotationsBtnPosition && (kb.style.top = h.loadAnnotationsBtnPosition.top, 
    kb.style.right = h.loadAnnotationsBtnPosition.right), W.g && Da && Da.offsetHeight && Ut(), ld || (po(), Wy(), Xy(), ek()));
  }
  function v4(h) {
    function m() {
      q && (clearTimeout(q), q = 0, h());
    }
    bz = cu.LOADING;
    let q = setTimeout(m, 1000);
    document.fonts.load("24px extension-icons", String.fromCodePoint(57345)).then(m, m);
  }
  function G4(h) {
    return "AnnotateSendStudentFeedbackData" == h || "ANNOTATE_PDF_SEND_BYTES" == h || "ANNOTATE_UPDATE_PDF_ACTIVE_PAGE" == h || "ANNOTATE_UPDATE_SLIDE_ACTIVE_PAGE" == h || "ANNOTATE_GET_PAGE_THUMBNAIL_FOR_BG" == h || "ANNOTATE_GET_TEACHER_PAGE_THUMBNAIL_FOR_BG" == h || "ANNOTATE_GET_STUDENT_PAGE_THUMBNAIL_FOR_BG" == h || "ANNOTATE_SHOW_HIDE_DOC_ANNOTATIONS" == h || "ANNOTATE_NOTES_PANEL_VIEW_CHANGED" == h || "ANNOTATE_NOTES_DOCUMENT_UPDATED" == h || "ANNOTATE_GET_FEEDBACK_SYNC_DATA" == h || "ANNOTATE_PARSE_FEEDBACK_SYNC_DATA" == 
    h || "CONTENT_SHARING_STATE_FROM_NOTES_PANEL_TO_DOC_VIEW" == h || "ANNOTATE_MEDIA_REENCODED" == h || "CHECK_BEFORE_NOTES_VIEWER_ACTION" == h;
  }
  function mV(h) {
    if (Ik()) {
      var m = !1;
      if (h.source != window && h.source != window.top) {
        var q = !1;
        if (window == window.top) {
          for (var v = document.getElementsByTagName("iframe"), B = 0; B < v.length; ++B) {
            if (v[B].contentWindow == h.source) {
              q = !0;
              break;
            }
          }
          fw() && QI() == h.source ? m = q = !0 : "ANNOTATE_SEND_ANNOTATION_DATA_IFRAME_TO_PARENT" != h.data.type && "AnnotateSlidePresentationExitNoAnnotationData" != h.data.type || !Lk() || (q = !0);
        } else {
          fw() && QI() == h.source ? m = q = !0 : mC && (mC.g ? mC.g.contentWindow : null) == h.source ? q = !0 : cj && (cj.g ? cj.g.contentWindow : null) == h.source ? q = !0 : "ANNOTATE_FORWARD_PARENT_ANNOTATION_DATA_TO_IFRAME" != h.data.type && "parentWindowFullScreenChanged" != h.data.type || !h.data.bClassroomSlidesPresentation || !Qk() && -1 == h.data.strCurrPageUrl.indexOf("classroom.google.com/g/tg/") || (q = !0);
        }
        if (!q && (!h.data || "childWindowAnnotationData" != h.data.type && !G4(h.data.type))) {
          return;
        }
      }
      if (h.data && "object" == typeof h.data) {
        if (m && fw()) {
          KI(h);
        } else {
          if ("annotateAutomatePopUp" == h.data.type) {
            Xa({type:"annotateAutomatePopUp", values:h.data.values}, null);
          } else {
            if ("annotateAutomateResetToolbar" == h.data.type) {
              L.sa({type:"annotateSaveCustomProperties", dictCustomPropData:{}}, null), Xa({type:"annotateAutomatePopUp", values:{annotateAnnotationModeGot:0, annotateMinimizeModeUpdated:0, annotateAllowMinimizeModeDrawingUpdated:0}}, null);
            } else {
              if ("ANNOTATE_SEND_ANNOTATION_DATA_IFRAME_TO_PARENT" == h.data.type) {
                if (m = h.data, (Lk() || Gk(P)) && (m.bAnnotationDoneInPresentationMode || m.bLoadedSavedAnnotations || u0(m.annotationData.pageAnnotations))) {
                  v = q = !1;
                  Il = null;
                  if (PP() && Jv.l || Nh || ej) {
                    Nh ? Nh = !1 : ej ? ej = !1 : (q = !0, Rm(null), Il = Object.assign({}, m)), v = !0;
                  }
                  Gq() && V && oR(V) && (RR(!q) && (v = !0), q || (Il = Object.assign({}, m)));
                  if (v) {
                    return;
                  }
                  Gk(P) || kc && kc.Ja() ? ($c(m.annotationData, m.bLoadedSavedAnnotations, m.savedAnnotationId, m.savedAnnotationGuid, m.savedAnnotationPath, m.savedAnnotationVersionNo, m.bMediaContentModified, m.publisherCoTeacherInfo, m.arrDeletedSlideId, m.presentationRefAnnotationId, m.uDocAccessedAs), Oo(S).Rj(!0)) : Dh(m.annotationData, m.bLoadedSavedAnnotations, m.savedAnnotationId, m.savedAnnotationGuid, m.savedAnnotationPath, m.savedAnnotationVersionNo, m.bMediaContentModified, m.publisherCoTeacherInfo, 
                  m.arrDeletedSlideId, m.presentationRefAnnotationId, m.presentationRefAnnotationGuid, m.uDocAccessedAs, m.tempAnnotGUID, m.arrUnSavedMediaData, m.strAssessmentFileGuid, m.bAssessmentContentModified, m.oLivefeed);
                } else if (PP() && Jv.l || Nh || ej) {
                  m = !1, Il = null, Nh ? Nh = !1 : ej ? ej = !1 : (m = !0, Rm(null)), Gq() && V && oR(V) && RR(!m);
                }
              }
              "AnnotateSlidePresentationExitNoAnnotationData" == h.data.type && (m = h.data, q = !1, PP() && Jv.l || Nh || ej ? (Il = null, Nh ? Nh = !1 : ej ? ej = !1 : (q = !0, Rm(null))) : m.arrDeletedSlideId && 0 < m.arrDeletedSlideId.length && t0(m.arrDeletedSlideId, m.presentationRefAnnotationGuid), Gq() && V && oR(V) && RR(!q));
              if ("parentWindowFullScreenChanged" == h.data.type) {
                document.body && !Ll() && (lw.M = !0, Qm = h.data.fullscreen, kV = h.data.parentWidth, lV = h.data.parentHeight, wl = h.data.bHideWhenMinimize, Fh(P) && (Zn(), gc(wa)), dz(h.data.bAnnotationMode), cz && (Qm || aj || me) && (!W.g || h.data.bToolbarInMinimizeMode) && (vl(!1), Tt(), gc(wa)), ld && !mo && Jf(), tl(), St(), Vy());
              } else {
                if ("AnnotateRedirectToUserSettings" == h.data.type) {
                  Xa(h.data, E => {
                    E && E.bSuccess || window.postMessage({type:"AnnotateRedirectToUserSettingsResp"}, "*");
                  });
                } else {
                  if ("ANNOTATE_FORWARD_PARENT_ANNOTATION_DATA_TO_IFRAME" == h.data.type) {
                    document.body && !Ml() && (Fh(P) && "bEventServerConnected" in h.data ? (console.log(`%[event server] connected in iframe: ${h.data.bEventServerConnected}`), zh(h.data.bEventServerConnected)) : (P.M = h.data.bPPTXFileInGoogleSlides, Pm() && Xa({type:"googleSlidePresentationModeStart"}, null), h.data.bClassroomSlidesPresentation && (P.j = h.data.strCurrPageUrl, ae = ko.bGradeWithAnnotate, dz(!0)), h.data.bClassroomSlidesPresentation && (Qk() || Kk(P)) && (S.La || Ls(3), S.Ya || 
                    Ls(2), S.g = h.data.currAnnotationMode), h.data.bClassroomSlidesPresentation && kc && (Qk() || Kk(P)) && (h.data.bClassroomSubmission && (kc.s = h.data.bClassroomSubmission, kc.o = h.data.courseWorkDetails, kc.Sj(h.data.googleCourseWorkDetails), JK(kc, !0)), Kh() ? QK(kc, !1) : WK(kc), h.data.changesSaveWidgetInClassroom && Qk() && MK(kc, !0, "CHANGES SAVED")), (Qm || aj) && !nV && h.data.annotationData && (au = !1, m = (m = u0(h.data.annotationData.pageAnnotations)) || h.data.savedAnnotationId && 
                    -1 != h.data.savedAnnotationId || h.data.savedAnnotationGuid && null != h.data.savedAnnotationGuid, h.data.annotationData.baseAnnotationData && (q = h.data.annotationData.baseAnnotationData, m = m || u0(q.pageAnnotations)), h.data.annotationData.notesAnnotationData && (q = h.data.annotationData.notesAnnotationData, m = m || u0(q.pageAnnotations)), m ? (nV = !0, Zn(), tl(), St(), Vy(), h.data.strPageUrl && (S.Sl = h.data.strPageUrl), h.data.screenRecordingInProgress && (au = !0), 
                    Cg({type:"AnnotateGetCurrentPresentationInfo", bForSave:!1, strGUID:-1, annotationData:h.data.annotationData, currAnnotationMode:h.data.currAnnotationMode, publisherCoTeacherInfo:h.data.publisherCoTeacherInfo, savedAnnotationId:h.data.savedAnnotationId, savedAnnotationGuid:h.data.savedAnnotationGuid, savedAnnotationPath:h.data.savedAnnotationPath, savedAnnotationVersionNo:h.data.savedAnnotationVersionNo, uDocOwnerId:h.data.uDocOwnerId, uClassId:h.data.uClassId, strAssessmentFileGuid:h.data.strAssessmentFileGuid, 
                    uDocAccessedAs:h.data.uDocAccessedAs, tempAnnotGUID:h.data.tempAnnotGUID, arrUnSavedMediaData:h.data.arrUnSavedMediaData, oLivefeed:h.data.oLivefeed,}, h.data.bLoadedSavedAnnotations, h.data.savedAnnotationId, h.data.savedAnnotationGuid, h.data.savedAnnotationPath, h.data.savedAnnotationVersionNo)) : h.data.screenRecordingInProgress && $G())));
                  } else {
                    if ("AnnotateSendStudentFeedbackData" == h.data.type) {
                      window != window.top && h.data.bApplyForceFully && (e(h.data), window.postMessage({type:"AnnotateAppliedStudentFeedbackData"}, "*"));
                    } else {
                      if ("chromeExtensionAnnotateAction" == h.data.type) {
                        null != h.data.actionData && GQ(h.data.actionData);
                      } else {
                        if (mC && (mC.g ? mC.g.contentWindow : null) == h.source && "chromeExtensionServerRequest" == h.data.type) {
                          h.data.requestData && p4(h.data.requestData);
                        } else {
                          if ("ANNOTATE_PDF_SEND_BYTES" == h.data.type) {
                            window == window.top ? D2(h.data) : h.source != window && hd(h.data);
                          } else {
                            if ("ANNOTATE_GET_PAGE_THUMBNAIL_FOR_BG" == h.data.type) {
                              Na ? window != window.top && h.source != window && window.postMessage(h.data, "*") : jd && Xa({type:"ANNOTATE_REQ_SLIDE_THUMBNAIL_DATA", presentationId:h.data.presentationId, slideId:h.data.uPageIndex}, E => {
                                E && (console.log(`${"ANNOTATE_REQ_SLIDE_THUMBNAIL_DATA"}, ${E.type} ${h.data.uPageIndex}`), "ANNOTATE_RES_SLIDE_THUMBNAIL_DATA" == E.type ? p1(E) : "ANNOTATE_RELOAD_SLIDE_THUMBNAIL" == E.type ? window.postMessage({type:"ANNOTATE_SLIDE_ACTIVE_PAGE_CHANGED", curSlideId:h.data.uPageIndex}, "*") : "ANNOTATE_REQ_SLIDE_THUMBNAIL_DATA_ERROR" == E.type && 3 == E.type && console.log("slide thumbnail error: fetch thumbnail failed. "));
                              });
                            } else {
                              if ("ANNOTATE_PDF_SEND_PAGE_THUMBNAIL" == h.data.type) {
                                window != window.top && h.source == window && p1(h.data);
                              } else {
                                if ("ANNOTATE_ASSESSMENT_QUESTION_SELECTION_DATA" == h.data.type || "ANNOTATE_ASSESSMENT_QUESTION_CAPTURE_DATA_RESPONSE" == h.data.type) {
                                  window == window.top && BX(h.data);
                                } else {
                                  if ("ANNOTATE_GET_TEACHER_PAGE_THUMBNAIL_FOR_BG" == h.data.type) {
                                    m = h.data.pageIndex, B = h.data.annotationData, q = k1(B, m, h.data.uWidth, h.data.uHeight), v = !1, Na && B && "arrTextHighlights" in B && (B = B.arrTextHighlights) && 0 < B.length && (v = !0, hd({annotationImgData:q, pageIndex:m, uPageWidth:Z.wc[m].width, uPageHeight:Z.wc[m].height, arrTextHighlights:B, bBaseThumbnail:!0, type:"ANNOTATE_PDF_GET_DRAWN_TEXT_HIGHLIGHTS"})), v || window.postMessage({annotationImgData:q, pageIndex:m, type:"ANNOTATE_SEND_TEACHER_PAGE_THUMBNAIL_FOR_BG"}, 
                                    "*");
                                  } else {
                                    if ("ANNOTATE_GET_STUDENT_PAGE_THUMBNAIL_FOR_BG" == h.data.type) {
                                      window != window.top && h.source != window && q1(h.data);
                                    } else {
                                      if ("ANNOTATE_SHOW_HIDE_DOC_ANNOTATIONS" == h.data.type) {
                                        window != window.top && 3 == S.g && W.o(h.data);
                                      } else {
                                        if ("ANNOTATE_PDF_SEND_DATA_FOR_NOTES_VIEW" == h.data.type) {
                                          window == window.top && fw() && SI(h.data.pageIndex, h.data.imgData);
                                        } else {
                                          if ("ANNOTATE_NOTES_PANEL_VIEW_CHANGED" == h.data.type) {
                                            window != window.top && h.source != window && Na && (h.data.type = "ANNOTATE_PDF_SHOW_HIDE_SELECTOR", hd(h.data));
                                          } else {
                                            if ("ANNOTATE_NOTES_DOCUMENT_UPDATED" == h.data.type) {
                                              window != window.top && h.source != window && 3 == S.g && (m = h.data.msgData, Na ? jO(m) : jd && (lO(m), h.data.frameId = NH(zH), h.data.type = "annotateLiveNotesRequestEvent", Xa(h.data, null)));
                                            } else {
                                              if ("CONTENT_SHARING_STATE_FROM_NOTES_PANEL_TO_DOC_VIEW" == h.data.type) {
                                                window != window.top && h.source != window && 3 == S.g && jd && zH && HH(h.data.bContentSharing);
                                              } else {
                                                if ("CHECK_BEFORE_NOTES_VIEWER_ACTION" == h.data.type) {
                                                  window != window.top && h.source != window && 3 == S.g && (m = h.data.NotesviewerCheckFor, Na ? null != Ql.j ? (console.log("CHECK_BEFORE_NOTES_VIEWER_ACTION - [ignore.. processing prev action]"), gw("Saving changes, please wait...", !0)) : Jv && eP(Jv.g) ? (Jv.J(null), Ql.j = m, console.log("CHECK_BEFORE_NOTES_VIEWER_ACTION -  wait for stop rec and save"), gw("Saving recording, please wait...", !0)) : Ql.g ? (Ql.j = m, console.log("CHECK_BEFORE_NOTES_VIEWER_ACTION - wait for in progress save"), 
                                                  gw("Saving changes, please wait...", !0)) : window.postMessage({type:"CHECK_BEFORE_NOTES_VIEWER_ACTION", NotesviewerCheckFor:m}, "*") : jd && zH && (NH(zH) ? (m = {type:"CHECK_BEFORE_NOTES_VIEWER_ACTION_TO_PREVIEW", frameId:NH(zH), NotesviewerCheckFor:m}, console.log("Sent from preview parent", m), VH(zH, m)) : console.log("preview parent to notes controller (*)", {type:"CHECK_BEFORE_NOTES_VIEWER_ACTION", NotesviewerCheckFor:m})));
                                                } else {
                                                  if ("ANNOTATE_GET_FEEDBACK_SYNC_DATA" == h.data.type) {
                                                    if (window != window.top && h.source != window && 3 == S.g) {
                                                      if (m = h.data.docGuid, q = h.data.strOwnerGuid, v = h.data.versionTree, B = h.data.senderInfo, Na) {
                                                        let E = tv(v);
                                                        E && v.pdfTree && Z && (E.docSyncData = YJ(Z, v.pdfTree));
                                                        E && window.postMessage({type:"ANNOTATE_SEND_FEEDBACK_SYNC_DATA", msgData:{docGuid:m, strOwnerGuid:q, syncData:E, senderInfo:B,}}, "*");
                                                      } else {
                                                        jd && (m = {type:"annotateLiveNotesRequestEvent", frameId:NH(zH), msgData:{type:"ANNOTATE_GET_DOCUMENT_SYNC_DATA", docGuid:m, versionTree:v, senderInfo:B, strOwnerGuid:q, docMode:3},}, zH && VH(zH, m));
                                                      }
                                                    }
                                                  } else {
                                                    if ("ANNOTATE_PARSE_FEEDBACK_SYNC_DATA" == h.data.type) {
                                                      window != window.top && h.source != window && 3 == S.g && (m = h.data.docGuid, q = h.data.strOwnerGuid, v = h.data.syncData, qt() == m && (Na ? (uv(v), HI(Ao)) : jd && (m = {type:"annotateLiveNotesRequestEvent", frameId:NH(zH), msgData:{type:"ANNOTATE_PARSE_DOCUMENT_SYNC_DATA", docGuid:m, strOwnerGuid:q, syncData:v, docMode:2},}, zH && VH(zH, m))));
                                                    } else {
                                                      if ("ANNOTATE_UPDATE_SLIDE_ACTIVE_PAGE" == h.data.type) {
                                                        window != window.top && h.source != window && jd && zH && RH(h.data.uPageIndex);
                                                      } else {
                                                        if ("ANNOTATE_MEDIA_REENCODED" == h.data.type) {
                                                          h.data.arrMediaReencodeStatus && window != window.top && h.source != window && (m = h.data.docGuid, 3 == S.g && (Na ? S.yg(h.data.arrMediaReencodeStatus, 3) : jd && (m = {type:"annotateLiveNotesRequestEvent", frameId:NH(zH), msgData:{type:"ANNOTATE_MEDIA_REENCODED", docGuid:m, docMode:3, arrMediaReencodeStatus:h.data.arrMediaReencodeStatus},}, zH && VH(zH, m))));
                                                        } else {
                                                          if (!("ANNOTATE_CURRENT_ANNOTATIONS_SHOW_HIDE_CHANGED" == h.data.type || "AnnotateFeedbackDocUpdated" == h.data.type || RJ(Z, h.data, h.source) || oG(ul, h.data) || Mc && yK(Mc, h.data) || cj && cJ(cj, h.data) || "SendRequestToServer" == h.data.type)) {
                                                            if ("annotateLoadGoogleSlides" == h.data.type) {
                                                              Xa(h.data, E => {
                                                                E && "type" in E && ("annotatePresentationLoadError" == E.type || "annotatePresentationReload" == E.type) && window.postMessage(E, "*");
                                                              });
                                                            } else {
                                                              if (h && q4(h.data.type)) {
                                                                Xa(h.data, null);
                                                              } else {
                                                                if ("annotateCheckInitPluginContent" == h.data.type) {
                                                                  window.postMessage({type:"annotateInitPluginContentResponse"}, "*");
                                                                } else {
                                                                  if ("annotateRetryAuthForPresentation" == h.data.type) {
                                                                    if (window.top == window) {
                                                                      ei();
                                                                      return;
                                                                    }
                                                                    if (h.data.isParentIFrame && oV) {
                                                                      Xa(h.data, null);
                                                                      return;
                                                                    }
                                                                  }
                                                                  "annotateLivestreamEnded" == h.data.type && V && Kk(P) ? (UR(V), VR(V, h.data.bLogoutOpenUser)) : "annotatePresentationEndedCloseClicked" == h.data.type && Lk() && (V && KR(V), bC());
                                                                }
                                                              }
                                                            }
                                                          }
                                                        }
                                                      }
                                                    }
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  function TU(h) {
    h.preventDefault();
  }
  function YG() {
    ld && (ld = !1, Xa({type:"annotateAnnotationModeGot", value:!0}, null), xq(!0));
  }
  function Ut() {
    if (Va && W.g && Da && Da.offsetHeight) {
      var h = Da.getBoundingClientRect();
      h = {left:h.left, top:h.top, right:h.right, bottom:h.bottom};
      h.bottom += 40;
      var m = Va.getBoundingClientRect();
      gh(h, m) && (Va.style.top = h.bottom + "px");
    }
    kb && Da && W.g && Da.offsetHeight && (h = Da.getBoundingClientRect(), h = {left:h.left, top:h.top, right:h.right, bottom:h.bottom}, h.bottom += 40, m = kb.getBoundingClientRect(), gh(h, m) && (kb.style.top = h.bottom + "px"));
  }
  function ZT() {
    Nt();
    Jf();
    Mm = !1;
    td();
    jo(ko);
    Da.style.opacity = 1;
    te && (te.style.opacity = 1);
    ek();
    W.C = !1;
    gc(wa);
    pc(wa);
  }
  function YT(h, m) {
    Ip();
    ii(m ? "10.8.2" : "10.8.3");
    h.preventDefault();
    Nt();
    setTimeout(function() {
      Xa({type:"annotateScreenShotRectGot", bNewPage:m ? "1" : "0", x:cb, y:Ga, width:sb - cb, height:qb - Ga, windowWidth:window.innerWidth, windowHeight:window.innerHeight}, null);
      Mm = !1;
      td();
      jo(ko);
      Jf();
      eu = !0;
      Mt = setTimeout(function() {
        F("Unable to complete capture. No notebook open.", 3000);
      }, 2000);
    }, 200);
  }
  function $G() {
    JG = au = !1;
    Kn("Continue recording?", "You are currently recording your screen. Would you like to continue and record your presentation?", "CONTINUE RECORDING", "CANCEL", h => {
      JG = h;
      Xd();
    }, function() {
      Bq();
    }, function() {
    }, null, !1, null, !1, 0, 0, !0, "Trim initial part and save presentation mode video only.", null);
  }
  function Bq() {
    -1 != window.location.href.indexOf("docs.google.com/presentation/d/") && window != window.top && Xa({type:"DoNotRecordPresentation"}, null);
  }
  function H4(h) {
    h = {type:"createClip", strClipName:h, uDefaultDriveCategoryId:M.Xi, uDefaultDriveCategoryParentId:0};
    hz = !0;
    Xa(h, null);
    pV = setTimeout(function() {
      hz = !1;
      console.log(">>> Create clip timed out!");
      Jq = !1;
      Xa({type:"StartSlidesPresentationRecordingFailed", errorMessage:"Failed to create clip, please try again"}, null);
    }, 3E4);
  }
  function iz(h, m, q, v, B, E, K) {
    console.log(">>> Saving media to clip", q);
    B = {strThumbnailData:QT, strRecDoc:'{"arrFrames":[{"strFrameName":"frame0.json","uFrameType":0}],"nNextAudioId":0,"uVersionNo":1,"arrImageRefCounts":[],"arrVideoRefCounts":[{"resName":"' + E + '","refCount":1}],"arrRecordedMediaRefCounts":[],"uRecordingSaveVersionNo":3,"LastFrameId":1,"nRefDocID":-1,"uClipStyle":2}', arrModifiedFrames:[{strFileName:"frame0.json", uFrameType:0, strData:'{"mediaPkt":{"strURL":"","strWaveform":"","arrWaveformPoints":[],"duration":0,"strExtension":"","nMediaType":0,"bEncoded":false,"uStartTime":0,"bShowInPreview":false,"startTimeOnMainTimeLine":0},"plotData":"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA","arrFrameImages":[],"nMediaType":0,"strFrameName":"frame0.json","nFrameType":0,"strPageType":"page_drawing","strSvgBgName":"","strSvgBgThumbName":"","lstActionPackets":[{"data":{"strFileName":"","strTitle":"","strPageType":"page_drawing","version":0,"nHeight":600,"nWidth":800,"elementCount":0,"nMaxElementId":-1,"arrElement":[],"arrZoomRect":[]},"ePktType":2,"iID":0,"iTimeStamp":0,"metaData":{"bPauseFrame":0,"bgData":{"bgLine":{"bVisible":0},"bgGrid":{"bVisible":0,"nType":0,"nStyle":0,"bTight":1,"uOriginalWidth":0,"uOriginalHeight":0},"bgXAxis":{"bVisible":0,"nLocation":1,"nStartNum":0,"nIncNum":1},"bgYAxis":{"bVisible":0,"nLocation":1,"nStartNum":0,"nIncNum":1},"bgColor":{"color":"#ffffff"},"bgImage":{"bVisible":0,"strImgName":"","strBasePath":"","uLicense":-1,"strOwnerName":"","strOwnerUrl":"","strImagePageUrl":"","strThumbnailURL":"","uOriginalWidth":0,"uOriginalHeight":0,"uRotation":0,"uNaturalWidth":0,"uNaturalHeight":0},"bgSVGCanvg":{"bVisible":0,"strImgName":"","strBasePath":"","uLicense":-1,"strOwnerName":"","strOwnerUrl":"","strImagePageUrl":"","strThumbnailURL":"","uOriginalWidth":0,"uOriginalHeight":0,"uRotation":0,"uNaturalWidth":0,"uNaturalHeight":0,"arrResource":[],"strThumbName":"","strBGImageName":""}}}},{"data":{"seekTo":0},"ePktType":1,"iID":1,"iTimeStamp":0,"eActionType":27},{"data":{},"ePktType":1,"iID":2,"iTimeStamp":8583,"eActionType":22}],"arrAnnotationImages":null,"lstCaptions":[],"bgVideoSequence":{"sequenceType":2,"strData":"{\\"arrImages\\":[],\\"nRecSequenceType\\":2,\\"strPageType\\":\\"page_video\\",\\"videoData\\":{\\"strVideoId\\":\\"media/' + 
    E + '.webm\\",\\"strThumbnailUrl\\":\\"\\",\\"strVideoTitle\\":\\"' + E + '\\",\\"strUploadedBy\\":\\"\\",\\"strChannelId\\":\\"\\",\\"duration\\":' + K + ',\\"startTime\\":0,\\"endTime\\":' + K + ',\\"videoServerType\\":1,\\"videoUploadStatus\\":2,\\"strToken\\":\\"' + E + '\\",\\"strRecordingUniqueName\\":\\"\\",\\"strRecordingUserAddress\\":\\"\\",\\"strRelativeFilePath\\":\\"\\"}}"},"frameEndTime":0,"frameStartTime":0}'}], arrDeletedFrames:[], arrAddedScreenRecordingMedia:[{strURL:E, strExtension:".webm", 
    nMediaType:2, bShowInPreview:!1}], arrAddedRecordedMedia:[], bOwnedFile:!0, uService:909, uDuration:K / 1000, uGeneratePreview:0, strDocData:"", strPageData:"", bGenerateVideoThumbnail:0, strRecordedVideoThumbFileName:null, bForceSaveAndLock:!0, uClipStyle:2, oCreateExtensionClipReqResForComet:B};
    Ch() ? (B.strRecordingGuid = v, B.strOwnerGuid = m) : (B.uRecordingId = q, B.uOwnerId = h);
    h = {type:"saveClip", oRequest:B};
    jz = !0;
    Xa(h, null);
    qV = setTimeout(function() {
      jz = !1;
      console.log(">>> Save clip timed out!");
      Sn();
      rV(!0);
    }, 3E4);
  }
  function rV(h) {
    Kn("", h ? "Error saving presentation recording to content library, request timed out." : "Error saving presentation recording to content library.", "DISCARD RECORDING", "RETRY", function() {
      fH();
      WP();
      Jv.l = !1;
    }, function() {
      Ch() && (Jv.l ? Jv.m && !A(qo) && null != Oh && Oh.strGUID == qo && (Nn(), Vn("Saving presentation recording to content library...", null), iz(M.s, Bh(), -1, qo, Oh, Jv.m[0].strURL, ew())) : Jv.l && Jv.m && 0 < ro && null != Oh && Oh.uRecordingId == ro && (Nn(), Vn("Saving presentation recording to content library...", null), iz(M.s, Bh(), ro, null, Oh, Jv.m[0].strURL, ew())));
    });
    document.webkitIsFullScreen && -1 != wa.indexOf("docs.google.com/presentation/d/") && document.exitFullscreen && (ej = !0, document.exitFullscreen(), setTimeout(() => {
      ej = !1;
    }, 3000));
  }
  function fH() {
    if (Il) {
      let h = Il;
      Dh(h.annotationData, h.bLoadedSavedAnnotations, h.savedAnnotationId, h.savedAnnotationGuid, h.savedAnnotationPath, h.savedAnnotationVersionNo, h.bMediaContentModified, h.publisherCoTeacherInfo, h.arrDeletedSlideId, h.presentationRefAnnotationId, h.presentationRefAnnotationGuid, h.uDocAccessedAs, h.tempAnnotGUID, h.arrUnSavedMediaData, h.strAssessmentFileGuid, h.bAssessmentContentModified, h.oLivefeed);
      Il = null;
    }
  }
  function VT(h, m) {
    let q = null;
    try {
      q = JSON.parse(h);
    } catch (B) {
    }
    let v = null;
    try {
      v = JSON.parse(m);
    } catch (B) {
    }
    return null != q && null != v ? q.isDriveFile == v.isDriveFile && q.googleFileId == v.googleFileId : h == m;
  }
  function I4(h, m) {
    if (m && Z) {
      switch(h) {
        case "ANNOTATE_PDF_PAGE_INSERTED":
          var q = m.pageId;
          h = m.uuid;
          NJ(Z, m.pageIndex, q, m.pdfPageIndex, m.width, m.height, !0);
          h && (q = UJ(Z, q)) && nh(q, h);
          Ho(m.eleData, !0);
          Jl();
          break;
        case "ANNOTATE_PDF_PAGE_REMOVED":
          h = m.pageId;
          OJ(Z, m.pageIndex, h, !0);
          gH(h, 1);
          Jo.ct(h, 1);
          Ko.ct(h, 1);
          $k(h, 1);
          JZ(jb, h, 1);
          TZ(jb, h, 1);
          WZ(jb, h, 1);
          A(Lo) || EX(m.fd);
          Jl();
          break;
        case "ANNOTATE_PDF_PAGE_SIZE_CHANGED":
          q = m.width;
          let v = m.height, B = m.pageId, E = m.uuid;
          VJ(Z, m.pageIndex, B, q, v, m.bRight, m.rotation, !1);
          E && (h = UJ(Z, B)) && nh(h, E);
          Ho(m.eleData, !1);
          hH(B, q, v, 1);
          Jo.dt(B, q, v, 1);
          Ko.dt(B, q, v, 1);
          KZ(jb, B, q, v, 1);
          UZ(jb, B, q, v, 1);
          XZ(jb, B, q, v, 1);
          A(Lo) || FX(B, q, v);
          Jl();
          Zk(B, q, v, 1);
          break;
        case "ANNOTATE_PDF_SHOW_HIDE_PAGE":
          PJ(Z, m.arrPageId, m.bShow, !0);
      }
    }
  }
  function iH(h, m) {
    if (h) {
      var q = null, v = [];
      for (q of h.F) {
        v.push(q.bh());
      }
      q = {arrElement:v, arrTextElement:h.sl, arrCommentElements:h.Wd};
      m && (q.arrMarkToBeDeletedMediaElements = h.yq, q.arrMarkToBeDeletedImageElements = h.ms, q.arrMarkToBeDeletedVideoElements = h.ns);
      return q;
    }
  }
  function sV(h, m) {
    var q = h.action;
    h = h.data;
    let v = h.width, B = h.height;
    q == Vx && (q = by, v = ul.width, B = ul.height, nG(ul, {width:h.width, height:h.height}));
    q = {action:q, ub:8, data:{width:v, height:B, rs:h.rs}};
    m ? Zx(q) : Px(q);
  }
  function tV(h, m) {
    var q = h.action;
    h = h.data;
    var v = h.width;
    let B = h.height, E = h.rotation, K = S.g;
    if (q == Ux) {
      uV(h.S, h.fd, v, B, h.Ah);
      q = $x;
      OJ(Z, h.S, h.fd, !0);
      Jo.ct(h.fd, K);
      Ko.ct(h.fd, K);
      ac.ba(h.fd);
      $k(h.fd, K);
      var U = JZ(jb, h.fd, K);
      h.yq = U;
      U = TZ(jb, h.fd, K);
      h.ms = U;
      U = WZ(jb, h.fd, K);
      h.ns = U;
      U = [];
      A(Lo) || (U = EX(h.fd));
      h.ju = U;
      gH(h.fd, K);
    } else if (q == Qx) {
      q = iH(h, !0);
      vV(h.S, h.fd, v, B, h.Ah, q);
      q = ay;
      NJ(Z, h.S, h.fd, h.Ah, v, B, !0);
      for (U = 0; U < h.F.length; U++) {
        Io(S, h.F[U], K);
      }
      ac.B(h.Wd, K);
      Jo.Br(h.sl, K);
      Ko.Br(h.sl, K);
      jb.Kv(h.yq, h.ms, h.ns, K);
      A(Lo) || Lo.Uc.Kv(h.ju);
    } else if (q == Vx) {
      q = iH(h, !1);
      wV(h.S, h.fd, v, B, h.rs, h.rotation, q);
      q = by;
      v = Z.wc[h.S].width;
      B = Z.wc[h.S].height;
      E = Z.wc[h.S].rotation;
      VJ(Z, h.S, h.fd, h.width, h.height, h.rs, E != h.rotation ? h.rotation : void 0, !0);
      for (U = 0; U < h.F.length; U++) {
        Io(S, h.F[U]);
      }
      h.F = hH(h.fd, h.width, h.height, K);
      Jo.Br(h.sl, K);
      Ko.Br(h.sl, K);
      h.sl = Jo.dt(h.fd, h.width, h.height, K);
      h.sl = h.sl.concat(Ko.dt(h.fd, h.width, h.height, K));
      ac.B(h.Wd, K);
      h.Wd = ac.ea(h.fd, h.width, h.height, K);
      U = KZ(jb, h.fd, h.width, h.height, K);
      h.yq = U;
      U = UZ(jb, h.fd, h.width, h.height, K);
      h.ms = U;
      U = XZ(jb, h.fd, h.width, h.height, K);
      h.ns = U;
      U = [];
      A(Lo) || (U = FX(h.fd, h.width, h.height));
      h.ju = U;
    }
    v = {action:q, ub:4, data:{S:h.S, fd:h.fd, Ah:h.Ah, width:v, height:B, rs:h.rs, rotation:E, sl:h.sl, F:h.F, yq:h.yq, ms:h.ms, ns:h.ns, Wd:h.Wd, ju:h.ju}};
    m ? Zx(v) : Px(v);
    Jl();
    Zk(h.fd, h.width, h.height, K);
  }
  function hd(h) {
    -1 != window.location.href.indexOf("https://annotate.net") && window.postMessage(h, "*");
  }
  function Jl() {
    if (Z.Ea) {
      Z.Ea && (nd = Z.Ea.getBoundingClientRect(), nd.width = Z.clientWidth, nd.height = Z.clientHeight);
      if (V && SM() || 3 == S.g && Tn() && !Pl() && !Rl()) {
        var h = Z.scale;
        0 >= h && (h = 1);
        var m = Z.scrollY;
        let q = hl(Z, fl(Z, m).S, new il(Z.scrollX, m));
        m = {pageIndex:fl(Z, m).S, scale:h, xPageOffset:q.$a, yPageOffset:q.Ua, width:Z.clientWidth, height:Z.clientHeight, aspectRatio:Z.Ea.offsetWidth / Z.Ea.offsetHeight, bPageSelectorVisible:Z.o,};
        V && SM() ? (h = V, bR(h.ba, 0, m, h.ze.bind(h), null)) : null != pw && (m.docGuid = Tn(), window.postMessage({type:"ANNOTATE_FEEDBACK_DOCUMENT_EDITED", msgData:{type:"ANNOTATE_PDF_VIEW_UPDATED", data:m,}}, "*"));
      }
      h = zt();
      for (m = 0; m < h.length; m++) {
        wp(h[m]);
      }
      if (2 == S.g) {
        h = Dt();
        for (m = 0; m < h.length; m++) {
          wp(h[m]);
        }
        h = Ft();
        for (m = 0; m < h.length; m++) {
          wp(h[m]);
        }
      } else if (3 == S.g) {
        h = Dt();
        for (m = 0; m < h.length; m++) {
          wp(h[m]);
        }
        h = Et();
        for (m = 0; m < h.length; m++) {
          wp(h[m]);
        }
      }
      null != bp && sH();
      Jo.wm(Z);
      Ko.wm(Z);
      Tr(jb, Z);
      Yk();
      x0(!h.length || !W.i);
      Ro.ez();
      ac.va && FE(ac.va);
    }
  }
  function vV(h, m, q, v, B, E) {
    V && SM() && V.v({type:"ANNOTATE_PDF_PAGE_INSERTED", data:{pageId:m, pageIndex:h, width:q, height:v, pdfPageIndex:B, eleData:E, uuid:$J(Z, m),},});
  }
  function gH(h, m) {
    let q = [], v = zt(m);
    for (let B = 0; B < v.length; ++B) {
      v[B].S == h && (q.push(v[B]), xt(v[B], m), B--);
    }
    return q;
  }
  function uV(h, m, q, v, B) {
    V && SM() && V.v({type:"ANNOTATE_PDF_PAGE_REMOVED", data:{pageId:m, pageIndex:h, width:q, height:v, pdfPageIndex:B,},});
  }
  function wV(h, m, q, v, B, E, K) {
    V && SM() && V.v({type:"ANNOTATE_PDF_PAGE_SIZE_CHANGED", data:{pageId:m, pageIndex:h, width:q, height:v, bRight:B, rotation:E, eleData:K, uuid:$J(Z, m),},});
  }
  function hH(h, m, q, v) {
    let B = [], E = zt(v);
    for (let U = 0; U < E.length; ++U) {
      if (E[U].S == h) {
        let na = 0;
        var K = 0;
        if ("rectangle" == E[U].cb() || "ellipse" == E[U].cb() || "line" == E[U].cb()) {
          K = E[U], na = Math.min(K.I.x, K.L.x), K = Math.min(K.I.y, K.L.y);
        } else {
          let ob = E[U].wd;
          for (let Ca = 0; Ca < ob.length; Ca += 2) {
            if (ob[Ca] < na || 0 == na) {
              na = ob[Ca];
            }
            if (ob[Ca + 1] < K || 0 == K) {
              K = ob[Ca + 1];
            }
          }
        }
        if (na > m || K > q) {
          B.push(E[U]), xt(E[U], v), U--;
        }
      }
    }
    return B;
  }
  function XU(h) {
    "" != Ql.i ? (Ql.ba = !0, ge(), nw.innerHTML = 'Save annotations<br><span style="font-size: 12px;">We need to save your recordings in your account before exporting.</span>', pB.innerText = "CANCEL") : Lw(Mw, h);
  }
  function t4() {
    if (kc) {
      return ZK(kc);
    }
    Sn();
    return !1;
  }
  function xV(h, m) {
    if (fu || h) {
      m && (fu = JSON.parse(JSON.stringify(h)));
      m = S.g;
      !Ql.Ja() && P.l && (m = null, so(3), Xn(), hd({type:Wn, bShow:!0}));
      Ql.Ja() && (h = wo(fu), m = 1);
      var q = h, v = L.Pb();
      let Ca = L.Zf();
      Ca.IE(q.arrCommentElements);
      S.Jh && Ca.Ex();
      let qc = q.arrAnnotations, Cd = q.arrSimpleTextAnnotations, Ob = q.arrMathTextAnnotations, Nc = q.arrMediaAttachments, sg = q.arrTextHighlightAnnotations, gf = q.videoAttachments, Dd = q.imageAttachments;
      q = q.arrCommentElements;
      for (let ce = 0; ce < qc.length; ce++) {
        var B = qc[ce];
        B.pageIndex = B.pageId;
        var E = null;
        switch(B.strElement) {
          case "pen":
            E = 2;
            break;
          case "highlighter":
            E = 3;
            break;
          case "rectangle":
            E = 10;
            break;
          case "ellipse":
            E = 11;
            break;
          case "line":
            E = 12;
        }
        var K = Go(B, E);
        if (K) {
          switch(K.Fa(B), E = m, !E && P.l && ("uDocType" in B ? E = B.uDocType : E = 1), B = K, K = S, E) {
            case 1:
              K.i && K.i.F.push(B);
              break;
            case 2:
              K.Ya && K.Ya.F.push(B);
              break;
            case 3:
              K.La && K.La.F.push(B);
              break;
            default:
              Io(K, B);
          }
        }
      }
      Cd && Cd.length && Jo.Dr(Cd, m);
      Ob && Ob.length && Ko.Dr(Ob, m);
      sg && sg.length && sy(P.D, sg, m);
      Nc && Nc.length && So(v, Nc, m);
      gf && gf.length && Uo(v, gf, m);
      Dd && Dd.length && To(v, Dd, m);
      q && q.length && Ca.zt(q, m);
      if (Ch()) {
        m = new Set();
        v = Tu(S.g);
        for (var U of v) {
          (v = U.eq()) && -1 != v && m.add(v);
        }
        v = Eu();
        for (var na of v) {
          (U = na.eq()) && -1 != U && m.add(U);
        }
        v = Mu();
        for (var ob of v) {
          (na = ob.eq()) && -1 != na && m.add(na);
        }
        m.size && (ob = {type:"annotateGetGUIDForAnnotationID", arrAnnotationId:Array.from(m)}, L.sa(ob, null));
      }
      fu && !h && (fu = null);
    }
  }
  function yV(h) {
    let m = "Annotate User";
    Vi && Wi && (m = Vi + " " + Wi);
    h.author = m;
    return QD(ac, h);
  }
  function zV() {
    UA(!1);
    Na && hd({type:"ANNOTATE_PDF_DEVICE_STATE_CHANGED", hasSpeakers:kL, hasMicrophone:TA, hasWebcam:VA, hasMicrophonePermission:lL, hasWebcamPermission:mL,});
  }
  function w4() {
    let h = Xo ? Xo.Nk() : !1, m = Yo ? Yo.Nk() : !1;
    return In.i || Jo.Sw() || Ko.Sw() || PZ(jb) || S.u || h || m;
  }
  function x4() {
    In.i = !1;
    S.u = !1;
  }
  function YU(h) {
    let m = h.bAutoSaveEnabled, q = h.uWebAnnotationId, v = h.uInstructorWebAnnotationId, B = h.strWebAnnotationGuid, E = h.strInstructorWebAnnotationGuid;
    var K = h.uGoogleAssignmentSubmissionId;
    let U = h.strGoogleCourseSubmissionId, na = h.bIsClassroomGrading;
    h = h.bGoogleClassroomSubmission;
    m || h ? (Ql.M = K, Ql.G = U, Ql.s = h, K = m, h && (Ql.Gf() ? SJ(jb, !1) : K = !0), Qv(Ql, m), K && (so(Kh() ? 3 : 2), Xn(), Rl() || ($o(), xV(null, !1)), Ch() ? Nv(Ql, {lv:B, kv:E}) : Nv(Ql, {pv:q, ov:v}), Rl() || Jp(), kb && (kb.style.display = "none"), Ch() ? On(In, -1, -1, B, E) : On(In, q, v, null, null)), X1(W), NF(W), U1(W)) : !P.l && na && (P.l = !0, so(3), Xn(), hd({type:Wn, bShow:!0}));
  }
  function u4(h) {
    let m = h.bAutoSaveEnabled, q = h.strGoogleCourseSubmissionId, v = h.bGoogleClassroomSubmission;
    if (m || v) {
      Ql.M = h.uGoogleAssignmentSubmissionId, Ql.G = q, (Ql.s = v) && Ql.Gf() && SJ(jb, !1), Qv(Ql, m), X1(W), NF(W), U1(W);
    }
  }
  function bH() {
    return Ql;
  }
  function AV() {
    return kc;
  }
  function BV() {
    return Ta;
  }
  var Mm = null, Zi = 0, $i = 0, md = null, Mh = null, cb = 0, Ga = 0, sb = 0, qb = 0, lo = !1, ko, pb = {passive:!1}, Mt = -1, Ky = -1, eu, lg, If, mg, ng, og, pg, qg, ef, Me, Ne, Oe, mi, Lg = new nH(), Da = null, te = null, uf = null, Kf = null, ne = null, oi = null, pi = null, ni = null, ud = !1, Im, Jm, Km, kg, Yi, Aq, rg, zl, bk, yl, El, ff, Lm, Jt, cd, It, Al, Bl, Hm, ck, dk, Cl, go, Dl, ho, Xt = !1, Yt = !1, ZG = !1, Yy = !1, kb, Va, Ub, wa = "", eo = !0, Ht = !1, wl = !1, mo = !1, ld = !1, 
  kd, Bd, ae = !1, $n = !0, RT, li = !1, Iy = !1;
  Ls(1);
  var Yn = !1, dV = !1, HG = !1, $U = null != document.body, vq = null, FG = -1, Qm = !1, cz = !1, kV = -1, lV = -1, dj = -1, hz = !1, pV = null, ro = -1, qo = null, Oh = null, jz = !1, qV = null, QT = "", Jq = !1, Il = null, Nh = !1, ej = !1, fu = null, Cy = null, Dy = null, Vi = null, Wi = null, au = !1, kz = "", eH = null, dH = null, Lh = null, aH = !1, $t = null, nV = !1, aj = !1, bj = !1, jd = !1, me = !1, Iq = null, du = null;
  let cu = {NONE:0, LOADING:1, wE:2}, bz = cu.NONE;
  var Ab = {x:0, y:0, height:0, width:0}, nd = null, Ry = !1, Cq = "#fbf67f #f989c4 #97f7df #fefeca #90d6f7 #ddff7f #cc97f8 #ffdc80".split(" "), fk = !1, WG = ["Arial", "Times", "Roboto", "Courier"], Wt = WG[0], Qa = null, Na = !1, FU = !0, sl = "";
  let Mc = null, cj = null, kc = null, Ta = null, Ey = !1, iV = [], J4 = new URLSearchParams(window.location.search), oV = window.top != window && J4.get("annotateSharedContentInLivefeed") ? !0 : !1, hV = window.top != window && window.parent.top != window.parent;
  Xa({type:"annotateInitPluginContent", isIFrame:window.top != window, isParentIFrame:hV, bSharedContentViewMainIframe:oV}, h => {
    Hk(h.tabId, h.frameId, h.windowId);
    window && -1 != window.location.href.indexOf("https://annotate.net") && window.postMessage({type:"annotateExtensionInstalled"}, "*");
    jo(h);
    window && -1 != window.location.href.indexOf("https://annotate.net") && (window.postMessage({type:"annotateInitPluginContentResponse",}, "*"), C4("accessToken").then(m => {
      window.postMessage({type:"ANNOTATE_PDF_SEND_ACCESS_TOKEN_ON_INITIALIZE", access_token:m.accessToken}, "*");
    }));
  });
  gV();
  var jH = setInterval(() => {
    var h = !1;
    try {
      h = null != chrome.runtime.getManifest();
    } catch (m) {
      h = !1;
    }
    !h && document && document.body && (gV(), Na && (Z.v(), tp(Ao)), window.removeEventListener("message", mV, !1), document.removeEventListener("fullscreenchange", gz), document.removeEventListener("keydown", bU, {capture:!0}), document.removeEventListener("keyup", hU, {capture:!0}), document.removeEventListener("wheel", pU, {capture:!0}), window.removeEventListener("scroll", wq, !1), window.visualViewport.removeEventListener("scroll", wq, !1), window.removeEventListener("focus", Uy(!0)), window.removeEventListener("blur", 
    Uy(!1)), c(!1, !1), Ey = !1, -1 != window.location.href.indexOf("https://annotate.net") && window.postMessage({type:"annotateExtensionUninstalled"}, "*"), -1 != dj && (clearInterval(dj), dj = -1), -1 != jH && (clearInterval(jH), jH = -1));
  }, 1000), jb = new b_(), ac = new PE();
  bs = new S0(new SX(fz, cV), new OP(function() {
    Pw() || Nn();
    if (Jv.l) {
      Ch() ? Jv.m && !A(qo) && null != Oh && Oh.strGUID == qo && (Vn("Saving presentation recording to content library...", null), iz(M.s, Bh(), -1, qo, Oh, Jv.m[0].strURL, ew())) : Jv.m && 0 < ro && null != Oh && Oh.uRecordingId == ro && (Vn("Saving presentation recording to content library...", null), iz(M.s, Bh(), ro, null, Oh, Jv.m[0].strURL, ew()));
    } else {
      IZ(jb);
      var h = An();
      if (Yg(h) && !ot()) {
        Us(h) || Ks(1) ? (lw.g(), Mw.g == Uw ? Tw(Ql, !0) : Pw() ? Qn(Ql, !1, !1, !1, !1) : Ph() && S.Vl() && !W.s ? (L.mb().ol(), mw(Ql, !1, !0)) : (L.mb().ol(), mw(Ql, !1, !1))) : (jb.U(), IZ(jb), lw.g(), rC());
      } else {
        if (!Ql.Gf()) {
          var m = !1;
          bl(1) && cl(1) && (m = !0);
          h = document.getElementById("office-editing-file-extension");
          null != h && "none" != h.style.display || P.M ? nC(() => {
            lw.g();
            Ql.Ja() || Ok(P) || m ? (ge(), nw.innerHTML = 'Save annotations<br><span style="font-size: 12px;">We need to store this recording in your account.</span>', pB.innerText = "DISCARD") : Ov(Ql, !0);
          }, () => {
            null != Jv.i && (hw(), iw(Jv));
            Ip();
            YB();
          }) : (lw.g(), Ql.Ja() || Ok(P) || m || ot() ? (ge(), nw.innerHTML = 'Save annotations<br><span style="font-size: 12px;">We need to store this recording in your account.</span>', pB.innerText = "DISCARD") : Ov(Ql, !0));
        }
      }
    }
  }, function(h, m) {
    function q() {
    }
    m && (q = m);
    Kn("", h, "", "OK", function() {
    }, q);
    m && document.webkitIsFullScreen && -1 != wa.indexOf("docs.google.com/presentation/d/") && document.exitFullscreen && (Nh = !0, document.exitFullscreen(), setTimeout(() => {
      Nh = !1;
    }, 3000));
  }, function() {
    Jv.l ? HP(!0) : document.webkitIsFullScreen && -1 != wa.indexOf("docs.google.com/presentation/d/") && document.exitFullscreen && (Nh = !0, document.exitFullscreen(), setTimeout(() => {
      Nh = !1;
    }, 3000));
  }, jV));
  var Vb = Jv.Pc;
  Jv.addEventListener(mP.i, bV);
  Jv.addEventListener(mP.g, aV);
  chrome.runtime.onMessage.addListener(function(h, m, q) {
    switch(h.type) {
      case "is_annotate_content_script_installed":
        return q({type:"yes"}), !1;
      case "annotateGetAuthTokenFromTopWindow":
        if (window == window.top) {
          var v = {type:"annotateSendAuthToken", accessToken:M.l};
          console.log("tab baseframe to bg: token - ", M.l);
          Xa(v, null);
        }
        break;
      case "AuthTokenForBaseFrame":
        window.top == window && h.accessToken && h.accessToken != M.l && (console.log("update tab baseframe access token - ", h.accessToken), M.l = h.accessToken);
        break;
      case "checkIsFullScreenOnBaseFrame":
        window == window.top && q({fullscreen:null != document.fullscreenElement});
        break;
      case "iframeinitialized":
        zH && GH(h);
        break;
      case "annotateRegenerateAuthToken":
        window == window.top && ei();
        break;
      case "gotAuthTokenError":
        Nn();
        window.top == window && W.J && null != W.l.g || window.postMessage({type:"annotatePresentationLoadError", errorType:1, bAllowRetry:!0}, "*");
        break;
      case "annotatePresentationLoadError":
        window != window.top && (h.errorType = 6, window.postMessage(h, "*"));
        break;
      case "UNLOAD_NOTES_REVIEW_PANEL_IN_SLIDES_EDIT_MODE":
        pw && G2();
        break;
      case "annotateScreenShotGot":
      case "annotateSelectedImageGot":
      case "annotateScreenGetPending":
      case "webAnnotationAssessmentStatus":
        -1 != window.location.href.indexOf("https://annotate.net") && window.postMessage(h, "*");
        break;
      case "annotateWebAnnotationAssessmentResponse":
        break;
      case "annotateScreenShotGotResponse":
        if (Ml()) {
          return;
        }
        -1 != Mt && (clearTimeout(Mt), Mt = -1);
        v = !0;
        "uploadType" in h && 1 == h.uploadType && (v = !1);
        h.bSuccessful ? eu && v ? F("Image captured.", 1000) : v || F("Image added.", 1000) : h.bOtherPageOpened ? eu && v ? F("Unable to complete capture. Invalid notebook page.", 3000) : v || F("Unable to add image. Invalid notebook page.", 3000) : h.bNewPageNotAllowed ? F("Unable to add image on new page.", 3000) : eu && v ? F("Unable to complete capture. No notebook open.", 3000) : v || F("Unable to add image. No notebook open.", 3000);
        break;
      case "annotateHighlightSelectedText":
        Ro.qJ();
        break;
      case "annotateHighlightSelectedImagePosted":
        eu = !1;
        Ia();
        break;
      case "annotateCurrentPageUrl":
        v = Ul();
        var B = h.pageData;
        B.width = window.innerWidth;
        B.height = window.innerHeight;
        P.v = B;
        wa = h.pageData.url;
        P.j = h.pageData.url;
        P.J = h.pageData.title;
        hd({type:"ANNOTATE_PDF_SET_CURRENT_PAGE_URL", currPageUrl:Ul()});
        gc(Ul());
        pc(Ul());
        lw.v(v, Ul());
        break;
      case "annotateStartImportPdfTimer":
        A1(y);
        break;
      case "annotateImportPdfResponse":
        B1();
        break;
      case "annotatePageDisconnected":
        u1.g && dC();
        break;
      case "annotateSavedAnnotations":
        (!h.bWebPageClassroomAssignment || h.bGoogleAssignmentAutosaved) && aC && $B(aC);
        console.log("timer cleared on saved annotation loaded");
        Mn(In);
        if (In.l || h.bApplyForceFully) {
          In.l && (Fh(P) || nl()) && (S.u = !0), Gn(In, !1), h.bWebPageClassroomAssignment && h.bGoogleAssignmentAutosaved && Ta && (h = L2(Ta, h)), e(h), Xv(Ql), L.kd({type:"ANNOTATE_PDF_CHECK_VERSION"});
        }
        break;
      case "getAuthToken":
        window.top == window && Xh(h);
        break;
      case "getActiveWindowTabProps":
        return q({devicePixelRatio:window.devicePixelRatio}), !1;
      case "getBaseDocDataForSharedNotesFeedback":
        v = null;
        if (B = Js(S, 1)) {
          v = Po(B, !1, 0), Jk(P) && (v.pageAnnotations = jv());
        }
        q({baseDocData:v});
        return !1;
      case "ANNOTATE_EVENT_SERVER_TAB_CONNECTION_STATUS":
        return window.top == window && q({bConnected:B2()}), !1;
      case "ANNOTATE_EVENT_SERVER_MSG_FORWARD_TO_OTHER_TAB":
        window.top == window && "packet" in h && C2(h.packet, !1);
        break;
      case "ANNOTATE_EVENT_SERVER_MSG_FORWARD_TO_ALL_TAB":
        (window.top == window || Fh(P)) && "packet" in h && (console.log(`${"ANNOTATE_EVENT_SERVER_MSG_FORWARD_TO_ALL_TAB"} ${P.C}`), C2(h.packet, !0));
        break;
      case "ANNOTATE_EVENT_SERVER_CONNECT_REQUEST":
        return window.top == window && (B2() ? q({bConnected:!0}) : (K1(pw, !0), v = L1(), q({bRequested:v}))), !1;
      case "ANNOTATE_EVENT_SERVER_DISCONNECT_ON_OTHER_TABS":
        v = h.selfTabId;
        B = h.uEventServerConnectedTabId;
        window.top == window && pw && (yh(!0), B && v && v != B ? (console.log("Disconnect event room on connected in another tab"), A2()) : console.log("Don't disconnect event room on uEventServerConnectedTabId"));
        break;
      case "launchLivefeedOnJoin":
        if (window.top == window && h.LivefeedInfo) {
          v = h.bLaunchingOnSelfLivefeedTab;
          B = h.server_url;
          var E = h.LivefeedInfo, K = E.strGUID;
          m = E.strPageUrl;
          var U = parseInt(E.uLivefeedClassId), na = parseInt(E.uLivefeedType);
          E = parseInt(E.uLivefeedActivityId);
          var ob = Kh();
          v && (W.u && V && tC(), Nn(), Vn("Loading...", null));
          ob ? uC(m, K, na, U, B, v, E) : H2(m, K, na, U, B, v, E);
        }
        break;
      case "annotateLivefeedNotificationEvent":
        window.top == window && sC(h);
        break;
      case "ANNOTATE_CLOSE_JOIN_DB_ON_END_LIVEFEED_NOTIFICATION":
        vC(!1);
        break;
      case "ANNOATATE_INITIATED_OPEN_WA_LF_BY_TEACHER":
        S.i && Cs(h.LivefeedInfo);
        break;
      case "ANNOTATE_CANCEL_EXPORTING":
        qJ(!1);
        break;
      case "annotateNewWindowDimensions":
        window == window.top && Pk() || (W.Jb = !1, x0(!1), setTimeout(function() {
          Yn = !0;
        }, 100));
        break;
      case "annotateImportPdfFile":
        z1(h);
        break;
      case "annotateImportPdfStatus":
        ("uFileId" in h && h.uFileId == u1.j || "strGuid" in h && h.strGuid == u1.i) && t1(h);
        break;
      case "annotateCancelPdfImport":
        Nn();
        break;
      case "AnnotateLoginResponsePlugin":
        jo(h);
        break;
      case "annotateCurrentPresentationInfo":
        aH && (aH = !1, XT(h));
        break;
      case "annotateShowUpdateAvailableDialog":
        jC();
        break;
      case "annotateShowUpdateSuccessfulDialog":
        kC();
        break;
      case "annotateSlidesPreviewLoaded":
        $H(h.slidesUrl, h.slideId, h.arrSlides, h.guid, h.pageSize, Xa);
        break;
      case "annotateSlidePreviewKeyEvent":
        n() && jd && zH && PH(h.evtData);
        break;
      case "annotateNavigatePreviewSlideJump":
        n() && jd && aI(h.index);
        break;
      case "annotateDrivePDFInfoFromName":
        IG && (IG = !1, clearTimeout(CV), CV = -1, Ue(h));
        break;
      case "annotateDrivePDFInfoFromDOM":
        Ue(h);
        break;
      case "annotateStudentFeedbackDocLoaded":
        pw.o(h);
        break;
      case "annotateClassDocumentOpenedFound":
        let qc = h.openedTabId, Cd = h.sourceTabId;
        if (window != window.top && Rl() && Ql.Ja()) {
          Kn("", "Page already open in another tab.", "CONTINUE HERE", "TAKE ME THERE", function() {
            Pn("Saving changes in already opened grading tab.");
            Xa({type:"COMM_SAVE_CLOSE_TAB_GRADING", tabId:qc}, null);
          }, function() {
            Xa({type:"annotateSwitchToTab", tabId:qc, sourceTabId:Cd, bCloseSource:!1}, null);
            Xa({type:"COMM_UPDATE_GRADE_WITH_ANNOTATE", bGradeWithAnnotate:!1}, null);
          }, null, null, !1, null, !1, -1, -1, !1, "", "");
        } else if (window == window.top && (!Pk() && (Kh() || Qh()) || Ph()) || Ql.Ja()) {
          $s(), A(Lo) || WX(Lo), cj.U(), h.bSavingOpenedDoc && (si() || P.m) ? (Pn("", "Saving annotations in already opened document in another tab..."), W.G = !0) : h.bPresentationEndedOrExpired || (W.v = !0, v = "", h.bLivefeedAlreadyJoined ? (v = "Livestream already running in another tab.", V && qR(V)) : v = "Saved annotation already opened in another tab.", Sn(), Nn(), MB(1, v, "TAKE ME THERE", function() {
            Xa({type:"annotateSwitchToTab", tabId:qc, sourceTabId:Cd, bCloseSource:!0}, null);
          }, "", null));
        }
        break;
      case "annotateAuthTokenResponse":
        window == window.top && hc(h);
        break;
      case "annotateOpenFileResponse":
        ("uFileId" in h && h.uFileId == u1.j || "strGuid" in h && h.strGuid == u1.i) && y1(h);
        break;
      case "annotateDashboardLaunched":
        v1();
        break;
      case "classroomGradingToggled":
        window != window.top && Gk(P) && kc ? h.bGradeWithAnnotate ? (ae = !0, ak(!1, !1), kc.J = !0, PK(kc, !0)) : (ae = !1, Zj(), kc.J = !1, PK(kc, !1), MK(kc, !1, "")) : window == window.top && (ae = h.bGradeWithAnnotate, Fa(), h.bDisposeIframe && (v = document.getElementById("annotate-iframe")) && v.parentElement.removeChild(v));
        break;
      case "COMM_MSG_ASSIGNMENT_RETURN":
        window == window.top || Ok(P) && !L.mb().Ja() || (Gk(P) || Qk() ? kc.o && CK(kc.o) : P.l ? hd({type:"ANNOTATE_PDF_ASSIGNMENT_RETURN"}) : Rl() && Ta && null != Ta.hd && CK(Ta.hd()));
        break;
      case "annotateGetGUIDForAnnotationID":
        a_(h.annotationGuidMap);
        break;
      case "COMM_GET_ALL_STUDENT_SUBMISSIONS_FOR_WEB":
        Ta && (h.bSuccessful ? (Ql.s = !0, !h.arrStudentAnnotation.length && "strAnnotateClassName" in h ? h3(h.strAnnotateClassName, !0) : (M2(Ta, h.arrStudentAnnotation, h.strStudentGuid), nK(!0))) : U2(Ta, h));
        break;
      case "LoadWebpageAssignmentInGradingIframe":
        Mc && vK(Mc, h.frameId);
        break;
      case "CheckIfWebAssignmentLoadedInIframe":
        Xa({type:"WebAssignmentLoadedInIframeSuccess"}, null);
        h.courseWorkDetails && Ta && (Pn("Please wait while annotations for Google assignment are being loaded..."), Ta.j.v = !0, Ta.o = h.courseWorkDetails, dz(!0), r2(), v = {type:"annotateOpenSaveAnnotations", strPageUrl:Ta.hd().strBaseWebPageUrl, strGUID:Ta.hd().strBaseWebAnnotationGuid, bShared:!0, bOpenInNewTab:!1, bChangeUrlInCurrentTab:!1, bWebPageClassroomAssignment:!0}, "" != Ta.hd().strCloneAnnotationMapGUID && (v.strStudentGuid = Ta.hd().strStudentGuid, v.strGoogleCourseWorkId = Ta.hd().strGoogleCourseWorkId, 
        v.uClassId = Ta.hd().uClassId, v.strInstructorWebAnnotationGuid = Ta.hd().strInstructorWebAnnotationGuid, v.strStudentWebAnnotationGuid = Ta.hd().strWebAnnotationGuid, v.strCloneAnnotationMapGUID = Ta.hd().strCloneWebAnnotationMapGuid, Ta.hd().bNonAnnotateStudent ? v.bNonAnnotateStudent = !0 : v.bNonAnnotateStudent = !1), Gn(In, !0), Xa(v, null));
        break;
      case "WebAssignmentLoadedInIframeSuccess":
        Mc && wK(Mc);
        break;
      case "CheckAndSaveUnsavedChanges":
        Ql.l = !0;
        Ta && !K2(!0) && (console.log("document already saved in iframe"), Ql.l = !1, Xa({type:"ChangesSavedInGradingIframe"}, null));
        break;
      case "ChangesSavedInGradingIframe":
        Mc && (h.bStudentChange ? tK(Mc, !1) : xK(Mc));
        break;
      case "checkNewTabGradingDocumentOpen":
        Ta && Ta.hd() && Xa({type:"ANNOTATE_SEND_DOC_OPENED", bGoogleAssignmentAutosaved:!0, uClassId:Ta.hd().uClassId, strGoogleCourseWorkId:Ta.hd().strGoogleCourseWorkId}, null);
        break;
      case "COMM_SAVE_CLOSE_TAB_GRADING":
        Ta && (P.ea = h.newTabId, P.pa = h.newTabFrameId, Ql.l = !0, K2(!0) || (Ql.l = !1, Xa({type:"ANNOTATE_STALE_TAB_REMOVED", newTabId:P.ea, newTabFrameId:P.pa}, null)));
        break;
      case "ANNOTATE_STALE_TAB_REMOVED":
        if (Ta && Rl()) {
          if (Sn(), v = Ta.hd()) {
            Pn("Please wait while annotations for Google assignment are being loaded..."), B = {type:"annotateOpenSaveAnnotations", strPageUrl:v.strBaseWebPageUrl, strGUID:v.strBaseWebAnnotationGuid, bShared:!0, bOpenInNewTab:!1, bChangeUrlInCurrentTab:!1, bWebPageClassroomAssignment:!0}, "" != v.strCloneAnnotationMapGUID && (B.strStudentGuid = v.strStudentGuid, B.strGoogleCourseWorkId = v.strGoogleCourseWorkId, B.uClassId = v.uClassId, B.strInstructorWebAnnotationGuid = v.strInstructorWebAnnotationGuid, 
            B.strStudentWebAnnotationGuid = v.strWebAnnotationGuid, B.strCloneAnnotationMapGUID = v.strCloneWebAnnotationMapGuid), Gn(In, !0), Xa(B, null);
          }
        } else if (P.m || si()) {
          W.G = !1, (v = s2()) && Xa({type:"annotateLoadSavedAnnotations", strGuid:v.pId, uClassId:v.cId, uLivefeedType:v.uLivefeedType, uDocType:S.g, extraData:S.l, bSlidesPreview:P.m}, null);
        }
        break;
      case "checkAndSaveBeforeStudentChange":
        Ta && (Ta.Db = !0, K2(!0) || (console.log("document already saved in iframe"), Ta.Db = !1, Xa({type:"ChangesSavedInGradingIframe", bStudentChange:!0}, null)));
        break;
      default:
        if ("createClipStatus" == h.type) {
          h.selfTabId == h.sourceTabId && hz && (hz = !1, clearTimeout(pV), h.bSuccessful ? 0 == h.uStatus ? (console.log(">>> CLIP CREATION FAILED, Disk space full!"), Jq = !1, Xa({type:"StartSlidesPresentationRecordingFailed", errorMessage:"Failed to create clip, please try again", bDiskFull:!0}, null)) : (console.log(">>> CLIP CREATED", h.strRecordingGuid), Ch() ? qo = h.strRecordingGuid : ro = h.uRecordingId, Oh = h.createClipReqRes, Jv.l = !0, Xa({type:"StartSlidesPresentationRecordingSuccess", 
          recordingUIState:IP()}, null), setTimeout(() => {
            if (Jq) {
              Jq = !1;
              var Ob = Jv.g;
              if ((Ob.j == Pg.yl || Ob.j == Pg.Gk) && Ob.g == Og.sj) {
                var Nc = Ob.o;
                if (null != Nc.g && "inactive" != Nc.g.state) {
                  try {
                    Nc.m = !0, Nc.g.stop();
                  } catch (sg) {
                    Nc.m = !1, console.log("ScreenRecorder: exception while internal stop for trim", sg);
                  }
                }
                Ob = Ob.v;
                Ob.g = Date.now();
                Ob.j = Ob.g;
              }
              HP();
            }
            HG = !0;
            Xa({type:"annotateScreenShotCopy", bForClipThumb:!0}, p);
          }, 1000)) : (console.log(">>> CLIP CREATION FAILED!"), Jq = !1, Xa({type:"StartSlidesPresentationRecordingFailed", errorMessage:"Failed to create clip, please try again"}, null)));
        } else if ("saveClipStatus" == h.type) {
          h.selfTabId == h.sourceTabId && jz && (jz = !1, clearTimeout(qV), h.bSuccessful ? (console.log(">>> CLIP SAVED with recorded media"), Sn(), Vn("Saving presentation recording to content library... SAVED", null), setTimeout(() => {
            Sn();
            fH();
          }, 1000), Xa({type:"ClipRecordingSaveSuccess"}, null), WP(), Jv.l = !1) : (console.log(">>> CLIP SAVE FAILED!"), Sn(), rV(!1)));
        } else if ("annotateTempSaveRequestStatus" == h.type) {
          zw(h), l();
        } else if ("annotateSaveRequestStatus" == h.type) {
          Gw(h), l();
        } else if ("ANNOTATE_RES_UPDATE_FILE_LOCK_OWNER" == h.type) {
          ft(h);
        } else if ("annotateSavedToolbarPosition" == h.type) {
          F4(h);
        } else if ("DoNotRecordPresentation" == h.type) {
          window == window.top && Rm(null);
        } else if ("StopRecClickedInPresentation" == h.type) {
          Rm(null), HP();
        } else if ("PauseResumeRecClickedInPresentation" == h.type) {
          SG(null);
        } else if ("MuteUnmuteClickedInPresentation" == h.type) {
          TG(null);
        } else if ("StartSlidesPresentationRecording" == h.type) {
          window == window.top && (Il = null, PP() ? (v = h.strClip, Jq = h.bTrim, console.log(">>> Request received to create clip and start presentation recording mode", v), H4(v)) : Xa({type:"StartSlidesPresentationRecordingFailed", errorMessage:"To record your session please initiate screen recording before entering Google Slides presentation mode."}, null));
        } else if ("AnnotateGetDocumentFullScreenState" == h.type) {
          (window == window.top || Gk(P)) && gz();
        } else if ("annotateCustomPropertiesUpdated" == h.type) {
          h.frameId == P.C && h.tabId == P.N || ud || !h.strExtensionCustomProperties || (v = JSON.parse(h.strExtensionCustomProperties), "dictPenData" in v && (B = v.dictPenData, "lstPenCustomData" in B && (Fi(B.lstPenCustomData), Di(hi.B, !1))), "penProperty" in v && (Ji(hi, v.penProperty), 2 == ki.g && Qa && Qa.setData(hi.m)), "highlighterProprty" in v && (Ni(hi, v.highlighterProprty), 3 == ki.g && Qa && Qa.setData(hi.l)), "rectProperty" in v && (Li(hi, v.rectProperty), 10 == ki.g && Qa && Qa.setData(hi.j)), 
          "ellipseProperty" in v && (Mi(hi, v.ellipseProperty), 11 == ki.g && Qa && Qa.setData(hi.g)), "lineProperty" in v && (Ki(hi, v.lineProperty), 12 == ki.g && Qa && Qa.setData(hi.i)), "dictHighlighterData" in v && Ii(v.dictHighlighterData));
        } else if ("ANNOTATE_PDF_OPEN_PARTIAL" == h.type) {
          if (h.start && (kz = ""), kz += h.pdfUrl, h["final"]) {
            v = kz;
            kz = "";
            let Ob = new XMLHttpRequest();
            Ob.open("GET", v);
            Ob.responseType = "blob";
            Ob.onload = () => {
              Ob.response.arrayBuffer().then(Nc => {
                hd({type:"ANNOTATE_PDF_OPEN", pdfName:h.pdfName, pdfData:Nc});
              });
            };
            Ob.send();
          }
        } else if ("ANNOTATE_PDF_OPEN" == h.type) {
          let Ob = new XMLHttpRequest();
          Ob.open("GET", h.pdfUrl);
          Ob.responseType = "blob";
          Ob.onload = () => {
            Ob.response.arrayBuffer().then(Nc => {
              hd({type:h.type, pdfName:h.pdfName, pdfData:Nc});
            });
          };
          Ob.send();
        } else if ("annotatePreviewSlidesAnnotationData" == h.type) {
          if (window == window.top) {
            return;
          }
          me = !0;
          P.i = !0;
          Iq = null;
          h.lstSlideId && (Iq = h.lstSlideId);
          A0(h);
          null != pw && Kh() && 3 == S.g && (console.log("Slide apply data - preview - curSlide", sQ(), "--\x3e", h.curSlideId, "| jump from", h.prevSlideIdInFeedbackMode), qQ(h.curSlideId), h.prevSlideIdInFeedbackMode && rQ(h.prevSlideIdInFeedbackMode), E2(), F2());
        } else if ("annotatePreviewSlidesFeedbackAnnotationData" == h.type) {
          if (window == window.top || !me) {
            return;
          }
          h.feedbackAnnotationData && (v = h.feedbackAnnotationData, B = Ls(3), cq(B, v.annotationId, v.strAnnotationPath), B.ma = v.strGUID, dq(B, v.versionNo), B.dh = v.nMaxElementId, nh(B, v.uuid), v.annotationData && (B.Pa = v.annotationData), v.documentOwnerInfo && jq(B, v.documentOwnerInfo));
        } else if ("annotatePreviewSlideKeyEvent" == h.type) {
          window != window.top && document && document.dispatchEvent(new KeyboardEvent("keydown", h.evtData));
        } else if ("annotateSlideChangeSyncEvent" == h.type) {
          me ? (du || (du = new iQ(Iq)), YP(du, h.evtData)) : console.log("[imp] Ignored slide change sync event for frame", P.C);
        } else if ("annotateUpdateAnnotationsAllowed" == h.type) {
          me && (console.log(`annotateUpdateAnnotationsAllowed received preview bNotesAllowed ${h.bNotesAllowed}`), MM(W, h.bNotesAllowed, h.bSave));
        } else if ("ANNOTATE_SLIDE_PREVIEW_DOC_DATA_REQ_EVENT" == h.type) {
          if (window != window.top && me) {
            if (v = S.s) {
              B = No(), mv(v, B);
            }
            Xa({type:"ANNOTATE_SLIDE_PREVIEW_DOC_DATA_RES_EVENT", annotationData:iv(), nMaxElementId:kt(), uuid:vt(), versionNo:qv(), newSlideId:h.newSlideId}, null);
          }
        } else if ("iframewebannotationdocsloaded" == h.type) {
          window == window.top && zH && (S.B = !0);
        } else if ("AnnotationPreviewActiveSlideChanged" == h.type) {
          n() && jd && zH && MH(h.slideId, h.frameId);
        } else if ("ANNOTATE_SLIDE_PREVIEW_DOC_DATA_RES_EVENT" == h.type) {
          n() && jd && zH && WH(h);
        } else if ("annotateFeedbackSlidesPreviewLoaded" == h.type) {
          let Ob = $H(h.slidesUrl, h.slideId, h.arrSlides, h.guid, h.pageSize, Xa);
          v = h.contentUrl;
          let Nc = [];
          zH && (Nc = zH.Df);
          s0(v, function(sg) {
            let gf = {};
            gf.imgData = sg;
            gf.pageIndex = Ob;
            gf.lstSlidesList = Nc;
            gf.type = "ANNOTATE_GOOGLE_SLIDES_VIEWER_LOADED";
            window.postMessage(gf, "*");
          });
        } else if ("annotateShowHideDocAnnotations" == h.type) {
          window != window.top && me && g2(W, h);
        } else if ("ANNOTATE_CURRENT_ANNOTATIONS_SHOW_HIDE_CHANGED" == h.type) {
          jd && (zH && (zH.tF = h.bShow), 3 == S.g ? window.postMessage(h, "*") : 2 == S.g && fI && aO(fI, h.bShow));
        } else if ("AnnotateFeedbackDocUpdated" == h.type) {
          jd && window.postMessage(h, "*");
        } else if ("annotateSlideToPresentationEvent" == h.type) {
          Pm() && V && V.ld(h.msgData);
        } else if ("annotateSlideFromPresentationEvent" == h.type) {
          Gq() && V && V.ic(h.msgData);
        } else if ("HANDLE_RECORDING_BEFORE_PREVIEW_NAVIGATE_JUMP" == h.type) {
          console.log("Received in preview", h);
          v = h.idx;
          if (window != window.top && me && (3 == S.g || 2 == S.g)) {
            if (null != Ql.u) {
              console.log("HANDLE_RECORDING_BEFORE_PREVIEW_NAVIGATE_JUMP - idx updated", v);
              Ql.u = v;
              gw("Saving recording, please wait...", !0);
              return;
            }
            if (Jv && eP(Jv.g)) {
              Jv.J(null);
              Ql.u = v;
              console.log("HANDLE_RECORDING_BEFORE_PREVIEW_NAVIGATE_JUMP - wait for stop rec and save", v);
              gw("Saving recording, please wait...", !0);
              return;
            }
          }
          Xa({type:"HANDLE_RECORDING_BEFORE_PREVIEW_NAVIGATE_JUMP_RESPONSE", idx:v}, null);
        } else if ("HANDLE_RECORDING_BEFORE_PREVIEW_NAVIGATE_JUMP_RESPONSE" == h.type) {
          jd && zH && null != h.idx && (console.log("Received by preview parent", h), bI(h.idx));
        } else if ("CHECK_BEFORE_NOTES_VIEWER_ACTION_TO_PREVIEW" == h.type) {
          v = h.NotesviewerCheckFor;
          console.log("Received in preview", h);
          if (window != window.top && me) {
            if (null != Ql.j) {
              console.log("CHECK_BEFORE_NOTES_VIEWER_ACTION - [ignore.. processing prev action]");
              gw("Saving changes, please wait...", !0);
              return;
            }
            if (Jv && eP(Jv.g)) {
              Jv.J(null);
              Ql.j = v;
              console.log("CHECK_BEFORE_NOTES_VIEWER_ACTION -  wait for stop rec and save");
              gw("Saving recording, please wait...", !0);
              return;
            }
            if (Ql.g) {
              Ql.j = v;
              console.log("CHECK_BEFORE_NOTES_VIEWER_ACTION - wait for in progress save");
              gw("Saving changes, please wait...", !0);
              return;
            }
          }
          Xa({type:"CHECK_BEFORE_NOTES_VIEWER_ACTION_FROM_PREVIEW", NotesviewerCheckFor:v}, null);
        } else if ("CHECK_BEFORE_NOTES_VIEWER_ACTION_FROM_PREVIEW" == h.type) {
          jd && 3 == S.g && (v = {type:"CHECK_BEFORE_NOTES_VIEWER_ACTION", NotesviewerCheckFor:h.NotesviewerCheckFor}, console.log("preview parent to notes controller", v), window.postMessage(v, "*"));
        } else if ("annotateLiveNotesRequestEvent" == h.type) {
          window != window.top && (me || Pm()) && (B = h.msgData) && (v = fO(B, kO), B.versionTree && B.versionTree.bSendAnimationSyncData && (B = v.syncData) && (B.docSyncData = eV()), v && Xa({type:"annotateLiveNotesResponseEvent", msgData:v}, null));
        } else if ("annotateLiveNotesResponseEvent" == h.type) {
          if (jd || Gq()) {
            if (v = h.msgData) {
              switch(v.mainType) {
                case "ANNOTATE_SEND_DOCUMENT_VERSION_TREE":
                  2 == S.g && pw.i && (B = v.docGuid, K = v.strOwnerGuid, (v = v.tree) && Zs() == B && (v.bSendAnimationSyncData = !0), FI(pw.i, B, K, v));
                  break;
                case "ANNOTATE_SEND_DOCUMENT_SYNC_DATA":
                  2 == S.g ? pw.i && GI(pw.i, v.docGuid, v.strOwnerGuid, v.syncData, v.senderInfo) : 3 == S.g && window.postMessage({type:"ANNOTATE_SEND_FEEDBACK_SYNC_DATA", msgData:v}, "*");
                  break;
                case "ANNOTATE_SLIDE_DOCUMENT_EDITED":
                  ((Ep() || Fp()) && (B = v.data) && zH && (B.slideId = zH.Af), B = null, "updatedDocType" in h && (B = h.updatedDocType), null != B && 1 != B || !yp()) ? null != B && 2 != B || !Ep() ? null != B && 3 != B || !Fp() || (h.type = "ANNOTATE_FEEDBACK_DOCUMENT_EDITED", window.postMessage(h, "*")) : pw.i && pw.i.v(v) : V && V.v(v);
              }
            }
          }
        } else if ("annotateCheckActiveLivefeedCCL" == h.type) {
          M.g && V && V.Lj() && Xa({type:"annotateCheckActiveLivefeedCCLResponse", exist:!0}, null);
        } else if ("annotateClassDocumentOpened" == h.type) {
          if (m = h.sourceTabId, U = h.selfTabId, E = na = !1, U != m) {
            ob = !1;
            if (window == window.top) {
              if (v = h.uClassId, B = A(h.annotationId) ? -1 : h.annotationId, K = A(h.strGUID) ? "" : h.strGUID, Ql.Ja()) {
                if (Ph()) {
                  var Ca = "";
                  Rl() && Ta && Ta.hd() ? Ca = Ta.hd().strGoogleCourseSubmissionId : Pv.pc() && (Ca = Pv.pc().id);
                  Ca == h.strGoogleSubmissionId && (ob = !0);
                } else if (Kh() && Rl() && Ta) {
                  let Ob = Ta.tc;
                  for (Ca in Ob) {
                    let Nc = Ob[Ca].hd().strGoogleCourseWorkId;
                    if (Nc && Nc == h.strGoogleCourseWorkId) {
                      ob = !0;
                      break;
                    }
                  }
                }
              } else if (!W.v && Yg(Un()) && K == Un()) {
                if (W.u) {
                  return;
                }
                h.bLivefeedAtSourceTab ? -1 != V.l && V.Lj() ? E = ob = !0 : S.Vl() ? (na = ob = !0, P.ea = m, Qn(Ql, !1, !1, !1, !1, !0)) : bC() : (ob = !0, -1 != V.l && V.Lj() && (E = !0));
              }
            } else {
              Ql.Ja() && Kh() && (v = h.uClassId, B = h.annotationId, K = h.strGUID, ae && (Ca = "", Rl() && Ta && Ta.hd() ? Ca = Ta.hd().strGoogleCourseSubmissionId : Pv.pc().id == h.strGoogleSubmissionId && (Ca = Pv.pc().id), Ca == h.strGoogleSubmissionId && (ob = !0)));
            }
            ob && L.sa({type:"annotateClassDocumentOpenedResponse", sourceTabId:m, openedTabId:U, uClassId:v, annotationId:B, annotationGuid:K, bSavingOpenedDoc:na, bLivefeedAlreadyJoined:E, bPresentationEndedOrExpired:W.u}, null);
          }
        } else {
          "getDocumentFullScreenState" == h.type ? gz() : "googleSlidePresentationModeStart" == h.type ? WB && XB(!1) : "ClipRecordingSaveSuccess" == h.type && window != window.top ? (Sn(), Vn("Uploading and saving recording to content library... SAVED", null), setTimeout(() => {
            Sn();
          }, 1000)) : "StartSlidesPresentationRecordingFailed" == h.type ? (Sn(), h.bDiskFull ? Md() : Kn("Record presentation error", h.errorMessage, "", "OK", () => {
            Bq();
          }, () => {
            Bq();
          })) : "StartSlidesPresentationRecordingSuccess" == h.type ? (Sn(), NP(Vb, h.recordingUIState)) : "UpdateRecordingUIStateInPresentation" == h.type && window != window.top ? (NP(Vb, h.recordingUIState), h.bWaitingForUpload && (Sn(), Vn("Uploading and saving recording to content library...", null))) : "ActiveTabChanged" == h.type ? h.windowId == P.ba && h.tabId != P.N && qJ(!0) : r1(h.type) || "annotatePresentationDataReceived" == h.type || "annotateUpdatePresToolbarVisibleState" == h.type || 
          "annotatePresentationSlideListUpdated" == h.type || "annotatePresentationIndexChanged" == h.type || "AnnotateAppliedStudentFeedbackData" == h.type || "extCCLLivefeedState" == h.type || "annotateWebAnnotationLivefeed" == h.type || "extORLivefeedState" == h.type ? window.postMessage(h, "*") : "annotatePresentationDataReceived" == h.type ? window.postMessage(h, "*") : "annotateRetryAuthForPresentation" == h.type ? window.top == window && ei() : console.log("Did not forward", h.type);
        }
    }
    q({received:!0, from:"content"});
    return !1;
  });
  window.top == window ? document.addEventListener("fullscreenchange", gz) : -1 == window.location.href.indexOf("docs.google.com/presentation/d/") || me || jd || window.addEventListener("unload", lw.u);
  var cH = [], bu = -1, xl = !1, zq = "", WU, Xi = !1, Jy;
  window.addEventListener("message", mV, !1);
  var $y = 0, Zy = 0, vU = !1, Gl, Eq, PG = !1, Nm = -1, Oy = !1, $T, aU, Ot, Pt, Ly, My, Lt = [], Kt = [], Hy = !0, WT = 0, Gy = -1, vd, fo = !0, UT, lc, Gm = !0, TT, yq = !1, Fy = !1, IG = !1, CV = -1, be, co = !0, ST, $d = !1, Ce = -1, JG = !1;
  window.top == window && (fe(), t());
  W && (W.addEventListener(e2.g, () => {
    "" == wa && (wa = window.location.href);
  }), W.addEventListener(e2.i, () => {
    tl();
    uq();
  }));
  Ao && Ao.addEventListener(X0.g, () => {
    null == bp ? bp = new tH(Ny, no) : bp.M = Ao.B;
  });
  lw && lw.addEventListener(G0.g, () => {
    let h = Ao.g;
    h && bp && (cp(), h.nt(!1), Ao.g = null, Qa && Qa.ja());
  });
  Ql = new Ww(new Hv(Xa, fz, ge, wU, VG, function(h) {
    dV = !0;
    Xa({type:"annotateScreenShotCopy", bForSave:!0, saveRequestData:h}, cV);
  }, gc, AV, BV));
  let ul = new pG(new mG(function() {
    P.o = !0;
  }, hd, function(h, m, q) {
    h = {action:Vx, ub:8, data:{width:h, height:m, rs:q}};
    at(!0);
    Px(h, !0);
  }, Yd)), Z = new aK(new AJ(function() {
    ac.U();
    ac = new vE(fV);
    Na = !0;
    P.B = !0;
    Ro.iN();
    Ro.hN(Z);
    ac.ia(Z);
    ac.ic(hd);
    Jv && (Jv.j = ac.ci());
    window != window.top && Zn();
    hd({type:"ANNOTATE_PDF_USER_LOGIN_STATE_UPDATED", uType:M.j, ChromeClientLogin:M.g, currPageUrl:Ul()});
    b();
  }, function() {
    Na = !0;
    Wk();
    FU = !1;
    b();
    zV();
    vq && MJ(Z, vq, FG, Ro.pG(Oo(S)));
    Jo.wm(Z);
    Ko.wm(Z);
    Tr(jb, Z);
    ac.ia(Z);
    ac.ld(!0);
    ac.lq(S.g);
    W.g && xq();
    W.i ? O0(W) : y0(W);
    le();
    let h = -1, m = (new URLSearchParams(window.location.search)).get("pdfData");
    if (m) {
      try {
        let q = JSON.parse(atob(m));
        "uLivefeedType" in q && (h = q.uLivefeedType);
      } catch (q) {
      }
    }
    null == h || -1 == h || W.u || W.v || W.G || (Jh() ? Vn("Initializing presentation...", null) : Kn("", "This Livestream is no longer available.", "", "OK", () => {
    }, () => {
      bC();
    }));
    pw && TJ();
  }, Jl, function(h, m, q) {
    Ro.oN(h, m, q);
  }, function(h, m) {
    if (14 == ki.g) {
      if (!li && vy(Z.selection) && Kh() && (Z.l || Kh() && !fq(1)) && (h = m.pointerType, !h || "mouse" == h)) {
        h = Z.selection;
        var q = {}, v = "Annotate User";
        Vi && Wi && (v = Vi + " " + Wi);
        q.bAnnotateComment = !0;
        q.author = v;
        q.selection = tE(h);
        q.bParentComment = !0;
        q.pageIndex = h.g;
        q.color = dh(hi.o.qa);
        q.quadPointSet = m.quadPointSet;
        q.rect = m.rect;
        q.uDocType = S.g;
        ac.i(q);
      }
    } else {
      5 === ki.g ? Ro.wI(h) : sf();
    }
  }, function() {
    if (14 == ki.g) {
      let h = Z.C, m = {}, q = "Annotate User";
      Vi && Wi && (q = Vi + " " + Wi);
      m.bAnnotateComment = !0;
      m.author = q;
      m.bParentComment = !0;
      m.rect = sE(h.rect);
      m.quadPointSet = [uE(h.g)];
      m.pageIndex = h.S;
      m.color = dh(hi.o.qa);
      m.uDocType = S.g;
      ac.i(m);
    } else {
      sf();
    }
  }, function(h) {
    Rt(h);
  }, function(h) {
    8 != ki.g && Rt(h);
    gk(h);
  }, function(h) {
    Rt(h);
  }, function(h) {
    Qt(h);
  }, function(h) {
    gk(h);
  }, function() {
    if (lo && (le(), lo = !1, Nm = -1, CG(Lg, !1), V && SM() && bS(), Ao.g = null, 9 == ki.g || 13 == ki.g)) {
      var h = document.getElementById("annotate-plugin-temp-text-element");
      h && h.remove();
    }
  }, function(h, m, q, v, B) {
    vV(h, m, q, v, B);
    h = {action:Ux, ub:4, data:{fd:m, S:h, width:q, height:v, Ah:B, F:[], sl:[], yq:[]}};
    at(!0);
    Px(h, !0);
    Jl();
  }, function(h, m, q, v, B) {
    uV(h, m, q, v, B);
    var E = S.g;
    let K = gH(m, E), U = ac.ba(m), na = Jo.ct(m, E);
    na = na.concat(Ko.ct(m, E));
    $k(m, E);
    let ob = JZ(jb, m, E), Ca = TZ(jb, m, E);
    E = WZ(jb, m, E);
    let qc = [];
    A(Lo) || (qc = EX(m));
    Yo && FD(m);
    h = {action:Qx, ub:4, data:{fd:m, S:h, width:q, height:v, Ah:B, sl:na, F:K, yq:ob, ms:Ca, ns:E, Wd:U, ju:qc}};
    at(!0);
    Px(h, !0);
    Jl();
  }, function(h, m, q, v, B, E, K, U, na, ob) {
    let Ca = S.g, qc = hH(m, q, v, Ca), Cd = Jo.dt(m, q, v, Ca);
    Cd = Cd.concat(Ko.dt(m, q, v, Ca));
    let Ob = ac.ea(m, q, v, Ca), Nc = KZ(jb, m, q, v, Ca), sg = UZ(jb, m, q, v, Ca), gf = XZ(jb, m, q, v, Ca), Dd = [];
    A(Lo) || (Dd = FX(m, q, v));
    let ce = iH({F:qc, sl:Cd, Wd:Ob}, !1), De = -1;
    if (null == K || void 0 == K) {
      De = na;
    }
    wV(h, m, q, v, K, De, ce);
    ob && na != U || Px({action:Vx, ub:4, data:{fd:m, S:h, width:B, height:E, rs:K, rotation:U, sl:Cd, F:qc, yq:Nc, ms:sg, ns:gf, Wd:Ob, ju:Dd}}, !0);
    at(!0);
    Jl();
    Zk(m, q, v, Ca);
  }, function(h, m) {
    V && SM() && V.v({type:"ANNOTATE_PDF_SHOW_HIDE_PAGE", data:{arrPageId:h, bShow:m},});
    Jl();
    console.log("Show hide");
  }, function(h) {
    Qw(h);
  }, function() {
    let h = document.getElementById("AnnotateAnnotationSelectionCanvas");
    h && (h.width = h.width);
    Y0();
  }, hd, xV, yV, function(h, m) {
    if (Jh()) {
      var q = m.color;
      if (q) {
        var v = bh("rgb(" + q.red + "," + q.green + "," + q.blue + ")");
        q = hi.o;
        if (v != q.qa) {
          q.qa = v;
          let E = !1;
          for (var B = 0; B < q.Cc.length; B++) {
            if (q.Cc[B] == v) {
              q.Za = B;
              E = !0;
              break;
            }
          }
          v = document.getElementsByClassName("annotate-highlight-plugin-comment-toolbar-button");
          for (B = 0; B < v.length; B++) {
            v[B].style.borderBottom = "0";
          }
          E || (q.Za = -1);
          v[q.Za] && -1 != q.Za && (v[q.Za].style.borderBottom = Y.v);
          vi(hi);
          Oi();
        }
      }
      14 != ki.g && Kh() && (Z.l || Kh() && !fq(1)) && W.g && ac.Db(h, m.commentId, m.uDocType, m.click);
    }
  }, function() {
    ac.C(Z.u) ? sf() : 14 == ki.g && XG();
  }, YU, function(h, m) {
    if (mC) {
      var q = mC;
      q.s = h;
      q.v = m;
      q.g && 5 == q.i && IQ(q);
    }
  }, function() {
    St();
    Vy();
  }, bH, function(h) {
    ac.Va(h);
  }));
  P.D = Z;
  P.Va = ul;
  jb.D = Z;
  return {wq:function(h) {
    if (4 == h.ub) {
      tV(h, !0);
    } else if (8 == h.ub) {
      sV(h, !0);
    } else if (h.action == Ux) {
      for (var m = [], q = 0; q < h.F.length; q++) {
        let v = h.F[q];
        -1 != At(h.F[q]) && (m.push(v), Mp(v, null), yt(v));
      }
      le();
      Zx({action:$x, ub:1, F:m});
    } else if (h.action == Qx) {
      for (q = 0; q < h.F.length; q++) {
        Bt(h.F[q]), E3(h.F[q]);
      }
      le();
      Zx({action:ay, ub:1, F:h.F});
    }
  }, ls:function(h) {
    if (4 == h.ub) {
      tV(h, !1);
    } else if (8 == h.ub) {
      sV(h, !1);
    } else if (h.action == ay) {
      for (var m = [], q = 0; q < h.F.length; q++) {
        let v = h.F[q];
        -1 != At(v) && (m.push(v), Mp(v, null), yt(v));
      }
      le();
      Px({action:Qx, ub:1, F:m}, !1);
    } else if (h.action == $x) {
      for (q = 0; q < h.F.length; q++) {
        Bt(h.F[q]), E3(h.F[q]);
      }
      le();
      Px({action:Ux, ub:1, F:h.F}, !1);
    }
  }, FI:zV, Xn:ge, uv:function() {
    return nd;
  }, Jx:function() {
    return new mR(qe, Xa, z4, y4, eV, A4, O3, I4, P3, fH);
  }, Pz:e, Qz:d, fy:ak, rA:le, MN:function() {
    return !1;
  }, Pb:ZU, rI:function() {
    return Lg;
  }, Zf:jV, Cm:function() {
    return ul;
  }, II:yV, mb:bH, Bm:AV, Ye:BV, yp:function() {
    return Ab;
  }, uL:OG, tL:NG, Hm:function(h, m) {
    if (!A(h) && -1 != h) {
      switch(m && tf(), h) {
        case 1:
          7 == ki.g ? ZT() : Jf();
          break;
        case 5:
          yU();
          break;
        case 14:
          fV();
          break;
        default:
          tf();
      }
    }
  }, eA:function(h) {
    V && V.Lj() && V.eA(h);
  }, fA:function(h) {
    if (V && V.Lj()) {
      var m = V;
      if (m.l == ZA && m.g) {
        var q = h.strSharedFeedbackDocGUID, v = h.strSharedStudentGUID;
        m.g && (m.g.strSharedNotesDocGUID = h.strSharedNotesDocGUID, m.g.strSharedFeedbackDocGUID = q, m.g.strSharedStudentGUID = v);
        cS(m, $A(m), h.strSharedNotesDocGUID, h.strSharedFeedbackDocGUID, h.strSharedStudentGUID);
        q = h.strSharedNotesDocGUID;
        v = h.strSharedFeedbackDocGUID;
        h = h.strSharedStudentGUID;
        window.top != window && m.m == BN ? iS(m, q, v, h, null) : (h = m.ia(q, v, h), m.v(h));
      }
    }
  }, Lj:function() {
    return V && V.Lj();
  }, kd:hd, sa:Xa, rr:fz, NN:Jf, tI:function() {
    return Jv;
  }, tA:Rm, CE:SG, zE:TG, UN:EU, uI:function() {
    return Y;
  }, by:xU, rE:KU, kq:Gt, nj:function() {
    ac.nj();
    Jv.nj();
  }, jE:function() {
    return Qa;
  }};
}();

 
 
